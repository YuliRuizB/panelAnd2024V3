import './polyfills.server.mjs';
import{Va as d,p as i}from"./chunk-LY2HI3A4.mjs";import{$ as a,ca as n}from"./chunk-BDHSFJ32.mjs";var l=(()=>{class t{constructor(e,s){this.afs=e,this.message=s}getVendors(){return this.afs.collection("vendors").snapshotChanges()}getVendor(e){return this.afs.collection("vendors").doc(e).snapshotChanges()}getVendorRoutesAccess(e){return this.afs.collection("vendors").doc(e).collection("routesAccess").snapshotChanges()}getVendorByCustomer(e){return this.afs.collection("vendors",o=>o.where("customerId","==",e)).snapshotChanges()}getVendorRoutesAccessByCustomer(e){return this.afs.collectionGroup("routesAccess",o=>o.where("customerId","==",e).orderBy("customerName","asc")).snapshotChanges()}createVendor(e){this.message.loading("Guardando ..."),this.afs.collection("vendors").add(e).then(()=>{this.message.remove(),this.message.success("Se genero el cliente correctamente.")}).catch(o=>{this.message.remove(),this.message.error("Hubo un error: ",o)})}updateVendor(e,s){this.message.loading("Actualizando ..."),this.afs.collection("vendors").doc(e).update(s).then(()=>{this.message.remove(),this.message.success("Se Actualizo con exito el cliente.")}).catch(r=>{this.message.remove(),this.message.error("Hubo un error: ",r)})}updateVendorAvatar(e,s){this.message.loading("Actualizando ..."),this.afs.collection("vendors").doc(e).update({avatar:s}).then(()=>{this.message.remove(),this.message.success("Se actualizo la imagen del Cliente")}).catch(r=>{this.message.remove(),this.message.error("Hubo un error: ",r)})}deleteVendor(e){this.message.loading("Eliminando ..."),this.afs.collection("vendors").doc(e).delete().then(()=>{this.message.remove(),this.message.success("Se elimino el cliente correctamente.")}).catch(o=>{this.message.remove(),this.message.error("Hubo un error: ",o)})}toggleVendorActive(e,s){let o=e,r=this.afs.collection("vendors").doc(o),c=this.afs.firestore.batch();return c.set(r.ref,{active:!s},{merge:!0}),c.commit()}static{this.\u0275fac=function(s){return new(s||t)(n(i),n(d))}}static{this.\u0275prov=a({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();export{l as a};
