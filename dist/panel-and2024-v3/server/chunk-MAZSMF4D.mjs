import './polyfills.server.mjs';
import{ca as W,da as h,fa as q,la as B,ma as H}from"./chunk-6DKSDS7R.mjs";import{$a as N,Eb as F,Fb as j,Gb as V,Ia as x,Ib as R,Ja as s,Jb as O,Ka as c,Rb as b,Xa as A,Ya as E,Za as T,_a as z,aa as f,ab as M,ga as d,ha as S,hb as l,ia as v,mb as p,nb as u,nc as P,oa as g,ob as w,pa as C,qa as _,sb as D,sc as Q,ua as y,va as I,vb as G,xb as o}from"./chunk-DK2MOIP3.mjs";import{c as r}from"./chunk-ARRJMVMP.mjs";var U=["textEl"];function L(n,m){if(n&1&&w(0,"span",1),n&2){let e=o();z("nzType",e.nzIcon)}}function X(n,m){if(n&1){let e=D();p(0,"img",4),G("error",function(t){C(e);let a=o();return _(a.imgError(t))}),u()}if(n&2){let e=o();z("src",e.nzSrc,x),T("srcset",e.nzSrcSet)("alt",e.nzAlt)}}function Z(n,m){if(n&1&&(p(0,"span",3,0),R(2),u()),n&2){let e=o();s(2),O(e.nzText)}}var $="avatar",J=(()=>{class n{constructor(e,i,t){this.nzConfigService=e,this.elementRef=i,this.cdr=t,this._nzModuleName=$,this.nzShape="circle",this.nzSize="default",this.nzGap=4,this.nzError=new I,this.hasText=!1,this.hasSrc=!0,this.hasIcon=!1,this.classMap={},this.customSize=null,this.el=this.elementRef.nativeElement}imgError(e){this.nzError.emit(e),e.defaultPrevented||(this.hasSrc=!1,this.hasIcon=!1,this.hasText=!1,this.nzIcon?this.hasIcon=!0:this.nzText&&(this.hasText=!0),this.cdr.detectChanges(),this.setSizeStyle(),this.calcStringSize())}ngOnChanges(){this.hasText=!this.nzSrc&&!!this.nzText,this.hasIcon=!this.nzSrc&&!!this.nzIcon,this.hasSrc=!!this.nzSrc,this.setSizeStyle(),this.calcStringSize()}ngAfterViewInit(){this.calcStringSize()}calcStringSize(){if(!this.hasText||!this.textEl)return;let e=this.textEl.nativeElement,i=e.offsetWidth,t=this.el.getBoundingClientRect?.().width??0,a=this.nzGap*2<t?this.nzGap*2:8,k=t-a<i?(t-a)/i:1;e.style.transform=`scale(${k}) translateX(-50%)`,e.style.lineHeight=this.customSize||""}setSizeStyle(){typeof this.nzSize=="number"?this.customSize=`${this.nzSize}px`:this.customSize=null,this.cdr.markForCheck()}static{this.\u0275fac=function(i){return new(i||n)(c(W),c(y),c(P))}}static{this.\u0275cmp=S({type:n,selectors:[["nz-avatar"]],viewQuery:function(i,t){if(i&1&&F(U,5),i&2){let a;j(a=V())&&(t.textEl=a.first)}},hostAttrs:[1,"ant-avatar"],hostVars:20,hostBindings:function(i,t){i&2&&(N("width",t.customSize)("height",t.customSize)("line-height",t.customSize)("font-size",t.hasIcon&&t.customSize?t.nzSize/2:null,"px"),M("ant-avatar-lg",t.nzSize==="large")("ant-avatar-sm",t.nzSize==="small")("ant-avatar-square",t.nzShape==="square")("ant-avatar-circle",t.nzShape==="circle")("ant-avatar-icon",t.nzIcon)("ant-avatar-image",t.hasSrc))},inputs:{nzShape:"nzShape",nzSize:"nzSize",nzGap:[d.HasDecoratorInputTransform,"nzGap","nzGap",Q],nzText:"nzText",nzSrc:"nzSrc",nzSrcSet:"nzSrcSet",nzAlt:"nzAlt",nzIcon:"nzIcon"},outputs:{nzError:"nzError"},exportAs:["nzAvatar"],standalone:!0,features:[A,g,b],decls:3,vars:3,consts:[["textEl",""],["nz-icon","",3,"nzType"],[3,"src"],[1,"ant-avatar-string"],[3,"error","src"]],template:function(i,t){i&1&&E(0,L,1,1,"span",1)(1,X,1,3,"img",2)(2,Z,3,1,"span",3),i&2&&(l(0,t.nzIcon&&t.hasIcon?0:-1),s(),l(1,t.nzSrc&&t.hasSrc?1:-1),s(),l(2,t.nzText&&t.hasText?2:-1))},dependencies:[H,B,q],encapsulation:2,changeDetection:0})}}return r([h()],n.prototype,"nzShape",void 0),r([h()],n.prototype,"nzSize",void 0),r([h()],n.prototype,"nzGap",void 0),n})();var ft=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=v({type:n})}static{this.\u0275inj=f({imports:[J]})}}return n})();export{J as a,ft as b};
