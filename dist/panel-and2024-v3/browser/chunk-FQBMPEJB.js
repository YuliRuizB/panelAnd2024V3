import{b as ai,c as li}from"./chunk-BB6MMI4T.js";import{a as Zt}from"./chunk-HIVN76BN.js";import{a as It,b as Ut,c as At,d as De,e as pe,g as ri,h as si}from"./chunk-RHHFFL6C.js";import{a as ii,c as ni,d as oi}from"./chunk-LX2FTTKF.js";import{a as Yt}from"./chunk-4PSXTE2T.js";import{c as ei}from"./chunk-ZWEILEML.js";import{a as Ft}from"./chunk-C7EU4JWI.js";import{C as Qt,D as Kt,E as Jt,H as ti,a as ue,c as he,d as fe,e as Bt,k as ze,n as jt,o as Wt,x as qt}from"./chunk-77UG634U.js";import{$ as Tt,H as Nt,P as ae,Q as le,R as ce,S as de,_ as me,aa as Ve,b as Z,c as F,d as O,da as Vt,e as Y,ea as $e,fa as Dt,g as ve,h as Fe,i as ee,ja as Le,k as te,m as ie,ma as Gt,na as Xt,pa as Ie,q as ne,qa as Ue,r as vt,sa as $t,t as re,ta as Ae,u as se,ua as Ht,w as xt,x as wt}from"./chunk-ESHSJ4UG.js";import{a as Lt,c as kt,f as ke,g as Ot,i as Mt,j as Pt}from"./chunk-UZE4SSVE.js";import{$ as lt,$b as Te,Ae as oe,Bf as M,Cb as zt,Cf as P,Da as xe,De as Re,Ea as C,Ef as G,F as nt,Ff as Et,G as ot,Ga as l,Gf as Rt,Ia as Ce,Ib as N,Id as bt,Ka as mt,L as rt,M as K,Mb as J,Nb as H,O as U,Pa as E,Q as be,R as st,Ra as pt,Rc as Ee,Sa as ut,Sd as q,Ta as ht,Td as We,Ua as r,V as at,Va as a,Wa as _,Xa as Xe,Y as w,Ya as Be,Z as B,Za as ft,_ as R,_a as g,_b as Se,ac as _t,b as et,bb as z,bc as Ct,c as Q,cc as gt,db as u,fa as Ge,ga as h,ha as f,ie as yt,kb as j,l as Pe,la as ye,lb as W,m as v,ma as k,mb as $,nb as b,ob as d,pb as y,pd as je,qb as x,rb as we,s as tt,sa as s,ta as S,tb as V,ub as D,v as it,va as ct,vb as L,wa as dt,xb as Ne,yb as ge,zb as A,zc as St}from"./chunk-W3I2I5DW.js";import{a as T,f as Oe,h as Me}from"./chunk-SIAVTO45.js";var _e=Oe($e()),I=Oe($e());var Fi=["searchBar"],Ei=["searchBarDrive"],Ri=n=>({open:n}),Vi=()=>({y:"calc(100vh - 120px)"}),Di=()=>[];function Li(n,p){if(n&1&&(r(0,"nz-option",32),d(1),a()),n&2){let e=p.$implicit;l("nzLabel",e.name)("nzValue",e.id),s(),x(" ",e.name," ")}}function ki(n,p){n&1&&_(0,"span",33)}function Ii(n,p){n&1&&_(0,"span",33)}function Ui(n,p){n&1&&_(0,"i",43)}function Ai(n,p){if(n&1){let e=g();r(0,"tr",36),z("click",function(){let t=h(e).$implicit,o=u(2);return f(o.userSelected(t))}),r(1,"td")(2,"div",37)(3,"div",38)(4,"h6",39),C(5,Ui,1,0,"i",40),d(6),a(),Xe(7),r(8,"p",41),d(9),_(10,"nz-badge",42),d(11),_(12,"br"),d(13),a(),Be(),a()()()()}if(n&2){let e=p.$implicit;s(5),l("ngIf",e.disabled),s(),x(" ",e.displayName,""),s(3),x(" ",e.studentId," "),s(),l("nzStatus",e.emailVerified?"success":"error"),s(),x(" ",e.email," "),s(2),x(" ",e.customerName," ")}}function Oi(n,p){if(n&1&&(r(0,"nz-table",34,6)(2,"tbody"),C(3,Ai,14,6,"tr",35),a()()),n&2){let e=b(1),i=u();l("nzData",i.devicesList)("nzShowPagination",!0)("nzPageSize",30)("nzScroll",ge(5,Vi)),s(3),l("ngForOf",e.data)}}function Mi(n,p){n&1&&_(0,"i",43)}function Pi(n,p){if(n&1&&(r(0,"div",44),Xe(1),r(2,"div",37)(3,"a",45),_(4,"i",46),a(),r(5,"div"),_(6,"nz-avatar",47),a(),r(7,"div",38)(8,"h6",39),C(9,Mi,1,0,"i",40),d(10),a(),r(11,"p",48),_(12,"nz-badge",42),r(13,"span"),d(14),a()()()(),Be(),a()),n&2){let e=u();s(3),l("routerLink",ge(6,Di)),s(3),l("nzSrc",e.currentUserSelected.photoURL),s(3),l("ngIf",e.currentUserSelected.disabled),s(),x(" ",e.currentUserSelected.displayName," "),s(2),l("nzStatus",e.currentUserSelected.emailVerified?"success":"error"),s(2),x(" ",e.currentUserSelected.email," ")}}function Gi(n,p){if(n&1){let e=g();r(0,"li",70),z("click",function(){let t=h(e).$implicit,o=u(2);return f(o.onSegmentSelected(t))}),d(1),a()}if(n&2){let e=p.$implicit,i=u(2);Ce("selected",i.selectedSegmentId===e.id),s(),we(" ",e.nivelNum," - ",e.nivel," ")}}function Xi(n,p){if(n&1){let e=g();r(0,"nz-tabset",49)(1,"nz-tab",50),z("nzClick",function(){h(e);let t=u();return f(t.nzClicOptionInformacion())}),r(2,"div")(3,"button",51),z("click",function(){h(e);let t=u();return f(t.showModalEditUser(t.currentUserSelected))}),_(4,"i",52),d(5," Asignar Rol "),a(),r(6,"div")(7,"nz-descriptions",53)(8,"nz-descriptions-item",54),d(9),a(),r(10,"nz-descriptions-item",55),d(11),a(),r(12,"nz-descriptions-item",56),d(13),a(),r(14,"nz-descriptions-item",57),d(15),a(),r(16,"nz-descriptions-item",58),d(17),a(),r(18,"nz-descriptions-item",59),d(19),a(),r(20,"nz-descriptions-item",60),d(21),a(),r(22,"nz-descriptions-item",61),d(23),a(),r(24,"nz-descriptions-item",62),d(25),a(),r(26,"nz-descriptions-item",63),d(27),a()()()()(),r(28,"nz-tab",64),z("nzClick",function(){h(e);let t=u();return f(t.nzClicOptionSegment(t.currentUserSelected))}),r(29,"div"),d(30),a(),r(31,"div")(32,"nz-button-group")(33,"button",65),z("click",function(){h(e);let t=u();return f(t.log(1))}),d(34,"Segmentos"),a(),r(35,"button",66),_(36,"span",67),a(),r(37,"nz-dropdown-menu",null,7)(39,"ul",68),C(40,Gi,2,4,"li",69),a()()()(),r(41,"div")(42,"button",51),z("click",function(){h(e);let t=u();return f(t.saveSegment(t.currentUserSelected))}),_(43,"i",52),d(44," Guardar"),a()()()()}if(n&2){let e=b(38),i=u();s(9),y(i.currentUserSelected.firstName),s(2),y(i.currentUserSelected.lastName),s(2),y(i.currentUserSelected.email),s(2),y(i.currentUserSelected.emailVerified),s(2),y(i.currentUserSelected.displayName),s(2),y(i.currentUserSelected.username),s(2),x(" ",i.currentUserSelected.disabled?"Suspendido":"Activo"," "),s(2),y(i.rolesperUser),s(2),y(i.rolesperUserAplicacion),s(2),y(i.currentUserSelected.status),s(3),x(" Actual Segmento Seleccionado : ",i.selectedSegmentName," "),s(5),l("nzDropdownMenu",e),s(5),l("ngForOf",i.segmentList)}}function Bi(n,p){n&1&&d(0,` Asignar Rol
`)}function ji(n,p){if(n&1&&(r(0,"nz-option",32),_(1,"i",52),d(2),a()),n&2){let e=p.$implicit;l("nzLabel",e.name)("nzValue",e.uid),s(2),x(" ",e.description,"")}}function Wi(n,p){if(n&1){let e=g();r(0,"form",71),z("ngSubmit",function(){h(e);let t=u();return f(t.submitForm())}),r(1,"nz-form-item")(2,"nz-form-label",72),d(3,"Rol"),a(),r(4,"nz-form-control",72)(5,"nz-select",73),C(6,ji,3,3,"nz-option",15),a()()()()}if(n&2){let e=u();l("formGroup",e.validateEditForm),s(2),l("nzSm",6)("nzXs",24),s(2),l("nzSm",14)("nzXs",24),s(2),l("ngForOf",e.roles)}}function $i(n,p){if(n&1){let e=g();r(0,"button",74),z("click",function(){h(e);let t=u();return f(t.handleCancel())}),d(1,"Cancelar"),a(),r(2,"button",74),z("click",function(){h(e);let t=u();return f(t.submitEditForm())}),d(3,"Guardar"),a()}}var so=(()=>{class n{constructor(e,i,t){this.afs=e,this.msg=i,this.fb=t,this.customersService=w(Vt),this.rolService=w(ue),this.authService=w(Re),this.isContentOpen=!1,this.loadedDevicesList=[],this.loadedDevicesListDrive=[],this.accountId$=new Q,this.routeId$=new Q,this.isUserSelected=!1,this.isDriverSelected=!1,this.isBoardingPassSelected=!1,this.stopPointsList=[],this.isEditUserVisible=!1,this.isCustomersVisible=!1,this.userRoutes=[],this.fileListInfo=[],this.newCustomerIdEditMode="",this.isConfirmLoading=!1,this.resetClientEditInfo=!1,this.isVisible=!1,this.isLoadingUsers=!1,this.isLoadingDrivers=!1,this.usersByAccount=[],this.hasBeenFiltered=!1,this.infoLoad=[],this.vendorinfo=[],this.vendorName="",this.userinfoLoad=[],this.routesService=w($t),this.vendorService=w(Zt),this.accountsService=w(ke),this.stopSubscription$=new Q,this.infoSegment=[],this.isCollapsed=!0,this.customersList=[],this.checkOptionsOne=[],this.userCustomerId="",this.selectedOption="",this.authService.user.subscribe(o=>{o&&(this.user=o,this.user!==null&&this.user!==void 0&&this.user.rolId!==void 0&&(this.userCustomerId=this.user.customerId,this.rolService.getRol(this.user.rolId).valueChanges().subscribe(c=>{this.infoLoad=c,this.userlevelAccess=this.infoLoad.optionAccessLavel}),this.accountsService.getSegmentLevel(this.user.idSegment).pipe(U(this.stopSubscription$),v(c=>{let m=c.payload.id,X=c.payload.data();return T({id:m},X)}),be(c=>(this.infoSegment=c,this.getCustomersList(),c))).subscribe()))})}ngOnInit(){let e=this.accountId$.pipe(K(o=>this.afs.collection("customers").doc(o).collection("routes",c=>c.where("active","==",!0)).valueChanges({idField:"routeId"}))),i=this.accountId$.pipe(K(o=>this.afs.collection("users",c=>c.where("customerId","==",o).orderBy("studentId")).valueChanges({idField:"uid"}))),t=this.accountId$.pipe(K(o=>this.afs.collection("roles",c=>c.where("active","==",!0)).valueChanges({idField:"uid"})));i.subscribe(o=>{this.usersByAccount=o}),t.subscribe(o=>{this.roles=o}),this.validateEditForm=this.fb.group({rolId:[""],roles:[""]})}getCustomersList(){this.infoSegment.nivelNum!==void 0&&this.infoSegment.nivelNum==1?this.afs.collection("customers").doc(this.user.customerId).snapshotChanges().pipe(U(this.stopSubscription$),v(i=>{let t=i.payload.id,o=i.payload.data();return T({id:t},o)}),be(i=>(this.customersList=[i],this.checkOptionsOne=[{value:i.id,label:i.name}],i))).subscribe():this.afs.collection("customers",i=>i.orderBy("name")).snapshotChanges().pipe(U(this.stopSubscription$),v(i=>i.map(t=>{let o=t.payload.doc.id,c=t.payload.doc.data();return T({id:o},c)})),be(i=>(this.customersList=i,this.checkOptionsOne=i.map(t=>({value:t.id,label:t.name})),i))).subscribe()}ngOnDestroy(){this.stopSubscription$.next(void 0),this.stopSubscription$.complete()}initializeItems(){this.devicesList=this.loadedDevicesList,this.devicesListDrive=this.loadedDevicesListDrive}getItemsByEmail(e){this.isLoadingUsers=!0,this.afs.collection("users",i=>i.where("email","==",e)).snapshotChanges().pipe(v(i=>i.map(t=>{let o=t.payload.doc.id,c=t.payload.doc.data();return T({id:o},c)}))).subscribe(i=>{this.loadUsers(i),this.isCollapsed=!1})}getUsersList(){if(!this.selectedOption){console.error("Error: selectedOption es null o undefined");return}this.isLoadingUsers=!0,this.afs.collection("users",e=>e.where("customerId","==",this.selectedOption)).get().subscribe({next:e=>{let i=[];e.forEach(t=>{i.push(t.data())}),this.loadUsers(i),this.isCollapsed=!1,this.isLoadingUsers=!1},error:e=>{console.error("Error al obtener usuarios:",e),this.isLoadingUsers=!1}})}getDriversList(){this.isLoadingDrivers=!0,this.infoSegment.nivelNum!==void 0&&this.infoSegment.nivelNum==1?(this.driversCollection=this.afs.collection("drivers",e=>e.where("customerId","==",this.user.customerId).orderBy("displayName")),this.users=this.driversCollection.snapshotChanges().pipe(v(e=>e.map(i=>{let t=i.payload.doc.id,o=i.payload.doc.data();return T({id:t},o)}))).subscribe(e=>{this.loadDrivers(e)})):(this.driversCollection=this.afs.collection("drivers",e=>e.orderBy("displayName")),this.users=this.driversCollection.snapshotChanges().pipe(v(e=>e.map(i=>{let t=i.payload.doc.id,o=i.payload.doc.data();return T({id:t},o)}))).subscribe(e=>{this.loadDrivers(e)}))}loadUsers(e){this.loadedDevicesList.length<=1&&(this.displayData=e,this.devicesList=_e.orderBy(JSON.parse(JSON.stringify(e)),["displayName"],["asc"]),this.loadedDevicesList=this.devicesList)}loadDrivers(e){this.loadedDevicesListDrive.length<=1&&(this.displayDataDriver=e,this.devicesListDrive=_e.orderBy(JSON.parse(JSON.stringify(e)),["displayName"],["asc"]),this.loadedDevicesListDrive=this.devicesListDrive)}getItems(e){this.initializeItems();let i=e;if(!i)return;let t=_e.toLower(i);this.devicesList=(0,I.filter)(this.devicesList,o=>(0,I.some)(o,c=>(0,I.toLower)(c).includes(t)))}getItemsDrive(e){this.initializeItems();let i=e;if(!i)return;let t=_e.toLower(i);this.devicesListDrive=(0,I.filter)(this.devicesList,o=>(0,I.some)(o,c=>(0,I.toLower)(c).includes(t)))}userSelected(e){this.rolesperUser="",this.rolesperUserAplicacion="",this.currentUserSelected=e,this.RolesArray=e.roles,this.rolesperUserAplicacion=this.RolesArray?.length?this.RolesArray.join(", "):"user",e.rolId!=null&&e.rolId.length>0&&this.rolService.getRol(e.rolId).valueChanges().subscribe(i=>{this.infoLoad=i,this.rolesperUser=this.infoLoad.description}),this.currentSelectedCustomerId=this.currentUserSelected.customerId,this.isBoardingPassSelected=!1,this.accountId$.next(this.currentUserSelected.customerId),this.isUserSelected=!0}driverSelected(e){this.vendorName="",this.rolesperUser="",this.rolesperUserAplicacion="",this.currentDriverSelected=e,this.RolesArray=e.roles,this.rolesperUserAplicacion=this.RolesArray.join(", "),e.rolId!=null&&e.rolId.length>0&&this.rolService.getRol(e.rolId).valueChanges().subscribe(i=>{this.infoLoad=i,this.rolesperUser=this.infoLoad.name}),e.vendorId!=null&&this.vendorService.getVendor(e.vendorId).pipe(v(i=>{let t=i.payload.id,o=i.payload.data();return T({id:t},o)})).subscribe(i=>{this.vendorinfo=i,this.vendorName=this.vendorinfo.name}),this.isBoardingPassSelected=!1,this.isDriverSelected=!0}setUserDisabled(e){this.customersService.setUserDisabled(this.currentUserSelected.uid,e),this.currentUserSelected.disabled=e}nzClicOptionInformacion(){this.isBoardingPassSelected=!1}nzClicOptionSegment(e){this.customersService.getAllSegments().pipe(v(i=>i.map(t=>{let o=t.payload.doc.id,c=t.payload.doc.data();return T({id:o},c)}))).subscribe(i=>{this.segmentList=i;let t=this.segmentList.find(o=>o.id===e.idSegment);t&&(this.selectedSegmentName=t.nivel)}),e!==null&&e.idSegment!==void 0&&(this.selectedSegmentId=e.idSegment)}onSegmentSelected(e){this.selectedSegmentName=e.nivel,this.selectedSegmentId=e.id}log(e){this.devicesList=[]}showModalEditUser(e){this.isEditUserVisible=!0}saveSegment(e){this.customersService.saveSegmentId(e.uid,this.selectedSegmentId)}showModalEditDriver(e){this.isEditUserVisible=!1}showModalCustomer(){}showModal(){this.isVisible=!0}handleCancel(){this.isEditUserVisible=!1}submitForm(){}submitEditForm(){let e=this.validateEditForm.controls.rolId.value==null?"":this.validateEditForm.controls.rolId.value,i=this.currentUserSelected.uid,t=!0,o={uid:i,rolId:e};t?this.userlevelAccess!="3"?this.rolService.updateUserRol(this.currentUserSelected.uid,o).then(c=>{this.isEditUserVisible=!1}).catch(c=>{this.msg.error(c)}):this.msg.error("El usuario no tiene permisos para actualizar datos, favor de contactar al administrador."):this.msg.success("El Formulario no es valido favor de validar")}submitCustomerForm(){}searchloadUsers(){this.getUsersList()}static{this.\u0275fac=function(i){return new(i||n)(S(Ee),S(oe),S(ne))}}static{this.\u0275cmp=R({type:n,selectors:[["app-list"]],viewQuery:function(i,t){if(i&1&&(j(Fi,5),j(Ei,5)),i&2){let o;W(o=$())&&(t.searchbar=o.first),W(o=$())&&(t.searchbarDrive=o.first)}},decls:47,vars:22,consts:[["searchInput",""],["suffixIconSearch",""],["searchInputEmail",""],["modalUserTitle",""],["modalUserContent",""],["modalUserFooter",""],["basicTable",""],["menu1","nzDropdownMenu"],[2,"margin","buttom 15px","margin-right","15px","margin-left","15px"],[2,"background-color","#f9fbfd",3,"nzGhost"],[2,"margin-left","350px"],[1,"chat-header",2,"background-color","#f9f9f9"],[3,"nzHeader","nzActive"],[2,"display","flex","align-items","center","gap","15px"],["nzPlaceHolder","Selecciona un cliente",2,"width","450px",3,"ngModelChange","ngModel"],["nzCustomContent","",3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[2,"flex-grow","1",3,"nzSuffix"],["type","text","nz-input","","placeholder","Buscar",3,"keyup"],["type","text","nz-input","","placeholder","Buscar por Correo",3,"keyup.enter"],["nz-button","","nzType","primary",1,"m-r-10",3,"click"],["nzCollapsible","",2,"background-color","white","border","1px solid #ccc !important","height","100vh","overflow-y","auto",3,"nzCollapsedChange","nzCollapsed","nzWidth","nzTrigger"],[1,"chat-user-list"],["style","height: 100%;",3,"nzData","nzShowPagination","nzPageSize","nzScroll",4,"ngIf"],[2,"background-color","white","border","1px solid #ccc !important"],["nz-icon","",1,"trigger",3,"click","nzType"],[2,"background-color","white !important","border","1px solid #ccc !important","padding","20px",3,"ngClass"],[1,"conversation"],[1,"conversation-wrapper"],["class","conversation-header justify-content-between",4,"ngIf"],[1,"body"],["style","width: 100% !important; overflow-y: scroll !important; height: 100% !important;",4,"ngIf"],[3,"nzVisibleChange","nzOnCancel","nzVisible","nzTitle","nzContent","nzFooter","nzWidth"],["nzCustomContent","",3,"nzLabel","nzValue"],["nz-icon","","nzType","search"],[2,"height","100%",3,"nzData","nzShowPagination","nzPageSize","nzScroll"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"media","align-items-center"],[1,"p-l-15"],[1,"m-b-0"],["nz-icon","","nzTheme","twotone","nzTwotoneColor","#de4436",4,"ngIf"],[1,"msg-overflow","m-b-0","text-muted","font-size-13"],[3,"nzStatus"],["nz-icon","","nzTheme","twotone","nzTwotoneColor","#de4436"],[1,"conversation-header","justify-content-between"],[1,"m-r-20","d-md-none","d-block","text-dark","font-size-18","m-t-5",3,"routerLink"],["nz-icon","","type","left-circle","theme","outline"],["nzShape","square","nzIcon","user",1,"shadow",2,"background-color","white","color","#4F6F57",3,"nzSrc"],[1,"m-b-0","text-muted","font-size-13"],[2,"width","100% !important","overflow-y","scroll !important","height","100% !important"],["nzTitle","Informacion General",3,"nzClick"],["nz-button","",1,"m-r-10",2,"background-color","#4F6F57","color","#f6f3ea",3,"click"],["nz-icon",""],["nzBordered","","nzSize","small"],["nzTitle","Nombre"],["nzTitle","Apellidos"],["nzTitle","Email"],["nzTitle","Correo Valido"],["nzTitle","Display Name"],["nzTitle","Usuario"],["nzTitle","Activo"],["nzTitle","Rol Administrativo"],["nzTitle","Rol Aplicaciones"],["nzTitle","Estatus"],["nzTitle","Segmentaci\xF3n",3,"nzClick"],["nz-button","",3,"click"],["nz-button","","nz-dropdown","","nzPlacement","bottomRight",3,"nzDropdownMenu"],["nz-icon","","nzType","ellipsis"],["nz-menu",""],["nz-menu-item","",3,"selected","click",4,"ngFor","ngForOf"],["nz-menu-item","",3,"click"],["nz-form","","nzLayout","horizontal",3,"ngSubmit","formGroup"],[3,"nzSm","nzXs"],["formControlName","rolId","nzAllowClear","","nzPlaceHolder","Selecciona el Rol"],["nz-button","",2,"background-color","#4F6F57","color","#f6f3ea",3,"click"]],template:function(i,t){if(i&1){let o=g();r(0,"div",8)(1,"nz-layout")(2,"nz-layout")(3,"nz-page-header",9)(4,"nz-page-header-title",10),d(5,"Perfiles"),a(),r(6,"nz-page-header-subtitle"),d(7,"Perfiles de usuarios del Sistema "),a()(),r(8,"nz-page-header-content")(9,"div",11)(10,"nz-collapse")(11,"nz-collapse-panel",12)(12,"div",13)(13,"nz-select",14),L("ngModelChange",function(m){return h(o),D(t.selectedOption,m)||(t.selectedOption=m),f(m)}),z("ngModelChange",function(m){return h(o),f(t.log(m))}),C(14,Li,2,3,"nz-option",15),a(),r(15,"nz-input-group",16)(16,"input",17,0),z("keyup",function(){h(o);let m=b(17);return f(t.getItems(m.value))}),a()(),C(18,ki,1,0,"ng-template",null,1,N),r(20,"nz-input-group",16)(21,"input",18,2),z("keyup.enter",function(){h(o);let m=b(22);return f(t.getItemsByEmail(m.value))}),a()(),C(23,Ii,1,0,"ng-template",null,1,N),r(25,"button",19),z("click",function(){return h(o),f(t.searchloadUsers())}),d(26,"Cargar Usuarios"),a()()()()()()(),r(27,"nz-layout")(28,"nz-sider",20),L("nzCollapsedChange",function(m){return h(o),D(t.isCollapsed,m)||(t.isCollapsed=m),f(m)}),r(29,"div",21),C(30,Oi,4,6,"nz-table",22),a()(),r(31,"nz-layout")(32,"nz-header",23)(33,"span",24),z("click",function(){return h(o),f(t.isCollapsed=!t.isCollapsed)}),a()(),r(34,"div",25)(35,"div",26)(36,"div",27),C(37,Pi,15,7,"div",28),r(38,"div",29),C(39,Xi,45,13,"nz-tabset",30),a()()()()()()()(),r(40,"nz-modal",31),L("nzVisibleChange",function(m){return h(o),D(t.isEditUserVisible,m)||(t.isEditUserVisible=m),f(m)}),z("nzOnCancel",function(){return h(o),f(t.handleCancel())}),C(41,Bi,1,0,"ng-template",null,3,N)(43,Wi,7,6,"ng-template",null,4,N)(45,$i,4,0,"ng-template",null,5,N),a()}if(i&2){let o=b(19),c=b(42),m=b(44),X=b(46);s(3),l("nzGhost",!1),s(8),l("nzHeader","Filtros avanzados")("nzActive",!0),s(2),V("ngModel",t.selectedOption),s(),l("ngForOf",t.customersList),s(),l("nzSuffix",o),s(5),l("nzSuffix",o),s(8),V("nzCollapsed",t.isCollapsed),l("nzWidth",330)("nzTrigger",null),s(2),l("ngIf",(t.devicesList==null?null:t.devicesList.length)>0),s(3),l("nzType",t.isCollapsed?"menu-unfold":"menu-fold"),s(),l("ngClass",A(20,Ri,t.isContentOpen)),s(3),l("ngIf",t.isUserSelected),s(2),l("ngIf",t.isUserSelected),s(),V("nzVisible",t.isEditUserVisible),l("nzTitle",c)("nzContent",m)("nzFooter",X)("nzWidth",600)}},dependencies:[Se,Te,_t,q,se,re,le,ae,de,ce,me,Ve,Tt,Kt,qt,Qt,Jt,Le,Ft,ii,oi,ni,si,ri,pe,At,De,kt,Lt,Ot,Pt,Mt,G,Et,M,P,ze,he,fe,Bt,Ie,Ue,St,ee,O,Y,te,ie,Fe,Wt,jt]})}}return n})();var So=(()=>{class n{constructor(e,i,t){this.fb=e,this.bucketStorage=i,this.messageService=t,this.userService=w(Dt),this.authService=w(Re),this.rolService=w(ue),this.accountService=w(ke),this.userRol="",this.infoLoad=[],this.avatarUrl="http://themenate.com/applicator/dist/assets/images/avatars/thumb-13.jpg",this.uploading=!1,this.bucketPath="profile/",this.userForm=[],this.uploadvalue=0,this.confirmationValidator=o=>{if(o.value){if(o.value!==this.validateForm.controls.password.value)return{confirm:!0,error:!0}}else return{required:!0};return{}},this.beforeUpload=o=>!1,this.validateForm=this.fb.group({email:new ve({value:"",disabled:!0},F.required),firstName:[null,[F.required]],lastName:[null,[F.required]],phoneNumber:[""],username:[""],displayName:[""],emailVerified:new ve({value:"",disabled:!0}),userRol:new ve({value:"",disabled:!0}),customerName:new ve({value:"",disabled:!0}),photoURL:[""],idPRepa2:[]}),this.authService.user.subscribe(o=>{o&&(this.user=o,this.user!==null&&this.user!==void 0&&this.user.rolId!==void 0&&this.rolService.getRol(this.user.rolId).valueChanges().subscribe(c=>{this.infoLoad=c,this.userRol=this.infoLoad.description,this.userlevelAccess=this.infoLoad.optionAccessLavel,this.fillInfo()}))})}ngOnInit(){}borrar(){var e=this.validateForm.controls.idPRepa2.value;this.accountService.getUserAccountDeleteByData(e)}done(){if(this.validateForm.valid){let e={displayName:this.validateForm.controls.displayName.value,firstName:this.validateForm.controls.firstName.value,lastName:this.validateForm.controls.lastName.value,phoneNumber:this.validateForm.controls.phoneNumber.value};this.userlevelAccess!="3"?this.userService.updateUserCollection(this.user.uid,e).then(i=>{this.sendMessage("success","Se actualiz\xF3 con exito!")}).catch(i=>{this.sendMessage("error",i)}):this.sendMessage("error","El usuario no tiene permisos para actualizar datos, favor de contactar al administrador.")}}fillInfo(){this.user&&(this.validateForm.controls.photoURL.setValue(this.user.photoURL),this.validateForm.controls.displayName.setValue(this.user.displayName),this.validateForm.controls.firstName.setValue(this.user.firstName),this.validateForm.controls.lastName.setValue(this.user.lastName),this.validateForm.controls.username.setValue(this.user.username),this.validateForm.controls.phoneNumber.setValue(this.user.phoneNumber),this.validateForm.controls.email.setValue(this.user.email),this.validateForm.controls.emailVerified.setValue(this.user.emailVerified),this.validateForm.controls.userRol.setValue(this.userRol),this.validateForm.controls.customerName.setValue(this.user.customerName))}updateConfirmValidator(){Promise.resolve().then(()=>this.validateForm.controls.checkPassword.updateValueAndValidity())}getBase64(e,i){let t=new FileReader;t.addEventListener("load",()=>{t.result!==null&&typeof t.result=="string"?i(t.result):this.sendMessage("error","FileReader invalido")}),t.readAsDataURL(e)}handleChange(e){e.file.originFileObj&&this.getBase64(e.file.originFileObj,i=>{this.avatarUrl=i;let t=e.file.name,o=`${this.bucketPath}/${t}`,c=this.bucketStorage.ref(o);this.task=this.bucketStorage.ref(o).putString(i,"data_url"),this.uploadPercent=this.task.percentageChanges(),this.uploadPercent.pipe(v(m=>Number((m/100).toFixed(2)))).subscribe(m=>{this.uploading=m!=0,this.uploadvalue=m}),this.task.snapshotChanges().pipe(ot(()=>{this.uploading=!1,this.downloadURL=c.getDownloadURL(),this.downloadURL.subscribe(m=>Me(this,null,function*(){this.updatePhotoURL(m),this.sendMessage("sucess","Se actualiz\xF3 con \xE9xito la imagen de perfil")}))})).subscribe()})}sendMessage(e,i){this.messageService.create(e,i)}updatePhotoURL(e){return Me(this,null,function*(){this.validateForm.controls.photoURL.patchValue(e),this.userlevelAccess!="3"?this.userService.updateUserAvatar(this.user.uid,e):this.sendMessage("error","El usuario no tiene permisos para actualizar datos, favor de contactar al administrador.")})}static{this.\u0275fac=function(i){return new(i||n)(S(ne),S(Yt),S(oe))}}static{this.\u0275cmp=R({type:n,selectors:[["ng-component"]],decls:77,vars:48,consts:[[2,"margin","buttom 15px","margin-right","15px","margin-left","15px"],[1,"site-page-header-ghost-wrapper"],[2,"background-color","#f9fbfd",3,"nzGhost"],[2,"margin-left","350px"],[1,"body",2,"margin","buttom 15px","margin-top","15px"],[1,"container-fluid","p-h-0"],["nz-form","",3,"ngSubmit","formGroup"],[2,"margin-top","15px"],[3,"nzSm","nzXs"],["nzName","avatar","nzAction","action",3,"nzChange","nzShowUploadList"],["nz-button","","nzGhost","",2,"background-color","#4F6F57","color","#f6f3ea"],["nzFor","displayName","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","Por favor ingresar el display name",3,"nzSm","nzXs"],["nz-input","","id","displayName","formControlName","displayName"],["nzFor","firstName","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","Por favor ingrese su nombre completo",3,"nzSm","nzXs"],["nz-input","","id","firstName","formControlName","firstName"],["nzFor","lastName","nzRequired","",3,"nzSm","nzXs"],["nz-input","","id","lastName","formControlName","lastName"],["nzFor","username","nzRequired","",3,"nzSm","nzXs"],["nz-input","","id","username","formControlName","username"],["nzFor","phoneNumber","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","Ingrese su numero de tel\xE9fono",3,"nzSm","nzXs","nzValidateStatus"],["formControlName","phoneNumber","id","'phoneNumber'","nz-input",""],["nzRequired","","nzFor","email",3,"nzSm","nzXs"],["nzErrorTip","Por favor escriba un correo electr\xF3nico",3,"nzSm","nzXs"],["nz-input","","formControlName","email","id","email"],["nzFor","emailVerified","nzRequired","",3,"nzSm","nzXs"],["nz-input","","id","emailVerified","formControlName","emailVerified"],["nzFor","customerName","nzRequired","",3,"nzSm","nzXs"],["nz-input","","id","customerName","formControlName","customerName"],["nzHasFeedback","",3,"nzSm","nzXs"],["nz-input","","id","userRol","formControlName","userRol"],["nz-button","","type","submit",2,"background-color","#4F6F57","color","#f6f3ea",3,"click"]],template:function(i,t){i&1&&(r(0,"div",0)(1,"div",1)(2,"nz-page-header",2)(3,"nz-page-header-title",3),d(4,"Mi Perfil"),a(),r(5,"nz-page-header-subtitle"),d(6,"Mi Informaci\xF3n de Perfil "),a()()(),r(7,"div",4)(8,"nz-layout",5)(9,"form",6),z("ngSubmit",function(){return t.done()}),r(10,"nz-form-item",7)(11,"nz-form-label",8)(12,"span"),d(13,"Foto"),a()(),r(14,"nz-form-control",8)(15,"nz-upload",9),z("nzChange",function(c){return t.handleChange(c)}),r(16,"button",10)(17,"span"),d(18,"Cambiar im\xE1gen"),a()()()()(),r(19,"nz-form-item")(20,"nz-form-label",11)(21,"span"),d(22,"Display Name"),a()(),r(23,"nz-form-control",12),_(24,"input",13),a()(),r(25,"nz-form-item")(26,"nz-form-label",14)(27,"span"),d(28," Nombre(s)"),a()(),r(29,"nz-form-control",15),_(30,"input",16),a()(),r(31,"nz-form-item")(32,"nz-form-label",17)(33,"span"),d(34," Apellido(s)"),a()(),r(35,"nz-form-control",15),_(36,"input",18),a()(),r(37,"nz-form-item")(38,"nz-form-label",19)(39,"span"),d(40," Usuario "),a()(),r(41,"nz-form-control",15),_(42,"input",20),a()(),r(43,"nz-form-item")(44,"nz-form-label",21),d(45,"Tel\xE9fono"),a(),r(46,"nz-form-control",22)(47,"nz-input-group"),_(48,"input",23),a()()(),r(49,"nz-form-item")(50,"nz-form-label",24),d(51,"Correo"),a(),r(52,"nz-form-control",25),_(53,"input",26),a()(),r(54,"nz-form-item")(55,"nz-form-label",27)(56,"span"),d(57," Correo verificado"),a()(),r(58,"nz-form-control",8),_(59,"input",28),a()(),r(60,"nz-form-item")(61,"nz-form-label",29)(62,"span"),d(63," Empresa "),a()(),r(64,"nz-form-control",8),_(65,"input",30),a()(),r(66,"nz-form-item")(67,"nz-form-label",8),d(68,"Rol del usuario"),a(),r(69,"nz-form-control",31),_(70,"input",32),a()(),r(71,"nz-form-item"),_(72,"nz-form-label",8),r(73,"nz-form-control",8)(74,"button",33),z("click",function(){return t.done()}),r(75,"span"),d(76,"Actualizar"),a()()()()()()()()),i&2&&(s(2),l("nzGhost",!1),s(7),l("formGroup",t.validateForm),s(2),l("nzSm",6)("nzXs",24),s(3),l("nzSm",14)("nzXs",24),s(),l("nzShowUploadList",!1),s(5),l("nzSm",6)("nzXs",24),s(3),l("nzSm",14)("nzXs",24),s(3),l("nzSm",6)("nzXs",24),s(3),l("nzSm",14)("nzXs",24),s(3),l("nzSm",6)("nzXs",24),s(3),l("nzSm",14)("nzXs",24),s(3),l("nzSm",6)("nzXs",24),s(3),l("nzSm",14)("nzXs",24),s(3),l("nzSm",6)("nzXs",24),s(2),l("nzSm",14)("nzXs",24)("nzValidateStatus",t.validateForm.controls.phoneNumber),s(4),l("nzSm",6)("nzXs",24),s(2),l("nzSm",14)("nzXs",24),s(3),l("nzSm",6)("nzXs",24),s(3),l("nzSm",14)("nzXs",24),s(3),l("nzSm",6)("nzXs",24),s(3),l("nzSm",14)("nzXs",24),s(3),l("nzSm",6)("nzXs",24),s(2),l("nzSm",14)("nzXs",24),s(3),l("nzSm",6)("nzXs",24),s(),l("nzSm",14)("nzXs",24))},dependencies:[se,re,le,ae,de,ce,me,Ve,ei,pe,G,M,P,ze,he,fe,ee,Z,O,Y,te,ie]})}}return n})();var Ci=Oe($e());var Hi=["nz-transfer-search",""],qi=n=>({"ant-input-disabled":n});function Qi(n,p){if(n&1){let e=g();r(0,"span",4),z("click",function(){h(e);let t=u();return f(t._clear())}),_(1,"span",5),a()}}var Ki=["headerCheckbox"],Ji=["checkboxes"],Zi=n=>({"ant-transfer__nodata":n}),Yi=(n,p,e,i,t,o)=>({$implicit:n,direction:p,disabled:e,onItemSelectAll:i,onItemSelect:t,stat:o}),en=n=>({"ant-transfer-list-content-item-disabled":n}),zi=n=>({$implicit:n});function tn(n,p){if(n&1){let e=g();r(0,"label",10,0),z("nzCheckedChange",function(t){h(e);let o=u();return f(o.onItemSelectAll(t))}),a()}if(n&2){let e=u();l("nzChecked",e.stat.checkAll)("nzIndeterminate",e.stat.checkHalf)("nzDisabled",e.stat.availableCount===0||e.disabled)}}function nn(n,p){if(n&1&&(r(0,"span",5),d(1),a()),n&2){let e=u();s(),y(e.titleText)}}function on(n,p){if(n&1){let e=g();r(0,"div",7)(1,"span",11),z("valueChanged",function(t){h(e);let o=u();return f(o.handleFilter(t))})("valueClear",function(){h(e);let t=u();return f(t.handleClear())}),a()()}if(n&2){let e=u();s(),l("placeholder",e.searchPlaceholder)("disabled",e.disabled)("value",e.filter)}}function rn(n,p){n&1&&ft(0)}function sn(n,p){if(n&1&&(r(0,"div",8),C(1,rn,1,0,"ng-container",12),a()),n&2){let e=u();s(),l("ngTemplateOutlet",e.renderList)("ngTemplateOutletContext",zt(2,Yi,e.validData,e.direction,e.disabled,e.onItemSelectAll,e.onItemSelect,e.stat))}}function an(n,p){if(n&1&&d(0),n&2){let e=u().$implicit;x(" ",e.title," ")}}function ln(n,p){}function cn(n,p){if(n&1&&C(0,ln,0,0,"ng-template",17),n&2){let e=u().$implicit,i=u(3);l("ngTemplateOutlet",i.render)("ngTemplateOutletContext",A(2,zi,e))}}function dn(n,p){if(n&1){let e=g();r(0,"li",15),z("click",function(){let t=h(e).$implicit,o=u(3);return f(o.onItemSelect(t))}),r(1,"label",16,1),z("nzCheckedChange",function(){let t=h(e).$implicit,o=u(3);return f(o.onItemSelect(t))}),C(3,an,1,1)(4,cn,1,4),a()()}if(n&2){let e=p.$implicit,i=u(3);l("ngClass",A(4,en,i.disabled||e.disabled)),s(),l("nzChecked",e.checked)("nzDisabled",i.disabled||e.disabled),s(2),E(3,i.render?4:3)}}function mn(n,p){if(n&1&&(r(0,"ul",13),ut(1,dn,5,6,"li",14,pt),a()),n&2){let e=u(2);s(),ht(e.validData)}}function pn(n,p){if(n&1&&(r(0,"div",18),_(1,"nz-embed-empty",19),a()),n&2){let e=u(2);s(),l("nzComponentName","transfer")("specificContent",e.notFoundContent)}}function un(n,p){if(n&1&&C(0,mn,3,0,"ul",13)(1,pn,2,2),n&2){let e=u();E(0,e.stat.shownCount>0?0:1)}}function hn(n,p){}function fn(n,p){if(n&1&&(r(0,"div",9),C(1,hn,0,0,"ng-template",17),a()),n&2){let e=u();s(),l("ngTemplateOutlet",e.footer)("ngTemplateOutletContext",A(2,zi,e.direction))}}function zn(n,p){if(n&1&&(r(0,"span"),d(1),a()),n&2){let e=u(2);s(),y(e.nzOperations[1])}}function _n(n,p){if(n&1&&(r(0,"span"),d(1),a()),n&2){let e=u(2);s(),y(e.nzOperations[0])}}function Cn(n,p){if(n&1){let e=g();r(0,"div",1)(1,"button",3),z("click",function(){h(e);let t=u();return f(t.moveToLeft())}),_(2,"span",4),C(3,zn,2,1,"span"),a(),r(4,"button",3),z("click",function(){h(e);let t=u();return f(t.moveToRight())}),_(5,"span",5),C(6,_n,2,1,"span"),a()()}if(n&2){let e=u();s(),l("disabled",e.nzDisabled||!e.leftActive)("nzType","primary")("nzSize","small"),s(2),E(3,e.nzOperations[1]?3:-1),s(),l("disabled",e.nzDisabled||!e.rightActive)("nzType","primary")("nzSize","small"),s(2),E(6,e.nzOperations[0]?6:-1)}}function gn(n,p){if(n&1&&(r(0,"span"),d(1),a()),n&2){let e=u(2);s(),y(e.nzOperations[0])}}function Sn(n,p){if(n&1&&(r(0,"span"),d(1),a()),n&2){let e=u(2);s(),y(e.nzOperations[1])}}function vn(n,p){if(n&1){let e=g();r(0,"div",1)(1,"button",3),z("click",function(){h(e);let t=u();return f(t.moveToRight())}),_(2,"span",4),C(3,gn,2,1,"span"),a(),r(4,"button",3),z("click",function(){h(e);let t=u();return f(t.moveToLeft())}),_(5,"span",5),C(6,Sn,2,1,"span"),a()()}if(n&2){let e=u();s(),l("disabled",e.nzDisabled||!e.rightActive)("nzType","primary")("nzSize","small"),s(2),E(3,e.nzOperations[0]?3:-1),s(),l("disabled",e.nzDisabled||!e.leftActive)("nzType","primary")("nzSize","small"),s(2),E(6,e.nzOperations[1]?6:-1)}}var _i=(()=>{class n{constructor(e){this.cdr=e,this.disabled=!1,this.valueChanged=new k,this.valueClear=new k}_handle(){this.valueChanged.emit(this.value)}_clear(){this.disabled||(this.value="",this.valueClear.emit())}ngOnChanges(){this.cdr.detectChanges()}static{this.\u0275fac=function(i){return new(i||n)(S(J))}}static{this.\u0275cmp=R({type:n,selectors:[["","nz-transfer-search",""]],inputs:{placeholder:"placeholder",value:"value",disabled:[B.HasDecoratorInputTransform,"disabled","disabled",H]},outputs:{valueChanged:"valueChanged",valueClear:"valueClear"},exportAs:["nzTransferSearch"],standalone:!0,features:[xe,Ge,Ne],attrs:Hi,decls:4,vars:7,consts:[[1,"ant-input-prefix"],["nz-icon","","nzType","search"],[1,"ant-input",3,"ngModelChange","ngModel","disabled","placeholder","ngClass"],[1,"ant-input-suffix"],[1,"ant-input-suffix",3,"click"],["nz-icon","","nzType","close-circle","nzTheme","fill",1,"ant-input-clear-icon"]],template:function(i,t){i&1&&(r(0,"span",0),_(1,"span",1),a(),r(2,"input",2),L("ngModelChange",function(c){return D(t.value,c)||(t.value=c),c}),z("ngModelChange",function(){return t._handle()}),a(),C(3,Qi,2,0,"span",3)),i&2&&(s(2),V("ngModel",t.value),l("disabled",t.disabled)("placeholder",t.placeholder)("ngClass",A(5,qi,t.disabled)),s(),E(3,t.value&&t.value.length>0?3:-1))},dependencies:[vt,Z,O,Fe,We,q,Se],encapsulation:2,changeDetection:0})}}return n})(),Ze=(()=>{class n{get validData(){return this.dataSource.filter(e=>!e.hide)}get availableData(){return this.validData.filter(e=>!e.disabled)}updateCheckStatus(){let e=this.dataSource.filter(i=>!i.disabled).length;this.stat.checkCount=this.dataSource.filter(i=>i.checked&&!i.disabled).length,this.stat.shownCount=this.validData.length,this.stat.availableCount=this.availableData.length,this.stat.checkAll=e>0&&e===this.stat.checkCount,this.stat.checkHalf=this.stat.checkCount>0&&!this.stat.checkAll,this.headerCheckbox&&(this.headerCheckbox.nzChecked=this.stat.checkAll)}handleFilter(e){this.filter=e,this.dataSource.forEach(i=>{i.hide=e.length>0&&!this.matchFilter(e,i)}),this.stat.shownCount=this.validData.length,this.stat.availableCount=this.availableData.length,this.filterChange.emit({direction:this.direction,value:e})}handleClear(){this.handleFilter("")}matchFilter(e,i){return this.filterOption?this.filterOption(e,i):i.title.includes(e)}constructor(e,i){this.ngZone=e,this.cdr=i,this.direction="left",this.titleText="",this.showSelectAll=!0,this.dataSource=[],this.itemUnit="",this.itemsUnit="",this.filter="",this.disabled=!1,this.renderList=null,this.render=null,this.footer=null,this.handleSelectAll=new k,this.handleSelect=new k,this.filterChange=new k,this.stat={checkAll:!1,checkHalf:!1,checkCount:0,shownCount:0,availableCount:0},this.onItemSelect=t=>{this.disabled||t.disabled||(t.checked=!t.checked,this.updateCheckStatus(),this.handleSelect.emit(t))},this.onItemSelectAll=t=>{this.dataSource.forEach(o=>{!o.disabled&&!o.hide&&(o.checked=t)}),this.updateCheckStatus(),this.handleSelectAll.emit(t)}}markForCheck(){this.updateCheckStatus(),this.cdr.markForCheck()}ngAfterViewInit(){this.checkboxes.changes.pipe(rt(this.checkboxes),K(()=>{let e=this.checkboxes.toArray();return new et(i=>this.ngZone.runOutsideAngular(()=>it(...e.map(t=>tt(t.nativeElement,"click"))).subscribe(i)))})).subscribe(e=>{e.stopPropagation()})}static{this.\u0275fac=function(i){return new(i||n)(S(dt),S(J))}}static{this.\u0275cmp=R({type:n,selectors:[["nz-transfer-list"]],viewQuery:function(i,t){if(i&1&&(j(Ki,5,Ae),j(Ji,5,ye)),i&2){let o;W(o=$())&&(t.headerCheckbox=o.first),W(o=$())&&(t.checkboxes=o)}},hostAttrs:[1,"ant-transfer-list"],hostVars:2,hostBindings:function(i,t){i&2&&Ce("ant-transfer-list-with-footer",!!t.footer)},inputs:{direction:"direction",titleText:"titleText",showSelectAll:"showSelectAll",dataSource:"dataSource",itemUnit:"itemUnit",itemsUnit:"itemsUnit",filter:"filter",disabled:[B.HasDecoratorInputTransform,"disabled","disabled",H],showSearch:[B.HasDecoratorInputTransform,"showSearch","showSearch",H],searchPlaceholder:"searchPlaceholder",notFoundContent:"notFoundContent",filterOption:"filterOption",renderList:"renderList",render:"render",footer:"footer"},outputs:{handleSelectAll:"handleSelectAll",handleSelect:"handleSelect",filterChange:"filterChange"},exportAs:["nzTransferList"],standalone:!0,features:[xe,Ne],decls:11,vars:13,consts:[["headerCheckbox",""],["checkboxes",""],[1,"ant-transfer-list-header"],["nz-checkbox","",1,"ant-transfer-list-checkbox",3,"nzChecked","nzIndeterminate","nzDisabled"],[1,"ant-transfer-list-header-selected"],[1,"ant-transfer-list-header-title"],[3,"ngClass"],[1,"ant-transfer-list-body-search-wrapper"],[1,"ant-transfer-list-body-customize-wrapper"],[1,"ant-transfer-list-footer"],["nz-checkbox","",1,"ant-transfer-list-checkbox",3,"nzCheckedChange","nzChecked","nzIndeterminate","nzDisabled"],["nz-transfer-search","",1,"ant-input-affix-wrapper","ant-transfer-list-search",3,"valueChanged","valueClear","placeholder","disabled","value"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-transfer-list-content"],[1,"ant-transfer-list-content-item",3,"ngClass"],[1,"ant-transfer-list-content-item",3,"click","ngClass"],["nz-checkbox","",3,"nzCheckedChange","nzChecked","nzDisabled"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-transfer-list-body-not-found"],[3,"nzComponentName","specificContent"]],template:function(i,t){i&1&&(r(0,"div",2),C(1,tn,2,3,"label",3),r(2,"span",4)(3,"span"),d(4),a()(),C(5,nn,2,1,"span",5),a(),r(6,"div",6),C(7,on,2,3,"div",7)(8,sn,2,9,"div",8)(9,un,2,1),a(),C(10,fn,2,4,"div",9)),i&2&&(s(),E(1,t.showSelectAll?1:-1),s(3),we(" ",(t.stat.checkCount>0?t.stat.checkCount+"/":"")+t.stat.shownCount," ",t.validData.length>1?t.itemsUnit:t.itemUnit," "),s(),E(5,t.titleText?5:-1),s(),mt(t.showSearch?"ant-transfer-list-body ant-transfer-list-body-with-search":"ant-transfer-list-body"),l("ngClass",A(11,Zi,t.stat.shownCount===0)),s(),E(7,t.showSearch?7:-1),s(),E(8,t.renderList?8:9),s(2),E(10,t.footer?10:-1))},dependencies:[Se,Ht,Ae,gt,Xt,Gt,_i],encapsulation:2,changeDetection:0})}}return n})(),Ye=(()=>{class n{splitDataSource(){this.leftDataSource=[],this.rightDataSource=[],this.nzDataSource.forEach(e=>{e.direction==="right"?(e.direction="right",this.rightDataSource.push(e)):(e.direction="left",this.leftDataSource.push(e))})}getCheckedData(e){return this[e==="left"?"leftDataSource":"rightDataSource"].filter(i=>i.checked)}handleSelect(e,i,t){let o=this.getCheckedData(e),c=o.filter(m=>!m.disabled).length;this.updateOperationStatus(e,c),this.nzSelectChange.emit({direction:e,checked:i,list:o,item:t})}handleFilterChange(e){this.nzSearchChange.emit(e)}updateOperationStatus(e,i){this[e==="right"?"leftActive":"rightActive"]=(typeof i>"u"?this.getCheckedData(e).filter(t=>!t.disabled).length:i)>0}moveTo(e){let i=e==="left"?"right":"left";this.updateOperationStatus(i,0);let o=(e==="left"?this.rightDataSource:this.leftDataSource).filter(c=>c.checked===!0&&!c.disabled);this.nzCanMove({direction:e,list:o}).subscribe(c=>this.truthMoveTo(e,c.filter(m=>!!m)),()=>o.forEach(c=>c.checked=!1))}truthMoveTo(e,i){let t=e==="left"?"right":"left",o=e==="left"?this.rightDataSource:this.leftDataSource,c=e==="left"?this.leftDataSource:this.rightDataSource;for(let m of i)m.checked=!1,m.hide=!1,m.direction=e,o.splice(o.indexOf(m),1);c.splice(0,0,...i),this.updateOperationStatus(t),this.nzChange.emit({from:t,to:e,list:i}),this.markForCheckAllList()}constructor(e,i,t,o,c){this.cdr=e,this.i18n=i,this.elementRef=t,this.renderer=o,this.directionality=c,this.unsubscribe$=new Q,this.leftFilter="",this.rightFilter="",this.dir="ltr",this.prefixCls="ant-transfer",this.statusCls={},this.hasFeedback=!1,this.nzDisabled=!1,this.nzDataSource=[],this.nzTitles=["",""],this.nzOperations=[],this.nzListStyle={},this.nzShowSelectAll=!0,this.nzCanMove=m=>Pe(m.list),this.nzRenderList=null,this.nzRender=null,this.nzFooter=null,this.nzShowSearch=!1,this.nzTargetKeys=[],this.nzSelectedKeys=[],this.nzStatus="",this.nzChange=new k,this.nzSearchChange=new k,this.nzSelectChange=new k,this.leftDataSource=[],this.rightDataSource=[],this.handleLeftSelectAll=m=>this.handleSelect("left",m),this.handleRightSelectAll=m=>this.handleSelect("right",m),this.handleLeftSelect=m=>this.handleSelect("left",!!m.checked,m),this.handleRightSelect=m=>this.handleSelect("right",!!m.checked,m),this.leftActive=!1,this.rightActive=!1,this.moveToLeft=()=>this.moveTo("left"),this.moveToRight=()=>this.moveTo("right"),this.nzFormStatusService=w(xt,{optional:!0}),this.nzFormNoStatusService=w(wt,{optional:!0})}markForCheckAllList(){this.lists&&this.lists.forEach(e=>e.markForCheck())}handleNzTargetKeys(){let e=je(this.nzTargetKeys),i=t=>t.hasOwnProperty("key");this.leftDataSource.forEach(t=>{i(t)&&e.indexOf(t.key)!==-1&&!t.disabled&&(t.checked=!0)}),this.moveToRight()}handleNzSelectedKeys(){let e=je(this.nzSelectedKeys);this.nzDataSource.forEach(t=>{e.indexOf(t.key)!==-1&&(t.checked=!0)});let i=t=>t.disabled===!1&&t.checked===!0;this.rightActive=this.leftDataSource.some(i),this.leftActive=this.rightDataSource.some(i)}ngOnInit(){this.nzFormStatusService?.formStatusChanges.pipe(nt((e,i)=>e.status===i.status&&e.hasFeedback===i.hasFeedback),st(this.nzFormNoStatusService?this.nzFormNoStatusService.noFormStatus:Pe(!1)),v(([{status:e,hasFeedback:i},t])=>({status:t?"":e,hasFeedback:i})),U(this.unsubscribe$)).subscribe(({status:e,hasFeedback:i})=>{this.setStatusStyles(e,i)}),this.i18n.localeChange.pipe(U(this.unsubscribe$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Transfer"),this.markForCheckAllList()}),this.dir=this.directionality.value,this.directionality.change?.pipe(U(this.unsubscribe$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()})}ngOnChanges(e){let{nzStatus:i,nzDataSource:t,nzTargetKeys:o,nzSelectedKeys:c}=e;t&&(this.splitDataSource(),this.updateOperationStatus("left"),this.updateOperationStatus("right"),this.cdr.detectChanges(),this.markForCheckAllList()),o&&this.handleNzTargetKeys(),c&&this.handleNzSelectedKeys(),i&&this.setStatusStyles(this.nzStatus,this.hasFeedback)}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}setStatusStyles(e,i){this.hasFeedback=i,this.cdr.markForCheck(),this.statusCls=bt(this.prefixCls,e,i),Object.keys(this.statusCls).forEach(t=>{this.statusCls[t]?this.renderer.addClass(this.elementRef.nativeElement,t):this.renderer.removeClass(this.elementRef.nativeElement,t)})}static{this.\u0275fac=function(i){return new(i||n)(S(J),S(Nt),S(ye),S(ct),S(yt))}}static{this.\u0275cmp=R({type:n,selectors:[["nz-transfer"]],viewQuery:function(i,t){if(i&1&&j(Ze,5),i&2){let o;W(o=$())&&(t.lists=o)}},hostAttrs:[1,"ant-transfer"],hostVars:6,hostBindings:function(i,t){i&2&&Ce("ant-transfer-rtl",t.dir==="rtl")("ant-transfer-disabled",t.nzDisabled)("ant-transfer-customize-list",t.nzRenderList)},inputs:{nzDisabled:[B.HasDecoratorInputTransform,"nzDisabled","nzDisabled",H],nzDataSource:"nzDataSource",nzTitles:"nzTitles",nzOperations:"nzOperations",nzListStyle:"nzListStyle",nzShowSelectAll:[B.HasDecoratorInputTransform,"nzShowSelectAll","nzShowSelectAll",H],nzItemUnit:"nzItemUnit",nzItemsUnit:"nzItemsUnit",nzCanMove:"nzCanMove",nzRenderList:"nzRenderList",nzRender:"nzRender",nzFooter:"nzFooter",nzShowSearch:[B.HasDecoratorInputTransform,"nzShowSearch","nzShowSearch",H],nzFilterOption:"nzFilterOption",nzSearchPlaceholder:"nzSearchPlaceholder",nzNotFoundContent:"nzNotFoundContent",nzTargetKeys:"nzTargetKeys",nzSelectedKeys:"nzSelectedKeys",nzStatus:"nzStatus"},outputs:{nzChange:"nzChange",nzSearchChange:"nzSearchChange",nzSelectChange:"nzSelectChange"},exportAs:["nzTransfer"],standalone:!0,features:[xe,Ge,Ne],decls:4,vars:31,consts:[["data-direction","left","direction","left",1,"ant-transfer-list",3,"filterChange","handleSelect","handleSelectAll","ngStyle","titleText","showSelectAll","dataSource","filter","filterOption","renderList","render","disabled","showSearch","searchPlaceholder","notFoundContent","itemUnit","itemsUnit","footer"],[1,"ant-transfer-operation"],["data-direction","right","direction","right",1,"ant-transfer-list",3,"filterChange","handleSelect","handleSelectAll","ngStyle","titleText","showSelectAll","dataSource","filter","filterOption","renderList","render","disabled","showSearch","searchPlaceholder","notFoundContent","itemUnit","itemsUnit","footer"],["nz-button","","type","button",3,"click","disabled","nzType","nzSize"],["nz-icon","","nzType","left"],["nz-icon","","nzType","right"]],template:function(i,t){i&1&&(r(0,"nz-transfer-list",0),z("filterChange",function(c){return t.handleFilterChange(c)})("handleSelect",function(c){return t.handleLeftSelect(c)})("handleSelectAll",function(c){return t.handleLeftSelectAll(c)}),a(),C(1,Cn,7,8,"div",1)(2,vn,7,8),r(3,"nz-transfer-list",2),z("filterChange",function(c){return t.handleFilterChange(c)})("handleSelect",function(c){return t.handleRightSelect(c)})("handleSelectAll",function(c){return t.handleRightSelectAll(c)}),a()),i&2&&(l("ngStyle",t.nzListStyle)("titleText",t.nzTitles[0])("showSelectAll",t.nzShowSelectAll)("dataSource",t.leftDataSource)("filter",t.leftFilter)("filterOption",t.nzFilterOption)("renderList",t.nzRenderList&&t.nzRenderList[0])("render",t.nzRender)("disabled",t.nzDisabled)("showSearch",t.nzShowSearch)("searchPlaceholder",t.nzSearchPlaceholder||(t.locale==null?null:t.locale.searchPlaceholder))("notFoundContent",t.nzNotFoundContent)("itemUnit",t.nzItemUnit||(t.locale==null?null:t.locale.itemUnit))("itemsUnit",t.nzItemsUnit||(t.locale==null?null:t.locale.itemsUnit))("footer",t.nzFooter),s(),E(1,t.dir!=="rtl"?1:2),s(2),l("ngStyle",t.nzListStyle)("titleText",t.nzTitles[1])("showSelectAll",t.nzShowSelectAll)("dataSource",t.rightDataSource)("filter",t.rightFilter)("filterOption",t.nzFilterOption)("renderList",t.nzRenderList&&t.nzRenderList[1])("render",t.nzRender)("disabled",t.nzDisabled)("showSearch",t.nzShowSearch)("searchPlaceholder",t.nzSearchPlaceholder||(t.locale==null?null:t.locale.searchPlaceholder))("notFoundContent",t.nzNotFoundContent)("itemUnit",t.nzItemUnit||(t.locale==null?null:t.locale.itemUnit))("itemsUnit",t.nzItemsUnit||(t.locale==null?null:t.locale.itemsUnit))("footer",t.nzFooter))},dependencies:[Ze,Ct,We,q,Rt,G,M,P],encapsulation:2,changeDetection:0})}}return n})(),$o=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=lt({type:n})}static{this.\u0275inj=at({imports:[Ye,Ze,_i]})}}return n})();var yn=()=>({"width.px":300,"height.px":400,overflow:"auto"});function xn(n,p){if(n&1){let e=g();r(0,"nz-list-item",25),z("click",function(){let t=h(e).$implicit,o=u();return f(o.rolSelected(t))}),d(1),a()}if(n&2){let e=p.$implicit;s(),y(e.description)}}function wn(n,p){if(n&1&&(_(0,"span",26),d(1)),n&2){let e=p.$implicit;s(),x(" ",e.title," ")}}function Nn(n,p){n&1&&d(0," Agregar Rol ")}function Tn(n,p){if(n&1&&(r(0,"nz-option",36),_(1,"i",26),d(2),a()),n&2){let e=p.$implicit;l("nzLabel",e.name)("nzValue",e.uid),s(2),x(" ",e.description,"")}}function Fn(n,p){if(n&1&&_(0,"nz-option",37),n&2){let e=p.$implicit;l("nzValue",e.value)("nzLabel",e.label)}}function En(n,p){if(n&1){let e=g();r(0,"form",27),z("ngSubmit",function(){h(e);let t=u();return f(t.submitAddForm())}),r(1,"nz-form-item")(2,"nz-form-label",28),d(3,"Nombre"),a(),r(4,"nz-form-control",28),_(5,"input",29),a()(),r(6,"nz-form-item")(7,"nz-form-label",28),d(8,"Descripci\xF3n"),a(),r(9,"nz-form-control",28),_(10,"input",30),a()(),r(11,"nz-form-item")(12,"nz-form-label",28),d(13,"Rol Superior"),a(),r(14,"nz-form-control",28)(15,"nz-select",31),C(16,Tn,3,3,"nz-option",32),a()()(),r(17,"nz-form-item")(18,"nz-form-label",28),d(19,"Nivel de Acceso"),a(),r(20,"nz-form-control",28)(21,"nz-select",33),C(22,Fn,1,2,"nz-option",34),a()()(),r(23,"nz-form-item")(24,"nz-form-label",28),d(25,"Activo"),a(),_(26,"nz-switch",35),a()()}if(n&2){let e=u();l("formGroup",e.validateAddRolForm),s(2),l("nzSm",6)("nzXs",24),s(2),l("nzSm",14)("nzXs",24),s(3),l("nzSm",6)("nzXs",24),s(2),l("nzSm",14)("nzXs",24),s(3),l("nzSm",6)("nzXs",24),s(2),l("nzSm",14)("nzXs",24),s(),l("nzPlaceHolder","Selecciona el Rol Superior"),s(),l("ngForOf",e.displayData),s(2),l("nzSm",6)("nzXs",24),s(2),l("nzSm",14)("nzXs",24),s(),l("nzPlaceHolder","Selecciona un nivel de acceso"),s(),l("ngForOf",e.options),s(2),l("nzSm",6)("nzXs",24)}}function Rn(n,p){if(n&1){let e=g();r(0,"button",38),z("click",function(){h(e);let t=u();return f(t.handleCancel())}),d(1,"Cancelar"),a(),r(2,"button",38),z("click",function(){h(e);let t=u();return f(t.submitAddForm())}),d(3,"Guardar"),a()}}function Vn(n,p){n&1&&d(0," Editar Rol ")}function Dn(n,p){if(n&1&&(r(0,"nz-option",36),_(1,"i",26),d(2),a()),n&2){let e=p.$implicit;l("nzLabel",e.name)("nzValue",e.uid),s(2),x(" ",e.description,"")}}function Ln(n,p){if(n&1&&_(0,"nz-option",37),n&2){let e=p.$implicit;l("nzValue",e.value)("nzLabel",e.label)}}function kn(n,p){if(n&1){let e=g();r(0,"form",27),z("ngSubmit",function(){h(e);let t=u();return f(t.submitEditForm())}),r(1,"nz-form-item")(2,"nz-form-label",28),d(3,"Nombre"),a(),r(4,"nz-form-control",28),_(5,"input",39),a()(),r(6,"nz-form-item")(7,"nz-form-label",28),d(8,"Descripci\xF3n"),a(),r(9,"nz-form-control",28),_(10,"input",40),a()(),r(11,"nz-form-item")(12,"nz-form-label",28),d(13,"Rol Superior"),a(),r(14,"nz-form-control",28)(15,"nz-select",31),C(16,Dn,3,3,"nz-option",32),a()()(),r(17,"nz-form-item")(18,"nz-form-label",28),d(19,"Nivel de Acceso"),a(),r(20,"nz-form-control",28)(21,"nz-select",33),C(22,Ln,1,2,"nz-option",34),a()()(),r(23,"nz-form-item")(24,"nz-form-label",28),d(25,"Activo"),a(),_(26,"nz-switch",35),a()()}if(n&2){let e=u();l("formGroup",e.validateEditRolForm),s(2),l("nzSm",6)("nzXs",24),s(2),l("nzSm",14)("nzXs",24),s(3),l("nzSm",6)("nzXs",24),s(2),l("nzSm",14)("nzXs",24),s(3),l("nzSm",6)("nzXs",24),s(2),l("nzSm",14)("nzXs",24),s(),l("nzPlaceHolder","Selecciona el Rol Superior"),s(),l("ngForOf",e.displayData),s(2),l("nzSm",6)("nzXs",24),s(2),l("nzSm",14)("nzXs",24),s(),l("nzPlaceHolder","Selecciona un nivel de acceso"),s(),l("ngForOf",e.options),s(2),l("nzSm",6)("nzXs",24)}}function In(n,p){if(n&1){let e=g();r(0,"button",38),z("click",function(){h(e);let t=u();return f(t.handleCancel())}),d(1,"Cancelar"),a(),r(2,"button",38),z("click",function(){h(e);let t=u();return f(t.submitEditForm())}),d(3,"Guardar"),a()}}function Un(n,p){n&1&&d(0," Borrar Rol ")}function An(n,p){if(n&1&&_(0,"nz-option",37),n&2){let e=p.$implicit;l("nzValue",e.id)("nzLabel",e.description)}}function On(n,p){if(n&1){let e=g();r(0,"div",41)(1,"nz-form-control")(2,"nz-form-label",42),d(3,"Roles"),a(),r(4,"nz-select",43),z("ngModelChange",function(t){h(e);let o=u();return f(o.rolSelectedDelete(t))}),C(5,An,1,2,"nz-option",34),a()()()}if(n&2){let e=u();l("formGroup",e.deletForm),s(5),l("ngForOf",e.loadedRoles)}}function Mn(n,p){if(n&1){let e=g();r(0,"button",38),z("click",function(){h(e);let t=u();return f(t.handleCancel())}),d(1,"Cancelar"),a(),r(2,"button",38),z("click",function(){h(e);let t=u();return f(t.submitDelForm())}),d(3,"Borrar"),a()}}var er=(()=>{class n{constructor(e,i,t,o){this.msg=e,this.cdr=i,this.fb=t,this.afs=o,this.rolService=w(ue),this.list=[],this.data=[],this.isAddVisible=!1,this.isEditVisible=!1,this.isDeleteVisible=!1,this.loadedRolesList=[],this.loadedRoles=[],this.selectedRole="",this.NameRol="",this.disabled=!1,this.selectDelRole="",this.options=[{value:"1",label:"Ver, Editar, Borrar"},{value:"2",label:"Ver, Editar"},{value:"3",label:"Ver"}],this.deletForm=this.fb.group({name:[""],description:[""],rolId:[""],optionAccessLavel:[""],active:[""]})}ngOnInit(){this.validateAddRolForm=this.fb.group({name:["",[F.required]],description:["",[F.required]],rolId:["",[F.required]],optionAccessLavel:["",[F.required]],active:["",[F.required]]}),this.validateEditRolForm=this.fb.group({name:["",[F.required]],description:["",[F.required]],rolId:["",[F.required]],optionAccessLavel:["",[F.required]],active:["",[F.required]]}),this.geRolesList()}geRolesList(){this.rolesCollection=this.afs.collection("roles",e=>e.where("active","==",!0).orderBy("name")),this.roles=this.rolesCollection.snapshotChanges().pipe(v(e=>e.map(i=>{let t=i.payload.doc.id,o=i.payload.doc.data();return T({id:t},o)}))).subscribe(e=>{this.loadroles(e)})}loadroles(e){this.loadedRolesList.length<=1&&(this.displayData=e,this.roldata=Ci.orderBy(JSON.parse(JSON.stringify(e)),["name"],["asc"]),this.loadedRolesList=this.roldata,this.loadedRoles=[...this.roldata],this.cdr.detectChanges())}ngOnDestroy(){this.roles&&this.roles.unsubscribe(),this.NameRol=""}rolSelected(e){this.disabled=!1,this.list=[],this.currendUidSelected="",this.currentRolSelected=e,this.NameRol=e.description,this.getFormRol(e.uid),this.rolSelectedID=e.uid}getFormRol(e){this.formRolCollection=this.afs.collection("roles").doc(e).collection("forms",i=>i.orderBy("name")),this.roles=this.formRolCollection.snapshotChanges().pipe(v(i=>i.map(t=>{let o=t.payload.doc.id,c=t.payload.doc.data();return T({id:o},c)}))).subscribe(i=>{this.getData(e,i)})}getData(e,i){let t=[];this.formCollection=this.afs.collection("form",o=>o.where("active","==","true").orderBy("name")),this.forms=this.formCollection.snapshotChanges().pipe(v(o=>o.map(c=>{let m=c.payload.doc.id,X=c.payload.doc.data();return T({id:m},X)}))).subscribe(o=>{for(let c in o)this.searchInArrayOfObjects(i,o[c].id)!=null?t.push({key:o[c].id,title:o[c].name,description:o[c].description,icon:"",direction:"right",idForm:o[c].id}):t.push({key:o[c].id,title:o[c].name,description:o[c].description,icon:"",direction:"left",idForm:""});this.list=t})}searchInArrayOfObjects(e,i){return e.find(t=>t.idForm===i)}select(e){this.formRolCollection=this.afs.collection("roles").doc(this.rolSelectedID).collection("forms",i=>i.where("idForm","==",e.list[0].idForm)),this.roles=this.formRolCollection.snapshotChanges().pipe(v(i=>i.map(t=>{let o=t.payload.doc.id,c=t.payload.doc.data();return T({id:o},c)}))).subscribe(i=>{this.currendUidSelected=i[0].uid}),this.NameRol=="Master"?this.msg.info("El Usuario Master no puede ser modificado"):e.list.length>=2?this.msg.error("Solo se puede seleccionar una forma a la vez."):e.list[0].title=="Perfiles"||e.list[0].title=="Roles"?this.msg.error("La forma Perfiles solo puede ser seleccionada por usuario Master"):e.list[0].direction=="right"&&(this.formRolCollection=this.afs.collection("roles").doc(this.rolSelectedID).collection("forms",i=>i.where("idForm","==",e.list[0].idForm)),this.roles=this.formRolCollection.snapshotChanges().pipe(v(i=>i.map(t=>{let o=t.payload.doc.id,c=t.payload.doc.data();return T({id:o},c)}))).subscribe(i=>{this.currendUidSelected=i[0].uid}))}change(e){let i=e.list[0].key,t=e.list[0].title;if(e.from=="left"&&e.to=="right"&&this.rolService.createFormRol(this.rolSelectedID,i,t).then(o=>{}).catch(o=>{this.msg.error(o)}),this.NameRol!="Master")if(e.list.length>=2)this.msg.error("Solo se puede seleccionar una forma a la vez.");else{let o=e.list[0].key,c=e.list[0].title;e.from=="left"&&e.to=="right"?this.rolService.createFormRol(this.rolSelectedID,o,c).then(m=>{}).catch(m=>{this.msg.error(m)}):this.rolService.deleteformRol(this.rolSelectedID,this.currendUidSelected).then(m=>{}).catch(m=>{this.msg.error(m)})}}showModalAddRol(){this.validateAddRolForm.controls.name.setValue(""),this.validateAddRolForm.controls.description.setValue(""),this.validateAddRolForm.controls.rolId.setValue(""),this.validateAddRolForm.controls.optionAccessLavel.setValue(""),this.validateAddRolForm.controls.active.setValue(!1),this.isAddVisible=!0,this.isEditVisible=!1,this.isDeleteVisible=!1}showModalEditRol(e){if(e==null)this.msg.error("No has seleccionado ningun rol a editar");else{this.validateEditRolForm.controls.name.setValue(e.name),this.validateEditRolForm.controls.description.setValue(e.description),this.validateEditRolForm.controls.rolId.setValue(e.rolId),this.validateEditRolForm.controls.optionAccessLavel.setValue(e.optionAccessLavel),this.validateEditRolForm.controls.active.setValue(!0);let i=e.id==null?"":e.id;this.isAddVisible=!1,this.isEditVisible=!0,this.isDeleteVisible=!1}}showModalDeleteRol(){this.loadedRoles.length>0&&(this.isDeleteVisible=!0)}rolSelectedDelete(e){this.selectDelRole=e}handleCancel(){this.isAddVisible=!1,this.isEditVisible=!1,this.isDeleteVisible=!1,this.selectDelRole=""}submitAddForm(){this.validateAddRolForm.valid?this.rolService.createRol(this.validateAddRolForm.value).then(e=>{this.isAddVisible=!1,this.msg.success("Se agreg\xF3 con exito el rol, favor de actualizar la pagina")}).catch(e=>{this.msg.error(e)}):this.msg.success("El Formulario no es valido favor de validar")}submitEditForm(){let e={name:this.validateEditRolForm.controls.name.value,description:this.validateEditRolForm.controls.description.value,active:this.validateEditRolForm.controls.active.value,optionAccessLavel:this.validateEditRolForm.controls.optionAccessLavel.value,rolId:this.validateEditRolForm.controls.rolId.value,uid:this.currentRolSelected.uid,id:this.currentRolSelected.id};this.validateEditRolForm.valid?this.rolService.updateRol(this.currentRolSelected.uid,e).then(i=>{this.isEditVisible=!1}).catch(i=>{this.msg.error(i)}):this.msg.success("El Formulario no es valido favor de validar")}submitDelForm(){this.selectDelRole!=""?this.afs.collection("roles").doc(this.selectDelRole).update({active:!1}).then(()=>{this.loadedRolesList=[],this.geRolesList(),this.isDeleteVisible=!1,this.msg.success("Se elimino el rol con \xE9xito.")}):this.msg.error("Necesitas seleccionar un rol para eliminar")}static{this.\u0275fac=function(i){return new(i||n)(S(oe),S(J),S(ne),S(Ee))}}static{this.\u0275cmp=R({type:n,selectors:[["ng-component"]],decls:49,vars:22,consts:[["render",""],["AgregarRol",""],["modalAddRolContent",""],["modalRolAddFooter",""],["EditarRol",""],["modalEditRolContent",""],["modalRolEditFooter",""],["BorrarRol",""],["contentDel",""],["delFoot",""],[2,"margin","buttom 15px","margin-right","15px","margin-left","15px"],[1,"site-page-header-ghost-wrapper"],[2,"background-color","#f9fbfd",3,"nzGhost"],[2,"margin-left","350px"],[1,"container-fluid","p-h-0"],[2,"margin-bottom","10px","margin-top","10px"],["nz-button","",1,"m-r-10",2,"background-color","#4F6F57","color","#f6f3ea",3,"click"],[2,"margin-bottom","10px"],[1,"m-b-0"],["nz-icon","","nzTheme","twotone","nzTwotoneColor","#52c41a"],[2,"background-color","#f9fbfd"],["nzBordered","","nzSize","large"],[3,"click",4,"ngFor","ngForOf"],[3,"nzSelectChange","nzChange","nzDataSource","nzDisabled","nzListStyle"],[3,"nzVisibleChange","nzOnCancel","nzVisible","nzTitle","nzContent","nzFooter","nzWidth"],[3,"click"],["nz-icon",""],["nz-form","","nzLayout","horizontal",3,"ngSubmit","formGroup"],[3,"nzSm","nzXs"],["nz-input","","formControlName","name","id","nameA"],["nz-input","","formControlName","description","id","descriptioA"],["formControlName","rolId",3,"nzPlaceHolder"],["nzCustomContent","",3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["formControlName","optionAccessLavel",3,"nzPlaceHolder"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["formControlName","active","nzCheckedChildren","Si","nzUnCheckedChildren","No"],["nzCustomContent","",3,"nzLabel","nzValue"],[3,"nzValue","nzLabel"],["nz-button","",2,"background-color","#4F6F57","color","#f6f3ea",3,"click"],["nz-input","","formControlName","name","id","nameE"],["nz-input","","formControlName","description","id","descriptionE"],[3,"formGroup"],[2,"width","160px"],["formControlName","rolId","nzAllowClear","","nzPlaceHolder","Seleccione una Rol",2,"width","250px",3,"ngModelChange"]],template:function(i,t){if(i&1){let o=g();r(0,"div",10)(1,"div",11)(2,"nz-page-header",12)(3,"nz-page-header-title",13),d(4,"Roles"),a(),r(5,"nz-page-header-subtitle"),d(6,"Listado Roles del Sistema "),a()()(),r(7,"nz-layout",14)(8,"div",15)(9,"button",16),z("click",function(){return h(o),f(t.showModalAddRol())}),d(10," Agregar Rol "),a(),r(11,"button",16),z("click",function(){return h(o),f(t.showModalEditRol(t.currentRolSelected))}),d(12,"Editar Rol "),a(),r(13,"button",16),z("click",function(){return h(o),f(t.showModalDeleteRol())}),d(14,"Borrar Rol "),a()(),r(15,"div",17)(16,"h6",18),_(17,"i",19),d(18),a()(),r(19,"nz-layout")(20,"nz-sider",20)(21,"nz-list",21),C(22,xn,2,1,"nz-list-item",22),a()(),r(23,"nz-content",20)(24,"nz-transfer",23),z("nzSelectChange",function(m){return h(o),f(t.select(m))})("nzChange",function(m){return h(o),f(t.change(m))}),C(25,wn,2,1,"ng-template",null,0,N),a()()(),_(27,"nz-footer"),a(),r(28,"nz-modal",24),L("nzVisibleChange",function(m){return h(o),D(t.isAddVisible,m)||(t.isAddVisible=m),f(m)}),z("nzOnCancel",function(){return h(o),f(t.handleCancel())}),C(29,Nn,1,0,"ng-template",null,1,N)(31,En,27,23,"ng-template",null,2,N)(33,Rn,4,0,"ng-template",null,3,N),a(),r(35,"nz-modal",24),L("nzVisibleChange",function(m){return h(o),D(t.isEditVisible,m)||(t.isEditVisible=m),f(m)}),z("nzOnCancel",function(){return h(o),f(t.handleCancel())}),C(36,Vn,1,0,"ng-template",null,4,N)(38,kn,27,23,"ng-template",null,5,N)(40,In,4,0,"ng-template",null,6,N),a(),r(42,"nz-modal",24),L("nzVisibleChange",function(m){return h(o),D(t.isDeleteVisible,m)||(t.isDeleteVisible=m),f(m)}),z("nzOnCancel",function(){return h(o),f(t.handleCancel())}),C(43,Un,1,0,"ng-template",null,7,N)(45,On,6,2,"ng-template",null,8,N)(47,Mn,4,0,"ng-template",null,9,N),a()()}if(i&2){let o=b(30),c=b(32),m=b(34),X=b(37),gi=b(39),Si=b(41),vi=b(44),bi=b(46),yi=b(48);s(2),l("nzGhost",!1),s(16),x(" Rol Selecionado: ",t.NameRol,""),s(4),l("ngForOf",t.loadedRolesList),s(2),l("nzDataSource",t.list)("nzDisabled",t.disabled)("nzListStyle",ge(21,yn)),s(4),V("nzVisible",t.isAddVisible),l("nzTitle",o)("nzContent",c)("nzFooter",m)("nzWidth",600),s(7),V("nzVisible",t.isEditVisible),l("nzTitle",X)("nzContent",gi)("nzFooter",Si)("nzWidth",600),s(7),V("nzVisible",t.isDeleteVisible),l("nzTitle",vi)("nzContent",bi)("nzFooter",yi)("nzWidth",600)}},dependencies:[Te,Ye,ai,li,q,se,re,le,ae,de,ce,me,Le,ti,pe,It,Ut,De,G,M,P,ze,he,fe,Ie,Ue,ee,Z,O,Y,te,ie]})}}return n})();export{so as a,So as b,$o as c,er as d};
