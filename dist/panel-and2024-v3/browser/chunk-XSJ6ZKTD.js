import{a as te}from"./chunk-MXGTFI36.js";import{c as We}from"./chunk-NYOFACGL.js";import{A as Je,B as Xe,C as Ye,D as Ze,a as ke,c as Ge,d as je,g as Be,k as Ue,w as Qe,y as Ke}from"./chunk-P4EMRIXJ.js";import{a as Le,c as Oe,e as Ae,g as Re,h as qe,i as He,j as $e}from"./chunk-TVJR76CI.js";import{a as D,b as Te,c as I,e as J,f as Me,h as Fe}from"./chunk-IMWJHJ4Y.js";import{a as Ie}from"./chunk-3VV4NY5F.js";import{L as we,N as U,O as W,P as Q,Q as K,aa as Ve,b as L,c as u,e as O,f as A,i as R,j as q,k as H,m as $,q as G,v as Pe,w as j,x as B}from"./chunk-3MM2LZV7.js";import{$ as me,Aa as T,Bb as ve,Ca as p,Ga as g,Jc as Ee,Jd as ye,O as ae,Ob as xe,Pa as e,Pb as _e,Q as le,Qa as t,Ra as m,U as se,V as de,Va as b,Y as V,Ya as S,_ as w,_a as h,b as re,c as oe,ea as v,eb as ce,fa as x,fb as pe,gb as ue,hb as k,ib as a,jb as _,kb as ee,lb as fe,m as Z,mc as Ce,nb as he,nf as M,ob as ge,of as Ne,pb as Se,qa as c,qf as De,ra as C,ub as ze,ue as be}from"./chunk-M4WL67FH.js";import{a as lt}from"./chunk-I3DVTVGF.js";import{a as N,b as X,f as at,h as Y}from"./chunk-WT5K5NLM.js";var ie=class{},st=(()=>{let l=class l{constructor(){this.defaultCSVParserConfig={header:!0,delimiter:",",encoding:"utf8"}}parse(n,i){return i=N(N({},this.defaultCSVParserConfig),i),new re(d=>{try{let f=null;if(this.isCSVFile(n)){let z=new FileReader;z.readAsText(n,i.encoding),z.onload=()=>{let y=z.result.trim();if(y){let E=this.csvStringToArray(y,i.delimiter),F=this.getHeaderArray(E);f=this.getDataRecordsArrayFromCSVFile(E,F.length,i),d.next(f)}else d.next([]);d.complete()},z.onerror=()=>{this.badCSVDataFormatErrorHandler(d)}}else this.notCSVFileErrorHandler(d)}catch{this.unknownCSVParserErrorHandler(d)}})}csvStringToArray(n,i){let s=new RegExp(`(\\${i}|\\r?\\n|\\r|^)(?:"((?:\\\\.|""|[^\\\\"])*)"|([^\\${i}"\\r\\n]*))`,"gi"),d=s.exec(n),f=[[]];for(;d;){d[1].length&&d[1]!==i&&f.push([]);let z=d[2]?d[2].replace(new RegExp('[\\\\"](.)',"g"),"$1"):d[3];f[f.length-1].push(z),d=s.exec(n)}return f}getDataRecordsArrayFromCSVFile(n,i,s){let d=[],f=n[0],z=s.header?1:0;for(let y=z;y<n.length;y++){let E=n[y];if(E.length===i&&s.header){let F={};for(let P=0;P<E.length;P++)E[P]===void 0||E[P]===null?F[f[P]]="":F[f[P]]=E[P].trim();d.push(F)}else d.push(E)}return d}isCSVFile(n){return n.name.toLowerCase().endsWith(".csv")}getHeaderArray(n){let i=n[0],s=[];for(let d of i)s.push(d);return s}notCSVFileErrorHandler(n){let i=this.errorBuilder("NOT_A_CSV_FILE","Selected file is not a csv File Type.",2);n.error(i)}unknownCSVParserErrorHandler(n){let i=this.errorBuilder("UNKNOWN_ERROR","Unknown error. Please refer to official documentation for library usage.",404);n.error(i)}badCSVDataFormatErrorHandler(n){let i=this.errorBuilder("BAD_CSV_DATA_FORMAT","Unable to parse CSV File.",1);n.error(i)}errorBuilder(n,i,s){let d=new ie;return d.type=n,d.message=i,d.code=s,d}};l.\u0275fac=function(i){return new(i||l)},l.\u0275prov=se({token:l,factory:l.\u0275fac,providedIn:"root"});let r=l;return r})();var Vt=(()=>{let l=class l{};l.\u0275fac=function(i){return new(i||l)},l.\u0275mod=me({type:l}),l.\u0275inj=de({providers:[st]});let r=l;return r})();var nt=(()=>{let l=class l{constructor(n,i){this.fb=n,this.modal=i}submitForm(){for(let n in this.validateForm.controls)this.validateForm.controls[n].markAsDirty(),this.validateForm.controls[n].updateValueAndValidity()}ngOnInit(){this.validateForm=this.fb.group({active:[!1,[u.required]],name:["",[u.required]],description:["",[u.required]],latitude:[1,[u.required]],longitude:[1,[u.required]],imageUrl:[""],kmzUrl:[""],order:[0,[u.required]],round1:["",[u.required]],round2:["",[u.required]],round3:["",[u.required]],round1MinutesSinceStart:["",[u.required]],round2MinutesSinceStart:["",[u.required]],round3MinutesSinceStart:["",[u.required]]})}ngOnDestroy(){}destroyModal(){this.modal.destroy({data:this.validateForm.value})}};l.\u0275fac=function(i){return new(i||l)(C(G),C(J))},l.\u0275cmp=w({type:l,selectors:[["app-shared-stoppoints-new"]],inputs:{stopPoint:"stopPoint"},decls:74,vars:2,consts:[["nz-form","",3,"ngSubmit","nzLayout","formGroup"],["nzErrorTip","Por favor escriba el nombre!"],["nzPrefixIcon","edit"],["formControlName","name","nz-input","","placeholder","nombre"],["nzErrorTip","Please input your Password!"],["formControlName","description","nz-input","","type","text","placeholder","Descripci\xF3n"],[1,"row"],[1,"col-md-6","col-sm-12"],["nzErrorTip","La geocerca no puede estar en blanco"],["formControlName","latitude","nz-input","","placeholder","geocerca"],["formControlName","longitude","nz-input","","placeholder","geocerca"],[1,"col-md-4","col-sm-12"],["nzErrorTip","Agregue horario"],["formControlName","round1","nz-input","","placeholder","00:00"],["formControlName","round2","nz-input","","placeholder","00:00"],["formControlName","round3","nz-input","","placeholder","00:00"],["type","number","formControlName","round1MinutesSinceStart","nz-input","","placeholder","00"],["type","number","formControlName","round2MinutesSinceStart","nz-input","","placeholder","00"],["type","number","formControlName","round3MinutesSinceStart","nz-input","","placeholder","00"],["nzErrorTip","Orden de ejecuci\xF3n de la ruta"],["formControlName","order","nz-input","","type","number","placeholder","num\xE9rico"]],template:function(i,s){i&1&&(e(0,"form",0),S("ngSubmit",function(){return s.submitForm()}),e(1,"nz-form-item")(2,"nz-form-control",1)(3,"nz-input-group",2),m(4,"input",3),t()()(),e(5,"nz-form-item")(6,"nz-form-control",4)(7,"nz-input-group",2),m(8,"input",5),t()()(),e(9,"div",6)(10,"div",7)(11,"nz-form-item")(12,"nz-form-label"),a(13,"Latitud"),t(),e(14,"nz-form-control",8)(15,"nz-input-group",2),m(16,"input",9),t()()()(),e(17,"div",7)(18,"nz-form-item")(19,"nz-form-label"),a(20,"Longitud"),t(),e(21,"nz-form-control",8)(22,"nz-input-group",2),m(23,"input",10),t()()()()(),e(24,"div",6)(25,"div",11)(26,"nz-form-item")(27,"nz-form-label"),a(28,"Horario d\xEDa"),t(),e(29,"nz-form-control",12)(30,"nz-input-group",2),m(31,"input",13),t()()()(),e(32,"div",11)(33,"nz-form-item")(34,"nz-form-label"),a(35,"Horario Tarde"),t(),e(36,"nz-form-control",12)(37,"nz-input-group",2),m(38,"input",14),t()()()(),e(39,"div",11)(40,"nz-form-item")(41,"nz-form-label"),a(42,"Horario Noche"),t(),e(43,"nz-form-control",12)(44,"nz-input-group",2),m(45,"input",15),t()()()()(),e(46,"div",6)(47,"div",11)(48,"nz-form-item")(49,"nz-form-label"),a(50,"Minutos d\xEDa"),t(),e(51,"nz-form-control",12)(52,"nz-input-group",2),m(53,"input",16),t()()()(),e(54,"div",11)(55,"nz-form-item")(56,"nz-form-label"),a(57,"Minutos Tarde"),t(),e(58,"nz-form-control",12)(59,"nz-input-group",2),m(60,"input",17),t()()()(),e(61,"div",11)(62,"nz-form-item")(63,"nz-form-label"),a(64,"Minutos Noche"),t(),e(65,"nz-form-control",12)(66,"nz-input-group",2),m(67,"input",18),t()()()()(),e(68,"nz-form-item")(69,"nz-form-label"),a(70,"Orden"),t(),e(71,"nz-form-control",19)(72,"nz-input-group",2),m(73,"input",20),t()()()()),i&2&&p("nzLayout","vertical")("formGroup",s.validateForm)},dependencies:[B,j,W,U,K,Q,D,I,M,R,L,q,O,A,H,$]});let r=l;return r})();var rt=(()=>{let l=class l{constructor(n,i){this.fb=n,this.modal=i}submitForm(){for(let n in this.validateForm.controls)this.validateForm.controls[n].markAsDirty(),this.validateForm.controls[n].updateValueAndValidity()}ngOnInit(){this.validateForm=this.fb.group({active:[this.stopPoint.active],name:[this.stopPoint.name,[u.required]],description:[this.stopPoint.description,[u.required]],latitude:[this.stopPoint.geopoint.latitude,[u.required]],longitude:[this.stopPoint.geopoint.longitude,[u.required]],imageUrl:[this.stopPoint.imageUrl,[u.required]],kmzUrl:[this.stopPoint.kmzUrl,[u.required]],order:[this.stopPoint.order,[u.required]],round1:[this.stopPoint.round1,[u.required]],round2:[this.stopPoint.round2,[u.required]],round3:[this.stopPoint.round3,[u.required]],round1MinutesSinceStart:[this.stopPoint.round1MinutesSinceStart,[u.required]],round2MinutesSinceStart:[this.stopPoint.round2MinutesSinceStart,[u.required]],round3MinutesSinceStart:[this.stopPoint.round3MinutesSinceStart,[u.required]]})}ngOnDestroy(){}destroyModal(){this.modal.destroy({data:this.validateForm.value})}};l.\u0275fac=function(i){return new(i||l)(C(G),C(J))},l.\u0275cmp=w({type:l,selectors:[["app-shared-stoppoints-edit"]],inputs:{stopPoint:"stopPoint"},decls:74,vars:2,consts:[["nz-form","",3,"ngSubmit","nzLayout","formGroup"],["nzErrorTip","Por favor escriba el nombre!"],["nzPrefixIcon","edit"],["formControlName","name","nz-input","","placeholder","nombre"],["nzErrorTip","Please input your Password!"],["formControlName","description","nz-input","","type","text","placeholder","Descripci\xF3n"],[1,"row"],[1,"col-md-6","col-sm-12"],["nzErrorTip","La geocerca no puede estar en blanco"],["formControlName","latitude","nz-input","","placeholder","geocerca"],["formControlName","longitude","nz-input","","placeholder","geocerca"],[1,"col-md-4","col-sm-12"],["nzErrorTip","Agregue horario"],["formControlName","round1","nz-input","","placeholder","00:00"],["formControlName","round2","nz-input","","placeholder","00:00"],["formControlName","round3","nz-input","","placeholder","00:00"],["type","number","formControlName","round1MinutesSinceStart","nz-input","","placeholder","00"],["type","number","formControlName","round2MinutesSinceStart","nz-input","","placeholder","00"],["type","number","formControlName","round3MinutesSinceStart","nz-input","","placeholder","00"],["nzErrorTip","Orden de ejecuci\xF3n de la ruta"],["formControlName","order","nz-input","","type","number","placeholder","num\xE9rico"]],template:function(i,s){i&1&&(e(0,"form",0),S("ngSubmit",function(){return s.submitForm()}),e(1,"nz-form-item")(2,"nz-form-control",1)(3,"nz-input-group",2),m(4,"input",3),t()()(),e(5,"nz-form-item")(6,"nz-form-control",4)(7,"nz-input-group",2),m(8,"input",5),t()()(),e(9,"div",6)(10,"div",7)(11,"nz-form-item")(12,"nz-form-label"),a(13,"Latitud"),t(),e(14,"nz-form-control",8)(15,"nz-input-group",2),m(16,"input",9),t()()()(),e(17,"div",7)(18,"nz-form-item")(19,"nz-form-label"),a(20,"Longitud"),t(),e(21,"nz-form-control",8)(22,"nz-input-group",2),m(23,"input",10),t()()()()(),e(24,"div",6)(25,"div",11)(26,"nz-form-item")(27,"nz-form-label"),a(28,"Horario D\xEDa"),t(),e(29,"nz-form-control",12)(30,"nz-input-group",2),m(31,"input",13),t()()()(),e(32,"div",11)(33,"nz-form-item")(34,"nz-form-label"),a(35,"Horario Tarde"),t(),e(36,"nz-form-control",12)(37,"nz-input-group",2),m(38,"input",14),t()()()(),e(39,"div",11)(40,"nz-form-item")(41,"nz-form-label"),a(42,"Horario Noche"),t(),e(43,"nz-form-control",12)(44,"nz-input-group",2),m(45,"input",15),t()()()()(),e(46,"div",6)(47,"div",11)(48,"nz-form-item")(49,"nz-form-label"),a(50,"Minutos d\xEDa"),t(),e(51,"nz-form-control",12)(52,"nz-input-group",2),m(53,"input",16),t()()()(),e(54,"div",11)(55,"nz-form-item")(56,"nz-form-label"),a(57,"Minutos Tarde"),t(),e(58,"nz-form-control",12)(59,"nz-input-group",2),m(60,"input",17),t()()()(),e(61,"div",11)(62,"nz-form-item")(63,"nz-form-label"),a(64,"Minutos Noche"),t(),e(65,"nz-form-control",12)(66,"nz-input-group",2),m(67,"input",18),t()()()()(),e(68,"nz-form-item")(69,"nz-form-label"),a(70,"Orden"),t(),e(71,"nz-form-control",19)(72,"nz-input-group",2),m(73,"input",20),t()()()()),i&2&&p("nzLayout","vertical")("formGroup",s.validateForm)},dependencies:[B,j,W,U,K,Q,D,I,M,R,L,q,O,A,H,$]});let r=l;return r})();var ot=at(lt());var pt=["download"],ut=(r,l)=>["/customers/routes/edit/",r,l];function ft(r,l){if(r&1){let o=b();e(0,"li",33),S("click",function(){v(o);let i=h(2);return x(i.toggleActive(i.item))}),m(1,"i",42),e(2,"span",35),a(3,"Activar"),t()()}}function ht(r,l){if(r&1){let o=b();e(0,"li",33),S("click",function(){v(o);let i=h(2);return x(i.toggleActive(i.item))}),m(1,"i",42),e(2,"span",35),a(3,"Desactivar"),t()()}}function gt(r,l){if(r&1){let o=b();e(0,"div",28)(1,"nz-page-header",29)(2,"nz-page-header-title"),a(3,"Detalles de la ruta"),t(),e(4,"nz-page-header-subtitle"),a(5,"Listado de las estaciones de esta ruta"),t(),e(6,"nz-page-header-extra")(7,"button",30),m(8,"i",31),t(),e(9,"nz-dropdown-menu",null,3)(11,"ul",32)(12,"li",33),S("click",function(){v(o);let i=h();return x(i.openPanelPDF(i.item))}),m(13,"i",34),e(14,"span",35),a(15,"Generar Documento"),t()(),T(16,ft,4,0,"li",36)(17,ht,4,0,"li",36),e(18,"li",37)(19,"a",38),m(20,"i",39),e(21,"span",35),a(22,"Editar"),t()()(),m(23,"li",40),e(24,"li",33),S("click",function(){v(o);let i=h();return x(i.deleteRoute(i.item))}),m(25,"i",41),e(26,"span",35),a(27,"Eliminar"),t()()()()()()()}if(r&2){let o=k(10),n=h();c(),p("nzGhost",!1),c(6),p("nzDropdownMenu",o),c(9),p("ngIf",!n.item.active),c(),p("ngIf",n.item.active),c(2),p("routerLink",ze(5,ut,n.item.customerId,n.item.routeId))}}function St(r,l){r&1&&m(0,"i",43)}function zt(r,l){if(r&1&&(e(0,"td"),a(1),t()),r&2){let o=h().$implicit;g(o.active?"text-dark":"text-muted font-italic"),c(),_(o.rounds.round1)}}function vt(r,l){if(r&1&&(e(0,"td"),a(1,"--:--"),t()),r&2){let o=h().$implicit;g(o.active?"text-dark":"text-muted font-italic")}}function xt(r,l){if(r&1&&(e(0,"td"),a(1),t()),r&2){let o=h().$implicit;g(o.active?"text-dark":"text-muted font-italic"),c(),_(o.round1MinutesSinceStart)}}function _t(r,l){if(r&1&&(e(0,"td"),a(1,"--:--"),t()),r&2){let o=h().$implicit;g(o.active?"text-dark":"text-muted font-italic")}}function Ct(r,l){if(r&1&&(e(0,"td"),a(1),t()),r&2){let o=h().$implicit;g(o.active?"text-dark":"text-muted font-italic"),c(),_(o.rounds.round2)}}function Et(r,l){if(r&1&&(e(0,"td"),a(1,"--:--"),t()),r&2){let o=h().$implicit;g(o.active?"text-dark":"text-muted font-italic")}}function yt(r,l){if(r&1&&(e(0,"td"),a(1),t()),r&2){let o=h().$implicit;g(o.active?"text-dark":"text-muted font-italic"),c(),_(o.round2MinutesSinceStart)}}function bt(r,l){if(r&1&&(e(0,"td"),a(1,"--:--"),t()),r&2){let o=h().$implicit;g(o.active?"text-dark":"text-muted font-italic")}}function Pt(r,l){if(r&1&&(e(0,"td"),a(1),t()),r&2){let o=h().$implicit;g(o.active?"text-dark":"text-muted font-italic"),c(),_(o.rounds.round3)}}function wt(r,l){if(r&1&&(e(0,"td"),a(1,"--:--"),t()),r&2){let o=h().$implicit;g(o.active?"text-dark":"text-muted font-italic")}}function Tt(r,l){if(r&1&&(e(0,"td"),a(1),t()),r&2){let o=h().$implicit;g(o.active?"text-dark":"text-muted font-italic"),c(),_(o.round3MinutesSinceStart)}}function Nt(r,l){if(r&1&&(e(0,"td"),a(1,"--:--"),t()),r&2){let o=h().$implicit;g(o.active?"text-dark":"text-muted font-italic")}}function Dt(r,l){if(r&1){let o=b();e(0,"li",33),S("click",function(){v(o);let i=h().$implicit,s=h();return x(s.toggleActive(i))}),m(1,"i",49),a(2," Activar "),t()}}function It(r,l){if(r&1){let o=b();e(0,"li",33),S("click",function(){v(o);let i=h().$implicit,s=h();return x(s.toggleActive(i))}),m(1,"i",50),a(2," Desactivar "),t()}}function Mt(r,l){if(r&1){let o=b();e(0,"tr")(1,"td"),a(2),t(),e(3,"td"),a(4),t(),e(5,"td"),a(6),t(),e(7,"td"),a(8),t(),T(9,zt,2,3,"td",44)(10,vt,2,2,"td",44)(11,xt,2,3,"td",44)(12,_t,2,2,"td",44)(13,Ct,2,3,"td",44)(14,Et,2,2,"td",44)(15,yt,2,3,"td",44)(16,bt,2,2,"td",44)(17,Pt,2,3,"td",44)(18,wt,2,2,"td",44)(19,Tt,2,3,"td",44)(20,Nt,2,2,"td",44),e(21,"td")(22,"a",45),m(23,"i",46),t(),e(24,"nz-dropdown-menu",null,3)(26,"ul",32)(27,"li",33),S("click",function(){let i=v(o).$implicit,s=h();return x(s.openPanelPDF(i))}),m(28,"i",34),e(29,"span",35),a(30,"Generar Documento"),t()(),T(31,Dt,3,0,"li",36)(32,It,3,0,"li",36),e(33,"li",33),S("click",function(){let i=v(o).$implicit,s=h();return x(s.showModalEdit(i))}),m(34,"i",47),a(35," Editar "),t(),m(36,"li",40),e(37,"li",37),m(38,"i",48),a(39," Eliminar "),t()()()()()}if(r&2){let o=l.$implicit,n=k(25);c(),g(o.active?"text-dark":"text-muted font-italic"),c(),_(o.order),c(),g(o.active?"text-dark":"text-muted font-italic"),c(),_(o.name),c(),g(o.active?"text-dark":"text-muted font-italic"),c(),_(o.description),c(),g(o.active?"text-dark":"text-muted font-italic"),c(),fe("",o.geopoint.latitude,", ",o.geopoint.longitude,""),c(),p("ngIf",o.rounds),c(),p("ngIf",!o.rounds),c(),p("ngIf",o.rounds),c(),p("ngIf",!o.rounds),c(),p("ngIf",o.rounds),c(),p("ngIf",!o.rounds),c(),p("ngIf",o.rounds),c(),p("ngIf",!o.rounds),c(),p("ngIf",o.rounds),c(),p("ngIf",!o.rounds),c(),p("ngIf",o.rounds),c(),p("ngIf",!o.rounds),c(),g(o.active?"text-dark":"text-muted font-italic"),c(),p("nzDropdownMenu",n),c(9),p("ngIf",!o.active),c(),p("ngIf",o.active)}}var ui=(()=>{let l=class l{constructor(n,i,s){this.modalService=n,this.message=i,this.afs=s,this.accountId="",this.routeId="",this.rolService=V(ke),this.routesService=V(Ve),this.userService=V(Ie),this.authService=V(Pe),this.stopPointsList=[],this.loading=!0,this.time=new Date,this.isEditing=!1,this.infoLoad=[],this.isPdfVisible=!1,this.pdfTitle="",this.pdfOrder="",this.pdfDescription="",this.stopId="",this.stopSubscriptions$=new oe,this.authService.user.subscribe(d=>{this.user=d,this.user.rolId!=null&&this.rolService.getRol(this.user.rolId).valueChanges().subscribe(f=>{this.infoLoad=f,this.userlevelAccess=this.infoLoad.optionAccessLavel})})}ngOnInit(){this.getSubscriptions()}ngOnDestroy(){this.sub.unsubscribe(),this.stopSubscriptions$.next(!1),this.stopSubscriptions$.complete()}timePickerChange(){}handleCancel(){this.isPdfVisible=!1}handleOkPDF(){console.log("Imprimir");try{var n=new te;(0,ot.default)(document.getElementById("documentoPDF")).then(i=>{let s=i.toDataURL("image/png"),d=new te("p","pt","a4");var f=d.internal.pageSize.getWidth(),z=i.height*f/i.width;d.addImage(s,"PNG",10,10,f,z);let y=this.pdfOrder+"-"+this.pdfTitle+".pdf";d.save(y)}),this.isPdfVisible=!1}catch(i){console.error(i)}}toggleActive(n){this.routesService.toggleActiveStopPoint(this.accountId,this.routeId,n)}openPanelPDF(n){this.isPdfVisible=!0,console.log(n),this.pdfTitle=n.name,this.pdfOrder=n.order,this.pdfDescription=n.description,this.stopId=n.id}sendMessage(n,i){this.message.create(n,i)}deleteRoute(n){this.userlevelAccess=="1"?this.routesService.deleteRoute(n.customerId,n.routeId).then(()=>{console.log("done")}).catch(i=>console.log(i)):this.sendMessage("error","El usuario no tiene permisos para borrar datos, favor de contactar al administrador.")}getSubscriptions(){this.sub=this.routesService.getRouteStopPoints(this.accountId,this.routeId).pipe(Z(n=>n.map(i=>{let s=i.payload.doc.id,d=i.payload.doc.data();return X(N({},d),{id:s})}))).subscribe(n=>{this.stopPointsList=n,this.loading=!1}),this.routesService.getRoute(this.accountId,this.routeId).pipe(ae(this.stopSubscriptions$),Z(n=>{let i=n.payload.id,s=n.payload.data();return X(N({},s),{id:i})}),le(n=>(this.item=n,n))).subscribe()}showModalEdit(n){let i=this.modalService.create({nzTitle:"Editar "+n.description,nzContent:rt,nzOkText:"Guardar",nzCancelText:"Cancelar",nzOkLoading:this.isEditing,nzOnOk:()=>new Promise(s=>Y(this,null,function*(){this.isEditing=!0;let d=i.getContentComponent().validateForm.value;d.id=n.id,yield this.routesService.updateStopPoint(this.accountId,this.routeId,d).then(()=>{this.isEditing=!1,i.destroy(),this.message.success("\xA1Listo!")}).catch(f=>{this.isEditing=!1,this.message.error("Ocurri\xF3 un error: ",f)})})),nzOnCancel:()=>console.log("cancel")})}showModalCreate(){let n=this.modalService.create({nzTitle:"Nueva Estaci\xF3n",nzContent:nt,nzOkText:"Crear",nzCancelText:"Cancelar",nzOkLoading:this.isEditing,nzOnOk:()=>new Promise(i=>Y(this,null,function*(){this.isEditing=!0;let s=n.getContentComponent().validateForm.value;s.id=this.afs.createId(),yield this.routesService.createStopPoint(this.accountId,this.routeId,s).then(()=>{this.isEditing=!1,n.destroy(),this.message.success("\xA1Listo!")}).catch(d=>{this.isEditing=!1,this.message.error("Ocurri\xF3 un error: ",d)})})),nzOnCancel:()=>console.log("cancel")})}onEditOk(){}downloadImg(){let n=document.getElementById("download")?.querySelector("canvas");if(n){this.download.nativeElement.href=n.toDataURL("image/png"),this.download.nativeElement.download="ng-zorro-antd";let i=new MouseEvent("click");this.download.nativeElement.dispatchEvent(i)}}};l.\u0275fac=function(i){return new(i||l)(C(Me),C(be),C(Ee))},l.\u0275cmp=w({type:l,selectors:[["app-shared-stoppoints-list"]],viewQuery:function(i,s){if(i&1&&ce(pt,5),i&2){let d;pe(d=ue())&&(s.download=d.first)}},inputs:{accountId:"accountId",routeId:"routeId"},decls:81,vars:9,consts:[["searchPrefix",""],["basicTable",""],["download",""],["menu","nzDropdownMenu"],["class","site-page-header-ghost-wrapper",4,"ngIf"],[1,"page-header"],[1,"row","align-items-md-center"],[1,"col-md-6"],[1,"row"],[1,"col-md-5"],[3,"nzPrefix"],["type","text","nz-input","","placeholder","Buscar estaci\xF3n"],[1,"text-md-right","m-v-10"],["nz-button","",2,"background-color","#4F6F57","color","#f6f3ea",3,"click"],["nz-icon","","nzType","plus"],[3,"nzData","nzLoading"],["rowspan","2"],["colspan","2"],[2,"color","#4F6F57"],[4,"ngFor","ngForOf"],["nzTitle","Imprimir Estaci\xF3n",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible"],["id","documentoPDF",1,"documentPDF"],[1,"tableStyle"],["colspan","3"],[2,"display","flex","justify-content","center","align-items","center"],["src","assets/images/logo/andlogo.png","alt",""],["nzValue","stopId"],["nz-button","","nzType","primary",3,"click"],[1,"site-page-header-ghost-wrapper"],[3,"nzGhost"],["nz-button","","nzNoAnimation","","nz-dropdown","",2,"border","none","padding","0",3,"nzDropdownMenu"],["nz-icon","","nzType","ellipsis","nzTheme","outline",2,"font-size","20px","vertical-align","top"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click"],["nz-icon","","nzType","printer","theme","outline"],[1,"m-l-10"],["nz-menu-item","",3,"click",4,"ngIf"],["nz-menu-item",""],[3,"routerLink"],["nz-icon","","nzType","edit","theme","outline"],["nz-menu-divider",""],["nz-icon","","nzType","delete","theme","outline"],["nz-icon","","nzType","eye","theme","outline"],["nz-icon","","nzType","search",1,"opacity-04"],[3,"class",4,"ngIf"],["nz-dropdown","","nzPlacement","bottomRight",3,"nzDropdownMenu"],["nz-icon","","nzType","ellipsis","nzTooltipTitle","M\xE1s informaci\xF3n","nzTooltipPlacement","topLeft","nz-tooltip",""],["nz-icon","","nzType","edit"],["nz-icon","","nzTheme","twotone","nzTwotoneColor","#de4436","nzType","delete"],["nz-icon","","nzType","check-circle"],["nz-icon","","nzType","pause-circle"]],template:function(i,s){if(i&1){let d=b();T(0,gt,28,8,"div",4),e(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"nz-input-group",10),m(7,"input",11),t(),T(8,St,1,0,"ng-template",null,0,ve),t()()(),e(10,"div",7)(11,"div",12)(12,"button",13),S("click",function(){return v(d),x(s.showModalCreate())}),m(13,"i",14),e(14,"span"),a(15,"Agregar estaci\xF3n"),t()()()()()(),e(16,"nz-table",15,1)(18,"thead")(19,"tr")(20,"th",16),a(21,"Orden"),t(),e(22,"th",16),a(23,"Nombre"),t(),e(24,"th",16),a(25,"Descripci\xF3n"),t(),e(26,"th",16),a(27,"Ubicaci\xF3n"),t(),e(28,"th",17),a(29,"D\xEDa"),t(),e(30,"th",17),a(31,"Tarde"),t(),e(32,"th",17),a(33,"Noche"),t(),m(34,"th",18),t(),e(35,"tr")(36,"th",18),a(37,"Hora"),t(),e(38,"th",18),a(39,"Minutos"),t(),e(40,"th",18),a(41,"Hora"),t(),e(42,"th",18),a(43,"Minutos"),t(),e(44,"th",18),a(45,"Hora"),t(),e(46,"th",18),a(47,"Minutos"),t(),m(48,"th",18),t()(),e(49,"tbody"),T(50,Mt,40,30,"tr",19),t()(),e(51,"nz-modal",20),Se("nzVisibleChange",function(z){return v(d),ge(s.isPdfVisible,z)||(s.isPdfVisible=z),x(z)}),S("nzOnCancel",function(){return v(d),x(s.handleCancel())})("nzOnOk",function(){return v(d),x(s.handleOkPDF())}),e(52,"div",21)(53,"table",22)(54,"tr")(55,"td",23)(56,"div",24),m(57,"img",25),t()()(),e(58,"tr")(59,"td",23)(60,"div",24)(61,"h1"),a(62),t()()()(),e(63,"tr")(64,"td",23)(65,"div",24)(66,"h4"),a(67),t()()()(),e(68,"tr")(69,"td",23)(70,"div",24)(71,"h4"),a(72),t()()()(),e(73,"tr")(74,"td",23)(75,"div",24),m(76,"nz-qrcode",26)(77,"a",null,2),e(79,"button",27),S("click",function(){return v(d),x(s.downloadImg())}),a(80,"Descargar"),t()()()()()()()}if(i&2){let d=k(9),f=k(17);p("ngIf",!!s.item),c(6),p("nzPrefix",d),c(10),p("nzData",s.stopPointsList)("nzLoading",s.loading),c(34),p("ngForOf",f.data),c(),he("nzVisible",s.isPdfVisible),c(11),ee("Estaci\xF3n: ",s.pdfTitle,""),c(5),ee("Orden: ",s.pdfOrder,""),c(5),_(s.pdfDescription)}},dependencies:[xe,_e,We,ye,D,I,Te,Xe,Qe,Ke,Ze,Je,Ye,Fe,Oe,Le,Ae,Re,qe,$e,He,we,De,M,Ne,Ue,Ge,je,Be,Ce],styles:[".documentPDF[_ngcontent-%COMP%]{max-width:500px;margin:20px auto;padding:20px;border:1px solid #ccc;box-shadow:0 0 10px #0000001a}.tableStyle[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px;border:1px solid #ddd}.theadClass[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:center}img[_ngcontent-%COMP%]{max-width:100%;height:auto}"]});let r=l;return r})();var gi=[{headerName:"Id",field:"uid",hide:!0,sortable:!0,filter:"agTextColumnFilter"},{headerName:"Matr\xEDcula",field:"studentId",sortable:!0,filter:"agTextColumnFilter",aggFunc:"count",chartDataType:"series"},{headerName:"Nombre",field:"firstName",sortable:!0,filter:!0},{headerName:"Nombre",field:"lastName",sortable:!0,filter:!0},{headerName:"Email",field:"email",sortable:!0,filter:!0,cellRenderer:r=>{let l=r.data;return l&&l.emailVerified?'<span style="color: green;"><b>'+r.value+"</b></span>":r.value}},{headerName:"Tel\xE9fono",field:"phone",sortable:!0,filter:!0}],Si="always";export{gi as a,Si as b,ie as c,st as d,Vt as e,ui as f};
