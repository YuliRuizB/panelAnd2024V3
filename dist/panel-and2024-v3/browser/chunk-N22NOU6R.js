import{a as nC,b as sC,c as aC}from"./chunk-BB6MMI4T.js";import{a as nn,b as Zc,c as lC}from"./chunk-23K45VXZ.js";import{a as eC,b as tC,c as cx,d as Xc}from"./chunk-T32EOYUH.js";import{a as Yc}from"./chunk-JLBX7FC6.js";import{a as Jy}from"./chunk-JGH3SLWC.js";import{a as $c}from"./chunk-HIVN76BN.js";import{a as Gy,g as rC,h as oC}from"./chunk-RHHFFL6C.js";import{a as Qt}from"./chunk-VM5DQTXF.js";import{a as Qc}from"./chunk-CHWJKDZI.js";import{a as iC}from"./chunk-KH5FQ5NG.js";import{a as jc}from"./chunk-4PSXTE2T.js";import{d as Wc}from"./chunk-D3SSYGZ6.js";import{c as qc}from"./chunk-ZWEILEML.js";import{a as Ur}from"./chunk-C7EU4JWI.js";import{a as on,h as Uc}from"./chunk-YMC4FHCD.js";import{A as Zo,B as Zy,C as Jo,D as en,E as tn,F as rn,H as Kc,a as Hi,c as mr,d as qr,e as Wa,f as By,g as $y,i as Wy,k as vr,m as Uy,n as Yo,o as Xo,s as Ky,t as Yy,v as Xy,x as Qo,y as Qy}from"./chunk-77UG634U.js";import{$ as Gc,E as Oy,M as Uo,P as pi,Q as xi,R as gi,S as Ei,_ as Gi,aa as Hc,b as Vi,c as K,ca as ky,d as Ot,da as Vy,e as li,ea as Ts,fa as Jn,g as Pg,h as jr,ha as Ba,i as di,j as Ha,ja as pr,k as ui,l as Py,m as ci,o as Ry,oa as jy,pa as yr,q as hi,qa as Cr,sa as Kr,t as Kt,ta as qy,u as Lt}from"./chunk-ESHSJ4UG.js";import{a as Ly,b as Ny,c as Bc,d as Xt}from"./chunk-V6TECCBK.js";import{a as cr,c as hr,d as qo,f as gr,g as Bi,h as Ko,i as $a,j as fr,k as Hy}from"./chunk-UZE4SSVE.js";import{$ as jo,$b as At,A as iy,Ab as Rc,Ac as Ga,Ae as Mt,Ba as hy,Bb as Mc,Bd as Iy,Bf as Nt,C as Bo,Ce as Ay,Cf as kt,Da as xc,Db as Lr,De as bt,Ea as $,Eb as Tg,Ef as Vt,Fa as py,Fb as Rn,G as wc,Ga as E,Gb as yy,He as Rg,Ia as gy,Ib as Re,Ka as xs,L as ry,Lb as Cy,Ld as Fy,M as $o,Mb as Ic,Nb as Fc,O as xe,P as oy,Pa as po,Q as ft,Ra as fy,Rc as ur,Sa as Ec,Sd as Tt,Ta as Dc,Td as zy,U as $r,Ua as v,V as Wo,Va as y,Wa as N,Wb as by,X as Or,Xa as go,Xe as Mn,Y as ie,Ya as fo,Yb as wy,Z as Sc,Za as my,_ as ke,_a as re,_b as Sy,aa as ny,ac as Dt,af as Yt,b as Xv,ba as sy,bb as q,bc as zc,bf as Li,c as it,cc as Ac,d as Qv,db as O,eb as Oa,ec as Oc,fa as Zn,fb as La,fc as _y,fd as Nc,ga as H,gb as vy,gc as xy,gd as kc,ha as B,hb as cd,hd as My,ic as Ey,ie as Vc,ja as ay,ka as ly,kb as Tc,kc as Lc,l as Ho,la as Aa,lb as hd,m as ce,ma as Y,mb as pd,nb as ue,oa as _c,ob as D,pb as J,qb as Et,qf as mo,ra as dy,rb as gd,sa as _,ta as ee,tb as ut,u as ey,ub as ct,uc as Dy,va as uy,vb as ht,vc as Ty,w as ty,wa as _i,wb as Pc,wc as ka,xb as Wr,y as bc,ya as cy,yb as Na,yc as Ds,zb as Es,zc as Va}from"./chunk-W3I2I5DW.js";import{a as A,c as et,d as $e,e as Zv,f as Jv,g as _s}from"./chunk-TNV42MFJ.js";import{a as me,b as dr,f as Qn,h as za}from"./chunk-SIAVTO45.js";var dC=Qn(Ts());var Jc=(()=>{class i{constructor(e){this.afs=e}getDevices(e){return this.afs.collection("vendors").doc(e).collection("fleet").snapshotChanges()}addDevice(e,r){return this.afs.collection("vendors").doc(e).collection("fleet").add(r)}deleteDevice(e,r){return this.afs.collection("vendors").doc(e).collection("fleet").doc(r).delete()}static{this.\u0275fac=function(r){return new(r||i)(Or(ur))}}static{this.\u0275prov=$r({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var hx=(i,t)=>["/vendor/vehicle/edit",i,t];function px(i,t){i&1&&N(0,"i",18)}function gx(i,t){if(i&1){let e=re();v(0,"i",20),q("click",function(){H(e);let o=O(3);return o.searchValue="",B(o.searchByValue())}),y()}}function fx(i,t){if(i&1&&$(0,gx,1,0,"i",19),i&2){let e=O(2);E("ngIf",e.searchValue)}}function mx(i,t){if(i&1){let e=re();v(0,"form",21),q("ngSubmit",function(){H(e);let o=O(2);return B(o.submitForm())}),v(1,"nz-form-item")(2,"nz-form-control",22)(3,"nz-input-group",23),N(4,"input",24),y()()(),v(5,"div",11)(6,"div",25)(7,"nz-form-item")(8,"nz-form-control",26)(9,"nz-input-group",27),N(10,"input",28),y()()()(),v(11,"div",25)(12,"nz-form-item")(13,"nz-form-control",29)(14,"nz-input-group",27),N(15,"input",30),y()()()()()()}if(i&2){let e=O(2);E("formGroup",e.vehicleForm)}}function vx(i,t){if(i&1){let e=re();v(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"nz-input-group",13)(6,"input",14),ht("ngModelChange",function(o){H(e);let n=O();return ct(n.searchValue,o)||(n.searchValue=o),B(o)}),q("ngModelChange",function(){H(e);let o=O();return B(o.searchByValue())}),y()(),$(7,px,1,0,"ng-template",null,0,Re)(9,fx,1,1,"ng-template",null,1,Re),y()()(),v(11,"div",10)(12,"div",15)(13,"button",16),q("click",function(){H(e);let o=O();return B(o.showModal())}),v(14,"span"),D(15,"Nuevo Veh\xEDculo"),y()(),v(16,"nz-modal",17),ht("nzVisibleChange",function(o){H(e);let n=O();return ct(n.isVisible,o)||(n.isVisible=o),B(o)}),q("nzOnCancel",function(){H(e);let o=O();return B(o.handleCancel())})("nzOnOk",function(){H(e);let o=O();return B(o.submitForm())}),y(),$(17,mx,16,1,"ng-template",null,2,Re),y()()()()}if(i&2){let e=ue(8),r=ue(10),o=ue(18),n=O();_(5),E("nzPrefix",e)("nzSuffix",r),_(),ut("ngModel",n.searchValue),_(10),ut("nzVisible",n.isVisible),E("nzOkDisabled",!n.vehicleForm.valid)("nzOkLoading",n.isOkLoading)("nzContent",o)}}function yx(i,t){i&1&&(v(0,"nz-tag",50),D(1," activo"),y()),i&2&&E("nzColor","blue")}function Cx(i,t){i&1&&(v(0,"nz-tag",50),D(1,"Deshabilitado B2U "),y()),i&2&&E("nzColor","red")}function bx(i,t){i&1&&(v(0,"nz-tag",50),D(1,"Habilitado "),y()),i&2&&E("nzColor","cyan")}function wx(i,t){if(i&1&&(v(0,"div",32)(1,"nz-card")(2,"div",33)(3,"div",34),N(4,"nz-avatar",35),v(5,"div",36)(6,"h5",37),D(7),y(),v(8,"span",38),D(9),y()()(),v(10,"div")(11,"a",39),N(12,"i",40),y(),v(13,"nz-dropdown-menu",null,3)(15,"ul",41)(16,"li",42)(17,"a",43),N(18,"i",40),v(19,"span",36),D(20,"Editar"),y()()(),N(21,"li",44),v(22,"li",42)(23,"a"),N(24,"i",40),v(25,"span",36),D(26,"Eliminar"),y()()()()()()(),v(27,"p",45),D(28),y(),v(29,"p",46),D(30),y(),v(31,"p",46),D(32),y(),v(33,"div",47)(34,"div",48)(35,"div"),$(36,yx,2,1,"nz-tag",49)(37,Cx,2,1,"nz-tag",49)(38,bx,2,1,"nz-tag",49),y(),N(39,"div"),y()()()()),i&2){let e=t.$implicit,r=ue(14),o=O(2);_(4),E("nzSize",40)("nzSrc",e.avatar),_(3),J(e.name),_(2),J(e.carMaker),_(2),E("nzDropdownMenu",r),_(6),E("routerLink",Rc(12,hx,o.user.vendorId,e.id)),_(11),J(e.driver),_(2),J(e.model),_(2),J(e.seats),_(4),E("ngIf",e.active),_(),E("ngIf",e.disabled),_(),E("ngIf",!e.disabled)}}function Sx(i,t){if(i&1&&(v(0,"div",11),$(1,wx,40,15,"div",31),y()),i&2){let e=O();_(),E("ngForOf",e.devicesList)}}function _x(i,t){i&1&&(v(0,"nz-card")(1,"div",11)(2,"div",51)(3,"nz-card")(4,"div",48)(5,"h5"),D(6,"Veh\xEDculos"),y()(),N(7,"div",52),y()()()())}var vz=(()=>{class i{constructor(e,r,o){this.fb=e,this.messageService=r,this.router=o,this.authService=ie(bt),this.devicesService=ie(Jc),this.loadedDevicesList=[],this.view="cardView",this.loading=!0,this.stopSubscriptions$=new it,this.searchValue="",this.isVisible=!1,this.isOkLoading=!1,this.infoLoad=[],this.rolService=ie(Hi),this.popupParent=document.querySelector("body")}ngOnInit(){this.authService.user.pipe(xe(this.stopSubscriptions$),ft(e=>{this.createForm()}),$o(e=>(this.user=e,this.user&&this.user.rolId?this.rolService.getRol(this.user.rolId).valueChanges().pipe(ft(r=>{this.infoLoad=r,this.userlevelAccess=this.infoLoad.optionAccessLavel}),ce(()=>e)):Ho(e))),ft(e=>{this.getSubscriptions(e.vendorId)})).subscribe()}sendMessage(e,r){this.messageService.create(e,r)}ngOnDestroy(){this.stopSubscriptions$.next(!1),this.stopSubscriptions$.complete()}getSubscriptions(e){e!=null&&this.devicesService.getDevices(e).pipe(xe(this.stopSubscriptions$),ce(r=>r.map(o=>{let n=o.payload.doc.data(),s=o.payload.doc.id;return dr(me({},n),{id:s})}))).subscribe(r=>{this.devicesList=r,this.loadedDevicesList=dC.sortBy(r,["name","asc"])})}searchByValue(){this.initializeList();let e=this.searchValue;e&&(this.devicesList=this.devicesList.filter(r=>r.name&&e?r.name.toLowerCase().indexOf(e.toLowerCase())>-1:!1))}initializeList(){this.devicesList=this.loadedDevicesList}showModal(){this.isVisible=!0}handleCancel(){this.isVisible=!1}createForm(){this.vehicleForm=this.fb.group({name:["",[K.required,K.minLength(3),K.maxLength(10)]],licensePlates:["",[K.required,K.minLength(6),K.maxLength(10)]],seats:[0,[K.required]],active:[!0],disabled:[!1]})}submitForm(){this.isOkLoading=!0,this.userlevelAccess!="3"?this.user.vendorId!=""?this.devicesService.addDevice(this.user.vendorId,this.vehicleForm.value).then(()=>{this.isOkLoading=!1,this.isVisible=!1}).catch(e=>{this.isOkLoading=!1,this.sendMessage("error",e)}):this.sendMessage("error","VendorId no esta establecido favor de validar con administraci\xF3n"):this.sendMessage("error","El usuario no tiene permisos para agregar datos, favor de contactar al administrador.")}getContextMenuItems(e){e.context=this;var r=[{name:"Editar "+e.node.data.name,action:()=>{},cssClasses:["redFont","bold"]},"separator",{name:"Eliminar "+e.node.data.name,action:function(){window.alert("Alerting about "+e.value)},cssClasses:["redFont","bold"]},{name:"Desactivar",checked:!0,action:function(){},icon:'<img src="../images/skills/mac.png"/>'},"copy","separator","chartRange"];return r}static{this.\u0275fac=function(r){return new(r||i)(ee(hi),ee(Mt),ee(Ds))}}static{this.\u0275cmp=ke({type:i,selectors:[["app-fleet"]],decls:4,vars:3,consts:[["searchPrefix",""],["clearIconSuffix",""],["modalContent",""],["projectListSetting","nzDropdownMenu"],["class","page-header",4,"ngIf"],[1,"container-fluid"],["class","row",4,"ngIf"],[4,"ngIf"],[1,"page-header"],[1,"row","align-items-md-center"],[1,"col-md-6"],[1,"row"],[1,"col-md-5"],[3,"nzPrefix","nzSuffix"],["type","text","nz-input","","placeholder","Buscar por nombre",3,"ngModelChange","ngModel"],[1,"text-md-right","m-v-10"],["nz-button","",2,"background-color","#4F6F57","color","#f6f3ea",3,"click"],["nzTitle","Nuevo Veh\xEDculo",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible","nzOkDisabled","nzOkLoading","nzContent"],["nz-icon","",1,"opacity-04"],["nz-icon","","nz-tooltip","","class","ant-input-clear-icon","nzTheme","fill",3,"click",4,"ngIf"],["nz-icon","","nz-tooltip","","nzTheme","fill",1,"ant-input-clear-icon",3,"click"],["nz-form","",1,"login-form",3,"ngSubmit","formGroup"],["nzErrorTip","Por favor escriba el nombre del veh\xEDculo"],["nzPrefixIcon","user"],["type","text","nz-input","","formControlName","name","placeholder","Identificaci\xF3n del veh\xEDculo"],[1,"col-md-6","col-sm-12"],["nzErrorTip","Por favor escriba las placas del veh\xEDculo"],["nzPrefixIcon","lock"],["type","text","nz-input","","formControlName","licensePlates","placeholder","Placas"],["nzErrorTip","Por favor escriba la cantidad de asientos de este veh\xEDculo"],["type","number","nz-input","","formControlName","seats","placeholder","N\xFAmero de asientos"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"col-md-3"],[1,"d-flex","justify-content-between"],[1,"media"],["nzShape","square",2,"background-color","white","color","#4F6F57",3,"nzSize","nzSrc"],[1,"m-l-10"],[1,"m-b-0"],[1,"text-muted","font-size-13"],["nz-dropdown","","nzPlacement","bottomRight","nzTrigger","click",1,"text-gray","font-size-18",3,"nzDropdownMenu"],["nz-icon","","theme","outline"],["nz-menu","","nzSelectable",""],["nz-menu-item",""],["routerLinkActive","router-link-active",3,"routerLink"],["nz-menu-divider",""],[1,"m-t-25"],[1,"m-t-0","m-b-0"],[1,"m-t-20"],[1,"d-flex","justify-content-between","align-items-center"],["class","m-b-0",3,"nzColor",4,"ngIf"],[1,"m-b-0",3,"nzColor"],[1,"col-md-12"],[1,"m-t-30"]],template:function(r,o){r&1&&($(0,vx,19,7,"div",4),v(1,"div",5),$(2,Sx,2,1,"div",6)(3,_x,8,0,"nz-card",7),y()),r&2&&(E("ngIf",o.devicesList),_(2),E("ngIf",o.view=="cardView"),_(),E("ngIf",o.view=="listView"))},dependencies:[At,Dt,Tt,Lt,Kt,xi,pi,gi,Gi,Hc,Gc,pr,Ur,hr,cr,qo,Bi,Ko,fr,Uo,Vt,Nt,kt,Xt,on,Va,Ga,di,Vi,Ha,Ot,li,ui,ci,jr]})}}return i})();var Al=Qn(Ts());var M0=Qn(cx());var xx=["*"],rh=class{_clearListeners(){for(let t of this._listeners)t.remove();this._listeners=[]}constructor(t){this._ngZone=t,this._pending=[],this._listeners=[],this._targetStream=new Qv(void 0)}getLazyEmitter(t){return this._targetStream.pipe($o(e=>{let r=new Xv(o=>{if(!e){this._pending.push({observable:r,observer:o});return}let n=e.addListener(t,s=>{this._ngZone.run(()=>o.next(s))});if(!n){o.complete();return}return this._listeners.push(n),()=>n.remove()});return r}))}setTarget(t){let e=this._targetStream.value;t!==e&&(e&&(this._clearListeners(),this._pending=[]),this._targetStream.next(t),this._pending.forEach(r=>r.observable.subscribe(r.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}},md={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"},uC="500px",cC="500px",Mg=(()=>{class i{set center(e){this._center=e}set zoom(e){this._zoom=e}set options(e){this._options=e||md}constructor(e,r,o){if(this._elementRef=e,this._ngZone=r,this._eventManager=new rh(ie(_i)),this.height=uC,this.width=cC,this._options=md,this.mapInitialized=new Y,this.authFailure=new Y,this.boundsChanged=this._eventManager.getLazyEmitter("bounds_changed"),this.centerChanged=this._eventManager.getLazyEmitter("center_changed"),this.mapClick=this._eventManager.getLazyEmitter("click"),this.mapDblclick=this._eventManager.getLazyEmitter("dblclick"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.headingChanged=this._eventManager.getLazyEmitter("heading_changed"),this.idle=this._eventManager.getLazyEmitter("idle"),this.maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed"),this.mapMousemove=this._eventManager.getLazyEmitter("mousemove"),this.mapMouseout=this._eventManager.getLazyEmitter("mouseout"),this.mapMouseover=this._eventManager.getLazyEmitter("mouseover"),this.projectionChanged=this._eventManager.getLazyEmitter("projection_changed"),this.mapRightclick=this._eventManager.getLazyEmitter("rightclick"),this.tilesloaded=this._eventManager.getLazyEmitter("tilesloaded"),this.tiltChanged=this._eventManager.getLazyEmitter("tilt_changed"),this.zoomChanged=this._eventManager.getLazyEmitter("zoom_changed"),this._isBrowser=Lc(o),this._isBrowser){let n=window;n.google,this._existingAuthFailureCallback=n.gm_authFailure,n.gm_authFailure=()=>{this._existingAuthFailureCallback&&this._existingAuthFailureCallback(),this.authFailure.emit()}}}ngOnChanges(e){(e.height||e.width)&&this._setSize();let r=this.googleMap;r&&(e.options&&r.setOptions(this._combineOptions()),e.center&&this._center&&r.setCenter(this._center),e.zoom&&this._zoom!=null&&r.setZoom(this._zoom),e.mapTypeId&&this.mapTypeId&&r.setMapTypeId(this.mapTypeId))}ngOnInit(){this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),google.maps.Map?this._initialize(google.maps.Map):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(e=>this._initialize(e.Map))}))}_initialize(e){this._ngZone.runOutsideAngular(()=>{this.googleMap=new e(this._mapEl,this._combineOptions()),this._eventManager.setTarget(this.googleMap),this.mapInitialized.emit(this.googleMap)})}ngOnDestroy(){if(this.mapInitialized.complete(),this._eventManager.destroy(),this._isBrowser){let e=window;e.gm_authFailure=this._existingAuthFailureCallback}}fitBounds(e,r){this._assertInitialized(),this.googleMap.fitBounds(e,r)}panBy(e,r){this._assertInitialized(),this.googleMap.panBy(e,r)}panTo(e){this._assertInitialized(),this.googleMap.panTo(e)}panToBounds(e,r){this._assertInitialized(),this.googleMap.panToBounds(e,r)}getBounds(){return this._assertInitialized(),this.googleMap.getBounds()||null}getCenter(){return this._assertInitialized(),this.googleMap.getCenter()}getClickableIcons(){return this._assertInitialized(),this.googleMap.getClickableIcons()}getHeading(){return this._assertInitialized(),this.googleMap.getHeading()}getMapTypeId(){return this._assertInitialized(),this.googleMap.getMapTypeId()}getProjection(){return this._assertInitialized(),this.googleMap.getProjection()||null}getStreetView(){return this._assertInitialized(),this.googleMap.getStreetView()}getTilt(){return this._assertInitialized(),this.googleMap.getTilt()}getZoom(){return this._assertInitialized(),this.googleMap.getZoom()}get controls(){return this._assertInitialized(),this.googleMap.controls}get data(){return this._assertInitialized(),this.googleMap.data}get mapTypes(){return this._assertInitialized(),this.googleMap.mapTypes}get overlayMapTypes(){return this._assertInitialized(),this.googleMap.overlayMapTypes}_resolveMap(){return this.googleMap?Promise.resolve(this.googleMap):this.mapInitialized.pipe(Bo(1)).toPromise()}_setSize(){if(this._mapEl){let e=this._mapEl.style;e.height=this.height===null?"":hC(this.height)||uC,e.width=this.width===null?"":hC(this.width)||cC}}_combineOptions(){let e=this._options||{};return dr(me({},e),{center:this._center||e.center||md.center,zoom:this._zoom??e.zoom??md.zoom,mapTypeId:this.mapTypeId||e.mapTypeId||md.mapTypeId,mapId:this.mapId||e.mapId})}_assertInitialized(){this.googleMap}static{this.\u0275fac=function(r){return new(r||i)(ee(Aa),ee(_i),ee(_c))}}static{this.\u0275cmp=ke({type:i,selectors:[["google-map"]],inputs:{height:"height",width:"width",mapId:"mapId",mapTypeId:"mapTypeId",center:"center",zoom:"zoom",options:"options"},outputs:{mapInitialized:"mapInitialized",authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],standalone:!0,features:[Zn,Wr],ngContentSelectors:xx,decls:2,vars:0,consts:[[1,"map-container"]],template:function(r,o){r&1&&(Oa(),N(0,"div",0),La(1))},encapsulation:2,changeDetection:0})}}return i})(),Ex=/([A-Za-z%]+)$/;function hC(i){return i==null?"":Ex.test(i)?i:`${i}px`}var Dx={position:{lat:37.421995,lng:-122.084092}},pC=(()=>{class i{set title(e){this._title=e}set position(e){this._position=e}set label(e){this._label=e}set clickable(e){this._clickable=e}set options(e){this._options=e}set icon(e){this._icon=e}set visible(e){this._visible=e}constructor(e,r){this._googleMap=e,this._ngZone=r,this._eventManager=new rh(ie(_i)),this.animationChanged=this._eventManager.getLazyEmitter("animation_changed"),this.mapClick=this._eventManager.getLazyEmitter("click"),this.clickableChanged=this._eventManager.getLazyEmitter("clickable_changed"),this.cursorChanged=this._eventManager.getLazyEmitter("cursor_changed"),this.mapDblclick=this._eventManager.getLazyEmitter("dblclick"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.draggableChanged=this._eventManager.getLazyEmitter("draggable_changed"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.flatChanged=this._eventManager.getLazyEmitter("flat_changed"),this.iconChanged=this._eventManager.getLazyEmitter("icon_changed"),this.mapMousedown=this._eventManager.getLazyEmitter("mousedown"),this.mapMouseout=this._eventManager.getLazyEmitter("mouseout"),this.mapMouseover=this._eventManager.getLazyEmitter("mouseover"),this.mapMouseup=this._eventManager.getLazyEmitter("mouseup"),this.positionChanged=this._eventManager.getLazyEmitter("position_changed"),this.mapRightclick=this._eventManager.getLazyEmitter("rightclick"),this.shapeChanged=this._eventManager.getLazyEmitter("shape_changed"),this.titleChanged=this._eventManager.getLazyEmitter("title_changed"),this.visibleChanged=this._eventManager.getLazyEmitter("visible_changed"),this.zindexChanged=this._eventManager.getLazyEmitter("zindex_changed"),this.markerInitialized=new Y}ngOnInit(){this._googleMap._isBrowser&&(google.maps.Marker&&this._googleMap.googleMap?this._initialize(this._googleMap.googleMap,google.maps.Marker):this._ngZone.runOutsideAngular(()=>{Promise.all([this._googleMap._resolveMap(),google.maps.importLibrary("marker")]).then(([e,r])=>{this._initialize(e,r.Marker)})}))}_initialize(e,r){this._ngZone.runOutsideAngular(()=>{this.marker=new r(this._combineOptions()),this._assertInitialized(),this.marker.setMap(e),this._eventManager.setTarget(this.marker),this.markerInitialized.next(this.marker)})}ngOnChanges(e){let{marker:r,_title:o,_position:n,_label:s,_clickable:a,_icon:l,_visible:d}=this;r&&(e.options&&r.setOptions(this._combineOptions()),e.title&&o!==void 0&&r.setTitle(o),e.position&&n&&r.setPosition(n),e.label&&s!==void 0&&r.setLabel(s),e.clickable&&a!==void 0&&r.setClickable(a),e.icon&&l&&r.setIcon(l),e.visible&&d!==void 0&&r.setVisible(d))}ngOnDestroy(){this.markerInitialized.complete(),this._eventManager.destroy(),this.marker?.setMap(null)}getAnimation(){return this._assertInitialized(),this.marker.getAnimation()||null}getClickable(){return this._assertInitialized(),this.marker.getClickable()}getCursor(){return this._assertInitialized(),this.marker.getCursor()||null}getDraggable(){return this._assertInitialized(),!!this.marker.getDraggable()}getIcon(){return this._assertInitialized(),this.marker.getIcon()||null}getLabel(){return this._assertInitialized(),this.marker.getLabel()||null}getOpacity(){return this._assertInitialized(),this.marker.getOpacity()||null}getPosition(){return this._assertInitialized(),this.marker.getPosition()||null}getShape(){return this._assertInitialized(),this.marker.getShape()||null}getTitle(){return this._assertInitialized(),this.marker.getTitle()||null}getVisible(){return this._assertInitialized(),this.marker.getVisible()}getZIndex(){return this._assertInitialized(),this.marker.getZIndex()||null}getAnchor(){return this._assertInitialized(),this.marker}_resolveMarker(){return this.marker?Promise.resolve(this.marker):this.markerInitialized.pipe(Bo(1)).toPromise()}_combineOptions(){let e=this._options||Dx;return dr(me({},e),{title:this._title||e.title,position:this._position||e.position,label:this._label||e.label,clickable:this._clickable??e.clickable,map:this._googleMap.googleMap,icon:this._icon||e.icon,visible:this._visible??e.visible})}_assertInitialized(){}static{this.\u0275fac=function(r){return new(r||i)(ee(Mg),ee(_i))}}static{this.\u0275dir=ny({type:i,selectors:[["map-marker"]],inputs:{title:"title",position:"position",label:"label",clickable:"clickable",options:"options",icon:"icon",visible:"visible"},outputs:{animationChanged:"animationChanged",mapClick:"mapClick",clickableChanged:"clickableChanged",cursorChanged:"cursorChanged",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",draggableChanged:"draggableChanged",mapDragstart:"mapDragstart",flatChanged:"flatChanged",iconChanged:"iconChanged",mapMousedown:"mapMousedown",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",mapMouseup:"mapMouseup",positionChanged:"positionChanged",mapRightclick:"mapRightclick",shapeChanged:"shapeChanged",titleChanged:"titleChanged",visibleChanged:"visibleChanged",zindexChanged:"zindexChanged",markerInitialized:"markerInitialized"},exportAs:["mapMarker"],standalone:!0,features:[Zn]})}}return i})();var Gz=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=jo({type:i})}static{this.\u0275inj=Wo({})}}return i})();var gC=(()=>{class i{transform(e,r="HH:mm:ss"){let o=Number(e||0);return Oy.reduce((n,[s,a])=>{if(n.indexOf(s)!==-1){let l=Math.floor(o/a);return o-=l*a,n.replace(new RegExp(`${s}+`,"g"),d=>Iy(l.toString(),d.length,"0"))}return n},r)}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275pipe=sy({name:"nzTimeRange",type:i,pure:!0,standalone:!0})}}return i})(),fC=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=jo({type:i})}static{this.\u0275inj=Wo({})}}return i})();var Mx=i=>({$implicit:i});function Ix(i,t){if(i&1&&my(0,1),i&2){let e=O();E("ngTemplateOutlet",e.nzValueTemplate)("ngTemplateOutletContext",Es(2,Mx,e.nzValue))}}function Fx(i,t){if(i&1&&(v(0,"span",2),D(1),y()),i&2){let e=O(2);_(),J(e.displayInt)}}function zx(i,t){if(i&1&&(v(0,"span",3),D(1),y()),i&2){let e=O(2);_(),J(e.displayDecimal)}}function Ax(i,t){if(i&1&&$(0,Fx,2,1,"span",2)(1,zx,2,1,"span",3),i&2){let e=O();po(0,e.displayInt?0:-1),_(),po(1,e.displayDecimal?1:-1)}}function Ox(i,t){if(i&1&&(go(0),D(1),fo()),i&2){let e=O();_(),J(e.nzTitle)}}function Lx(i,t){i&1&&N(0,"nz-skeleton",2),i&2&&E("nzParagraph",!1)}function Nx(i,t){if(i&1&&(go(0),D(1),fo()),i&2){let e=O(3);_(),J(e.nzPrefix)}}function kx(i,t){if(i&1&&(v(0,"span",4),$(1,Nx,2,1,"ng-container",1),y()),i&2){let e=O(2);_(),E("nzStringTemplateOutlet",e.nzPrefix)}}function Vx(i,t){if(i&1&&(go(0),D(1),fo()),i&2){let e=O(3);_(),J(e.nzSuffix)}}function Gx(i,t){if(i&1&&(v(0,"span",6),$(1,Vx,2,1,"ng-container",1),y()),i&2){let e=O(2);_(),E("nzStringTemplateOutlet",e.nzSuffix)}}function Hx(i,t){if(i&1&&(v(0,"div",3),$(1,kx,2,1,"span",4),N(2,"nz-statistic-number",5),$(3,Gx,2,1,"span",6),y()),i&2){let e=O();E("ngStyle",e.nzValueStyle),_(),po(1,e.nzPrefix?1:-1),_(),E("nzValue",e.nzValue)("nzValueTemplate",e.nzValueTemplate),_(),po(3,e.nzSuffix?3:-1)}}function Bx(i,t){if(i&1&&(D(0),Lr(1,"nzTimeRange")),i&2){let e=O();J(Rn(1,1,e.diff,e.nzFormat))}}var $x=(()=>{class i{constructor(){this.displayInt="",this.displayDecimal="",this.locale_id=ie(Cy)}ngOnChanges(){this.formatNumber()}formatNumber(){let e=typeof this.nzValue=="number"?".":wy(this.locale_id,by.Decimal),r=String(this.nzValue),[o,n]=r.split(e);this.displayInt=o,this.displayDecimal=n?`${e}${n}`:""}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=ke({type:i,selectors:[["nz-statistic-number"]],inputs:{nzValue:"nzValue",nzValueTemplate:"nzValueTemplate"},exportAs:["nzStatisticNumber"],standalone:!0,features:[Zn,Wr],decls:3,vars:1,consts:[[1,"ant-statistic-content-value"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-statistic-content-value-int"],[1,"ant-statistic-content-value-decimal"]],template:function(r,o){r&1&&(v(0,"span",0),$(1,Ix,1,4,"ng-container",1)(2,Ax,2,2),y()),r&2&&(_(),po(1,o.nzValueTemplate?1:2))},dependencies:[Ac],encapsulation:2,changeDetection:0})}}return i})(),vd=(()=>{class i{constructor(){this.nzValueStyle={},this.nzLoading=!1,this.dir="ltr",this.destroy$=new it,this.cdr=ie(Ic),this.directionality=ie(Vc)}ngOnInit(){this.directionality.change?.pipe(xe(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=ke({type:i,selectors:[["nz-statistic"]],hostAttrs:[1,"ant-statistic"],hostVars:2,hostBindings:function(r,o){r&2&&gy("ant-statistic-rtl",o.dir==="rtl")},inputs:{nzPrefix:"nzPrefix",nzSuffix:"nzSuffix",nzTitle:"nzTitle",nzValue:"nzValue",nzValueStyle:"nzValueStyle",nzValueTemplate:"nzValueTemplate",nzLoading:[Sc.HasDecoratorInputTransform,"nzLoading","nzLoading",Fc]},exportAs:["nzStatistic"],standalone:!0,features:[xc,Wr],decls:4,vars:2,consts:[[1,"ant-statistic-title"],[4,"nzStringTemplateOutlet"],[1,"ant-statistic-skeleton",3,"nzParagraph"],[1,"ant-statistic-content",3,"ngStyle"],[1,"ant-statistic-content-prefix"],[3,"nzValue","nzValueTemplate"],[1,"ant-statistic-content-suffix"]],template:function(r,o){r&1&&(v(0,"div",0),$(1,Ox,2,1,"ng-container",1),y(),$(2,Lx,1,1,"nz-skeleton",2)(3,Hx,4,5)),r&2&&(_(),E("nzStringTemplateOutlet",o.nzTitle),_(),po(2,o.nzLoading?2:3))},dependencies:[Ny,Ly,$x,kc,Nc,zc],encapsulation:2,changeDetection:0})}}return i})(),Wx=1e3/30,jx=(()=>{class i extends vd{constructor(e,r){super(),this.ngZone=e,this.platform=r,this.nzFormat="HH:mm:ss",this.nzCountdownFinish=new Y,this.target=0}ngOnChanges(e){e.nzValue&&(this.target=Number(e.nzValue.currentValue),e.nzValue.isFirstChange()||this.syncTimer())}ngOnInit(){super.ngOnInit(),this.syncTimer()}ngOnDestroy(){this.stopTimer()}syncTimer(){this.target>=Date.now()?this.startTimer():this.stopTimer()}startTimer(){this.platform.isBrowser&&this.ngZone.runOutsideAngular(()=>{this.stopTimer(),this.updater_=ey(Wx).subscribe(()=>{this.updateValue(),this.cdr.detectChanges()})})}stopTimer(){this.updater_&&(this.updater_.unsubscribe(),this.updater_=null)}updateValue(){this.diff=Math.max(this.target-Date.now(),0),this.diff===0&&(this.stopTimer(),this.nzCountdownFinish.observers.length&&this.ngZone.run(()=>this.nzCountdownFinish.emit()))}static{this.\u0275fac=function(r){return new(r||i)(ee(_i),ee(Fy))}}static{this.\u0275cmp=ke({type:i,selectors:[["nz-countdown"]],inputs:{nzFormat:"nzFormat"},outputs:{nzCountdownFinish:"nzCountdownFinish"},exportAs:["nzCountdown"],standalone:!0,features:[hy,Zn,Wr],decls:3,vars:6,consts:[["countDownTpl",""],[3,"nzValue","nzValueStyle","nzValueTemplate","nzTitle","nzPrefix","nzSuffix"]],template:function(r,o){if(r&1&&(N(0,"nz-statistic",1),$(1,Bx,2,4,"ng-template",null,0,Re)),r&2){let n=ue(2);E("nzValue",o.diff)("nzValueStyle",o.nzValueStyle)("nzValueTemplate",o.nzValueTemplate||n)("nzTitle",o.nzTitle)("nzPrefix",o.nzPrefix)("nzSuffix",o.nzSuffix)}},dependencies:[vd,fC,gC],encapsulation:2,changeDetection:0})}}return i})(),sA=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=jo({type:i})}static{this.\u0275inj=Wo({imports:[vd,jx]})}}return i})();var Sf=Object.defineProperty,qx=Object.defineProperties,Kx=Object.getOwnPropertyDescriptor,Yx=Object.getOwnPropertyDescriptors,ph=Object.getOwnPropertySymbols,NC=Object.prototype.hasOwnProperty,kC=Object.prototype.propertyIsEnumerable,mC=(i,t,e)=>t in i?Sf(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,he=(i,t)=>{for(var e in t||(t={}))NC.call(t,e)&&mC(i,e,t[e]);if(ph)for(var e of ph(t))kC.call(t,e)&&mC(i,e,t[e]);return i},Pt=(i,t)=>qx(i,Yx(t)),Xx=(i,t)=>{var e={};for(var r in i)NC.call(i,r)&&t.indexOf(r)<0&&(e[r]=i[r]);if(i!=null&&ph)for(var r of ph(i))t.indexOf(r)<0&&kC.call(i,r)&&(e[r]=i[r]);return e},Pi=(i,t)=>{for(var e in t)Sf(i,e,{get:t[e],enumerable:!0})},g=(i,t,e,r)=>{for(var o=r>1?void 0:r?Kx(t,e):t,n=i.length-1,s;n>=0;n--)(s=i[n])&&(o=(r?s(t,e,o):s(o))||o);return r&&o&&Sf(t,e,o),o},xo=(i,t)=>(e,r)=>t(e,r,i),VC={};Pi(VC,{attrToBoolean:()=>gh,attrToNumber:()=>rs,attrToString:()=>Qx,defaultComparator:()=>Zx,exists:()=>W,jsonEquals:()=>Kg,makeNull:()=>hn,missing:()=>Te,missingOrEmpty:()=>Qr,toStringOrNull:()=>Td,values:()=>As});function hn(i){return i==null||i===""?null:i}function W(i,t=!1){return i!=null&&(i!==""||t)}function Te(i){return!W(i)}function Qr(i){return i==null||i.length===0}function Td(i){return i!=null&&typeof i.toString=="function"?i.toString():null}function rs(i){if(i===void 0)return;if(i===null||i==="")return null;if(typeof i=="number")return isNaN(i)?void 0:i;let t=parseInt(i,10);return isNaN(t)?void 0:t}function gh(i){if(i!==void 0)return i===null||i===""?!1:typeof i=="boolean"?i:/true/i.test(i)}function Qx(i){if(!(i==null||i===""))return i}function Kg(i,t){let e=i?JSON.stringify(i):null,r=t?JSON.stringify(t):null;return e===r}function Zx(i,t,e=!1){let r=i==null,o=t==null;if(i&&i.toNumber&&(i=i.toNumber()),t&&t.toNumber&&(t=t.toNumber()),r&&o)return 0;if(r)return-1;if(o)return 1;function n(s,a){return s>a?1:s<a?-1:0}if(typeof i!="string"||!e)return n(i,t);try{return i.localeCompare(t)}catch{return n(i,t)}}function As(i){if(i instanceof Set||i instanceof Map){let t=[];return i.forEach(e=>t.push(e)),t}return Object.values(i)}var Jx=class{constructor(){this.existingKeys={}}addExistingKeys(i){for(let t=0;t<i.length;t++)this.existingKeys[i[t]]=!0}getUniqueKey(i,t){i=Td(i);let e=0;for(;;){let r;if(i?(r=i,e!==0&&(r+="_"+e)):t?(r=t,e!==0&&(r+="_"+e)):r=e,!this.existingKeys[r])return this.existingKeys[r]=!0,String(r);e++}}},GC={};Pi(GC,{SKIP_JS_BUILTINS:()=>Fh,cloneObject:()=>_f,deepCloneDefinition:()=>fh,getAllValuesInObject:()=>os,getValueUsingField:()=>Ja,isNonNullObject:()=>mh,iterateObject:()=>Wi,mergeDeep:()=>wr,removeAllReferences:()=>HC});var Fh=new Set(["__proto__","constructor","prototype"]);function Wi(i,t){if(i!=null){if(Array.isArray(i)){for(let e=0;e<i.length;e++)t(e.toString(),i[e]);return}for(let[e,r]of Object.entries(i))t(e,r)}}function _f(i){let t={},e=Object.keys(i);for(let r=0;r<e.length;r++){if(Fh.has(e[r]))continue;let o=e[r],n=i[o];t[o]=n}return t}function fh(i,t){if(!i)return;let e=i,r={};return Object.keys(e).forEach(o=>{if(t&&t.indexOf(o)>=0||Fh.has(o))return;let n=e[o];mh(n)&&n.constructor===Object?r[o]=fh(n):r[o]=n}),r}function os(i){if(!i)return[];let t=Object;if(typeof t.values=="function")return t.values(i);let e=[];for(let r in i)i.hasOwnProperty(r)&&i.propertyIsEnumerable(r)&&e.push(i[r]);return e}function wr(i,t,e=!0,r=!1){W(t)&&Wi(t,(o,n)=>{if(Fh.has(o))return;let s=i[o];s!==n&&(r&&s==null&&n!=null&&typeof n=="object"&&n.constructor===Object&&(s={},i[o]=s),mh(n)&&mh(s)&&!Array.isArray(s)?wr(s,n,e,r):(e||n!==void 0)&&(i[o]=n))})}function Ja(i,t,e){if(!t||!i)return;if(!e)return i[t];let r=t.split("."),o=i;for(let n=0;n<r.length;n++){if(o==null)return;o=o[r[n]]}return o}function HC(i,t=[],e){Object.keys(i).forEach(s=>{typeof i[s]=="object"&&!t.includes(s)&&(i[s]=void 0)});let r=Object.getPrototypeOf(i),o={},n=s=>`AG Grid: Grid API function ${s}() cannot be called as the grid has been destroyed.
    It is recommended to remove local references to the grid api. Alternatively, check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
    To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${e}`;Object.getOwnPropertyNames(r).forEach(s=>{if(typeof r[s]=="function"&&!t.includes(s)){let l=()=>{console.warn(n(s))};o[s]={value:l,writable:!0}}}),Object.defineProperties(i,o)}function mh(i){return typeof i=="object"&&i!==null}var BC={};Pi(BC,{compose:()=>eE,debounce:()=>Ji,doOnce:()=>il,errorOnce:()=>un,executeAfter:()=>WC,executeInAWhile:()=>$C,executeNextVMTurn:()=>Yg,getFunctionName:()=>zh,isFunction:()=>Ah,noop:()=>tE,throttle:()=>Xg,waitUntil:()=>xf,warnOnce:()=>Ce});var vC={};function il(i,t){vC[t]||(i(),vC[t]=!0)}function Ce(i){il(()=>console.warn("AG Grid: "+i),i)}function un(i){il(()=>console.error("AG Grid: "+i),i)}function zh(i){if(i.name)return i.name;let t=/function\s+([^\(]+)/.exec(i.toString());return t&&t.length===2?t[1].trim():null}function Ah(i){return!!(i&&i.constructor&&i.call&&i.apply)}function $C(i){WC(i,400)}var Ig=[],Fg=!1;function Yg(i){Ig.push(i),!Fg&&(Fg=!0,window.setTimeout(()=>{let t=Ig.slice();Ig.length=0,Fg=!1,t.forEach(e=>e())},0))}function WC(i,t=0){i.length>0&&window.setTimeout(()=>i.forEach(e=>e()),t)}function Ji(i,t){let e;return function(...r){let o=this;window.clearTimeout(e),e=window.setTimeout(function(){i.apply(o,r)},t)}}function Xg(i,t){let e=0;return function(...r){let o=this,n=new Date().getTime();n-e<t||(e=n,i.apply(o,r))}}function xf(i,t,e=100,r){let o=new Date().getTime(),n=null,s=!1,a=()=>{let l=new Date().getTime()-o>e;(i()||l)&&(t(),s=!0,n!=null&&(window.clearInterval(n),n=null),l&&r&&console.warn(r))};a(),s||(n=window.setInterval(a,10))}function eE(...i){return t=>i.reduce((e,r)=>r(e),t)}var tE=()=>{},jC=(i=>(i.CommunityCoreModule="@ag-grid-community/core",i.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",i.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",i.CsvExportModule="@ag-grid-community/csv-export",i.EnterpriseCoreModule="@ag-grid-enterprise/core",i.RowGroupingModule="@ag-grid-enterprise/row-grouping",i.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",i.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",i.MenuModule="@ag-grid-enterprise/menu",i.SetFilterModule="@ag-grid-enterprise/set-filter",i.MultiFilterModule="@ag-grid-enterprise/multi-filter",i.StatusBarModule="@ag-grid-enterprise/status-bar",i.SideBarModule="@ag-grid-enterprise/side-bar",i.RangeSelectionModule="@ag-grid-enterprise/range-selection",i.MasterDetailModule="@ag-grid-enterprise/master-detail",i.RichSelectModule="@ag-grid-enterprise/rich-select",i.GridChartsModule="@ag-grid-enterprise/charts",i.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",i.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",i.ExcelExportModule="@ag-grid-enterprise/excel-export",i.ClipboardModule="@ag-grid-enterprise/clipboard",i.SparklinesModule="@ag-grid-enterprise/sparklines",i.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",i.AngularModule="@ag-grid-community/angular",i.ReactModule="@ag-grid-community/react",i.VueModule="@ag-grid-community/vue",i))(jC||{}),Oh=class mt{static register(t){mt.__register(t,!0,void 0)}static registerModules(t){mt.__registerModules(t,!0,void 0)}static __register(t,e,r){mt.runVersionChecks(t),r!==void 0?(mt.areGridScopedModules=!0,mt.gridModulesMap[r]===void 0&&(mt.gridModulesMap[r]={}),mt.gridModulesMap[r][t.moduleName]=t):mt.globalModulesMap[t.moduleName]=t,mt.setModuleBased(e)}static __unRegisterGridModules(t){delete mt.gridModulesMap[t]}static __registerModules(t,e,r){mt.setModuleBased(e),t&&t.forEach(o=>mt.__register(o,e,r))}static isValidModuleVersion(t){let[e,r]=t.version.split(".")||[],[o,n]=mt.currentModuleVersion.split(".")||[];return e===o&&r===n}static runVersionChecks(t){if(mt.currentModuleVersion||(mt.currentModuleVersion=t.version),t.version?mt.isValidModuleVersion(t)||console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${t.moduleName}' is version ${t.version} but the other modules are version ${this.currentModuleVersion}. Please update all modules to the same version.`):console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${t.moduleName}' is incompatible. Please update all modules to the same version.`),t.validate){let e=t.validate();e.isValid||console.error(`AG Grid: ${e.message}`)}}static setModuleBased(t){mt.moduleBased===void 0?mt.moduleBased=t:mt.moduleBased!==t&&il(()=>{console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information.")},"ModulePackageCheck")}static __setIsBundled(){mt.isBundled=!0}static __assertRegistered(t,e,r){var o;if(this.__isRegistered(t,r))return!0;let n=e+t,s;if(mt.isBundled)s=`AG Grid: unable to use ${e} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(mt.moduleBased||mt.moduleBased===void 0){let a=(o=Object.entries(jC).find(([l,d])=>d===t))==null?void 0:o[0];s=`AG Grid: unable to use ${e} as the ${a} is not registered${mt.areGridScopedModules?` for gridId: ${r}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${a} } from '${t}';
    
    ModuleRegistry.registerModules([ ${a} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else s=`AG Grid: unable to use ${e} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';`;return il(()=>{console.warn(s)},n),!1}static __isRegistered(t,e){var r;return!!mt.globalModulesMap[t]||!!((r=mt.gridModulesMap[e])!=null&&r[t])}static __getRegisteredModules(t){return[...As(mt.globalModulesMap),...As(mt.gridModulesMap[t]||{})]}static __getGridRegisteredModules(t){var e;return As((e=mt.gridModulesMap[t])!=null?e:{})||[]}static __isPackageBased(){return!mt.moduleBased}};Oh.globalModulesMap={};Oh.gridModulesMap={};Oh.areGridScopedModules=!1;var pt=Oh,iE=class{constructor(i,t){if(this.beanWrappers={},this.destroyed=!1,!i||!i.beanClasses)return;this.contextParams=i,this.logger=t,this.logger.log(">> creating ag-Application Context"),this.createBeans();let e=this.getBeanInstances();this.wireBeans(e),this.logger.log(">> ag-Application Context ready - component is alive")}getBeanInstances(){return As(this.beanWrappers).map(i=>i.beanInstance)}createBean(i,t){if(!i)throw Error("Can't wire to bean since it is null");return this.wireBeans([i],t),i}wireBeans(i,t){this.autoWireBeans(i),this.methodWireBeans(i),this.callLifeCycleMethods(i,"preConstructMethods"),W(t)&&i.forEach(t),this.callLifeCycleMethods(i,"postConstructMethods")}createBeans(){this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),Wi(this.beanWrappers,(t,e)=>{let r;e.bean.__agBeanMetaData&&e.bean.__agBeanMetaData.autowireMethods&&e.bean.__agBeanMetaData.autowireMethods.agConstructor&&(r=e.bean.__agBeanMetaData.autowireMethods.agConstructor);let o=this.getBeansForParameters(r,e.bean.name),n=new(e.bean.bind.apply(e.bean,[null,...o]));e.beanInstance=n});let i=Object.keys(this.beanWrappers).join(", ");this.logger.log(`created beans: ${i}`)}createBeanWrapper(i){let t=i.__agBeanMetaData;if(!t){let r;i.prototype.constructor?r=zh(i.prototype.constructor):r=""+i,console.error(`Context item ${r} is not a bean`);return}let e={bean:i,beanInstance:null,beanName:t.beanName};this.beanWrappers[t.beanName]=e}autoWireBeans(i){i.forEach(t=>{this.forEachMetaDataInHierarchy(t,(e,r)=>{let o=e.agClassAttributes;o&&o.forEach(n=>{let s=this.lookupBeanInstance(r,n.beanName,n.optional);t[n.attributeName]=s})})})}methodWireBeans(i){i.forEach(t=>{this.forEachMetaDataInHierarchy(t,(e,r)=>{Wi(e.autowireMethods,(o,n)=>{if(o==="agConstructor")return;let s=this.getBeansForParameters(n,r);t[o].apply(t,s)})})})}forEachMetaDataInHierarchy(i,t){let e=Object.getPrototypeOf(i);for(;e!=null;){let r=e.constructor;if(r.hasOwnProperty("__agBeanMetaData")){let o=r.__agBeanMetaData,n=this.getBeanName(r);t(o,n)}e=Object.getPrototypeOf(e)}}getBeanName(i){if(i.__agBeanMetaData&&i.__agBeanMetaData.beanName)return i.__agBeanMetaData.beanName;let t=i.toString();return t.substring(9,t.indexOf("("))}getBeansForParameters(i,t){let e=[];return i&&Wi(i,(r,o)=>{let n=this.lookupBeanInstance(t,o);e[Number(r)]=n}),e}lookupBeanInstance(i,t,e=!1){if(this.destroyed)return this.logger.log(`AG Grid: bean reference ${t} is used after the grid is destroyed!`),null;if(t==="context")return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(t))return this.contextParams.providedBeanInstances[t];let r=this.beanWrappers[t];return r?r.beanInstance:(e||console.error(`AG Grid: unable to find bean reference ${t} while initialising ${i}`),null)}callLifeCycleMethods(i,t){i.forEach(e=>this.callLifeCycleMethodsOnBean(e,t))}callLifeCycleMethodsOnBean(i,t,e){let r={};this.forEachMetaDataInHierarchy(i,n=>{let s=n[t];s&&s.forEach(a=>{a!=e&&(r[a]=!0)})}),Object.keys(r).forEach(n=>i[n]())}getBean(i){return this.lookupBeanInstance("getBean",i,!0)}destroy(){if(this.destroyed)return;this.destroyed=!0,this.logger.log(">> Shutting down ag-Application Context");let i=this.getBeanInstances();this.destroyBeans(i),this.contextParams.providedBeanInstances=null,pt.__unRegisterGridModules(this.contextParams.gridId),this.logger.log(">> ag-Application Context shut down - component is dead")}destroyBean(i){i&&this.destroyBeans([i])}destroyBeans(i){return i?(i.forEach(t=>{this.callLifeCycleMethodsOnBean(t,"preDestroyMethods","destroy");let e=t;typeof e.destroy=="function"&&e.destroy()}),[]):[]}isDestroyed(){return this.destroyed}getGridId(){return this.contextParams.gridId}};function UC(i,t,e){let r=Gs(i.constructor);r.preConstructMethods||(r.preConstructMethods=[]),r.preConstructMethods.push(t)}function U(i,t,e){let r=Gs(i.constructor);r.postConstructMethods||(r.postConstructMethods=[]),r.postConstructMethods.push(t)}function ir(i,t,e){let r=Gs(i.constructor);r.preDestroyMethods||(r.preDestroyMethods=[]),r.preDestroyMethods.push(t)}function te(i){return t=>{let e=Gs(t);e.beanName=i}}function w(i){return(t,e,r)=>{qC(t,i,!1,t,e,null)}}function gt(i){return(t,e,r)=>{qC(t,i,!0,t,e,null)}}function qC(i,t,e,r,o,n){if(t===null){console.error("AG Grid: Autowired name should not be null");return}if(typeof n=="number"){console.error("AG Grid: Autowired should be on an attribute");return}let s=Gs(i.constructor);s.agClassAttributes||(s.agClassAttributes=[]),s.agClassAttributes.push({attributeName:o,beanName:t,optional:e})}function Zr(i){return(t,e,r)=>{let o=typeof t=="function"?t:t.constructor,n;if(typeof r=="number"){let s;e?(n=Gs(o),s=e):(n=Gs(o),s="agConstructor"),n.autowireMethods||(n.autowireMethods={}),n.autowireMethods[s]||(n.autowireMethods[s]={}),n.autowireMethods[s][r]=i}}}function Gs(i){return i.hasOwnProperty("__agBeanMetaData")||(i.__agBeanMetaData={}),i.__agBeanMetaData}var Po=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setBeans(i,t,e=null,r=null){if(this.frameworkOverrides=t,this.gos=i,e){let o=i.useAsyncEvents();this.addGlobalListener(e,o)}r&&this.addGlobalListener(r,!1)}setFrameworkOverrides(i){this.frameworkOverrides=i}getListeners(i,t,e){let r=t?this.allAsyncListeners:this.allSyncListeners,o=r.get(i);return!o&&e&&(o=new Set,r.set(i,o)),o}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(i,t,e=!1){this.getListeners(i,e,!0).add(t)}removeEventListener(i,t,e=!1){let r=this.getListeners(i,e,!1);r&&(r.delete(t),r.size===0&&(e?this.allAsyncListeners:this.allSyncListeners).delete(i))}addGlobalListener(i,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(i)}removeGlobalListener(i,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(i)}dispatchEvent(i){let t=i;this.gos&&this.gos.addGridCommonParams(t),this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(i){this.firedEvents[i.type]||this.dispatchEvent(i)}dispatchToListeners(i,t){var e;let r=i.type;if(t&&"event"in i){let l=i.event;l instanceof Event&&(i.eventPath=l.composedPath())}let o=(l,d)=>l.forEach(u=>{if(!d.has(u))return;let c=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>u(i)):()=>u(i);t?this.dispatchAsync(c):c()}),n=(e=this.getListeners(r,t,!1))!=null?e:new Set,s=new Set(n);s.size>0&&o(s,n),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(l=>{let d=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>l(r,i)):()=>l(r,i);t?this.dispatchAsync(d):d()})}dispatchAsync(i){this.asyncFunctionsQueue.push(i),this.scheduled||(this.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)}),this.scheduled=!0)}flushAsyncQueue(){this.scheduled=!1;let i=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],i.forEach(t=>t())}};g([xo(0,Zr("gridOptionsService")),xo(1,Zr("frameworkOverrides")),xo(2,Zr("globalEventListener")),xo(3,Zr("globalSyncEventListener"))],Po.prototype,"setBeans",1);Po=g([te("eventService")],Po);var Ef=class{constructor(i){this.frameworkOverrides=i,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(i){let t=i;return this.frameworkOverrides.shouldWrapOutgoing&&(t=e=>{this.frameworkOverrides.wrapOutgoing(()=>i(e))},this.wrappedListeners.set(i,t)),t}wrapGlobal(i){let t=i;return this.frameworkOverrides.shouldWrapOutgoing&&(t=(e,r)=>{this.frameworkOverrides.wrapOutgoing(()=>i(e,r))},this.wrappedGlobalListeners.set(i,t)),t}unwrap(i){var t;return(t=this.wrappedListeners.get(i))!=null?t:i}unwrapGlobal(i){var t;return(t=this.wrappedGlobalListeners.get(i))!=null?t:i}},rE={resizable:!0,sortable:!0},oE=0;function KC(){return oE++}var ii=class YC{constructor(t,e,r,o){this.instanceId=KC(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.eventService=new Po,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=t,this.userProvidedColDef=e,this.colId=r,this.primary=o,this.setState(t)}getInstanceId(){return this.instanceId}setState(t){t.sort!==void 0?(t.sort==="asc"||t.sort==="desc")&&(this.sort=t.sort):(t.initialSort==="asc"||t.initialSort==="desc")&&(this.sort=t.initialSort);let e=t.sortIndex,r=t.initialSortIndex;e!==void 0?e!==null&&(this.sortIndex=e):r!==null&&(this.sortIndex=r);let o=t.hide,n=t.initialHide;o!==void 0?this.visible=!o:this.visible=!n,t.pinned!==void 0?this.setPinned(t.pinned):this.setPinned(t.initialPinned);let s=t.flex,a=t.initialFlex;s!==void 0?this.flex=s:a!==void 0&&(this.flex=a)}setColDef(t,e,r){this.colDef=t,this.userProvidedColDef=e,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.eventService.dispatchEvent(this.createColumnEvent("colDefChanged",r))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(t){this.parent=t}getParent(){return this.parent}setOriginalParent(t){this.originalParent=t}getOriginalParent(){return this.originalParent}initialise(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){let t=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=W(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!t,this.tooltipFieldContainsDots=W(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!t}initMinAndMaxWidths(){var t,e;let r=this.colDef;this.minWidth=(t=r.minWidth)!=null?t:this.environment.getMinColWidth(),this.maxWidth=(e=r.maxWidth)!=null?e:Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=W(this.colDef.tooltipField)||W(this.colDef.tooltipValueGetter)||W(this.colDef.tooltipComponent)}resetActualWidth(t){let e=this.calculateColInitialWidth(this.colDef);this.setActualWidth(e,t,!0)}calculateColInitialWidth(t){var e,r;let o=(e=t.minWidth)!=null?e:this.environment.getMinColWidth(),n=(r=t.maxWidth)!=null?r:Number.MAX_SAFE_INTEGER,s,a=rs(t.width),l=rs(t.initialWidth);return a!=null?s=a:l!=null?s=l:s=200,Math.max(Math.min(s,n),o)}isEmptyGroup(){return!1}isRowGroupDisplayed(t){if(Te(this.colDef)||Te(this.colDef.showRowGroup))return!1;let e=this.colDef.showRowGroup===!0,r=this.colDef.showRowGroup===t;return e||r}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}addEventListener(t,e){var r,o;this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new Ef(this.frameworkOverrides));let n=(o=(r=this.frameworkEventListenerService)==null?void 0:r.wrap(e))!=null?o:e;this.eventService.addEventListener(t,n)}removeEventListener(t,e){var r,o;let n=(o=(r=this.frameworkEventListenerService)==null?void 0:r.unwrap(e))!=null?o:e;this.eventService.removeEventListener(t,n)}createColumnFunctionCallbackParams(t){return this.gos.addGridCommonParams({node:t,data:t.data,column:this,colDef:this.colDef})}isSuppressNavigable(t){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){let e=this.createColumnFunctionCallbackParams(t),r=this.colDef.suppressNavigable;return r(e)}return!1}isCellEditable(t){return t.group&&!this.gos.get("enableGroupEdit")?!1:this.isColumnFunc(t,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(t){return this.isColumnFunc(t,this.colDef.rowDrag)}isDndSource(t){return this.isColumnFunc(t,this.colDef.dndSource)}isCellCheckboxSelection(t){return this.isColumnFunc(t,this.colDef.checkboxSelection)}isSuppressPaste(t){return this.isColumnFunc(t,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(t){var e;return(e=this.colDef[t])!=null?e:rE[t]}isColumnFunc(t,e){if(typeof e=="boolean")return e;if(typeof e=="function"){let r=this.createColumnFunctionCallbackParams(t);return e(r)}return!1}setMoving(t,e){this.moving=t,this.eventService.dispatchEvent(this.createColumnEvent("movingChanged",e))}createColumnEvent(t,e){return this.gos.addGridCommonParams({type:t,column:this,columns:[this],source:e})}isMoving(){return this.moving}getSort(){return this.sort}setSort(t,e){this.sort!==t&&(this.sort=t,this.eventService.dispatchEvent(this.createColumnEvent("sortChanged",e))),this.dispatchStateUpdatedEvent("sort")}setMenuVisible(t,e){this.menuVisible!==t&&(this.menuVisible=t,this.eventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",e)))}isMenuVisible(){return this.menuVisible}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return Te(this.sort)}isSorting(){return W(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(t){this.sortIndex=t,this.dispatchStateUpdatedEvent("sortIndex")}setAggFunc(t){this.aggFunc=t,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(t,e){this.oldLeft=this.left,this.left!==t&&(this.left=t,this.eventService.dispatchEvent(this.createColumnEvent("leftChanged",e)))}isFilterActive(){return this.filterActive}setFilterActive(t,e,r){this.filterActive!==t&&(this.filterActive=t,this.eventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",e)));let o=this.createColumnEvent("filterChanged",e);r&&wr(o,r),this.eventService.dispatchEvent(o)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(t){t===!0||t==="left"?this.pinned="left":t==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(t,e){this.firstRightPinned!==t&&(this.firstRightPinned=t,this.eventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",e)))}setLastLeftPinned(t,e){this.lastLeftPinned!==t&&(this.lastLeftPinned=t,this.eventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",e)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(t,e){let r=t===!0;this.visible!==r&&(this.visible=r,this.eventService.dispatchEvent(this.createColumnEvent("visibleChanged",e))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){let t=this.getColDef();return!t.suppressSpanHeaderHeight&&!t.autoHeaderHeight}getColumnGroupPaddingInfo(){let t=this.getParent();if(!t||!t.isPadding())return{numberOfParents:0,isSpanningTotal:!1};let e=t.getPaddingLevel()+1,r=!0;for(;t;){if(!t.isPadding()){r=!1;break}t=t.getParent()}return{numberOfParents:e,isSpanningTotal:r}}getColDef(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getDefinition(){return this.colDef}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(t){let e=t!==this.autoHeaderHeight;return this.autoHeaderHeight=t,e}createBaseColDefParams(t){return this.gos.addGridCommonParams({node:t,data:t.data,colDef:this.colDef,column:this})}getColSpan(t){if(Te(this.colDef.colSpan))return 1;let e=this.createBaseColDefParams(t),r=this.colDef.colSpan(e);return Math.max(r,1)}getRowSpan(t){if(Te(this.colDef.rowSpan))return 1;let e=this.createBaseColDefParams(t),r=this.colDef.rowSpan(e);return Math.max(r,1)}setActualWidth(t,e,r=!1){this.minWidth!=null&&(t=Math.max(t,this.minWidth)),this.maxWidth!=null&&(t=Math.min(t,this.maxWidth)),this.actualWidth!==t&&(this.actualWidth=t,this.flex&&e!=="flex"&&e!=="gridInitializing"&&(this.flex=null),r||this.fireColumnWidthChangedEvent(e)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(t){this.eventService.dispatchEvent(this.createColumnEvent("widthChanged",t))}isGreaterThanMax(t){return this.maxWidth!=null?t>this.maxWidth:!1}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(t){this.flex!==t&&(this.flex=t),this.dispatchStateUpdatedEvent("flex")}setMinimum(t){W(this.minWidth)&&this.setActualWidth(this.minWidth,t)}setRowGroupActive(t,e){this.rowGroupActive!==t&&(this.rowGroupActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",e))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(t,e){this.pivotActive!==t&&(this.pivotActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",e))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(t,e){this.aggregationActive!==t&&(this.aggregationActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnValueChanged",e)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}getMenuTabs(t){Ce("As of v31.1, 'getMenuTabs' is deprecated. Use 'getColDef().menuTabs ?? defaultValues' instead.");let e=this.getColDef().menuTabs;return e==null&&(e=t),e}dispatchStateUpdatedEvent(t){this.eventService.dispatchEvent({type:YC.EVENT_STATE_UPDATED,key:t})}};ii.EVENT_MOVING_CHANGED="movingChanged";ii.EVENT_LEFT_CHANGED="leftChanged";ii.EVENT_WIDTH_CHANGED="widthChanged";ii.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged";ii.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged";ii.EVENT_VISIBLE_CHANGED="visibleChanged";ii.EVENT_FILTER_CHANGED="filterChanged";ii.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged";ii.EVENT_SORT_CHANGED="sortChanged";ii.EVENT_COL_DEF_CHANGED="colDefChanged";ii.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged";ii.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged";ii.EVENT_PIVOT_CHANGED="columnPivotChanged";ii.EVENT_VALUE_CHANGED="columnValueChanged";ii.EVENT_STATE_UPDATED="columnStateUpdated";g([w("gridOptionsService")],ii.prototype,"gos",2);g([w("environment")],ii.prototype,"environment",2);g([w("columnHoverService")],ii.prototype,"columnHoverService",2);g([w("frameworkOverrides")],ii.prototype,"frameworkOverrides",2);g([U],ii.prototype,"initialise",1);var yt=ii,Lh=class Cd{constructor(t,e,r,o){this.localEventService=new Po,this.expandable=!1,this.instanceId=KC(),this.expandableListenerRemoveCallback=null,this.colGroupDef=t,this.groupId=e,this.expanded=!!t&&!!t.openByDefault,this.padding=r,this.level=o}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0)}reset(t,e){this.colGroupDef=t,this.level=e,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(t){this.originalParent=t}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(t=>t.isVisible()):!1}isPadding(){return this.padding}setExpanded(t){this.expanded=t===void 0?!1:t;let e={type:Cd.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(e)}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(t){this.children=t}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){let t=[];return this.addLeafColumns(t),t}addLeafColumns(t){this.children&&this.children.forEach(e=>{e instanceof yt?t.push(e):e instanceof Cd&&e.addLeafColumns(t)})}getColumnGroupShow(){let t=this.colGroupDef;if(t)return t.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();let t=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(e=>e.addEventListener("visibleChanged",t)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(e=>e.removeEventListener("visibleChanged",t)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let t=!1,e=!1,r=!1,o=this.findChildrenRemovingPadding();for(let s=0,a=o.length;s<a;s++){let l=o[s];if(!l.isVisible())continue;let d=l.getColumnGroupShow();d==="open"?(t=!0,r=!0):d==="closed"?(e=!0,r=!0):(t=!0,e=!0)}let n=t&&e&&r;if(this.expandable!==n){this.expandable=n;let s={type:Cd.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(s)}}findChildrenRemovingPadding(){let t=[],e=r=>{r.forEach(o=>{o instanceof Cd&&o.isPadding()?e(o.children):t.push(o)})};return e(this.children),t}onColumnVisibilityChanged(){this.setExpandable()}addEventListener(t,e){this.localEventService.addEventListener(t,e)}removeEventListener(t,e){this.localEventService.removeEventListener(t,e)}};Lh.EVENT_EXPANDED_CHANGED="expandedChanged";Lh.EVENT_EXPANDABLE_CHANGED="expandableChanged";g([ir],Lh.prototype,"destroy",1);var ei=Lh,nE={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},XC={};Pi(XC,{addSafePassiveEventListener:()=>sb,createEventPath:()=>ob,getCtrlForEventTarget:()=>vh,getEventPath:()=>nb,isElementInEventPath:()=>yh,isEventSupported:()=>Tf,isStopPropagationForAgGrid:()=>To,stopPropagationForAgGrid:()=>Ro});var QC={};Pi(QC,{areEqual:()=>cn,existsAndNotEmpty:()=>ZC,flatten:()=>ib,forEachReverse:()=>dE,includes:()=>kr,insertArrayIntoArray:()=>Qg,insertIntoArray:()=>Pd,last:()=>rt,moveInArray:()=>Zg,pushAll:()=>Jg,removeAllFromArray:()=>tb,removeAllFromUnorderedArray:()=>eb,removeFromArray:()=>br,removeFromUnorderedArray:()=>Df,removeRepeatsFromArray:()=>aE,shallowCompare:()=>sE,sortNumerically:()=>JC,toStrings:()=>lE});function ZC(i){return i!=null&&i.length>0}function rt(i){if(!(!i||!i.length))return i[i.length-1]}function cn(i,t,e){return i==null&&t==null?!0:i!=null&&t!=null&&i.length===t.length&&i.every((r,o)=>e?e(r,t[o]):t[o]===r)}function sE(i,t){return cn(i,t)}function JC(i){return i.sort((t,e)=>t-e)}function aE(i,t){if(i)for(let e=i.length-2;e>=0;e--){let r=i[e]===t,o=i[e+1]===t;r&&o&&i.splice(e+1,1)}}function Df(i,t){let e=i.indexOf(t);e>=0&&(i[e]=i[i.length-1],i.pop())}function br(i,t){let e=i.indexOf(t);e>=0&&i.splice(e,1)}function eb(i,t){for(let e=0;e<t.length;e++)Df(i,t[e])}function tb(i,t){for(let e=0;e<t.length;e++)br(i,t[e])}function Pd(i,t,e){i.splice(e,0,t)}function Qg(i,t,e){if(!(i==null||t==null))for(let r=t.length-1;r>=0;r--){let o=t[r];Pd(i,o,e)}}function Zg(i,t,e){tb(i,t),t.slice().reverse().forEach(r=>Pd(i,r,e))}function kr(i,t){return i.indexOf(t)>-1}function ib(i){return[].concat.apply([],i)}function Jg(i,t){t==null||i==null||t.forEach(e=>i.push(e))}function lE(i){return i.map(Td)}function dE(i,t){if(i!=null)for(let e=i.length-1;e>=0;e--)t(i[e],e)}var rb="__ag_Grid_Stop_Propagation",uE=["touchstart","touchend","touchmove","touchcancel","scroll"],zg={};function Ro(i){i[rb]=!0}function To(i){return i[rb]===!0}var Tf=(()=>{let i={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e=>{if(typeof zg[e]=="boolean")return zg[e];let r=document.createElement(i[e]||"div");return e="on"+e,zg[e]=e in r}})();function vh(i,t,e){let r=t;for(;r;){let o=i.getDomData(r,e);if(o)return o;r=r.parentElement}return null}function yh(i,t){return!t||!i?!1:nb(t).indexOf(i)>=0}function ob(i){let t=[],e=i.target;for(;e;)t.push(e),e=e.parentElement;return t}function nb(i){let t=i;return t.path?t.path:t.composedPath?t.composedPath():ob(t)}function sb(i,t,e,r){let n=kr(uE,e)?{passive:!0}:void 0;i&&i.addEventListener&&i.addEventListener(t,e,r,n)}var On=class ab{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.lastChangeSetIdLookup={},this.propertyListenerId=0,this.isAlive=()=>!this.destroyed}getFrameworkOverrides(){return this.frameworkOverrides}getContext(){return this.context}destroy(){for(let t=0;t<this.destroyFunctions.length;t++)this.destroyFunctions[t]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:ab.EVENT_DESTROYED})}addEventListener(t,e){this.localEventService||(this.localEventService=new Po),this.localEventService.addEventListener(t,e)}removeEventListener(t,e){this.localEventService&&this.localEventService.removeEventListener(t,e)}dispatchEvent(t){this.localEventService&&this.localEventService.dispatchEvent(t)}addManagedListener(t,e,r){if(this.destroyed)return;t instanceof HTMLElement?sb(this.getFrameworkOverrides(),t,e,r):t.addEventListener(e,r);let o=()=>(t.removeEventListener(e,r),null);return this.destroyFunctions.push(o),()=>(o(),this.destroyFunctions=this.destroyFunctions.filter(n=>n!==o),null)}setupGridOptionListener(t,e){this.gos.addEventListener(t,e);let r=()=>(this.gos.removeEventListener(t,e),null);return this.destroyFunctions.push(r),()=>(r(),this.destroyFunctions=this.destroyFunctions.filter(o=>o!==r),null)}addManagedPropertyListener(t,e){return this.destroyed?()=>null:this.setupGridOptionListener(t,e)}addManagedPropertyListeners(t,e){if(this.destroyed)return;let r=t.join("-")+this.propertyListenerId++,o=n=>{if(n.changeSet){if(n.changeSet&&n.changeSet.id===this.lastChangeSetIdLookup[r])return;this.lastChangeSetIdLookup[r]=n.changeSet.id}let s={type:"gridPropertyChanged",changeSet:n.changeSet,source:n.source};e(s)};t.forEach(n=>this.setupGridOptionListener(n,o))}addDestroyFunc(t){this.isAlive()?this.destroyFunctions.push(t):t()}createManagedBean(t,e){let r=this.createBean(t,e);return this.addDestroyFunc(this.destroyBean.bind(this,t,e)),r}createBean(t,e,r){return(e||this.getContext()).createBean(t,r)}destroyBean(t,e){return(e||this.getContext()).destroyBean(t)}destroyBeans(t,e){if(t)for(let r=0;r<t.length;r++)this.destroyBean(t[r],e);return[]}};On.EVENT_DESTROYED="destroyed";g([w("frameworkOverrides")],On.prototype,"frameworkOverrides",2);g([w("context")],On.prototype,"context",2);g([w("eventService")],On.prototype,"eventService",2);g([w("gridOptionsService")],On.prototype,"gos",2);g([w("localeService")],On.prototype,"localeService",2);g([w("environment")],On.prototype,"environment",2);g([ir],On.prototype,"destroy",1);var j=On,Rd=class extends j{setBeans(i){this.logger=i.create("ColumnFactory")}createColumnTree(i,t,e,r){let o=new Jx,{existingCols:n,existingGroups:s,existingColKeys:a}=this.extractExistingTreeData(e);o.addExistingKeys(a);let l=this.recursivelyCreateColumns(i,0,t,n,o,s,r),d=this.findMaxDept(l,0);this.logger.log("Number of levels for grouped columns is "+d);let u=this.balanceColumnTree(l,0,d,o);return In(null,u,(h,p)=>{h instanceof ei&&h.setupExpandable(),h.setOriginalParent(p)}),{columnTree:u,treeDept:d}}extractExistingTreeData(i){let t=[],e=[],r=[];return i&&In(null,i,o=>{if(o instanceof ei){let n=o;e.push(n)}else{let n=o;r.push(n.getId()),t.push(n)}}),{existingCols:t,existingGroups:e,existingColKeys:r}}createForAutoGroups(i,t){return i.map(e=>this.createAutoGroupTreeItem(t,e))}createAutoGroupTreeItem(i,t){let e=this.findDepth(i),r=t;for(let o=e-1;o>=0;o--){let n=new ei(null,`FAKE_PATH_${t.getId()}}_${o}`,!0,o);this.createBean(n),n.setChildren([r]),r.setOriginalParent(n),r=n}return e===0&&t.setOriginalParent(null),r}findDepth(i){let t=0,e=i;for(;e&&e[0]&&e[0]instanceof ei;)t++,e=e[0].getChildren();return t}balanceColumnTree(i,t,e,r){let o=[];for(let n=0;n<i.length;n++){let s=i[n];if(s instanceof ei){let a=s,l=this.balanceColumnTree(a.getChildren(),t+1,e,r);a.setChildren(l),o.push(a)}else{let a,l;for(let d=e-1;d>=t;d--){let u=r.getUniqueKey(null,null),c=this.createMergedColGroupDef(null),h=new ei(c,u,!0,t);this.createBean(h),l&&l.setChildren([h]),l=h,a||(a=l)}if(a&&l)if(o.push(a),i.some(u=>u instanceof ei)){l.setChildren([s]);continue}else{l.setChildren(i);break}o.push(s)}}return o}findMaxDept(i,t){let e=t;for(let r=0;r<i.length;r++){let o=i[r];if(o instanceof ei){let n=o,s=this.findMaxDept(n.getChildren(),t+1);e<s&&(e=s)}}return e}recursivelyCreateColumns(i,t,e,r,o,n,s){if(!i)return[];let a=new Array(i.length);for(let l=0;l<a.length;l++){let d=i[l];this.isColumnGroup(d)?a[l]=this.createColumnGroup(e,d,t,r,o,n,s):a[l]=this.createColumn(e,d,r,o,s)}return a}createColumnGroup(i,t,e,r,o,n,s){let a=this.createMergedColGroupDef(t),l=o.getUniqueKey(a.groupId||null,null),d=new ei(a,l,!1,e);this.createBean(d);let u=this.findExistingGroup(t,n);u&&n.splice(u.idx,1);let c=u?.group;c&&d.setExpanded(c.isExpanded());let h=this.recursivelyCreateColumns(a.children,e+1,i,r,o,n,s);return d.setChildren(h),d}createMergedColGroupDef(i){let t={};return Object.assign(t,this.gos.get("defaultColGroupDef")),Object.assign(t,i),t}createColumn(i,t,e,r,o){let n=this.findExistingColumn(t,e);n&&e?.splice(n.idx,1);let s=n?.column;if(s){let a=this.addColumnDefaultAndTypes(t,s.getColId());s.setColDef(a,t,o),this.applyColumnState(s,a,o)}else{let a=r.getUniqueKey(t.colId,t.field),l=this.addColumnDefaultAndTypes(t,a);s=new yt(l,t,a,i),this.context.createBean(s)}return this.dataTypeService.addColumnListeners(s),s}applyColumnState(i,t,e){let r=rs(t.flex);if(r!==void 0&&i.setFlex(r),i.getFlex()<=0){let a=rs(t.width);if(a!=null)i.setActualWidth(a,e);else{let l=i.getActualWidth();i.setActualWidth(l,e)}}t.sort!==void 0&&(t.sort=="asc"||t.sort=="desc"?i.setSort(t.sort,e):i.setSort(void 0,e));let n=rs(t.sortIndex);n!==void 0&&i.setSortIndex(n);let s=gh(t.hide);s!==void 0&&i.setVisible(!s,e),t.pinned!==void 0&&i.setPinned(t.pinned)}findExistingColumn(i,t){if(t)for(let e=0;e<t.length;e++){let r=t[e].getUserProvidedColDef();if(!r)continue;if(i.colId!=null){if(t[e].getId()===i.colId)return{idx:e,column:t[e]};continue}if(i.field!=null){if(r.field===i.field)return{idx:e,column:t[e]};continue}if(r===i)return{idx:e,column:t[e]}}}findExistingGroup(i,t){if(i.groupId!=null)for(let r=0;r<t.length;r++){let o=t[r];if(o.getColGroupDef()&&o.getId()===i.groupId)return{idx:r,group:o}}}addColumnDefaultAndTypes(i,t){let e={},r=this.gos.get("defaultColDef");wr(e,r,!1,!0);let o=this.dataTypeService.updateColDefAndGetColumnType(e,i,t);o&&this.assignColumnTypes(o,e),wr(e,i,!1,!0);let n=this.gos.get("autoGroupColumnDef"),s=this.gos.isColumnsSortingCoupledToGroup();return i.rowGroup&&n&&s&&wr(e,{sort:n.sort,initialSort:n.initialSort},!1,!0),this.dataTypeService.validateColDef(e),e}assignColumnTypes(i,t){if(!i.length)return;let e=Object.assign({},nE),r=this.gos.get("columnTypes")||{};Wi(r,(o,n)=>{o in e?console.warn(`AG Grid: the column type '${o}' is a default column type and cannot be overridden.`):(n.type&&Ce("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),e[o]=n)}),i.forEach(o=>{let n=e[o.trim()];n?wr(t,n,!1,!0):console.warn("AG Grid: colDef.type '"+o+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(i){return i.children!==void 0}};g([w("dataTypeService")],Rd.prototype,"dataTypeService",2);g([xo(0,Zr("loggerFactory"))],Rd.prototype,"setBeans",1);Rd=g([te("columnFactory")],Rd);function In(i,t,e){if(t)for(let r=0;r<t.length;r++){let o=t[r];o instanceof ei&&In(o,o.getChildren(),e),e(o,i)}}var Nh=class ln{constructor(t,e,r,o){this.displayedChildren=[],this.localEventService=new Po,this.groupId=e,this.partId=r,this.providedColumnGroup=t,this.pinned=o}static createUniqueId(t,e){return t+"_"+e}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(t){this.parent=t}getUniqueId(){return ln.createUniqueId(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){let t=this.getProvidedColumnGroup().getLeafColumns();return!t||t.length===0?!1:t.every(e=>e.isMoving())}checkLeft(){if(this.displayedChildren.forEach(t=>{t instanceof ln&&t.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){let e=rt(this.displayedChildren).getLeft();this.setLeft(e)}else{let t=this.displayedChildren[0].getLeft();this.setLeft(t)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(t){this.oldLeft=this.left,this.left!==t&&(this.left=t,this.localEventService.dispatchEvent(this.createAgEvent(ln.EVENT_LEFT_CHANGED)))}getPinned(){return this.pinned}createAgEvent(t){return{type:t}}addEventListener(t,e){this.localEventService.addEventListener(t,e)}removeEventListener(t,e){this.localEventService.removeEventListener(t,e)}getGroupId(){return this.groupId}getPartId(){return this.partId}isChildInThisGroupDeepSearch(t){let e=!1;return this.children.forEach(r=>{t===r&&(e=!0),r instanceof ln&&r.isChildInThisGroupDeepSearch(t)&&(e=!0)}),e}getActualWidth(){let t=0;return this.displayedChildren&&this.displayedChildren.forEach(e=>{t+=e.getActualWidth()}),t}isResizable(){if(!this.displayedChildren)return!1;let t=!1;return this.displayedChildren.forEach(e=>{e.isResizable()&&(t=!0)}),t}getMinWidth(){let t=0;return this.displayedChildren.forEach(e=>{t+=e.getMinWidth()||0}),t}addChild(t){this.children||(this.children=[]),this.children.push(t)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){let t=[];return this.addLeafColumns(t),t}getDisplayedLeafColumns(){let t=[];return this.addDisplayedLeafColumns(t),t}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(t){this.providedColumnGroup.setExpanded(t)}addDisplayedLeafColumns(t){this.displayedChildren.forEach(e=>{e instanceof yt?t.push(e):e instanceof ln&&e.addDisplayedLeafColumns(t)})}addLeafColumns(t){this.children.forEach(e=>{e instanceof yt?t.push(e):e instanceof ln&&e.addLeafColumns(t)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){let t=this.getParent();return!this.isPadding()||!t||!t.isPadding()?0:1+t.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let t=this;for(;t!=null&&t.isPadding();)t=t.getParent();if(!(t?t.providedColumnGroup.isExpandable():!1)){this.displayedChildren=this.children,this.localEventService.dispatchEvent(this.createAgEvent(ln.EVENT_DISPLAYED_CHILDREN_CHANGED));return}this.children.forEach(r=>{if(r instanceof ln&&(!r.displayedChildren||!r.displayedChildren.length))return;switch(r.getColumnGroupShow()){case"open":t.providedColumnGroup.isExpanded()&&this.displayedChildren.push(r);break;case"closed":t.providedColumnGroup.isExpanded()||this.displayedChildren.push(r);break;default:this.displayedChildren.push(r);break}}),this.localEventService.dispatchEvent(this.createAgEvent(ln.EVENT_DISPLAYED_CHILDREN_CHANGED))}};Nh.EVENT_LEFT_CHANGED="leftChanged";Nh.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged";g([w("gridOptionsService")],Nh.prototype,"gos",2);var wi=Nh,m=class{};m.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged";m.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded";m.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged";m.EVENT_PIVOT_MAX_COLUMNS_EXCEEDED="pivotMaxColumnsExceeded";m.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged";m.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll";m.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged";m.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged";m.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged";m.EVENT_COLUMN_MOVED="columnMoved";m.EVENT_COLUMN_VISIBLE="columnVisible";m.EVENT_COLUMN_PINNED="columnPinned";m.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened";m.EVENT_COLUMN_RESIZED="columnResized";m.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged";m.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED="suppressMovableColumns";m.EVENT_SUPPRESS_MENU_HIDE_CHANGED="suppressMenuHide";m.EVENT_SUPPRESS_FIELD_DOT_NOTATION="suppressFieldDotNotation";m.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged";m.EVENT_COLUMN_HEADER_MOUSE_OVER="columnHeaderMouseOver";m.EVENT_COLUMN_HEADER_MOUSE_LEAVE="columnHeaderMouseLeave";m.EVENT_COLUMN_HEADER_CLICKED="columnHeaderClicked";m.EVENT_COLUMN_HEADER_CONTEXT_MENU="columnHeaderContextMenu";m.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed";m.EVENT_ROW_GROUP_OPENED="rowGroupOpened";m.EVENT_ROW_DATA_UPDATED="rowDataUpdated";m.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged";m.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged";m.EVENT_CHART_CREATED="chartCreated";m.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged";m.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged";m.EVENT_CHART_DESTROYED="chartDestroyed";m.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged";m.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged";m.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart";m.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd";m.EVENT_MODEL_UPDATED="modelUpdated";m.EVENT_CUT_START="cutStart";m.EVENT_CUT_END="cutEnd";m.EVENT_PASTE_START="pasteStart";m.EVENT_PASTE_END="pasteEnd";m.EVENT_FILL_START="fillStart";m.EVENT_FILL_END="fillEnd";m.EVENT_RANGE_DELETE_START="rangeDeleteStart";m.EVENT_RANGE_DELETE_END="rangeDeleteEnd";m.EVENT_UNDO_STARTED="undoStarted";m.EVENT_UNDO_ENDED="undoEnded";m.EVENT_REDO_STARTED="redoStarted";m.EVENT_REDO_ENDED="redoEnded";m.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart";m.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd";m.EVENT_CELL_CLICKED="cellClicked";m.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked";m.EVENT_CELL_MOUSE_DOWN="cellMouseDown";m.EVENT_CELL_CONTEXT_MENU="cellContextMenu";m.EVENT_CELL_VALUE_CHANGED="cellValueChanged";m.EVENT_CELL_EDIT_REQUEST="cellEditRequest";m.EVENT_ROW_VALUE_CHANGED="rowValueChanged";m.EVENT_CELL_FOCUSED="cellFocused";m.EVENT_CELL_FOCUS_CLEARED="cellFocusCleared";m.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused";m.EVENT_ROW_SELECTED="rowSelected";m.EVENT_SELECTION_CHANGED="selectionChanged";m.EVENT_TOOLTIP_SHOW="tooltipShow";m.EVENT_TOOLTIP_HIDE="tooltipHide";m.EVENT_CELL_KEY_DOWN="cellKeyDown";m.EVENT_CELL_MOUSE_OVER="cellMouseOver";m.EVENT_CELL_MOUSE_OUT="cellMouseOut";m.EVENT_FILTER_CHANGED="filterChanged";m.EVENT_FILTER_MODIFIED="filterModified";m.EVENT_FILTER_OPENED="filterOpened";m.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED="advancedFilterBuilderVisibleChanged";m.EVENT_SORT_CHANGED="sortChanged";m.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved";m.EVENT_ROW_CLICKED="rowClicked";m.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked";m.EVENT_GRID_READY="gridReady";m.EVENT_GRID_PRE_DESTROYED="gridPreDestroyed";m.EVENT_GRID_SIZE_CHANGED="gridSizeChanged";m.EVENT_VIEWPORT_CHANGED="viewportChanged";m.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged";m.EVENT_FIRST_DATA_RENDERED="firstDataRendered";m.EVENT_DRAG_STARTED="dragStarted";m.EVENT_DRAG_STOPPED="dragStopped";m.EVENT_CHECKBOX_CHANGED="checkboxChanged";m.EVENT_ROW_EDITING_STARTED="rowEditingStarted";m.EVENT_ROW_EDITING_STOPPED="rowEditingStopped";m.EVENT_CELL_EDITING_STARTED="cellEditingStarted";m.EVENT_CELL_EDITING_STOPPED="cellEditingStopped";m.EVENT_BODY_SCROLL="bodyScroll";m.EVENT_BODY_SCROLL_END="bodyScrollEnd";m.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged";m.EVENT_PAGINATION_CHANGED="paginationChanged";m.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged";m.EVENT_STORE_REFRESHED="storeRefreshed";m.EVENT_STATE_UPDATED="stateUpdated";m.EVENT_COLUMN_MENU_VISIBLE_CHANGED="columnMenuVisibleChanged";m.EVENT_CONTEXT_MENU_VISIBLE_CHANGED="contextMenuVisibleChanged";m.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged";m.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED="columnContainerWidthChanged";m.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged";m.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged";m.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged";m.EVENT_FLASH_CELLS="flashCells";m.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged";m.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged";m.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged";m.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged";m.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged";m.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged";m.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged";m.EVENT_ROW_DRAG_ENTER="rowDragEnter";m.EVENT_ROW_DRAG_MOVE="rowDragMove";m.EVENT_ROW_DRAG_LEAVE="rowDragLeave";m.EVENT_ROW_DRAG_END="rowDragEnd";m.EVENT_GRID_STYLES_CHANGED="gridStylesChanged";m.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest";m.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest";m.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest";m.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest";m.EVENT_STORE_UPDATED="storeUpdated";m.EVENT_FILTER_DESTROYED="filterDestroyed";m.EVENT_ROW_DATA_UPDATE_STARTED="rowDataUpdateStarted";m.EVENT_ROW_COUNT_READY="rowCountReady";m.EVENT_ADVANCED_FILTER_ENABLED_CHANGED="advancedFilterEnabledChanged";m.EVENT_DATA_TYPES_INFERRED="dataTypesInferred";m.EVENT_FIELD_VALUE_CHANGED="fieldValueChanged";m.EVENT_FIELD_PICKER_VALUE_SELECTED="fieldPickerValueSelected";m.EVENT_SIDE_BAR_UPDATED="sideBarUpdated";var ah=new Set([m.EVENT_GRID_PRE_DESTROYED,m.EVENT_FILL_START]),lb=class{constructor(){this.existingIds={}}getInstanceIdForKey(i){let t=this.existingIds[i],e;return typeof t!="number"?e=0:e=t+1,this.existingIds[i]=e,e}},rl="ag-Grid-AutoColumn",Md=class extends j{createAutoGroupColumns(i){let t=[],e=this.gos.get("treeData"),r=this.gos.isGroupMultiAutoColumn();return e&&r&&(console.warn('AG Grid: you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),r=!1),r?i.forEach((o,n)=>{t.push(this.createOneAutoGroupColumn(o,n))}):t.push(this.createOneAutoGroupColumn()),t}updateAutoGroupColumns(i,t){i.forEach((e,r)=>this.updateOneAutoGroupColumn(e,r,t))}createOneAutoGroupColumn(i,t){let e;i?e=`${rl}-${i.getId()}`:e=rl;let r=this.createAutoGroupColDef(e,i,t);r.colId=e;let o=new yt(r,null,e,!0);return this.context.createBean(o),o}updateOneAutoGroupColumn(i,t,e){let r=i.getColDef(),o=typeof r.showRowGroup=="string"?r.showRowGroup:void 0,n=o!=null?this.columnModel.getPrimaryColumn(o):void 0,s=this.createAutoGroupColDef(i.getId(),n??void 0,t);i.setColDef(s,null,e),this.columnFactory.applyColumnState(i,s,e)}createAutoGroupColDef(i,t,e){let r=this.createBaseColDef(t),o=this.gos.get("autoGroupColumnDef");wr(r,o),r=this.columnFactory.addColumnDefaultAndTypes(r,i),this.gos.get("treeData")||Te(r.field)&&Te(r.valueGetter)&&Te(r.filterValueGetter)&&r.filter!=="agGroupColumnFilter"&&(r.filter=!1),e&&e>0&&(r.headerCheckboxSelection=!1);let n=this.gos.isColumnsSortingCoupledToGroup(),s=r.valueGetter||r.field!=null;return n&&!s&&(r.sortIndex=void 0,r.initialSort=void 0),r}createBaseColDef(i){let t=this.gos.get("autoGroupColumnDef"),r={headerName:this.localeService.getLocaleTextFunc()("group","Group")};if(t&&(t.cellRenderer||t.cellRendererSelector)||(r.cellRenderer="agGroupCellRenderer"),i){let n=i.getColDef();Object.assign(r,{headerName:this.columnModel.getDisplayNameForColumn(i,"header"),headerValueGetter:n.headerValueGetter}),n.cellRenderer&&Object.assign(r,{cellRendererParams:{innerRenderer:n.cellRenderer,innerRendererParams:n.cellRendererParams}}),r.showRowGroup=i.getColId()}else r.showRowGroup=!0;return r}};g([w("columnModel")],Md.prototype,"columnModel",2);g([w("columnFactory")],Md.prototype,"columnFactory",2);Md=g([te("autoGroupColService")],Md);var db={};Pi(db,{camelCaseToHumanText:()=>ub,camelCaseToHyphenated:()=>cb,capitalise:()=>gE,escapeString:()=>ti,utf8_encode:()=>pE});var cE=/[&<>"']/g,hE={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function pE(i){let t=String.fromCharCode;function e(c){let h=[];if(!c)return[];let p=c.length,f=0,C,b;for(;f<p;)C=c.charCodeAt(f++),C>=55296&&C<=56319&&f<p?(b=c.charCodeAt(f++),(b&64512)==56320?h.push(((C&1023)<<10)+(b&1023)+65536):(h.push(C),f--)):h.push(C);return h}function r(c){if(c>=55296&&c<=57343)throw Error("Lone surrogate U+"+c.toString(16).toUpperCase()+" is not a scalar value")}function o(c,h){return t(c>>h&63|128)}function n(c){if(c>=0&&c<=31&&c!==10)return`_x${c.toString(16).toUpperCase().padStart(4,"0")}_`;if(!(c&4294967168))return t(c);let h="";return c&4294965248?c&4294901760?c&4292870144||(h=t(c>>18&7|240),h+=o(c,12),h+=o(c,6)):(r(c),h=t(c>>12&15|224),h+=o(c,6)):h=t(c>>6&31|192),h+=t(c&63|128),h}let s=e(i),a=s.length,l=-1,d,u="";for(;++l<a;)d=s[l],u+=n(d);return u}function gE(i){return i[0].toUpperCase()+i.substring(1).toLowerCase()}function ti(i,t){if(i==null)return null;let e=i.toString().toString();return t?e:e.replace(cE,r=>hE[r])}function ub(i){if(!i||i==null)return null;let t=/([a-z])([A-Z])/g,e=/([A-Z]+)([A-Z])([a-z])/g;return i.replace(t,"$1 $2").replace(e,"$1 $2$3").replace(/\./g," ").split(" ").map(o=>o.substring(0,1).toUpperCase()+(o.length>1?o.substring(1,o.length):"")).join(" ")}function cb(i){return i.replace(/[A-Z]/g,t=>`-${t.toLocaleLowerCase()}`)}var hb={};Pi(hb,{convertToMap:()=>is,keys:()=>mE,mapById:()=>fE});function is(i){let t=new Map;return i.forEach(e=>t.set(e[0],e[1])),t}function fE(i,t){let e=new Map;return i.forEach(r=>e.set(t(r),r)),e}function mE(i){let t=[];return i.forEach((e,r)=>t.push(r)),t}var Ti=class extends j{constructor(){super(...arguments),this.primaryHeaderRowCount=0,this.secondaryHeaderRowCount=0,this.gridHeaderRowCount=0,this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.displayedColumnsAndGroupsMap={},this.viewportColumns=[],this.viewportColumnsHash="",this.headerViewportColumns=[],this.viewportColumnsCenter=[],this.headerViewportColumnsCenter=[],this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.autoHeightActiveAtLeastOnce=!1,this.rowGroupColumns=[],this.valueColumns=[],this.pivotColumns=[],this.ready=!1,this.changeEventsDispatching=!1,this.autoGroupsNeedBuilding=!1,this.forceRecreateAutoGroups=!1,this.pivotMode=!1,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}init(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation");let i=this.gos.get("pivotMode");this.isPivotSettingAllowed(i)&&(this.pivotMode=i),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],t=>this.buildAutoGroupColumns(Qa(t.source))),this.addManagedPropertyListener("autoGroupColumnDef",t=>this.onAutoGroupColumnDefChanged(Qa(t.source))),this.addManagedPropertyListeners(["defaultColDef","columnTypes","suppressFieldDotNotation"],t=>this.onSharedColDefChanged(Qa(t.source))),this.addManagedPropertyListener("pivotMode",t=>this.setPivotMode(this.gos.get("pivotMode"),Qa(t.source))),this.addManagedListener(this.eventService,m.EVENT_FIRST_DATA_RENDERED,()=>this.onFirstDataRendered())}buildAutoGroupColumns(i){this.columnDefs&&(this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns(i))}onAutoGroupColumnDefChanged(i){this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,i)}onSharedColDefChanged(i){this.gridColumns&&(this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,i),this.createColumnsFromColumnDefs(!0,i))}setColumnDefs(i,t){let e=!!this.columnDefs;this.columnDefs=i,this.createColumnsFromColumnDefs(e,t)}recreateColumnDefs(i){this.onSharedColDefChanged(i)}destroyOldColumns(i,t){let e={};if(!i)return;In(null,i,o=>{e[o.getInstanceId()]=o}),t&&In(null,t,o=>{e[o.getInstanceId()]=null});let r=Object.values(e).filter(o=>o!=null);this.destroyBeans(r)}destroyColumns(){this.destroyOldColumns(this.primaryColumnTree),this.destroyOldColumns(this.secondaryBalancedTree),this.destroyOldColumns(this.groupAutoColsBalancedTree)}createColumnsFromColumnDefs(i,t){let e=i?this.compareColumnStatesAndDispatchEvents(t):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;let r=this.primaryColumns,o=this.primaryColumnTree,n=this.columnFactory.createColumnTree(this.columnDefs,!0,o,t);this.destroyOldColumns(this.primaryColumnTree,n.columnTree),this.primaryColumnTree=n.columnTree,this.primaryHeaderRowCount=n.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(l=>this.primaryColumnsMap[l.getId()]=l),this.extractRowGroupColumns(t,r),this.extractPivotColumns(t,r),this.extractValueColumns(t,r),this.ready=!0;let s=this.gridColsArePrimary===void 0;(this.gridColsArePrimary||s||this.autoGroupsNeedBuilding)&&(this.updateGridColumns(),i&&this.gridColsArePrimary&&!this.gos.get("maintainColumnOrder")&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(t),this.checkViewportColumns()),this.dispatchEverythingChanged(t),this.changeEventsDispatching=!0,e&&e(),this.changeEventsDispatching=!1,this.dispatchNewColumnsLoaded(t)}shouldRowModelIgnoreRefresh(){return this.changeEventsDispatching}dispatchNewColumnsLoaded(i){let t={type:m.EVENT_NEW_COLUMNS_LOADED,source:i};this.eventService.dispatchEvent(t),i==="gridInitializing"&&this.onColumnsReady()}dispatchEverythingChanged(i){let t={type:m.EVENT_COLUMN_EVERYTHING_CHANGED,source:i};this.eventService.dispatchEvent(t)}orderGridColumnsLikePrimary(){let i=this.primaryColumns;if(!i)return;let t=i.filter(r=>this.gridColumns.indexOf(r)>=0),e=this.gridColumns.filter(r=>t.indexOf(r)<0);this.gridColumns=[...e,...t],this.gridColumns=this.placeLockedColumns(this.gridColumns)}getAllDisplayedAutoHeightCols(){return this.displayedAutoHeightCols}setViewport(){this.gos.get("enableRtl")?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)}checkViewportColumns(i=!1){if(this.displayedColumnsCenter==null||!this.extractViewport())return;let e={type:m.EVENT_VIRTUAL_COLUMNS_CHANGED,afterScroll:i};this.eventService.dispatchEvent(e)}setViewportPosition(i,t,e=!1){(i!==this.scrollWidth||t!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=i,this.scrollPosition=t,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns(e))}isPivotMode(){return this.pivotMode}isPivotSettingAllowed(i){return i&&this.gos.get("treeData")?(Ce("Pivot mode not available with treeData."),!1):!0}setPivotMode(i,t){if(i===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=i,!this.gridColumns))return;this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(t);let e={type:m.EVENT_COLUMN_PIVOT_MODE_CHANGED};this.eventService.dispatchEvent(e)}getSecondaryPivotColumn(i,t){if(Te(this.secondaryColumns))return null;let e=this.getPrimaryColumn(t),r=null;return this.secondaryColumns.forEach(o=>{let n=o.getColDef().pivotKeys,s=o.getColDef().pivotValueColumn;cn(n,i)&&s===e&&(r=o)}),r}setBeans(i){this.logger=i.create("columnModel")}setFirstRightAndLastLeftPinned(i){let t,e;this.gos.get("enableRtl")?(t=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,e=this.displayedColumnsRight?rt(this.displayedColumnsRight):null):(t=this.displayedColumnsLeft?rt(this.displayedColumnsLeft):null,e=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(r=>{r.setLastLeftPinned(r===t,i),r.setFirstRightPinned(r===e,i)})}autoSizeColumns(i){if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.autoSizeColumns(i));return}let{columns:t,skipHeader:e,skipHeaderGroups:r,stopAtGroup:o,source:n="api"}=i;this.animationFrameService.flushAllFrames();let s=[],a=-1,l=e??this.gos.get("skipHeaderOnAutoSize"),d=r??l;for(;a!==0;)a=0,this.actionOnGridColumns(t,u=>{if(s.indexOf(u)>=0)return!1;let c=this.autoWidthCalculator.getPreferredWidthForColumn(u,l);if(c>0){let h=this.normaliseColumnWidth(u,c);u.setActualWidth(h,n),s.push(u),a++}return!0},n);d||this.autoSizeColumnGroupsByColumns(t,n,o),this.dispatchColumnResizedEvent(s,!0,"autosizeColumns")}dispatchColumnResizedEvent(i,t,e,r=null){if(i&&i.length){let o={type:m.EVENT_COLUMN_RESIZED,columns:i,column:i.length===1?i[0]:null,flexColumns:r,finished:t,source:e};this.eventService.dispatchEvent(o)}}dispatchColumnChangedEvent(i,t,e){let r={type:i,columns:t,column:t&&t.length==1?t[0]:null,source:e};this.eventService.dispatchEvent(r)}dispatchColumnMovedEvent(i){let{movedColumns:t,source:e,toIndex:r,finished:o}=i,n={type:m.EVENT_COLUMN_MOVED,columns:t,column:t&&t.length===1?t[0]:null,toIndex:r,finished:o,source:e};this.eventService.dispatchEvent(n)}dispatchColumnPinnedEvent(i,t){if(!i.length)return;let e=i.length===1?i[0]:null,r=this.getCommonValue(i,n=>n.getPinned()),o={type:m.EVENT_COLUMN_PINNED,pinned:r??null,columns:i,column:e,source:t};this.eventService.dispatchEvent(o)}dispatchColumnVisibleEvent(i,t){if(!i.length)return;let e=i.length===1?i[0]:null,r=this.getCommonValue(i,n=>n.isVisible()),o={type:m.EVENT_COLUMN_VISIBLE,visible:r,columns:i,column:e,source:t};this.eventService.dispatchEvent(o)}autoSizeColumn(i,t,e){i&&this.autoSizeColumns({columns:[i],skipHeader:e,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(i,t,e){let r=new Set;this.getGridColumns(i).forEach(a=>{let l=a.getParent();for(;l&&l!=e;)l.isPadding()||r.add(l),l=l.getParent()});let n,s=[];for(let a of r){for(let l of this.ctrlsService.getHeaderRowContainerCtrls())if(n=l.getHeaderCtrlForColumn(a),n)break;n&&n.resizeLeafColumnsToFit(t)}return s}autoSizeAllColumns(i,t){if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.autoSizeAllColumns(i,t));return}let e=this.getAllDisplayedColumns();this.autoSizeColumns({columns:e,skipHeader:t,source:i})}getColumnsFromTree(i){let t=[],e=r=>{for(let o=0;o<r.length;o++){let n=r[o];n instanceof yt?t.push(n):n instanceof ei&&e(n.getChildren())}};return e(i),t}getAllDisplayedTrees(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null}getPrimaryColumnTree(){return this.primaryColumnTree}getHeaderRowCount(){return this.gridHeaderRowCount}getDisplayedTreeLeft(){return this.displayedTreeLeft}getDisplayedTreeRight(){return this.displayedTreeRight}getDisplayedTreeCentre(){return this.displayedTreeCentre}isColumnDisplayed(i){return this.getAllDisplayedColumns().indexOf(i)>=0}getAllDisplayedColumns(){return this.displayedColumns}getViewportColumns(){return this.viewportColumns}getDisplayedLeftColumnsForRow(i){return this.colSpanActive?this.getDisplayedColumnsForRow(i,this.displayedColumnsLeft):this.displayedColumnsLeft}getDisplayedRightColumnsForRow(i){return this.colSpanActive?this.getDisplayedColumnsForRow(i,this.displayedColumnsRight):this.displayedColumnsRight}isColSpanActive(){return this.colSpanActive}getDisplayedColumnsForRow(i,t,e,r){let o=[],n=null;for(let s=0;s<t.length;s++){let a=t[s],l=t.length-s,d=Math.min(a.getColSpan(i),l),u=[a];if(d>1){let h=d-1;for(let p=1;p<=h;p++)u.push(t[s+p]);s+=h}let c;e?(c=!1,u.forEach(h=>{e(h)&&(c=!0)})):c=!0,c&&(o.length===0&&n&&(r&&r(a))&&o.push(n),o.push(a)),n=a}return o}getViewportCenterColumnsForRow(i){if(!this.colSpanActive)return this.viewportColumnsCenter;let t=r=>{let o=r.getLeft();return W(o)&&o>this.viewportLeft},e=this.isColumnVirtualisationSuppressed()?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(i,this.displayedColumnsCenter,e,t)}isColumnAtEdge(i,t){let e=this.getAllDisplayedColumns();if(!e.length)return!1;let r=t==="first",o;if(i instanceof wi){let n=i.getDisplayedLeafColumns();if(!n.length)return!1;o=r?n[0]:rt(n)}else o=i;return(r?e[0]:rt(e))===o}getAriaColumnIndex(i){let t;return i instanceof wi?t=i.getLeafColumns()[0]:t=i,this.ariaOrderColumns.indexOf(t)+1}isColumnInHeaderViewport(i){return i.isAutoHeaderHeight()?!0:this.isColumnInRowViewport(i)}isColumnInRowViewport(i){if(i.isAutoHeight())return!0;let t=i.getLeft()||0,e=t+i.getActualWidth(),r=this.viewportLeft-200,o=this.viewportRight+200,n=t<r&&e<r,s=t>o&&e>o;return!n&&!s}getDisplayedColumnsLeftWidth(){return this.getWidthOfColsInList(this.displayedColumnsLeft)}getDisplayedColumnsRightWidth(){return this.getWidthOfColsInList(this.displayedColumnsRight)}updatePrimaryColumnList(i,t,e,r,o,n){if(!i||Qr(i))return;let s=!1;if(i.forEach(l=>{if(!l)return;let d=this.getPrimaryColumn(l);if(d){if(e){if(t.indexOf(d)>=0)return;t.push(d)}else{if(t.indexOf(d)<0)return;br(t,d)}r(d),s=!0}}),!s)return;this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(n);let a={type:o,columns:t,column:t.length===1?t[0]:null,source:n};this.eventService.dispatchEvent(a)}setRowGroupColumns(i,t){this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(i,this.rowGroupColumns,m.EVENT_COLUMN_ROW_GROUP_CHANGED,!0,this.setRowGroupActive.bind(this),t)}setRowGroupActive(i,t,e){i!==t.isRowGroupActive()&&(t.setRowGroupActive(i,e),i&&!this.gos.get("suppressRowGroupHidesColumns")&&this.setColumnsVisible([t],!1,e),!i&&!this.gos.get("suppressMakeColumnVisibleAfterUnGroup")&&this.setColumnsVisible([t],!0,e))}addRowGroupColumns(i,t){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(i,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),m.EVENT_COLUMN_ROW_GROUP_CHANGED,t)}removeRowGroupColumns(i,t){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(i,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),m.EVENT_COLUMN_ROW_GROUP_CHANGED,t)}addPivotColumns(i,t){this.updatePrimaryColumnList(i,this.pivotColumns,!0,e=>e.setPivotActive(!0,t),m.EVENT_COLUMN_PIVOT_CHANGED,t)}setPivotColumns(i,t){this.setPrimaryColumnList(i,this.pivotColumns,m.EVENT_COLUMN_PIVOT_CHANGED,!0,(e,r)=>{r.setPivotActive(e,t)},t)}removePivotColumns(i,t){this.updatePrimaryColumnList(i,this.pivotColumns,!1,e=>e.setPivotActive(!1,t),m.EVENT_COLUMN_PIVOT_CHANGED,t)}setPrimaryColumnList(i,t,e,r,o,n){if(!this.gridColumns)return;let s=new Map;t.forEach((a,l)=>s.set(a,l)),t.length=0,W(i)&&i.forEach(a=>{let l=this.getPrimaryColumn(a);l&&t.push(l)}),t.forEach((a,l)=>{let d=s.get(a);if(d===void 0){s.set(a,0);return}r&&d!==l||s.delete(a)}),(this.primaryColumns||[]).forEach(a=>{let l=t.indexOf(a)>=0;o(l,a)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(n),this.dispatchColumnChangedEvent(e,[...s.keys()],n)}setValueColumns(i,t){this.setPrimaryColumnList(i,this.valueColumns,m.EVENT_COLUMN_VALUE_CHANGED,!1,this.setValueActive.bind(this),t)}setValueActive(i,t,e){if(i!==t.isValueActive()&&(t.setValueActive(i,e),i&&!t.getAggFunc()&&this.aggFuncService)){let r=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(r)}}addValueColumns(i,t){this.updatePrimaryColumnList(i,this.valueColumns,!0,this.setValueActive.bind(this,!0),m.EVENT_COLUMN_VALUE_CHANGED,t)}removeValueColumns(i,t){this.updatePrimaryColumnList(i,this.valueColumns,!1,this.setValueActive.bind(this,!1),m.EVENT_COLUMN_VALUE_CHANGED,t)}normaliseColumnWidth(i,t){let e=i.getMinWidth();W(e)&&t<e&&(t=e);let r=i.getMaxWidth();return W(r)&&i.isGreaterThanMax(t)&&(t=r),t}getPrimaryOrGridColumn(i){return this.getPrimaryColumn(i)||this.getGridColumn(i)}setColumnWidths(i,t,e,r){let o=[];i.forEach(n=>{let s=this.getPrimaryOrGridColumn(n.key);if(!s)return;if(o.push({width:n.newWidth,ratios:[1],columns:[s]}),this.gos.get("colResizeDefault")==="shift"&&(t=!t),t){let l=this.getDisplayedColAfter(s);if(!l)return;let d=s.getActualWidth()-n.newWidth,u=l.getActualWidth()+d;o.push({width:u,ratios:[1],columns:[l]})}}),o.length!==0&&this.resizeColumnSets({resizeSets:o,finished:e,source:r})}checkMinAndMaxWidthsForSet(i){let{columns:t,width:e}=i,r=0,o=0,n=!0;t.forEach(l=>{let d=l.getMinWidth();r+=d||0;let u=l.getMaxWidth();W(u)&&u>0?o+=u:n=!1});let s=e>=r,a=!n||e<=o;return s&&a}resizeColumnSets(i){let{resizeSets:t,finished:e,source:r}=i;if(!(!t||t.every(u=>this.checkMinAndMaxWidthsForSet(u)))){if(e){let u=t&&t.length>0?t[0].columns:null;this.dispatchColumnResizedEvent(u,e,r)}return}let n=[],s=[];t.forEach(u=>{let{width:c,columns:h,ratios:p}=u,f={},C={};h.forEach(S=>s.push(S));let b=!0,x=0;for(;b;){if(x++,x>1e3){console.error("AG Grid: infinite loop in resizeColumnSets");break}b=!1;let S=[],R=0,I=c;h.forEach((L,V)=>{if(C[L.getId()])I-=f[L.getId()];else{S.push(L);let G=p[V];R+=G}});let F=1/R;S.forEach((L,V)=>{let k=V===S.length-1,G;k?G=I:(G=Math.round(p[V]*c*F),I-=G);let ge=L.getMinWidth(),le=L.getMaxWidth();W(ge)&&G<ge?(G=ge,C[L.getId()]=!0,b=!0):W(le)&&le>0&&G>le&&(G=le,C[L.getId()]=!0,b=!0),f[L.getId()]=G})}h.forEach(S=>{let R=f[S.getId()];S.getActualWidth()!==R&&(S.setActualWidth(R,r),n.push(S))})});let a=n.length>0,l=[];a&&(l=this.refreshFlexedColumns({resizingCols:s,skipSetLeft:!0}),this.setLeftValues(r),this.updateBodyWidths(),this.checkViewportColumns());let d=s.concat(l);(a||e)&&this.dispatchColumnResizedEvent(d,e,r,l)}setColumnAggFunc(i,t,e){if(!i)return;let r=this.getPrimaryColumn(i);r&&(r.setAggFunc(t),this.dispatchColumnChangedEvent(m.EVENT_COLUMN_VALUE_CHANGED,[r],e))}moveRowGroupColumn(i,t,e){if(this.isRowGroupEmpty())return;let r=this.rowGroupColumns[i],o=this.rowGroupColumns.slice(i,t);this.rowGroupColumns.splice(i,1),this.rowGroupColumns.splice(t,0,r);let n={type:m.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:o,column:o.length===1?o[0]:null,source:e};this.eventService.dispatchEvent(n)}moveColumns(i,t,e,r=!0){if(!this.gridColumns)return;if(this.columnAnimationService.start(),t>this.gridColumns.length-i.length){console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+t),console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");return}let o=this.getGridColumns(i);this.doesMovePassRules(o,t)&&(Zg(this.gridColumns,o,t),this.updateDisplayedColumns(e),this.dispatchColumnMovedEvent({movedColumns:o,source:e,toIndex:t,finished:r}),this.columnAnimationService.finish())}doesMovePassRules(i,t){let e=this.getProposedColumnOrder(i,t);return this.doesOrderPassRules(e)}doesOrderPassRules(i){return!(!this.doesMovePassMarryChildren(i)||!this.doesMovePassLockedPositions(i))}getProposedColumnOrder(i,t){let e=this.gridColumns.slice();return Zg(e,i,t),e}sortColumnsLikeGridColumns(i){!i||i.length<=1||i.filter(e=>this.gridColumns.indexOf(e)<0).length>0||i.sort((e,r)=>{let o=this.gridColumns.indexOf(e),n=this.gridColumns.indexOf(r);return o-n})}doesMovePassLockedPositions(i){let t=0,e=!0,r=o=>o?o===!0||o==="left"?0:2:1;return i.forEach(o=>{let n=r(o.getColDef().lockPosition);n<t&&(e=!1),t=n}),e}doesMovePassMarryChildren(i){let t=!0;return In(null,this.gridBalancedTree,e=>{if(!(e instanceof ei))return;let r=e,o=r.getColGroupDef();if(!(o&&o.marryChildren))return;let s=[];r.getLeafColumns().forEach(c=>{let h=i.indexOf(c);s.push(h)});let a=Math.max.apply(Math,s),l=Math.min.apply(Math,s),d=a-l,u=r.getLeafColumns().length-1;d>u&&(t=!1)}),t}moveColumnByIndex(i,t,e){if(!this.gridColumns)return;let r=this.gridColumns[i];this.moveColumns([r],t,e)}getColumnDefs(){if(!this.primaryColumns)return;let i=this.primaryColumns.slice();return this.gridColsArePrimary?i.sort((t,e)=>this.gridColumns.indexOf(t)-this.gridColumns.indexOf(e)):this.lastPrimaryOrder&&i.sort((t,e)=>this.lastPrimaryOrder.indexOf(t)-this.lastPrimaryOrder.indexOf(e)),this.columnDefFactory.buildColumnDefs(i,this.rowGroupColumns,this.pivotColumns)}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(i){switch(i){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}updateBodyWidths(){let i=this.getWidthOfColsInList(this.displayedColumnsCenter),t=this.getWidthOfColsInList(this.displayedColumnsLeft),e=this.getWidthOfColsInList(this.displayedColumnsRight);if(this.bodyWidthDirty=this.bodyWidth!==i,this.bodyWidth!==i||this.leftWidth!==t||this.rightWidth!==e){this.bodyWidth=i,this.leftWidth=t,this.rightWidth=e;let o={type:m.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED};this.eventService.dispatchEvent(o);let n={type:m.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED};this.eventService.dispatchEvent(n)}}getValueColumns(){return this.valueColumns?this.valueColumns:[]}getPivotColumns(){return this.pivotColumns?this.pivotColumns:[]}isPivotActive(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode}getRowGroupColumns(){return this.rowGroupColumns?this.rowGroupColumns:[]}getDisplayedCenterColumns(){return this.displayedColumnsCenter}getDisplayedLeftColumns(){return this.displayedColumnsLeft}getDisplayedRightColumns(){return this.displayedColumnsRight}getAllPrimaryColumns(){return this.primaryColumns?this.primaryColumns:null}getSecondaryColumns(){return this.secondaryColumns?this.secondaryColumns:null}getAllColumnsForQuickFilter(){return this.columnsForQuickFilter}getAllGridColumns(){var i;return(i=this.gridColumns)!=null?i:[]}isRowGroupEmpty(){return Qr(this.rowGroupColumns)}setColumnsVisible(i,t=!1,e){this.applyColumnState({state:i.map(r=>({colId:typeof r=="string"?r:r.getColId(),hide:!t}))},e)}setColumnsPinned(i,t,e){if(!this.gridColumns)return;if(this.gos.isDomLayout("print")){console.warn("AG Grid: Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let r;t===!0||t==="left"?r="left":t==="right"?r="right":r=null,this.actionOnGridColumns(i,o=>o.getPinned()!==r?(o.setPinned(r),!0):!1,e,()=>({type:m.EVENT_COLUMN_PINNED,pinned:r,column:null,columns:null,source:e})),this.columnAnimationService.finish()}actionOnGridColumns(i,t,e,r){if(Qr(i))return;let o=[];if(i.forEach(n=>{if(!n)return;let s=this.getGridColumn(n);if(!s)return;t(s)!==!1&&o.push(s)}),!!o.length&&(this.updateDisplayedColumns(e),W(r)&&r)){let n=r();n.columns=o,n.column=o.length===1?o[0]:null,this.eventService.dispatchEvent(n)}}getDisplayedColBefore(i){let t=this.getAllDisplayedColumns(),e=t.indexOf(i);return e>0?t[e-1]:null}getDisplayedColAfter(i){let t=this.getAllDisplayedColumns(),e=t.indexOf(i);return e<t.length-1?t[e+1]:null}getDisplayedGroupAtDirection(i,t){let e=i.getProvidedColumnGroup().getLevel()+i.getPaddingLevel(),r=i.getDisplayedLeafColumns(),o=t==="After"?rt(r):r[0],n=`getDisplayedCol${t}`;for(;;){let s=this[n](o);if(!s)return null;let a=this.getColumnGroupAtLevel(s,e);if(a!==i)return a}}getColumnGroupAtLevel(i,t){let e=i.getParent(),r,o;for(;r=e.getProvidedColumnGroup().getLevel(),o=e.getPaddingLevel(),!(r+o<=t);)e=e.getParent();return e}isPinningLeft(){return this.displayedColumnsLeft.length>0}isPinningRight(){return this.displayedColumnsRight.length>0}getPrimaryAndSecondaryAndAutoColumns(){return[].concat(this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[])}createStateItemFromColumn(i){let t=i.isRowGroupActive()?this.rowGroupColumns.indexOf(i):null,e=i.isPivotActive()?this.pivotColumns.indexOf(i):null,r=i.isValueActive()?i.getAggFunc():null,o=i.getSort()!=null?i.getSort():null,n=i.getSortIndex()!=null?i.getSortIndex():null,s=i.getFlex()!=null&&i.getFlex()>0?i.getFlex():null;return{colId:i.getColId(),width:i.getActualWidth(),hide:!i.isVisible(),pinned:i.getPinned(),sort:o,sortIndex:n,aggFunc:r,rowGroup:i.isRowGroupActive(),rowGroupIndex:t,pivot:i.isPivotActive(),pivotIndex:e,flex:s}}getColumnState(){if(Te(this.primaryColumns)||!this.isAlive())return[];let t=this.getPrimaryAndSecondaryAndAutoColumns().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(t),t}orderColumnStateList(i){let t=is(this.gridColumns.map((e,r)=>[e.getColId(),r]));i.sort((e,r)=>{let o=t.has(e.colId)?t.get(e.colId):-1,n=t.has(r.colId)?t.get(r.colId):-1;return o-n})}resetColumnState(i){if(Qr(this.primaryColumns))return;let t=this.getColumnsFromTree(this.primaryColumnTree),e=[],r=1e3,o=1e3,n=[];this.groupAutoColumns&&(n=n.concat(this.groupAutoColumns)),t&&(n=n.concat(t)),n.forEach(s=>{let a=this.getColumnStateFromColDef(s);Te(a.rowGroupIndex)&&a.rowGroup&&(a.rowGroupIndex=r++),Te(a.pivotIndex)&&a.pivot&&(a.pivotIndex=o++),e.push(a)}),this.applyColumnState({state:e,applyOrder:!0},i)}getColumnStateFromColDef(i){let t=(f,C)=>f??C??null,e=i.getColDef(),r=t(e.sort,e.initialSort),o=t(e.sortIndex,e.initialSortIndex),n=t(e.hide,e.initialHide),s=t(e.pinned,e.initialPinned),a=t(e.width,e.initialWidth),l=t(e.flex,e.initialFlex),d=t(e.rowGroupIndex,e.initialRowGroupIndex),u=t(e.rowGroup,e.initialRowGroup);d==null&&(u==null||u==!1)&&(d=null,u=null);let c=t(e.pivotIndex,e.initialPivotIndex),h=t(e.pivot,e.initialPivot);c==null&&(h==null||h==!1)&&(c=null,h=null);let p=t(e.aggFunc,e.initialAggFunc);return{colId:i.getColId(),sort:r,sortIndex:o,hide:n,pinned:s,width:a,flex:l,rowGroup:u,rowGroupIndex:d,pivot:h,pivotIndex:c,aggFunc:p}}applyColumnState(i,t){if(Qr(this.primaryColumns))return!1;if(i&&i.state&&!i.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;let e=(n,s,a)=>{let l=this.compareColumnStatesAndDispatchEvents(t);this.autoGroupsNeedBuilding=!0;let d=s.slice(),u={},c={},h=[],p=[],f=0,C=this.rowGroupColumns.slice(),b=this.pivotColumns.slice();n.forEach(I=>{let F=I.colId||"";if(F.startsWith(rl)){h.push(I),p.push(I);return}let V=a(F);V?(this.syncColumnWithStateItem(V,I,i.defaultState,u,c,!1,t),br(d,V)):(p.push(I),f+=1)});let x=I=>this.syncColumnWithStateItem(I,null,i.defaultState,u,c,!1,t);d.forEach(x);let S=(I,F,L,V)=>{let k=I[L.getId()],G=I[V.getId()],ge=k!=null,le=G!=null;if(ge&&le)return k-G;if(ge)return-1;if(le)return 1;let Je=F.indexOf(L),Ne=F.indexOf(V),Ai=Je>=0,ko=Ne>=0;return Ai&&ko?Je-Ne:Ai?-1:1};this.rowGroupColumns.sort(S.bind(this,u,C)),this.pivotColumns.sort(S.bind(this,c,b)),this.updateGridColumns();let R=this.groupAutoColumns?this.groupAutoColumns.slice():[];return h.forEach(I=>{let F=this.getAutoColumn(I.colId);br(R,F),this.syncColumnWithStateItem(F,I,i.defaultState,null,null,!0,t)}),R.forEach(x),this.applyOrderAfterApplyState(i),this.updateDisplayedColumns(t),this.dispatchEverythingChanged(t),l(),{unmatchedAndAutoStates:p,unmatchedCount:f}};this.columnAnimationService.start();let{unmatchedAndAutoStates:r,unmatchedCount:o}=e(i.state||[],this.primaryColumns||[],n=>this.getPrimaryColumn(n));return(r.length>0||W(i.defaultState))&&(o=e(r,this.secondaryColumns||[],n=>this.getSecondaryColumn(n)).unmatchedCount),this.columnAnimationService.finish(),o===0}applyOrderAfterApplyState(i){if(!i.applyOrder||!i.state)return;let t=[],e={};i.state.forEach(o=>{if(!o.colId||e[o.colId])return;let n=this.gridColumnsMap[o.colId];n&&(t.push(n),e[o.colId]=!0)});let r=0;if(this.gridColumns.forEach(o=>{let n=o.getColId();if(e[n]!=null)return;n.startsWith(rl)?Pd(t,o,r++):t.push(o)}),t=this.placeLockedColumns(t),!this.doesMovePassMarryChildren(t)){console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.gridColumns=t}compareColumnStatesAndDispatchEvents(i){let t={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},e=this.getColumnState(),r={};return e.forEach(o=>{r[o.colId]=o}),()=>{let o=this.getPrimaryAndSecondaryAndAutoColumns(),n=(C,b,x,S)=>{let R=b.map(S),I=x.map(S);if(cn(R,I))return;let L=new Set(b);x.forEach(G=>{L.delete(G)||L.add(G)});let V=[...L],k={type:C,columns:V,column:V.length===1?V[0]:null,source:i};this.eventService.dispatchEvent(k)},s=C=>{let b=[];return o.forEach(x=>{let S=r[x.getColId()];S&&C(S,x)&&b.push(x)}),b},a=C=>C.getColId();n(m.EVENT_COLUMN_ROW_GROUP_CHANGED,t.rowGroupColumns,this.rowGroupColumns,a),n(m.EVENT_COLUMN_PIVOT_CHANGED,t.pivotColumns,this.pivotColumns,a);let d=s((C,b)=>{let x=C.aggFunc!=null,S=x!=b.isValueActive(),R=x&&C.aggFunc!=b.getAggFunc();return S||R});d.length>0&&this.dispatchColumnChangedEvent(m.EVENT_COLUMN_VALUE_CHANGED,d,i);let u=(C,b)=>C.width!=b.getActualWidth();this.dispatchColumnResizedEvent(s(u),!0,i);let c=(C,b)=>C.pinned!=b.getPinned();this.dispatchColumnPinnedEvent(s(c),i);let h=(C,b)=>C.hide==b.isVisible();this.dispatchColumnVisibleEvent(s(h),i);let f=s((C,b)=>C.sort!=b.getSort()||C.sortIndex!=b.getSortIndex());f.length>0&&this.sortController.dispatchSortChangedEvents(i,f),this.normaliseColumnMovedEventForColumnState(e,i)}}getCommonValue(i,t){if(!i||i.length==0)return;let e=t(i[0]);for(let r=1;r<i.length;r++)if(e!==t(i[r]))return;return e}normaliseColumnMovedEventForColumnState(i,t){let e=this.getColumnState(),r={};e.forEach(l=>r[l.colId]=l);let o={};i.forEach(l=>{r[l.colId]&&(o[l.colId]=!0)});let n=i.filter(l=>o[l.colId]),s=e.filter(l=>o[l.colId]),a=[];s.forEach((l,d)=>{let u=n&&n[d];if(u&&u.colId!==l.colId){let c=this.getGridColumn(u.colId);c&&a.push(c)}}),a.length&&this.dispatchColumnMovedEvent({movedColumns:a,source:t,finished:!0})}syncColumnWithStateItem(i,t,e,r,o,n,s){var a;if(!i)return;let l=(I,F)=>{let L={value1:void 0,value2:void 0},V=!1;return t&&(t[I]!==void 0&&(L.value1=t[I],V=!0),W(F)&&t[F]!==void 0&&(L.value2=t[F],V=!0)),!V&&e&&(e[I]!==void 0&&(L.value1=e[I]),W(F)&&e[F]!==void 0&&(L.value2=e[F])),L},d=l("hide").value1;d!==void 0&&i.setVisible(!d,s);let u=l("pinned").value1;u!==void 0&&i.setPinned(u);let c=(a=i.getColDef().minWidth)!=null?a:this.environment.getMinColWidth(),h=l("flex").value1;if(h!==void 0&&i.setFlex(h),h==null){let I=l("width").value1;I!=null&&c!=null&&I>=c&&i.setActualWidth(I,s)}let p=l("sort").value1;p!==void 0&&(p==="desc"||p==="asc"?i.setSort(p,s):i.setSort(void 0,s));let f=l("sortIndex").value1;if(f!==void 0&&i.setSortIndex(f),n||!i.isPrimary())return;let C=l("aggFunc").value1;C!==void 0&&(typeof C=="string"?(i.setAggFunc(C),i.isValueActive()||(i.setValueActive(!0,s),this.valueColumns.push(i))):(W(C)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),i.isValueActive()&&(i.setValueActive(!1,s),br(this.valueColumns,i))));let{value1:b,value2:x}=l("rowGroup","rowGroupIndex");(b!==void 0||x!==void 0)&&(typeof x=="number"||b?(i.isRowGroupActive()||(i.setRowGroupActive(!0,s),this.rowGroupColumns.push(i)),r&&typeof x=="number"&&(r[i.getId()]=x)):i.isRowGroupActive()&&(i.setRowGroupActive(!1,s),br(this.rowGroupColumns,i)));let{value1:S,value2:R}=l("pivot","pivotIndex");(S!==void 0||R!==void 0)&&(typeof R=="number"||S?(i.isPivotActive()||(i.setPivotActive(!0,s),this.pivotColumns.push(i)),o&&typeof R=="number"&&(o[i.getId()]=R)):i.isPivotActive()&&(i.setPivotActive(!1,s),br(this.pivotColumns,i)))}getGridColumns(i){return this.getColumns(i,this.getGridColumn.bind(this))}getColumns(i,t){let e=[];return i&&i.forEach(r=>{let o=t(r);o&&e.push(o)}),e}getColumnWithValidation(i){if(i==null)return null;let t=this.getGridColumn(i);return t||console.warn("AG Grid: could not find column "+i),t}getPrimaryColumn(i){return this.primaryColumns?this.getColumn(i,this.primaryColumns,this.primaryColumnsMap):null}getGridColumn(i){return this.getColumn(i,this.gridColumns,this.gridColumnsMap)}lookupGridColumn(i){return this.gridColumnsMap[i]}getSecondaryColumn(i){return this.secondaryColumns?this.getColumn(i,this.secondaryColumns,this.secondaryColumnsMap):null}getColumn(i,t,e){if(!i||!e)return null;if(typeof i=="string"&&e[i])return e[i];for(let r=0;r<t.length;r++)if(this.columnsMatch(t[r],i))return t[r];return this.getAutoColumn(i)}getSourceColumnsForGroupColumn(i){let t=i.getColDef().showRowGroup;if(!t)return null;if(t===!0)return this.rowGroupColumns.slice(0);let e=this.getPrimaryColumn(t);return e?[e]:null}getAutoColumn(i){return!this.groupAutoColumns||!W(this.groupAutoColumns)||Te(this.groupAutoColumns)?null:this.groupAutoColumns.find(t=>this.columnsMatch(t,i))||null}columnsMatch(i,t){let e=i===t,r=i.getColDef()===t,o=i.getColId()==t;return e||r||o}getDisplayNameForColumn(i,t,e=!1){if(!i)return null;let r=this.getHeaderName(i.getColDef(),i,null,null,t);return e?this.wrapHeaderNameWithAggFunc(i,r):r}getDisplayNameForProvidedColumnGroup(i,t,e){let r=t?t.getColGroupDef():null;return r?this.getHeaderName(r,null,i,t,e):null}getDisplayNameForColumnGroup(i,t){return this.getDisplayNameForProvidedColumnGroup(i,i.getProvidedColumnGroup(),t)}getHeaderName(i,t,e,r,o){let n=i.headerValueGetter;if(n){let s=this.gos.addGridCommonParams({colDef:i,column:t,columnGroup:e,providedColumnGroup:r,location:o});return typeof n=="function"?n(s):typeof n=="string"?this.expressionService.evaluate(n,s):(console.warn("AG Grid: headerValueGetter must be a function or a string"),"")}else{if(i.headerName!=null)return i.headerName;if(i.field)return ub(i.field)}return""}wrapHeaderNameWithAggFunc(i,t){if(this.gos.get("suppressAggFuncInHeader"))return t;let e=i.getColDef().pivotValueColumn,r=W(e),o=null,n;if(r){let s=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&this.valueColumns.length===1,a=i.getColDef().pivotTotalColumnIds!==void 0;if(s&&!a)return t;o=e?e.getAggFunc():null,n=!0}else{let s=i.isValueActive(),a=this.pivotMode||!this.isRowGroupEmpty();s&&a?(o=i.getAggFunc(),n=!0):n=!1}if(n){let s=typeof o=="string"?o:"func";return`${this.localeService.getLocaleTextFunc()(s,s)}(${t})`}return t}getColumnGroup(i,t){if(!i)return null;if(i instanceof wi)return i;let e=this.getAllDisplayedTrees(),r=typeof t=="number",o=null;return Ms(e,!1,n=>{if(n instanceof wi){let s=n,a;r?a=i===s.getGroupId()&&t===s.getPartId():a=i===s.getGroupId(),a&&(o=s)}}),o}isReady(){return this.ready}extractValueColumns(i,t){this.valueColumns=this.extractColumns(t,this.valueColumns,(e,r)=>e.setValueActive(r,i),()=>{},()=>{},e=>{let r=e.aggFunc;if(r===null||r==="")return null;if(r!==void 0)return!!r},e=>e.initialAggFunc!=null&&e.initialAggFunc!=""),this.valueColumns.forEach(e=>{let r=e.getColDef();r.aggFunc!=null&&r.aggFunc!=""?e.setAggFunc(r.aggFunc):e.getAggFunc()||e.setAggFunc(r.initialAggFunc)})}extractRowGroupColumns(i,t){this.rowGroupColumns=this.extractColumns(t,this.rowGroupColumns,(e,r)=>e.setRowGroupActive(r,i),e=>e.rowGroupIndex,e=>e.initialRowGroupIndex,e=>e.rowGroup,e=>e.initialRowGroup)}extractColumns(i=[],t=[],e,r,o,n,s){let a=[],l=[];(this.primaryColumns||[]).forEach(c=>{let h=i.indexOf(c)<0,p=c.getColDef(),f=gh(n(p)),C=gh(s(p)),b=rs(r(p)),x=rs(o(p)),S;f!==void 0?S=f:b!==void 0?b===null?S=!1:S=b>=0:h?C!==void 0?S=C:x!==void 0?S=x!=null&&x>=0:S=!1:S=t.indexOf(c)>=0,S&&((h?b!=null||x!=null:b!=null)?a.push(c):l.push(c))});let d=c=>{let h=r(c.getColDef()),p=o(c.getColDef());return h??p};a.sort((c,h)=>{let p=d(c),f=d(h);return p===f?0:p<f?-1:1});let u=[].concat(a);return t.forEach(c=>{l.indexOf(c)>=0&&u.push(c)}),l.forEach(c=>{u.indexOf(c)<0&&u.push(c)}),t.forEach(c=>{u.indexOf(c)<0&&e(c,!1)}),u.forEach(c=>{t.indexOf(c)<0&&e(c,!0)}),u}extractPivotColumns(i,t){this.pivotColumns=this.extractColumns(t,this.pivotColumns,(e,r)=>e.setPivotActive(r,i),e=>e.pivotIndex,e=>e.initialPivotIndex,e=>e.pivot,e=>e.initialPivot)}resetColumnGroupState(i){if(!this.primaryColumnTree)return;let t=[];In(null,this.primaryColumnTree,e=>{if(e instanceof ei){let r=e.getColGroupDef(),o={groupId:e.getGroupId(),open:r?r.openByDefault:void 0};t.push(o)}}),this.setColumnGroupState(t,i)}getColumnGroupState(){let i=[];return In(null,this.gridBalancedTree,t=>{t instanceof ei&&i.push({groupId:t.getGroupId(),open:t.isExpanded()})}),i}setColumnGroupState(i,t){if(!this.gridBalancedTree)return;this.columnAnimationService.start();let e=[];if(i.forEach(r=>{let o=r.groupId,n=r.open,s=this.getProvidedColumnGroup(o);s&&s.isExpanded()!==n&&(this.logger.log("columnGroupOpened("+s.getGroupId()+","+n+")"),s.setExpanded(n),e.push(s))}),this.updateGroupsAndDisplayedColumns(t),this.setFirstRightAndLastLeftPinned(t),e.length){let r={type:m.EVENT_COLUMN_GROUP_OPENED,columnGroup:ei.length===1?e[0]:void 0,columnGroups:e};this.eventService.dispatchEvent(r)}this.columnAnimationService.finish()}setColumnGroupOpened(i,t,e){let r;i instanceof ei?r=i.getId():r=i||"",this.setColumnGroupState([{groupId:r,open:t}],e)}getProvidedColumnGroup(i){typeof i!="string"&&console.error("AG Grid: group key must be a string");let t=null;return In(null,this.gridBalancedTree,e=>{e instanceof ei&&e.getId()===i&&(t=e)}),t}calculateColumnsForDisplay(){let i;return this.pivotMode&&Te(this.secondaryColumns)?i=this.gridColumns.filter(t=>{let e=this.groupAutoColumns&&kr(this.groupAutoColumns,t),r=this.valueColumns&&kr(this.valueColumns,t);return e||r}):i=this.gridColumns.filter(t=>this.groupAutoColumns&&kr(this.groupAutoColumns,t)||t.isVisible()),i}checkColSpanActiveInCols(i){let t=!1;return i.forEach(e=>{W(e.getColDef().colSpan)&&(t=!0)}),t}calculateColumnsForGroupDisplay(){this.groupDisplayColumns=[],this.groupDisplayColumnsMap={};let i=t=>{let e=t.getColDef(),r=e.showRowGroup;e&&W(r)&&(this.groupDisplayColumns.push(t),typeof r=="string"?this.groupDisplayColumnsMap[r]=t:r===!0&&this.getRowGroupColumns().forEach(o=>{this.groupDisplayColumnsMap[o.getId()]=t}))};this.gridColumns.forEach(i)}getGroupDisplayColumns(){return this.groupDisplayColumns}getGroupDisplayColumnForGroup(i){return this.groupDisplayColumnsMap[i]}updateDisplayedColumns(i){let t=this.calculateColumnsForDisplay();this.buildDisplayedTrees(t),this.updateGroupsAndDisplayedColumns(i),this.setFirstRightAndLastLeftPinned(i)}isSecondaryColumnsPresent(){return W(this.secondaryColumns)}setSecondaryColumns(i,t){if(!this.gridColumns)return;let e=i;if(!(!e&&Te(this.secondaryColumns))){if(e){this.processSecondaryColumnDefinitions(i);let r=this.columnFactory.createColumnTree(i,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0,t);this.destroyOldColumns(this.secondaryBalancedTree,r.columnTree),this.secondaryBalancedTree=r.columnTree,this.secondaryHeaderRowCount=r.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach(o=>this.secondaryColumnsMap[o.getId()]=o),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(t)}}processSecondaryColumnDefinitions(i){let t=this.gos.get("processPivotResultColDef"),e=this.gos.get("processPivotResultColGroupDef");if(!t&&!e)return;let r=o=>{o.forEach(n=>{if(W(n.children)){let a=n;e&&e(a),r(a.children)}else t&&t(n)})};i&&r(i)}updateGridColumns(){let i=this.gridBalancedTree;if(this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns,this.createGroupAutoColumnsIfNeeded()){let r=is(this.groupAutoColumns.map(o=>[o,!0]));this.lastPrimaryOrder&&(this.lastPrimaryOrder=this.lastPrimaryOrder.filter(o=>!r.has(o)),this.lastPrimaryOrder=[...this.groupAutoColumns,...this.lastPrimaryOrder]),this.lastSecondaryOrder&&(this.lastSecondaryOrder=this.lastSecondaryOrder.filter(o=>!r.has(o)),this.lastSecondaryOrder=[...this.groupAutoColumns,...this.lastSecondaryOrder])}let e;if(this.secondaryColumns&&this.secondaryBalancedTree){let r=this.secondaryColumns.some(o=>this.gridColumnsMap[o.getColId()]!==void 0);this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,r&&(e=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,e=this.lastPrimaryOrder);if(this.addAutoGroupToGridColumns(),this.orderGridColsLike(e),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.calculateColumnsForGroupDisplay(),this.refreshQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(r=>this.gridColumnsMap[r.getId()]=r),this.setAutoHeightActive(),!cn(i,this.gridBalancedTree)){let r={type:m.EVENT_GRID_COLUMNS_CHANGED};this.eventService.dispatchEvent(r)}}setAutoHeightActive(){this.autoHeightActive=this.gridColumns.filter(i=>i.isAutoHeight()).length>0,this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,this.gos.isRowModelType("clientSide")||this.gos.isRowModelType("serverSide")||Ce("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}orderGridColsLike(i){if(Te(i))return;let t=is(i.map((l,d)=>[l,d])),e=!0;if(this.gridColumns.forEach(l=>{t.has(l)&&(e=!1)}),e)return;let r=is(this.gridColumns.map(l=>[l,!0])),o=i.filter(l=>r.has(l)),n=is(o.map(l=>[l,!0])),s=this.gridColumns.filter(l=>!n.has(l)),a=o.slice();s.forEach(l=>{let d=l.getOriginalParent();if(!d){a.push(l);return}let u=[];for(;!u.length&&d;)d.getLeafColumns().forEach(f=>{let C=a.indexOf(f)>=0,b=u.indexOf(f)<0;C&&b&&u.push(f)}),d=d.getOriginalParent();if(!u.length){a.push(l);return}let c=u.map(p=>a.indexOf(p)),h=Math.max(...c);Pd(a,l,h+1)}),this.gridColumns=a}isPrimaryColumnGroupsPresent(){return this.primaryHeaderRowCount>1}refreshQuickFilterColumns(){var i;let t=(i=this.isPivotMode()&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?this.secondaryColumns:this.primaryColumns)!=null?i:[];this.groupAutoColumns&&(t=t.concat(this.groupAutoColumns)),this.columnsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?t:t.filter(e=>e.isVisible()||e.isRowGroupActive())}placeLockedColumns(i){let t=[],e=[],r=[];return i.forEach(o=>{let n=o.getColDef().lockPosition;n==="right"?r.push(o):n==="left"||n===!0?t.push(o):e.push(o)}),[...t,...e,...r]}addAutoGroupToGridColumns(){if(Te(this.groupAutoColumns)){this.destroyOldColumns(this.groupAutoColsBalancedTree),this.groupAutoColsBalancedTree=null;return}this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;let i=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.destroyOldColumns(this.groupAutoColsBalancedTree,i),this.groupAutoColsBalancedTree=i,this.gridBalancedTree=i.concat(this.gridBalancedTree)}clearDisplayedAndViewportColumns(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.ariaOrderColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""}updateGroupsAndDisplayedColumns(i){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(i),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths();let t={type:m.EVENT_DISPLAYED_COLUMNS_CHANGED};this.eventService.dispatchEvent(t)}deriveDisplayedColumns(i){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinColumnsAriaOrder(),this.joinDisplayedColumns(),this.setLeftValues(i),this.displayedAutoHeightCols=this.displayedColumns.filter(t=>t.isAutoHeight())}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}joinColumnsAriaOrder(){let i=this.getAllGridColumns(),t=[],e=[],r=[];for(let o of i){let n=o.getPinned();n?n===!0||n==="left"?t.push(o):r.push(o):e.push(o)}this.ariaOrderColumns=t.concat(e).concat(r)}joinDisplayedColumns(){this.gos.get("enableRtl")?this.displayedColumns=this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumns=this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)}setLeftValues(i){this.setLeftValuesOfColumns(i),this.setLeftValuesOfGroups()}setLeftValuesOfColumns(i){if(!this.primaryColumns)return;let t=this.getPrimaryAndSecondaryAndAutoColumns().slice(0),e=this.gos.get("enableRtl");[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(r=>{if(e){let o=this.getWidthOfColsInList(r);r.forEach(n=>{o-=n.getActualWidth(),n.setLeft(o,i)})}else{let o=0;r.forEach(n=>{n.setLeft(o,i),o+=n.getActualWidth()})}eb(t,r)}),t.forEach(r=>{r.setLeft(null,i)})}setLeftValuesOfGroups(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(i=>{i.forEach(t=>{t instanceof wi&&t.checkLeft()})})}derivedDisplayedColumnsFromDisplayedTree(i,t){t.length=0,Ms(i,!0,e=>{e instanceof yt&&t.push(e)})}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}extractViewportColumns(){this.isColumnVirtualisationSuppressed()?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)}getVirtualHeaderGroupRow(i,t){let e;switch(i){case"left":e=this.viewportRowLeft[t];break;case"right":e=this.viewportRowRight[t];break;default:e=this.viewportRowCenter[t];break}return Te(e)&&(e=[]),e}calculateHeaderRows(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};let i={};this.headerViewportColumns.forEach(e=>i[e.getId()]=!0);let t=(e,r,o)=>{let n=!1;for(let s=0;s<e.length;s++){let a=e[s],l=!1;if(a instanceof yt)l=i[a.getId()]===!0;else{let u=a.getDisplayedChildren();u&&(l=t(u,r,o+1))}l&&(n=!0,r[o]||(r[o]=[]),r[o].push(a))}return n};t(this.displayedTreeLeft,this.viewportRowLeft,0),t(this.displayedTreeRight,this.viewportRowRight,0),t(this.displayedTreeCentre,this.viewportRowCenter,0)}extractViewport(){let i=r=>`${r.getId()}-${r.getPinned()||"normal"}`;this.extractViewportColumns();let t=this.viewportColumns.map(i).join("#"),e=this.viewportColumnsHash!==t;return e&&(this.viewportColumnsHash=t,this.calculateHeaderRows()),e}refreshFlexedColumns(i={}){var t;let e=i.source?i.source:"flex";if(i.viewportWidth!=null&&(this.flexViewportWidth=i.viewportWidth),!this.flexViewportWidth)return[];let r=-1;if(i.resizingCols){let h=new Set(i.resizingCols),p=this.displayedColumnsCenter;for(let f=p.length-1;f>=0;f--)if(h.has(p[f])){r=f;break}}let o=0,n=[],s=0,a=0;for(let h=0;h<this.displayedColumnsCenter.length;h++)this.displayedColumnsCenter[h].getFlex()&&h>r?(n.push(this.displayedColumnsCenter[h]),a+=this.displayedColumnsCenter[h].getFlex(),s+=(t=this.displayedColumnsCenter[h].getMinWidth())!=null?t:0):o+=this.displayedColumnsCenter[h].getActualWidth();if(!n.length)return[];let l=[];o+s>this.flexViewportWidth&&(n.forEach(h=>{var p;return h.setActualWidth((p=h.getMinWidth())!=null?p:0,e)}),l=n,n=[]);let d=[],u;e:for(;;){u=this.flexViewportWidth-o;let h=u/a;for(let p=0;p<n.length;p++){let f=n[p],C=h*f.getFlex(),b=0,x=f.getMinWidth(),S=f.getMaxWidth();if(W(x)&&C<x?b=x:W(S)&&C>S&&(b=S),b){f.setActualWidth(b,e),Df(n,f),a-=f.getFlex(),l.push(f),o+=f.getActualWidth();continue e}d[p]=Math.round(C)}break}let c=u;return n.forEach((h,p)=>{h.setActualWidth(Math.min(d[p],c),e),l.push(h),c-=d[p]}),i.skipSetLeft||this.setLeftValues(e),i.updateBodyWidths&&this.updateBodyWidths(),i.fireResizedEvent&&this.dispatchColumnResizedEvent(l,!0,e,n),n}sizeColumnsToFit(i,t="sizeColumnsToFit",e,r){var o,n,s,a,l;if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.sizeColumnsToFit(i,t,e,r));return}let d={};r&&((o=r?.columnLimits)==null||o.forEach(x=>{var S=x,{key:R}=S,I=Xx(S,["key"]);d[typeof R=="string"?R:R.getColId()]=I}));let u=this.getAllDisplayedColumns(),c=i===this.getWidthOfColsInList(u);if(i<=0||!u.length||c)return;let h=[],p=[];u.forEach(x=>{x.getColDef().suppressSizeToFit===!0?p.push(x):h.push(x)});let f=h.slice(0),C=!1,b=x=>{br(h,x),p.push(x)};for(h.forEach(x=>{var S,R;x.resetActualWidth(t);let I=d?.[x.getId()],F=(S=I?.minWidth)!=null?S:r?.defaultMinWidth,L=(R=I?.maxWidth)!=null?R:r?.defaultMaxWidth,V=x.getActualWidth();typeof F=="number"&&V<F?x.setActualWidth(F,t,!0):typeof L=="number"&&V>L&&x.setActualWidth(L,t,!0)});!C;){C=!0;let x=i-this.getWidthOfColsInList(p);if(x<=0)h.forEach(S=>{var R,I;let F=(I=(R=d?.[S.getId()])==null?void 0:R.minWidth)!=null?I:r?.defaultMinWidth;if(typeof F=="number"){S.setActualWidth(F,t,!0);return}S.setMinimum(t)});else{let S=x/this.getWidthOfColsInList(h),R=x;for(let I=h.length-1;I>=0;I--){let F=h[I],L=d?.[F.getId()],V=(n=L?.minWidth)!=null?n:r?.defaultMinWidth,k=(s=L?.maxWidth)!=null?s:r?.defaultMaxWidth,G=(a=F.getMinWidth())!=null?a:0,ge=(l=F.getMaxWidth())!=null?l:Number.MAX_VALUE,le=typeof V=="number"&&V>G?V:F.getMinWidth(),Je=typeof k=="number"&&k<ge?k:F.getMaxWidth(),Ne=Math.round(F.getActualWidth()*S);W(le)&&Ne<le?(Ne=le,b(F),C=!1):W(Je)&&Ne>Je?(Ne=Je,b(F),C=!1):I===0&&(Ne=R),F.setActualWidth(Ne,t,!0),R-=Ne}}}f.forEach(x=>{x.fireColumnWidthChangedEvent(t)}),this.setLeftValues(t),this.updateBodyWidths(),!e&&this.dispatchColumnResizedEvent(f,!0,t)}buildDisplayedTrees(i){let t=[],e=[],r=[];i.forEach(n=>{switch(n.getPinned()){case"left":t.push(n);break;case"right":e.push(n);break;default:r.push(n);break}});let o=new lb;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(t,o,"left",this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(e,o,"right",this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(r,o,null,this.displayedTreeCentre),this.updateDisplayedMap()}updateDisplayedMap(){this.displayedColumnsAndGroupsMap={};let i=t=>{this.displayedColumnsAndGroupsMap[t.getUniqueId()]=t};Ms(this.displayedTreeCentre,!1,i),Ms(this.displayedTreeLeft,!1,i),Ms(this.displayedTreeRight,!1,i)}isDisplayed(i){return this.displayedColumnsAndGroupsMap[i.getUniqueId()]===i}updateOpenClosedVisibilityInColumnGroups(){let i=this.getAllDisplayedTrees();Ms(i,!1,t=>{t instanceof wi&&t.calculateDisplayedColumns()})}getGroupAutoColumns(){return this.groupAutoColumns}createGroupAutoColumnsIfNeeded(){let i=this.forceRecreateAutoGroups;if(this.forceRecreateAutoGroups=!1,!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;let t=this.gos.isGroupUseEntireRow(this.pivotMode),e=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isGroupSuppressAutoColumn();if((this.rowGroupColumns.length>0||this.gos.get("treeData"))&&!e&&!t){let n=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns);if(!this.autoColsEqual(n,this.groupAutoColumns)||i)return this.groupAutoColumns=n,!0}else this.groupAutoColumns=null;return!1}isGroupSuppressAutoColumn(){return this.gos.get("groupDisplayType")==="custom"?!0:this.gos.get("treeDataDisplayType")==="custom"}autoColsEqual(i,t){return cn(i,t,(e,r)=>e.getColId()===r.getColId())}getWidthOfColsInList(i){return i.reduce((t,e)=>t+e.getActualWidth(),0)}getFirstDisplayedColumn(){let i=this.gos.get("enableRtl"),t=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];i&&t.reverse();for(let e=0;e<t.length;e++){let r=this[t[e]]();if(r.length)return i?rt(r):r[0]}return null}setColumnHeaderHeight(i,t){if(i.setAutoHeaderHeight(t)){let r={type:m.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:i,columns:[i],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(r)}}getColumnGroupHeaderRowHeight(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()}getColumnHeaderRowHeight(){let i=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),t=this.getAllDisplayedColumns().filter(e=>e.isAutoHeaderHeight()).map(e=>e.getAutoHeaderHeight()||0);return Math.max(i,...t)}getHeaderHeight(){var i;return(i=this.gos.get("headerHeight"))!=null?i:this.environment.getFromTheme(25,"headerHeight")}getFloatingFiltersHeight(){var i;return(i=this.gos.get("floatingFiltersHeight"))!=null?i:this.getHeaderHeight()}getGroupHeaderHeight(){var i;return(i=this.gos.get("groupHeaderHeight"))!=null?i:this.getHeaderHeight()}getPivotHeaderHeight(){var i;return(i=this.gos.get("pivotHeaderHeight"))!=null?i:this.getHeaderHeight()}getPivotGroupHeaderHeight(){var i;return(i=this.gos.get("pivotGroupHeaderHeight"))!=null?i:this.getGroupHeaderHeight()}queueResizeOperations(){this.shouldQueueResizeOperations=!0}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(i=>i()),this.resizeOperationQueue=[]}resetColumnDefIntoColumn(i,t){let e=i.getUserProvidedColDef();if(!e)return!1;let r=this.columnFactory.addColumnDefaultAndTypes(e,i.getColId());return i.setColDef(r,e,t),!0}isColumnGroupingLocked(i){let t=this.gos.get("groupLockGroupColumns");if(!i.isRowGroupActive()||t===0)return!1;if(t===-1)return!0;let e=this.rowGroupColumns.findIndex(r=>r.getColId()===i.getColId());return t>e}generateColumnStateForRowGroupAndPivotIndexes(i,t){let e={},r=(o,n,s,a,l,d)=>{if(!n.length||!this.primaryColumns)return[];let u=Object.keys(o),c=new Set(u),h=new Set(u),p=new Set(n.map(F=>{let L=F.getColId();return h.delete(L),L}).concat(u)),f=[],C={},b=0;for(let F=0;F<this.primaryColumns.length;F++){let L=this.primaryColumns[F].getColId();p.has(L)&&(f.push(L),C[L]=b++)}let x=1e3,S=!1,R=0,I=F=>{let L=C[F];for(let V=R;V<L;V++){let k=f[V];h.has(k)&&(o[k][l]=x++,h.delete(k))}R=L};n.forEach(F=>{let L=F.getColId();if(c.has(L))I(L),o[L][l]=x++;else{let V=F.getColDef();(V[l]===null||V[l]===void 0&&V[d]==null)&&(S||(V[s]||V[s]===void 0&&V[a]?I(L):(h.forEach(ge=>{o[ge][l]=x+C[ge]}),x+=f.length,S=!0)),e[L]||(e[L]={colId:L}),e[L][l]=x++)}})};return r(i,this.rowGroupColumns,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),r(t,this.pivotColumns,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(e)}onColumnsReady(){let i=this.gos.get("autoSizeStrategy");if(!i)return;let{type:t}=i;setTimeout(()=>{if(t==="fitGridWidth"){let{columnLimits:e,defaultMinWidth:r,defaultMaxWidth:o}=i,n=e?.map(({colId:s,minWidth:a,maxWidth:l})=>({key:s,minWidth:a,maxWidth:l}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:r,defaultMaxWidth:o,columnLimits:n})}else t==="fitProvidedWidth"&&this.sizeColumnsToFit(i.width,"sizeColumnsToFit")})}onFirstDataRendered(){let i=this.gos.get("autoSizeStrategy");if(i?.type!=="fitCellContents")return;let{colIds:t,skipHeader:e}=i;setTimeout(()=>{t?this.autoSizeColumns({columns:t,skipHeader:e,source:"autosizeColumns"}):this.autoSizeAllColumns("autosizeColumns",e)})}};g([w("expressionService")],Ti.prototype,"expressionService",2);g([w("columnFactory")],Ti.prototype,"columnFactory",2);g([w("displayedGroupCreator")],Ti.prototype,"displayedGroupCreator",2);g([w("ctrlsService")],Ti.prototype,"ctrlsService",2);g([w("autoWidthCalculator")],Ti.prototype,"autoWidthCalculator",2);g([w("columnAnimationService")],Ti.prototype,"columnAnimationService",2);g([w("autoGroupColService")],Ti.prototype,"autoGroupColService",2);g([w("valueCache")],Ti.prototype,"valueCache",2);g([w("animationFrameService")],Ti.prototype,"animationFrameService",2);g([w("sortController")],Ti.prototype,"sortController",2);g([w("columnDefFactory")],Ti.prototype,"columnDefFactory",2);g([gt("aggFuncService")],Ti.prototype,"aggFuncService",2);g([U],Ti.prototype,"init",1);g([ir],Ti.prototype,"destroyColumns",1);g([xo(0,Zr("loggerFactory"))],Ti.prototype,"setBeans",1);Ti=g([te("columnModel")],Ti);function Qa(i){return i==="gridOptionsUpdated"?"gridOptionsChanged":i}function Ms(i,t,e){if(i)for(let r=0;r<i.length;r++){let o=i[r];if(o instanceof wi){let n=t?o.getDisplayedChildren():o.getChildren();Ms(n,t,e)}e(o)}}var ef=class extends j{createDisplayedGroups(i,t,e,r){let o=this.mapOldGroupsById(r),n=[],s=i;for(;s.length;){let a=s;s=[];let l=0,d=u=>{let c=l;l=u;let h=a[c],f=(h instanceof wi?h.getProvidedColumnGroup():h).getOriginalParent();if(f==null){for(let b=c;b<u;b++)n.push(a[b]);return}let C=this.createColumnGroup(f,t,o,e);for(let b=c;b<u;b++)C.addChild(a[b]);s.push(C)};for(let u=1;u<a.length;u++){let c=a[u],p=(c instanceof wi?c.getProvidedColumnGroup():c).getOriginalParent(),f=a[l],b=(f instanceof wi?f.getProvidedColumnGroup():f).getOriginalParent();p!==b&&d(u)}l<a.length&&d(a.length)}return this.setupParentsIntoColumns(n,null),n}createColumnGroup(i,t,e,r){let o=i.getGroupId(),n=t.getInstanceIdForKey(o),s=wi.createUniqueId(o,n),a=e[s];return a&&a.getProvidedColumnGroup()!==i&&(a=null),W(a)?a.reset():(a=new wi(i,o,n,r),this.context.createBean(a)),a}mapOldGroupsById(i){let t={},e=r=>{r.forEach(o=>{if(o instanceof wi){let n=o;t[o.getUniqueId()]=n,e(n.getChildren())}})};return i&&e(i),t}setupParentsIntoColumns(i,t){i.forEach(e=>{if(e.setParent(t),e instanceof wi){let r=e;this.setupParentsIntoColumns(r.getChildren(),r)}})}};ef=g([te("displayedGroupCreator")],ef);var vE={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,excludeHiddenColumnsFromQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,enableChartToolPanelsButton:!0,suppressChartToolPanelsButton:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressParentsInRowNodes:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,suppressAggAtRootLevel:!0,removePivotHeaderRowWhenSingleValueColumn:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,functionsPassive:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0},mi=class{};mi.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"];mi.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy"];mi.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];mi.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];mi.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","excludeHiddenColumnsFromQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterMovesDown","enterMovesDownAfterEdit","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","enableChartToolPanelsButton","suppressChartToolPanelsButton","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilterAllLevels","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval"];mi.OTHER_PROPERTIES=["suppressStickyTotalRow"];mi.FUNCTIONAL_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher"];mi.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"];mi.FUNCTION_PROPERTIES=[...mi.FUNCTIONAL_PROPERTIES,...mi.CALLBACK_PROPERTIES];mi.ALL_PROPERTIES=[...mi.ARRAY_PROPERTIES,...mi.OBJECT_PROPERTIES,...mi.STRING_PROPERTIES,...mi.NUMBER_PROPERTIES,...mi.FUNCTION_PROPERTIES,...mi.BOOLEAN_PROPERTIES,...mi.OTHER_PROPERTIES];var Id=mi,Ni=class lh{static getCallbackForEvent(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substring(1)}static getGridOptionKeys(){return this.ALL_PROPERTIES_AND_CALLBACKS}static combineAttributesAndGridOptions(t,e){typeof t!="object"&&(t={});let r=he({},t);return lh.getGridOptionKeys().forEach(n=>{let s=e[n];typeof s<"u"&&s!==lh.VUE_OMITTED_PROPERTY&&(r[n]=s)}),r}static processOnChange(t,e,r){if(!t)return;let o={},n=!1;if(Object.keys(t).filter(a=>lh.ALL_PROPERTIES_AND_CALLBACKS_SET.has(a)).forEach(a=>{o[a]=t[a],n=!0}),!n)return;e.__internalUpdateGridOptions(o,!0);let s={type:m.EVENT_COMPONENT_STATE_CHANGED};Wi(o,(a,l)=>{s[a]=l}),e.dispatchEvent(s)}};Ni.EVENTS=As(m);Ni.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY";Ni.EXCLUDED_INTERNAL_EVENTS=[m.EVENT_SCROLLBAR_WIDTH_CHANGED,m.EVENT_CHECKBOX_CHANGED,m.EVENT_HEIGHT_SCALE_CHANGED,m.EVENT_BODY_HEIGHT_CHANGED,m.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,m.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,m.EVENT_SCROLL_VISIBILITY_CHANGED,m.EVENT_COLUMN_HOVER_CHANGED,m.EVENT_FLASH_CELLS,m.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,m.EVENT_DISPLAYED_ROWS_CHANGED,m.EVENT_LEFT_PINNED_WIDTH_CHANGED,m.EVENT_RIGHT_PINNED_WIDTH_CHANGED,m.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,m.EVENT_STORE_UPDATED,m.EVENT_COLUMN_PANEL_ITEM_DRAG_START,m.EVENT_COLUMN_PANEL_ITEM_DRAG_END,m.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,m.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,m.EVENT_FULL_WIDTH_ROW_FOCUSED,m.EVENT_HEADER_HEIGHT_CHANGED,m.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,m.EVENT_CELL_FOCUS_CLEARED,m.EVENT_GRID_STYLES_CHANGED,m.EVENT_FILTER_DESTROYED,m.EVENT_ROW_DATA_UPDATE_STARTED,m.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,m.EVENT_DATA_TYPES_INFERRED,m.EVENT_FIELD_VALUE_CHANGED,m.EVENT_FIELD_PICKER_VALUE_SELECTED,m.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,m.EVENT_SUPPRESS_MENU_HIDE_CHANGED,m.EVENT_SUPPRESS_FIELD_DOT_NOTATION,m.EVENT_ROW_COUNT_READY,m.EVENT_SIDE_BAR_UPDATED];Ni.PUBLIC_EVENTS=Ni.EVENTS.filter(i=>!kr(Ni.EXCLUDED_INTERNAL_EVENTS,i));Ni.EVENT_CALLBACKS=Ni.EVENTS.map(i=>Ni.getCallbackForEvent(i));Ni.BOOLEAN_PROPERTIES=Id.BOOLEAN_PROPERTIES;Ni.ALL_PROPERTIES=Id.ALL_PROPERTIES;Ni.ALL_PROPERTIES_AND_CALLBACKS=[...Ni.ALL_PROPERTIES,...Ni.EVENT_CALLBACKS];Ni.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(Ni.ALL_PROPERTIES_AND_CALLBACKS);var eu=Ni,tf=class extends j{constructor(){super(...arguments),this.componentsMappedByName={}}setupComponents(i){i&&i.forEach(t=>this.addComponent(t))}addComponent(i){let e=i.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[e]=i.componentClass}getComponentClass(i){return this.componentsMappedByName[i]}};tf=g([te("agStackComponentsRegistry")],tf);var pb={};Pi(pb,{getAriaCheckboxStateName:()=>Gh,getAriaLabel:()=>vb,getAriaLevel:()=>yE,getAriaPosInSet:()=>mb,getAriaSortState:()=>fb,removeAriaExpanded:()=>wb,removeAriaSort:()=>Tb,setAriaActiveDescendant:()=>If,setAriaAtomic:()=>yb,setAriaChecked:()=>bE,setAriaColCount:()=>xb,setAriaColIndex:()=>zf,setAriaColSpan:()=>Eb,setAriaControls:()=>Af,setAriaDescribedBy:()=>CE,setAriaDisabled:()=>Mf,setAriaExpanded:()=>zn,setAriaHidden:()=>tu,setAriaLabel:()=>Vr,setAriaLabelledBy:()=>ol,setAriaLevel:()=>bb,setAriaLive:()=>Rf,setAriaMultiSelectable:()=>Sb,setAriaPosInSet:()=>Vh,setAriaRelevant:()=>Cb,setAriaRole:()=>Bt,setAriaRowCount:()=>_b,setAriaRowIndex:()=>Ff,setAriaSelected:()=>nl,setAriaSetSize:()=>kh,setAriaSort:()=>Db});function ro(i,t,e){e==null||typeof e=="string"&&e==""?Pf(i,t):oo(i,t,e)}function oo(i,t,e){i.setAttribute(gb(t),e.toString())}function Pf(i,t){i.removeAttribute(gb(t))}function gb(i){return`aria-${i}`}function Bt(i,t){t?i.setAttribute("role",t):i.removeAttribute("role")}function fb(i){let t;return i==="asc"?t="ascending":i==="desc"?t="descending":i==="mixed"?t="other":t="none",t}function yE(i){return parseInt(i.getAttribute("aria-level"),10)}function mb(i){return parseInt(i.getAttribute("aria-posinset"),10)}function vb(i){return i.getAttribute("aria-label")}function Vr(i,t){ro(i,"label",t)}function ol(i,t){ro(i,"labelledby",t)}function CE(i,t){ro(i,"describedby",t)}function Rf(i,t){ro(i,"live",t)}function yb(i,t){ro(i,"atomic",t)}function Cb(i,t){ro(i,"relevant",t)}function bb(i,t){ro(i,"level",t)}function Mf(i,t){ro(i,"disabled",t)}function tu(i,t){ro(i,"hidden",t)}function If(i,t){ro(i,"activedescendant",t)}function zn(i,t){oo(i,"expanded",t)}function wb(i){Pf(i,"expanded")}function kh(i,t){oo(i,"setsize",t)}function Vh(i,t){oo(i,"posinset",t)}function Sb(i,t){oo(i,"multiselectable",t)}function _b(i,t){oo(i,"rowcount",t)}function Ff(i,t){oo(i,"rowindex",t)}function xb(i,t){oo(i,"colcount",t)}function zf(i,t){oo(i,"colindex",t)}function Eb(i,t){oo(i,"colspan",t)}function Db(i,t){oo(i,"sort",t)}function Tb(i){Pf(i,"sort")}function nl(i,t){ro(i,"selected",t)}function bE(i,t){oo(i,"checked",t===void 0?"mixed":t)}function Af(i,t){ro(i,"controls",t.id),ol(t,i.id)}function Gh(i,t){return t===void 0?i("ariaIndeterminate","indeterminate"):t===!0?i("ariaChecked","checked"):i("ariaUnchecked","unchecked")}var Pb={};Pi(Pb,{browserSupportsPreventScroll:()=>kf,getBodyHeight:()=>Ib,getBodyWidth:()=>Mb,getMaxDivHeight:()=>Rb,getSafariVersion:()=>Of,getScrollbarWidth:()=>Fb,getTabIndex:()=>Ch,isBrowserChrome:()=>Hh,isBrowserFirefox:()=>Lf,isBrowserSafari:()=>gn,isIOSUserAgent:()=>Ln,isInvisibleScrollbar:()=>Vf,isMacOsUserAgent:()=>Nf});var Ag,oh,Og,Lg,Ng,kg,rf,of;function gn(){return Ag===void 0&&(Ag=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),Ag}function Of(){if(oh===void 0)if(gn()){let i=navigator.userAgent.match(/version\/(\d+)/i);i&&(oh=i[1]!=null?parseFloat(i[1]):0)}else oh=0;return oh}function Hh(){if(Og===void 0){let i=window;Og=!!i.chrome&&(!!i.chrome.webstore||!!i.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return Og}function Lf(){return Lg===void 0&&(Lg=/(firefox)/i.test(navigator.userAgent)),Lg}function Nf(){return Ng===void 0&&(Ng=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),Ng}function Ln(){return kg===void 0&&(kg=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),kg}function kf(){return!gn()||Of()>=15}function Ch(i){if(!i)return null;let t=i.tabIndex,e=i.getAttribute("tabIndex");return t===-1&&(e===null||e===""&&!Lf())?null:t.toString()}function Rb(){if(!document.body)return-1;let i=1e6,t=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,e=document.createElement("div");for(document.body.appendChild(e);;){let r=i*2;if(e.style.height=r+"px",r>t||e.clientHeight!==r)break;i=r}return document.body.removeChild(e),i}function Mb(){var i,t,e;return(e=(i=document.body)==null?void 0:i.clientWidth)!=null?e:window.innerHeight||((t=document.documentElement)==null?void 0:t.clientWidth)||-1}function Ib(){var i,t,e;return(e=(i=document.body)==null?void 0:i.clientHeight)!=null?e:window.innerHeight||((t=document.documentElement)==null?void 0:t.clientHeight)||-1}function Fb(){return of==null&&zb(),of}function zb(){let i=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",i.appendChild(t);let e=t.offsetWidth-t.clientWidth;e===0&&t.clientWidth===0&&(e=null),t.parentNode&&t.parentNode.removeChild(t),e!=null&&(of=e,rf=e===0)}function Vf(){return rf==null&&zb(),rf}var Ab={};Pi(Ab,{dateToFormattedString:()=>tl,parseDateTimeFromString:()=>Sr,serialiseDate:()=>Jr});var Ob={};Pi(Ob,{cleanNumber:()=>wE,createArrayOfNumbers:()=>Lb,decToHex:()=>SE,formatNumberCommas:()=>Gf,formatNumberTwoDecimalPlacesAndCommas:()=>_E,padStartWidthZeros:()=>el,sum:()=>xE});function el(i,t){return i.toString().padStart(t,"0")}function Lb(i,t){let e=[];for(let r=i;r<=t;r++)e.push(r);return e}function wE(i){return typeof i=="string"&&(i=parseInt(i,10)),typeof i=="number"?Math.floor(i):null}function SE(i,t){let e="";for(let r=0;r<t;r++)e+=String.fromCharCode(i&255),i>>>=8;return e}function _E(i,t,e){return typeof i!="number"?"":Gf(Math.round(i*100)/100,t,e)}function Gf(i,t,e){return typeof i!="number"?"":i.toString().replace(".",e).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${t}`)}function xE(i){return i==null?null:i.reduce((t,e)=>t+e,0)}function Jr(i,t=!0,e="-"){if(!i)return null;let r=[i.getFullYear(),i.getMonth()+1,i.getDate()].map(o=>el(o,2)).join(e);return t&&(r+=" "+[i.getHours(),i.getMinutes(),i.getSeconds()].map(o=>el(o,2)).join(":")),r}var Vg=i=>{if(i>3&&i<21)return"th";switch(i%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function tl(i,t="YYYY-MM-DD"){let e=el(i.getFullYear(),4),r=["January","February","March","April","May","June","July","August","September","October","November","December"],o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n={YYYY:()=>e.slice(e.length-4,e.length),YY:()=>e.slice(e.length-2,e.length),Y:()=>`${i.getFullYear()}`,MMMM:()=>r[i.getMonth()],MMM:()=>r[i.getMonth()].slice(0,3),MM:()=>el(i.getMonth()+1,2),Mo:()=>`${i.getMonth()+1}${Vg(i.getMonth()+1)}`,M:()=>`${i.getMonth()+1}`,Do:()=>`${i.getDate()}${Vg(i.getDate())}`,DD:()=>el(i.getDate(),2),D:()=>`${i.getDate()}`,dddd:()=>o[i.getDay()],ddd:()=>o[i.getDay()].slice(0,3),dd:()=>o[i.getDay()].slice(0,2),do:()=>`${i.getDay()}${Vg(i.getDay())}`,d:()=>`${i.getDay()}`},s=new RegExp(Object.keys(n).join("|"),"g");return t.replace(s,a=>a in n?n[a]():a)}function Sr(i){if(!i)return null;let[t,e]=i.split(" ");if(!t)return null;let r=t.split("-").map(c=>parseInt(c,10));if(r.filter(c=>!isNaN(c)).length!==3)return null;let[o,n,s]=r,a=new Date(o,n-1,s);if(a.getFullYear()!==o||a.getMonth()!==n-1||a.getDate()!==s)return null;if(!e||e==="00:00:00")return a;let[l,d,u]=e.split(":").map(c=>parseInt(c,10));return l>=0&&l<24&&a.setHours(l),d>=0&&d<60&&a.setMinutes(d),u>=0&&u<60&&a.setSeconds(u),a}var Nb={};Pi(Nb,{FOCUSABLE_EXCLUDE:()=>Hf,FOCUSABLE_SELECTOR:()=>kb,addOrRemoveAttribute:()=>pn,addStylesToElement:()=>Kf,bindCellRendererToHtmlElement:()=>Xf,clearElement:()=>Zt,copyNodeList:()=>$b,ensureDomOrder:()=>Uf,formatSize:()=>Bh,getAbsoluteHeight:()=>$f,getAbsoluteWidth:()=>Fd,getElementRectWithOffset:()=>Wf,getElementSize:()=>us,getInnerHeight:()=>iu,getInnerWidth:()=>Zs,getScrollLeft:()=>Ad,insertWithDomOrder:()=>Gb,isElementChildOfClass:()=>Os,isFocusableFormField:()=>Bf,isHorizontalScrollShowing:()=>Hb,isInDOM:()=>jf,isNodeOrElement:()=>ru,isRtlNegativeScroll:()=>zd,isVerticalScrollShowing:()=>Bb,isVisible:()=>Dr,iterateNamedNodeMap:()=>Wb,loadTemplate:()=>_r,nodeListForEach:()=>Yf,radioCssClass:()=>nf,removeFromParent:()=>Eo,setDisabled:()=>sl,setDisplayed:()=>qe,setDomChildOrder:()=>qf,setElementHeight:()=>EE,setElementWidth:()=>Ld,setFixedHeight:()=>Ls,setFixedWidth:()=>eo,setScrollLeft:()=>Od,setVisible:()=>Vb});var nh;function nf(i,t,e){let r=i.parentElement,o=r&&r.firstChild;for(;o;)t&&o.classList.toggle(t,o===i),e&&o.classList.toggle(e,o!==i),o=o.nextSibling}var kb="[tabindex], input, select, button, textarea, [href]",Hf="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function Bf(i){let t=Element.prototype.matches||Element.prototype.msMatchesSelector,r=t.call(i,"input, select, button, textarea"),o=t.call(i,Hf),n=Dr(i);return r&&!o&&n}function qe(i,t,e={}){let{skipAriaHidden:r}=e;i.classList.toggle("ag-hidden",!t),r||tu(i,!t)}function Vb(i,t,e={}){let{skipAriaHidden:r}=e;i.classList.toggle("ag-invisible",!t),r||tu(i,!t)}function sl(i,t){let e="disabled",r=t?o=>o.setAttribute(e,""):o=>o.removeAttribute(e);r(i),Yf(i.querySelectorAll("input"),o=>r(o))}function Os(i,t,e){let r=0;for(;i;){if(i.classList.contains(t))return!0;if(i=i.parentElement,typeof e=="number"){if(++r>e)break}else if(i===e)break}return!1}function us(i){let{height:t,width:e,borderTopWidth:r,borderRightWidth:o,borderBottomWidth:n,borderLeftWidth:s,paddingTop:a,paddingRight:l,paddingBottom:d,paddingLeft:u,marginTop:c,marginRight:h,marginBottom:p,marginLeft:f,boxSizing:C}=window.getComputedStyle(i);return{height:parseFloat(t||"0"),width:parseFloat(e||"0"),borderTopWidth:parseFloat(r||"0"),borderRightWidth:parseFloat(o||"0"),borderBottomWidth:parseFloat(n||"0"),borderLeftWidth:parseFloat(s||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(d||"0"),paddingLeft:parseFloat(u||"0"),marginTop:parseFloat(c||"0"),marginRight:parseFloat(h||"0"),marginBottom:parseFloat(p||"0"),marginLeft:parseFloat(f||"0"),boxSizing:C}}function iu(i){let t=us(i);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function Zs(i){let t=us(i);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function $f(i){let t=us(i),e=t.marginBottom+t.marginTop;return Math.ceil(i.offsetHeight+e)}function Fd(i){let t=us(i),e=t.marginLeft+t.marginRight;return Math.ceil(i.offsetWidth+e)}function Wf(i){let t=i.getBoundingClientRect(),{borderTopWidth:e,borderLeftWidth:r,borderRightWidth:o,borderBottomWidth:n}=us(i);return{top:t.top+(e||0),left:t.left+(r||0),right:t.right+(o||0),bottom:t.bottom+(n||0)}}function zd(){if(typeof nh=="boolean")return nh;let i=document.createElement("div");return i.style.direction="rtl",i.style.width="1px",i.style.height="1px",i.style.position="fixed",i.style.top="0px",i.style.overflow="hidden",i.dir="rtl",i.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(i),i.scrollLeft=1,nh=Math.floor(i.scrollLeft)===0,document.body.removeChild(i),nh}function Ad(i,t){let e=i.scrollLeft;return t&&(e=Math.abs(e),Hh()&&!zd()&&(e=i.scrollWidth-i.clientWidth-e)),e}function Od(i,t,e){e&&(zd()?t*=-1:(gn()||Hh())&&(t=i.scrollWidth-i.clientWidth-t)),i.scrollLeft=t}function Zt(i){for(;i&&i.firstChild;)i.removeChild(i.firstChild)}function Eo(i){i&&i.parentNode&&i.parentNode.removeChild(i)}function jf(i){return!!i.offsetParent}function Dr(i){let t=i;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!jf(i)||window.getComputedStyle(i).visibility!=="visible")}function _r(i){let t=document.createElement("div");return t.innerHTML=(i||"").trim(),t.firstChild}function Uf(i,t,e){e&&e.nextSibling===t||(e?e.nextSibling?i.insertBefore(t,e.nextSibling):i.appendChild(t):i.firstChild&&i.firstChild!==t&&i.insertAdjacentElement("afterbegin",t))}function qf(i,t){for(let e=0;e<t.length;e++){let r=t[e],o=i.children[e];o!==r&&i.insertBefore(r,o)}}function Gb(i,t,e){e?e.insertAdjacentElement("afterend",t):i.firstChild?i.insertAdjacentElement("afterbegin",t):i.appendChild(t)}function Kf(i,t){if(t)for(let[e,r]of Object.entries(t)){if(!e||!e.length||r==null)continue;let o=cb(e),n=r.toString(),s=n.replace(/\s*!important/g,""),a=s.length!=n.length?"important":void 0;i.style.setProperty(o,s,a)}}function Hb(i){return i.clientWidth<i.scrollWidth}function Bb(i){return i.clientHeight<i.scrollHeight}function Ld(i,t){t==="flex"?(i.style.removeProperty("width"),i.style.removeProperty("minWidth"),i.style.removeProperty("maxWidth"),i.style.flex="1 1 auto"):eo(i,t)}function eo(i,t){t=Bh(t),i.style.width=t.toString(),i.style.maxWidth=t.toString(),i.style.minWidth=t.toString()}function EE(i,t){t==="flex"?(i.style.removeProperty("height"),i.style.removeProperty("minHeight"),i.style.removeProperty("maxHeight"),i.style.flex="1 1 auto"):Ls(i,t)}function Ls(i,t){t=Bh(t),i.style.height=t.toString(),i.style.maxHeight=t.toString(),i.style.minHeight=t.toString()}function Bh(i){return typeof i=="number"?`${i}px`:i}function ru(i){return i instanceof Node||i instanceof HTMLElement}function $b(i){if(i==null)return[];let t=[];return Yf(i,e=>t.push(e)),t}function Wb(i,t){if(i)for(let e=0;e<i.length;e++){let r=i[e];t(r.name,r.value)}}function pn(i,t,e){e==null?i.removeAttribute(t):i.setAttribute(t,e.toString())}function Yf(i,t){if(i!=null)for(let e=0;e<i.length;e++)t(i[e])}function Xf(i,t){i.then(e=>{let r=e.getGui();r!=null&&(typeof r=="object"?t.appendChild(r):t.innerHTML=r)})}var jb={};Pi(jb,{fuzzyCheckStrings:()=>Ub,fuzzySuggestions:()=>ou});function Ub(i,t,e){let r={},o=i.filter(n=>!t.some(s=>s===n));return o.length>0&&o.forEach(n=>r[n]=ou(n,e).values),r}function ou(i,t,e,r){let o=t.map((a,l)=>({value:a,relevance:DE(i.toLowerCase(),a.toLocaleLowerCase()),idx:l}));if(o.sort((a,l)=>l.relevance-a.relevance),e&&(o=o.filter(a=>a.relevance!==0)),o.length>0&&r&&r>0){let l=o[0].relevance*r;o=o.filter(d=>l-d.relevance<0)}let n=[],s=[];for(let a of o)n.push(a.value),s.push(a.idx);return{values:n,indices:s}}function DE(i,t){let e=i.replace(/\s/g,""),r=t.replace(/\s/g,""),o=0,n=-1;for(let s=0;s<e.length;s++){let a=r.indexOf(e[s],n+1);a!==-1&&(n=a,o+=100-n*100/1e4*100)}return o}var qb={};Pi(qb,{createIcon:()=>Xr,createIconNoSpan:()=>It,iconNameClassMap:()=>Kb});var Kb={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus"};function Xr(i,t,e){let r=It(i,t,e);if(r){let{className:n}=r;if(typeof n=="string"&&n.indexOf("ag-icon")>-1||typeof n=="object"&&n["ag-icon"])return r}let o=document.createElement("span");return o.appendChild(r),o}function It(i,t,e,r){let o=null,n=e&&e.getColDef().icons;if(n&&(o=n[i]),t&&!o){let s=t.get("icons");s&&(o=s[i])}if(o){let s;if(typeof o=="function")s=o();else if(typeof o=="string")s=o;else throw new Error("icon from grid options needs to be a string or a function");if(typeof s=="string")return _r(s);if(ru(s))return s;console.warn("AG Grid: iconRenderer should return back a string or a dom object")}else{let s=document.createElement("span"),a=Kb[i];return a||(r?a=i:(console.warn(`AG Grid: Did not find icon ${i}`),a="")),s.setAttribute("class",`ag-icon ag-icon-${a}`),s.setAttribute("unselectable","on"),Bt(s,"presentation"),s}}var Yb={};Pi(Yb,{isDeleteKey:()=>Zb,isEventFromPrintableCharacter:()=>$h,isUserSuppressingHeaderKeyboardEvent:()=>Xb,isUserSuppressingKeyboardEvent:()=>bh,normaliseQwertyAzerty:()=>Qb});var z=class{};z.BACKSPACE="Backspace";z.TAB="Tab";z.ENTER="Enter";z.ESCAPE="Escape";z.SPACE=" ";z.LEFT="ArrowLeft";z.UP="ArrowUp";z.RIGHT="ArrowRight";z.DOWN="ArrowDown";z.DELETE="Delete";z.F2="F2";z.PAGE_UP="PageUp";z.PAGE_DOWN="PageDown";z.PAGE_HOME="Home";z.PAGE_END="End";z.A="KeyA";z.C="KeyC";z.D="KeyD";z.V="KeyV";z.X="KeyX";z.Y="KeyY";z.Z="KeyZ";var TE=65,PE=67,RE=86,ME=68,IE=90,FE=89;function $h(i){return i.altKey||i.ctrlKey||i.metaKey?!1:i.key.length===1}function bh(i,t,e,r,o){let n=r?r.getColDef().suppressKeyboardEvent:void 0;if(!n)return!1;let s=i.addGridCommonParams({event:t,editing:o,column:r,node:e,data:e.data,colDef:r.getColDef()});return!!(n&&n(s))}function Xb(i,t,e,r){let o=r.getDefinition(),n=o&&o.suppressHeaderKeyboardEvent;if(!W(n))return!1;let s=i.addGridCommonParams({colDef:o,column:r,headerRowIndex:e,event:t});return!!n(s)}function Qb(i){let{keyCode:t}=i,e;switch(t){case TE:e=z.A;break;case PE:e=z.C;break;case RE:e=z.V;break;case ME:e=z.D;break;case IE:e=z.Z;break;case FE:e=z.Y;break;default:e=i.code}return e}function Zb(i,t=!1){return i===z.DELETE?!0:!t&&i===z.BACKSPACE?Nf():!1}var Jb={};Pi(Jb,{areEventsNear:()=>Qf});function Qf(i,t,e){if(e===0)return!1;let r=Math.abs(i.clientX-t.clientX),o=Math.abs(i.clientY-t.clientY);return Math.max(r,o)<=e}var ew={};Pi(ew,{sortRowNodesByOrder:()=>zE});function zE(i,t){if(!i)return!1;let e=(s,a)=>{let l=t[s.id],d=t[a.id],u=l!==void 0,c=d!==void 0,h=u&&c,p=!u&&!c;return h?l-d:p?s.__objectId-a.__objectId:u?1:-1},r,o,n=!1;for(let s=0;s<i.length-1;s++)if(r=i[s],o=i[s+1],e(r,o)>0){n=!0;break}return n?(i.sort(e),!0):!1}var tw={};Pi(tw,{convertToSet:()=>Zf});function Zf(i){let t=new Set;return i.forEach(e=>t.add(e)),t}var AE=he(he(he(he(he(he(he(he(he(he(he(he(he(he(he(he(he(he({},pb),QC),Pb),Ab),Nb),XC),BC),jb),VC),qb),Yb),hb),Jb),Ob),GC),ew),tw),db),He=AE,al=class{constructor(i=0,t=1){this.nextValue=i,this.step=t}next(){let i=this.nextValue;return this.nextValue+=this.step,i}peek(){return this.nextValue}skip(i){this.nextValue+=i}};var Er=class dh{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(e=>this.onDone(e),e=>this.onReject(e))}static all(t){return new dh(e=>{let r=t.length,o=new Array(r);t.forEach((n,s)=>{n.then(a=>{o[s]=a,r--,r===0&&e(o)})})})}static resolve(t=null){return new dh(e=>e(t))}then(t){return new dh(e=>{this.status===1?e(t(this.resolution)):this.waiters.push(r=>e(t(r)))})}resolveNow(t,e){return this.status===1?e(this.resolution):t}onDone(t){this.status=1,this.resolution=t,this.waiters.forEach(e=>e(t))}onReject(t){console.warn("TBI")}};var OE=class{constructor(i){this.cssClassStates={},this.getGui=i}addCssClass(i){let t=(i||"").split(" ");if(t.length>1){t.forEach(r=>this.addCssClass(r));return}if(this.cssClassStates[i]!==!0&&i.length){let r=this.getGui();r&&r.classList.add(i),this.cssClassStates[i]=!0}}removeCssClass(i){let t=(i||"").split(" ");if(t.length>1){t.forEach(r=>this.removeCssClass(r));return}if(this.cssClassStates[i]!==!1&&i.length){let r=this.getGui();r&&r.classList.remove(i),this.cssClassStates[i]=!1}}containsCssClass(i){let t=this.getGui();return t?t.classList.contains(i):!1}addOrRemoveCssClass(i,t){if(!i)return;if(i.indexOf(" ")>=0){let r=(i||"").split(" ");if(r.length>1){r.forEach(o=>this.addOrRemoveCssClass(o,t));return}}if(this.cssClassStates[i]!==t&&i.length){let r=this.getGui();r&&r.classList.toggle(i,t),this.cssClassStates[i]=t}}},nu=class Is extends j{constructor(t,e,r,o){super(),this.parentComp=t,this.tooltipShowDelayOverride=e,this.tooltipHideDelayOverride=r,this.shouldDisplayTooltip=o,this.SHOW_QUICK_TOOLTIP_DIFF=1e3,this.FADE_OUT_TOOLTIP_TIMEOUT=1e3,this.INTERACTIVE_HIDE_DELAY=100,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");let t=this.parentComp.getGui();this.tooltipTrigger===0&&(this.addManagedListener(t,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(t,"mouseleave",this.onMouseLeave.bind(this))),this.tooltipTrigger===1&&(this.addManagedListener(t,"focusin",this.onFocusIn.bind(this)),this.addManagedListener(t,"focusout",this.onFocusOut.bind(this))),this.addManagedListener(t,"mousemove",this.onMouseMove.bind(this)),this.interactionEnabled||(this.addManagedListener(t,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(t,"keydown",this.onKeyDown.bind(this)))}getGridOptionsTooltipDelay(t){let e=this.gos.get(t);return e<0&&Ce(`${t} should not be lower than 0`),Math.max(200,e)}getTooltipDelay(t){var e,r;return t==="show"?(e=this.tooltipShowDelayOverride)!=null?e:this.getGridOptionsTooltipDelay("tooltipShowDelay"):(r=this.tooltipHideDelayOverride)!=null?r:this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){let t=this.gos.get("tooltipTrigger");return!t||t==="hover"?0:1}onMouseEnter(t){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!Ln()&&(Is.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(t)},this.INTERACTIVE_HIDE_DELAY):this.prepareToShowTooltip(t))}onMouseMove(t){this.lastMouseEvent&&(this.lastMouseEvent=t),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(t){var e;let r=t.relatedTarget,o=this.parentComp.getGui(),n=(e=this.tooltipComp)==null?void 0:e.getGui();this.isInteractingWithTooltip||o.contains(r)||this.interactionEnabled&&n?.contains(r)||this.setToDoNothing()}onKeyDown(){this.setToDoNothing()}prepareToShowTooltip(t){if(this.state!=0||Is.isLocked)return;let e=0;t&&(e=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),e),this.state=1}isLastTooltipHiddenRecently(){let t=new Date().getTime(),e=Is.lastTooltipHideTime;return t-e<this.SHOW_QUICK_TOOLTIP_DIFF}setToDoNothing(){this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){let t=he({},this.parentComp.getTooltipParams());if(!W(t.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;let e=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(t).newAgStackInstance().then(e)}hideTooltip(t){if(!t&&this.isInteractingWithTooltip)return;this.tooltipComp&&(this.destroyTooltipComp(),Is.lastTooltipHideTime=new Date().getTime());let e={type:m.EVENT_TOOLTIP_HIDE,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(e),this.state=0}newTooltipComponentCallback(t,e){if(this.state!==2||this.tooltipInstanceCount!==t){this.getContext().destroyBean(e);return}let o=e.getGui();this.tooltipComp=e,o.classList.contains("ag-tooltip")||o.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&o.classList.add("ag-tooltip-animate"),this.interactionEnabled&&o.classList.add("ag-tooltip-interactive");let n=this.localeService.getLocaleTextFunc(),s=this.popupService.addPopup({eChild:o,ariaLabel:n("ariaLabelTooltip","Tooltip")});s&&(this.tooltipPopupDestroyFunc=s.hideFunc),this.positionTooltip(),this.tooltipTrigger===1&&(this.onBodyScrollEventCallback=this.addManagedListener(this.eventService,m.EVENT_BODY_SCROLL,this.setToDoNothing.bind(this)),this.onColumnMovedEventCallback=this.addManagedListener(this.eventService,m.EVENT_COLUMN_MOVED,this.setToDoNothing.bind(this))),this.interactionEnabled&&(this.tooltipTrigger===0?(this.tooltipMouseEnterListener=this.addManagedListener(o,"mouseenter",this.onTooltipMouseEnter.bind(this))||null,this.tooltipMouseLeaveListener=this.addManagedListener(o,"mouseleave",this.onTooltipMouseLeave.bind(this))||null):(this.tooltipFocusInListener=this.addManagedListener(o,"focusin",this.onTooltipFocusIn.bind(this))||null,this.tooltipFocusOutListener=this.addManagedListener(o,"focusout",this.onTooltipFocusOut.bind(this))||null));let a={type:m.EVENT_TOOLTIP_SHOW,tooltipGui:o,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(a),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isInteractingWithTooltip=!1,this.lockService()}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}onTooltipFocusOut(t){var e;let r=this.parentComp.getGui(),o=(e=this.tooltipComp)==null?void 0:e.getGui(),n=t.relatedTarget;o?.contains(n)||(this.isInteractingWithTooltip=!1,r.contains(n)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){let t={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(Pt(he({},t),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(Pt(he({},t),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");let t=this.tooltipPopupDestroyFunc,e=this.tooltipComp,r=this.tooltipTrigger===0?this.FADE_OUT_TOOLTIP_TIMEOUT:0;window.setTimeout(()=>{t(),this.getContext().destroyBean(e)},r),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(t=>{t&&t()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){Is.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},this.INTERACTIVE_HIDE_DELAY)}unlockService(){Is.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};nu.isLocked=!1;g([w("popupService")],nu.prototype,"popupService",2);g([w("userComponentFactory")],nu.prototype,"userComponentFactory",2);g([U],nu.prototype,"postConstruct",1);var LE=nu,Nn=class extends j{constructor(i,t){super(),this.ctrl=i,t&&(this.beans=t)}postConstruct(){this.refreshToolTip()}setBrowserTooltip(i){let t="title",e=this.ctrl.getGui();e&&(i!=null&&i!=""?e.setAttribute(t,i):e.removeAttribute(t))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){var i,t,e,r;if(this.tooltipManager!=null)return;let o={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new LE(o,(t=(i=this.ctrl).getTooltipShowDelayOverride)==null?void 0:t.call(i),(r=(e=this.ctrl).getTooltipHideDelayOverride)==null?void 0:r.call(e),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){let i=this.ctrl,t=i.getColumn?i.getColumn():void 0,e=i.getColDef?i.getColDef():void 0,r=i.getRowNode?i.getRowNode():void 0;return{location:i.getLocation(),colDef:e,column:t,rowIndex:i.getRowIndex?i.getRowIndex():void 0,node:r,data:r?r.data:void 0,value:this.getTooltipText(),valueFormatted:i.getValueFormatted?i.getValueFormatted():void 0,hideTooltipCallback:()=>{var o;return(o=this.tooltipManager)==null?void 0:o.hideTooltip(!0)}}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}};g([w("beans")],Nn.prototype,"beans",2);g([U],Nn.prototype,"postConstruct",1);var NE=new al,su=class sf extends j{constructor(t){super(),this.displayed=!0,this.visible=!0,this.compId=NE.next(),this.cssClassManager=new OE(()=>this.eGui),t&&this.setTemplate(t)}preConstructOnComponent(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips")}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(t){let{newTooltipText:e,showDelayOverride:r,hideDelayOverride:o,location:n,shouldDisplayTooltip:s}=t||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==e&&(this.tooltipText=e);let a=()=>this.tooltipText;e!=null&&(this.tooltipFeature=this.createBean(new Nn({getTooltipValue:a,getGui:()=>this.getGui(),getLocation:()=>n??"UNKNOWN",getColDef:t?.getColDef,getColumn:t?.getColumn,getTooltipShowDelayOverride:r!=null?()=>r:void 0,getTooltipHideDelayOverride:o!=null?()=>o:void 0,shouldDisplayTooltip:s})))}createChildComponentsFromTags(t,e){$b(t.childNodes).forEach(o=>{if(!(o instanceof HTMLElement))return;let n=this.createComponentFromElement(o,s=>{s.getGui()&&this.copyAttributesFromNode(o,s.getGui())},e);if(n){if(n.addItems&&o.children.length){this.createChildComponentsFromTags(o,e);let s=Array.prototype.slice.call(o.children);n.addItems(s)}this.swapComponentForNode(n,t,o)}else o.childNodes&&this.createChildComponentsFromTags(o,e)})}createComponentFromElement(t,e,r){let o=t.nodeName,n=r?r[t.getAttribute("ref")]:void 0,s=this.agStackComponentsRegistry.getComponentClass(o);if(s){sf.elementGettingCreated=t;let a=new s(n);return a.setParentComponent(this),this.createBean(a,null,e),a}return null}copyAttributesFromNode(t,e){Wb(t.attributes,(r,o)=>e.setAttribute(r,o))}swapComponentForNode(t,e,r){let o=t.getGui();e.replaceChild(o,r),e.insertBefore(document.createComment(r.nodeName),o),this.addDestroyFunc(this.destroyBean.bind(this,t)),this.swapInComponentForQuerySelectors(t,r)}swapInComponentForQuerySelectors(t,e){let r=this;this.iterateOverQuerySelectors(o=>{r[o.attributeName]===e&&(r[o.attributeName]=t)})}iterateOverQuerySelectors(t){let e=Object.getPrototypeOf(this);for(;e!=null;){let r=e.__agComponentMetaData,o=zh(e.constructor);r&&r[o]&&r[o].querySelectors&&r[o].querySelectors.forEach(n=>t(n)),e=Object.getPrototypeOf(e)}}activateTabIndex(t){let e=this.gos.get("tabIndex");t||(t=[]),t.length||t.push(this.getGui()),t.forEach(r=>r.setAttribute("tabindex",e.toString()))}setTemplate(t,e){let r=_r(t);this.setTemplateFromElement(r,e)}setTemplateFromElement(t,e){this.eGui=t,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),e)}createChildComponentsPreConstruct(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())}wireQuerySelectors(){if(!this.eGui)return;let t=this;this.iterateOverQuerySelectors(e=>{let r=n=>t[e.attributeName]=n;if(e.refSelector&&this.getAttribute("ref")===e.refSelector)r(this.eGui);else{let n=this.eGui.querySelector(e.querySelector);n&&r(n.__agComponent||n)}})}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(t){this.parentComponent=t}getParentComponent(){return this.parentComponent}setGui(t){this.eGui=t}queryForHtmlElement(t){return this.eGui.querySelector(t)}queryForHtmlInputElement(t){return this.eGui.querySelector(t)}appendChild(t,e){if(t!=null)if(e||(e=this.eGui),ru(t))e.appendChild(t);else{let r=t;e.appendChild(r.getGui())}}isDisplayed(){return this.displayed}setVisible(t,e={}){if(t!==this.visible){this.visible=t;let{skipAriaHidden:r}=e;Vb(this.eGui,t,{skipAriaHidden:r})}}setDisplayed(t,e={}){if(t!==this.displayed){this.displayed=t;let{skipAriaHidden:r}=e;qe(this.eGui,t,{skipAriaHidden:r});let o={type:sf.EVENT_DISPLAYED_CHANGED,visible:this.displayed};this.dispatchEvent(o)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let t=this.eGui;t&&t.__agComponent&&(t.__agComponent=void 0),super.destroy()}addGuiEventListener(t,e,r){this.eGui.addEventListener(t,e,r),this.addDestroyFunc(()=>this.eGui.removeEventListener(t,e))}addCssClass(t){this.cssClassManager.addCssClass(t)}removeCssClass(t){this.cssClassManager.removeCssClass(t)}containsCssClass(t){return this.cssClassManager.containsCssClass(t)}addOrRemoveCssClass(t,e){this.cssClassManager.addOrRemoveCssClass(t,e)}getAttribute(t){let{eGui:e}=this;return e?e.getAttribute(t):null}getRefElement(t){return this.queryForHtmlElement(`[ref="${t}"]`)}};su.EVENT_DISPLAYED_CHANGED="displayedChanged";g([w("agStackComponentsRegistry")],su.prototype,"agStackComponentsRegistry",2);g([UC],su.prototype,"preConstructOnComponent",1);g([UC],su.prototype,"createChildComponentsPreConstruct",1);var Pe=su;function Q(i){return kE.bind(this,`[ref=${i}]`,i)}function kE(i,t,e,r,o){if(i===null){console.error("AG Grid: QuerySelector selector should not be null");return}if(typeof o=="number"){console.error("AG Grid: QuerySelector should be on an attribute");return}VE(e,"querySelectors",{attributeName:r,querySelector:i,refSelector:t})}function VE(i,t,e){let r=GE(i,zh(i.constructor));r[t]||(r[t]=[]),r[t].push(e)}function GE(i,t){return i.__agComponentMetaData||(i.__agComponentMetaData={}),i.__agComponentMetaData[t]||(i.__agComponentMetaData[t]={}),i.__agComponentMetaData[t]}var Jf=class extends Pe{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>
            </div>`)}destroy(){super.destroy()}init(i){this.params=i;let t=this.columnModel.getDisplayNameForColumn(i.column,"header",!0),e=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${e("ariaFilterInput","Filter Input")}`)}onParentModelChanged(i){if(i==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){let e=t.getModelAsString(i);this.eFloatingFilterText.setValue(e)}})}onParamsUpdated(i){this.refresh(i)}refresh(i){this.init(i)}};g([Q("eFloatingFilterText")],Jf.prototype,"eFloatingFilterText",2);g([w("columnModel")],Jf.prototype,"columnModel",2);var iw=class{constructor(i,t,e,r,o){this.alive=!0,this.context=i,this.eParent=r,t.getDateCompDetails(e).newAgStackInstance().then(a=>{if(!this.alive){i.destroyBean(a);return}this.dateComp=a,a&&(r.appendChild(a.getGui()),a.afterGuiAttached&&a.afterGuiAttached(),this.tempValue&&a.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled),o?.(this))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(i){this.dateComp?this.dateComp.setDate(i):this.tempValue=i}setDisabled(i){this.dateComp?this.setDateCompDisabled(i):this.disabled=i}setDisplayed(i){qe(this.eParent,i)}setInputPlaceholder(i){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(i)}setInputAriaLabel(i){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(i)}afterGuiAttached(i){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(i)}updateParams(i){var t,e;let r=!1;(t=this.dateComp)!=null&&t.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(i)!==null&&(r=!0),!r&&((e=this.dateComp)!=null&&e.onParamsUpdated)&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(i)!==null&&Ce("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(i){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(i)}},rw=class{constructor(){this.customFilterOptions={}}init(i,t){this.filterOptions=i.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(i)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(i=>{if(typeof i=="string")return;let t=[["displayKey"],["displayName"],["predicate","test"]],e=r=>r.some(o=>i[o]!=null)?!0:(console.warn(`AG Grid: ignoring FilterOptionDef as it doesn't contain one of '${r}'`),!1);if(!t.every(e)){this.filterOptions=this.filterOptions.filter(r=>r===i)||[];return}this.customFilterOptions[i.displayKey]=i})}selectDefaultItem(i){if(i.defaultOption)this.defaultOption=i.defaultOption;else if(this.filterOptions.length>=1){let t=this.filterOptions[0];typeof t=="string"?this.defaultOption=t:t.displayKey?this.defaultOption=t.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(i){return this.customFilterOptions[i]}},ow={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"},Wh=class nw extends j{constructor(t,e={}){super(),this.eFocusableElement=t,this.callbacks=e,this.callbacks=he({shouldStopEventPropagation:()=>!1,onTabKeyDown:r=>{if(r.defaultPrevented)return;let o=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,r.shiftKey);o&&(o.focus(),r.preventDefault())}},e)}postConstruct(){this.eFocusableElement.classList.add(nw.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)}addKeyDownListeners(t){this.addManagedListener(t,"keydown",e=>{if(!(e.defaultPrevented||To(e))){if(this.callbacks.shouldStopEventPropagation(e)){Ro(e);return}e.key===z.TAB?this.callbacks.onTabKeyDown(e):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(e)}})}};Wh.FOCUS_MANAGED_CLASS="ag-focus-managed";g([w("focusService")],Wh.prototype,"focusService",2);g([U],Wh.prototype,"postConstruct",1);var cs=Wh,sw="ag-resizer-wrapper",HE=`<div class="${sw}">
        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>
        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>
        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>
        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>
        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>
        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>
        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>
        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>
    </div>`,vl=class extends j{constructor(i,t){super(),this.element=i,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}center(){let{clientHeight:i,clientWidth:t}=this.offsetParent,e=t/2-this.getWidth()/2,r=i/2-this.getHeight()/2;this.offsetElement(e,r)}initialisePosition(){if(this.positioned)return;let{centered:i,forcePopupParentAsOffsetParent:t,minWidth:e,width:r,minHeight:o,height:n,x:s,y:a}=this.config;this.offsetParent||this.setOffsetParent();let l=0,d=0,u=Dr(this.element);if(u){let c=this.findBoundaryElement(),h=window.getComputedStyle(c);if(h.minWidth!=null){let p=c.offsetWidth-this.element.offsetWidth;d=parseInt(h.minWidth,10)-p}if(h.minHeight!=null){let p=c.offsetHeight-this.element.offsetHeight;l=parseInt(h.minHeight,10)-p}}if(this.minHeight=o||l,this.minWidth=e||d,r&&this.setWidth(r),n&&this.setHeight(n),(!r||!n)&&this.refreshSize(),i)this.center();else if(s||a)this.offsetElement(s,a);else if(u&&t){let c=this.boundaryEl,h=!0;if(c||(c=this.findBoundaryElement(),h=!1),c){let p=parseFloat(c.style.top),f=parseFloat(c.style.left);h?this.offsetElement(isNaN(f)?0:f,isNaN(p)?0:p):this.setPosition(f,p)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(i,t){if(!this.config.popup||i===this.movable)return;this.movable=i;let e=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};i?(this.dragService.addDragSource(e),this.moveElementDragListener=e):(this.dragService.removeDragSource(e),this.moveElementDragListener=void 0)}setResizable(i){if(this.clearResizeListeners(),i?this.addResizers():this.removeResizers(),typeof i=="boolean"){if(i===!1)return;i={topLeft:i,top:i,topRight:i,right:i,bottomRight:i,bottom:i,bottomLeft:i,left:i}}Object.keys(i).forEach(t=>{let r=!!i[t],o=this.getResizerElement(t),n={dragStartPixels:0,eElement:o,onDragStart:s=>this.onResizeStart(s,t),onDragging:this.onResize.bind(this),onDragStop:s=>this.onResizeEnd(s,t)};(r||!this.isAlive()&&!r)&&(r?(this.dragService.addDragSource(n),this.resizeListeners.push(n),o.style.pointerEvents="all"):o.style.pointerEvents="none",this.resizable[t]=r)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";let{height:i,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),i!==-1&&(this.element.style.height=`${i}px`)}getHeight(){return this.element.offsetHeight}setHeight(i){let{popup:t}=this.config,e=this.element,r=!1;if(typeof i=="string"&&i.indexOf("%")!==-1)Ls(e,i),i=$f(e),r=!0;else if(i=Math.max(this.minHeight,i),this.positioned){let o=this.getAvailableHeight();o&&i>o&&(i=o)}this.getHeight()!==i&&(r?(e.style.maxHeight="unset",e.style.minHeight="unset"):t?Ls(e,i):(e.style.height=`${i}px`,e.style.flex="0 0 auto",this.lastSize.height=typeof i=="number"?i:parseFloat(i)))}getAvailableHeight(){let{popup:i,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();let{clientHeight:e}=this.offsetParent;if(!e)return null;let r=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),n=i?this.position.y:r.top,s=i?0:o.top,a=0;if(t){let d=this.element.parentElement;if(d){let{bottom:u}=d.getBoundingClientRect();a=u-r.bottom}}return e+s-n-a}getWidth(){return this.element.offsetWidth}setWidth(i){let t=this.element,{popup:e}=this.config,r=!1;if(typeof i=="string"&&i.indexOf("%")!==-1)eo(t,i),i=Fd(t),r=!0;else if(this.positioned){i=Math.max(this.minWidth,i);let{clientWidth:o}=this.offsetParent,n=e?this.position.x:this.element.getBoundingClientRect().left;o&&i+n>o&&(i=o-n)}this.getWidth()!==i&&(r?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?eo(t,i):(t.style.width=`${i}px`,t.style.flex=" unset",this.lastSize.width=typeof i=="number"?i:parseFloat(i)))}offsetElement(i=0,t=0){let{forcePopupParentAsOffsetParent:e}=this.config,r=e?this.boundaryEl:this.element;r&&(this.popupService.positionPopup({ePopup:r,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:i,y:t})}),this.setPosition(parseFloat(r.style.left),parseFloat(r.style.top)))}constrainSizeToAvailableHeight(i){if(!this.config.forcePopupParentAsOffsetParent)return;let t=()=>{let e=this.getAvailableHeight();this.element.style.setProperty("max-height",`${e}px`)};i?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(i,t){this.position.x=i,this.position.y=t}updateDragStartPosition(i,t){this.dragStartPosition={x:i,y:t}}calculateMouseMovement(i){let{e:t,isLeft:e,isTop:r,anywhereWithin:o,topBuffer:n}=i,s=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y,l=this.shouldSkipX(t,!!e,!!o,s)?0:s,d=this.shouldSkipY(t,!!r,n,a)?0:a;return{movementX:l,movementY:d}}shouldSkipX(i,t,e,r){let o=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),s=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:o.left,l=a<=0&&n.left>=i.clientX||n.right<=i.clientX&&n.right<=s.right;return l?!0:(t?l=r<0&&i.clientX>a+n.left||r>0&&i.clientX<a+n.left:e?l=r<0&&i.clientX>s.right||r>0&&i.clientX<a+n.left:l=r<0&&i.clientX>s.right||r>0&&i.clientX<s.right,l)}shouldSkipY(i,t,e=0,r){let o=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),s=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:o.top,l=a<=0&&n.top>=i.clientY||n.bottom<=i.clientY&&n.bottom<=s.bottom;return l?!0:(t?l=r<0&&i.clientY>a+n.top+e||r>0&&i.clientY<a+n.top:l=r<0&&i.clientY>s.bottom||r>0&&i.clientY<s.bottom,l)}createResizeMap(){let i=this.element;this.resizerMap={topLeft:{element:i.querySelector("[ref=eTopLeftResizer]")},top:{element:i.querySelector("[ref=eTopResizer]")},topRight:{element:i.querySelector("[ref=eTopRightResizer]")},right:{element:i.querySelector("[ref=eRightResizer]")},bottomRight:{element:i.querySelector("[ref=eBottomRightResizer]")},bottom:{element:i.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:i.querySelector("[ref=eBottomLeftResizer]")},left:{element:i.querySelector("[ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;let i=this.element;if(!i)return;let e=new DOMParser().parseFromString(HE,"text/html").body;i.appendChild(e.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;let i=this.element.querySelector(`.${sw}`);i&&this.element.removeChild(i),this.resizersAdded=!1}getResizerElement(i){return this.resizerMap[i].element}onResizeStart(i,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");let{popup:e,forcePopupParentAsOffsetParent:r}=this.config;!e&&!r&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(i.clientX,i.clientY)}getSiblings(){let t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(e=>!e.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){let i=this.getSiblings()||[],t=0,e=0;for(let r=0;r<i.length;r++){let o=i[r],n=!!o.style.flex&&o.style.flex!=="0 0 auto";if(o===this.element)continue;let s=this.minHeight||0,a=this.minWidth||0;if(n){let l=window.getComputedStyle(o);l.minHeight&&(s=parseInt(l.minHeight,10)),l.minWidth&&(a=parseInt(l.minWidth,10))}else s=o.offsetHeight,a=o.offsetWidth;t+=s,e+=a}return{height:t,width:e}}applySizeToSiblings(i){let t=null,e=this.getSiblings();if(e){for(let r=0;r<e.length;r++){let o=e[r];o!==t&&(i?o.style.height=`${o.offsetHeight}px`:o.style.width=`${o.offsetWidth}px`,o.style.flex="0 0 auto",o===this.element&&(t=e[r+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(i=>i)}onResize(i){if(!this.isResizing||!this.currentResizer)return;let{popup:t,forcePopupParentAsOffsetParent:e}=this.config,{isTop:r,isRight:o,isBottom:n,isLeft:s}=this.currentResizer,a=o||s,l=n||r,{movementX:d,movementY:u}=this.calculateMouseMovement({e:i,isLeft:s,isTop:r}),c=this.position.x,h=this.position.y,p=0,f=0;if(a&&d){let C=s?-1:1,b=this.getWidth(),x=b+d*C,S=!1;s&&(p=b-x,(c+p<=0||x<=this.minWidth)&&(S=!0,p=0)),S||this.setWidth(x)}if(l&&u){let C=r?-1:1,b=this.getHeight(),x=b+u*C,S=!1;r?(f=b-x,(h+f<=0||x<=this.minHeight)&&(S=!0,f=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&b<x&&this.getMinSizeOfSiblings().height+x>this.element.parentElement.offsetHeight&&(S=!0),S||this.setHeight(x)}this.updateDragStartPosition(i.clientX,i.clientY),((t||e)&&p||f)&&this.offsetElement(c+p,h+f)}onResizeEnd(i,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;let e={type:"resize"};this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchEvent(e)}refreshSize(){let i=this.element;this.config.popup&&(this.config.width||this.setWidth(i.offsetWidth),this.config.height||this.setHeight(i.offsetHeight))}onMoveStart(i){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(i.clientX,i.clientY)}onMove(i){if(!this.isMoving)return;let{x:t,y:e}=this.position,r;this.config.calculateTopBuffer&&(r=this.config.calculateTopBuffer());let{movementX:o,movementY:n}=this.calculateMouseMovement({e:i,isTop:!0,anywhereWithin:!0,topBuffer:r});this.offsetElement(t+o,e+n),this.updateDragStartPosition(i.clientX,i.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let i=this.element;for(;i;){if(window.getComputedStyle(i).position!=="static")return i;i=i.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){let i=this.resizeListeners.pop();this.dragService.removeDragSource(i)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}};g([w("popupService")],vl.prototype,"popupService",2);g([w("resizeObserverService")],vl.prototype,"resizeObserverService",2);g([w("dragService")],vl.prototype,"dragService",2);var jh=class bd extends Pe{constructor(t){super(),this.filterNameKey=t,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.buttonListeners=[]}postConstruct(){this.resetTemplate(),this.createManagedBean(new cs(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new vl(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(t){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(t){let e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit);let r=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(r,t),e=this.getGui(),e&&e.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(t){this.setParams(t),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(t){this.providedFilterParams=t,this.applyActive=bd.isUseApplyButton(t),this.resetButtonsPanel()}updateParams(t){this.providedFilterParams=t,this.applyActive=bd.isUseApplyButton(t),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(){let{buttons:t}=this.providedFilterParams,e=t&&t.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(Zt(this.eButtonsPanel),this.buttonListeners.forEach(n=>n?.()),this.buttonListeners=[]):e&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!e){this.eButtonsPanel&&Eo(this.eButtonsPanel);return}let r=document.createDocumentFragment(),o=n=>{let s,a;switch(n){case"apply":s=this.translate("applyFilter"),a=u=>this.onBtApply(!1,!1,u);break;case"clear":s=this.translate("clearFilter"),a=()=>this.onBtClear();break;case"reset":s=this.translate("resetFilter"),a=()=>this.onBtReset();break;case"cancel":s=this.translate("cancelFilter"),a=u=>{this.onBtCancel(u)};break;default:console.warn("AG Grid: Unknown button type specified");return}let d=_r(`<button
                    type="${n==="apply"?"submit":"button"}"
                    ref="${n}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${s}
                </button>`);this.buttonListeners.push(this.addManagedListener(d,"click",a)),r.append(d)};Zf(t).forEach(n=>o(n)),this.eButtonsPanel.append(r),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){let t=bd.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs()),e=Ji(this.checkApplyDebounce.bind(this),t);this.onBtApplyDebounce=()=>{this.debouncePending=!0,e()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(t){return(t!=null?this.setModelIntoUi(t):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(t){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(t)})}handleCancelEnd(t){this.providedFilterParams.closeOnApply&&this.close(t)}resetUiToActiveModel(t,e){let r=()=>{this.onUiChanged(!1,"prevent"),e?.()};t!=null?this.setModelIntoUi(t).then(r):this.resetUiToDefaults().then(r)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(t="api"){let e=this.getModelFromUi();if(!this.isModelValid(e))return!1;let r=this.appliedModel;return this.appliedModel=e,!this.areModelsEqual(r,e)}isModelValid(t){return!0}onFormSubmit(t){t.preventDefault()}onBtApply(t=!1,e=!1,r){r&&r.preventDefault(),this.applyModel(e?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:t,afterDataChange:e,source:"columnFilter"});let{closeOnApply:o}=this.providedFilterParams;o&&this.applyActive&&!t&&!e&&this.close(r)}onNewRowsLoaded(){}close(t){if(!this.hidePopup)return;let e=t,r=e&&e.key,o;(r==="Enter"||r==="Space")&&(o={keyboardEvent:e}),this.hidePopup(o),this.hidePopup=null}onUiChanged(t=!1,e){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){let r=this.isModelValid(this.getModelFromUi()),o=this.getRefElement("applyFilterButton");o&&sl(o,!r)}t&&!e||e==="immediately"?this.onBtApply(t):(!this.applyActive&&!e||e==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(t){t&&(this.hidePopup=t.hidePopup),this.refreshFilterResizer(t?.container)}refreshFilterResizer(t){if(!this.positionableFeature||t==="toolPanel")return;let e=t==="floatingFilter"||t==="columnFilter",{positionableFeature:r,gos:o}=this;e?(r.restoreLastSize(),r.setResizable(o.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}static getDebounceMs(t,e){return bd.isUseApplyButton(t)?(t.debounceMs!=null&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):t.debounceMs!=null?t.debounceMs:e}static isUseApplyButton(t){return!!t.buttons&&t.buttons.indexOf("apply")>=0}refresh(t){return this.providedFilterParams=t,!0}destroy(){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(t){return this.localeService.getLocaleTextFunc()(t,ow[t])}getCellValue(t){return this.providedFilterParams.getValue(t)}getPositionableElement(){return this.eFilterBody}};g([w("rowModel")],jh.prototype,"rowModel",2);g([Q("eFilterBody")],jh.prototype,"eFilterBody",2);g([U],jh.prototype,"postConstruct",1);var wh=jh,em=class extends Pe{constructor(i,t){super(t),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=i||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");let{labelSeparator:i,label:t,labelWidth:e,labelAlignment:r,disabled:o}=this.config;o!=null&&this.setDisabled(o),i!=null&&this.setLabelSeparator(i),t!=null&&this.setLabel(t),e!=null&&this.setLabelWidth(e),this.setLabelAlignment(r||this.labelAlignment),this.refreshLabel()}refreshLabel(){Zt(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(qe(this.eLabel,!1),Bt(this.eLabel,"presentation")):(qe(this.eLabel,!0),Bt(this.eLabel,null))}setLabelSeparator(i){return this.labelSeparator===i?this:(this.labelSeparator=i,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(i){return this.label===i?this:(this.label=i,this.refreshLabel(),this)}setLabelAlignment(i){let e=this.getGui().classList;return e.toggle("ag-label-align-left",i==="left"),e.toggle("ag-label-align-right",i==="right"),e.toggle("ag-label-align-top",i==="top"),this}setLabelEllipsis(i){return this.eLabel.classList.toggle("ag-label-ellipsis",i),this}setLabelWidth(i){return this.label==null?this:(Ld(this.eLabel,i),this)}setDisabled(i){i=!!i;let t=this.getGui();return sl(t,i),t.classList.toggle("ag-disabled",i),this.disabled=i,this}isDisabled(){return!!this.disabled}};g([U],em.prototype,"postConstruct",1);var aw=class extends em{constructor(i,t,e){super(i,t),this.className=e}postConstruct(){super.postConstruct();let{width:i,value:t,onValueChange:e}=this.config;i!=null&&this.setWidth(i),t!=null&&this.setValue(t),e!=null&&this.onValueChange(e),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}refreshAriaLabelledBy(){let i=this.getAriaElement(),t=this.getLabelId();vb(i)!==null?ol(i,""):ol(i,t??"")}setAriaLabel(i){return Vr(this.getAriaElement(),i),this.refreshAriaLabelledBy(),this}onValueChange(i){return this.addManagedListener(this,m.EVENT_FIELD_VALUE_CHANGED,()=>i(this.getValue())),this}getWidth(){return this.getGui().clientWidth}setWidth(i){return eo(this.getGui(),i),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(i,t){return this.value===i?this:(this.previousValue=this.value,this.value=i,t||this.dispatchEvent({type:m.EVENT_FIELD_VALUE_CHANGED}),this)}},BE=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,Js=class extends aw{constructor(i){if(super(i,i?.template||BE,i?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.ariaRole=i?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!i)return;let{pickerGap:t,maxPickerHeight:e,variableWidth:r,minPickerWidth:o,maxPickerWidth:n}=i;t!=null&&(this.pickerGap=t),this.variableWidth=!!r,e!=null&&this.setPickerMaxHeight(e),o!=null&&this.setPickerMinWidth(o),n!=null&&this.setPickerMaxWidth(n)}postConstruct(){super.postConstruct(),this.setupAria();let i=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",i);let t=this.getAriaElement();this.addManagedListener(t,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(this.eLabel,"mousedown",this.onLabelOrWrapperMouseDown.bind(this)),this.addManagedListener(this.eWrapper,"mousedown",this.onLabelOrWrapperMouseDown.bind(this));let{pickerIcon:e,inputWidth:r}=this.config;if(e){let o=It(e,this.gos);o&&this.eIcon.appendChild(o)}r!=null&&this.setInputWidth(r)}setupAria(){let i=this.getAriaElement();i.setAttribute("tabindex",this.gos.get("tabIndex").toString()),zn(i,!1),this.ariaRole&&Bt(i,this.ariaRole)}onLabelOrWrapperMouseDown(i){if(i){let t=this.getFocusableElement();if(t!==this.eWrapper&&i?.target===t)return;i.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(i){switch(i.key){case z.UP:case z.DOWN:case z.ENTER:case z.SPACE:i.preventDefault(),this.onLabelOrWrapperMouseDown();break;case z.ESCAPE:this.isPickerDisplayed&&(i.preventDefault(),i.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());let i=this.pickerComponent.getGui();i.addEventListener("focusin",this.onPickerFocusIn),i.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){let i=this.gos.getDocument(),t=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||(this.destroyMouseWheelFunc=this.addManagedListener(this.eventService,m.EVENT_BODY_SCROLL,()=>{this.hidePicker()}));let e=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:r,pickerAriaLabelValue:o,modalPicker:n=!0}=this.config,s={modal:n,eChild:t,closeOnEsc:!0,closedCallback:()=>{let p=this.gos.getActiveDomElement(),f=!p||p===i.body;this.beforeHidePicker(),f&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:e(r,o)},a=this.popupService.addPopup(s),{maxPickerHeight:l,minPickerWidth:d,maxPickerWidth:u,variableWidth:c}=this;c?(d&&(t.style.minWidth=d),t.style.width=Bh(Fd(this.eWrapper)),u&&(t.style.maxWidth=u)):Ld(t,u??Fd(this.eWrapper));let h=l??`${iu(this.popupService.getPopupParent())}px`;return t.style.setProperty("max-height",h),t.style.position="absolute",this.alignPickerToComponent(),a.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;let{pickerType:i}=this.config,{pickerGap:t}=this,e=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:i,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:e,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);let i=this.pickerComponent.getGui();i.removeEventListener("focusin",this.onPickerFocusIn),i.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(i){if(!this.isAlive())return;let t=this.getAriaElement();zn(t,i),this.eWrapper.classList.toggle("ag-picker-expanded",i),this.eWrapper.classList.toggle("ag-picker-collapsed",!i)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(i){var t;(t=this.pickerComponent)!=null&&t.getGui().contains(i.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(i){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",i)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(i){return Ld(this.eWrapper,i),this}getFocusableElement(){return this.eWrapper}setPickerGap(i){return this.pickerGap=i,this}setPickerMinWidth(i){return typeof i=="number"&&(i=`${i}px`),this.minPickerWidth=i??void 0,this}setPickerMaxWidth(i){return typeof i=="number"&&(i=`${i}px`),this.maxPickerWidth=i??void 0,this}setPickerMaxHeight(i){return typeof i=="number"&&(i=`${i}px`),this.maxPickerHeight=i??void 0,this}destroy(){this.hidePicker(),super.destroy()}};g([w("popupService")],Js.prototype,"popupService",2);g([Q("eLabel")],Js.prototype,"eLabel",2);g([Q("eWrapper")],Js.prototype,"eWrapper",2);g([Q("eDisplayField")],Js.prototype,"eDisplayField",2);g([Q("eIcon")],Js.prototype,"eIcon",2);var Uh=class uh extends Pe{constructor(t="default",e=!1){super(`<div class="ag-list ag-${t}-list" role="listbox"></div>`),this.cssIdentifier=t,this.unFocusable=e,this.options=[],this.itemEls=[]}init(){let t=this.getGui();this.addManagedListener(t,"mouseleave",()=>this.clearHighlighted()),!this.unFocusable&&this.addManagedListener(t,"keydown",this.handleKeyDown.bind(this))}handleKeyDown(t){let e=t.key;switch(e){case z.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{let r=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(r)}break;case z.DOWN:case z.UP:t.preventDefault(),this.navigate(e);break;case z.PAGE_DOWN:case z.PAGE_UP:case z.PAGE_HOME:case z.PAGE_END:t.preventDefault(),this.navigateToPage(e);break}}navigate(t){let e=t===z.DOWN,r;if(!this.highlightedEl)r=this.itemEls[e?0:this.itemEls.length-1];else{let n=this.itemEls.indexOf(this.highlightedEl)+(e?1:-1);n=Math.min(Math.max(n,0),this.itemEls.length-1),r=this.itemEls[n]}this.highlightItem(r)}navigateToPage(t){if(!this.highlightedEl||this.itemEls.length===0)return;let e=this.itemEls.indexOf(this.highlightedEl),r=this.options.length-1,o=this.itemEls[0].clientHeight,n=Math.floor(this.getGui().clientHeight/o),s=-1;t===z.PAGE_HOME?s=0:t===z.PAGE_END?s=r:t===z.PAGE_DOWN?s=Math.min(e+n,r):t===z.PAGE_UP&&(s=Math.max(e-n,0)),s!==-1&&this.highlightItem(this.itemEls[s])}addOptions(t){return t.forEach(e=>this.addOption(e)),this}addOption(t){let{value:e,text:r}=t,o=r||e;return this.options.push({value:e,text:o}),this.renderOption(e,o),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(t=>{Eo(t)}),this.itemEls=[]}updateIndices(){let t=this.getGui().querySelectorAll(".ag-list-item");t.forEach((e,r)=>{Vh(e,r+1),kh(e,t.length)})}renderOption(t,e){let r=this.gos.getDocument(),o=r.createElement("div");Bt(o,"option"),o.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);let n=r.createElement("span");o.appendChild(n),n.textContent=e,this.unFocusable||(o.tabIndex=-1),this.itemEls.push(o),this.addManagedListener(o,"mousemove",()=>this.highlightItem(o)),this.addManagedListener(o,"mousedown",s=>{s.preventDefault(),this.setValue(t)}),this.createManagedBean(new Nn({getTooltipValue:()=>e,getGui:()=>o,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>n.scrollWidth>n.clientWidth})),this.getGui().appendChild(o)}setValue(t,e){if(this.value===t)return this.fireItemSelected(),this;if(t==null)return this.reset(e),this;let r=this.options.findIndex(o=>o.value===t);if(r!==-1){let o=this.options[r];this.value=o.value,this.displayValue=o.text,this.highlightItem(this.itemEls[r]),e||this.fireChangeEvent()}return this}setValueByIndex(t){return this.setValue(this.options[t].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();let t=this.options.findIndex(e=>e.value===this.value);t!==-1&&this.highlightItem(this.itemEls[t])}reset(t){this.value=null,this.displayValue=null,this.clearHighlighted(),t||this.fireChangeEvent()}highlightItem(t){if(!Dr(t))return;this.clearHighlighted(),this.highlightedEl=t,this.highlightedEl.classList.add(uh.ACTIVE_CLASS),nl(this.highlightedEl,!0);let e=this.getGui(),{scrollTop:r,clientHeight:o}=e,{offsetTop:n,offsetHeight:s}=t;(n+s>r+o||n<r)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!Dr(this.highlightedEl)||(this.highlightedEl.classList.remove(uh.ACTIVE_CLASS),nl(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchEvent({type:m.EVENT_FIELD_VALUE_CHANGED}),this.fireItemSelected()}fireItemSelected(){this.dispatchEvent({type:uh.EVENT_ITEM_SELECTED})}};Uh.EVENT_ITEM_SELECTED="selectedItem";Uh.ACTIVE_CLASS="ag-active-item";g([U],Uh.prototype,"init",1);var yC=Uh,lw=class dw extends Js{constructor(t){super(he({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox"},t))}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");let{options:t,value:e,placeholder:r}=this.config;t!=null&&this.addOptions(t),e!=null&&this.setValue(e,!0),r&&e==null&&(this.eDisplayField.textContent=r),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))}onWrapperFocusOut(t){this.eWrapper.contains(t.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new yC("select",!0)),this.listComponent.setParentComponent(this);let t=this.listComponent.getAriaElement(),e=`ag-select-list-${this.listComponent.getCompId()}`;t.setAttribute("id",e),Af(this.getAriaElement(),t),this.listComponent.addManagedListener(this.listComponent,yC.EVENT_ITEM_SELECTED,()=>{this.hidePicker(),this.dispatchEvent({type:dw.EVENT_ITEM_SELECTED})}),this.listComponent.addManagedListener(this.listComponent,m.EVENT_FIELD_VALUE_CHANGED,()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())})}createPickerComponent(){return this.listComponent}onKeyDown(t){var e;let{key:r}=t;switch(r===z.TAB&&this.hidePicker(),r){case z.ENTER:case z.UP:case z.DOWN:case z.PAGE_UP:case z.PAGE_DOWN:case z.PAGE_HOME:case z.PAGE_END:t.preventDefault(),this.isPickerDisplayed?(e=this.listComponent)==null||e.handleKeyDown(t):super.onKeyDown(t);break;case z.ESCAPE:super.onKeyDown(t);break}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(t){return t.forEach(e=>this.addOption(e)),this}addOption(t){return this.listComponent.addOption(t),this}clearOptions(){var t;return(t=this.listComponent)==null||t.clearOptions(),this}setValue(t,e,r){if(this.value===t||!this.listComponent)return this;if(r||this.listComponent.setValue(t,!0),this.listComponent.getValue()===this.getValue())return this;let n=this.listComponent.getDisplayValue();return n==null&&this.config.placeholder&&(n=this.config.placeholder),this.eDisplayField.textContent=n,this.setTooltip({newTooltipText:n??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(t,e)}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),super.destroy()}};lw.EVENT_ITEM_SELECTED="selectedItem";var qh=lw,Do=class extends aw{constructor(i,t,e="text",r="input"){super(i,`
            <div role="presentation">
                <div ref="eLabel" class="ag-input-field-label"></div>
                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${r} ref="eInput" class="ag-input-field-input"></${r}>
                </div>
            </div>`,t),this.inputType=e,this.displayFieldTag=r}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;let{inputName:i,inputWidth:t}=this.config;i!=null&&this.setInputName(i),t!=null&&this.setInputWidth(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedListener(this.eInput,"input",i=>this.setValue(i.target.value))}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(i){return Ld(this.eWrapper,i),this}setInputName(i){return this.getInputElement().setAttribute("name",i),this}getFocusableElement(){return this.eInput}setMaxLength(i){let t=this.eInput;return t.maxLength=i,this}setInputPlaceholder(i){return pn(this.eInput,"placeholder",i),this}setInputAriaLabel(i){return Vr(this.eInput,i),this.refreshAriaLabelledBy(),this}setDisabled(i){return sl(this.eInput,i),super.setDisabled(i)}setAutoComplete(i){if(i===!0)pn(this.eInput,"autocomplete",null);else{let t=typeof i=="string"?i:"off";pn(this.eInput,"autocomplete",t)}return this}};g([Q("eLabel")],Do.prototype,"eLabel",2);g([Q("eWrapper")],Do.prototype,"eWrapper",2);g([Q("eInput")],Do.prototype,"eInput",2);var Kh=class extends Do{constructor(i,t="ag-checkbox",e="checkbox"){super(i,t,e),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();let{readOnly:i,passive:t}=this.config;typeof i=="boolean"&&this.setReadOnly(i),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(i){this.passive=i}isReadOnly(){return this.readOnly}setReadOnly(i){this.eWrapper.classList.toggle("ag-disabled",i),this.eInput.disabled=i,this.readOnly=i}setDisabled(i){return this.eWrapper.classList.toggle("ag-disabled",i),super.setDisabled(i)}toggle(){if(this.eInput.disabled)return;let i=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,i):this.setValue(t)}getValue(){return this.isSelected()}setValue(i,t){return this.refreshSelectedClass(i),this.setSelected(i,t),this}setName(i){let t=this.getInputElement();return t.name=i,this}isSelected(){return this.selected}setSelected(i,t){this.isSelected()!==i&&(this.previousValue=this.isSelected(),i=this.selected=typeof i=="boolean"?i:void 0,this.eInput.checked=i,this.eInput.indeterminate=i===void 0,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(i,t,e){this.dispatchEvent({type:m.EVENT_FIELD_VALUE_CHANGED,selected:i,previousValue:t,event:e});let r=this.getInputElement(),o={type:m.EVENT_CHECKBOX_CHANGED,id:r.id,name:r.name,selected:i,previousValue:t};this.eventService.dispatchEvent(o)}onCheckboxClick(i){if(this.passive||this.eInput.disabled)return;let t=this.isSelected(),e=this.selected=i.target.checked;this.refreshSelectedClass(e),this.dispatchChange(e,t,i)}refreshSelectedClass(i){this.eWrapper.classList.toggle("ag-checked",i===!0),this.eWrapper.classList.toggle("ag-indeterminate",i==null)}},uw=class extends Kh{constructor(i){super(i,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedListener(this.eventService,m.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))}onChange(i){i.selected&&i.name&&this.eInput.name&&this.eInput.name===i.name&&i.id&&this.eInput.id!==i.id&&this.setValue(!1,!0)}},tm=class{constructor(i,t,e){this.localeService=i,this.optionsFactory=t,this.valueFormatter=e}getModelAsString(i){if(!i)return null;let t=i.operator!=null,e=this.localeService.getLocaleTextFunc();if(t){let r=i,{conditions:o}=r;if(!o){let{condition1:a,condition2:l}=r;o=[a,l]}let n=o.map(a=>this.getModelAsString(a)),s=r.operator==="AND"?"andCondition":"orCondition";return n.join(` ${e(s,ow[s])} `)}else{if(i.type===Ht.BLANK||i.type===Ht.NOT_BLANK)return e(i.type,i.type);{let r=i,o=this.optionsFactory.getCustomOption(r.type),{displayKey:n,displayName:s,numberOfInputs:a}=o||{};return n&&s&&a===0?(e(n,s),s):this.conditionToString(r,o)}}}updateParams(i){this.optionsFactory=i.optionsFactory}formatValue(i){var t;return this.valueFormatter?(t=this.valueFormatter(i??null))!=null?t:"":String(i)}},rr=class qa extends wh{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(t){let e=this.optionsFactory.getCustomOption(t);if(e){let{numberOfInputs:o}=e;return o??1}let r=[qa.EMPTY,qa.NOT_BLANK,qa.BLANK];return t&&r.indexOf(t)>=0?0:t===qa.IN_RANGE?2:1}onFloatingFilterChanged(t,e){this.setTypeFromFloatingFilter(t),this.setValueFromFloatingFilter(e),this.onUiChanged(!0)}setTypeFromFloatingFilter(t){this.eTypes.forEach((e,r)=>{r===0?e.setValue(t,!0):e.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){let t=this.getUiCompleteConditions();return t.length===0?null:this.maxNumConditions>1&&t.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:t[0],condition2:t[1],conditions:t}:t[0]}getConditionTypes(){return this.eTypes.map(t=>t.getValue())}getConditionType(t){return this.eTypes[t].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(t,e){if(!t&&!e)return!0;if(!t&&e||t&&!e)return!1;let r=!t.operator,o=!e.operator;if(!r&&o||r&&!o)return!1;let s;if(r){let a=t,l=e;s=this.areSimpleModelsEqual(a,l)}else{let a=t,l=e;s=a.operator===l.operator&&cn(a.conditions,l.conditions,(d,u)=>this.areSimpleModelsEqual(d,u))}return s}shouldRefresh(t){var e,r,o;let n=this.getModel(),s=n?(e=n.conditions)!=null?e:[n]:null,a=(o=(r=t.filterOptions)==null?void 0:r.map(d=>typeof d=="string"?d:d.displayKey))!=null?o:this.getDefaultFilterOptions();return!(!(!s||s.every(d=>a.find(u=>u===d.type)!==void 0))||typeof t.maxNumConditions=="number"&&s&&s.length>t.maxNumConditions)}refresh(t){return!this.shouldRefresh(t)||!super.refresh(t)?!1:(this.setParams(t),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(t){if(t.operator){let r=t;r.conditions||(r.conditions=[r.condition1,r.condition2]);let o=this.validateAndUpdateConditions(r.conditions),n=this.getNumConditions();if(o<n)this.removeConditionsAndOperators(o);else if(o>n)for(let a=n;a<o;a++)this.createJoinOperatorPanel(),this.createOption();let s=r.operator==="OR";this.eJoinOperatorsAnd.forEach(a=>a.setValue(!s,!0)),this.eJoinOperatorsOr.forEach(a=>a.setValue(s,!0)),r.conditions.forEach((a,l)=>{this.eTypes[l].setValue(a.type,!0),this.setConditionIntoUi(a,l)})}else{let r=t;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(r.type,!0),this.setConditionIntoUi(r,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),Er.resolve()}validateAndUpdateConditions(t){let e=t.length;return e>this.maxNumConditions&&(t.splice(this.maxNumConditions),Ce('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),e=this.maxNumConditions),e}doesFilterPass(t){var e;let r=this.getModel();if(r==null)return!0;let{operator:o}=r,n=[];if(o){let a=r;n.push(...(e=a.conditions)!=null?e:[])}else n.push(r);return n[o&&o==="OR"?"some":"every"](a=>this.individualConditionPasses(t,a))}setParams(t){super.setParams(t),this.setNumConditions(t),this.defaultJoinOperator=this.getDefaultJoinOperator(t.defaultJoinOperator),this.filterPlaceholder=t.filterPlaceholder,this.optionsFactory=new rw,this.optionsFactory.init(t,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(t){var e,r;t.suppressAndOrCondition!=null&&Ce('Since v29.2 "filterParams.suppressAndOrCondition" is deprecated. Use "filterParams.maxNumConditions = 1" instead.'),t.alwaysShowBothConditions!=null&&Ce('Since v29.2 "filterParams.alwaysShowBothConditions" is deprecated. Use "filterParams.numAlwaysVisibleConditions = 2" instead.'),this.maxNumConditions=(e=t.maxNumConditions)!=null?e:t.suppressAndOrCondition?1:2,this.maxNumConditions<1&&(Ce('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=(r=t.numAlwaysVisibleConditions)!=null?r:t.alwaysShowBothConditions?2:1,this.numAlwaysVisibleConditions<1&&(Ce('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(Ce('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){let t=this.createManagedBean(new qh);this.eTypes.push(t),t.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(t.getGui());let e=this.createValueElement();this.eConditionBodies.push(e),this.eFilterBody.appendChild(e),this.putOptionsIntoDropdown(t),this.resetType(t);let r=this.getNumConditions()-1;this.forEachPositionInput(r,o=>this.resetInput(o)),this.addChangedListeners(t,r)}createJoinOperatorPanel(){let t=document.createElement("div");this.eJoinOperatorPanels.push(t),t.classList.add("ag-filter-condition");let e=this.createJoinOperator(this.eJoinOperatorsAnd,t,"and"),r=this.createJoinOperator(this.eJoinOperatorsOr,t,"or");this.eFilterBody.appendChild(t);let o=this.eJoinOperatorPanels.length-1,n=this.joinOperatorId++;this.resetJoinOperatorAnd(e,o,n),this.resetJoinOperatorOr(r,o,n),this.isReadOnly()||(e.onValueChange(this.listener),r.onValueChange(this.listener))}createJoinOperator(t,e,r){let o=this.createManagedBean(new uw);return t.push(o),o.addCssClass("ag-filter-condition-operator"),o.addCssClass(`ag-filter-condition-operator-${r}`),e.appendChild(o.getGui()),o}getDefaultJoinOperator(t){return t==="AND"||t==="OR"?t:"AND"}createFilterListOptions(){let t=this.optionsFactory.getFilterOptions();this.filterListOptions=t.map(e=>typeof e=="string"?this.createBoilerplateListOption(e):this.createCustomListOption(e))}putOptionsIntoDropdown(t){this.filterListOptions.forEach(e=>{t.addOption(e)}),t.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(t){return{value:t,text:this.translate(t)}}createCustomListOption(t){let{displayKey:e}=t,r=this.optionsFactory.getCustomOption(t.displayKey);return{value:e,text:r?this.localeService.getLocaleTextFunc()(r.displayKey,r.displayName):this.translate(e)}}isAllowTwoConditions(){return this.maxNumConditions>=2}createBodyTemplate(){return""}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){let t=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,t)}updateNumConditions(){var t;let e=-1,r=!0;for(let o=0;o<this.getNumConditions();o++)this.isConditionUiComplete(o)?e=o:r=!1;if(this.shouldAddNewConditionAtEnd(r))this.createJoinOperatorPanel(),this.createOption();else{let o=(t=this.lastUiCompletePosition)!=null?t:this.getNumConditions()-2;if(e<o){this.removeConditionsAndOperators(o+1);let n=e+1,s=o-n;s>0&&this.removeConditionsAndOperators(n,s),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(t,e){this.eTypes.forEach((o,n)=>{let s=this.isConditionDisabled(n,t);o.setDisabled(s||this.filterListOptions.length<=1),n===1&&(sl(this.eJoinOperatorPanels[0],s),this.eJoinOperatorsAnd[0].setDisabled(s),this.eJoinOperatorsOr[0].setDisabled(s))}),this.eConditionBodies.forEach((o,n)=>{qe(o,this.isConditionBodyVisible(n))});let r=(e??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach((o,n)=>{o.setValue(!r,!0)}),this.eJoinOperatorsOr.forEach((o,n)=>{o.setValue(r,!0)}),this.forEachInput((o,n,s,a)=>{this.setElementDisplayed(o,n<a),this.setElementDisabled(o,this.isConditionDisabled(s,t))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(t){return t&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(t,e){if(t>=this.getNumConditions())return;this.removeComponents(this.eTypes,t,e),this.removeElements(this.eConditionBodies,t,e),this.removeValueElements(t,e);let r=Math.max(t-1,0);this.removeElements(this.eJoinOperatorPanels,r,e),this.removeComponents(this.eJoinOperatorsAnd,r,e),this.removeComponents(this.eJoinOperatorsOr,r,e)}removeElements(t,e,r){this.removeItems(t,e,r).forEach(n=>Eo(n))}removeComponents(t,e,r){this.removeItems(t,e,r).forEach(n=>{Eo(n.getGui()),this.destroyBean(n)})}removeItems(t,e,r){return r==null?t.splice(e):t.splice(e,r)}afterGuiAttached(t){if(super.afterGuiAttached(t),this.resetPlaceholder(),!t?.suppressFocus)if(this.isReadOnly())this.eFilterBody.focus();else{let e=this.getInputs(0)[0];if(!e)return;e instanceof Do&&e.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();let t=this.getModel();this.resetUiToActiveModel(t);let e=-1,r=-1,o=!1,n=this.getJoinOperator();for(let a=this.getNumConditions()-1;a>=0;a--)if(this.isConditionUiComplete(a))e===-1&&(e=a,r=a);else{let l=a>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(a-1),d=a<e;(l||d)&&(this.removeConditionsAndOperators(a,1),o=!0,d&&r--)}let s=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),s=!0),this.shouldAddNewConditionAtEnd(r===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),s=!0),s&&this.updateConditionStatusesAndValues(r,n),o&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=r}getPlaceholderText(t,e){let r=this.translate(t);if(Ah(this.filterPlaceholder)){let o=this.filterPlaceholder,n=this.eTypes[e].getValue(),s=this.translate(n);r=o({filterOptionKey:n,filterOption:s,placeholder:r})}else typeof this.filterPlaceholder=="string"&&(r=this.filterPlaceholder);return r}resetPlaceholder(){let t=this.localeService.getLocaleTextFunc();this.forEachInput((e,r,o,n)=>{if(!(e instanceof Do))return;let s=r===0&&n>1?"inRangeStart":r===0?"filterOoo":"inRangeEnd",a=r===0&&n>1?t("ariaFilterFromValue","Filter from value"):r===0?t("ariaFilterValue","Filter Value"):t("ariaFilterToValue","Filter to Value");e.setInputPlaceholder(this.getPlaceholderText(s,o)),e.setInputAriaLabel(a)})}setElementValue(t,e,r){t instanceof Do&&t.setValue(e!=null?String(e):null,!0)}setElementDisplayed(t,e){t instanceof Pe&&qe(t.getGui(),e)}setElementDisabled(t,e){t instanceof Pe&&sl(t.getGui(),e)}attachElementOnChange(t,e){t instanceof Do&&t.onValueChange(e)}forEachInput(t){this.getConditionTypes().forEach((e,r)=>{this.forEachPositionTypeInput(r,e,t)})}forEachPositionInput(t,e){let r=this.getConditionType(t);this.forEachPositionTypeInput(t,r,e)}forEachPositionTypeInput(t,e,r){let o=this.getNumberOfInputs(e),n=this.getInputs(t);for(let s=0;s<n.length;s++){let a=n[s];a!=null&&r(a,s,t,o)}}isConditionDisabled(t,e){return this.isReadOnly()?!0:t===0?!1:t>e+1}isConditionBodyVisible(t){let e=this.getConditionType(t);return this.getNumberOfInputs(e)>0}isConditionUiComplete(t){return!(t>=this.getNumConditions()||this.getConditionType(t)===qa.EMPTY||this.getValues(t).some(r=>r==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){let t=[];for(let e=0;e<this.getNumConditions();e++)this.isConditionUiComplete(e)&&t.push(this.createCondition(e));return t}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let t=this.getNumConditions();t<this.numAlwaysVisibleConditions;t++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(t){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(e=>this.resetType(e)),this.eJoinOperatorsAnd.forEach((e,r)=>this.resetJoinOperatorAnd(e,r,this.joinOperatorId+r)),this.eJoinOperatorsOr.forEach((e,r)=>this.resetJoinOperatorOr(e,r,this.joinOperatorId+r)),this.joinOperatorId++,this.forEachInput(e=>this.resetInput(e)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,t||this.onUiChanged(),Er.resolve()}resetType(t){let r=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");t.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(r).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(t,e,r){this.resetJoinOperator(t,e,this.isDefaultOperator("AND"),this.translate("andCondition"),r)}resetJoinOperatorOr(t,e,r){this.resetJoinOperator(t,e,this.isDefaultOperator("OR"),this.translate("orCondition"),r)}resetJoinOperator(t,e,r,o,n){this.updateJoinOperatorDisabled(t.setValue(r,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${n}`).setLabel(o),e)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((t,e)=>this.updateJoinOperatorDisabled(t,e)),this.eJoinOperatorsOr.forEach((t,e)=>this.updateJoinOperatorDisabled(t,e))}updateJoinOperatorDisabled(t,e){t.setDisabled(this.isReadOnly()||e>0)}resetInput(t){this.setElementValue(t,null),this.setElementDisabled(t,this.isReadOnly())}setConditionIntoUi(t,e){let r=this.mapValuesFromModel(t);this.forEachInput((o,n,s,a)=>{s===e&&this.setElementValue(o,r[n]!=null?r[n]:null)})}setValueFromFloatingFilter(t){this.forEachInput((e,r,o,n)=>{this.setElementValue(e,r===0&&o===0?t:null,!0)})}isDefaultOperator(t){return t===this.defaultJoinOperator}addChangedListeners(t,e){this.isReadOnly()||(t.onValueChange(this.listener),this.forEachPositionInput(e,r=>{this.attachElementOnChange(r,this.listener)}))}individualConditionPasses(t,e){let r=this.getCellValue(t.node),o=this.mapValuesFromModel(e),n=this.optionsFactory.getCustomOption(e.type),s=this.evaluateCustomFilter(n,o,r);return s??(r==null?this.evaluateNullValue(e.type):this.evaluateNonNullValue(o,r,e,t))}evaluateCustomFilter(t,e,r){if(t==null)return;let{predicate:o}=t;if(o!=null&&!e.some(n=>n==null))return o(e,r)}isBlank(t){return t==null||typeof t=="string"&&t.trim().length===0}hasInvalidInputs(){return!1}};rr.EMPTY="empty";rr.BLANK="blank";rr.NOT_BLANK="notBlank";rr.EQUALS="equals";rr.NOT_EQUAL="notEqual";rr.LESS_THAN="lessThan";rr.LESS_THAN_OR_EQUAL="lessThanOrEqual";rr.GREATER_THAN="greaterThan";rr.GREATER_THAN_OR_EQUAL="greaterThanOrEqual";rr.IN_RANGE="inRange";rr.CONTAINS="contains";rr.NOT_CONTAINS="notContains";rr.STARTS_WITH="startsWith";rr.ENDS_WITH="endsWith";var Ht=rr,fi=class bi extends Ht{setParams(t){super.setParams(t),this.scalarFilterParams=t}evaluateNullValue(t){switch(t){case bi.EQUALS:case bi.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case bi.GREATER_THAN:case bi.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case bi.LESS_THAN:case bi.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case bi.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case bi.BLANK:return!0;case bi.NOT_BLANK:return!1}return!1}evaluateNonNullValue(t,e,r){let o=this.comparator(),n=t[0]!=null?o(t[0],e):0;switch(r.type){case bi.EQUALS:return n===0;case bi.NOT_EQUAL:return n!==0;case bi.GREATER_THAN:return n>0;case bi.GREATER_THAN_OR_EQUAL:return n>=0;case bi.LESS_THAN:return n<0;case bi.LESS_THAN_OR_EQUAL:return n<=0;case bi.IN_RANGE:{let s=o(t[1],e);return this.scalarFilterParams.inRangeInclusive?n>=0&&s<=0:n>0&&s<0}case bi.BLANK:return this.isBlank(e);case bi.NOT_BLANK:return!this.isBlank(e);default:return console.warn('AG Grid: Unexpected type of filter "'+r.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},CC=1e3,bC=1/0,cw=class extends tm{constructor(i,t,e){super(t,e),this.dateFilterParams=i}conditionToString(i,t){let{type:e}=i,{numberOfInputs:r}=t||{},o=e==Ht.IN_RANGE||r===2,n=Sr(i.dateFrom),s=Sr(i.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(o){let l=n!==null?tl(n,a):"null",d=s!==null?tl(s,a):"null";return`${l}-${d}`}return n!=null?tl(n,a):`${e}`}updateParams(i){super.updateParams(i),this.dateFilterParams=i.dateFilterParams}},im=class hw extends fi{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=CC,this.maxValidYear=bC,this.minValidDate=null,this.maxValidDate=null}afterGuiAttached(t){super.afterGuiAttached(t),this.dateConditionFromComps[0].afterGuiAttached(t)}mapValuesFromModel(t){let{dateFrom:e,dateTo:r,type:o}=t||{};return[e&&Sr(e)||null,r&&Sr(r)||null].slice(0,this.getNumberOfInputs(o))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(t,e){let r=e;return e==null||r<t?-1:r>t?1:0}setParams(t){this.dateFilterParams=t,super.setParams(t);let e=(r,o)=>{if(t[r]!=null)if(isNaN(t[r]))console.warn(`AG Grid: DateFilter ${r} is not a number`);else return t[r]==null?o:Number(t[r]);return o};this.minValidYear=e("minValidYear",CC),this.maxValidYear=e("maxValidYear",bC),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),t.minValidDate?this.minValidDate=t.minValidDate instanceof Date?t.minValidDate:Sr(t.minValidDate):this.minValidDate=null,t.maxValidDate?this.maxValidDate=t.maxValidDate instanceof Date?t.maxValidDate:Sr(t.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&console.warn("AG Grid: DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new cw(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(t){let e=new iw(this.getContext(),this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},t);return this.addDestroyFunc(()=>e.destroy()),e}setElementValue(t,e){t.setDate(e)}setElementDisplayed(t,e){t.setDisplayed(e)}setElementDisabled(t,e){t.setDisabled(e)}getDefaultFilterOptions(){return hw.DEFAULT_FILTER_OPTIONS}createValueElement(){let e=this.gos.getDocument().createElement("div");return e.classList.add("ag-filter-body"),this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(t,e,r,o){let s=this.gos.getDocument().createElement("div");s.classList.add(`ag-filter-${o}`),s.classList.add(`ag-filter-date-${o}`),e.push(s),t.appendChild(s),r.push(this.createDateCompWrapper(s))}removeValueElements(t,e){this.removeDateComps(this.dateConditionFromComps,t,e),this.removeDateComps(this.dateConditionToComps,t,e),this.removeItems(this.eConditionPanelsFrom,t,e),this.removeItems(this.eConditionPanelsTo,t,e)}removeDateComps(t,e,r){this.removeItems(t,e,r).forEach(n=>n.destroy())}isValidDateValue(t){if(t===null)return!1;if(this.minValidDate){if(t<this.minValidDate)return!1}else if(t.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(t>this.maxValidDate)return!1}else if(t.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(t){if(!super.isConditionUiComplete(t))return!1;let e=!0;return this.forEachInput((r,o,n,s)=>{n!==t||!e||o>=s||(e=e&&this.isValidDateValue(r.getDate()))}),e}areSimpleModelsEqual(t,e){return t.dateFrom===e.dateFrom&&t.dateTo===e.dateTo&&t.type===e.type}getFilterType(){return"date"}createCondition(t){let e=this.getConditionType(t),r={},o=this.getValues(t);return o.length>0&&(r.dateFrom=Jr(o[0])),o.length>1&&(r.dateTo=Jr(o[1])),he({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:e},r)}resetPlaceholder(){let t=this.localeService.getLocaleTextFunc(),e=this.translate("dateFormatOoo"),r=t("ariaFilterValue","Filter Value");this.forEachInput(o=>{o.setInputPlaceholder(e),o.setInputAriaLabel(r)})}getInputs(t){return t>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[t],this.dateConditionToComps[t]]}getValues(t){let e=[];return this.forEachPositionInput(t,(r,o,n,s)=>{o<s&&e.push(r.getDate())}),e}translate(t){return t===fi.LESS_THAN?super.translate("before"):t===fi.GREATER_THAN?super.translate("after"):super.translate(t)}getModelAsString(t){var e;return(e=this.filterModelFormatter.getModelAsString(t))!=null?e:""}};im.DEFAULT_FILTER_OPTIONS=[fi.EQUALS,fi.NOT_EQUAL,fi.LESS_THAN,fi.GREATER_THAN,fi.IN_RANGE,fi.BLANK,fi.NOT_BLANK];g([w("userComponentFactory")],im.prototype,"userComponentFactory",2);var pw=im,rm=class extends Pe{getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(i){return i&&i.afterFloatingFilter}isEventFromDataChange(i){return i?.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(i){if(!i){this.lastType=this.optionsFactory.getDefaultOption();return}let t=i.operator,e;t?e=i.conditions[0]:e=i,this.lastType=e.type}canWeEditAfterModelFromParentFilter(i){if(!i)return this.isTypeEditable(this.lastType);if(i.operator)return!1;let e=i;return this.isTypeEditable(e.type)}init(i){this.setSimpleParams(i,!1)}setSimpleParams(i,t=!0){this.optionsFactory=new rw,this.optionsFactory.init(i.filterParams,this.getDefaultFilterOptions()),t||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!i.filterParams.readOnly;let e=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(e)}onParamsUpdated(i){this.refresh(i)}refresh(i){this.setSimpleParams(i)}doesFilterHaveSingleInput(i){let t=this.optionsFactory.getCustomOption(i),{numberOfInputs:e}=t||{};return e==null||e==1}isTypeEditable(i){let t=[Ht.IN_RANGE,Ht.EMPTY,Ht.BLANK,Ht.NOT_BLANK];return!!i&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(i)&&t.indexOf(i)<0}getAriaLabel(i){let t=this.columnModel.getDisplayNameForColumn(i.column,"header",!0),e=this.localeService.getLocaleTextFunc();return`${t} ${e("ariaFilterInput","Filter Input")}`}};g([w("columnModel")],rm.prototype,"columnModel",2);var Yh=class extends rm{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>
                <div ref="eDateWrapper" style="display: flex;"></div>
            </div>`)}getDefaultFilterOptions(){return pw.DEFAULT_FILTER_OPTIONS}init(i){super.init(i),this.params=i,this.filterParams=i.filterParams,this.createDateComponent(),this.filterModelFormatter=new cw(this.filterParams,this.localeService,this.optionsFactory);let t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(i){this.refresh(i)}refresh(i){super.refresh(i),this.params=i,this.filterParams=i.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(i.currentParentModel())}updateCompOnModelChange(i){let t=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(i);if(this.setEditable(t),t){if(i){let e=i;this.dateComp.setDate(Sr(e.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(i)),this.dateComp.setDate(null)}setEditable(i){qe(this.eDateWrapper,i),qe(this.eReadOnlyText.getGui(),!i)}onParentModelChanged(i,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(super.setLastTypeFromModel(i),this.updateCompOnModelChange(i))}onDateChanged(){let i=this.dateComp.getDate(),t=Jr(i);this.params.parentFilterInstance(e=>{if(e){let r=Sr(t);e.onFloatingFilterChanged(this.getLastType()||null,r)}})}getDateComponentParams(){let i=wh.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:Ji(this.onDateChanged.bind(this),i),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new iw(this.getContext(),this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,i=>{i.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){let i=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(i)}getFilterModelFormatter(){return this.filterModelFormatter}};g([w("userComponentFactory")],Yh.prototype,"userComponentFactory",2);g([Q("eReadOnlyText")],Yh.prototype,"eReadOnlyText",2);g([Q("eDateWrapper")],Yh.prototype,"eDateWrapper",2);var gw=class extends Pe{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>
            </div>`)}destroy(){super.destroy()}init(i){this.params=i,this.setParams(i);let t=this.eDateInput.getInputElement();this.addManagedListener(t,"mousedown",()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus()}),this.addManagedListener(t,"input",e=>{e.target===this.gos.getActiveDomElement()&&(this.eDateInput.isDisabled()||this.params.onDateChanged())})}setParams(i){let t=this.eDateInput.getInputElement(),e=this.shouldUseBrowserDatePicker(i);this.usingSafariDatePicker=e&&gn(),t.type=e?"date":"text";let{minValidYear:r,maxValidYear:o,minValidDate:n,maxValidDate:s}=i.filterParams||{};if(n&&r&&Ce("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),s&&o&&Ce("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),n&&s){let[a,l]=[n,s].map(d=>d instanceof Date?d:Sr(d));a&&l&&a.getTime()>l.getTime()&&Ce("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}n?n instanceof Date?t.min=tl(n):t.min=n:r&&(t.min=`${r}-01-01`),s?s instanceof Date?t.max=tl(s):t.max=s:o&&(t.max=`${o}-12-31`)}onParamsUpdated(i){this.refresh(i)}refresh(i){this.params=i,this.setParams(i)}getDate(){return Sr(this.eDateInput.getValue())}setDate(i){this.eDateInput.setValue(Jr(i,!1))}setInputPlaceholder(i){this.eDateInput.setInputPlaceholder(i)}setInputAriaLabel(i){this.eDateInput.setAriaLabel(i)}setDisabled(i){this.eDateInput.setDisabled(i)}afterGuiAttached(i){(!i||!i.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(i){return i.filterParams&&i.filterParams.browserDatePicker!=null?i.filterParams.browserDatePicker:Hh()||Lf()||gn()&&Of()>=14.1}};g([Q("eDateInput")],gw.prototype,"eDateInput",2);var ea=class extends Do{constructor(i,t="ag-text-field",e="text"){super(i,t,e)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(i,t){return this.eInput.value!==i&&(this.eInput.value=W(i)?i:""),super.setValue(i,t)}setStartValue(i){this.setValue(i,!0)}preventDisallowedCharacters(){let i=new RegExp(`[${this.config.allowedCharPattern}]`),t=e=>{$h(e)&&e.key&&!i.test(e.key)&&e.preventDefault()};this.addManagedListener(this.eInput,"keydown",t),this.addManagedListener(this.eInput,"paste",e=>{var r;let o=(r=e.clipboardData)==null?void 0:r.getData("text");o&&o.split("").some(n=>!i.test(n))&&e.preventDefault()})}},om=class extends ea{constructor(i){super(i,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"blur",()=>{let o=parseFloat(this.eInput.value),n=isNaN(o)?"":this.normalizeValue(o.toString());this.value!==n&&this.setValue(n)}),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this)),this.eInput.step="any";let{precision:i,min:t,max:e,step:r}=this.config;typeof i=="number"&&this.setPrecision(i),typeof t=="number"&&this.setMin(t),typeof e=="number"&&this.setMax(e),typeof r=="number"&&this.setStep(r)}onWheel(i){this.gos.getActiveDomElement()===this.eInput&&i.preventDefault()}normalizeValue(i){if(i==="")return"";this.precision!=null&&(i=this.adjustPrecision(i));let t=parseFloat(i);return this.min!=null&&t<this.min?i=this.min.toString():this.max!=null&&t>this.max&&(i=this.max.toString()),i}adjustPrecision(i,t){if(this.precision==null)return i;if(t){let r=parseFloat(i).toFixed(this.precision);return parseFloat(r).toString()}let e=String(i).split(".");if(e.length>1){if(e[1].length<=this.precision)return i;if(this.precision>0)return`${e[0]}.${e[1].slice(0,this.precision)}`}return e[0]}setMin(i){return this.min===i?this:(this.min=i,pn(this.eInput,"min",i),this)}setMax(i){return this.max===i?this:(this.max=i,pn(this.eInput,"max",i),this)}setPrecision(i){return this.precision=i,this}setStep(i){return this.step===i?this:(this.step=i,pn(this.eInput,"step",i),this)}setValue(i,t){return this.setValueOrInputValue(e=>super.setValue(e,t),()=>this,i)}setStartValue(i){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},i)}setValueOrInputValue(i,t,e){if(W(e)){let r=this.isScientificNotation(e);if(r&&this.eInput.validity.valid)return i(e);if(!r){e=this.adjustPrecision(e);let o=this.normalizeValue(e);r=e!=o}if(r)return t(e)}return i(e)}getValue(){if(!this.eInput.validity.valid)return;let i=this.eInput.value;return this.isScientificNotation(i)?this.adjustPrecision(i,!0):super.getValue()}isScientificNotation(i){return typeof i=="string"&&i.includes("e")}},fw=class extends tm{conditionToString(i,t){let{numberOfInputs:e}=t||{};return i.type==Ht.IN_RANGE||e===2?`${this.formatValue(i.filter)}-${this.formatValue(i.filterTo)}`:i.filter!=null?this.formatValue(i.filter):`${i.type}`}};function af(i){let{allowedCharPattern:t}=i??{};return t??null}var mw=class vw extends fi{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(t){return this.numberFilterParams.allowedCharPattern!==t.allowedCharPattern?!1:super.refresh(t)}mapValuesFromModel(t){let{filter:e,filterTo:r,type:o}=t||{};return[this.processValue(e),this.processValue(r)].slice(0,this.getNumberOfInputs(o))}getDefaultDebounceMs(){return 500}comparator(){return(t,e)=>t===e?0:t<e?1:-1}setParams(t){this.numberFilterParams=t,super.setParams(t),this.filterModelFormatter=new fw(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return vw.DEFAULT_FILTER_OPTIONS}setElementValue(t,e,r){let o=!r&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(e??null):e;super.setElementValue(t,o)}createValueElement(){let t=af(this.numberFilterParams),e=document.createElement("div");return e.classList.add("ag-filter-body"),Bt(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from",t),this.createFromToElement(e,this.eValuesTo,"to",t),e}createFromToElement(t,e,r,o){let n=this.createManagedBean(o?new ea({allowedCharPattern:o}):new om);n.addCssClass(`ag-filter-${r}`),n.addCssClass("ag-filter-filter"),e.push(n),t.appendChild(n.getGui())}removeValueElements(t,e){this.removeComponents(this.eValuesFrom,t,e),this.removeComponents(this.eValuesTo,t,e)}getValues(t){let e=[];return this.forEachPositionInput(t,(r,o,n,s)=>{o<s&&e.push(this.processValue(this.stringToFloat(r.getValue())))}),e}areSimpleModelsEqual(t,e){return t.filter===e.filter&&t.filterTo===e.filterTo&&t.type===e.type}getFilterType(){return"number"}processValue(t){return t==null||isNaN(t)?null:t}stringToFloat(t){if(typeof t=="number")return t;let e=hn(t);return e!=null&&e.trim()===""&&(e=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(e):e==null||e.trim()==="-"?null:parseFloat(e)}createCondition(t){let e=this.getConditionType(t),r={filterType:this.getFilterType(),type:e},o=this.getValues(t);return o.length>0&&(r.filter=o[0]),o.length>1&&(r.filterTo=o[1]),r}getInputs(t){return t>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[t],this.eValuesTo[t]]}getModelAsString(t){var e;return(e=this.filterModelFormatter.getModelAsString(t))!=null?e:""}hasInvalidInputs(){let t=!1;return this.forEachInput(e=>{if(!e.getInputElement().validity.valid){t=!0;return}}),t}};mw.DEFAULT_FILTER_OPTIONS=[fi.EQUALS,fi.NOT_EQUAL,fi.GREATER_THAN,fi.GREATER_THAN_OR_EQUAL,fi.LESS_THAN,fi.LESS_THAN_OR_EQUAL,fi.IN_RANGE,fi.BLANK,fi.NOT_BLANK];var yw=mw,Cw=class extends tm{conditionToString(i,t){let{numberOfInputs:e}=t||{};return i.type==Ht.IN_RANGE||e===2?`${i.filter}-${i.filterTo}`:i.filter!=null?`${i.filter}`:`${i.type}`}},_o=class Ka extends Ht{constructor(){super("textFilter"),this.eValuesFrom=[],this.eValuesTo=[]}static trimInput(t){let e=t&&t.trim();return e===""?t:e}getDefaultDebounceMs(){return 500}setParams(t){this.textFilterParams=t,super.setParams(t),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?Ka.DEFAULT_FORMATTER:Ka.DEFAULT_LOWERCASE_FORMATTER),this.filterModelFormatter=new Cw(this.localeService,this.optionsFactory)}getTextMatcher(){let t=this.textFilterParams.textCustomComparator;return t?(He.warnOnce("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:e,value:r,filterText:o})=>t(e,r,o)):this.textFilterParams.textMatcher||Ka.DEFAULT_MATCHER}createCondition(t){let e=this.getConditionType(t),r={filterType:this.getFilterType(),type:e},o=this.getValuesWithSideEffects(t,!0);return o.length>0&&(r.filter=o[0]),o.length>1&&(r.filterTo=o[1]),r}getFilterType(){return"text"}areSimpleModelsEqual(t,e){return t.filter===e.filter&&t.filterTo===e.filterTo&&t.type===e.type}getInputs(t){return t>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[t],this.eValuesTo[t]]}getValues(t){return this.getValuesWithSideEffects(t,!1)}getValuesWithSideEffects(t,e){let r=[];return this.forEachPositionInput(t,(o,n,s,a)=>{var l;if(n<a){let d=hn(o.getValue());e&&this.textFilterParams.trimInput&&(d=(l=Ka.trimInput(d))!=null?l:null,o.setValue(d,!0)),r.push(d)}}),r}getDefaultFilterOptions(){return Ka.DEFAULT_FILTER_OPTIONS}createValueElement(){let t=document.createElement("div");return t.classList.add("ag-filter-body"),Bt(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from"),this.createFromToElement(t,this.eValuesTo,"to"),t}createFromToElement(t,e,r){let o=this.createManagedBean(new ea);o.addCssClass(`ag-filter-${r}`),o.addCssClass("ag-filter-filter"),e.push(o),t.appendChild(o.getGui())}removeValueElements(t,e){this.removeComponents(this.eValuesFrom,t,e),this.removeComponents(this.eValuesTo,t,e)}mapValuesFromModel(t){let{filter:e,filterTo:r,type:o}=t||{};return[e||null,r||null].slice(0,this.getNumberOfInputs(o))}evaluateNullValue(t){let e=[Ht.NOT_EQUAL,Ht.NOT_CONTAINS,Ht.BLANK];return t?e.indexOf(t)>=0:!1}evaluateNonNullValue(t,e,r,o){let n=t.map(f=>this.formatter(f))||[],s=this.formatter(e),{api:a,colDef:l,column:d,columnApi:u,context:c,textFormatter:h}=this.textFilterParams;if(r.type===Ht.BLANK)return this.isBlank(e);if(r.type===Ht.NOT_BLANK)return!this.isBlank(e);let p={api:a,colDef:l,column:d,columnApi:u,context:c,node:o.node,data:o.data,filterOption:r.type,value:s,textFormatter:h};return n.some(f=>this.matcher(Pt(he({},p),{filterText:f})))}getModelAsString(t){var e;return(e=this.filterModelFormatter.getModelAsString(t))!=null?e:""}};_o.DEFAULT_FILTER_OPTIONS=[Ht.CONTAINS,Ht.NOT_CONTAINS,Ht.EQUALS,Ht.NOT_EQUAL,Ht.STARTS_WITH,Ht.ENDS_WITH,Ht.BLANK,Ht.NOT_BLANK];_o.DEFAULT_FORMATTER=i=>i;_o.DEFAULT_LOWERCASE_FORMATTER=i=>i==null?null:i.toString().toLowerCase();_o.DEFAULT_MATCHER=({filterOption:i,value:t,filterText:e})=>{if(e==null)return!1;switch(i){case _o.CONTAINS:return t.indexOf(e)>=0;case _o.NOT_CONTAINS:return t.indexOf(e)<0;case _o.EQUALS:return t===e;case _o.NOT_EQUAL:return t!=e;case _o.STARTS_WITH:return t.indexOf(e)===0;case _o.ENDS_WITH:let r=t.lastIndexOf(e);return r>=0&&r===t.length-e.length;default:return!1}};var nm=_o,bw=class extends j{constructor(i){super(),this.params=i,this.valueChangedListener=()=>{}}setupGui(i){var t;this.eFloatingFilterTextInput=this.createManagedBean(new ea((t=this.params)==null?void 0:t.config));let e=this.eFloatingFilterTextInput.getGui();i.appendChild(e),this.addManagedListener(e,"input",r=>this.valueChangedListener(r)),this.addManagedListener(e,"keydown",r=>this.valueChangedListener(r))}setEditable(i){this.eFloatingFilterTextInput.setDisabled(!i)}setAutoComplete(i){this.eFloatingFilterTextInput.setAutoComplete(i)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(i,t){this.eFloatingFilterTextInput.setValue(i,t)}setValueChangedListener(i){this.valueChangedListener=i}setParams(i){this.setAriaLabel(i.ariaLabel),i.autoComplete!==void 0&&this.setAutoComplete(i.autoComplete)}setAriaLabel(i){this.eFloatingFilterTextInput.setInputAriaLabel(i)}},Xh=class extends rm{postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(i,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(i),this.setEditable(this.canWeEditAfterModelFromParentFilter(i)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(i)))}init(i){this.setupFloatingFilterInputService(i),super.init(i),this.setTextInputParams(i)}setupFloatingFilterInputService(i){this.floatingFilterInputService=this.createFloatingFilterInputService(i),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(i){var t;this.params=i;let e=(t=i.browserAutoComplete)!=null?t:!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(i),autoComplete:e}),this.applyActive=wh.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){let r=wh.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),o=Ji(this.syncUpWithParentFilter.bind(this),r);this.floatingFilterInputService.setValueChangedListener(o)}}onParamsUpdated(i){this.refresh(i)}refresh(i){super.refresh(i),this.setTextInputParams(i)}recreateFloatingFilterInputService(i){let t=this.floatingFilterInputService.getValue();Zt(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(i),this.floatingFilterInputService.setValue(t,!0)}syncUpWithParentFilter(i){let t=i.key===z.ENTER;if(this.applyActive&&!t)return;let e=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(e=nm.trimInput(e),this.floatingFilterInputService.setValue(e,!0)),this.params.parentFilterInstance(r=>{r&&r.onFloatingFilterChanged(this.getLastType()||null,e||null)})}setEditable(i){this.floatingFilterInputService.setEditable(i)}};g([Q("eFloatingFilterInputContainer")],Xh.prototype,"eFloatingFilterInputContainer",2);g([U],Xh.prototype,"postConstruct",1);var $E=class extends j{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(i){this.eFloatingFilterNumberInput=this.createManagedBean(new om),this.eFloatingFilterTextInput=this.createManagedBean(new ea),this.eFloatingFilterTextInput.setDisabled(!0);let t=this.eFloatingFilterNumberInput.getGui(),e=this.eFloatingFilterTextInput.getGui();i.appendChild(t),i.appendChild(e),this.setupListeners(t,r=>this.valueChangedListener(r)),this.setupListeners(e,r=>this.valueChangedListener(r))}setEditable(i){this.numberInputActive=i,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(i){this.eFloatingFilterNumberInput.setAutoComplete(i),this.eFloatingFilterTextInput.setAutoComplete(i)}getValue(){return this.getActiveInputElement().getValue()}setValue(i,t){this.getActiveInputElement().setValue(i,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(i){this.valueChangedListener=i}setupListeners(i,t){this.addManagedListener(i,"input",t),this.addManagedListener(i,"keydown",t)}setParams(i){this.setAriaLabel(i.ariaLabel),i.autoComplete!==void 0&&this.setAutoComplete(i.autoComplete)}setAriaLabel(i){this.eFloatingFilterNumberInput.setInputAriaLabel(i),this.eFloatingFilterTextInput.setInputAriaLabel(i)}},WE=class extends Xh{init(i){var t;super.init(i),this.filterModelFormatter=new fw(this.localeService,this.optionsFactory,(t=i.filterParams)==null?void 0:t.numberFormatter)}onParamsUpdated(i){this.refresh(i)}refresh(i){af(i.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(i),super.refresh(i),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return yw.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(i){return this.allowedCharPattern=af(i.filterParams),this.allowedCharPattern?this.createManagedBean(new bw({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new $E)}},jE=class extends Xh{init(i){super.init(i),this.filterModelFormatter=new Cw(this.localeService,this.optionsFactory)}onParamsUpdated(i){this.refresh(i)}refresh(i){super.refresh(i),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return nm.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new bw)}},au=class wd{constructor(t,e=!1){this.destroyFuncs=[],this.touching=!1,this.eventService=new Po,this.eElement=t,this.preventMouseClick=e;let r=this.onTouchStart.bind(this),o=this.onTouchMove.bind(this),n=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",r,{passive:!0}),this.eElement.addEventListener("touchmove",o,{passive:!0}),this.eElement.addEventListener("touchend",n,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",r,{passive:!0}),this.eElement.removeEventListener("touchmove",o,{passive:!0}),this.eElement.removeEventListener("touchend",n,{passive:!1})})}getActiveTouch(t){for(let e=0;e<t.length;e++)if(t[e].identifier===this.touchStart.identifier)return t[e];return null}addEventListener(t,e){this.eventService.addEventListener(t,e)}removeEventListener(t,e){this.eventService.removeEventListener(t,e)}onTouchStart(t){if(this.touching)return;this.touchStart=t.touches[0],this.touching=!0,this.moved=!1;let e=this.touchStart;window.setTimeout(()=>{let r=this.touchStart===e;if(this.touching&&r&&!this.moved){this.moved=!0;let o={type:wd.EVENT_LONG_TAP,touchStart:this.touchStart,touchEvent:t};this.eventService.dispatchEvent(o)}},500)}onTouchMove(t){if(!this.touching)return;let e=this.getActiveTouch(t.touches);if(!e)return;!Qf(e,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(t){if(this.touching){if(!this.moved){let e={type:wd.EVENT_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(e),this.checkForDoubleTap()}this.preventMouseClick&&t.cancelable&&t.preventDefault(),this.touching=!1}}checkForDoubleTap(){let t=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(t-this.lastTapTime>wd.DOUBLE_TAP_MILLIS){let r={type:wd.EVENT_DOUBLE_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(r),this.lastTapTime=null}else this.lastTapTime=t;else this.lastTapTime=t}destroy(){this.destroyFuncs.forEach(t=>t())}};au.EVENT_TAP="tap";au.EVENT_DOUBLE_TAP="doubleTap";au.EVENT_LONG_TAP="longTap";au.DOUBLE_TAP_MILLIS=500;var Di=au,kn=class ww extends Pe{constructor(t){super(),t||this.setTemplate(ww.TEMPLATE)}attachCustomElements(t,e,r,o,n){this.eSortOrder=t,this.eSortAsc=e,this.eSortDesc=r,this.eSortMixed=o,this.eSortNone=n}setupSort(t,e=!1){this.column=t,this.suppressOrder=e,this.setupMultiSortIndicator(),!(!this.column.isSortable()&&!this.column.getColDef().showRowGroup)&&(this.addInIcon("sortAscending",this.eSortAsc,t),this.addInIcon("sortDescending",this.eSortDesc,t),this.addInIcon("sortUnSort",this.eSortNone,t),this.addManagedPropertyListener("unSortIcon",()=>this.updateIcons()),this.addManagedListener(this.eventService,m.EVENT_NEW_COLUMNS_LOADED,()=>this.updateIcons()),this.addManagedListener(this.eventService,m.EVENT_SORT_CHANGED,()=>this.onSortChanged()),this.addManagedListener(this.eventService,m.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onSortChanged()),this.onSortChanged())}addInIcon(t,e,r){if(e==null)return;let o=It(t,this.gos,r);o&&e.appendChild(o)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){let t=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){let e=t==="asc";qe(this.eSortAsc,e,{skipAriaHidden:!0})}if(this.eSortDesc){let e=t==="desc";qe(this.eSortDesc,e,{skipAriaHidden:!0})}if(this.eSortNone){let e=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),r=t==null;qe(this.eSortNone,!e&&r,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);let t=this.column.getColDef().showRowGroup;this.gos.isColumnsSortingCoupledToGroup()&&t&&(this.addManagedListener(this.eventService,m.EVENT_SORT_CHANGED,()=>this.updateMultiSortIndicator()),this.addManagedListener(this.eventService,m.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.updateMultiSortIndicator()),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){let t=this.sortController.getDisplaySortForColumn(this.column)==="mixed";qe(this.eSortMixed,t,{skipAriaHidden:!0})}}updateSortOrder(){var t;if(!this.eSortOrder)return;let e=this.sortController.getColumnsWithSortingOrdered(),r=(t=this.sortController.getDisplaySortIndexForColumn(this.column))!=null?t:-1,o=e.some(s=>{var a;return(a=this.sortController.getDisplaySortIndexForColumn(s))!=null?a:!1}),n=r>=0&&o;qe(this.eSortOrder,n,{skipAriaHidden:!0}),r>=0?this.eSortOrder.textContent=(r+1).toString():Zt(this.eSortOrder)}};kn.TEMPLATE=`<span class="ag-sort-indicator-container">
            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>
            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>
        </span>`;g([Q("eSortOrder")],kn.prototype,"eSortOrder",2);g([Q("eSortAsc")],kn.prototype,"eSortAsc",2);g([Q("eSortDesc")],kn.prototype,"eSortDesc",2);g([Q("eSortMixed")],kn.prototype,"eSortMixed",2);g([Q("eSortNone")],kn.prototype,"eSortNone",2);g([w("columnModel")],kn.prototype,"columnModel",2);g([w("sortController")],kn.prototype,"sortController",2);var sm=kn,Ui=class Sw extends Pe{constructor(){super(...arguments),this.lastMovingChanged=0}destroy(){super.destroy()}refresh(t){let e=this.params;return this.params=t,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||e.enableFilterButton!=t.enableFilterButton||e.enableFilterIcon!=t.enableFilterIcon?!1:(this.setDisplayName(t),!0)}workOutTemplate(){var t;let e=(t=this.params.template)!=null?t:Sw.TEMPLATE;return e=e&&e.trim?e.trim():e,e}init(t){this.params=t,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(t)}setDisplayName(t){if(this.currentDisplayName!=t.displayName){this.currentDisplayName=t.displayName;let e=ti(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=e)}}addInIcon(t,e,r){if(e==null)return;let o=It(t,this.gos,r);o&&e.appendChild(o)}setupTap(){let{gos:t}=this;if(t.get("suppressTouch"))return;let e=new Di(this.getGui(),!0),r=this.shouldSuppressMenuHide(),o=r&&W(this.eMenu),n=o?new Di(this.eMenu,!0):e;if(this.params.enableMenu){let s=o?"EVENT_TAP":"EVENT_LONG_TAP",a=l=>this.params.showColumnMenuAfterMouseClick(l.touchStart);this.addManagedListener(n,Di[s],a)}if(this.params.enableSorting){let s=a=>{var l,d;let u=a.touchStart.target;r&&((l=this.eMenu)!=null&&l.contains(u)||(d=this.eFilterButton)!=null&&d.contains(u))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListener(e,Di.EVENT_TAP,s)}if(this.params.enableFilterButton){let s=new Di(this.eFilterButton,!0);this.addManagedListener(s,"tap",()=>this.params.showFilter(this.eFilterButton)),this.addDestroyFunc(()=>s.destroy())}this.addDestroyFunc(()=>e.destroy()),o&&this.addDestroyFunc(()=>n.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){Eo(this.eMenu),this.eMenu=void 0;return}let t=this.menuService.isLegacyMenuEnabled();this.addInIcon(t?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!t),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedListener(this.eMenu,"click",()=>this.params.showColumnMenu(this.eMenu)),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(t){var e,r,o,n;let{column:s}=this.params,a=this.menuService.isLegacyMenuEnabled();if(t&&!a){if(this.menuService.isFilterMenuInHeaderEnabled(s))return this.params.showFilter((r=(e=this.eFilterButton)!=null?e:this.eMenu)!=null?r:this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu((n=(o=this.eMenu)!=null?o:this.eFilterButton)!=null?n:this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.context.createBean(new sm(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListener(this.params.column,yt.EVENT_MOVING_CHANGED,()=>{this.lastMovingChanged=new Date().getTime()}),this.eLabel&&this.addManagedListener(this.eLabel,"click",e=>{let r=this.params.column.isMoving(),n=new Date().getTime()-this.lastMovingChanged<50;if(!(r||n)){let l=this.gos.get("multiSortKey")==="ctrl"?e.ctrlKey||e.metaKey:e.shiftKey;this.params.progressSort(l)}});let t=()=>{if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",this.params.column.isSortAscending()),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",this.params.column.isSortDescending()),this.addOrRemoveCssClass("ag-header-cell-sorted-none",this.params.column.isSortNone()),this.params.column.getColDef().showRowGroup){let e=this.columnModel.getSourceColumnsForGroupColumn(this.params.column),o=!e?.every(n=>this.params.column.getSort()==n.getSort());this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",o)}};this.addManagedListener(this.eventService,m.EVENT_SORT_CHANGED,t),this.addManagedListener(this.eventService,m.EVENT_COLUMN_ROW_GROUP_CHANGED,t)}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedListener(this.eFilterButton,"click",()=>this.params.showFilter(this.eFilterButton)):this.eFilterButton=void 0}configureFilter(t,e,r){if(!t)return Eo(e),!1;let{column:o}=this.params;return this.addInIcon("filter",e,o),this.addManagedListener(o,yt.EVENT_FILTER_CHANGED,r),r(),!0}onFilterChangedIcon(){let t=this.params.column.isFilterActive();qe(this.eFilter,t,{skipAriaHidden:!0})}onFilterChangedButton(){let t=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",t)}getAnchorElementForMenu(t){var e,r,o,n;return t?(r=(e=this.eFilterButton)!=null?e:this.eMenu)!=null?r:this.getGui():(n=(o=this.eMenu)!=null?o:this.eFilterButton)!=null?n:this.getGui()}};Ui.TEMPLATE=`<div class="ag-cell-label-container" role="presentation">
            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
            <span ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
            <div ref="eLabel" class="ag-header-cell-label" role="presentation">
                <span ref="eText" class="ag-header-cell-text"></span>
                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>
            </div>
        </div>`;g([w("sortController")],Ui.prototype,"sortController",2);g([w("menuService")],Ui.prototype,"menuService",2);g([w("columnModel")],Ui.prototype,"columnModel",2);g([Q("eFilter")],Ui.prototype,"eFilter",2);g([Q("eFilterButton")],Ui.prototype,"eFilterButton",2);g([Q("eSortIndicator")],Ui.prototype,"eSortIndicator",2);g([Q("eMenu")],Ui.prototype,"eMenu",2);g([Q("eLabel")],Ui.prototype,"eLabel",2);g([Q("eText")],Ui.prototype,"eText",2);g([Q("eSortOrder")],Ui.prototype,"eSortOrder",2);g([Q("eSortAsc")],Ui.prototype,"eSortAsc",2);g([Q("eSortDesc")],Ui.prototype,"eSortDesc",2);g([Q("eSortMixed")],Ui.prototype,"eSortMixed",2);g([Q("eSortNone")],Ui.prototype,"eSortNone",2);var lf=Ui,lu=class _w extends Pe{constructor(){super(_w.TEMPLATE)}destroy(){super.destroy()}init(t){this.params=t,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&Ce("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");let t=o=>{if(To(o))return;let n=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),n,"uiColumnExpanded")};this.addTouchAndClickListeners(this.eCloseIcon,t),this.addTouchAndClickListeners(this.eOpenIcon,t);let e=o=>{Ro(o)};this.addManagedListener(this.eCloseIcon,"dblclick",e),this.addManagedListener(this.eOpenIcon,"dblclick",e),this.addManagedListener(this.getGui(),"dblclick",t),this.updateIconVisibility();let r=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(r,ei.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(r,ei.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))}addTouchAndClickListeners(t,e){let r=new Di(t,!0);this.addManagedListener(r,Di.EVENT_TAP,e),this.addDestroyFunc(()=>r.destroy()),this.addManagedListener(t,"click",e)}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){let e=this.params.columnGroup.isExpanded();qe(this.eOpenIcon,e),qe(this.eCloseIcon,!e)}else qe(this.eOpenIcon,!1),qe(this.eCloseIcon,!1)}addInIcon(t,e){let r=It(t,this.gos,null);r&&this.getRefElement(e).appendChild(r)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){qe(this.eOpenIcon,!1),qe(this.eCloseIcon,!1);return}}setupLabel(){var t;let{displayName:e,columnGroup:r}=this.params;if(W(e)){let o=ti(e,!0);this.getRefElement("agLabel").textContent=o}this.addOrRemoveCssClass("ag-sticky-label",!((t=r.getColGroupDef())!=null&&t.suppressStickyLabel))}};lu.TEMPLATE=`<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">
            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`;g([w("columnModel")],lu.prototype,"columnModel",2);g([Q("agOpened")],lu.prototype,"eOpenIcon",2);g([Q("agClosed")],lu.prototype,"eCloseIcon",2);var UE=lu,ta=class extends Pe{isPopup(){return!0}setParentComponent(i){i.addCssClass("ag-has-popup"),super.setParentComponent(i)}destroy(){let i=this.parentComponent;i&&i.isAlive()&&i.getGui().classList.remove("ag-has-popup"),super.destroy()}},am=class xw extends ta{constructor(){super(xw.TEMPLATE)}init(t){this.params=t,this.focusAfterAttached=t.cellStartedEdit,this.eTextArea.setMaxLength(t.maxLength||200).setCols(t.cols||60).setRows(t.rows||10),W(t.value,!0)&&this.eTextArea.setValue(t.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(t){let e=t.key;(e===z.LEFT||e===z.UP||e===z.RIGHT||e===z.DOWN||t.shiftKey&&e===z.ENTER)&&t.stopPropagation()}afterGuiAttached(){let t=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(t("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){let t=this.eTextArea.getValue();return!W(t)&&!W(this.params.value)?this.params.value:this.params.parseValue(t)}};am.TEMPLATE=`<div class="ag-large-text">
            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`;g([Q("eTextArea")],am.prototype,"eTextArea",2);var qE=am,lm=class extends ta{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" ref="eSelect"></ag-select>
            </div>`),this.startedByEnter=!1}init(i){this.focusAfterAttached=i.cellStartedEdit;let{eSelect:t,valueService:e,gos:r}=this,{values:o,value:n,eventKey:s}=i;if(Te(o)){console.warn("AG Grid: no values found for select cellEditor");return}this.startedByEnter=s!=null?s===z.ENTER:!1;let a=!1;o.forEach(c=>{let h={value:c},p=e.formatValue(i.column,null,c),f=p!=null;h.text=f?p:c,t.addOption(h),a=a||n===c}),a?t.setValue(i.value,!0):i.values.length&&t.setValue(i.values[0],!0);let{valueListGap:l,valueListMaxWidth:d,valueListMaxHeight:u}=i;l!=null&&t.setPickerGap(l),u!=null&&t.setPickerMaxHeight(u),d!=null&&t.setPickerMaxWidth(d),r.get("editType")!=="fullRow"&&this.addManagedListener(this.eSelect,qh.EVENT_ITEM_SELECTED,()=>i.stopEditing())}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}};g([w("valueService")],lm.prototype,"valueService",2);g([Q("eSelect")],lm.prototype,"eSelect",2);var du=class extends ta{constructor(i){super(`
            <div class="ag-cell-edit-wrapper">
                ${i.getTemplate()}
            </div>`),this.cellEditorInput=i}init(i){this.params=i;let t=this.eInput;this.cellEditorInput.init(t,i);let e;if(i.cellStartedEdit){this.focusAfterAttached=!0;let r=i.eventKey;r===z.BACKSPACE||i.eventKey===z.DELETE?e="":r&&r.length===1?e=r:(e=this.cellEditorInput.getStartValue(),r!==z.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,e=this.cellEditorInput.getStartValue();e!=null&&t.setStartValue(e),this.addManagedListener(t.getGui(),"keydown",r=>{let{key:o}=r;(o===z.PAGE_UP||o===z.PAGE_DOWN)&&r.preventDefault()})}afterGuiAttached(){var i,t;let e=this.localeService.getLocaleTextFunc(),r=this.eInput;if(r.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;gn()||r.getFocusableElement().focus();let o=r.getInputElement();this.highlightAllOnFocus?o.select():(t=(i=this.cellEditorInput).setCaret)==null||t.call(i)}focusIn(){let i=this.eInput,t=i.getFocusableElement(),e=i.getInputElement();t.focus(),e.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}};g([Q("eInput")],du.prototype,"eInput",2);var KE=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field>'}init(i,t){this.eInput=i,this.params=t,t.maxLength!=null&&i.setMaxLength(t.maxLength)}getValue(){let i=this.eInput.getValue();return!W(i)&&!W(this.params.value)?this.params.value:this.params.parseValue(i)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){let i=this.eInput.getValue(),t=W(i)&&i.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}},wC=class extends du{constructor(){super(new KE)}},YE="\u2191",XE="\u2193",Ew=class extends Pe{constructor(){super(),this.refreshCount=0;let i=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");let e=document.createElement("span");e.setAttribute("class","ag-value-change-value"),i.appendChild(t),i.appendChild(e),this.setTemplateFromElement(i)}init(i){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(i,!0)}showDelta(i,t){let e=Math.abs(t),r=i.formatValue(e),o=W(r)?r:e,n=t>=0;n?this.eDelta.textContent=YE+o:this.eDelta.textContent=XE+o,this.eDelta.classList.toggle("ag-value-change-delta-up",n),this.eDelta.classList.toggle("ag-value-change-delta-down",!n)}setTimerToRemoveDelta(){this.refreshCount++;let i=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{i===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),Zt(this.eDelta)}refresh(i,t=!1){let e=i.value;if(e===this.lastValue||(W(i.valueFormatted)?this.eValue.textContent=i.valueFormatted:W(i.value)?this.eValue.textContent=e:Zt(this.eValue),this.filterManager.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof e=="number"&&typeof this.lastValue=="number"){let r=e-this.lastValue;this.showDelta(i,r)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=e,!0}};g([w("filterManager")],Ew.prototype,"filterManager",2);var Dw=class extends Pe{constructor(){super(),this.refreshCount=0;let i=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),i.appendChild(t),this.setTemplateFromElement(i),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}init(i){this.refresh(i,!0)}addSlideAnimation(){this.refreshCount++;let i=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);let t=document.createElement("span");t.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=t,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{i===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{i===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(i,t=!1){let e=i.value;return Te(e)&&(e=""),e===this.lastValue||this.filterManager.isSuppressFlashingCellsBecauseFiltering()?!1:(t||this.addSlideAnimation(),this.lastValue=e,W(i.valueFormatted)?this.eCurrent.textContent=i.valueFormatted:W(i.value)?this.eCurrent.textContent=e:Zt(this.eCurrent),!0)}};g([w("filterManager")],Dw.prototype,"filterManager",2);var Rt=class wt{constructor(t){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=wt.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}setData(t){this.setDataCommon(t,!1)}updateData(t){this.setDataCommon(t,!0)}setDataCommon(t,e){let r=this.data;this.data=t,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();let o=this.createDataChangedEvent(t,r,e);this.dispatchLocalEvent(o)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(t,e,r){return{type:wt.EVENT_DATA_CHANGED,node:this,oldData:e,newData:t,update:r}}createLocalRowEvent(t){return{type:t,node:this}}getRowIndexString(){return this.rowPinned==="top"?"t-"+this.rowIndex:this.rowPinned==="bottom"?"b-"+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){let t=new wt(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t}setDataAndId(t,e){let r=W(this.id)?this.createDaemonNode():null,o=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(e),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,r);let n=this.createDataChangedEvent(t,o,!1);this.dispatchLocalEvent(n)}checkRowSelectable(){let t=this.beans.gos.get("isRowSelectable");this.setRowSelectable(t?t(this):!0)}setRowSelectable(t,e){if(this.selectable!==t){if(this.selectable=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(wt.EVENT_SELECTABLE_CHANGED)),e)return;if(this.beans.gos.get("groupSelectsChildren")){let o=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:o??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(t){let e=this.beans.gos.getCallback("getRowId");if(e)if(this.data){let r=this.getGroupKeys(!0);this.id=e({data:this.data,parentKeys:r.length>0?r:void 0,level:this.level}),this.id!==null&&typeof this.id=="string"&&this.id.startsWith(wt.ID_PREFIX_ROW_GROUP)&&console.error(`AG Grid: Row IDs cannot start with ${wt.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`),this.id!==null&&typeof this.id!="string"&&(this.id=""+this.id)}else this.id=void 0;else this.id=t}getGroupKeys(t=!1){let e=[],r=this;for(t&&(r=r.parent);r&&r.level>=0;)e.push(r.key),r=r.parent;return e.reverse(),e}isPixelInRange(t){return!W(this.rowTop)||!W(this.rowHeight)?!1:t>=this.rowTop&&t<this.rowTop+this.rowHeight}setFirstChild(t){this.firstChild!==t&&(this.firstChild=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(wt.EVENT_FIRST_CHILD_CHANGED)))}setLastChild(t){this.lastChild!==t&&(this.lastChild=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(wt.EVENT_LAST_CHILD_CHANGED)))}setChildIndex(t){this.childIndex!==t&&(this.childIndex=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(wt.EVENT_CHILD_INDEX_CHANGED)))}setRowTop(t){this.oldRowTop=this.rowTop,this.rowTop!==t&&(this.rowTop=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(wt.EVENT_TOP_CHANGED)),this.setDisplayed(t!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setDisplayed(t){this.displayed!==t&&(this.displayed=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(wt.EVENT_DISPLAYED_CHANGED)))}setDragging(t){this.dragging!==t&&(this.dragging=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(wt.EVENT_DRAGGING_CHANGED)))}setHighlighted(t){t!==this.highlighted&&(this.highlighted=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(wt.EVENT_HIGHLIGHT_CHANGED)))}setHovered(t){this.hovered!==t&&(this.hovered=t)}isHovered(){return this.hovered}setAllChildrenCount(t){this.allChildrenCount!==t&&(this.allChildrenCount=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(wt.EVENT_ALL_CHILDREN_COUNT_CHANGED)))}setMaster(t){this.master!==t&&(this.master&&!t&&(this.expanded=!1),this.master=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(wt.EVENT_MASTER_CHANGED)))}setGroup(t){this.group!==t&&(this.group&&!t&&(this.expanded=!1),this.group=t,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(wt.EVENT_GROUP_CHANGED)))}setRowHeight(t,e=!1){this.rowHeight=t,this.rowHeightEstimated=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(wt.EVENT_HEIGHT_CHANGED))}setRowAutoHeight(t,e){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[e.getId()]=t,t!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=Ji(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let t=!1,e=!0,r=0,o=this.__autoHeights;if(o==null||(this.beans.columnModel.getAllDisplayedAutoHeightCols().forEach(a=>{let l=o[a.getId()];if(l==null)if(this.beans.columnModel.isColSpanActive()){let d=[];switch(a.getPinned()){case"left":d=this.beans.columnModel.getDisplayedLeftColumnsForRow(this);break;case"right":d=this.beans.columnModel.getDisplayedRightColumnsForRow(this);break;case null:d=this.beans.columnModel.getViewportCenterColumnsForRow(this);break}if(d.includes(a)){t=!0;return}l=-1}else{t=!0;return}else e=!1;l>r&&(r=l)}),t)||((e||r<10)&&(r=this.beans.gos.getRowHeightForNode(this).height),r==this.rowHeight))return;this.setRowHeight(r);let s=this.beans.rowModel;s.onRowHeightChangedDebounced&&s.onRowHeightChangedDebounced()}setRowIndex(t){this.rowIndex!==t&&(this.rowIndex=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(wt.EVENT_ROW_INDEX_CHANGED)))}setUiLevel(t){this.uiLevel!==t&&(this.uiLevel=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(wt.EVENT_UI_LEVEL_CHANGED)))}setExpanded(t,e,r){if(this.expanded===t)return;this.expanded=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(wt.EVENT_EXPANDED_CHANGED));let o=Object.assign({},this.createGlobalRowEvent(m.EVENT_ROW_GROUP_OPENED),{expanded:t,event:e||null});this.beans.rowNodeEventThrottle.dispatchExpanded(o,r),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(t){return this.beans.gos.addGridCommonParams({type:t,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}dispatchLocalEvent(t){this.eventService&&this.eventService.dispatchEvent(t)}setDataValue(t,e,r){let n=(()=>{var l;return typeof t!="string"?t:(l=this.beans.columnModel.getGridColumn(t))!=null?l:this.beans.columnModel.getPrimaryColumn(t)})(),s=this.getValueFromValueService(n);if(this.beans.gos.get("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(n,s,e,r),!1;let a=this.beans.valueService.setValue(this,n,e,r);return this.dispatchCellChangedEvent(n,e,s),this.checkRowSelectable(),a}getValueFromValueService(t){var e,r;let o=this.leafGroup&&this.beans.columnModel.isPivotMode(),n=this.group&&this.expanded&&!this.footer&&!o,s=!1,a=(e=this.beans.gos.get("groupTotalRow"))!=null?e:this.beans.gos.get("groupIncludeFooter");typeof a!="function"?s=!!a:s=!!((r=this.beans.gos.getCallback("groupTotalRow"))!=null?r:this.beans.gos.getCallback("groupIncludeFooter"))({node:this});let l=this.beans.gos.get("groupSuppressBlankHeader"),d=n&&s&&!l;return this.beans.valueService.getValue(t,this,!1,d)}dispatchEventForSaveValueReadOnly(t,e,r,o){let n=this.beans.gos.addGridCommonParams({type:m.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:t,colDef:t.getColDef(),data:this.data,node:this,oldValue:e,newValue:r,value:r,source:o});this.beans.eventService.dispatchEvent(n)}setGroupValue(t,e){let r=this.beans.columnModel.getGridColumn(t);Te(this.groupData)&&(this.groupData={});let o=r.getColId(),n=this.groupData[o];n!==e&&(this.groupData[o]=e,this.dispatchCellChangedEvent(r,e,n))}setAggData(t){let e=this.aggData;if(this.aggData=t,this.eventService){let r=o=>{let n=this.aggData?this.aggData[o]:void 0,s=e?e[o]:void 0;if(n===s)return;let a=this.beans.columnModel.lookupGridColumn(o);a&&this.dispatchCellChangedEvent(a,n,s)};for(let o in this.aggData)r(o);for(let o in t)o in this.aggData||r(o)}}updateHasChildren(){let t=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gos.isRowModelType("serverSide")){let r=this.beans.gos.get("treeData"),o=this.beans.gos.get("isServerSideGroup");t=!this.stub&&!this.footer&&(r?!!o&&o(this.data):!!this.group)}t!==this.__hasChildren&&(this.__hasChildren=!!t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(wt.EVENT_HAS_CHILDREN_CHANGED)))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}isEmptyRowGroupNode(){return this.group&&Qr(this.childrenAfterGroup)}dispatchCellChangedEvent(t,e,r){let o={type:wt.EVENT_CELL_CHANGED,node:this,column:t,newValue:e,oldValue:r};this.dispatchLocalEvent(o)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(e=>e.depthFirstSearch(t)),t(this)}calculateSelectedFromChildren(){var t;let e=!1,r=!1,o=!1;if(!((t=this.childrenAfterGroup)!=null&&t.length))return this.selectable?this.selected:null;for(let n=0;n<this.childrenAfterGroup.length;n++){let s=this.childrenAfterGroup[n],a=s.isSelected();if(!s.selectable){let l=s.calculateSelectedFromChildren();if(l===null)continue;a=l}switch(a){case!0:e=!0;break;case!1:r=!0;break;default:o=!0;break}}if(!(o||e&&r))return e?!0:r?!1:this.selectable?this.selected:null}setSelectedInitialValue(t){this.selected=t}selectThisNode(t,e,r="api"){let o=!this.selectable&&t,n=this.selected===t;if(o||n)return!1;this.selected=t,this.eventService&&this.dispatchLocalEvent(this.createLocalRowEvent(wt.EVENT_ROW_SELECTED));let s=this.sibling;s&&s.footer&&s.eventService&&s.dispatchLocalEvent(s.createLocalRowEvent(wt.EVENT_ROW_SELECTED));let a=Pt(he({},this.createGlobalRowEvent(m.EVENT_ROW_SELECTED)),{event:e||null,source:r});return this.beans.eventService.dispatchEvent(a),!0}setSelected(t,e=!1,r="api"){if(typeof r=="boolean"){console.warn("AG Grid: since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:t,clearSelection:e,rangeSelect:!1,source:r})}setSelectedParams(t){return this.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),0):this.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(Pt(he({},t),{nodes:[this.footer?this.sibling:this]}))}isRowPinned(){return this.rowPinned==="top"||this.rowPinned==="bottom"}isParentOfNode(t){let e=this.parent;for(;e;){if(e===t)return!0;e=e.parent}return!1}addEventListener(t,e){var r,o;this.eventService||(this.eventService=new Po),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new Ef(this.beans.frameworkOverrides));let n=(o=(r=this.frameworkEventListenerService)==null?void 0:r.wrap(e))!=null?o:e;this.eventService.addEventListener(t,n)}removeEventListener(t,e){var r,o;if(!this.eventService)return;let n=(o=(r=this.frameworkEventListenerService)==null?void 0:r.unwrap(e))!=null?o:e;this.eventService.removeEventListener(t,n),this.eventService.noRegisteredListenersExist()&&(this.eventService=null)}onMouseEnter(){this.dispatchLocalEvent(this.createLocalRowEvent(wt.EVENT_MOUSE_ENTER))}onMouseLeave(){this.dispatchLocalEvent(this.createLocalRowEvent(wt.EVENT_MOUSE_LEAVE))}getFirstChildOfFirstChild(t){let e=this,r=!0,o=!1,n=null;for(;r&&!o;){let s=e.parent;W(s)&&e.firstChild?s.rowGroupColumn===t&&(o=!0,n=s):r=!1,e=s}return o?n:null}isFullWidthCell(){if(this.detail)return!0;let t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this}):!1}getRoute(){if(this.key==null)return;let t=[],e=this;for(;e.key!=null;)t.push(e.key),e=e.parent;return t.reverse()}createFooter(){if(this.sibling)return;let t=new Set(["eventService","__objectId","sticky"]),e=new wt(this.beans);Object.keys(this).forEach(r=>{t.has(r)||(e[r]=this[r])}),e.footer=!0,e.setRowTop(null),e.setRowIndex(null),e.oldRowTop=null,e.id="rowGroupFooter_"+this.id,e.sibling=this,this.sibling=e}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}};Rt.ID_PREFIX_ROW_GROUP="row-group-";Rt.ID_PREFIX_TOP_PINNED="t-";Rt.ID_PREFIX_BOTTOM_PINNED="b-";Rt.OBJECT_ID_SEQUENCE=0;Rt.EVENT_ROW_SELECTED="rowSelected";Rt.EVENT_DATA_CHANGED="dataChanged";Rt.EVENT_CELL_CHANGED="cellChanged";Rt.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged";Rt.EVENT_MASTER_CHANGED="masterChanged";Rt.EVENT_GROUP_CHANGED="groupChanged";Rt.EVENT_MOUSE_ENTER="mouseEnter";Rt.EVENT_MOUSE_LEAVE="mouseLeave";Rt.EVENT_HEIGHT_CHANGED="heightChanged";Rt.EVENT_TOP_CHANGED="topChanged";Rt.EVENT_DISPLAYED_CHANGED="displayedChanged";Rt.EVENT_FIRST_CHILD_CHANGED="firstChildChanged";Rt.EVENT_LAST_CHILD_CHANGED="lastChildChanged";Rt.EVENT_CHILD_INDEX_CHANGED="childIndexChanged";Rt.EVENT_ROW_INDEX_CHANGED="rowIndexChanged";Rt.EVENT_EXPANDED_CHANGED="expandedChanged";Rt.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged";Rt.EVENT_SELECTABLE_CHANGED="selectableChanged";Rt.EVENT_UI_LEVEL_CHANGED="uiLevelChanged";Rt.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged";Rt.EVENT_DRAGGING_CHANGED="draggingChanged";var Ge=Rt,Qh=class extends Pe{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){let i=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),e=Gh(i,t),[r,o]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],n=i(r,o);this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel(`${n} (${e})`)}onClicked(i,t,e){return this.rowNode.setSelectedParams({newValue:i,rangeSelect:e.shiftKey,groupSelectsFiltered:t,event:e,source:"checkboxSelected"})}init(i){if(this.rowNode=i.rowNode,this.column=i.column,this.overrides=i.overrides,this.onSelectionChanged(),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",r=>{Ro(r)}),this.addManagedListener(this.eCheckbox.getInputElement(),"click",r=>{Ro(r);let o=this.gos.get("groupSelectsFiltered"),n=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(n,o)?this.onClicked(!0,o,r||{})===0&&this.onClicked(!1,o,r):n?this.onClicked(!1,o,r):this.onClicked(!0,o,r||{})}),this.addManagedListener(this.rowNode,Ge.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this)),this.gos.get("isRowSelectable")||typeof this.getIsVisible()=="function"){let r=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,m.EVENT_DISPLAYED_COLUMNS_CHANGED,r),this.addManagedListener(this.rowNode,Ge.EVENT_DATA_CHANGED,r),this.addManagedListener(this.rowNode,Ge.EVENT_CELL_CHANGED,r),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(i,t){return t&&(this.eCheckbox.getPreviousValue()===void 0||i===void 0)&&this.gos.isRowModelType("clientSide")}showOrHideSelect(){var i,t,e;let r=this.rowNode.selectable,o=this.getIsVisible();if(r)if(typeof o=="function"){let s=(i=this.overrides)==null?void 0:i.callbackParams;if(!this.column)r=o(Pt(he({},s),{node:this.rowNode,data:this.rowNode.data}));else{let a=this.column.createColumnFunctionCallbackParams(this.rowNode);r=o(he(he({},s),a))}}else r=o??!1;if((t=this.column)==null?void 0:t.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!r),this.setVisible(!0),this.setDisplayed(!0);return}if((e=this.overrides)!=null&&e.removeHidden){this.setDisplayed(r);return}this.setVisible(r)}getIsVisible(){var i,t;return this.overrides?this.overrides.isVisible:(t=(i=this.column)==null?void 0:i.getColDef())==null?void 0:t.checkboxSelection}};g([Q("eCheckbox")],Qh.prototype,"eCheckbox",2);g([U],Qh.prototype,"postConstruct",1);var Tw=(i=>(i[i.Left=0]="Left",i[i.Right=1]="Right",i))(Tw||{});var Fe=class extends j{constructor(){super(...arguments),this.dragSourceAndParamsList=[],this.dropTargets=[]}init(){this.ePinnedIcon=Xr("columnMovePin",this.gos,null),this.eHideIcon=Xr("columnMoveHide",this.gos,null),this.eMoveIcon=Xr("columnMoveMove",this.gos,null),this.eLeftIcon=Xr("columnMoveLeft",this.gos,null),this.eRightIcon=Xr("columnMoveRight",this.gos,null),this.eGroupIcon=Xr("columnMoveGroup",this.gos,null),this.eAggregateIcon=Xr("columnMoveValue",this.gos,null),this.ePivotIcon=Xr("columnMovePivot",this.gos,null),this.eDropNotAllowedIcon=Xr("dropNotAllowed",this.gos,null)}addDragSource(i,t=!1){let e={eElement:i.eElement,dragStartPixels:i.dragStartPixels,onDragStart:this.onDragStart.bind(this,i),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:e,dragSource:i}),this.dragService.addDragSource(e)}removeDragSource(i){let t=this.dragSourceAndParamsList.find(e=>e.dragSource===i);t&&(this.dragService.removeDragSource(t.params),br(this.dragSourceAndParamsList,t))}clearDragSourceParamsList(){this.dragSourceAndParamsList.forEach(i=>this.dragService.removeDragSource(i.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(i,t){this.dragging=!0,this.dragSource=i,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),this.lastDropTarget=void 0,this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()}onDragStop(i){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){let t=this.createDropTargetEvent(this.lastDropTarget,i,null,null,!1);this.lastDropTarget.onDragStop(t)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()}onDragging(i,t){var e,r,o,n;let s=this.getHorizontalDirection(i),a=this.getVerticalDirection(i);this.eventLastTime=i,this.positionGhost(i);let l=this.dropTargets.filter(u=>this.isMouseOnDropTarget(i,u)),d=this.findCurrentDropTarget(i,l);if(d!==this.lastDropTarget)this.leaveLastTargetIfExists(i,s,a,t),this.lastDropTarget!==null&&d===null&&((r=(e=this.dragSource).onGridExit)==null||r.call(e,this.dragItem)),this.lastDropTarget===null&&d!==null&&((n=(o=this.dragSource).onGridEnter)==null||n.call(o,this.dragItem)),this.enterDragTargetIfExists(d,i,s,a,t),this.lastDropTarget=d;else if(d&&d.onDragging){let u=this.createDropTargetEvent(d,i,s,a,t);d.onDragging(u)}}getAllContainersFromDropTarget(i){let t=i.getSecondaryContainers?i.getSecondaryContainers():null,e=[[i.getContainer()]];return t?e.concat(t):e}allContainersIntersect(i,t){for(let e of t){let r=e.getBoundingClientRect();if(r.width===0||r.height===0)return!1;let o=i.clientX>=r.left&&i.clientX<r.right,n=i.clientY>=r.top&&i.clientY<r.bottom;if(!o||!n)return!1}return!0}isMouseOnDropTarget(i,t){let e=this.getAllContainersFromDropTarget(t),r=!1;for(let o of e)if(this.allContainersIntersect(i,o)){r=!0;break}return t.targetContainsSource&&!t.getContainer().contains(this.dragSource.eElement)?!1:r&&t.isInterestedIn(this.dragSource.type,this.dragSource.eElement)}findCurrentDropTarget(i,t){let e=t.length;if(e===0)return null;if(e===1)return t[0];let o=this.gos.getRootNode().elementsFromPoint(i.clientX,i.clientY);for(let n of o)for(let s of t)if(ib(this.getAllContainersFromDropTarget(s)).indexOf(n)!==-1)return s;return null}enterDragTargetIfExists(i,t,e,r,o){if(i){if(i.onDragEnter){let n=this.createDropTargetEvent(i,t,e,r,o);i.onDragEnter(n)}this.setGhostIcon(i.getIconName?i.getIconName():null)}}leaveLastTargetIfExists(i,t,e,r){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){let o=this.createDropTargetEvent(this.lastDropTarget,i,t,e,r);this.lastDropTarget.onDragLeave(o)}this.setGhostIcon(null)}}addDropTarget(i){this.dropTargets.push(i)}removeDropTarget(i){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==i.getContainer())}hasExternalDropZones(){return this.dropTargets.some(i=>i.external)}findExternalZone(i){return this.dropTargets.filter(e=>e.external).find(e=>e.getContainer()===i.getContainer())||null}getHorizontalDirection(i){let t=this.eventLastTime&&this.eventLastTime.clientX,e=i.clientX;return t===e?null:t>e?0:1}getVerticalDirection(i){let t=this.eventLastTime&&this.eventLastTime.clientY,e=i.clientY;return t===e?null:t>e?0:1}createDropTargetEvent(i,t,e,r,o){let n=i.getContainer(),s=n.getBoundingClientRect(),{gridApi:a,columnApi:l,dragItem:d,dragSource:u}=this,c=t.clientX-s.left,h=t.clientY-s.top;return{event:t,x:c,y:h,vDirection:r,hDirection:e,dragSource:u,fromNudge:o,dragItem:d,api:a,columnApi:l,dropZoneTarget:n}}positionGhost(i){let t=this.eGhost;if(!t)return;let r=t.getBoundingClientRect().height,o=Mb()-2,n=Ib()-2,s=Wf(t.offsetParent),{clientY:a,clientX:l}=i,d=a-s.top-r/2,u=l-s.left-10,c=this.gos.getDocument(),h=c.defaultView||window,p=h.pageYOffset||c.documentElement.scrollTop,f=h.pageXOffset||c.documentElement.scrollLeft;o>0&&u+t.clientWidth>o+f&&(u=o+f-t.clientWidth),u<0&&(u=0),n>0&&d+t.clientHeight>n+p&&(d=n+p-t.clientHeight),d<0&&(d=0),t.style.left=`${u}px`,t.style.top=`${d}px`}removeGhost(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null}createGhost(){this.eGhost=_r(Fe.GHOST_TEMPLATE),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);let{theme:i}=this.environment.getTheme();i&&this.eGhost.classList.add(i),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);let t=this.eGhost.querySelector(".ag-dnd-ghost-label"),e=this.dragSource.dragItemName;Ah(e)&&(e=e()),t.innerHTML=ti(e)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";let r=this.gos.getDocument(),o=null,n=null;try{o=r.fullscreenElement}catch{}finally{o||(o=this.gos.getRootNode());let s=o.querySelector("body");s?n=s:o instanceof ShadowRoot?n=o:o instanceof Document?n=o?.documentElement:n=o}this.eGhostParent=n,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")}setGhostIcon(i,t=!1){Zt(this.eGhostIcon);let e=null;switch(i||(i=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():Fe.ICON_NOT_ALLOWED),i){case Fe.ICON_PINNED:e=this.ePinnedIcon;break;case Fe.ICON_MOVE:e=this.eMoveIcon;break;case Fe.ICON_LEFT:e=this.eLeftIcon;break;case Fe.ICON_RIGHT:e=this.eRightIcon;break;case Fe.ICON_GROUP:e=this.eGroupIcon;break;case Fe.ICON_AGGREGATE:e=this.eAggregateIcon;break;case Fe.ICON_PIVOT:e=this.ePivotIcon;break;case Fe.ICON_NOT_ALLOWED:e=this.eDropNotAllowedIcon;break;case Fe.ICON_HIDE:e=this.eHideIcon;break}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",t),!(e===this.eHideIcon&&this.gos.get("suppressDragLeaveHidesColumns"))&&e&&this.eGhostIcon.appendChild(e)}};Fe.ICON_PINNED="pinned";Fe.ICON_MOVE="move";Fe.ICON_LEFT="left";Fe.ICON_RIGHT="right";Fe.ICON_GROUP="group";Fe.ICON_AGGREGATE="aggregate";Fe.ICON_PIVOT="pivot";Fe.ICON_NOT_ALLOWED="notAllowed";Fe.ICON_HIDE="hide";Fe.GHOST_TEMPLATE=`<div class="ag-dnd-ghost ag-unselectable">
            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
            <div class="ag-dnd-ghost-label"></div>
        </div>`;g([w("dragService")],Fe.prototype,"dragService",2);g([w("mouseEventService")],Fe.prototype,"mouseEventService",2);g([w("columnApi")],Fe.prototype,"columnApi",2);g([w("gridApi")],Fe.prototype,"gridApi",2);g([U],Fe.prototype,"init",1);g([ir],Fe.prototype,"clearDragSourceParamsList",1);Fe=g([te("dragAndDropService")],Fe);var Hs=class extends Pe{constructor(i,t,e,r,o,n){super(),this.cellValueFn=i,this.rowNode=t,this.column=e,this.customGui=r,this.dragStartPixels=o,this.suppressVisibilityChange=n,this.dragSource=null}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(It("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){let i=this.gos.get("rowDragManaged")?new Mw(this,this.beans,this.rowNode,this.column):new Rw(this,this.beans,this.rowNode,this.column);this.createManagedBean(i,this.beans.context)}}setDragElement(i,t){this.setTemplateFromElement(i),this.addDragSource(t)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];let t=this.beans.selectionService.getSelectedNodes();return t.indexOf(this.rowNode)!==-1?t:[this.rowNode]}checkCompatibility(){let i=this.gos.get("rowDragManaged");this.gos.get("treeData")&&i&&Ce("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(i){if(i){let t=i.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(i=4){this.dragSource&&this.removeDragSource();let t=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:this.getGui(),dragItemName:()=>{var e;let r=this.getDragItem(),o=((e=r.rowNodes)==null?void 0:e.length)||1,n=this.getRowDragText(this.column);return n?n(r,o):o===1?this.cellValueFn():`${o} ${t("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:i,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}removeDragSource(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null}};g([w("beans")],Hs.prototype,"beans",2);g([U],Hs.prototype,"postConstruct",1);g([ir],Hs.prototype,"removeDragSource",1);var Pw=class extends j{constructor(i,t,e){super(),this.parent=i,this.rowNode=t,this.column=e}setDisplayedOrVisible(i){let t={skipAriaHidden:!0};if(i)this.parent.setDisplayed(!1,t);else{let e=!0,r=!1;this.column&&(e=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),r=Ah(this.column.getColDef().rowDrag)),r?(this.parent.setDisplayed(!0,t),this.parent.setVisible(e,t)):(this.parent.setDisplayed(e,t),this.parent.setVisible(!0,t))}}},Rw=class extends Pw{constructor(i,t,e,r){super(i,e,r),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,m.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let i=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(i)}};g([U],Rw.prototype,"postConstruct",1);var Mw=class extends Pw{constructor(i,t,e,r){super(i,e,r),this.beans=t}postConstruct(){this.addManagedListener(this.beans.eventService,m.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,m.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,m.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,m.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let t=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),e=t&&t.shouldPreventRowMove(),r=this.gos.get("suppressRowDrag"),o=this.beans.dragAndDropService.hasExternalDropZones(),n=e&&!o||r;this.setDisplayedOrVisible(n)}};g([U],Mw.prototype,"postConstruct",1);var yl=class extends j{init(i,t,e,r,o,n,s){var a,l,d,u;this.params=s,this.eGui=t,this.eCheckbox=e,this.eExpanded=r,this.eContracted=o,this.comp=i,this.compClass=n;let{node:c,value:h,colDef:p}=s,f=this.isTopLevelFooter();if(!f){if(this.isEmbeddedRowMismatch())return;if(c.footer&&this.gos.get("groupHideOpenParents")){let b=p&&p.showRowGroup,x=c.rowGroupColumn&&c.rowGroupColumn.getColId();if(b!==x)return}}if(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),!f){let C=s.node.footer&&s.node.rowGroupIndex===this.columnModel.getRowGroupColumns().findIndex(L=>{var V;return L.getColId()===((V=s.colDef)==null?void 0:V.showRowGroup)}),x=this.gos.get("groupDisplayType")!="multipleColumns"||this.gos.get("treeData")||this.gos.get("showOpenedGroup")&&!s.node.footer&&(!s.node.group||s.node.rowGroupIndex!=null&&s.node.rowGroupIndex>this.columnModel.getRowGroupColumns().findIndex(L=>{var V;return L.getColId()===((V=s.colDef)==null?void 0:V.showRowGroup)})),S=!c.group&&(((a=this.params.colDef)==null?void 0:a.field)||((l=this.params.colDef)==null?void 0:l.valueGetter)),R=this.isExpandable(),I=this.columnModel.isPivotMode()&&c.leafGroup&&((d=c.rowGroupColumn)==null?void 0:d.getColId())===((u=s.column)==null?void 0:u.getColDef().showRowGroup);if(!this.showingValueForOpenedParent&&!R&&!S&&!x&&!C&&!I)return}this.addExpandAndContract(),this.addFullWidthRowDraggerIfNeeded(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded()}getCellAriaRole(){var i,t;let e=(i=this.params.colDef)==null?void 0:i.cellAriaRole,r=(t=this.params.column)==null?void 0:t.getColDef().cellAriaRole;return e||r||"gridcell"}destroy(){super.destroy(),this.expandListener=null}refreshAriaExpanded(){let{node:i,eGridCell:t}=this.params;if(this.expandListener&&(this.expandListener=this.expandListener()),!this.isExpandable()){wb(t);return}let e=()=>{zn(t,!!i.expanded)};this.expandListener=this.addManagedListener(i,Ge.EVENT_EXPANDED_CHANGED,e)||null,e()}isTopLevelFooter(){if(!this.gos.getGrandTotalRow()||this.params.value!=null||this.params.node.level!=-1)return!1;let t=this.params.colDef;if(t==null||t.showRowGroup===!0)return!0;let r=this.columnModel.getRowGroupColumns();return!r||r.length===0?!0:r[0].getId()===t.showRowGroup}isEmbeddedRowMismatch(){if(!this.params.fullWidth||!this.gos.get("embedFullWidthRows"))return!1;let i=this.params.pinned==="left",t=this.params.pinned==="right",e=!i&&!t;return this.gos.get("enableRtl")?this.columnModel.isPinningLeft()?!t:!e:this.columnModel.isPinningLeft()?!i:!e}findDisplayedGroupNode(){let i=this.params.column,t=this.params.node;if(this.showingValueForOpenedParent){let e=t.parent;for(;e!=null;){if(e.rowGroupColumn&&i.isRowGroupDisplayed(e.rowGroupColumn.getId())){this.displayedGroupNode=e;break}e=e.parent}}Te(this.displayedGroupNode)&&(this.displayedGroupNode=t)}setupShowingValueForOpenedParent(){let i=this.params.node,t=this.params.column;if(!this.gos.get("groupHideOpenParents")){this.showingValueForOpenedParent=!1;return}if(!i.groupData){this.showingValueForOpenedParent=!1;return}if(i.rowGroupColumn!=null){let o=i.rowGroupColumn.getId();if(t.isRowGroupDisplayed(o)){this.showingValueForOpenedParent=!1;return}}let r=i.groupData[t.getId()]!=null;this.showingValueForOpenedParent=r}addValueElement(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())}addGroupValue(){var i;let t=this.adjustParamsWithDetailsFromRelatedColumn(),e=this.getInnerCompDetails(t),{valueFormatted:r,value:o}=t,n=r;if(n==null){let s=this.displayedGroupNode.rowGroupColumn&&((i=this.params.column)==null?void 0:i.isRowGroupDisplayed(this.displayedGroupNode.rowGroupColumn.getId()));this.displayedGroupNode.key===""&&this.displayedGroupNode.group&&s?n=this.localeService.getLocaleTextFunc()("blanks","(Blanks)"):n=o??null}this.comp.setInnerRenderer(e,n)}adjustParamsWithDetailsFromRelatedColumn(){let i=this.displayedGroupNode.rowGroupColumn,t=this.params.column;if(!i)return this.params;if(t!=null&&!t.isRowGroupDisplayed(i.getId()))return this.params;let r=this.params,{value:o,node:n}=this.params,s=this.valueService.formatValue(i,n,o);return Pt(he({},r),{valueFormatted:s})}addFooterValue(){let i=this.params.totalValueGetter;if(!i){let r=this.params.footerValueGetter;r&&(i=r,Ce("As of v31.3, footerValueGetter is deprecated. Use `totalValueGetter` instead."))}let t="";if(i){let r=_f(this.params);r.value=this.params.value,typeof i=="function"?t=i(r):typeof i=="string"?t=this.expressionService.evaluate(i,r):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else t=this.localeService.getLocaleTextFunc()("footerTotal","Total")+" "+(this.params.value!=null?this.params.value:"");let e=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(e,t)}getInnerCompDetails(i){if(i.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gos.get("groupRowRendererParams"),i);let t=this.userComponentFactory.getInnerRendererDetails(i,i),e=s=>s&&s.componentClass==this.compClass;if(t&&!e(t))return t;let r=this.displayedGroupNode.rowGroupColumn,o=r?r.getColDef():void 0;if(!o)return;let n=this.userComponentFactory.getCellRendererDetails(o,i);if(n&&!e(n))return n;if(e(n)&&o.cellRendererParams&&o.cellRendererParams.innerRenderer)return this.userComponentFactory.getInnerRendererDetails(o.cellRendererParams,i)}addChildCount(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,Ge.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())}updateChildCount(){let i=this.displayedGroupNode.allChildrenCount,r=this.isShowRowGroupForThisRow()&&i!=null&&i>=0?`(${i})`:"";this.comp.setChildCount(r)}isShowRowGroupForThisRow(){if(this.gos.get("treeData"))return!0;let i=this.displayedGroupNode.rowGroupColumn;if(!i)return!1;let t=this.params.column;return t==null||t.isRowGroupDisplayed(i.getId())}addExpandAndContract(){var i;let t=this.params,e=It("groupExpanded",this.gos,null),r=It("groupContracted",this.gos,null);e&&this.eExpanded.appendChild(e),r&&this.eContracted.appendChild(r);let o=t.eGridCell;!(((i=this.params.column)==null?void 0:i.isCellEditable(t.node))&&this.gos.get("enableGroupEdit"))&&this.isExpandable()&&!t.suppressDoubleClickExpand&&this.addManagedListener(o,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(o,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(t.node,Ge.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();let s=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,Ge.EVENT_ALL_CHILDREN_COUNT_CHANGED,s),this.addManagedListener(this.displayedGroupNode,Ge.EVENT_MASTER_CHANGED,s),this.addManagedListener(this.displayedGroupNode,Ge.EVENT_GROUP_CHANGED,s),this.addManagedListener(this.displayedGroupNode,Ge.EVENT_HAS_CHILDREN_CHANGED,s)}onExpandClicked(i){To(i)||(Ro(i),this.onExpandOrContract(i))}onExpandOrContract(i){let t=this.displayedGroupNode,e=!t.expanded;!e&&t.sticky&&this.scrollToStickyNode(t),t.setExpanded(e,i)}scrollToStickyNode(i){this.ctrlsService.getGridBodyCtrl().getScrollFeature().setVerticalScrollPosition(i.rowTop-i.stickyRowTop)}isExpandable(){if(this.showingValueForOpenedParent)return!0;let i=this.displayedGroupNode,t=this.columnModel.isPivotMode()&&i.leafGroup;if(!(i.isExpandable()&&!i.footer&&!t))return!1;let r=this.params.column;return r!=null&&typeof r.getColDef().showRowGroup=="string"?this.isShowRowGroupForThisRow():!0}showExpandAndContractIcons(){let{params:i,displayedGroupNode:t,columnModel:e}=this,{node:r}=i,o=this.isExpandable();if(o){let d=this.showingValueForOpenedParent?!0:r.expanded;this.comp.setExpandedDisplayed(d),this.comp.setContractedDisplayed(!d)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);let n=e.isPivotMode(),s=n&&t.leafGroup,a=o&&!s,l=r.footer&&r.level===-1;this.comp.addOrRemoveCssClass("ag-cell-expandable",a),this.comp.addOrRemoveCssClass("ag-row-group",a),n?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",s):l||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!a)}onRowNodeIsExpandableChanged(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()}setupIndent(){let i=this.params.node;this.params.suppressPadding||(this.addManagedListener(i,Ge.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())}setIndent(){if(this.gos.get("groupHideOpenParents"))return;let i=this.params,t=i.node,e=!!i.colDef,r=this.gos.get("treeData"),n=!e||r||i.colDef.showRowGroup===!0?t.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+n,this.comp.addOrRemoveCssClass(this.indentClass,!0)}addFullWidthRowDraggerIfNeeded(){if(!this.params.fullWidth||!this.params.rowDrag)return;let i=new Hs(()=>this.params.value,this.params.node);this.createManagedBean(i,this.context),this.eGui.insertAdjacentElement("afterbegin",i.getGui())}isUserWantsSelected(){let i=this.params.checkbox;return typeof i=="function"||i===!0}addCheckboxIfNeeded(){let i=this.displayedGroupNode,t=this.isUserWantsSelected()&&!i.footer&&!i.rowPinned&&!i.detail;if(t){let e=new Qh;this.getContext().createBean(e),e.init({rowNode:this.params.node,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(e.getGui()),this.addDestroyFunc(()=>this.getContext().destroyBean(e))}this.comp.setCheckboxVisible(t)}onKeyDown(i){!(i.key===z.ENTER)||this.params.suppressEnterExpand||this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract(i)}onCellDblClicked(i){if(To(i))return;yh(this.eExpanded,i)||yh(this.eContracted,i)||this.onExpandOrContract(i)}};g([w("expressionService")],yl.prototype,"expressionService",2);g([w("valueService")],yl.prototype,"valueService",2);g([w("columnModel")],yl.prototype,"columnModel",2);g([w("userComponentFactory")],yl.prototype,"userComponentFactory",2);g([w("ctrlsService")],yl.prototype,"ctrlsService",2);var ia=class Iw extends Pe{constructor(){super(Iw.TEMPLATE)}init(t){let e={setInnerRenderer:(s,a)=>this.setRenderDetails(s,a),setChildCount:s=>this.eChildCount.textContent=s,addOrRemoveCssClass:(s,a)=>this.addOrRemoveCssClass(s,a),setContractedDisplayed:s=>qe(this.eContracted,s),setExpandedDisplayed:s=>qe(this.eExpanded,s),setCheckboxVisible:s=>this.eCheckbox.classList.toggle("ag-invisible",!s)},r=this.createManagedBean(new yl),o=!t.colDef,n=this.getGui();r.init(e,n,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,t),o&&Bt(n,r.getCellAriaRole())}setRenderDetails(t,e){if(t){let r=t.newAgStackInstance();if(!r)return;r.then(o=>{if(!o)return;let n=()=>this.context.destroyBean(o);this.isAlive()?(this.eValue.appendChild(o.getGui()),this.addDestroyFunc(n)):n()})}else this.eValue.innerText=e}destroy(){this.getContext().destroyBean(this.innerCellRenderer),super.destroy()}refresh(){return!1}};ia.TEMPLATE=`<span class="ag-cell-wrapper">
            <span class="ag-group-expanded" ref="eExpanded"></span>
            <span class="ag-group-contracted" ref="eContracted"></span>
            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>
            <span class="ag-group-value" ref="eValue"></span>
            <span class="ag-group-child-count" ref="eChildCount"></span>
        </span>`;g([Q("eExpanded")],ia.prototype,"eExpanded",2);g([Q("eContracted")],ia.prototype,"eContracted",2);g([Q("eCheckbox")],ia.prototype,"eCheckbox",2);g([Q("eValue")],ia.prototype,"eValue",2);g([Q("eChildCount")],ia.prototype,"eChildCount",2);var SC=ia,Zh=class Fw extends Pe{constructor(){super(Fw.TEMPLATE)}init(t){t.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){let t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingError","ERR")}setupLoading(){let t=It("groupLoading",this.gos,null);t&&this.eLoadingIcon.appendChild(t);let e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingOoo","Loading")}refresh(t){return!1}destroy(){super.destroy()}};Zh.TEMPLATE=`<div class="ag-loading">
            <span class="ag-loading-icon" ref="eLoadingIcon"></span>
            <span class="ag-loading-text" ref="eLoadingText"></span>
        </div>`;g([Q("eLoadingIcon")],Zh.prototype,"eLoadingIcon",2);g([Q("eLoadingText")],Zh.prototype,"eLoadingText",2);var QE=Zh,zw=class Aw extends Pe{constructor(){super(Aw.TEMPLATE)}init(t){let e=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",e),this.addDestroyFunc(()=>ol(t.eParentOfValue)),ol(t.eParentOfValue,e),t.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){let t=this.localeService.getLocaleTextFunc();this.getGui().innerText=t("loadingError","ERR");let e=t("ariaSkeletonCellLoadingFailed","Row failed to load");Vr(this.getGui(),e)}setupLoading(){let e=this.gos.getDocument().createElement("div");e.classList.add("ag-skeleton-effect"),this.getGui().appendChild(e);let o=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");Vr(this.getGui(),o)}refresh(t){return!1}destroy(){super.destroy()}};zw.TEMPLATE='<div class="ag-skeleton-container"></div>';var ZE=zw,Ow=class Lw extends Pe{constructor(){super()}destroy(){super.destroy()}init(t){let e=this.gos.get("overlayLoadingTemplate");if(this.setTemplate(e??Lw.DEFAULT_LOADING_OVERLAY_TEMPLATE),!e){let r=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=r("loadingOoo","Loading...")})}}};Ow.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>';var JE=Ow,Nw=class kw extends Pe{constructor(){super()}destroy(){super.destroy()}init(t){let e=this.gos.get("overlayNoRowsTemplate");if(this.setTemplate(e??kw.DEFAULT_NO_ROWS_TEMPLATE),!e){let r=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=r("noRowsToShow","No Rows To Show")})}}};Nw.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center"></span>';var eD=Nw,tD=class extends ta{constructor(){super('<div class="ag-tooltip"></div>')}init(i){let{value:t}=i;this.getGui().textContent=ti(t,!0)}},iD=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" ref="eInput"></ag-input-number-field>'}init(i,t){this.eInput=i,this.params=t,t.max!=null&&i.setMax(t.max),t.min!=null&&i.setMin(t.min),t.precision!=null&&i.setPrecision(t.precision),t.step!=null&&i.setStep(t.step);let e=i.getInputElement();t.preventStepping?i.addManagedListener(e,"keydown",this.preventStepping):t.showStepperButtons&&e.classList.add("ag-number-field-input-stepper")}preventStepping(i){(i.key===z.UP||i.key===z.DOWN)&&i.preventDefault()}getValue(){let i=this.eInput.getValue();if(!W(i)&&!W(this.params.value))return this.params.value;let t=this.params.parseValue(i);if(t==null)return t;if(typeof t=="string"){if(t==="")return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}},rD=class extends du{constructor(){super(new iD)}},oD=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(i,t){this.eInput=i,this.params=t,t.min!=null&&i.setMin(t.min),t.max!=null&&i.setMax(t.max),t.step!=null&&i.setStep(t.step)}getValue(){let i=this.eInput.getDate();return!W(i)&&!W(this.params.value)?this.params.value:i??null}getStartValue(){let{value:i}=this.params;if(i instanceof Date)return Jr(i,!1)}},nD=class extends du{constructor(){super(new oD)}},sD=class{constructor(i){this.getDataTypeService=i}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(i,t){this.eInput=i,this.params=t,t.min!=null&&i.setMin(t.min),t.max!=null&&i.setMax(t.max),t.step!=null&&i.setStep(t.step)}getValue(){let i=this.formatDate(this.eInput.getDate());return!W(i)&&!W(this.params.value)?this.params.value:this.params.parseValue(i??"")}getStartValue(){var i,t;return Jr((t=this.parseDate((i=this.params.value)!=null?i:void 0))!=null?t:null,!1)}parseDate(i){return this.getDataTypeService().getDateParserFunction(this.params.column)(i)}formatDate(i){return this.getDataTypeService().getDateFormatterFunction(this.params.column)(i)}},Vw=class extends du{constructor(){super(new sD(()=>this.dataTypeService))}};g([w("dataTypeService")],Vw.prototype,"dataTypeService",2);var dm=class Gw extends Pe{constructor(){super(Gw.TEMPLATE)}init(t){this.params=t,this.updateCheckbox(t);let e=this.eCheckbox.getInputElement();e.setAttribute("tabindex","-1"),Rf(e,"polite"),this.addManagedListener(e,"click",r=>{if(Ro(r),this.eCheckbox.isDisabled())return;let o=this.eCheckbox.getValue();this.onCheckboxChanged(o)}),this.addManagedListener(e,"dblclick",r=>{Ro(r)}),this.addManagedListener(this.params.eGridCell,"keydown",r=>{if(r.key===z.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===this.gos.getActiveDomElement()&&this.eCheckbox.toggle();let o=this.eCheckbox.getValue();this.onCheckboxChanged(o),r.preventDefault()}})}refresh(t){return this.params=t,this.updateCheckbox(t),!0}updateCheckbox(t){var e,r,o;let n,s=!0;if(t.node.group&&t.column){let c=t.column.getColId();c.startsWith(rl)?n=t.value==null||t.value===""?void 0:t.value==="true":t.node.aggData&&t.node.aggData[c]!==void 0?n=(e=t.value)!=null?e:void 0:s=!1}else n=(r=t.value)!=null?r:void 0;if(!s){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(n);let a=t.disabled!=null?t.disabled:!((o=t.column)!=null&&o.isCellEditable(t.node));this.eCheckbox.setDisabled(a);let l=this.localeService.getLocaleTextFunc(),d=Gh(l,n),u=a?d:`${l("ariaToggleCellValue","Press SPACE to toggle cell value")} (${d})`;this.eCheckbox.setInputAriaLabel(u)}onCheckboxChanged(t){let{column:e,node:r,rowIndex:o,value:n}=this.params,s={type:m.EVENT_CELL_EDITING_STARTED,column:e,colDef:e?.getColDef(),data:r.data,node:r,rowIndex:o,rowPinned:r.rowPinned,value:n};this.eventService.dispatchEvent(s);let a=this.params.node.setDataValue(this.params.column,t,"edit"),l={type:m.EVENT_CELL_EDITING_STOPPED,column:e,colDef:e?.getColDef(),data:r.data,node:r,rowIndex:o,rowPinned:r.rowPinned,value:n,oldValue:n,newValue:t,valueChanged:a};this.eventService.dispatchEvent(l)}};dm.TEMPLATE=`
        <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
            <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
        </div>`;g([Q("eCheckbox")],dm.prototype,"eCheckbox",2);var aD=dm,Hw=class extends ta{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)}init(i){var t;this.params=i;let e=(t=i.value)!=null?t:void 0;this.eCheckbox.setValue(e),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(e),this.addManagedListener(this.eCheckbox,m.EVENT_FIELD_VALUE_CHANGED,o=>this.setAriaLabel(o.selected))}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(i){let t=this.localeService.getLocaleTextFunc(),e=Gh(t,i),r=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${r} (${e})`)}};g([Q("eCheckbox")],Hw.prototype,"eCheckbox",2);var lD=class extends Pe{constructor(){super(),this.setTemplate("<div></div>")}init(i){var t;this.params=i,this.cssClassPrefix=(t=this.params.cssClassPrefix)!=null?t:"ag-menu-option",this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu()}configureDefaults(){return!0}addIcon(){if(this.params.isCompact)return;let i=_r(`<span ref="eIcon" class="${this.getClassName("part")} ${this.getClassName("icon")}" role="presentation"></span>`);this.params.checked?i.appendChild(It("check",this.gos)):this.params.icon&&(ru(this.params.icon)?i.appendChild(this.params.icon):typeof this.params.icon=="string"?i.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(i)}addName(){let i=_r(`<span ref="eName" class="${this.getClassName("part")} ${this.getClassName("text")}">${this.params.name||""}</span>`);this.getGui().appendChild(i)}addShortcut(){if(this.params.isCompact)return;let i=_r(`<span ref="eShortcut" class="${this.getClassName("part")} ${this.getClassName("shortcut")}">${this.params.shortcut||""}</span>`);this.getGui().appendChild(i)}addSubMenu(){let i=_r(`<span ref="ePopupPointer" class="${this.getClassName("part")} ${this.getClassName("popup-pointer")}"></span>`),t=this.getGui();if(this.params.subMenu){let e=this.gos.get("enableRtl")?"smallLeft":"smallRight";zn(t,!1),i.appendChild(It(e,this.gos))}t.appendChild(i)}getClassName(i){return`${this.cssClassPrefix}-${i}`}destroy(){super.destroy()}},Sh=class extends j{constructor(){super(...arguments),this.agGridDefaults={agDateInput:gw,agColumnHeader:lf,agColumnGroupHeader:UE,agSortIndicator:sm,agTextColumnFloatingFilter:jE,agNumberColumnFloatingFilter:WE,agDateColumnFloatingFilter:Yh,agReadOnlyFloatingFilter:Jf,agAnimateShowChangeCellRenderer:Ew,agAnimateSlideCellRenderer:Dw,agGroupCellRenderer:SC,agGroupRowRenderer:SC,agLoadingCellRenderer:QE,agSkeletonCellRenderer:ZE,agCheckboxCellRenderer:aD,agCellEditor:wC,agTextCellEditor:wC,agNumberCellEditor:rD,agDateCellEditor:nD,agDateStringCellEditor:Vw,agSelectCellEditor:lm,agLargeTextCellEditor:qE,agCheckboxCellEditor:Hw,agTextColumnFilter:nm,agNumberColumnFilter:yw,agDateColumnFilter:pw,agLoadingOverlay:JE,agNoRowsOverlay:eD,agTooltipComponent:tD,agMenuItem:lD},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}init(){let i=this.gos.get("components");i!=null&&Wi(i,(t,e)=>this.registerJsComponent(t,e))}registerDefaultComponent(i,t){if(this.agGridDefaults[i]){console.error("Trying to overwrite a default component. You should call registerComponent");return}this.agGridDefaults[i]=t}registerJsComponent(i,t){this.jsComps[i]=t}retrieve(i,t){let e=(a,l)=>({componentFromFramework:l,component:a}),r=this.getFrameworkOverrides().frameworkComponent(t,this.gos.get("components"));if(r!=null)return e(r,!0);let o=this.jsComps[t];if(o){let a=this.getFrameworkOverrides().isFrameworkComponent(o);return e(o,a)}let n=this.agGridDefaults[t];if(n)return e(n,!1);let s=this.enterpriseAgDefaultCompsModule[t];return s?pt.__assertRegistered(s,`AG Grid '${i}' component: ${t}`,this.context.getGridId()):il(()=>{this.warnAboutMissingComponent(i,t)},"MissingComp"+t),null}warnAboutMissingComponent(i,t){let e=[...Object.keys(this.agGridDefaults).filter(o=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(o)),...Object.keys(this.jsComps)],r=ou(t,e,!0,.8).values;console.warn(`AG Grid: Could not find '${t}' component. It was configured as "${i}: '${t}'" but it wasn't found in the list of registered components.`),r.length>0&&console.warn(`         Did you mean: [${r.slice(0,3)}]?`),console.warn(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}};g([U],Sh.prototype,"init",1);Sh=g([te("userComponentRegistry")],Sh);var dD={propertyName:"dateComponent",cellRenderer:!1},uD={propertyName:"headerComponent",cellRenderer:!1},cD={propertyName:"headerGroupComponent",cellRenderer:!1},_C={propertyName:"cellRenderer",cellRenderer:!0},hD={propertyName:"loadingCellRenderer",cellRenderer:!0},pD={propertyName:"cellEditor",cellRenderer:!1},xC={propertyName:"innerRenderer",cellRenderer:!0},gD={propertyName:"loadingOverlayComponent",cellRenderer:!1},fD={propertyName:"noRowsOverlayComponent",cellRenderer:!1},mD={propertyName:"tooltipComponent",cellRenderer:!1},df={propertyName:"filter",cellRenderer:!1},vD={propertyName:"floatingFilterComponent",cellRenderer:!1},yD={propertyName:"toolPanel",cellRenderer:!1},CD={propertyName:"statusPanel",cellRenderer:!1},bD={propertyName:"fullWidthCellRenderer",cellRenderer:!0},wD={propertyName:"loadingCellRenderer",cellRenderer:!0},SD={propertyName:"groupRowRenderer",cellRenderer:!0},_D={propertyName:"detailCellRenderer",cellRenderer:!0},xD={propertyName:"menuItem",cellRenderer:!1},Bw=class{static getFloatingFilterType(i){return this.filterToFloatingFilterMapping[i]}};Bw.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"};var ns=class extends j{getHeaderCompDetails(i,t){return this.getCompDetails(i,uD,"agColumnHeader",t)}getHeaderGroupCompDetails(i){let t=i.columnGroup.getColGroupDef();return this.getCompDetails(t,cD,"agColumnGroupHeader",i)}getFullWidthCellRendererDetails(i){return this.getCompDetails(this.gridOptions,bD,null,i,!0)}getFullWidthLoadingCellRendererDetails(i){return this.getCompDetails(this.gridOptions,wD,"agLoadingCellRenderer",i,!0)}getFullWidthGroupCellRendererDetails(i){return this.getCompDetails(this.gridOptions,SD,"agGroupRowRenderer",i,!0)}getFullWidthDetailCellRendererDetails(i){return this.getCompDetails(this.gridOptions,_D,"agDetailCellRenderer",i,!0)}getInnerRendererDetails(i,t){return this.getCompDetails(i,xC,null,t)}getFullWidthGroupRowInnerCellRenderer(i,t){return this.getCompDetails(i,xC,null,t)}getCellRendererDetails(i,t){return this.getCompDetails(i,_C,null,t)}getLoadingCellRendererDetails(i,t){return this.getCompDetails(i,hD,"agSkeletonCellRenderer",t,!0)}getCellEditorDetails(i,t){return this.getCompDetails(i,pD,"agCellEditor",t,!0)}getFilterDetails(i,t,e){return this.getCompDetails(i,df,e,t,!0)}getDateCompDetails(i){return this.getCompDetails(this.gridOptions,dD,"agDateInput",i,!0)}getLoadingOverlayCompDetails(i){return this.getCompDetails(this.gridOptions,gD,"agLoadingOverlay",i,!0)}getNoRowsOverlayCompDetails(i){return this.getCompDetails(this.gridOptions,fD,"agNoRowsOverlay",i,!0)}getTooltipCompDetails(i){return this.getCompDetails(i.colDef,mD,"agTooltipComponent",i,!0)}getSetFilterCellRendererDetails(i,t){return this.getCompDetails(i,_C,null,t)}getFloatingFilterCompDetails(i,t,e){return this.getCompDetails(i,vD,e,t)}getToolPanelCompDetails(i,t){return this.getCompDetails(i,yD,null,t,!0)}getStatusPanelCompDetails(i,t){return this.getCompDetails(i,CD,null,t,!0)}getMenuItemCompDetails(i,t){return this.getCompDetails(i,xD,"agMenuItem",t,!0)}getCompDetails(i,t,e,r,o=!1){let{propertyName:n,cellRenderer:s}=t,{compName:a,jsComp:l,fwComp:d,paramsFromSelector:u,popupFromSelector:c,popupPositionFromSelector:h}=this.getCompKeys(i,t,r),p=x=>{let S=this.userComponentRegistry.retrieve(n,x);S&&(l=S.componentFromFramework?void 0:S.component,d=S.componentFromFramework?S.component:void 0)};if(a!=null&&p(a),l==null&&d==null&&e!=null&&p(e),l&&s&&!this.agComponentUtils.doesImplementIComponent(l)&&(l=this.agComponentUtils.adaptFunction(n,l)),!l&&!d){o&&console.error(`AG Grid: Could not find component ${a}, did you forget to configure this component?`);return}let f=this.mergeParamsWithApplicationProvidedParams(i,t,r,u),C=l==null,b=l||d;return{componentFromFramework:C,componentClass:b,params:f,type:t,popupFromSelector:c,popupPositionFromSelector:h,newAgStackInstance:()=>this.newAgStackInstance(b,C,f,t)}}getCompKeys(i,t,e){let{propertyName:r}=t,o,n,s,a,l,d;if(i){let u=i,c=u[r+"Selector"],h=c?c(e):null,p=f=>{typeof f=="string"?o=f:f!=null&&f!==!0&&(this.getFrameworkOverrides().isFrameworkComponent(f)?s=f:n=f)};h?(p(h.component),a=h.params,l=h.popup,d=h.popupPosition):p(u[r])}return{compName:o,jsComp:n,fwComp:s,paramsFromSelector:a,popupFromSelector:l,popupPositionFromSelector:d}}newAgStackInstance(i,t,e,r){let o=r.propertyName,n=!t,s;if(n)s=new i;else{let l=this.componentMetadataProvider.retrieve(o);s=this.frameworkComponentWrapper.wrap(i,l.mandatoryMethodList,l.optionalMethodList,r)}let a=this.initComponent(s,e);return a==null?Er.resolve(s):a.then(()=>s)}mergeParamsWithApplicationProvidedParams(i,t,e,r=null){let o=this.gos.getGridCommonParams();wr(o,e);let n=i,s=n&&n[t.propertyName+"Params"];if(typeof s=="function"){let a=s(e);wr(o,a)}else typeof s=="object"&&wr(o,s);return wr(o,r),o}initComponent(i,t){if(this.context.createBean(i),i.init!=null)return i.init(t)}getDefaultFloatingFilterType(i,t){if(i==null)return null;let e=null,{compName:r,jsComp:o,fwComp:n}=this.getCompKeys(i,df);return r?e=Bw.getFloatingFilterType(r):o==null&&n==null&&i.filter===!0&&(e=t()),e}};g([w("gridOptions")],ns.prototype,"gridOptions",2);g([w("agComponentUtils")],ns.prototype,"agComponentUtils",2);g([w("componentMetadataProvider")],ns.prototype,"componentMetadataProvider",2);g([w("userComponentRegistry")],ns.prototype,"userComponentRegistry",2);g([gt("frameworkComponentWrapper")],ns.prototype,"frameworkComponentWrapper",2);ns=g([te("userComponentFactory")],ns);var $w=class{constructor(i){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=i.scrollContainer,this.scrollHorizontally=i.scrollAxis.indexOf("x")!==-1,this.scrollVertically=i.scrollAxis.indexOf("y")!==-1,this.scrollByTick=i.scrollByTick!=null?i.scrollByTick:20,i.onScrollCallback&&(this.onScrollCallback=i.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=i.getVerticalPosition,this.setVerticalPosition=i.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=i.getHorizontalPosition,this.setHorizontalPosition=i.setHorizontalPosition),this.shouldSkipVerticalScroll=i.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=i.shouldSkipHorizontalScroll||(()=>!1)}check(i,t=!1){let e=t||this.shouldSkipVerticalScroll();if(e&&this.shouldSkipHorizontalScroll())return;let r=this.scrollContainer.getBoundingClientRect(),o=this.scrollByTick;this.tickLeft=i.clientX<r.left+o,this.tickRight=i.clientX>r.right-o,this.tickUp=i.clientY<r.top+o&&!e,this.tickDown=i.clientY>r.bottom-o&&!e,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;let i;if(i=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){let t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-i),this.tickDown&&this.setVerticalPosition(t+i)}if(this.scrollHorizontally){let t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-i),this.tickRight&&this.setHorizontalPosition(t+i)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},Hr=class extends j{constructor(i){super(),this.eContainer=i}postConstruct(){this.gos.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(i=>{let t=i.gridBodyCtrl;this.autoScrollService=new $w({scrollContainer:t.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>t.getScrollFeature().getVScrollPosition().top,setVerticalPosition:e=>t.getScrollFeature().setVerticalScrollPosition(e),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(i){return i===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?Fe.ICON_NOT_ALLOWED:Fe.ICON_MOVE}shouldPreventRowMove(){return!!(this.columnModel.getRowGroupColumns().length||this.filterManager.isAnyFilterPresent()||this.sortController.isSortActive())}getRowNodes(i){if(!this.isFromThisGrid(i))return i.dragItem.rowNodes||[];let t=i.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){let r=[...this.selectionService.getSelectedNodes()].sort((o,n)=>o.rowIndex==null||n.rowIndex==null?0:this.getRowIndexNumber(o)-this.getRowIndexNumber(n));if(r.indexOf(t)!==-1)return r}return[t]}onDragEnter(i){i.dragItem.rowNodes=this.getRowNodes(i),this.dispatchGridEvent(m.EVENT_ROW_DRAG_ENTER,i),this.getRowNodes(i).forEach(t=>{t.setDragging(!0)}),this.onEnterOrDragging(i)}onDragging(i){this.onEnterOrDragging(i)}isFromThisGrid(i){let{dragSourceDomDataKey:t}=i.dragSource;return t===this.gos.getDomDataKey()}isDropZoneWithinThisGrid(i){let e=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:r}=i;return!e.contains(r)}onEnterOrDragging(i){this.dispatchGridEvent(m.EVENT_ROW_DRAG_MOVE,i),this.lastDraggingEvent=i;let t=this.mouseEventService.getNormalisedPosition(i).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(i,t),this.autoScrollService.check(i.event)}doManagedDrag(i,t){let e=this.isFromThisGrid(i),r=this.gos.get("rowDragManaged"),o=i.dragItem.rowNodes;r&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!e?this.isDropZoneWithinThisGrid(i)||this.clientSideRowModel.highlightRowAtPixel(o[0],t):this.moveRows(o,t))}getRowIndexNumber(i){return parseInt(rt(i.getRowIndexString().split("-")),10)}moveRowAndClearHighlight(i){let t=this.clientSideRowModel.getLastHighlightedRowNode(),e=t&&t.highlighted===1,r=this.mouseEventService.getNormalisedPosition(i).y,o=i.dragItem.rowNodes,n=e?1:0;if(this.isFromThisGrid(i))o.forEach(s=>{s.rowTop<r&&(n-=1)}),this.moveRows(o,r,n);else{let s=this.gos.getCallback("getRowId"),a=this.clientSideRowModel.getRowIndexAtPixel(r)+1;this.clientSideRowModel.getHighlightPosition(r)===0&&a--,this.clientSideRowModel.updateRowData({add:o.map(l=>l.data).filter(l=>!this.clientSideRowModel.getRowNode(s?s({data:l,level:0}):l.id)),addIndex:a})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(i,t,e=0){var r;this.clientSideRowModel.ensureRowsAtPixel(i,t,e)&&(this.focusService.clearFocusedCell(),(r=this.rangeService)==null||r.removeAllCellRanges())}addRowDropZone(i){if(!i.getContainer()){Ce("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(i)){console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let t={getContainer:i.getContainer};i.fromGrid?t=i:(i.onDragEnter&&(t.onDragEnter=e=>{i.onDragEnter(this.draggingToRowDragEvent(m.EVENT_ROW_DRAG_ENTER,e))}),i.onDragLeave&&(t.onDragLeave=e=>{i.onDragLeave(this.draggingToRowDragEvent(m.EVENT_ROW_DRAG_LEAVE,e))}),i.onDragging&&(t.onDragging=e=>{i.onDragging(this.draggingToRowDragEvent(m.EVENT_ROW_DRAG_MOVE,e))}),i.onDragStop&&(t.onDragStop=e=>{i.onDragStop(this.draggingToRowDragEvent(m.EVENT_ROW_DRAG_END,e))})),this.dragAndDropService.addDropTarget(he({isInterestedIn:e=>e===2,getIconName:()=>Fe.ICON_MOVE,external:!0},t))}getRowDropZone(i){let t=this.getContainer.bind(this),e=this.onDragEnter.bind(this),r=this.onDragLeave.bind(this),o=this.onDragging.bind(this),n=this.onDragStop.bind(this);return i?{getContainer:t,onDragEnter:i.onDragEnter?s=>{e(s),i.onDragEnter(this.draggingToRowDragEvent(m.EVENT_ROW_DRAG_ENTER,s))}:e,onDragLeave:i.onDragLeave?s=>{r(s),i.onDragLeave(this.draggingToRowDragEvent(m.EVENT_ROW_DRAG_LEAVE,s))}:r,onDragging:i.onDragging?s=>{o(s),i.onDragging(this.draggingToRowDragEvent(m.EVENT_ROW_DRAG_MOVE,s))}:o,onDragStop:i.onDragStop?s=>{n(s),i.onDragStop(this.draggingToRowDragEvent(m.EVENT_ROW_DRAG_END,s))}:n,fromGrid:!0}:{getContainer:t,onDragEnter:e,onDragLeave:r,onDragging:o,onDragStop:n,fromGrid:!0}}draggingToRowDragEvent(i,t){let e=this.mouseEventService.getNormalisedPosition(t).y,r=e>this.paginationProxy.getCurrentPageHeight(),o=-1,n;r||(o=this.rowModel.getRowIndexAtPixel(e),n=this.rowModel.getRow(o));let s;switch(t.vDirection){case 1:s="down";break;case 0:s="up";break;default:s=null;break}return this.gos.addGridCommonParams({type:i,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:o,overNode:n,y:e,vDirection:s})}dispatchGridEvent(i,t){let e=this.draggingToRowDragEvent(i,t);this.eventService.dispatchEvent(e)}onDragLeave(i){this.dispatchGridEvent(m.EVENT_ROW_DRAG_LEAVE,i),this.stopDragging(i),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(i){this.dispatchGridEvent(m.EVENT_ROW_DRAG_END,i),this.stopDragging(i),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(i))&&!this.isDropZoneWithinThisGrid(i)&&this.moveRowAndClearHighlight(i)}stopDragging(i){this.autoScrollService.ensureCleared(),this.getRowNodes(i).forEach(t=>{t.setDragging(!1)})}};g([w("dragAndDropService")],Hr.prototype,"dragAndDropService",2);g([w("rowModel")],Hr.prototype,"rowModel",2);g([w("paginationProxy")],Hr.prototype,"paginationProxy",2);g([w("columnModel")],Hr.prototype,"columnModel",2);g([w("focusService")],Hr.prototype,"focusService",2);g([w("sortController")],Hr.prototype,"sortController",2);g([w("filterManager")],Hr.prototype,"filterManager",2);g([w("selectionService")],Hr.prototype,"selectionService",2);g([w("mouseEventService")],Hr.prototype,"mouseEventService",2);g([w("ctrlsService")],Hr.prototype,"ctrlsService",2);g([gt("rangeService")],Hr.prototype,"rangeService",2);g([U],Hr.prototype,"postConstruct",1);var Nd=class extends j{constructor(){super(...arguments),this.dragEndFunctions=[],this.dragSources=[]}removeAllListeners(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0}removeListener(i){let t=i.dragSource.eElement,e=i.mouseDownListener;if(t.removeEventListener("mousedown",e),i.touchEnabled){let r=i.touchStartListener;t.removeEventListener("touchstart",r,{passive:!0})}}removeDragSource(i){let t=this.dragSources.find(e=>e.dragSource===i);t&&(this.removeListener(t),br(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(i){let t=this.onMouseDown.bind(this,i),{eElement:e,includeTouch:r,stopPropagationForTouch:o}=i;e.addEventListener("mousedown",t);let n=null,s=this.gos.get("suppressTouch");r&&!s&&(n=a=>{Bf(a.target)||(a.cancelable&&(a.preventDefault(),o&&a.stopPropagation()),this.onTouchStart(i,a))},e.addEventListener("touchstart",n,{passive:!1})),this.dragSources.push({dragSource:i,mouseDownListener:t,touchStartListener:n,touchEnabled:!!r})}getStartTarget(){return this.startTarget}onTouchStart(i,t){this.currentDragParams=i,this.dragging=!1;let e=t.touches[0];this.touchLastTime=e,this.touchStart=e;let r=l=>this.onTouchMove(l,i.eElement),o=l=>this.onTouchUp(l,i.eElement),n=l=>{l.cancelable&&l.preventDefault()},s=t.target,a=[{target:this.gos.getRootNode(),type:"touchmove",listener:n,options:{passive:!1}},{target:s,type:"touchmove",listener:r,options:{passive:!0}},{target:s,type:"touchend",listener:o,options:{passive:!0}},{target:s,type:"touchcancel",listener:o,options:{passive:!0}}];this.addTemporaryEvents(a),i.dragStartPixels===0&&this.onCommonMove(e,this.touchStart,i.eElement)}onMouseDown(i,t){let e=t;if(i.skipMouseEvent&&i.skipMouseEvent(t)||e._alreadyProcessedByDragService||(e._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=i,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;let r=l=>this.onMouseMove(l,i.eElement),o=l=>this.onMouseUp(l,i.eElement),n=l=>l.preventDefault(),s=this.gos.getRootNode(),a=[{target:s,type:"mousemove",listener:r},{target:s,type:"mouseup",listener:o},{target:s,type:"contextmenu",listener:n}];this.addTemporaryEvents(a),i.dragStartPixels===0&&this.onMouseMove(t,i.eElement)}addTemporaryEvents(i){i.forEach(t=>{let{target:e,type:r,listener:o,options:n}=t;e.addEventListener(r,o,n)}),this.dragEndFunctions.push(()=>{i.forEach(t=>{let{target:e,type:r,listener:o,options:n}=t;e.removeEventListener(r,o,n)})})}isEventNearStartEvent(i,t){let{dragStartPixels:e}=this.currentDragParams,r=W(e)?e:4;return Qf(i,t,r)}getFirstActiveTouch(i){for(let t=0;t<i.length;t++)if(i[t].identifier===this.touchStart.identifier)return i[t];return null}onCommonMove(i,t,e){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(i,t))return;this.dragging=!0;let r={type:m.EVENT_DRAG_STARTED,target:e};this.eventService.dispatchEvent(r),this.currentDragParams.onDragStart(t),this.currentDragParams.onDragging(t)}this.currentDragParams.onDragging(i)}onTouchMove(i,t){let e=this.getFirstActiveTouch(i.touches);e&&this.onCommonMove(e,this.touchStart,t)}onMouseMove(i,t){var e;gn()&&((e=this.gos.getDocument().getSelection())==null||e.removeAllRanges()),this.shouldPreventMouseEvent(i)&&i.preventDefault(),this.onCommonMove(i,this.mouseStartEvent,t)}shouldPreventMouseEvent(i){let t=this.gos.get("enableCellTextSelection"),e=i.type==="mousemove";return t&&e&&i.cancelable&&this.mouseEventService.isEventFromThisGrid(i)&&!this.isOverFormFieldElement(i)}isOverFormFieldElement(i){let t=i.target,e=t?.tagName.toLocaleLowerCase();return!!e?.match("^a$|textarea|input|select|button")}onTouchUp(i,t){let e=this.getFirstActiveTouch(i.changedTouches);e||(e=this.touchLastTime),this.onUpCommon(e,t)}onMouseUp(i,t){this.onUpCommon(i,t)}onUpCommon(i,t){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(i);let e={type:m.EVENT_DRAG_STOPPED,target:t};this.eventService.dispatchEvent(e)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(e=>e()),this.dragEndFunctions.length=0}};g([w("mouseEventService")],Nd.prototype,"mouseEventService",2);g([ir],Nd.prototype,"removeAllListeners",1);Nd=g([te("dragService")],Nd);var Gg="ag-list-item-hovered",Ww=class extends j{constructor(i,t,e){super(),this.comp=i,this.virtualList=t,this.params=e,this.currentDragValue=null,this.lastHoveredListItem=null}postConstruct(){this.addManagedListener(this.params.eventSource,this.params.listItemDragStartEvent,this.listItemDragStart.bind(this)),this.addManagedListener(this.params.eventSource,this.params.listItemDragEndEvent,this.listItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()}listItemDragStart(i){this.currentDragValue=this.params.getCurrentDragValue(i),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)}listItemDragEnd(){window.setTimeout(()=>{this.currentDragValue=null,this.moveBlocked=!1},10)}createDropTarget(){let i={isInterestedIn:t=>t===this.params.dragSourceType,getIconName:()=>this.moveBlocked?Fe.ICON_PINNED:Fe.ICON_MOVE,getContainer:()=>this.comp.getGui(),onDragging:t=>this.onDragging(t),onDragStop:()=>this.onDragStop(),onDragLeave:()=>this.onDragLeave()};this.dragAndDropService.addDropTarget(i)}createAutoScrollService(){let i=this.virtualList.getGui();this.autoScrollService=new $w({scrollContainer:i,scrollAxis:"y",getVerticalPosition:()=>i.scrollTop,setVerticalPosition:t=>i.scrollTop=t})}onDragging(i){if(!this.currentDragValue||this.moveBlocked)return;let t=this.getListDragItem(i),e=this.virtualList.getComponentAt(t.rowIndex);if(!e)return;let r=e.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===t.rowIndex&&this.lastHoveredListItem.position===t.position||(this.autoScrollService.check(i.event),this.clearHoveredItems(),this.lastHoveredListItem=t,nf(r,Gg),nf(r,`ag-item-highlight-${t.position}`))}getListDragItem(i){let t=this.virtualList.getGui(),e=parseFloat(window.getComputedStyle(t).paddingTop),r=this.virtualList.getRowHeight(),o=this.virtualList.getScrollTop(),n=Math.max(0,(i.y-e+o)/r),s=this.params.getNumRows(this.comp)-1,a=Math.min(s,n)|0;return{rowIndex:a,position:Math.round(n)>n||n>s?"bottom":"top",component:this.virtualList.getComponentAt(a)}}onDragStop(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearHoveredItems(),this.autoScrollService.ensureCleared())}onDragLeave(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()}clearHoveredItems(){this.virtualList.getGui().querySelectorAll(`.${Gg}`).forEach(t=>{[Gg,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach(e=>{t.classList.remove(e)})}),this.lastHoveredListItem=null}};g([w("dragAndDropService")],Ww.prototype,"dragAndDropService",2);g([U],Ww.prototype,"postConstruct",1);function zs(i){let t=i;return t!=null&&t.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():i}var We=class{constructor(){this.detailGridInfoMap={},this.destroyCalled=!1}init(){switch(this.rowModel.getType()){case"clientSide":this.clientSideRowModel=this.rowModel;break;case"infinite":this.infiniteRowModel=this.rowModel;break;case"serverSide":this.serverSideRowModel=this.rowModel;break}this.ctrlsService.whenReady(i=>{this.gridBodyCtrl=i.gridBodyCtrl})}__getAlignedGridService(){return this.alignedGridsService}getGridId(){return this.context.getGridId()}addDetailGridInfo(i,t){this.detailGridInfoMap[i]=t}removeDetailGridInfo(i){delete this.detailGridInfoMap[i]}getDetailGridInfo(i){return this.detailGridInfoMap[i]}forEachDetailGridInfo(i){let t=0;Wi(this.detailGridInfoMap,(e,r)=>{W(r)&&(i(r,t),t++)})}getDataAsCsv(i){if(pt.__assertRegistered("@ag-grid-community/csv-export","api.getDataAsCsv",this.context.getGridId()))return this.csvCreator.getDataAsCsv(i)}exportDataAsCsv(i){pt.__assertRegistered("@ag-grid-community/csv-export","api.exportDataAsCsv",this.context.getGridId())&&this.csvCreator.exportDataAsCsv(i)}assertNotExcelMultiSheet(i,t){return pt.__assertRegistered("@ag-grid-enterprise/excel-export","api."+i,this.context.getGridId())?this.excelCreator.getFactoryMode()===1?(console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'"),!1):!0:!1}getDataAsExcel(i){if(this.assertNotExcelMultiSheet("getDataAsExcel",i))return this.excelCreator.getDataAsExcel(i)}exportDataAsExcel(i){this.assertNotExcelMultiSheet("exportDataAsExcel",i)&&this.excelCreator.exportDataAsExcel(i)}getSheetDataForExcel(i){if(pt.__assertRegistered("@ag-grid-enterprise/excel-export","api.getSheetDataForExcel",this.context.getGridId()))return this.excelCreator.setFactoryMode(1),this.excelCreator.getSheetDataForExcel(i)}getMultipleSheetsAsExcel(i){if(pt.__assertRegistered("@ag-grid-enterprise/excel-export","api.getMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.getMultipleSheetsAsExcel(i)}exportMultipleSheetsAsExcel(i){pt.__assertRegistered("@ag-grid-enterprise/excel-export","api.exportMultipleSheetsAsExcel",this.context.getGridId())&&this.excelCreator.exportMultipleSheetsAsExcel(i)}setGridAriaProperty(i,t){if(!i)return;let e=this.ctrlsService.getGridBodyCtrl().getGui(),r=`aria-${i}`;t===null?e.removeAttribute(r):e.setAttribute(r,t)}logMissingRowModel(i,...t){console.error(`AG Grid: api.${i} can only be called when gridOptions.rowModelType is ${t.join(" or ")}`)}logDeprecation(i,t,e,r){Ce(`Since ${i} api.${t} is deprecated. Please use ${e} instead. ${r??""}`)}getPinnedTopRowCount(){return this.pinnedRowModel.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.pinnedRowModel.getPinnedBottomRowCount()}getPinnedTopRow(i){return this.pinnedRowModel.getPinnedTopRow(i)}getPinnedBottomRow(i){return this.pinnedRowModel.getPinnedBottomRow(i)}expireValueCache(){this.valueCache.expire()}getVerticalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()}getHorizontalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()}refreshCells(i={}){this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.refreshCells(i))}flashCells(i={}){let t=e=>Ce(`Since v31.1 api.flashCells parameter '${e}Delay' is deprecated. Please use '${e}Duration' instead.`);W(i.fadeDelay)&&t("fade"),W(i.flashDelay)&&t("flash"),this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.flashCells(i))}redrawRows(i={}){let t=i?i.rowNodes:void 0;this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.redrawRows(t))}refreshHeader(){this.frameworkOverrides.wrapIncoming(()=>this.ctrlsService.getHeaderRowContainerCtrls().forEach(i=>i.refresh()))}isAnyFilterPresent(){return this.filterManager.isAnyFilterPresent()}isColumnFilterPresent(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()}isQuickFilterPresent(){return this.filterManager.isQuickFilterPresent()}getModel(){return Ce("Since v31.1 getModel() is deprecated. Please use the appropriate grid API methods instead."),this.rowModel}setRowNodeExpanded(i,t,e,r){this.expansionService.setRowNodeExpanded(i,t,e,r)}onGroupExpandedOrCollapsed(){if(Te(this.clientSideRowModel)){this.logMissingRowModel("onGroupExpandedOrCollapsed","clientSide");return}this.expansionService.onGroupExpandedOrCollapsed()}refreshClientSideRowModel(i){if(Te(this.clientSideRowModel)){this.logMissingRowModel("refreshClientSideRowModel","clientSide");return}this.clientSideRowModel.refreshModel(i)}isAnimationFrameQueueEmpty(){return this.animationFrameService.isQueueEmpty()}flushAllAnimationFrames(){this.animationFrameService.flushAllFrames()}getRowNode(i){return this.rowModel.getRowNode(i)}getSizesForCurrentTheme(){return{rowHeight:this.gos.getRowHeightAsNumber(),headerHeight:this.columnModel.getHeaderHeight()}}expandAll(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!0):this.logMissingRowModel("expandAll","clientSide","serverSide")}collapseAll(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!1):this.logMissingRowModel("collapseAll","clientSide","serverSide")}addRenderedRowListener(i,t,e){this.rowRenderer.addRenderedRowListener(i,t,e)}getQuickFilter(){return this.gos.get("quickFilterText")}getAdvancedFilterModel(){return pt.__assertRegistered("@ag-grid-enterprise/advanced-filter","api.getAdvancedFilterModel",this.context.getGridId())?this.filterManager.getAdvancedFilterModel():null}setAdvancedFilterModel(i){this.filterManager.setAdvancedFilterModel(i)}showAdvancedFilterBuilder(){pt.__assertRegistered("@ag-grid-enterprise/advanced-filter","api.setAdvancedFilterModel",this.context.getGridId())&&this.filterManager.showAdvancedFilterBuilder("api")}setNodesSelected(i){if(!i.nodes.every(s=>s.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),!1):s.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),!1):!0))return;let{nodes:e,source:r,newValue:o}=i,n=e;this.selectionService.setNodesSelected({nodes:n,source:r??"api",newValue:o})}selectAll(i="apiSelectAll"){this.selectionService.selectAllRowNodes({source:i})}deselectAll(i="apiSelectAll"){this.selectionService.deselectAllRowNodes({source:i})}selectAllFiltered(i="apiSelectAllFiltered"){this.selectionService.selectAllRowNodes({source:i,justFiltered:!0})}deselectAllFiltered(i="apiSelectAllFiltered"){this.selectionService.deselectAllRowNodes({source:i,justFiltered:!0})}getServerSideSelectionState(){return Te(this.serverSideRowModel)?(this.logMissingRowModel("getServerSideSelectionState","serverSide"),null):this.selectionService.getSelectionState()}setServerSideSelectionState(i){if(Te(this.serverSideRowModel)){this.logMissingRowModel("setServerSideSelectionState","serverSide");return}this.selectionService.setSelectionState(i,"api")}selectAllOnCurrentPage(i="apiSelectAllCurrentPage"){this.selectionService.selectAllRowNodes({source:i,justCurrentPage:!0})}deselectAllOnCurrentPage(i="apiSelectAllCurrentPage"){this.selectionService.deselectAllRowNodes({source:i,justCurrentPage:!0})}showLoadingOverlay(){this.overlayService.showLoadingOverlay()}showNoRowsOverlay(){this.overlayService.showNoRowsOverlay()}hideOverlay(){this.overlayService.hideOverlay()}getSelectedNodes(){return this.selectionService.getSelectedNodes()}getSelectedRows(){return this.selectionService.getSelectedRows()}getBestCostNodeSelection(){if(Te(this.clientSideRowModel)){this.logMissingRowModel("getBestCostNodeSelection","clientSide");return}return this.selectionService.getBestCostNodeSelection()}getRenderedNodes(){return this.rowRenderer.getRenderedNodes()}ensureColumnVisible(i,t="auto"){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(i,t),"ensureVisible")}ensureIndexVisible(i,t){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(i,t),"ensureVisible")}ensureNodeVisible(i,t=null){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(i,t),"ensureVisible")}forEachLeafNode(i){if(Te(this.clientSideRowModel)){this.logMissingRowModel("forEachLeafNode","clientSide");return}this.clientSideRowModel.forEachLeafNode(i)}forEachNode(i,t){this.rowModel.forEachNode(i,t)}forEachNodeAfterFilter(i){if(Te(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilter","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilter(i)}forEachNodeAfterFilterAndSort(i){if(Te(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilterAndSort","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilterAndSort(i)}getFilterInstance(i,t){return Ce("'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."),this.filterManager.getFilterInstance(i,t)}getColumnFilterInstance(i){return this.filterManager.getColumnFilterInstance(i)}destroyFilter(i){let t=this.columnModel.getPrimaryColumn(i);if(t)return this.filterManager.destroyFilter(t,"api")}getStatusPanel(i){if(!pt.__assertRegistered("@ag-grid-enterprise/status-bar","api.getStatusPanel",this.context.getGridId()))return;let t=this.statusBarService.getStatusPanel(i);return zs(t)}getColumnDef(i){let t=this.columnModel.getPrimaryColumn(i);return t?t.getColDef():null}getColumnDefs(){return this.columnModel.getColumnDefs()}onFilterChanged(i="api"){this.filterManager.onFilterChanged({source:i})}onSortChanged(){this.sortController.onSortChanged("api")}setFilterModel(i){this.frameworkOverrides.wrapIncoming(()=>this.filterManager.setFilterModel(i))}getFilterModel(){return this.filterManager.getFilterModel()}getColumnFilterModel(i){return this.filterManager.getColumnFilterModel(i)}setColumnFilterModel(i,t){return this.filterManager.setColumnFilterModel(i,t)}getFocusedCell(){return this.focusService.getFocusedCell()}clearFocusedCell(){return this.focusService.clearFocusedCell()}setFocusedCell(i,t,e){this.focusService.setFocusedCell({rowIndex:i,column:t,rowPinned:e,forceBrowserFocus:!0})}addRowDropZone(i){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(i)}removeRowDropZone(i){let t=this.dragAndDropService.findExternalZone(i);t&&this.dragAndDropService.removeDropTarget(t)}getRowDropZoneParams(i){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(i)}assertSideBarLoaded(i){return pt.__assertRegistered("@ag-grid-enterprise/side-bar","api."+i,this.context.getGridId())}isSideBarVisible(){return this.assertSideBarLoaded("isSideBarVisible")&&this.sideBarService.getSideBarComp().isDisplayed()}setSideBarVisible(i){this.assertSideBarLoaded("setSideBarVisible")&&this.sideBarService.getSideBarComp().setDisplayed(i)}setSideBarPosition(i){this.assertSideBarLoaded("setSideBarPosition")&&this.sideBarService.getSideBarComp().setSideBarPosition(i)}openToolPanel(i){this.assertSideBarLoaded("openToolPanel")&&this.sideBarService.getSideBarComp().openToolPanel(i,"api")}closeToolPanel(){this.assertSideBarLoaded("closeToolPanel")&&this.sideBarService.getSideBarComp().close("api")}getOpenedToolPanel(){return this.assertSideBarLoaded("getOpenedToolPanel")?this.sideBarService.getSideBarComp().openedItem():null}refreshToolPanel(){this.assertSideBarLoaded("refreshToolPanel")&&this.sideBarService.getSideBarComp().refresh()}isToolPanelShowing(){return this.assertSideBarLoaded("isToolPanelShowing")&&this.sideBarService.getSideBarComp().isToolPanelShowing()}getToolPanelInstance(i){if(this.assertSideBarLoaded("getToolPanelInstance")){let t=this.sideBarService.getSideBarComp().getToolPanelInstance(i);return zs(t)}}getSideBar(){if(this.assertSideBarLoaded("getSideBar"))return this.sideBarService.getSideBarComp().getDef()}resetRowHeights(){if(W(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive()){console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}this.clientSideRowModel.resetRowHeights()}}setRowCount(i,t){if(this.serverSideRowModel){if(this.columnModel.isRowGroupEmpty()){this.serverSideRowModel.setRowCount(i,t);return}console.error("AG Grid: setRowCount cannot be used while using row grouping.");return}if(this.infiniteRowModel){this.infiniteRowModel.setRowCount(i,t);return}this.logMissingRowModel("setRowCount","infinite","serverSide")}onRowHeightChanged(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()}getValue(i,t){return this.logDeprecation("31.3","getValue","getCellValue"),this.getCellValue({colKey:i,rowNode:t})}getCellValue(i){var t;let{colKey:e,rowNode:r,useFormatter:o}=i,n=(t=this.columnModel.getPrimaryColumn(e))!=null?t:this.columnModel.getGridColumn(e);if(Te(n))return null;let s=this.valueService.getValue(n,r);if(o){let a=this.valueService.formatValue(n,r,s);return a??ti(s,!0)}return s}addEventListener(i,t){this.apiEventService.addEventListener(i,t)}addGlobalListener(i){this.apiEventService.addGlobalListener(i)}removeEventListener(i,t){this.apiEventService.removeEventListener(i,t)}removeGlobalListener(i){this.apiEventService.removeGlobalListener(i)}dispatchEvent(i){this.eventService.dispatchEvent(i)}destroy(){var i;let t=`See ${this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}`;if(this.destroyCalled)return;let e={type:m.EVENT_GRID_PRE_DESTROYED,state:this.getState()};this.dispatchEvent(e),this.destroyCalled=!0,(i=this.ctrlsService.get("gridCtrl"))==null||i.destroyGridUi(),this.context.destroy(),this.detailGridInfoMap={},HC(this,["isDestroyed"],t)}isDestroyed(){return this.destroyCalled}resetQuickFilter(){this.filterManager.resetQuickFilterCache()}getCellRanges(){return this.rangeService?this.rangeService.getCellRanges():(pt.__assertRegistered("@ag-grid-enterprise/range-selection","api.getCellRanges",this.context.getGridId()),null)}addCellRange(i){if(this.rangeService){this.rangeService.addCellRange(i);return}pt.__assertRegistered("@ag-grid-enterprise/range-selection","api.addCellRange",this.context.getGridId())}clearRangeSelection(){this.rangeService&&this.rangeService.removeAllCellRanges(),pt.__assertRegistered("@ag-grid-enterprise/range-selection","gridApi.clearRangeSelection",this.context.getGridId())}undoCellEditing(){this.undoRedoService.undo("api")}redoCellEditing(){this.undoRedoService.redo("api")}getCurrentUndoSize(){return this.undoRedoService.getCurrentUndoStackSize()}getCurrentRedoSize(){return this.undoRedoService.getCurrentRedoStackSize()}assertChart(i,t){if(pt.__assertRegistered("@ag-grid-enterprise/charts","api."+i,this.context.getGridId()))return this.frameworkOverrides.wrapIncoming(()=>t())}getChartModels(){return this.assertChart("getChartModels",()=>this.chartService.getChartModels())}getChartRef(i){return this.assertChart("getChartRef",()=>this.chartService.getChartRef(i))}getChartImageDataURL(i){return this.assertChart("getChartImageDataURL",()=>this.chartService.getChartImageDataURL(i))}downloadChart(i){return this.assertChart("downloadChart",()=>this.chartService.downloadChart(i))}openChartToolPanel(i){return this.assertChart("openChartToolPanel",()=>this.chartService.openChartToolPanel(i))}closeChartToolPanel(i){return this.assertChart("closeChartToolPanel",()=>this.chartService.closeChartToolPanel(i.chartId))}createRangeChart(i){return this.assertChart("createRangeChart",()=>this.chartService.createRangeChart(i))}createPivotChart(i){return this.assertChart("createPivotChart",()=>this.chartService.createPivotChart(i))}createCrossFilterChart(i){return this.assertChart("createCrossFilterChart",()=>this.chartService.createCrossFilterChart(i))}updateChart(i){return this.assertChart("updateChart",()=>this.chartService.updateChart(i))}restoreChart(i,t){return this.assertChart("restoreChart",()=>this.chartService.restoreChart(i,t))}assertClipboard(i,t){pt.__assertRegistered("@ag-grid-enterprise/clipboard","api"+i,this.context.getGridId())&&t()}copyToClipboard(i){this.assertClipboard("copyToClipboard",()=>this.clipboardService.copyToClipboard(i))}cutToClipboard(i){this.assertClipboard("cutToClipboard",()=>this.clipboardService.cutToClipboard(i))}copySelectedRowsToClipboard(i){this.assertClipboard("copySelectedRowsToClipboard",()=>this.clipboardService.copySelectedRowsToClipboard(i))}copySelectedRangeToClipboard(i){this.assertClipboard("copySelectedRangeToClipboard",()=>this.clipboardService.copySelectedRangeToClipboard(i))}copySelectedRangeDown(){this.assertClipboard("copySelectedRangeDown",()=>this.clipboardService.copyRangeDown())}pasteFromClipboard(){this.assertClipboard("pasteFromClipboard",()=>this.clipboardService.pasteFromClipboard())}showColumnMenuAfterButtonClick(i,t){Ce("'showColumnMenuAfterButtonClick' is deprecated. Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere.");let e=this.columnModel.getGridColumn(i);this.menuService.showColumnMenu({column:e,buttonElement:t,positionBy:"button"})}showColumnMenuAfterMouseClick(i,t){Ce("'showColumnMenuAfterMouseClick' is deprecated. Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere.");let e=this.columnModel.getGridColumn(i);if(e||(e=this.columnModel.getPrimaryColumn(i)),!e){console.error(`AG Grid: column '${i}' not found`);return}this.menuService.showColumnMenu({column:e,mouseEvent:t,positionBy:"mouse"})}showContextMenu(i){let{rowNode:t,column:e,value:r,x:o,y:n}=i||{},{x:s,y:a}=this.menuService.getContextMenuPosition(t,e);o!=null&&(s=o),n!=null&&(a=n),this.menuService.showContextMenu({mouseEvent:new MouseEvent("mousedown",{clientX:s,clientY:a}),rowNode:t,column:e,value:r})}showColumnChooser(i){this.menuService.showColumnChooser({chooserParams:i})}showColumnFilter(i){let t=this.columnModel.getGridColumn(i);if(!t){console.error(`AG Grid: column '${i}' not found`);return}this.menuService.showFilterMenu({column:t,containerType:"columnFilter",positionBy:"auto"})}showColumnMenu(i){let t=this.columnModel.getGridColumn(i);if(!t){console.error(`AG Grid: column '${i}' not found`);return}this.menuService.showColumnMenu({column:t,positionBy:"auto"})}hidePopupMenu(){this.menuService.hidePopupMenu()}hideColumnChooser(){this.menuService.hideColumnChooser()}tabToNextCell(i){return this.navigationService.tabToNextCell(!1,i)}tabToPreviousCell(i){return this.navigationService.tabToNextCell(!0,i)}getCellRendererInstances(i={}){return this.rowRenderer.getCellRendererInstances(i).map(zs)}getCellEditorInstances(i={}){return this.rowRenderer.getCellEditorInstances(i).map(zs)}getEditingCells(){return this.rowRenderer.getEditingCells()}stopEditing(i=!1){this.rowRenderer.stopEditing(i)}startEditingCell(i){let t=this.columnModel.getGridColumn(i.colKey);if(!t){console.warn(`AG Grid: no column found for ${i.colKey}`);return}let e={rowIndex:i.rowIndex,rowPinned:i.rowPinned||null,column:t};i.rowPinned==null&&this.ensureIndexVisible(i.rowIndex),this.ensureColumnVisible(i.colKey);let o=this.navigationService.getCellByPosition(e);o&&(this.focusService.isCellFocused(e)||this.focusService.setFocusedCell(e),o.startRowOrCellEdit(i.key))}addAggFunc(i,t){this.logDeprecation("v31.1","addAggFunc(key, func)","addAggFuncs({ key: func })"),this.aggFuncService&&this.aggFuncService.addAggFuncs({key:t})}addAggFuncs(i){this.aggFuncService&&this.aggFuncService.addAggFuncs(i)}clearAggFuncs(){this.aggFuncService&&this.aggFuncService.clear()}applyServerSideTransaction(i){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransaction","serverSide");return}return this.serverSideTransactionManager.applyTransaction(i)}applyServerSideTransactionAsync(i,t){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransactionAsync","serverSide");return}return this.serverSideTransactionManager.applyTransactionAsync(i,t)}applyServerSideRowData(i){var t,e;let r=(t=i.startRow)!=null?t:0,o=(e=i.route)!=null?e:[];if(r<0){console.warn(`AG Grid: invalid value ${i.startRow} for startRow, the value should be >= 0`);return}this.serverSideRowModel?this.serverSideRowModel.applyRowData(i.successParams,r,o):this.logMissingRowModel("setServerSideDatasource","serverSide")}retryServerSideLoads(){if(!this.serverSideRowModel){this.logMissingRowModel("retryServerSideLoads","serverSide");return}this.serverSideRowModel.retryLoads()}flushServerSideAsyncTransactions(){if(!this.serverSideTransactionManager){this.logMissingRowModel("flushServerSideAsyncTransactions","serverSide");return}return this.serverSideTransactionManager.flushAsyncTransactions()}applyTransaction(i){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransaction","clientSide");return}return this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.updateRowData(i))}applyTransactionAsync(i,t){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransactionAsync","clientSide");return}this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.batchUpdateRowData(i,t))}flushAsyncTransactions(){if(!this.clientSideRowModel){this.logMissingRowModel("flushAsyncTransactions","clientSide");return}this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.flushAsyncTransactions())}refreshInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():this.logMissingRowModel("refreshInfiniteCache","infinite")}purgeInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():this.logMissingRowModel("purgeInfiniteCache","infinite")}refreshServerSide(i){if(!this.serverSideRowModel){this.logMissingRowModel("refreshServerSide","serverSide");return}this.serverSideRowModel.refreshStore(i)}getServerSideGroupLevelState(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(this.logMissingRowModel("getServerSideGroupLevelState","serverSide"),[])}getInfiniteRowCount(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();this.logMissingRowModel("getInfiniteRowCount","infinite")}isLastRowIndexKnown(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();this.logMissingRowModel("isLastRowIndexKnown","infinite")}getCacheBlockState(){return this.rowNodeBlockLoader.getBlockState()}getFirstDisplayedRow(){return this.logDeprecation("v31.1","getFirstDisplayedRow","getFirstDisplayedRowIndex"),this.getFirstDisplayedRowIndex()}getFirstDisplayedRowIndex(){return this.rowRenderer.getFirstVirtualRenderedRow()}getLastDisplayedRow(){return this.logDeprecation("v31.1","getLastDisplayedRow","getLastDisplayedRowIndex"),this.getLastDisplayedRowIndex()}getLastDisplayedRowIndex(){return this.rowRenderer.getLastVirtualRenderedRow()}getDisplayedRowAtIndex(i){return this.rowModel.getRow(i)}getDisplayedRowCount(){return this.rowModel.getRowCount()}paginationIsLastPageFound(){return this.paginationProxy.isLastPageFound()}paginationGetPageSize(){return this.paginationProxy.getPageSize()}paginationGetCurrentPage(){return this.paginationProxy.getCurrentPage()}paginationGetTotalPages(){return this.paginationProxy.getTotalPages()}paginationGetRowCount(){return this.paginationProxy.getMasterRowCount()}paginationGoToNextPage(){this.paginationProxy.goToNextPage()}paginationGoToPreviousPage(){this.paginationProxy.goToPreviousPage()}paginationGoToFirstPage(){this.paginationProxy.goToFirstPage()}paginationGoToLastPage(){this.paginationProxy.goToLastPage()}paginationGoToPage(i){this.paginationProxy.goToPage(i)}sizeColumnsToFit(i){typeof i=="number"?this.columnModel.sizeColumnsToFit(i,"api"):this.gridBodyCtrl.sizeColumnsToFit(i)}setColumnGroupOpened(i,t){this.columnModel.setColumnGroupOpened(i,t,"api")}getColumnGroup(i,t){return this.columnModel.getColumnGroup(i,t)}getProvidedColumnGroup(i){return this.columnModel.getProvidedColumnGroup(i)}getDisplayNameForColumn(i,t){return this.columnModel.getDisplayNameForColumn(i,t)||""}getDisplayNameForColumnGroup(i,t){return this.columnModel.getDisplayNameForColumnGroup(i,t)||""}getColumn(i){return this.columnModel.getPrimaryColumn(i)}getColumns(){return this.columnModel.getAllPrimaryColumns()}applyColumnState(i){return this.columnModel.applyColumnState(i,"api")}getColumnState(){return this.columnModel.getColumnState()}resetColumnState(){this.columnModel.resetColumnState("api")}getColumnGroupState(){return this.columnModel.getColumnGroupState()}setColumnGroupState(i){this.columnModel.setColumnGroupState(i,"api")}resetColumnGroupState(){this.columnModel.resetColumnGroupState("api")}isPinning(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()}isPinningLeft(){return this.columnModel.isPinningLeft()}isPinningRight(){return this.columnModel.isPinningRight()}getDisplayedColAfter(i){return this.columnModel.getDisplayedColAfter(i)}getDisplayedColBefore(i){return this.columnModel.getDisplayedColBefore(i)}setColumnVisible(i,t){this.logDeprecation("v31.1","setColumnVisible(key,visible)","setColumnsVisible([key],visible)"),this.columnModel.setColumnsVisible([i],t,"api")}setColumnsVisible(i,t){this.columnModel.setColumnsVisible(i,t,"api")}setColumnPinned(i,t){this.logDeprecation("v31.1","setColumnPinned(key,pinned)","setColumnsPinned([key],pinned)"),this.columnModel.setColumnsPinned([i],t,"api")}setColumnsPinned(i,t){this.columnModel.setColumnsPinned(i,t,"api")}getAllGridColumns(){return this.columnModel.getAllGridColumns()}getDisplayedLeftColumns(){return this.columnModel.getDisplayedLeftColumns()}getDisplayedCenterColumns(){return this.columnModel.getDisplayedCenterColumns()}getDisplayedRightColumns(){return this.columnModel.getDisplayedRightColumns()}getAllDisplayedColumns(){return this.columnModel.getAllDisplayedColumns()}getAllDisplayedVirtualColumns(){return this.columnModel.getViewportColumns()}moveColumn(i,t){this.logDeprecation("v31.1","moveColumn(key, toIndex)","moveColumns([key], toIndex)"),this.columnModel.moveColumns([i],t,"api")}moveColumnByIndex(i,t){this.columnModel.moveColumnByIndex(i,t,"api")}moveColumns(i,t){this.columnModel.moveColumns(i,t,"api")}moveRowGroupColumn(i,t){this.columnModel.moveRowGroupColumn(i,t,"api")}setColumnAggFunc(i,t){this.columnModel.setColumnAggFunc(i,t,"api")}setColumnWidth(i,t,e=!0,r="api"){this.logDeprecation("v31.1","setColumnWidth(col, width)","setColumnWidths([{key: col, newWidth: width}])"),this.columnModel.setColumnWidths([{key:i,newWidth:t}],!1,e,r)}setColumnWidths(i,t=!0,e="api"){this.columnModel.setColumnWidths(i,!1,t,e)}isPivotMode(){return this.columnModel.isPivotMode()}getPivotResultColumn(i,t){return this.columnModel.getSecondaryPivotColumn(i,t)}setValueColumns(i){this.columnModel.setValueColumns(i,"api")}getValueColumns(){return this.columnModel.getValueColumns()}removeValueColumn(i){this.logDeprecation("v31.1","removeValueColumn(colKey)","removeValueColumns([colKey])"),this.columnModel.removeValueColumns([i],"api")}removeValueColumns(i){this.columnModel.removeValueColumns(i,"api")}addValueColumn(i){this.logDeprecation("v31.1","addValueColumn(colKey)","addValueColumns([colKey])"),this.columnModel.addValueColumns([i],"api")}addValueColumns(i){this.columnModel.addValueColumns(i,"api")}setRowGroupColumns(i){this.columnModel.setRowGroupColumns(i,"api")}removeRowGroupColumn(i){this.logDeprecation("v31.1","removeRowGroupColumn(colKey)","removeRowGroupColumns([colKey])"),this.columnModel.removeRowGroupColumns([i],"api")}removeRowGroupColumns(i){this.columnModel.removeRowGroupColumns(i,"api")}addRowGroupColumn(i){this.logDeprecation("v31.1","addRowGroupColumn(colKey)","addRowGroupColumns([colKey])"),this.columnModel.addRowGroupColumns([i],"api")}addRowGroupColumns(i){this.columnModel.addRowGroupColumns(i,"api")}getRowGroupColumns(){return this.columnModel.getRowGroupColumns()}setPivotColumns(i){this.columnModel.setPivotColumns(i,"api")}removePivotColumn(i){this.logDeprecation("v31.1","removePivotColumn(colKey)","removePivotColumns([colKey])"),this.columnModel.removePivotColumns([i],"api")}removePivotColumns(i){this.columnModel.removePivotColumns(i,"api")}addPivotColumn(i){this.logDeprecation("v31.1","addPivotColumn(colKey)","addPivotColumns([colKey])"),this.columnModel.addPivotColumns([i],"api")}addPivotColumns(i){this.columnModel.addPivotColumns(i,"api")}getPivotColumns(){return this.columnModel.getPivotColumns()}getLeftDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeLeft()}getCenterDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeCentre()}getRightDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeRight()}getAllDisplayedColumnGroups(){return this.columnModel.getAllDisplayedTrees()}autoSizeColumn(i,t){return this.logDeprecation("v31.1","autoSizeColumn(key, skipHeader)","autoSizeColumns([key], skipHeader)"),this.columnModel.autoSizeColumns({columns:[i],skipHeader:t,source:"api"})}autoSizeColumns(i,t){this.columnModel.autoSizeColumns({columns:i,skipHeader:t,source:"api"})}autoSizeAllColumns(i){this.columnModel.autoSizeAllColumns("api",i)}setPivotResultColumns(i){this.columnModel.setSecondaryColumns(i,"api")}getPivotResultColumns(){return this.columnModel.getSecondaryColumns()}getState(){return this.stateService.getState()}getGridOption(i){return this.gos.get(i)}setGridOption(i,t){this.updateGridOptions({[i]:t})}updateGridOptions(i){this.gos.updateGridOptions({options:i})}__internalUpdateGridOptions(i,t){this.gos.updateGridOptions({options:i,force:t,source:"gridOptionsUpdated"})}deprecatedUpdateGridOption(i,t){Ce(`set${i.charAt(0).toUpperCase()}${i.slice(1,i.length)} is deprecated. Please use 'api.setGridOption('${i}', newValue)' or 'api.updateGridOptions({ ${i}: newValue })' instead.`),this.setGridOption(i,t)}setPivotMode(i){this.deprecatedUpdateGridOption("pivotMode",i)}setPinnedTopRowData(i){this.deprecatedUpdateGridOption("pinnedTopRowData",i)}setPinnedBottomRowData(i){this.deprecatedUpdateGridOption("pinnedBottomRowData",i)}setPopupParent(i){this.deprecatedUpdateGridOption("popupParent",i)}setSuppressModelUpdateAfterUpdateTransaction(i){this.deprecatedUpdateGridOption("suppressModelUpdateAfterUpdateTransaction",i)}setDataTypeDefinitions(i){this.deprecatedUpdateGridOption("dataTypeDefinitions",i)}setPagination(i){this.deprecatedUpdateGridOption("pagination",i)}paginationSetPageSize(i){this.deprecatedUpdateGridOption("paginationPageSize",i)}setSideBar(i){this.deprecatedUpdateGridOption("sideBar",i)}setSuppressClipboardPaste(i){this.deprecatedUpdateGridOption("suppressClipboardPaste",i)}setGroupRemoveSingleChildren(i){this.deprecatedUpdateGridOption("groupRemoveSingleChildren",i)}setGroupRemoveLowestSingleChildren(i){this.deprecatedUpdateGridOption("groupRemoveLowestSingleChildren",i)}setGroupDisplayType(i){this.deprecatedUpdateGridOption("groupDisplayType",i)}setGroupIncludeFooter(i){this.deprecatedUpdateGridOption("groupIncludeFooter",i)}setGroupIncludeTotalFooter(i){this.deprecatedUpdateGridOption("groupIncludeTotalFooter",i)}setRowClass(i){this.deprecatedUpdateGridOption("rowClass",i)}setDeltaSort(i){this.deprecatedUpdateGridOption("deltaSort",i)}setSuppressRowDrag(i){this.deprecatedUpdateGridOption("suppressRowDrag",i)}setSuppressMoveWhenRowDragging(i){this.deprecatedUpdateGridOption("suppressMoveWhenRowDragging",i)}setSuppressRowClickSelection(i){this.deprecatedUpdateGridOption("suppressRowClickSelection",i)}setEnableAdvancedFilter(i){this.deprecatedUpdateGridOption("enableAdvancedFilter",i)}setIncludeHiddenColumnsInAdvancedFilter(i){this.deprecatedUpdateGridOption("includeHiddenColumnsInAdvancedFilter",i)}setAdvancedFilterParent(i){this.deprecatedUpdateGridOption("advancedFilterParent",i)}setAdvancedFilterBuilderParams(i){this.deprecatedUpdateGridOption("advancedFilterBuilderParams",i)}setQuickFilter(i){Ce("setQuickFilter is deprecated. Please use 'api.setGridOption('quickFilterText', newValue)' or 'api.updateGridOptions({ quickFilterText: newValue })' instead."),this.gos.updateGridOptions({options:{quickFilterText:i}})}setExcludeHiddenColumnsFromQuickFilter(i){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",!i)}setIncludeHiddenColumnsInQuickFilter(i){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",i)}setQuickFilterParser(i){this.deprecatedUpdateGridOption("quickFilterParser",i)}setQuickFilterMatcher(i){this.deprecatedUpdateGridOption("quickFilterMatcher",i)}setAlwaysShowHorizontalScroll(i){this.deprecatedUpdateGridOption("alwaysShowHorizontalScroll",i)}setAlwaysShowVerticalScroll(i){this.deprecatedUpdateGridOption("alwaysShowVerticalScroll",i)}setFunctionsReadOnly(i){this.deprecatedUpdateGridOption("functionsReadOnly",i)}setColumnDefs(i,t="api"){Ce("setColumnDefs is deprecated. Please use 'api.setGridOption('columnDefs', newValue)' or 'api.updateGridOptions({ columnDefs: newValue })' instead."),this.gos.updateGridOptions({options:{columnDefs:i},source:t})}setAutoGroupColumnDef(i,t="api"){Ce("setAutoGroupColumnDef is deprecated. Please use 'api.setGridOption('autoGroupColumnDef', newValue)' or 'api.updateGridOptions({ autoGroupColumnDef: newValue })' instead."),this.gos.updateGridOptions({options:{autoGroupColumnDef:i},source:t})}setDefaultColDef(i,t="api"){Ce("setDefaultColDef is deprecated. Please use 'api.setGridOption('defaultColDef', newValue)' or 'api.updateGridOptions({ defaultColDef: newValue })' instead."),this.gos.updateGridOptions({options:{defaultColDef:i},source:t})}setColumnTypes(i,t="api"){Ce("setColumnTypes is deprecated. Please use 'api.setGridOption('columnTypes', newValue)' or 'api.updateGridOptions({ columnTypes: newValue })' instead."),this.gos.updateGridOptions({options:{columnTypes:i},source:t})}setTreeData(i){this.deprecatedUpdateGridOption("treeData",i)}setServerSideDatasource(i){this.deprecatedUpdateGridOption("serverSideDatasource",i)}setCacheBlockSize(i){this.deprecatedUpdateGridOption("cacheBlockSize",i)}setDatasource(i){this.deprecatedUpdateGridOption("datasource",i)}setViewportDatasource(i){this.deprecatedUpdateGridOption("viewportDatasource",i)}setRowData(i){this.deprecatedUpdateGridOption("rowData",i)}setEnableCellTextSelection(i){this.deprecatedUpdateGridOption("enableCellTextSelection",i)}setHeaderHeight(i){this.deprecatedUpdateGridOption("headerHeight",i)}setDomLayout(i){this.deprecatedUpdateGridOption("domLayout",i)}setFillHandleDirection(i){this.deprecatedUpdateGridOption("fillHandleDirection",i)}setGroupHeaderHeight(i){this.deprecatedUpdateGridOption("groupHeaderHeight",i)}setFloatingFiltersHeight(i){this.deprecatedUpdateGridOption("floatingFiltersHeight",i)}setPivotHeaderHeight(i){this.deprecatedUpdateGridOption("pivotHeaderHeight",i)}setPivotGroupHeaderHeight(i){this.deprecatedUpdateGridOption("pivotGroupHeaderHeight",i)}setAnimateRows(i){this.deprecatedUpdateGridOption("animateRows",i)}setIsExternalFilterPresent(i){this.deprecatedUpdateGridOption("isExternalFilterPresent",i)}setDoesExternalFilterPass(i){this.deprecatedUpdateGridOption("doesExternalFilterPass",i)}setNavigateToNextCell(i){this.deprecatedUpdateGridOption("navigateToNextCell",i)}setTabToNextCell(i){this.deprecatedUpdateGridOption("tabToNextCell",i)}setTabToNextHeader(i){this.deprecatedUpdateGridOption("tabToNextHeader",i)}setNavigateToNextHeader(i){this.deprecatedUpdateGridOption("navigateToNextHeader",i)}setRowGroupPanelShow(i){this.deprecatedUpdateGridOption("rowGroupPanelShow",i)}setGetGroupRowAgg(i){this.deprecatedUpdateGridOption("getGroupRowAgg",i)}setGetBusinessKeyForNode(i){this.deprecatedUpdateGridOption("getBusinessKeyForNode",i)}setGetChildCount(i){this.deprecatedUpdateGridOption("getChildCount",i)}setProcessRowPostCreate(i){this.deprecatedUpdateGridOption("processRowPostCreate",i)}setGetRowId(i){Ce("getRowId is a static property and can no longer be updated.")}setGetRowClass(i){this.deprecatedUpdateGridOption("getRowClass",i)}setIsFullWidthRow(i){this.deprecatedUpdateGridOption("isFullWidthRow",i)}setIsRowSelectable(i){this.deprecatedUpdateGridOption("isRowSelectable",i)}setIsRowMaster(i){this.deprecatedUpdateGridOption("isRowMaster",i)}setPostSortRows(i){this.deprecatedUpdateGridOption("postSortRows",i)}setGetDocument(i){this.deprecatedUpdateGridOption("getDocument",i)}setGetContextMenuItems(i){this.deprecatedUpdateGridOption("getContextMenuItems",i)}setGetMainMenuItems(i){this.deprecatedUpdateGridOption("getMainMenuItems",i)}setProcessCellForClipboard(i){this.deprecatedUpdateGridOption("processCellForClipboard",i)}setSendToClipboard(i){this.deprecatedUpdateGridOption("sendToClipboard",i)}setProcessCellFromClipboard(i){this.deprecatedUpdateGridOption("processCellFromClipboard",i)}setProcessPivotResultColDef(i){this.deprecatedUpdateGridOption("processPivotResultColDef",i)}setProcessPivotResultColGroupDef(i){this.deprecatedUpdateGridOption("processPivotResultColGroupDef",i)}setPostProcessPopup(i){this.deprecatedUpdateGridOption("postProcessPopup",i)}setInitialGroupOrderComparator(i){this.deprecatedUpdateGridOption("initialGroupOrderComparator",i)}setGetChartToolbarItems(i){this.deprecatedUpdateGridOption("getChartToolbarItems",i)}setPaginationNumberFormatter(i){this.deprecatedUpdateGridOption("paginationNumberFormatter",i)}setGetServerSideGroupLevelParams(i){this.deprecatedUpdateGridOption("getServerSideGroupLevelParams",i)}setIsServerSideGroupOpenByDefault(i){this.deprecatedUpdateGridOption("isServerSideGroupOpenByDefault",i)}setIsApplyServerSideTransaction(i){this.deprecatedUpdateGridOption("isApplyServerSideTransaction",i)}setIsServerSideGroup(i){this.deprecatedUpdateGridOption("isServerSideGroup",i)}setGetServerSideGroupKey(i){this.deprecatedUpdateGridOption("getServerSideGroupKey",i)}setGetRowStyle(i){this.deprecatedUpdateGridOption("getRowStyle",i)}setGetRowHeight(i){this.deprecatedUpdateGridOption("getRowHeight",i)}};g([w("rowRenderer")],We.prototype,"rowRenderer",2);g([w("navigationService")],We.prototype,"navigationService",2);g([w("filterManager")],We.prototype,"filterManager",2);g([w("columnModel")],We.prototype,"columnModel",2);g([w("selectionService")],We.prototype,"selectionService",2);g([w("gridOptionsService")],We.prototype,"gos",2);g([w("valueService")],We.prototype,"valueService",2);g([w("alignedGridsService")],We.prototype,"alignedGridsService",2);g([w("eventService")],We.prototype,"eventService",2);g([w("pinnedRowModel")],We.prototype,"pinnedRowModel",2);g([w("context")],We.prototype,"context",2);g([w("rowModel")],We.prototype,"rowModel",2);g([w("sortController")],We.prototype,"sortController",2);g([w("paginationProxy")],We.prototype,"paginationProxy",2);g([w("focusService")],We.prototype,"focusService",2);g([w("dragAndDropService")],We.prototype,"dragAndDropService",2);g([w("menuService")],We.prototype,"menuService",2);g([w("valueCache")],We.prototype,"valueCache",2);g([w("animationFrameService")],We.prototype,"animationFrameService",2);g([w("ctrlsService")],We.prototype,"ctrlsService",2);g([w("overlayService")],We.prototype,"overlayService",2);g([w("stateService")],We.prototype,"stateService",2);g([w("expansionService")],We.prototype,"expansionService",2);g([w("apiEventService")],We.prototype,"apiEventService",2);g([w("frameworkOverrides")],We.prototype,"frameworkOverrides",2);g([w("undoRedoService")],We.prototype,"undoRedoService",2);g([w("rowNodeBlockLoader")],We.prototype,"rowNodeBlockLoader",2);g([gt("csvCreator")],We.prototype,"csvCreator",2);g([gt("excelCreator")],We.prototype,"excelCreator",2);g([gt("rangeService")],We.prototype,"rangeService",2);g([gt("clipboardService")],We.prototype,"clipboardService",2);g([gt("aggFuncService")],We.prototype,"aggFuncService",2);g([gt("statusBarService")],We.prototype,"statusBarService",2);g([gt("chartService")],We.prototype,"chartService",2);g([gt("ssrmTransactionManager")],We.prototype,"serverSideTransactionManager",2);g([gt("sideBarService")],We.prototype,"sideBarService",2);g([U],We.prototype,"init",1);We=g([te("gridApi")],We);var xr=class extends j{constructor(){super(...arguments),this.quickFilter=null,this.quickFilterParts=null}postConstruct(){this.addManagedListener(this.eventService,m.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,m.EVENT_NEW_COLUMNS_LOADED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,m.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,m.EVENT_COLUMN_VISIBLE,()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}),this.addManagedPropertyListener("quickFilterText",i=>this.setQuickFilter(i.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onQuickFilterColumnConfigChanged()),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(i){let t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,i):this.quickFilterParts.every(e=>t?this.doesRowPassQuickFilterCache(i,e):this.doesRowPassQuickFilterNoCache(i,e))}resetQuickFilterCache(){this.rowModel.forEachNode(i=>i.quickFilterAggregateText=null)}setQuickFilterParts(){let{quickFilter:i,parser:t}=this;i?this.quickFilterParts=t?t(i):i.split(" "):this.quickFilterParts=null}parseQuickFilter(i){return W(i)?this.gos.isRowModelType("clientSide")?i.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(i){if(i!=null&&typeof i!="string"){console.warn(`AG Grid - Grid option quickFilterText only supports string inputs, received: ${typeof i}`);return}let t=this.parseQuickFilter(i);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchEvent({type:xr.EVENT_QUICK_FILTER_CHANGED}))}setQuickFilterParserAndMatcher(){let i=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),e=i!==this.parser||t!==this.matcher;this.parser=i,this.matcher=t,e&&(this.setQuickFilterParts(),this.dispatchEvent({type:xr.EVENT_QUICK_FILTER_CHANGED}))}onQuickFilterColumnConfigChanged(){this.columnModel.refreshQuickFilterColumns(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchEvent({type:xr.EVENT_QUICK_FILTER_CHANGED})}doesRowPassQuickFilterNoCache(i,t){return this.columnModel.getAllColumnsForQuickFilter().some(r=>{let o=this.getQuickFilterTextForColumn(r,i);return W(o)&&o.indexOf(t)>=0})}doesRowPassQuickFilterCache(i,t){return this.checkGenerateQuickFilterAggregateText(i),i.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(i,t){let e;i?(this.checkGenerateQuickFilterAggregateText(t),e=t.quickFilterAggregateText):e=this.getQuickFilterAggregateText(t);let{quickFilterParts:r,matcher:o}=this;return o(r,e)}checkGenerateQuickFilterAggregateText(i){i.quickFilterAggregateText||(i.quickFilterAggregateText=this.getQuickFilterAggregateText(i))}getQuickFilterTextForColumn(i,t){let e=this.valueService.getValue(i,t,!0),r=i.getColDef();if(r.getQuickFilterText){let o=this.gos.addGridCommonParams({value:e,node:t,data:t.data,column:i,colDef:r});e=r.getQuickFilterText(o)}return W(e)?e.toString().toUpperCase():null}getQuickFilterAggregateText(i){let t=[];return this.columnModel.getAllColumnsForQuickFilter().forEach(r=>{let o=this.getQuickFilterTextForColumn(r,i);W(o)&&t.push(o)}),t.join(xr.QUICK_FILTER_SEPARATOR)}};xr.EVENT_QUICK_FILTER_CHANGED="quickFilterChanged";xr.QUICK_FILTER_SEPARATOR=`
`;g([w("valueService")],xr.prototype,"valueService",2);g([w("columnModel")],xr.prototype,"columnModel",2);g([w("rowModel")],xr.prototype,"rowModel",2);g([U],xr.prototype,"postConstruct",1);xr=g([te("quickFilterService")],xr);var to=class extends j{constructor(){super(...arguments),this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue=[]}init(){var i,t,e;this.addManagedListener(this.eventService,m.EVENT_GRID_COLUMNS_CHANGED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,m.EVENT_COLUMN_VALUE_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,m.EVENT_COLUMN_PIVOT_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,m.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,m.EVENT_NEW_COLUMNS_LOADED,()=>this.updateAdvancedFilterColumns()),this.addManagedListener(this.eventService,m.EVENT_COLUMN_VISIBLE,()=>this.updateAdvancedFilterColumns()),this.addManagedListener(this.eventService,m.EVENT_ROW_DATA_UPDATED,()=>this.onNewRowsLoaded("rowDataUpdated")),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",r=>this.setAdvancedFilterModel(r.currentValue)),this.addManagedListener(this.eventService,m.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,({enabled:r})=>this.onAdvancedFilterEnabledChanged(r)),this.addManagedListener(this.eventService,m.EVENT_DATA_TYPES_INFERRED,()=>this.processFilterModelUpdateQueue()),this.addManagedListener(this.quickFilterService,xr.EVENT_QUICK_FILTER_CHANGED,()=>this.onFilterChanged({source:"quickFilter"})),this.initialFilterModel=he({},(e=(t=(i=this.gos.get("initialState"))==null?void 0:i.filter)==null?void 0:t.filterModel)!=null?e:{})}isExternalFilterPresentCallback(){let i=this.gos.getCallback("isExternalFilterPresent");return typeof i=="function"?i({}):!1}doesExternalFilterPass(i){let t=this.gos.get("doesExternalFilterPass");return typeof t=="function"?t(i):!1}setFilterModel(i,t="api"){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}if(this.dataTypeService.isPendingInference()){this.filterModelUpdateQueue.push({model:i,source:t});return}let e=[],r=this.getFilterModel();if(i){let o=Zf(Object.keys(i));this.allColumnFilters.forEach((n,s)=>{let a=i[s];e.push(this.setModelOnFilterWrapper(n.filterPromise,a)),o.delete(s)}),o.forEach(n=>{let s=this.columnModel.getPrimaryColumn(n)||this.columnModel.getGridColumn(n);if(!s){console.warn("AG Grid: setFilterModel() - no column found for colId: "+n);return}if(!s.isFilterAllowed()){console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+n);return}let a=this.getOrCreateFilterWrapper(s,"NO_UI");if(!a){console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+n);return}e.push(this.setModelOnFilterWrapper(a.filterPromise,i[n]))})}else this.allColumnFilters.forEach(o=>{e.push(this.setModelOnFilterWrapper(o.filterPromise,null))});Er.all(e).then(()=>{let o=this.getFilterModel(),n=[];this.allColumnFilters.forEach((s,a)=>{let l=r?r[a]:null,d=o?o[a]:null;He.jsonEquals(l,d)||n.push(s.column)}),n.length>0&&this.onFilterChanged({columns:n,source:t})})}setModelOnFilterWrapper(i,t){return new Er(e=>{i.then(r=>{typeof r.setModel!="function"&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),e()),(r.setModel(t)||Er.resolve()).then(()=>e())})})}getFilterModel(){let i={};return this.allColumnFilters.forEach((t,e)=>{let r=this.getModelFromFilterWrapper(t);W(r)&&(i[e]=r)}),i}getModelFromFilterWrapper(i){var t;let r=i.filterPromise.resolveNow(null,o=>o);return r==null?(t=this.initialFilterModel[i.column.getColId()])!=null?t:null:typeof r.getModel!="function"?(console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel"),null):r.getModel()}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(i){var t;i?this.allColumnFilters.size&&(this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"advancedFilterEnabled")),this.onFilterChanged({source:"advancedFilter"})):(t=this.advancedFilterService)!=null&&t.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){var i;return!!((i=this.advancedFilterService)!=null&&i.isEnabled())}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}doAggregateFiltersPass(i,t){return this.doColumnFiltersPass(i,t,!0)}updateActiveFilters(){this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;let i=r=>r?r.isFilterActive?r.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1):!1,t=!!this.gos.getGroupAggFiltering(),e=r=>{if(!r.isPrimary())return!0;let n=!this.columnModel.isPivotActive();return!r.isValueActive()||!n?!1:this.columnModel.isPivotMode()?!0:t};this.allColumnFilters.forEach(r=>{if(r.filterPromise.resolveNow(!1,i)){let o=r.filterPromise.resolveNow(null,n=>n);e(r.column)?this.activeAggregateFilters.push(o):this.activeColumnFilters.push(o)}})}updateFilterFlagInColumns(i,t){this.allColumnFilters.forEach(e=>{let r=e.filterPromise.resolveNow(!1,o=>o.isFilterActive());e.column.setFilterActive(r,i,t)})}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}doColumnFiltersPass(i,t,e){let{data:r,aggData:o}=i,n=e?this.activeAggregateFilters:this.activeColumnFilters,s=e?o:r;for(let a=0;a<n.length;a++){let l=n[a];if(!(l==null||l===t)){if(typeof l.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!l.doesFilterPass({node:i,data:s}))return!1}}return!0}resetQuickFilterCache(){this.quickFilterService.resetQuickFilterCache()}refreshFiltersForAggregations(){this.gos.getGroupAggFiltering()&&this.onFilterChanged()}callOnFilterChangedOutsideRenderCycle(i){let t=()=>this.onFilterChanged(i);this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}onFilterChanged(i={}){let{source:t,filterInstance:e,additionalEventAttributes:r,columns:o}=i;this.updateDependantFilters(),this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",r),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.allColumnFilters.forEach(s=>{s.filterPromise&&s.filterPromise.then(a=>{a&&a!==e&&a.onAnyFilterChanged&&a.onAnyFilterChanged()})});let n={source:t,type:m.EVENT_FILTER_CHANGED,columns:o||[]};r&&wr(n,r),this.processingFilterChange=!0,this.eventService.dispatchEvent(n),this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){var i;return!((i=this.gos.get("allowShowChangeAfterFilter"))!=null?i:!1)&&this.processingFilterChange}isQuickFilterPresent(){return this.quickFilterService.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!this.gos.getGroupAggFiltering()}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(i,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:i})}doesRowPassAggregateFilters(i){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(i.rowNode)||this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(i.rowNode,i.filterInstanceToSkip))}doesRowPassFilter(i){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(i.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(i.rowNode)||this.isColumnFilterPresent()&&!this.doColumnFiltersPass(i.rowNode,i.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(i.rowNode))}onNewRowsLoaded(i){this.allColumnFilters.forEach(t=>{t.filterPromise.then(e=>{e.onNewRowsLoaded&&e.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(i,{afterDataChange:!0}),this.updateActiveFilters()}createValueGetter(i){return({node:t})=>this.valueService.getValue(i,t,!0)}createGetValue(i){return(t,e)=>{let r=e?this.columnModel.getGridColumn(e):i;return r?this.valueService.getValue(r,t,!0):void 0}}getFilterComponent(i,t,e=!0){var r;if(e)return((r=this.getOrCreateFilterWrapper(i,t))==null?void 0:r.filterPromise)||null;let o=this.cachedFilter(i);return o?o.filterPromise:null}isFilterActive(i){let t=this.cachedFilter(i);return!!t&&t.filterPromise.resolveNow(!1,e=>e.isFilterActive())}getOrCreateFilterWrapper(i,t){if(!i.isFilterAllowed())return null;let e=this.cachedFilter(i);return e||(e=this.createFilterWrapper(i,t),this.setColumnFilterWrapper(i,e)),e}cachedFilter(i){return this.allColumnFilters.get(i.getColId())}getDefaultFilter(i){let t;if(pt.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()))t="agSetColumnFilter";else{let e=this.dataTypeService.getBaseDataType(i);e==="number"?t="agNumberColumnFilter":e==="date"||e==="dateString"?t="agDateColumnFilter":t="agTextColumnFilter"}return t}getDefaultFloatingFilter(i){let t;if(pt.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()))t="agSetColumnFloatingFilter";else{let e=this.dataTypeService.getBaseDataType(i);e==="number"?t="agNumberColumnFloatingFilter":e==="date"||e==="dateString"?t="agDateColumnFloatingFilter":t="agTextColumnFloatingFilter"}return t}createFilterInstance(i){let t=this.getDefaultFilter(i),e=i.getColDef(),r,o=Pt(he({},this.createFilterParams(i,e)),{filterModifiedCallback:()=>this.filterModifiedCallbackFactory(r,i)(),filterChangedCallback:s=>this.filterChangedCallbackFactory(r,i)(s),doesRowPassOtherFilter:s=>this.doesRowPassOtherFilters(r,s)}),n=this.userComponentFactory.getFilterDetails(e,o,t);return n?{filterPromise:()=>{let s=n.newAgStackInstance();return s&&s.then(a=>r=a),s},compDetails:n}:{filterPromise:null,compDetails:null}}createFilterParams(i,t){return this.gos.addGridCommonParams({column:i,colDef:_f(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(i),getValue:this.createGetValue(i),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(i,t){var e;let r={column:i,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:o,compDetails:n}=this.createFilterInstance(i);return r.filterPromise=(e=o?.())!=null?e:null,r.compDetails=n,r}onColumnsChanged(){let i=[];this.allColumnFilters.forEach((t,e)=>{let r;t.column.isPrimary()?r=this.columnModel.getPrimaryColumn(e):r=this.columnModel.getGridColumn(e),!(r&&r===t.column)&&(i.push(t.column),this.disposeFilterWrapper(t,"columnChanged"),this.disposeColumnListener(e))}),i.length>0?this.onFilterChanged({columns:i,source:"api"}):this.updateDependantFilters()}updateDependantFilters(){let i=this.columnModel.getGroupAutoColumns();i?.forEach(t=>{t.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(t,"NO_UI")})}isFilterAllowed(i){var t,e;if(this.isAdvancedFilterEnabled()||!i.isFilterAllowed())return!1;let o=this.allColumnFilters.get(i.getColId());return(e=(t=o?.filterPromise)==null?void 0:t.resolveNow(!0,n=>typeof n?.isFilterAllowed=="function"?n?.isFilterAllowed():!0))!=null?e:!0}getFloatingFilterCompDetails(i,t){let e=l=>{let d=this.getFilterComponent(i,"NO_UI");d?.then(u=>{l(zs(u))})},r=i.getColDef(),o=Pt(he({},this.createFilterParams(i,r)),{filterChangedCallback:()=>e(l=>this.filterChangedCallbackFactory(l,i)())}),n=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(r,df,o),s=this.userComponentFactory.getDefaultFloatingFilterType(r,()=>this.getDefaultFloatingFilter(i));s==null&&(s="agReadOnlyFloatingFilter");let a={column:i,filterParams:n,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(i),parentFilterInstance:e,showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(r,a,s)}getCurrentFloatingFilterParentModel(i){let t=this.getFilterComponent(i,"NO_UI",!1);return t?t.resolveNow(null,e=>e&&e.getModel()):null}destroyFilter(i,t="api"){let e=i.getColId(),r=this.allColumnFilters.get(e);this.disposeColumnListener(e),delete this.initialFilterModel[e],r&&(this.disposeFilterWrapper(r,t),this.onFilterChanged({columns:[i],source:"api"}))}disposeColumnListener(i){let t=this.allColumnListeners.get(i);t&&(this.allColumnListeners.delete(i),t())}disposeFilterWrapper(i,t){i.filterPromise.then(e=>{this.getContext().destroyBean(e),i.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(i.column.getColId());let r={type:m.EVENT_FILTER_DESTROYED,source:t,column:i.column};this.eventService.dispatchEvent(r)})}filterModifiedCallbackFactory(i,t){return()=>{let e={type:m.EVENT_FILTER_MODIFIED,column:t,filterInstance:i};this.eventService.dispatchEvent(e)}}filterChangedCallbackFactory(i,t){return e=>{var r;let o=(r=e?.source)!=null?r:"api",n={filter:i,additionalEventAttributes:e,columns:[t],source:o};this.callOnFilterChangedOutsideRenderCycle(n)}}checkDestroyFilter(i){let t=this.allColumnFilters.get(i);if(!t)return;let e=t.column,{compDetails:r}=e.isFilterAllowed()?this.createFilterInstance(e):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,r)){this.destroyFilter(e,"paramsUpdated");return}let o=e.getColDef().filterParams;if(!t.filterPromise){this.destroyFilter(e,"paramsUpdated");return}t.filterPromise.then(n=>{(n?.refresh?n.refresh(he(Pt(he({},this.createFilterParams(e,e.getColDef())),{filterModifiedCallback:this.filterModifiedCallbackFactory(n,e),filterChangedCallback:this.filterChangedCallbackFactory(n,e),doesRowPassOtherFilter:a=>this.doesRowPassOtherFilters(n,a)}),o)):!0)===!1&&this.destroyFilter(e,"paramsUpdated")})}setColumnFilterWrapper(i,t){let e=i.getColId();this.allColumnFilters.set(e,t),this.allColumnListeners.set(e,this.addManagedListener(i,yt.EVENT_COL_DEF_CHANGED,()=>this.checkDestroyFilter(e)))}areFilterCompsDifferent(i,t){if(!t||!i)return!0;let{componentClass:e}=i,{componentClass:r}=t;return!(e===r||e?.render&&r?.render&&e.render===r.render)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(i){if(this.isAdvancedFilterEnabled()){if(this.dataTypeService.isPendingInference()){this.advancedFilterModelUpdateQueue.push(i);return}this.advancedFilterService.setModel(i??null),this.onFilterChanged({source:"advancedFilter"})}}showAdvancedFilterBuilder(i){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder(i,!0)}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvancedFilterEnabled()?!1:this.columnModel.getAllGridColumns().some(t=>t.getColDef().floatingFilter)}getFilterInstance(i,t){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}let e=this.getFilterInstanceImpl(i,o=>{if(!t)return;let n=zs(o);t(n)});return zs(e)}getColumnFilterInstance(i){return new Promise(t=>{this.getFilterInstance(i,e=>{t(e)})})}getFilterInstanceImpl(i,t){let e=this.columnModel.getPrimaryColumn(i);if(!e)return;let r=this.getFilterComponent(e,"NO_UI"),o=r&&r.resolveNow(null,n=>n);return o?setTimeout(t,0,o):r&&r.then(n=>{t(n)}),o}warnAdvancedFilters(){Ce("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(i){var t;(t=this.advancedFilterService)==null||t.getCtrl().setupHeaderComp(i)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:i,source:t})=>this.setFilterModel(i,t)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:i,model:t,resolve:e})=>{this.setColumnFilterModel(i,t).then(()=>e())}),this.columnFilterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue.forEach(i=>this.setAdvancedFilterModel(i)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(i){let t=this.getFilterWrapper(i);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(i,t){if(this.isAdvancedFilterEnabled())return this.warnAdvancedFilters(),Promise.resolve();if(this.dataTypeService.isPendingInference()){let n=()=>{},s=new Promise(a=>{n=a});return this.columnFilterModelUpdateQueue.push({key:i,model:t,resolve:n}),s}let e=this.columnModel.getPrimaryColumn(i),r=e?this.getOrCreateFilterWrapper(e,"NO_UI"):null;return r?(n=>new Promise(s=>{n.then(a=>s(a))}))(this.setModelOnFilterWrapper(r.filterPromise,t)):Promise.resolve()}getFilterWrapper(i){var t;let e=this.columnModel.getPrimaryColumn(i);return e&&(t=this.cachedFilter(e))!=null?t:null}destroy(){super.destroy(),this.allColumnFilters.forEach(i=>this.disposeFilterWrapper(i,"gridDestroyed")),this.allColumnListeners.clear()}};g([w("valueService")],to.prototype,"valueService",2);g([w("columnModel")],to.prototype,"columnModel",2);g([w("rowModel")],to.prototype,"rowModel",2);g([w("userComponentFactory")],to.prototype,"userComponentFactory",2);g([w("rowRenderer")],to.prototype,"rowRenderer",2);g([w("dataTypeService")],to.prototype,"dataTypeService",2);g([w("quickFilterService")],to.prototype,"quickFilterService",2);g([gt("advancedFilterService")],to.prototype,"advancedFilterService",2);g([U],to.prototype,"init",1);to=g([te("filterManager")],to);var Jh=class extends Pe{constructor(i,t){super('<div class="ag-filter"></div>'),this.column=i,this.source=t,this.filterWrapper=null}postConstruct(){this.createFilter(!0),this.addManagedListener(this.eventService,m.EVENT_FILTER_DESTROYED,this.onFilterDestroyed.bind(this))}hasFilter(){return!!this.filterWrapper}getFilter(){var i,t;return(t=(i=this.filterWrapper)==null?void 0:i.filterPromise)!=null?t:null}afterInit(){var i,t,e;return(e=(t=(i=this.filterWrapper)==null?void 0:i.filterPromise)==null?void 0:t.then(()=>{}))!=null?e:Er.resolve()}afterGuiAttached(i){var t,e;(e=(t=this.filterWrapper)==null?void 0:t.filterPromise)==null||e.then(r=>{var o;(o=r?.afterGuiAttached)==null||o.call(r,i)})}afterGuiDetached(){var i,t;(t=(i=this.filterWrapper)==null?void 0:i.filterPromise)==null||t.then(e=>{var r;(r=e?.afterGuiDetached)==null||r.call(e)})}createFilter(i){var t;let{column:e,source:r}=this;this.filterWrapper=this.filterManager.getOrCreateFilterWrapper(e,r),(t=this.filterWrapper)!=null&&t.filterPromise&&this.filterWrapper.filterPromise.then(o=>{let n=o.getGui();if(W(n)||console.warn(`AG Grid: getGui method from filter returned ${n}, it should be a DOM element or an HTML template string.`),typeof n=="string"&&(n=_r(n)),this.appendChild(n),i){let s={type:m.EVENT_FILTER_OPENED,column:e,source:r,eGui:this.getGui()};this.eventService.dispatchEvent(s)}})}onFilterDestroyed(i){(i.source==="api"||i.source==="paramsUpdated")&&i.column.getId()===this.column.getId()&&this.columnModel.getPrimaryColumn(this.column)&&(Zt(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}};g([w("filterManager")],Jh.prototype,"filterManager",2);g([w("columnModel")],Jh.prototype,"columnModel",2);g([U],Jh.prototype,"postConstruct",1);var um=class extends Pe{constructor(i,t){super(i),this.ctrl=t}getCtrl(){return this.ctrl}},ra=class jw extends um{constructor(t){super(jw.TEMPLATE,t)}postConstruct(){let t=this.getGui(),e={addOrRemoveCssClass:(r,o)=>this.addOrRemoveCssClass(r,o),addOrRemoveBodyCssClass:(r,o)=>this.eFloatingFilterBody.classList.toggle(r,o),setButtonWrapperDisplayed:r=>qe(this.eButtonWrapper,r),setCompDetails:r=>this.setCompDetails(r),getFloatingFilterComp:()=>this.compPromise,setWidth:r=>t.style.width=r,setMenuIcon:r=>this.eButtonShowMainFilter.appendChild(r)};this.ctrl.setComp(e,t,this.eButtonShowMainFilter,this.eFloatingFilterBody)}setCompDetails(t){if(!t){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=t.newAgStackInstance(),this.compPromise.then(e=>this.afterCompCreated(e))}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(t){if(t){if(!this.isAlive()){this.destroyBean(t);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=t,this.eFloatingFilterBody.appendChild(t.getGui()),t.afterGuiAttached&&t.afterGuiAttached()}}};ra.TEMPLATE=`<div class="ag-header-cell ag-floating-filter" role="gridcell">
            <div ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`;g([Q("eFloatingFilterBody")],ra.prototype,"eFloatingFilterBody",2);g([Q("eButtonWrapper")],ra.prototype,"eButtonWrapper",2);g([Q("eButtonShowMainFilter")],ra.prototype,"eButtonShowMainFilter",2);g([U],ra.prototype,"postConstruct",1);g([ir],ra.prototype,"destroyFloatingFilterComp",1);var ED=ra;var ep=class extends j{constructor(i){super(),this.view=i}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){let i=this.getDomLayout(),t={autoHeight:i==="autoHeight",normal:i==="normal",print:i==="print"},e=t.autoHeight?"ag-layout-auto-height":t.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(e,t)}getDomLayout(){var i;let t=(i=this.gos.get("domLayout"))!=null?i:"normal";return["normal","print","autoHeight"].indexOf(t)===-1?(Ce(`${t} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):t}};g([U],ep.prototype,"postConstruct",1);var Vn=class extends j{constructor(i){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=i,this.resetLastHScrollDebounced=Ji(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=Ji(()=>this.lastScrollSource[0]=null,500)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedListener(this.eventService,m.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady(i=>{this.centerRowsCtrl=i.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){let{fakeHScrollComp:i,fakeVScrollComp:t}=this.ctrlsService.getParams();this.addManagedListener(this.centerRowsCtrl.getViewportElement(),"scroll",this.onHScroll.bind(this)),i.onScrollCallback(this.onFakeHScroll.bind(this));let e=this.gos.get("debounceVerticalScrollbar"),r=e?Ji(this.onVScroll.bind(this),100):this.onVScroll.bind(this),o=e?Ji(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",r),t.onScrollCallback(o)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(i){if(this.centerRowsCtrl==null)return;i===void 0&&(i=this.centerRowsCtrl.getCenterViewportScrollLeft());let e=this.enableRtl?i:-i,{topCenter:r,stickyTopCenter:o,stickyBottomCenter:n,centerHeader:s,bottomCenter:a,fakeHScrollComp:l}=this.ctrlsService.getParams();s.setHorizontalScroll(-e),a.setContainerTranslateX(e),r.setContainerTranslateX(e),o.setContainerTranslateX(e),n.setContainerTranslateX(e);let d=this.centerRowsCtrl.getViewportElement(),u=this.lastScrollSource[1]===0;i=Math.abs(i),u?l.setScrollPosition(i):Od(d,i,this.enableRtl)}isControllingScroll(i,t){return this.lastScrollSource[t]==null?(this.lastScrollSource[t]=i,!0):this.lastScrollSource[t]===i}onFakeHScroll(){this.isControllingScroll(1,1)&&this.onHScrollCommon(1)}onHScroll(){this.isControllingScroll(0,1)&&this.onHScrollCommon(0)}onHScrollCommon(i){let t=this.centerRowsCtrl.getViewportElement(),{scrollLeft:e}=t;if(this.shouldBlockScrollUpdate(1,e,!0))return;let r;i===0?r=Ad(t,this.enableRtl):r=this.ctrlsService.get("fakeHScrollComp").getScrollPosition(),this.doHorizontalScroll(Math.round(r)),this.resetLastHScrollDebounced()}onFakeVScroll(){this.isControllingScroll(1,0)&&this.onVScrollCommon(1)}onVScroll(){this.isControllingScroll(0,0)&&this.onVScrollCommon(0)}onVScrollCommon(i){let t;i===0?t=this.eBodyViewport.scrollTop:t=this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),!this.shouldBlockScrollUpdate(0,t,!0)&&(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,i===0?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(i){let t=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===i&&i===t||(this.scrollLeft=i,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(i),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(i){let t={type:m.EVENT_BODY_SCROLL,direction:i===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{let e=Pt(he({},t),{type:m.EVENT_BODY_SCROLL_END});this.eventService.dispatchEvent(e)},100)}shouldBlockScrollUpdate(i,t,e=!1){return e&&!Ln()?!1:i===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(i){let t=iu(this.eBodyViewport),{scrollHeight:e}=this.eBodyViewport;return i<0||i+t>e}shouldBlockHorizontalScroll(i){let t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:e}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&zd()){if(i>0)return!0}else if(i<0)return!0;return Math.abs(i)+t>e}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(0)}scrollGridIfNeeded(){let i=this.scrollTop!=this.nextScrollTop;return i&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),i}setHorizontalScrollPosition(i,t=!1){let r=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,i)&&(this.enableRtl&&zd()?i=i>0?0:r:i=Math.min(Math.max(i,0),r)),Od(this.centerRowsCtrl.getViewportElement(),Math.abs(i),this.enableRtl),this.doHorizontalScroll(i)}setVerticalScrollPosition(i){this.eBodyViewport.scrollTop=i}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(i){let t=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+i),this.centerRowsCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(i,t=null){let e=this.rowModel.getRowCount(),r=-1;for(let o=0;o<e;o++){let n=this.rowModel.getRow(o);if(typeof i=="function"){if(n&&i(n)){r=o;break}}else if(i===n||i===n.data){r=o;break}}r>=0&&this.ensureIndexVisible(r,t)}ensureIndexVisible(i,t){if(this.gos.isDomLayout("print"))return;let e=this.paginationProxy.getRowCount();if(typeof i!="number"||i<0||i>=e){console.warn("AG Grid: Invalid row index for ensureIndexVisible: "+i);return}let o=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{o||this.paginationProxy.goToPageWithIndex(i);let n=this.ctrlsService.getGridBodyCtrl(),s=n.getStickyTopHeight(),a=n.getStickyBottomHeight(),l=this.paginationProxy.getRow(i),d;do{let u=l.rowTop,c=l.rowHeight,h=this.paginationProxy.getPixelOffset(),p=l.rowTop-h,f=p+l.rowHeight,C=this.getVScrollPosition(),b=this.heightScaler.getDivStretchOffset(),x=C.top+b,S=C.bottom+b,R=S-x,I=this.heightScaler.getScrollPositionForPixel(p),F=this.heightScaler.getScrollPositionForPixel(f-R),L=Math.min((I+F)/2,p),V=x+s>p,k=S-a<f,G=null;t==="top"?G=I:t==="bottom"?G=F:t==="middle"?G=L:V?G=I-s:k&&(G=F+a),G!==null&&(this.setVerticalScrollPosition(G),this.rowRenderer.redraw({afterScroll:!0})),d=u!==l.rowTop||c!==l.rowHeight}while(d);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(i,t="auto"){let e=this.columnModel.getGridColumn(i);if(!e||e.isPinned()||!this.columnModel.isColumnDisplayed(e))return;let r=this.getPositionedHorizontalScroll(e,t);this.getFrameworkOverrides().wrapIncoming(()=>{r!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(r),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(i,t){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(t),this.setVerticalScrollPosition(i),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(i,t){let{columnBeforeStart:e,columnAfterEnd:r}=this.isColumnOutsideViewport(i),o=this.centerRowsCtrl.getCenterWidth()<i.getActualWidth(),n=this.centerRowsCtrl.getCenterWidth(),s=this.enableRtl,a=(s?e:r)||o,l=s?r:e;t!=="auto"&&(a=t==="start",l=t==="end");let d=t==="middle";if(a||l||d){let{colLeft:u,colMiddle:c,colRight:h}=this.getColumnBounds(i);return d?c-n/2:a?s?h:u:s?u-n:h-n}return null}isColumnOutsideViewport(i){let{start:t,end:e}=this.getViewportBounds(),{colLeft:r,colRight:o}=this.getColumnBounds(i),n=this.enableRtl,s=n?t>o:e<o,a=n?e<r:t>r;return{columnBeforeStart:s,columnAfterEnd:a}}getColumnBounds(i){let t=this.enableRtl,e=this.columnModel.getBodyContainerWidth(),r=i.getActualWidth(),o=i.getLeft(),n=t?-1:1,s=t?e-o:o,a=s+r*n,l=s+r/2*n;return{colLeft:s,colMiddle:l,colRight:a}}getViewportBounds(){let i=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),e=t,r=i+t;return{start:e,end:r,width:i}}};g([w("ctrlsService")],Vn.prototype,"ctrlsService",2);g([w("animationFrameService")],Vn.prototype,"animationFrameService",2);g([w("paginationProxy")],Vn.prototype,"paginationProxy",2);g([w("rowModel")],Vn.prototype,"rowModel",2);g([w("rowContainerHeightService")],Vn.prototype,"heightScaler",2);g([w("rowRenderer")],Vn.prototype,"rowRenderer",2);g([w("columnModel")],Vn.prototype,"columnModel",2);g([U],Vn.prototype,"postConstruct",1);var Uw="ag-force-vertical-scroll",DD="ag-selectable",TD="ag-column-moving",or=class extends j{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(i,t,e,r,o,n,s){this.comp=i,this.eGridBody=t,this.eBodyViewport=e,this.eTop=r,this.eBottom=o,this.eStickyTop=n,this.eStickyBottom=s,this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",a=>this.setCellTextSelection(a.currentValue)),this.createManagedBean(new ep(this.comp)),this.bodyScrollFeature=this.createManagedBean(new Vn(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([r,e,o,n,s]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.filterManager.setupAdvancedFilterHeaderComp(r),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){this.addManagedListener(this.eventService,m.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,m.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,m.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,m.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}addFocusListeners(i){i.forEach(t=>{this.addManagedListener(t,"focusin",e=>{let{target:r}=e,o=Os(r,"ag-root",t);t.classList.toggle("ag-has-focus",!o)}),this.addManagedListener(t,"focusout",e=>{let{target:r,relatedTarget:o}=e,n=t.contains(o),s=Os(o,"ag-root",t);Os(r,"ag-root",t)||(!n||s)&&t.classList.remove("ag-has-focus")})})}setColumnMovingCss(i){this.comp.setColumnMovingCss(TD,i)}setCellTextSelection(i=!1){this.comp.setCellSelectableCss(DD,i)}onScrollVisibilityChanged(){let i=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(i),this.setStickyWidth(i),this.setStickyBottomOffsetBottom();let t=i&&this.gos.getScrollbarWidth()||0,e=Vf()?16:0,r=`calc(100% + ${t+e}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(r))}onGridColumnsChanged(){let i=this.columnModel.getAllGridColumns();this.comp.setColumnCount(i.length)}disableBrowserDragging(){this.addManagedListener(this.eGridBody,"dragstart",i=>{if(i.target instanceof HTMLImageElement)return i.preventDefault(),!1})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;let i=e=>{let r=e.relatedTarget;if(Ch(r)===null){this.rowRenderer.stopEditing();return}let o=t.some(n=>n.contains(r))&&this.mouseEventService.isElementInThisGrid(r);if(!o){let n=this.popupService;o=n.getActivePopups().some(s=>s.contains(r))||n.isElementWithinCustomPopup(r)}o||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];t.forEach(e=>this.addManagedListener(e,"focusout",i))}updateRowCount(){let i=this.headerNavigationService.getHeaderRowCount()+this.filterManager.getHeaderRowCount(),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,e=t===-1?-1:i+t;this.comp.setRowCount(e)}registerBodyViewportResizeListener(i){this.comp.registerBodyViewportResizeListener(i)}setVerticalScrollPaddingVisible(i){let t=i?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){let i=this.gos.get("alwaysShowVerticalScroll"),t=i?Uw:null,e=this.gos.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(t,i),i||e&&Bb(this.eBodyViewport)}setupRowAnimationCssClass(){let i=()=>{let t=this.gos.isAnimateRows()&&!this.rowContainerHeightService.isStretching(),e=t?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(e,t)};i(),this.addManagedListener(this.eventService,m.EVENT_HEIGHT_SCALE_CHANGED,i),this.addManagedPropertyListener("animateRows",i)}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){let i=this.onBodyViewportContextMenu.bind(this);this.addManagedListener(this.eBodyViewport,"contextmenu",i),this.mockContextMenuForIPad(i),this.addManagedListener(this.eBodyViewport,"wheel",this.onBodyViewportWheel.bind(this)),this.addManagedListener(this.eStickyTop,"wheel",this.onStickyWheel.bind(this)),this.addManagedListener(this.eStickyBottom,"wheel",this.onStickyWheel.bind(this)),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){let i=this.eBodyViewport.querySelector(".ag-full-width-container"),t=this.eBodyViewport.querySelector(".ag-center-cols-viewport");i&&t&&this.addManagedListener(i,"wheel",e=>this.onFullWidthContainerWheel(e,t))}onFullWidthContainerWheel(i,t){!i.deltaX||Math.abs(i.deltaY)>Math.abs(i.deltaX)||!this.mouseEventService.isEventFromThisGrid(i)||(i.preventDefault(),t.scrollBy({left:i.deltaX}))}onBodyViewportContextMenu(i,t,e){if(!i&&!e)return;this.gos.get("preventDefaultOnContextMenu")&&(i||e).preventDefault();let{target:r}=i||t;(r===this.eBodyViewport||r===this.ctrlsService.get("center").getViewportElement())&&this.menuService.showContextMenu({mouseEvent:i,touchEvent:e,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(i){if(!Ln())return;let t=new Di(this.eBodyViewport),e=r=>{i(void 0,r.touchStart,r.touchEvent)};this.addManagedListener(t,Di.EVENT_LONG_TAP,e),this.addDestroyFunc(()=>t.destroy())}onBodyViewportWheel(i){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&i.preventDefault()}onStickyWheel(i){i.preventDefault(),i.offsetY&&this.scrollVertically(i.deltaY)}getGui(){return this.eGridBody}scrollVertically(i){let t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+i),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new Hr(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)}getRowDragFeature(){return this.rowDragFeature}onPinnedRowDataChanged(){this.setFloatingHeights()}setFloatingHeights(){let{pinnedRowModel:i}=this,t=i.getPinnedTopTotalHeight(),e=i.getPinnedBottomTotalHeight();this.comp.setTopHeight(t),this.comp.setBottomHeight(e),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(e?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(i=0){this.comp.setStickyTopHeight(`${i}px`),this.stickyTopHeight=i}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(i=0){this.comp.setStickyBottomHeight(`${i}px`),this.stickyBottomHeight=i}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(i){if(!i)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{let t=this.gos.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){let t=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+this.filterManager.getHeaderHeight(),e=this.pinnedRowModel.getPinnedTopTotalHeight(),r=0;t>0&&(r+=t),e>0&&(r+=e),r>0&&(r+=1),this.comp.setStickyTopTop(`${r}px`)}setStickyBottomOffsetBottom(){let i=this.pinnedRowModel.getPinnedBottomTotalHeight(),e=this.scrollVisibleService.isHorizontalScrollShowing()&&this.gos.getScrollbarWidth()||0,r=i+e;this.comp.setStickyBottomBottom(`${r}px`)}sizeColumnsToFit(i,t){let r=this.isVerticalScrollShowing()?this.gos.getScrollbarWidth():0,n=Zs(this.eGridBody)-r;if(n>0){this.columnModel.sizeColumnsToFit(n,"sizeColumnsToFit",!1,i);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(i,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFit(i,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFit(i,-1)},500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(i){this.eBodyViewport.addEventListener("scroll",i,{passive:!0})}removeScrollEventListener(i){this.eBodyViewport.removeEventListener("scroll",i)}};g([w("animationFrameService")],or.prototype,"animationFrameService",2);g([w("rowContainerHeightService")],or.prototype,"rowContainerHeightService",2);g([w("ctrlsService")],or.prototype,"ctrlsService",2);g([w("columnModel")],or.prototype,"columnModel",2);g([w("scrollVisibleService")],or.prototype,"scrollVisibleService",2);g([w("menuService")],or.prototype,"menuService",2);g([w("headerNavigationService")],or.prototype,"headerNavigationService",2);g([w("dragAndDropService")],or.prototype,"dragAndDropService",2);g([w("pinnedRowModel")],or.prototype,"pinnedRowModel",2);g([w("rowRenderer")],or.prototype,"rowRenderer",2);g([w("popupService")],or.prototype,"popupService",2);g([w("mouseEventService")],or.prototype,"mouseEventService",2);g([w("rowModel")],or.prototype,"rowModel",2);g([w("filterManager")],or.prototype,"filterManager",2);var yd="ag-cell-range-selected",PD="ag-cell-range-chart",RD="ag-cell-range-single-cell",MD="ag-cell-range-chart-category",ID="ag-cell-range-handle",FD="ag-cell-range-top",zD="ag-cell-range-right",AD="ag-cell-range-bottom",OD="ag-cell-range-left",LD=class{constructor(i,t){this.beans=i,this.rangeService=i.rangeService,this.selectionHandleFactory=i.selectionHandleFactory,this.cellCtrl=t}setComp(i,t){this.cellComp=i,this.eGui=t,this.onRangeSelectionChanged()}onRangeSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(yd,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${yd}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${yd}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${yd}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${yd}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(PD,this.hasChartRange),nl(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(RD,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){let i=this.getRangeBorders(),t=this.isSingleCell(),e=!t&&i.top,r=!t&&i.right,o=!t&&i.bottom,n=!t&&i.left;this.cellComp.addOrRemoveCssClass(FD,e),this.cellComp.addOrRemoveCssClass(zD,r),this.cellComp.addOrRemoveCssClass(AD,o),this.cellComp.addOrRemoveCssClass(OD,n)}isSingleCell(){let{rangeService:i}=this.beans;return this.rangeCount===1&&!!i&&!i.isMoreThanOneCell()}getHasChartRange(){let{rangeService:i}=this.beans;if(!this.rangeCount||!i)return!1;let t=i.getCellRanges();return t.length>0&&t.every(e=>kr([1,0],e.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){let i=this.beans.gos.get("enableRtl"),t=!1,e=!1,r=!1,o=!1,n=this.cellCtrl.getCellPosition().column,s=this.beans.columnModel,a,l;i?(a=s.getDisplayedColAfter(n),l=s.getDisplayedColBefore(n)):(a=s.getDisplayedColBefore(n),l=s.getDisplayedColAfter(n));let d=this.rangeService.getCellRanges().filter(u=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),u));a||(o=!0),l||(e=!0);for(let u=0;u<d.length&&!(t&&e&&r&&o);u++){let c=d[u],h=this.rangeService.getRangeStartRow(c),p=this.rangeService.getRangeEndRow(c);!t&&this.beans.rowPositionUtils.sameRow(h,this.cellCtrl.getCellPosition())&&(t=!0),!r&&this.beans.rowPositionUtils.sameRow(p,this.cellCtrl.getCellPosition())&&(r=!0),!o&&a&&c.columns.indexOf(a)<0&&(o=!0),!e&&l&&c.columns.indexOf(l)<0&&(e=!0)}return{top:t,right:e,bottom:r,left:o}}refreshHandle(){if(this.beans.context.isDestroyed())return;let i=this.shouldHaveSelectionHandle();this.selectionHandle&&!i&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),i&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(ID,!!this.selectionHandle)}shouldHaveSelectionHandle(){let i=this.beans.gos,t=this.rangeService.getCellRanges(),e=t.length;if(this.rangeCount<1||e<1)return!1;let r=rt(t),o=this.cellCtrl.getCellPosition(),n=i.get("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),s=i.get("enableRangeHandle"),a=e===1&&!this.cellCtrl.isEditing()&&(n||s);if(this.hasChartRange){let d=t[0].type===1&&this.rangeService.isCellInSpecificRange(o,t[0]);this.cellComp.addOrRemoveCssClass(MD,d),a=r.type===0}return a&&r.endRow!=null&&this.rangeService.isContiguousRange(r)&&this.rangeService.isBottomRightCell(r,o)}addSelectionHandle(){let i=this.beans.gos,t=rt(this.rangeService.getCellRanges()).type,r=i.get("enableFillHandle")&&Te(t)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==r&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(r)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},ND=class extends j{constructor(i,t){super(),this.cellCtrl=i,this.beans=t,this.column=i.getColumn(),this.rowNode=i.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListener(this.beans.eventService,m.EVENT_NEW_COLUMNS_LOADED,()=>this.onNewColumnsLoaded())}setComp(i){this.eGui=i,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){let i=this.column.getRowSpan(this.rowNode);this.rowSpan!==i&&(this.rowSpan=i,this.applyRowSpan(!0))}onDisplayColumnsChanged(){let i=this.getColSpanningList();cn(this.colsSpanning,i)||(this.colsSpanning=i,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,m.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,m.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))}onWidthChanged(){if(!this.eGui)return;let i=this.getCellWidth();this.eGui.style.width=`${i}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((i,t)=>i+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){let i=this.column.getColSpan(this.rowNode),t=[];if(i===1)t.push(this.column);else{let e=this.column,r=this.column.getPinned();for(let o=0;e&&o<i&&(t.push(e),e=this.beans.columnModel.getDisplayedColAfter(e),!(!e||Te(e)||r!==e.getPinned()));o++);}return t}onLeftChanged(){if(!this.eGui)return;let i=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=i+"px"}getCellLeft(){let i;return this.beans.gos.get("enableRtl")&&this.colsSpanning?i=rt(this.colsSpanning):i=this.column,i.getLeft()}modifyLeftForPrintLayout(i){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return i;let t=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(this.column.getPinned()==="right"){let e=this.beans.columnModel.getBodyContainerWidth();return t+e+(i||0)}return t+(i||0)}applyRowSpan(i){if(this.rowSpan===1&&!i)return;let e=this.beans.gos.getRowHeightAsNumber()*this.rowSpan;this.eGui.style.height=`${e}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}},kD=class extends j{constructor(i,t){super(),this.staticClasses=[],this.cellCtrl=i,this.beans=t,this.column=i.getColumn(),this.rowNode=i.getRowNode()}setComp(i){this.cellComp=i,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){let i=this.column.getColDef(),{cellClassRules:t}=i,e=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:i,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(t===this.cellClassRules?void 0:this.cellClassRules,t,e,r=>this.cellComp.addOrRemoveCssClass(r,!0),r=>this.cellComp.addOrRemoveCssClass(r,!1)),this.cellClassRules=t}applyUserStyles(){let i=this.column.getColDef();if(!i.cellStyle)return;let t;if(typeof i.cellStyle=="function"){let e=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:i,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),r=i.cellStyle;t=r(e)}else t=i.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){let i=this.column.getColDef(),t=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:i,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(e=>this.cellComp.addOrRemoveCssClass(e,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(i,t),this.staticClasses.length&&this.staticClasses.forEach(e=>this.cellComp.addOrRemoveCssClass(e,!0))}destroy(){super.destroy()}},Oe=class{postConstruct(){this.gos.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.gos.isRowModelType("serverSide")&&(this.serverSideRowModel=this.rowModel)}};g([w("resizeObserverService")],Oe.prototype,"resizeObserverService",2);g([w("paginationProxy")],Oe.prototype,"paginationProxy",2);g([w("context")],Oe.prototype,"context",2);g([w("gridOptionsService")],Oe.prototype,"gos",2);g([w("environment")],Oe.prototype,"environment",2);g([w("rowRenderer")],Oe.prototype,"rowRenderer",2);g([w("valueService")],Oe.prototype,"valueService",2);g([w("eventService")],Oe.prototype,"eventService",2);g([w("columnModel")],Oe.prototype,"columnModel",2);g([w("headerNavigationService")],Oe.prototype,"headerNavigationService",2);g([w("navigationService")],Oe.prototype,"navigationService",2);g([w("columnAnimationService")],Oe.prototype,"columnAnimationService",2);g([w("focusService")],Oe.prototype,"focusService",2);g([w("popupService")],Oe.prototype,"popupService",2);g([w("stylingService")],Oe.prototype,"stylingService",2);g([w("columnHoverService")],Oe.prototype,"columnHoverService",2);g([w("userComponentFactory")],Oe.prototype,"userComponentFactory",2);g([w("userComponentRegistry")],Oe.prototype,"userComponentRegistry",2);g([w("animationFrameService")],Oe.prototype,"animationFrameService",2);g([w("dragService")],Oe.prototype,"dragService",2);g([w("dragAndDropService")],Oe.prototype,"dragAndDropService",2);g([w("sortController")],Oe.prototype,"sortController",2);g([w("filterManager")],Oe.prototype,"filterManager",2);g([w("rowContainerHeightService")],Oe.prototype,"rowContainerHeightService",2);g([w("frameworkOverrides")],Oe.prototype,"frameworkOverrides",2);g([w("cellPositionUtils")],Oe.prototype,"cellPositionUtils",2);g([w("rowPositionUtils")],Oe.prototype,"rowPositionUtils",2);g([w("selectionService")],Oe.prototype,"selectionService",2);g([w("rowCssClassCalculator")],Oe.prototype,"rowCssClassCalculator",2);g([w("rowModel")],Oe.prototype,"rowModel",2);g([w("ctrlsService")],Oe.prototype,"ctrlsService",2);g([w("ctrlsFactory")],Oe.prototype,"ctrlsFactory",2);g([w("agStackComponentsRegistry")],Oe.prototype,"agStackComponentsRegistry",2);g([w("valueCache")],Oe.prototype,"valueCache",2);g([w("rowNodeEventThrottle")],Oe.prototype,"rowNodeEventThrottle",2);g([w("localeService")],Oe.prototype,"localeService",2);g([w("syncService")],Oe.prototype,"syncService",2);g([w("ariaAnnouncementService")],Oe.prototype,"ariaAnnouncementService",2);g([gt("rangeService")],Oe.prototype,"rangeService",2);g([gt("selectionHandleFactory")],Oe.prototype,"selectionHandleFactory",2);g([U],Oe.prototype,"postConstruct",1);Oe=g([te("beans")],Oe);var VD=class extends Oe{constructor(i,t,e){super(),this.cellCtrl=i,this.beans=t,this.column=e}onMouseEvent(i,t){if(!To(t))switch(i){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(i){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(i),i.preventDefault();return}let{eventService:t,rangeService:e,gos:r}=this.beans,o=i.ctrlKey||i.metaKey;e&&o&&e.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&e.intersectLastRange(!0);let n=this.cellCtrl.createEvent(i,m.EVENT_CELL_CLICKED);t.dispatchEvent(n);let s=this.column.getColDef();s.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{s.onCellClicked(n)})},0),(r.get("singleClickEdit")||s.singleClickEdit)&&!r.get("suppressClickEdit")&&!(i.shiftKey&&e?.getCellRanges().length!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!Ln()||Tf("dblclick"))return!1;let i=new Date().getTime(),t=i-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=i,t}onCellDoubleClicked(i){let t=this.column.getColDef(),e=this.cellCtrl.createEvent(i,m.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(e),typeof t.onCellDoubleClicked=="function"&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{t.onCellDoubleClicked(e)})},0),!this.beans.gos.get("singleClickEdit")&&!this.beans.gos.get("suppressClickEdit")&&this.cellCtrl.startRowOrCellEdit(null,i)}onMouseDown(i){let{ctrlKey:t,metaKey:e,shiftKey:r}=i,o=i.target,{cellCtrl:n,beans:s}=this,{eventService:a,rangeService:l,focusService:d}=s;if(this.isRightClickInExistingRange(i))return;let u=l&&l.getCellRanges().length!=0;if(!r||!u){let c=gn()&&!n.isEditing()&&!Bf(o);n.focusCell(c)}if(r&&u&&!d.isCellFocused(n.getCellPosition())){i.preventDefault();let c=d.getFocusedCell();if(c){let{column:h,rowIndex:p,rowPinned:f}=c,C=s.rowRenderer.getRowByPosition({rowIndex:p,rowPinned:f}),b=C?.getCellCtrl(h);b?.isEditing()&&b.stopEditing(),d.setFocusedCell({column:h,rowIndex:p,rowPinned:f,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(o)){if(l){let c=this.cellCtrl.getCellPosition();if(r)l.extendLatestRangeToCell(c);else{let h=t||e;l.setRangeToCell(c,h)}}a.dispatchEvent(this.cellCtrl.createEvent(i,m.EVENT_CELL_MOUSE_DOWN))}}isRightClickInExistingRange(i){let{rangeService:t}=this.beans;if(t){let e=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),r=i.button===2||i.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(e&&r)return!0}return!1}containsWidget(i){return Os(i,"ag-selection-checkbox",3)}onMouseOut(i){if(this.mouseStayingInsideCell(i))return;let t=this.cellCtrl.createEvent(i,m.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.clearMouseOver()}onMouseOver(i){if(this.mouseStayingInsideCell(i))return;let t=this.cellCtrl.createEvent(i,m.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.setMouseOver([this.column])}mouseStayingInsideCell(i){if(!i.target||!i.relatedTarget)return!1;let t=this.cellCtrl.getGui(),e=t.contains(i.target),r=t.contains(i.relatedTarget);return e&&r}destroy(){}},GD=class extends j{constructor(i,t,e,r,o){super(),this.cellCtrl=i,this.beans=t,this.rowNode=r,this.rowCtrl=o}setComp(i){this.eGui=i}onKeyDown(i){let t=i.key;switch(t){case z.ENTER:this.onEnterKeyDown(i);break;case z.F2:this.onF2KeyDown(i);break;case z.ESCAPE:this.onEscapeKeyDown(i);break;case z.TAB:this.onTabKeyDown(i);break;case z.BACKSPACE:case z.DELETE:this.onBackspaceOrDeleteKeyDown(t,i);break;case z.DOWN:case z.UP:case z.RIGHT:case z.LEFT:this.onNavigationKeyDown(i,t);break}}onNavigationKeyDown(i,t){this.cellCtrl.isEditing()||(i.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(i):this.beans.navigationService.navigateToNextCell(i,t,this.cellCtrl.getCellPosition(),!0),i.preventDefault())}onShiftRangeSelect(i){if(!this.beans.rangeService)return;let t=this.beans.rangeService.extendLatestRangeInDirection(i);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(i){this.beans.navigationService.onTabKeyDown(this.cellCtrl,i)}onBackspaceOrDeleteKeyDown(i,t){var e;let{cellCtrl:r,beans:o,rowNode:n}=this,{gos:s,rangeService:a,eventService:l}=o;if(!r.isEditing()){if(l.dispatchEvent({type:m.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),Zb(i,s.get("enableCellEditingOnBackspace"))){if(a&&s.get("enableRangeSelection"))a.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(r.isCellEditable()){let d=r.getColumn(),u=(e=this.beans.valueService.parseValue(d,n,"",n.getValueFromValueService(d)))!=null?e:null;n.setDataValue(d,u,"cellClear")}}else r.startRowOrCellEdit(i,t);l.dispatchEvent({type:m.EVENT_KEY_SHORTCUT_CHANGED_CELL_END})}}onEnterKeyDown(i){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,i.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){let t=i.shiftKey?z.UP:z.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(z.ENTER,i),this.cellCtrl.isEditing()&&i.preventDefault()}onF2KeyDown(i){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(z.F2,i)}onEscapeKeyDown(i){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(i){if(i.target!==this.eGui||this.cellCtrl.isEditing())return;let r=i.key;r===" "?this.onSpaceKeyDown(i):(this.cellCtrl.startRowOrCellEdit(r,i),i.preventDefault())}onSpaceKeyDown(i){let{gos:t}=this.beans;if(!this.cellCtrl.isEditing()&&t.isRowSelection()){let e=this.rowNode.isSelected(),r=!e;if(r||!t.get("suppressRowDeselection")){let o=this.beans.gos.get("groupSelectsFiltered"),n=this.rowNode.setSelectedParams({newValue:r,rangeSelect:i.shiftKey,groupSelectsFiltered:o,event:i,source:"spaceKey"});e===void 0&&n===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:i.shiftKey,groupSelectsFiltered:o,event:i,source:"spaceKey"})}}i.preventDefault()}destroy(){super.destroy()}},qw=class extends Pe{constructor(i,t,e){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=i,this.column=t,this.eCell=e}postConstruct(){this.getGui().appendChild(It("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(i){let t=this.column.getColDef().dndSourceOnRowDrag;i.dataTransfer.setDragImage(this.eCell,0,0);let e=()=>{try{let r=JSON.stringify(this.rowNode.data);i.dataTransfer.setData("application/json",r),i.dataTransfer.setData("text/plain",r)}catch{}};if(t){let r=this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:i});t(r)}else e()}checkVisibility(){let i=this.column.isDndSource(this.rowNode);this.setDisplayed(i)}};g([U],qw.prototype,"postConstruct",1);var HD="ag-column-first",BD="ag-column-last",tp=class{static getHeaderClassesFromColDef(i,t,e,r){return Te(i)?[]:this.getColumnClassesFromCollDef(i.headerClass,i,t,e,r)}static getToolPanelClassesFromColDef(i,t,e,r){return Te(i)?[]:this.getColumnClassesFromCollDef(i.toolPanelClass,i,t,e,r)}static refreshFirstAndLastStyles(i,t,e){i.addOrRemoveCssClass(HD,e.isColumnAtEdge(t,"first")),i.addOrRemoveCssClass(BD,e.isColumnAtEdge(t,"last"))}static getClassParams(i,t,e,r){return t.addGridCommonParams({colDef:i,column:e,columnGroup:r})}static getColumnClassesFromCollDef(i,t,e,r,o){if(Te(i))return[];let n;if(typeof i=="function"){let s=this.getClassParams(t,e,r,o);n=i(s)}else n=i;return typeof n=="string"?[n]:Array.isArray(n)?[...n]:[]}},$D="ag-cell",WD="ag-cell-auto-height",jD="ag-cell-normal-height",UD="ag-cell-focus",qD="ag-cell-first-right-pinned",KD="ag-cell-last-left-pinned",YD="ag-cell-not-inline-editing",XD="ag-column-hover",QD="ag-cell-wrap-text",ZD=0,Kw=class uf extends j{constructor(t,e,r,o){super(),this.cellRangeFeature=null,this.cellPositionFeature=null,this.cellCustomStyleFeature=null,this.tooltipFeature=null,this.cellMouseListenerFeature=null,this.cellKeyboardListenerFeature=null,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.column=t,this.rowNode=e,this.beans=r,this.rowCtrl=o,this.instanceId=t.getId()+"-"+ZD++,this.colIdSanitised=ti(this.column.getId()),r.gos.get("suppressCellFocus")||(this.tabIndex=-1),this.createCellPosition(),this.addFeatures(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}addFeatures(){this.cellPositionFeature=new ND(this,this.beans),this.addDestroyFunc(()=>{var e;(e=this.cellPositionFeature)==null||e.destroy(),this.cellPositionFeature=null}),this.cellCustomStyleFeature=new kD(this,this.beans),this.addDestroyFunc(()=>{var e;(e=this.cellCustomStyleFeature)==null||e.destroy(),this.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new VD(this,this.beans,this.column),this.addDestroyFunc(()=>{var e;(e=this.cellMouseListenerFeature)==null||e.destroy(),this.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new GD(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(()=>{var e;(e=this.cellKeyboardListenerFeature)==null||e.destroy(),this.cellKeyboardListenerFeature=null}),this.column.isTooltipEnabled()&&(this.enableTooltipFeature(),this.addDestroyFunc(()=>{this.disableTooltipFeature()})),this.beans.rangeService&&this.beans.gos.get("enableRangeSelection")&&(this.cellRangeFeature=new LD(this.beans,this),this.addDestroyFunc(()=>{var e;(e=this.cellRangeFeature)==null||e.destroy(),this.cellRangeFeature=null}))}enableTooltipFeature(t,e){let r=()=>{let s=this.column.getColDef(),a=this.rowNode.data;if(s.tooltipField&&W(a))return Ja(a,s.tooltipField,this.column.isTooltipFieldContainsDots());let l=s.tooltipValueGetter;return l?l(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},o=this.beans.gos.get("tooltipShowMode")==="whenTruncated";!e&&o&&!this.isCellRenderer()&&(e=()=>{let s=this.getGui(),a=s.children.length===0?s:s.querySelector(".ag-cell-value");return a?a.scrollWidth>a.clientWidth:!0});let n={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:t!=null?()=>t:r,getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:e};this.tooltipFeature=new Nn(n,this.beans)}disableTooltipFeature(){this.tooltipFeature&&(this.tooltipFeature.destroy(),this.tooltipFeature=null)}setComp(t,e,r,o,n){var s,a,l,d;this.cellComp=t,this.eGui=e,this.printLayout=o,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(r),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),(s=this.cellPositionFeature)==null||s.setComp(e),(a=this.cellCustomStyleFeature)==null||a.setComp(t),(l=this.tooltipFeature)==null||l.refreshToolTip(),(d=this.cellKeyboardListenerFeature)==null||d.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(t,e),n&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(u=>u()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(t){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!t)return;let e=t.parentElement,r=this.beans.gos.getRowHeightForNode(this.rowNode).height,o=a=>{if(this.editing||!this.isAlive())return;let{paddingTop:l,paddingBottom:d,borderBottomWidth:u,borderTopWidth:c}=us(e),h=l+d+u+c,f=t.offsetHeight+h;if(a<5){let b=this.beans.gos.getDocument(),x=!b||!b.contains(t),S=f==0;if(x||S){window.setTimeout(()=>o(a+1),0);return}}let C=Math.max(f,r);this.rowNode.setRowAutoHeight(C,this.column)},n=()=>o(0);n();let s=this.beans.resizeObserverService.observeResize(t,n);this.addDestroyFunc(()=>{s(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){var t;return(t=this.column.getColDef().cellAriaRole)!=null?t:"gridcell"}getInstanceId(){return this.instanceId}getColumnIdSanitised(){return this.colIdSanitised}getTabIndex(){return this.tabIndex}isCellRenderer(){let t=this.column.getColDef();return t.cellRenderer!=null||t.cellRendererSelector!=null}getValueToDisplay(){var t;return(t=this.valueFormatted)!=null?t:this.value}showValue(t=!1){var e;let r=this.getValueToDisplay(),o;if(this.rowNode.stub){let n=this.createCellRendererParams();o=this.beans.userComponentFactory.getLoadingCellRendererDetails(this.column.getColDef(),n)}else if(this.isCellRenderer()){let n=this.createCellRendererParams();o=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),n)}this.cellComp.setRenderDetails(o,r,t),(e=this.cellRangeFeature)==null||e.refreshHandle()}setupControlComps(){let t=this.column.getColDef();this.includeSelection=this.isIncludeControl(t.checkboxSelection),this.includeRowDrag=this.isIncludeControl(t.rowDrag),this.includeDndSource=this.isIncludeControl(t.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(t){return this.rowNode.rowPinned!=null?!1:typeof t=="function"||t===!0}refreshShouldDestroy(){let t=this.column.getColDef(),e=this.includeSelection!=this.isIncludeControl(t.checkboxSelection),r=this.includeRowDrag!=this.isIncludeControl(t.rowDrag),o=this.includeDndSource!=this.isIncludeControl(t.dndSource),n=this.isAutoHeight!=this.column.isAutoHeight();return e||r||o||n}startEditing(t=null,e=!1,r=null){if(!this.isCellEditable()||this.editing)return;if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startEditing(t,e,r)});return}let o=this.createCellEditorParams(t,e),n=this.column.getColDef(),s=this.beans.userComponentFactory.getCellEditorDetails(n,o);this.editCompDetails=s;let a=s?.popupFromSelector!=null?s.popupFromSelector:!!n.cellEditorPopup,l=s?.popupPositionFromSelector!=null?s.popupPositionFromSelector:n.cellEditorPopupPosition;this.setEditing(!0),this.cellComp.setEditDetails(s,a,l,this.beans.gos.get("reactiveCustomComponents"));let d=this.createEvent(r,m.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(d)}setEditing(t){var e;this.editing!==t&&(this.editing=t,(e=this.cellRangeFeature)==null||e.refreshHandle())}stopRowOrCellEdit(t=!1){this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.stopEditing(t):this.stopEditing(t)}onPopupEditorClosed(){this.isEditing()&&this.stopEditingAndFocus()}takeValueFromCellEditor(t){let e={newValueExists:!1};if(t)return e;let r=this.cellComp.getCellEditor();return!r||r.isCancelAfterEnd&&r.isCancelAfterEnd()?e:{newValue:r.getValue(),newValueExists:!0}}saveNewValue(t,e){if(e===t)return!1;this.suppressRefreshCell=!0;let r=this.rowNode.setDataValue(this.column,e,"edit");return this.suppressRefreshCell=!1,r}stopEditing(t=!1){if(!this.editing)return!1;let{newValue:e,newValueExists:r}=this.takeValueFromCellEditor(t),o=this.rowNode.getValueFromValueService(this.column),n=!1;return r&&(n=this.saveNewValue(o,e)),this.setEditing(!1),this.cellComp.setEditDetails(),this.editCompDetails=void 0,this.updateAndFormatValue(!1),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(o,e,!t&&!!n),n}dispatchEditingStoppedEvent(t,e,r){let o=Pt(he({},this.createEvent(null,m.EVENT_CELL_EDITING_STOPPED)),{oldValue:t,newValue:e,valueChanged:r});this.beans.eventService.dispatchEvent(o)}createCellEditorParams(t,e){return this.beans.gos.addGridCommonParams({value:this.rowNode.getValueFromValueService(this.column),eventKey:t,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,cellStartedEdit:e,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)})}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.rowNode.getValueFromValueService(this.column),setValue:e=>this.beans.valueService.setValue(this.rowNode,this.column,e),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(e,r,o,n)=>this.registerRowDragger(e,r,n),setTooltip:(e,r)=>{var o;this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(e,r),(o=this.tooltipFeature)==null||o.refreshToolTip()}})}parseValue(t){return this.beans.valueService.parseValue(this.column,this.rowNode,t,this.getValue())}setFocusOutOnEditor(){if(!this.editing)return;let t=this.cellComp.getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(){if(!this.editing)return;let t=this.cellComp.getCellEditor();t&&t.focusIn?t.focusIn():this.focusCell(!0)}onCellChanged(t){t.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(t){var e;this.refreshShouldDestroy()?(e=this.rowCtrl)==null||e.recreateCell(this):this.refreshCell(t)}refreshCell(t){var e,r,o,n;if(this.suppressRefreshCell||this.editing)return;let s=this.column.getColDef(),a=t!=null&&!!t.newData,l=t!=null&&!!t.suppressFlash||!!s.suppressCellFlash,d=s.field==null&&s.valueGetter==null&&s.showRowGroup==null,u=t&&t.forceRefresh||d||a,c=!!this.cellComp,h=this.updateAndFormatValue(c),p=u||h;if(c){if(p){this.showValue(a);let f=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();!l&&!f&&(this.beans.gos.get("enableCellChangeFlash")||s.enableCellChangeFlash)&&this.flashCell(),(e=this.cellCustomStyleFeature)==null||e.applyUserStyles(),(r=this.cellCustomStyleFeature)==null||r.applyClassesFromColDef()}(o=this.tooltipFeature)==null||o.refreshToolTip(),(n=this.cellCustomStyleFeature)==null||n.applyCellClassRules()}}stopEditingAndFocus(t=!1,e=!1){this.stopRowOrCellEdit(),this.focusCell(!0),t||this.navigateAfterEdit(e)}navigateAfterEdit(t){if(this.beans.gos.get("enterNavigatesVerticallyAfterEdit")){let r=t?z.UP:z.DOWN;this.beans.navigationService.navigateToNextCell(null,r,this.getCellPosition(),!1)}}flashCell(t){var e,r;let o=(e=t?.flashDuration)!=null?e:t?.flashDelay,n=(r=t?.fadeDuration)!=null?r:t?.fadeDelay;this.animateCell("data-changed",o,n)}animateCell(t,e,r){if(!this.cellComp)return;let o=`ag-cell-${t}`,n=`ag-cell-${t}-animation`,{gos:s}=this.beans;e||(e=s.get("cellFlashDuration")),W(r)||(r=s.get("cellFadeDuration")),this.cellComp.addOrRemoveCssClass(o,!0),this.cellComp.addOrRemoveCssClass(n,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(o,!1),this.cellComp.addOrRemoveCssClass(n,!0),this.eGui.style.transition=`background-color ${r}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(n,!1),this.eGui.style.transition="")},r))},e)})}onFlashCells(t){if(!this.cellComp)return;let e=this.beans.cellPositionUtils.createId(this.getCellPosition());t.cells[e]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(t){var e;return(e=this.callValueFormatter(t))!=null?e:t}callValueFormatter(t){return this.beans.valueService.formatValue(this.column,this.rowNode,t)}updateAndFormatValue(t){let e=this.value,r=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),t?!this.valuesAreEqual(e,this.value)||this.valueFormatted!=r:!0}valuesAreEqual(t,e){let r=this.column.getColDef();return r.equals?r.equals(t,e):t===e}getComp(){return this.cellComp}getValue(){return this.value}addDomData(){let t=this.getGui();this.beans.gos.setDomData(t,uf.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(()=>this.beans.gos.setDomData(t,uf.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(t,e){return this.beans.gos.addGridCommonParams({type:e,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:t,rowIndex:this.rowNode.rowIndex})}processCharacter(t){var e;(e=this.cellKeyboardListenerFeature)==null||e.processCharacter(t)}onKeyDown(t){var e;(e=this.cellKeyboardListenerFeature)==null||e.onKeyDown(t)}onMouseEvent(t,e){var r;(r=this.cellMouseListenerFeature)==null||r.onMouseEvent(t,e)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){var t;this.cellComp&&((t=this.cellPositionFeature)==null||t.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){let{cellComp:t,column:e,beans:r}=this;tp.refreshFirstAndLastStyles(t,e,r.columnModel)}refreshAriaColIndex(){let t=this.beans.columnModel.getAriaColumnIndex(this.column);zf(this.getGui(),t)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){var t;return(t=this.cellPositionFeature)==null?void 0:t.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(t,e=null){if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(t,e)});return}this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(t,this):this.startEditing(t,!0,e)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onRangeSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(t=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:t})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}onFirstRightPinnedChanged(){if(!this.cellComp)return;let t=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(qD,t)}onLastLeftPinnedChanged(){if(!this.cellComp)return;let t=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(KD,t)}onCellFocused(t){if(this.beans.gos.get("suppressCellFocus"))return;let e=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){e&&t?.forceBrowserFocus&&(this.focusEventToRestore=t);return}this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(UD,e),e&&t&&t.forceBrowserFocus&&this.cellComp.getFocusableElement().focus({preventScroll:!!t.preventScrollOnBrowserFocus});let r=this.beans.gos.get("editType")==="fullRow";!e&&!r&&this.editing&&this.stopRowOrCellEdit(),e&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:hn(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass($D,!0),this.cellComp.addOrRemoveCssClass(YD,!0);let t=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(WD,t),this.cellComp.addOrRemoveCssClass(jD,!t)}onColumnHover(){if(!this.cellComp||!this.beans.gos.get("columnHoverHighlight"))return;let t=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(XD,t)}onColDefChanged(){if(!this.cellComp)return;if(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),!this.editing)this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0});else{let e=this.getCellEditor();if(e?.refresh){let{eventKey:r,cellStartedEdit:o}=this.editCompDetails.params,n=this.createCellEditorParams(r,o),s=this.column.getColDef(),a=this.beans.userComponentFactory.getCellEditorDetails(s,n);e.refresh(a.params)}}}setWrapText(){let t=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(QD,t)}dispatchCellContextMenuEvent(t){let e=this.column.getColDef(),r=this.createEvent(t,m.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(r),e.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{e.onCellContextMenu(r)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){let t=new Qh;return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){let t=new qw(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(t),t}registerRowDragger(t,e,r){if(this.customRowDragComp){this.customRowDragComp.setDragElement(t,e);return}let o=this.createRowDragComp(t,e,r);o&&(this.customRowDragComp=o,this.addDestroyFunc(()=>{this.beans.context.destroyBean(o),this.customRowDragComp=null}))}createRowDragComp(t,e,r){let o=this.beans.gos.get("pagination"),n=this.beans.gos.get("rowDragManaged"),s=this.beans.gos.isRowModelType("clientSide");if(n){if(!s){Ce("managed row dragging is only allowed in the Client Side Row Model");return}if(o){Ce("managed row dragging is not possible when doing pagination");return}}let a=new Hs(()=>this.value,this.rowNode,this.column,t,e,r);return this.beans.context.createBean(a),a}};Kw.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var Ns=Kw,JD=0,Yw=class cf extends j{constructor(t,e,r,o,n){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=e,this.gos=e.gos,this.rowNode=t,this.paginationPage=e.paginationProxy.getCurrentPage(),this.useAnimationFrameForCreate=o,this.printLayout=n,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=t.id+"-"+JD++,this.rowId=ti(t.id),this.initRowBusinessKey(),this.rowFocused=e.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=e.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(r),this.rowStyles=this.processStylesFromGridOptions(),this.isFullWidth()&&!this.gos.get("suppressCellFocus")&&(this.tabIndex=-1),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;let t=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=ti(t)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}getTabIndex(){return this.tabIndex}isSticky(){return this.rowNode.sticky}getInstanceId(){return this.instanceId}setComp(t,e,r){let o={rowComp:t,element:e,containerType:r};this.allRowGuis.push(o),r==="left"?this.leftGui=o:r==="right"?this.rightGui=o:r==="fullWidth"?this.fullWidthGui=o:this.centerGui=o,this.initialiseRowComp(o),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(t){switch(this.allRowGuis=this.allRowGuis.filter(e=>e.containerType!==t),t){case"left":this.leftGui=void 0;break;case"right":this.rightGui=void 0;break;case"fullWidth":this.fullWidthGui=void 0;break;case"center":this.centerGui=void 0;break;default:}}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(t){let e=t?"none":"";this.allRowGuis.forEach(r=>r.element.style.display=e)}initialiseRowComp(t){let e=this.gos;this.listenOnDomOrder(t),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),e.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);let r=t.rowComp;this.getInitialRowClasses(t.containerType).forEach(n=>r.addOrRemoveCssClass(n,!0)),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&zn(t.element,this.rowNode.expanded==!0),this.setRowCompRowId(r),this.setRowCompRowBusinessKey(r),e.setDomData(t.element,cf.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(()=>e.setDomData(t.element,cf.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t.element),this.isFullWidth()&&this.setupFullWidth(t),e.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&t.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(t){this.businessKeySanitised!=null&&t.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(t){this.rowId=ti(this.rowNode.id),this.rowId!=null&&t.setRowId(this.rowId)}executeSlideAndFadeAnimations(t){let{containerType:e}=t;this.slideInAnimation[e]&&(Yg(()=>{this.onTopChanged()}),this.slideInAnimation[e]=!1),this.fadeInAnimation[e]&&(Yg(()=>{t.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[e]=!1)}addRowDraggerToRow(t){if(this.gos.get("enableRangeSelection")){Ce("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`");return}let e=this.beans.localeService.getLocaleTextFunc(),r=new Hs(()=>`1 ${e("rowDragRow","row")}`,this.rowNode,void 0,t.element,void 0,!0),o=this.createBean(r,this.beans.context);this.rowDragComps.push(o)}setupFullWidth(t){let e=this.getPinnedForContainer(t.containerType);if(this.rowType=="FullWidthDetail"&&!pt.__assertRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId()))return;let r=this.createFullWidthCompDetails(t.element,e);t.rowComp.showFullWidth(r)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){var t,e;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(r=>{var o;return(o=r?.rowComp)==null?void 0:o.getFullWidthCellRenderer()}):[(e=(t=this.fullWidthGui)==null?void 0:t.rowComp)==null?void 0:e.getFullWidthCellRenderer()]}getCellElement(t){let e=this.getCellCtrl(t);return e?e.getGui():null}executeProcessRowPostCreateFunc(){let t=this.gos.getCallback("processRowPostCreate");if(!t||!this.areAllContainersReady())return;let e={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};t(e)}areAllContainersReady(){let t=!!this.leftGui||!this.beans.columnModel.isPinningLeft(),e=!!this.centerGui,r=!!this.rightGui||!this.beans.columnModel.isPinningRight();return t&&e&&r}setRowType(){let t=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow"),e=this.rowNode.isFullWidthCell(),r=this.gos.get("masterDetail")&&this.rowNode.detail,o=this.beans.columnModel.isPivotMode(),s=!!this.rowNode.group&&!this.rowNode.footer&&this.gos.isGroupUseEntireRow(o);t?this.rowType="FullWidthLoading":r?this.rowType="FullWidthDetail":e?this.rowType="FullWidth":s?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(t=!1,e=!1){if(this.isFullWidth())return;if(t||this.gos.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(e);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(t,e,r=null){let o={list:[],map:{}},n=(s,a)=>{o.list.push(a),o.map[s]=a};return e.forEach(s=>{let a=s.getInstanceId(),l=t.map[a];l||(l=new Ns(s,this.rowNode,this.beans,this)),n(a,l)}),t.list.forEach(s=>{if(o.map[s.getColumn().getInstanceId()]!=null)return;if(!this.isCellEligibleToBeRemoved(s,r)){n(s.getColumn().getInstanceId(),s);return}s.destroy()}),o}updateColumnListsImpl(t){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(t)}setCellCtrls(t){this.allRowGuis.forEach(e=>{let r=this.getCellCtrlsForContainer(e.containerType);e.rowComp.setCellCtrls(r,t)})}getCellCtrlsForContainer(t){switch(t){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list;default:let e=t;throw new Error(`Unhandled case: ${e}`)}}createAllCellCtrls(){let t=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{let e=t.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,e);let r=t.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,r,"left");let o=t.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,o,"right")}}isCellEligibleToBeRemoved(t,e){if(t.getColumn().getPinned()!=e)return!0;let s=t.isEditing(),a=this.beans.focusService.isCellFocused(t.getCellPosition());if(s||a){let d=t.getColumn();return!(this.beans.columnModel.getAllDisplayedColumns().indexOf(d)>=0)}return!0}getDomOrder(){return this.gos.get("ensureDomOrder")||this.gos.isDomLayout("print")}listenOnDomOrder(t){let e=()=>{t.rowComp.setDomOrder(this.getDomOrder())};this.addManagedPropertyListener("domLayout",e),this.addManagedPropertyListener("ensureDomOrder",e)}setAnimateFlags(t){if(this.isSticky()||!t)return;let e=W(this.rowNode.oldRowTop),r=this.beans.columnModel.isPinningLeft(),o=this.beans.columnModel.isPinningRight();if(e){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=r,this.slideInAnimation.right=o}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=r,this.fadeInAnimation.right=o}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){let t=(a,l)=>a?a.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(a.element,l).params):!0,e=t(this.fullWidthGui,null),r=t(this.centerGui,null),o=t(this.leftGui,"left"),n=t(this.rightGui,"right");return e&&r&&o&&n}addListeners(){this.addManagedListener(this.rowNode,Ge.EVENT_HEIGHT_CHANGED,()=>this.onRowHeightChanged()),this.addManagedListener(this.rowNode,Ge.EVENT_ROW_SELECTED,()=>this.onRowSelected()),this.addManagedListener(this.rowNode,Ge.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.rowNode.detail&&this.addManagedListener(this.rowNode.parent,Ge.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_CELL_CHANGED,this.postProcessCss.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_DRAGGING_CHANGED,this.postProcessRowDragging.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));let t=this.beans.eventService;this.addManagedListener(t,m.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(t,m.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(t,m.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(t,m.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(t,m.EVENT_CELL_FOCUSED,this.onCellFocusChanged.bind(this)),this.addManagedListener(t,m.EVENT_CELL_FOCUS_CLEARED,this.onCellFocusChanged.bind(this)),this.addManagedListener(t,m.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(t,m.EVENT_MODEL_UPDATED,this.refreshFirstAndLastRowStyles.bind(this)),this.addManagedListener(t,m.EVENT_COLUMN_MOVED,this.updateColumnLists.bind(this)),this.addDestroyFunc(()=>{this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowDragEntireRow"],()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(r=>{this.addRowDraggerToRow(r)});return}this.destroyBeans(this.rowDragComps,this.beans.context),this.rowDragComps=[]}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListener(this.rowNode,Ge.EVENT_ROW_INDEX_CHANGED,()=>{this.getAllCellCtrls().forEach(t=>t.onRowIndexChanged())}),this.addManagedListener(this.rowNode,Ge.EVENT_CELL_CHANGED,t=>{this.getAllCellCtrls().forEach(e=>e.onCellChanged(t))})}onRowNodeDataChanged(t){if(this.isFullWidth()!==!!this.rowNode.isFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(r=>r.refreshCell({suppressFlash:!t.update,newData:!t.update})),this.allRowGuis.forEach(r=>{this.setRowCompRowId(r.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(r.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){let t=this.rowNode.highlighted;this.allRowGuis.forEach(e=>{let r=t===0,o=t===1;e.rowComp.addOrRemoveCssClass("ag-row-highlight-above",r),e.rowComp.addOrRemoveCssClass("ag-row-highlight-below",o)})}postProcessRowDragging(){let t=this.rowNode.dragging;this.allRowGuis.forEach(e=>e.rowComp.addOrRemoveCssClass("ag-row-dragging",t))}updateExpandedCss(){let t=this.rowNode.isExpandable(),e=this.rowNode.expanded==!0;this.allRowGuis.forEach(r=>{r.rowComp.addOrRemoveCssClass("ag-row-group",t),r.rowComp.addOrRemoveCssClass("ag-row-group-expanded",t&&e),r.rowComp.addOrRemoveCssClass("ag-row-group-contracted",t&&!e),zn(r.element,t&&e)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:hn(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(t){let e=this.allRowGuis.find(l=>l.element.contains(t.target));if(!((e?e.element:null)===t.target))return;let n=this.rowNode,s=this.beans.focusService.getFocusedCell(),a={rowIndex:n.rowIndex,rowPinned:n.rowPinned,column:s&&s.column};this.beans.navigationService.navigateToNextCell(t,t.key,a,!0),t.preventDefault()}onTabKeyDown(t){if(t.defaultPrevented||To(t))return;let e=this.allRowGuis.find(s=>s.element.contains(t.target)),r=e?e.element:null,o=r===t.target,n=null;o||(n=this.beans.focusService.findNextFocusableElement(r,!1,t.shiftKey)),(this.isFullWidth()&&o||!n)&&this.beans.navigationService.onTabKeyDown(this,t)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var t;let e=(t=this.allRowGuis.find(r=>Dr(r.element)))==null?void 0:t.element;return e?e.getBoundingClientRect().top:0}onFullWidthRowFocused(t){var e;let r=this.rowNode,o=t?this.isFullWidth()&&t.rowIndex===r.rowIndex&&t.rowPinned==r.rowPinned:!1,n=this.fullWidthGui?this.fullWidthGui.element:(e=this.centerGui)==null?void 0:e.element;n&&(n.classList.toggle("ag-full-width-focus",o),o&&n.focus({preventScroll:!0}))}recreateCell(t){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,t),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,t),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,t),t.destroy(),this.updateColumnLists()}removeCellCtrl(t,e){let r={list:[],map:{}};return t.list.forEach(o=>{o!==e&&(r.list.push(o),r.map[o.getColumn().getInstanceId()]=o)}),r}onMouseEvent(t,e){switch(t){case"dblclick":this.onRowDblClick(e);break;case"click":this.onRowClick(e);break;case"touchstart":case"mousedown":this.onRowMouseDown(e);break}}createRowEvent(t,e){return this.gos.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:e})}createRowEventWithSource(t,e){let r=this.createRowEvent(t,e);return r.source=this,r}onRowDblClick(t){if(To(t))return;let e=this.createRowEventWithSource(m.EVENT_ROW_DOUBLE_CLICKED,t);this.beans.eventService.dispatchEvent(e)}onRowMouseDown(t){if(this.lastMouseDownOnDragger=Os(t.target,"ag-row-drag",3),!this.isFullWidth())return;let e=this.rowNode,r=this.beans.columnModel;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges(),this.beans.focusService.setFocusedCell({rowIndex:e.rowIndex,column:r.getAllDisplayedColumns()[0],rowPinned:e.rowPinned,forceBrowserFocus:!0})}onRowClick(t){if(To(t)||this.lastMouseDownOnDragger)return;let r=this.createRowEventWithSource(m.EVENT_ROW_CLICKED,t);this.beans.eventService.dispatchEvent(r);let o=t.ctrlKey||t.metaKey,n=t.shiftKey;if(this.gos.get("groupSelectsChildren")&&this.rowNode.group||this.isRowSelectionBlocked()||this.gos.get("suppressRowClickSelection"))return;let a=this.gos.get("rowMultiSelectWithClick"),l=!this.gos.get("suppressRowDeselection"),d="rowClicked";if(this.rowNode.isSelected())a?this.rowNode.setSelectedParams({newValue:!1,event:t,source:d}):o?l&&this.rowNode.setSelectedParams({newValue:!1,event:t,source:d}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!n,rangeSelect:n,event:t,source:d});else{let u=a?!1:!o;this.rowNode.setSelectedParams({newValue:!0,clearSelection:u,rangeSelect:n,event:t,source:d})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!this.gos.isRowSelection()}setupDetailRowAutoHeight(t){if(this.rowType!=="FullWidthDetail"||!this.gos.get("detailRowAutoHeight"))return;let e=()=>{let o=t.clientHeight;if(o!=null&&o>0){let n=()=>{this.rowNode.setRowHeight(o),this.beans.clientSideRowModel?this.beans.clientSideRowModel.onRowHeightChanged():this.beans.serverSideRowModel&&this.beans.serverSideRowModel.onRowHeightChanged()};window.setTimeout(n,0)}},r=this.beans.resizeObserverService.observeResize(t,e);this.addDestroyFunc(r),e()}createFullWidthCompDetails(t,e){let r=this.gos.addGridCommonParams({fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,eGridCell:t,eParentOfValue:t,pinned:e,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(o,n,s,a)=>this.addFullWidthRowDragging(o,n,s,a),setTooltip:(o,n)=>this.refreshRowTooltip(o,n)});switch(this.rowType){case"FullWidthDetail":return this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(r);case"FullWidthGroup":return this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(r);case"FullWidthLoading":return this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(r);default:return this.beans.userComponentFactory.getFullWidthCellRendererDetails(r)}}refreshRowTooltip(t,e){if(!this.fullWidthGui)return;let r={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>t,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:e};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new Nn(r,this.beans))}addFullWidthRowDragging(t,e,r="",o){if(!this.isFullWidth())return;let n=new Hs(()=>r,this.rowNode,void 0,t,e,o);this.createBean(n,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(n,this.beans.context)})}onUiLevelChanged(){let t=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=t){let e="ag-row-level-"+t,r="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(o=>{o.rowComp.addOrRemoveCssClass(e,!0),o.rowComp.addOrRemoveCssClass(r,!1)})}this.rowLevel=t}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()}refreshFirstAndLastRowStyles(){let t=this.isFirstRowOnPage(),e=this.isLastRowOnPage();this.firstRowOnPage!==t&&(this.firstRowOnPage=t,this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass("ag-row-first",t))),this.lastRowOnPage!==e&&(this.lastRowOnPage=e,this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass("ag-row-last",e)))}stopEditing(t=!1){if(this.stoppingRowEdit)return;let e=this.getAllCellCtrls(),r=this.editingRow;this.stoppingRowEdit=!0;let o=!1;for(let n of e){let s=n.stopEditing(t);r&&!t&&!o&&s&&(o=!0)}if(o){let n=this.createRowEvent(m.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(n)}r&&this.setEditingRow(!1),this.stoppingRowEdit=!1}setInlineEditingCss(t){this.allRowGuis.forEach(e=>{e.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),e.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)})}setEditingRow(t){this.editingRow=t,this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass("ag-row-editing",t));let e=t?this.createRowEvent(m.EVENT_ROW_EDITING_STARTED):this.createRowEvent(m.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(e)}startRowEditing(t=null,e=null,r=null){if(this.editingRow)return;this.getAllCellCtrls().reduce((n,s)=>{let a=s===e;return a?s.startEditing(t,a,r):s.startEditing(null,a,r),n?!0:s.isEditing()},!1)&&this.setEditingRow(!0)}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){let t=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!t||!t.length||t.forEach(e=>{this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass(e,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,t=>{this.allRowGuis.forEach(e=>e.rowComp.addOrRemoveCssClass(t,!0))},t=>{this.allRowGuis.forEach(e=>e.rowComp.addOrRemoveCssClass(t,!1))})}setStylesFromGridOptions(t,e){t&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(e,r=>r.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(t){return t==="left"?"left":t==="right"?"right":null}getInitialRowClasses(t){let e=this.getPinnedForContainer(t),r={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[t],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:e};return this.beans.rowCssClassCalculator.getInitialRowClasses(r)}processStylesFromGridOptions(){let t=this.gos.get("rowStyle");if(t&&typeof t=="function"){console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}let e=this.gos.getCallback("getRowStyle"),r;if(e){let o={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};r=e(o)}return r||t?Object.assign({},t,r):this.emptyStyle}onRowSelected(t){let e=!!this.rowNode.isSelected();this.forEachGui(t,r=>{r.rowComp.addOrRemoveCssClass("ag-row-selected",e),nl(r.element,e),r.element.contains(this.beans.gos.getActiveDomElement())&&(r===this.centerGui||r===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;let t=this.rowNode.isSelected();if(t&&this.beans.gos.get("suppressRowDeselection"))return;let r=this.beans.localeService.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(r)}addHoverFunctionality(t){this.active&&(this.addManagedListener(t,"mouseenter",()=>this.rowNode.onMouseEnter()),this.addManagedListener(t,"mouseleave",()=>this.rowNode.onMouseLeave()),this.addManagedListener(this.rowNode,Ge.EVENT_MOUSE_ENTER,()=>{!this.beans.dragService.isDragging()&&!this.gos.get("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),this.rowNode.setHovered(!0))}),this.addManagedListener(this.rowNode,Ge.EVENT_MOUSE_LEAVE,()=>{t.classList.remove("ag-row-hover"),this.rowNode.setHovered(!1)}))}roundRowTopToBounds(t){let e=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),r=this.applyPaginationOffset(e.top,!0)-100,o=this.applyPaginationOffset(e.bottom,!0)+100;return Math.min(Math.max(r,t),o)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(t,e){t?e(t):this.allRowGuis.forEach(e)}onRowHeightChanged(t){if(this.rowNode.rowHeight==null)return;let e=this.rowNode.rowHeight,r=this.beans.environment.getDefaultRowHeight(),n=this.gos.isGetRowHeightFunction()?this.gos.getRowHeightForNode(this.rowNode).height:void 0,s=n?`${Math.min(r,n)-2}px`:void 0;this.forEachGui(t,a=>{a.element.style.height=`${e}px`,s&&a.element.style.setProperty("--ag-line-height",s)})}addEventListener(t,e){super.addEventListener(t,e)}removeEventListener(t,e){super.removeEventListener(t,e)}destroyFirstPass(t=!1){if(this.active=!1,!t&&this.gos.isAnimateRows()&&!this.isSticky())if(this.rowNode.rowTop!=null){let o=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(o)}else this.allRowGuis.forEach(o=>o.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);let e=this.createRowEvent(m.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(e),this.beans.eventService.dispatchEvent(e),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();let t=e=>(e.list.forEach(r=>r.destroy()),{list:[],map:{}});this.centerCellCtrls=t(this.centerCellCtrls),this.leftCellCtrls=t(this.leftCellCtrls),this.rightCellCtrls=t(this.rightCellCtrls)}setFocusedClasses(t){this.forEachGui(t,e=>{e.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),e.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){let t=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses()),!t&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){let t=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==t&&(this.paginationPage=t,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(t,e=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return t;let r=this.beans.paginationProxy.getPixelOffset();return t+r*(e?1:-1)}setRowTop(t){if(!this.printLayout&&W(t)){let e=this.applyPaginationOffset(t),n=`${this.rowNode.isRowPinned()||this.rowNode.sticky?e:this.beans.rowContainerHeightService.getRealPixelPosition(e)}px`;this.setRowTopStyle(n)}}getInitialRowTop(t){return this.suppressRowTransform?this.getInitialRowTopShared(t):void 0}getInitialTransform(t){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(t)})`}getInitialRowTopShared(t){if(this.printLayout)return"";let e;if(this.isSticky())e=this.rowNode.stickyRowTop;else{let r=this.slideInAnimation[t]?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,o=this.applyPaginationOffset(r);e=this.rowNode.isRowPinned()?o:this.beans.rowContainerHeightService.getRealPixelPosition(o)}return e+"px"}setRowTopStyle(t){this.allRowGuis.forEach(e=>this.suppressRowTransform?e.rowComp.setTop(t):e.rowComp.setTransform(`translateY(${t})`))}getRowNode(){return this.rowNode}getCellCtrl(t){let e=null;return this.getAllCellCtrls().forEach(r=>{r.getColumn()==t&&(e=r)}),e!=null||this.getAllCellCtrls().forEach(r=>{r.getColSpanningList().indexOf(t)>=0&&(e=r)}),e}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(t){let e=this.rowNode.getRowIndexString(),r=this.beans.headerNavigationService.getHeaderRowCount()+this.beans.filterManager.getHeaderRowCount(),o=this.rowNode.rowIndex%2===0,n=r+this.rowNode.rowIndex+1;this.forEachGui(t,s=>{s.rowComp.setRowIndex(e),s.rowComp.addOrRemoveCssClass("ag-row-even",o),s.rowComp.addOrRemoveCssClass("ag-row-odd",!o),Ff(s.element,n)})}};Yw.DOM_DATA_KEY_ROW_CTRL="renderedRow";var ks=Yw,Tr=class extends j{constructor(i){super(),this.element=i}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){let i="keydown",t=this.processKeyboardEvent.bind(this,i);this.addManagedListener(this.element,i,t)}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",Tf("touchstart")?"touchstart":"mousedown"].forEach(e=>{let r=this.processMouseEvent.bind(this,e);this.addManagedListener(this.element,e,r)})}processMouseEvent(i,t){if(!this.mouseEventService.isEventFromThisGrid(t)||To(t))return;let e=this.getRowForEvent(t),r=this.mouseEventService.getRenderedCellForEvent(t);i==="contextmenu"?this.handleContextMenuMouseEvent(t,void 0,e,r):(r&&r.onMouseEvent(i,t),e&&e.onMouseEvent(i,t))}mockContextMenuForIPad(){if(!Ln())return;let i=new Di(this.element),t=e=>{let r=this.getRowForEvent(e.touchEvent),o=this.mouseEventService.getRenderedCellForEvent(e.touchEvent);this.handleContextMenuMouseEvent(void 0,e.touchEvent,r,o)};this.addManagedListener(i,Di.EVENT_LONG_TAP,t),this.addDestroyFunc(()=>i.destroy())}getRowForEvent(i){let t=i.target;for(;t;){let e=this.gos.getDomData(t,ks.DOM_DATA_KEY_ROW_CTRL);if(e)return e;t=t.parentElement}return null}handleContextMenuMouseEvent(i,t,e,r){let o=e?e.getRowNode():null,n=r?r.getColumn():null,s=null;if(n){let d=i||t;r.dispatchCellContextMenuEvent(d??null),s=this.valueService.getValue(n,o)}let a=this.ctrlsService.getGridBodyCtrl(),l=r?r.getGui():a.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:i,touchEvent:t,rowNode:o,column:n,value:s,anchorToElement:l})}getControlsForEventTarget(i){return{cellCtrl:vh(this.gos,i,Ns.DOM_DATA_KEY_CELL_CTRL),rowCtrl:vh(this.gos,i,ks.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(i,t){let{cellCtrl:e,rowCtrl:r}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(e?this.processCellKeyboardEvent(e,i,t):r&&r.isFullWidth()&&this.processFullWidthRowKeyboardEvent(r,i,t))}processCellKeyboardEvent(i,t,e){let r=i.getRowNode(),o=i.getColumn(),n=i.isEditing();if(!bh(this.gos,e,r,o,n)&&t==="keydown"&&(!n&&this.navigationService.handlePageScrollingKey(e)||i.onKeyDown(e),this.doGridOperations(e,i.isEditing()),$h(e)&&i.processCharacter(e)),t==="keydown"){let a=i.createEvent(e,m.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(a)}}processFullWidthRowKeyboardEvent(i,t,e){let r=i.getRowNode(),o=this.focusService.getFocusedCell(),n=o&&o.column;if(!bh(this.gos,e,r,n,!1)){let a=e.key;if(t==="keydown")switch(a){case z.PAGE_HOME:case z.PAGE_END:case z.PAGE_UP:case z.PAGE_DOWN:this.navigationService.handlePageScrollingKey(e,!0);break;case z.UP:case z.DOWN:i.onKeyboardNavigate(e);break;case z.TAB:i.onTabKeyDown(e);break;default:}}if(t==="keydown"){let a=i.createRowEvent(m.EVENT_CELL_KEY_DOWN,e);this.eventService.dispatchEvent(a)}}doGridOperations(i,t){if(!i.ctrlKey&&!i.metaKey||t||!this.mouseEventService.isEventFromThisGrid(i))return;let e=Qb(i);if(e===z.A)return this.onCtrlAndA(i);if(e===z.C)return this.onCtrlAndC(i);if(e===z.D)return this.onCtrlAndD(i);if(e===z.V)return this.onCtrlAndV(i);if(e===z.X)return this.onCtrlAndX(i);if(e===z.Y)return this.onCtrlAndY();if(e===z.Z)return this.onCtrlAndZ(i)}onCtrlAndA(i){let{pinnedRowModel:t,paginationProxy:e,rangeService:r}=this;if(r&&e.isRowsToRender()){let[o,n]=[t.isEmpty("top"),t.isEmpty("bottom")],s=o?null:"top",a,l;n?(a=null,l=this.paginationProxy.getRowCount()-1):(a="bottom",l=t.getPinnedBottomRowData().length-1);let d=this.columnModel.getAllDisplayedColumns();if(Qr(d))return;r.setCellRange({rowStartIndex:0,rowStartPinned:s,rowEndIndex:l,rowEndPinned:a,columnStart:d[0],columnEnd:rt(d)})}i.preventDefault()}onCtrlAndC(i){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;let{cellCtrl:t,rowCtrl:e}=this.getControlsForEventTarget(i.target);t?.isEditing()||e?.isEditing()||(i.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(i){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;let{cellCtrl:t,rowCtrl:e}=this.getControlsForEventTarget(i.target);t?.isEditing()||e?.isEditing()||(i.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(i){let{cellCtrl:t,rowCtrl:e}=this.getControlsForEventTarget(i.target);t?.isEditing()||e?.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(i){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),i.preventDefault()}onCtrlAndZ(i){this.gos.get("undoRedoCellEditing")&&(i.preventDefault(),i.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService.redo("ui")}};g([w("mouseEventService")],Tr.prototype,"mouseEventService",2);g([w("valueService")],Tr.prototype,"valueService",2);g([w("menuService")],Tr.prototype,"menuService",2);g([w("ctrlsService")],Tr.prototype,"ctrlsService",2);g([w("navigationService")],Tr.prototype,"navigationService",2);g([w("focusService")],Tr.prototype,"focusService",2);g([w("undoRedoService")],Tr.prototype,"undoRedoService",2);g([w("columnModel")],Tr.prototype,"columnModel",2);g([w("paginationProxy")],Tr.prototype,"paginationProxy",2);g([w("pinnedRowModel")],Tr.prototype,"pinnedRowModel",2);g([gt("rangeService")],Tr.prototype,"rangeService",2);g([gt("clipboardService")],Tr.prototype,"clipboardService",2);g([U],Tr.prototype,"postConstruct",1);var Cl=class extends j{constructor(i){super(),this.centerContainerCtrl=i}postConstruct(){this.ctrlsService.whenReady(i=>{this.gridBodyCtrl=i.gridBodyCtrl,this.listenForResize()}),this.addManagedListener(this.eventService,m.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this)),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){let i=()=>this.onCenterViewportResized();this.centerContainerCtrl.registerViewportResizeListener(i),this.gridBodyCtrl.registerBodyViewportResizeListener(i)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();let i=this.centerContainerCtrl.getCenterWidth();i!==this.centerWidth&&(this.centerWidth=i,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){let i=this.gridBodyCtrl.getBodyViewportElement(),t=Zs(i);if(t<=50)return;let e=this.getPinnedColumnsOverflowingViewport(t-50),r=this.gos.getCallback("processUnpinnedColumns");e.length&&(r&&(e=r({columns:e,viewportWidth:t})),this.columnModel.setColumnsPinned(e,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(i){let t=this.pinnedWidthService.getPinnedRightWidth(),e=this.pinnedWidthService.getPinnedLeftWidth(),r=t+e;if(r<i)return[];let o=[...this.columnModel.getDisplayedLeftColumns()],n=[...this.columnModel.getDisplayedRightColumns()],s=0,a=0,l=0,d=[],u=r-l-i;for(;(a<o.length||s<n.length)&&u>0;){if(s<n.length){let c=n[s++];u-=c.getActualWidth(),d.push(c)}if(a<o.length&&u>0){let c=o[a++];u-=c.getActualWidth(),d.push(c)}}return d}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){let i=this.gridBodyCtrl.getBodyViewportElement(),t=iu(i);if(this.bodyHeight!==t){this.bodyHeight=t;let e={type:m.EVENT_BODY_HEIGHT_CHANGED};this.eventService.dispatchEvent(e)}}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){let i={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(i)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){let i=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(i,t)}};g([w("ctrlsService")],Cl.prototype,"ctrlsService",2);g([w("pinnedWidthService")],Cl.prototype,"pinnedWidthService",2);g([w("columnModel")],Cl.prototype,"columnModel",2);g([w("scrollVisibleService")],Cl.prototype,"scrollVisibleService",2);g([U],Cl.prototype,"postConstruct",1);var cm=class extends j{constructor(i){super(),this.element=i}postConstruct(){this.addManagedListener(this.eventService,m.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))}onPinnedLeftWidthChanged(){let i=this.pinnedWidthService.getPinnedLeftWidth(),t=i>0;qe(this.element,t),eo(this.element,i)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}};g([w("pinnedWidthService")],cm.prototype,"pinnedWidthService",2);g([U],cm.prototype,"postConstruct",1);var hm=class extends j{constructor(i){super(),this.element=i}postConstruct(){this.addManagedListener(this.eventService,m.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))}onPinnedRightWidthChanged(){let i=this.pinnedWidthService.getPinnedRightWidth(),t=i>0;qe(this.element,t),eo(this.element,i)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}};g([w("pinnedWidthService")],hm.prototype,"pinnedWidthService",2);g([U],hm.prototype,"postConstruct",1);var ip=class extends j{constructor(i,t){super(),this.eContainer=i,this.eViewport=t}postConstruct(){this.addManagedListener(this.eventService,m.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))}onHeightChanged(){let i=this.maxDivHeightScaler.getUiContainerHeight(),t=i!=null?`${i}px`:"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}};g([w("rowContainerHeightService")],ip.prototype,"maxDivHeightScaler",2);g([U],ip.prototype,"postConstruct",1);var rp=class extends j{constructor(i){super(),this.eContainer=i}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListener("enableRangeSelection",t=>{if(t.currentValue){this.enableFeature();return}this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),this.gos.get("enableRangeSelection")&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}};g([w("dragService")],rp.prototype,"dragService",2);g([gt("rangeService")],rp.prototype,"rangeService",2);g([U],rp.prototype,"postConstruct",1);var bl=class extends j{constructor(i,t=!1){super(),this.callback=i,this.addSpacer=t}postConstruct(){let i=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",i),this.addManagedListener(this.eventService,m.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,i),this.addManagedListener(this.eventService,m.EVENT_DISPLAYED_COLUMNS_CHANGED,i),this.addManagedListener(this.eventService,m.EVENT_LEFT_PINNED_WIDTH_CHANGED,i),this.addSpacer&&(this.addManagedListener(this.eventService,m.EVENT_RIGHT_PINNED_WIDTH_CHANGED,i),this.addManagedListener(this.eventService,m.EVENT_SCROLL_VISIBILITY_CHANGED,i),this.addManagedListener(this.eventService,m.EVENT_SCROLLBAR_WIDTH_CHANGED,i)),this.setWidth()}setWidth(){let{columnModel:i}=this,t=this.gos.isDomLayout("print"),e=i.getBodyContainerWidth(),r=i.getDisplayedColumnsLeftWidth(),o=i.getDisplayedColumnsRightWidth(),n;t?n=e+r+o:(n=e,this.addSpacer&&(this.gos.get("enableRtl")?r:o)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(n+=this.gos.getScrollbarWidth())),this.callback(n)}};g([w("columnModel")],bl.prototype,"columnModel",2);g([w("scrollVisibleService")],bl.prototype,"scrollVisibleService",2);g([U],bl.prototype,"postConstruct",1);function eT(i){switch(i){case"center":case"topCenter":case"stickyTopCenter":case"bottomCenter":case"stickyBottomCenter":return"center";case"left":case"topLeft":case"stickyTopLeft":case"bottomLeft":case"stickyBottomLeft":return"left";case"right":case"topRight":case"stickyTopRight":case"bottomRight":case"stickyBottomRight":return"right";case"fullWidth":case"topFullWidth":case"stickyTopFullWidth":case"bottomFullWidth":case"stickyBottomFullWidth":return"fullWidth";default:throw Error("Invalid Row Container Type")}}var tT=is([["center","ag-center-cols-container"],["left","ag-pinned-left-cols-container"],["right","ag-pinned-right-cols-container"],["fullWidth","ag-full-width-container"],["topCenter","ag-floating-top-container"],["topLeft","ag-pinned-left-floating-top"],["topRight","ag-pinned-right-floating-top"],["topFullWidth","ag-floating-top-full-width-container"],["stickyTopCenter","ag-sticky-top-container"],["stickyTopLeft","ag-pinned-left-sticky-top"],["stickyTopRight","ag-pinned-right-sticky-top"],["stickyTopFullWidth","ag-sticky-top-full-width-container"],["stickyBottomCenter","ag-sticky-bottom-container"],["stickyBottomLeft","ag-pinned-left-sticky-bottom"],["stickyBottomRight","ag-pinned-right-sticky-bottom"],["stickyBottomFullWidth","ag-sticky-bottom-full-width-container"],["bottomCenter","ag-floating-bottom-container"],["bottomLeft","ag-pinned-left-floating-bottom"],["bottomRight","ag-pinned-right-floating-bottom"],["bottomFullWidth","ag-floating-bottom-full-width-container"]]),iT=is([["center","ag-center-cols-viewport"],["topCenter","ag-floating-top-viewport"],["stickyTopCenter","ag-sticky-top-viewport"],["bottomCenter","ag-floating-bottom-viewport"],["stickyBottomCenter","ag-sticky-bottom-viewport"]]),oa=class Xw extends j{constructor(t){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=t,this.isFullWithContainer=this.name==="topFullWidth"||this.name==="stickyTopFullWidth"||this.name==="stickyBottomFullWidth"||this.name==="bottomFullWidth"||this.name==="fullWidth"}static getRowContainerCssClasses(t){let e=tT.get(t),r=iT.get(t);return{container:e,viewport:r}}static getPinned(t){switch(t){case"bottomLeft":case"topLeft":case"stickyTopLeft":case"stickyBottomLeft":case"left":return"left";case"bottomRight":case"topRight":case"stickyTopRight":case"stickyBottomRight":case"right":return"right";default:return null}}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>this.viewportSizeFeature=this.createManagedBean(new Cl(this)))}registerWithCtrlsService(){switch(this.name){case"fullWidth":case"topFullWidth":case"stickyTopFullWidth":case"bottomFullWidth":case"stickyBottomFullWidth":return;default:this.ctrlsService.register(this.name,this)}}forContainers(t,e){t.indexOf(this.name)>=0&&e()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(t,e,r){this.comp=t,this.eContainer=e,this.eViewport=r,this.createManagedBean(new Tr(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();let o=["topCenter","topLeft","topRight"],n=["stickyTopCenter","stickyTopLeft","stickyTopRight"],s=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],a=["bottomCenter","bottomLeft","bottomRight"],l=["center","left","right"],d=[...o,...a,...l,...n,...s],u=["center","left","right","fullWidth"],c=["center","topCenter","stickyTopCenter","bottomCenter","stickyBottomCenter"],h=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],p=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"];this.forContainers(h,()=>{this.pinnedWidthFeature=this.createManagedBean(new cm(this.eContainer)),this.addManagedListener(this.eventService,m.EVENT_LEFT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(p,()=>{this.pinnedWidthFeature=this.createManagedBean(new hm(this.eContainer)),this.addManagedListener(this.eventService,m.EVENT_RIGHT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(u,()=>this.createManagedBean(new ip(this.eContainer,this.name==="center"?r:void 0))),this.forContainers(d,()=>this.createManagedBean(new rp(this.eContainer))),this.forContainers(c,()=>this.createManagedBean(new bl(f=>this.comp.setContainerWidth(`${f}px`)))),this.addListeners(),this.registerWithCtrlsService()}addListeners(){this.addManagedListener(this.eventService,m.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>this.onDisplayedColumnsChanged()),this.addManagedListener(this.eventService,m.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>this.onDisplayedColumnsWidthChanged()),this.addManagedListener(this.eventService,m.EVENT_DISPLAYED_ROWS_CHANGED,t=>this.onDisplayedRowsChanged(t.afterScroll)),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(["stickyTopCenter","stickyTopLeft","stickyTopRight","stickyTopFullWidth","stickyBottomCenter","stickyBottomLeft","stickyBottomRight","stickyBottomFullWidth"].indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}let r=()=>{let o=this.gos.get("ensureDomOrder"),n=this.gos.isDomLayout("print");this.comp.setDomOrder(o||n)};this.addManagedPropertyListener("domLayout",r),r()}stopHScrollOnPinnedRows(){this.forContainers(["topCenter","stickyTopCenter","bottomCenter","stickyBottomCenter"],()=>{let t=()=>this.eViewport.scrollLeft=0;this.addManagedListener(this.eViewport,"scroll",t)})}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){let t=e=>{this.dragService.isDragging()&&e.cancelable&&e.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",t))}onHorizontalViewportChanged(t=!1){let e=this.getCenterWidth(),r=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(e,r,t)}getCenterWidth(){return Zs(this.eViewport)}getCenterViewportScrollLeft(){return Ad(this.eViewport,this.enableRtl)}registerViewportResizeListener(t){let e=this.resizeObserverService.observeResize(this.eViewport,t);this.addDestroyFunc(()=>e())}isViewportInTheDOMTree(){return jf(this.eViewport)}getViewportScrollLeft(){return Ad(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||Hb(this.eViewport)}getViewportElement(){return this.eViewport}setContainerTranslateX(t){this.eContainer.style.transform=`translateX(${t}px)`}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(t){Od(this.eViewport,t,this.enableRtl)}isContainerVisible(){return!Xw.getPinned(this.name)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){let t=this.isContainerVisible();this.visible!=t&&(this.visible=t,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(t=!1){let e=this.getRowCtrls();if(!this.visible||e.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}let r=this.gos.isDomLayout("print"),n=this.gos.get("embedFullWidthRows")||r,s=e.filter(a=>{let l=a.isFullWidth();return this.isFullWithContainer?!n&&l:n||!l});this.comp.setRowCtrls({rowCtrls:s,useFlushSync:t})}getRowCtrls(){switch(this.name){case"topCenter":case"topLeft":case"topRight":case"topFullWidth":return this.rowRenderer.getTopRowCtrls();case"stickyTopCenter":case"stickyTopLeft":case"stickyTopRight":case"stickyTopFullWidth":return this.rowRenderer.getStickyTopRowCtrls();case"stickyBottomCenter":case"stickyBottomLeft":case"stickyBottomRight":case"stickyBottomFullWidth":return this.rowRenderer.getStickyBottomRowCtrls();case"bottomCenter":case"bottomLeft":case"bottomRight":case"bottomFullWidth":return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getCentreRowCtrls()}}};g([w("dragService")],oa.prototype,"dragService",2);g([w("ctrlsService")],oa.prototype,"ctrlsService",2);g([w("columnModel")],oa.prototype,"columnModel",2);g([w("resizeObserverService")],oa.prototype,"resizeObserverService",2);g([w("rowRenderer")],oa.prototype,"rowRenderer",2);g([U],oa.prototype,"postConstruct",1);var Qw=oa,rT=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root ref="gridHeader"></ag-header-root>
        <div class="ag-floating-top" ref="eTop" role="presentation">
            <ag-row-container ref="topLeftContainer" name="topLeft"></ag-row-container>
            <ag-row-container ref="topCenterContainer" name="topCenter"></ag-row-container>
            <ag-row-container ref="topRightContainer" name="topRight"></ag-row-container>
            <ag-row-container ref="topFullWidthContainer" name="topFullWidth"></ag-row-container>
        </div>
        <div class="ag-body" ref="eBody" role="presentation">
            <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">
                <ag-row-container ref="leftContainer" name="left"></ag-row-container>
                <ag-row-container ref="centerContainer" name="center"></ag-row-container>
                <ag-row-container ref="rightContainer" name="right"></ag-row-container>
                <ag-row-container ref="fullWidthContainer" name="fullWidth"></ag-row-container>
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">
            <ag-row-container ref="stickyTopLeftContainer" name="stickyTopLeft"></ag-row-container>
            <ag-row-container ref="stickyTopCenterContainer" name="stickyTopCenter"></ag-row-container>
            <ag-row-container ref="stickyTopRightContainer" name="stickyTopRight"></ag-row-container>
            <ag-row-container ref="stickyTopFullWidthContainer" name="stickyTopFullWidth"></ag-row-container>
        </div>
        <div class="ag-sticky-bottom" ref="eStickyBottom" role="presentation">
            <ag-row-container ref="stickyBottomLeftContainer" name="stickyBottomLeft"></ag-row-container>
            <ag-row-container ref="stickyBottomCenterContainer" name="stickyBottomCenter"></ag-row-container>
            <ag-row-container ref="stickyBottomRightContainer" name="stickyBottomRight"></ag-row-container>
            <ag-row-container ref="stickyBottomFullWidthContainer" name="stickyBottomFullWidth"></ag-row-container>
        </div>
        <div class="ag-floating-bottom" ref="eBottom" role="presentation">
            <ag-row-container ref="bottomLeftContainer" name="bottomLeft"></ag-row-container>
            <ag-row-container ref="bottomCenterContainer" name="bottomCenter"></ag-row-container>
            <ag-row-container ref="bottomRightContainer" name="bottomRight"></ag-row-container>
            <ag-row-container ref="bottomFullWidthContainer" name="bottomFullWidth"></ag-row-container>
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`,Mo=class extends Pe{constructor(){super(rT)}init(){let i=(e,r)=>{let o=`${e}px`;r.style.minHeight=o,r.style.height=o},t={setRowAnimationCssOnBodyViewport:(e,r)=>this.setRowAnimationCssOnBodyViewport(e,r),setColumnCount:e=>xb(this.getGui(),e),setRowCount:e=>_b(this.getGui(),e),setTopHeight:e=>i(e,this.eTop),setBottomHeight:e=>i(e,this.eBottom),setTopDisplay:e=>this.eTop.style.display=e,setBottomDisplay:e=>this.eBottom.style.display=e,setStickyTopHeight:e=>this.eStickyTop.style.height=e,setStickyTopTop:e=>this.eStickyTop.style.top=e,setStickyTopWidth:e=>this.eStickyTop.style.width=e,setStickyBottomHeight:e=>this.eStickyBottom.style.height=e,setStickyBottomBottom:e=>this.eStickyBottom.style.bottom=e,setStickyBottomWidth:e=>this.eStickyBottom.style.width=e,setColumnMovingCss:(e,r)=>this.addOrRemoveCssClass(e,r),updateLayoutClasses:(e,r)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach(n=>{n.toggle("ag-layout-auto-height",r.autoHeight),n.toggle("ag-layout-normal",r.normal),n.toggle("ag-layout-print",r.print)}),this.addOrRemoveCssClass("ag-layout-auto-height",r.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",r.normal),this.addOrRemoveCssClass("ag-layout-print",r.print)},setAlwaysVerticalScrollClass:(e,r)=>this.eBodyViewport.classList.toggle(Uw,r),registerBodyViewportResizeListener:e=>{let r=this.resizeObserverService.observeResize(this.eBodyViewport,e);this.addDestroyFunc(()=>r())},setPinnedTopBottomOverflowY:e=>this.eTop.style.overflowY=this.eBottom.style.overflowY=e,setCellSelectableCss:(e,r)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(o=>o.classList.toggle(e,r))},setBodyViewportWidth:e=>this.eBodyViewport.style.width=e};this.ctrl=this.createManagedBean(new or),this.ctrl.setComp(t,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(this.rangeService&&this.gos.get("enableRangeSelection")||this.gos.get("rowSelection")==="multiple")&&Sb(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(i,t){let e=this.eBodyViewport.classList;e.toggle("ag-row-animation",t),e.toggle("ag-row-no-animation",!t)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}};g([w("resizeObserverService")],Mo.prototype,"resizeObserverService",2);g([gt("rangeService")],Mo.prototype,"rangeService",2);g([Q("eBodyViewport")],Mo.prototype,"eBodyViewport",2);g([Q("eStickyTop")],Mo.prototype,"eStickyTop",2);g([Q("eStickyBottom")],Mo.prototype,"eStickyBottom",2);g([Q("eTop")],Mo.prototype,"eTop",2);g([Q("eBottom")],Mo.prototype,"eBottom",2);g([Q("gridHeader")],Mo.prototype,"headerRootComp",2);g([Q("eBody")],Mo.prototype,"eBody",2);g([U],Mo.prototype,"init",1);var ll=class extends j{postConstruct(){this.addManagedListener(this.eventService,m.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,m.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))}onDisplayedColumnsChanged(){this.update()}onDisplayedColumnsWidthChanged(){this.update()}update(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateImpl())}):this.updateImpl()}updateImpl(){let i=this.ctrlsService.get("center");if(!i||this.columnAnimationService.isActive())return;let t={horizontalScrollShowing:i.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t)}setScrollsVisible(i){if(this.horizontalScrollShowing!==i.horizontalScrollShowing||this.verticalScrollShowing!==i.verticalScrollShowing){this.horizontalScrollShowing=i.horizontalScrollShowing,this.verticalScrollShowing=i.verticalScrollShowing;let e={type:m.EVENT_SCROLL_VISIBILITY_CHANGED};this.eventService.dispatchEvent(e)}}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}};g([w("ctrlsService")],ll.prototype,"ctrlsService",2);g([w("columnAnimationService")],ll.prototype,"columnAnimationService",2);g([U],ll.prototype,"postConstruct",1);ll=g([te("scrollVisibleService")],ll);var Fn=class extends j{constructor(){super(...arguments),this.gridInstanceId=Fn.gridInstanceSequence.next()}stampTopLevelGridCompWithGridInstance(i){i[Fn.GRID_DOM_KEY]=this.gridInstanceId}getRenderedCellForEvent(i){return vh(this.gos,i.target,Ns.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(i){return this.isElementInThisGrid(i.target)}isElementInThisGrid(i){let t=i;for(;t;){let e=t[Fn.GRID_DOM_KEY];if(W(e))return e===this.gridInstanceId;t=t.parentElement}return!1}getCellPositionForEvent(i){let t=this.getRenderedCellForEvent(i);return t?t.getCellPosition():null}getNormalisedPosition(i){let t=this.gos.isDomLayout("normal"),e=i,r,o;if(e.clientX!=null||e.clientY!=null?(r=e.clientX,o=e.clientY):(r=e.x,o=e.y),t){let n=this.ctrlsService.getGridBodyCtrl(),s=n.getScrollFeature().getVScrollPosition(),a=n.getScrollFeature().getHScrollPosition();r+=a.left,o+=s.top}return{x:r,y:o}}};Fn.gridInstanceSequence=new al;Fn.GRID_DOM_KEY="__ag_grid_instance";g([w("ctrlsService")],Fn.prototype,"ctrlsService",2);Fn=g([te("mouseEventService")],Fn);var ji=class extends j{constructor(){super(),this.onPageDown=Xg(this.onPageDown,100),this.onPageUp=Xg(this.onPageUp,100)}postConstruct(){this.ctrlsService.whenReady(i=>{this.gridBodyCon=i.gridBodyCtrl})}handlePageScrollingKey(i,t=!1){let e=i.key,r=i.altKey,o=i.ctrlKey||i.metaKey,n=!!this.rangeService&&i.shiftKey,s=this.mouseEventService.getCellPositionForEvent(i),a=!1;switch(e){case z.PAGE_HOME:case z.PAGE_END:!o&&!r&&(this.onHomeOrEndKey(e),a=!0);break;case z.LEFT:case z.RIGHT:case z.UP:case z.DOWN:if(!s)return!1;o&&!r&&!n&&(this.onCtrlUpDownLeftRight(e,s),a=!0);break;case z.PAGE_DOWN:case z.PAGE_UP:!o&&!r&&(a=this.handlePageUpDown(e,s,t));break}return a&&i.preventDefault(),a}handlePageUpDown(i,t,e){return e&&(t=this.focusService.getFocusedCell()),t?(i===z.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo(i){var t;let{scrollIndex:e,scrollType:r,scrollColumn:o,focusIndex:n,focusColumn:s}=i;W(o)&&!o.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(o),W(e)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e,r),i.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(n),this.focusService.setFocusedCell({rowIndex:n,column:s,rowPinned:null,forceBrowserFocus:!0}),(t=this.rangeService)==null||t.setRangeToCell({rowIndex:n,rowPinned:null,column:s})}onPageDown(i){let e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),r=this.getViewportHeight(),o=this.paginationProxy.getPixelOffset(),n=e.top+r,s=this.paginationProxy.getRowIndexAtPixel(n+o);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(i,s):this.navigateToNextPage(i,s)}onPageUp(i){let e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),r=this.paginationProxy.getPixelOffset(),o=e.top,n=this.paginationProxy.getRowIndexAtPixel(o+r);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(i,n,!0):this.navigateToNextPage(i,n,!0)}navigateToNextPage(i,t,e=!1){let r=this.getViewportHeight(),o=this.paginationProxy.getPageFirstRow(),n=this.paginationProxy.getPageLastRow(),s=this.paginationProxy.getPixelOffset(),a=this.paginationProxy.getRow(i.rowIndex),l=e?a?.rowHeight-r-s:r-s,d=a?.rowTop+l,u=this.paginationProxy.getRowIndexAtPixel(d+s);if(u===i.rowIndex){let h=e?-1:1;t=u=i.rowIndex+h}let c;e?(c="bottom",u<o&&(u=o),t<o&&(t=o)):(c="top",u>n&&(u=n),t>n&&(t=n)),this.isRowTallerThanView(u)&&(t=u,c="top"),this.navigateTo({scrollIndex:t,scrollType:c,scrollColumn:null,focusIndex:u,focusColumn:i.column})}navigateToNextPageWithAutoHeight(i,t,e=!1){this.navigateTo({scrollIndex:t,scrollType:e?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:i.column}),setTimeout(()=>{let r=this.getNextFocusIndexForAutoHeight(i,e);this.navigateTo({scrollIndex:t,scrollType:e?"bottom":"top",scrollColumn:null,focusIndex:r,focusColumn:i.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(i,t=!1){var e;let r=t?-1:1,o=this.getViewportHeight(),n=this.paginationProxy.getPageLastRow(),s=0,a=i.rowIndex;for(;a>=0&&a<=n;){let l=this.paginationProxy.getRow(a);if(l){let d=(e=l.rowHeight)!=null?e:0;if(s+d>o)break;s+=d}a+=r}return Math.max(0,Math.min(a,n))}getViewportHeight(){let{gridBodyCtrl:i,center:t}=this.ctrlsService.getParams(),e=i.getScrollFeature().getVScrollPosition(),r=this.gos.getScrollbarWidth(),o=e.bottom-e.top;return t.isHorizontalScrollShowing()&&(o-=r),o}isRowTallerThanView(i){let t=this.paginationProxy.getRow(i);if(!t)return!1;let e=t.rowHeight;return typeof e!="number"?!1:e>this.getViewportHeight()}onCtrlUpDownLeftRight(i,t){let e=this.cellNavigationService.getNextCellToFocus(i,t,!0),{rowIndex:r,column:o}=e;this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:o,focusIndex:r,focusColumn:o})}onHomeOrEndKey(i){let t=i===z.PAGE_HOME,e=this.columnModel.getAllDisplayedColumns(),r=t?e[0]:rt(e),o=t?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:o,scrollType:null,scrollColumn:r,focusIndex:o,focusColumn:r})}onTabKeyDown(i,t){let e=t.shiftKey,r=this.tabToNextCellCommon(i,e,t);if(r!==!1){r&&t.preventDefault();return}if(e){let{rowIndex:o,rowPinned:n}=i.getRowPosition();(n?o===0:o===this.paginationProxy.getPageFirstRow())&&(this.gos.get("headerHeight")===0||this.gos.get("suppressHeaderFocus")?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else i instanceof Ns&&i.focusCell(!0),this.focusService.focusNextGridCoreContainer(e)&&t.preventDefault()}tabToNextCell(i,t){let e=this.focusService.getFocusedCell();if(!e)return!1;let r=this.getCellByPosition(e);return!r&&(r=this.rowRenderer.getRowByPosition(e),!r||!r.isFullWidth())?!1:!!this.tabToNextCellCommon(r,i,t)}tabToNextCellCommon(i,t,e){let r=i.isEditing();if(!r&&i instanceof Ns){let s=i.getRowCtrl();s&&(r=s.isEditing())}let o;return r?this.gos.get("editType")==="fullRow"?o=this.moveToNextEditingRow(i,t,e):o=this.moveToNextEditingCell(i,t,e):o=this.moveToNextCellNotEditing(i,t),o===null?o:o||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(i,t,e=null){let r=i.getCellPosition();i.getGui().focus(),i.stopEditing();let o=this.findNextCellToFocusOn(r,t,!0);return o===!1?null:o==null?!1:(o.startEditing(null,!0,e),o.focusCell(!1),!0)}moveToNextEditingRow(i,t,e=null){let r=i.getCellPosition(),o=this.findNextCellToFocusOn(r,t,!0);if(o===!1)return null;if(o==null)return!1;let n=o.getCellPosition(),s=this.isCellEditable(r),a=this.isCellEditable(n),l=n&&r.rowIndex===n.rowIndex&&r.rowPinned===n.rowPinned;return s&&i.setFocusOutOnEditor(),l||(i.getRowCtrl().stopEditing(),o.getRowCtrl().startRowEditing(void 0,void 0,e)),a?(o.setFocusInOnEditor(),o.focusCell()):o.focusCell(!0),!0}moveToNextCellNotEditing(i,t){let e=this.columnModel.getAllDisplayedColumns(),r;i instanceof ks?r=Pt(he({},i.getRowPosition()),{column:t?e[0]:rt(e)}):r=i.getCellPosition();let o=this.findNextCellToFocusOn(r,t,!1);if(o===!1)return null;if(o instanceof Ns)o.focusCell(!0);else if(o)return this.tryToFocusFullWidthRow(o.getRowPosition(),t);return W(o)}findNextCellToFocusOn(i,t,e){var r;let o=i;for(;;){i!==o&&(i=o),t||(o=this.getLastCellOfColSpan(o)),o=this.cellNavigationService.getNextTabbedCell(o,t);let n=this.gos.getCallback("tabToNextCell");if(W(n)){let d=n({backwards:t,editing:e,previousCellPosition:i,nextCellPosition:o||null});if(d===!0||d===null)d===null&&Ce("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),o=i;else{if(d===!1)return!1;d.floating&&(Ce("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),d.rowPinned=d.floating),o={rowIndex:d.rowIndex,column:d.column,rowPinned:d.rowPinned}}}if(!o)return null;if(o.rowIndex<0){let l=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l+o.rowIndex,column:o.column},fromCell:!0}),null}let s=this.gos.get("editType")==="fullRow";if(e&&!s&&!this.isCellEditable(o))continue;this.ensureCellVisible(o);let a=this.getCellByPosition(o);if(!a){let l=this.rowRenderer.getRowByPosition(o);if(!l||!l.isFullWidth()||e)continue;return l}if(!a.isSuppressNavigable())return(r=this.rangeService)==null||r.setRangeToCell(o),a}}isCellEditable(i){let t=this.lookupRowNodeForCell(i);return t?i.column.isCellEditable(t):!1}getCellByPosition(i){let t=this.rowRenderer.getRowByPosition(i);return t?t.getCellCtrl(i.column):null}lookupRowNodeForCell(i){return i.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(i.rowIndex):i.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(i.rowIndex):this.paginationProxy.getRow(i.rowIndex)}navigateToNextCell(i,t,e,r){let o=e,n=!1;for(;o&&(o===e||!this.isValidNavigateCell(o));)this.gos.get("enableRtl")?t===z.LEFT&&(o=this.getLastCellOfColSpan(o)):t===z.RIGHT&&(o=this.getLastCellOfColSpan(o)),o=this.cellNavigationService.getNextCellToFocus(t,o),n=Te(o);if(n&&i&&i.key===z.UP&&(o={rowIndex:-1,rowPinned:null,column:e.column}),r){let a=this.gos.getCallback("navigateToNextCell");if(W(a)){let d=a({key:t,previousCellPosition:e,nextCellPosition:o||null,event:i});W(d)?(d.floating&&(Ce("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),d.rowPinned=d.floating),o={rowPinned:d.rowPinned,rowIndex:d.rowIndex,column:d.column}):o=null}}if(!o)return;if(o.rowIndex<0){let a=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+o.rowIndex,column:e.column},event:i||void 0,fromCell:!0});return}let s=this.getNormalisedPosition(o);s?this.focusPosition(s):this.tryToFocusFullWidthRow(o)}getNormalisedPosition(i){this.ensureCellVisible(i);let t=this.getCellByPosition(i);return t?(i=t.getCellPosition(),this.ensureCellVisible(i),i):null}tryToFocusFullWidthRow(i,t=!1){let e=this.columnModel.getAllDisplayedColumns(),r=this.rowRenderer.getRowByPosition(i);if(!r||!r.isFullWidth())return!1;let o=this.focusService.getFocusedCell(),n={rowIndex:i.rowIndex,rowPinned:i.rowPinned,column:i.column||(t?rt(e):e[0])};this.focusPosition(n);let s=o!=null?this.rowPositionUtils.before(n,o):!1,a={type:m.EVENT_FULL_WIDTH_ROW_FOCUSED,rowIndex:n.rowIndex,rowPinned:n.rowPinned,column:n.column,isFullWidthCell:!0,floating:n.rowPinned,fromBelow:s};return this.eventService.dispatchEvent(a),!0}focusPosition(i){var t;this.focusService.setFocusedCell({rowIndex:i.rowIndex,column:i.column,rowPinned:i.rowPinned,forceBrowserFocus:!0}),(t=this.rangeService)==null||t.setRangeToCell(i)}isValidNavigateCell(i){return!!this.rowPositionUtils.getRowNode(i)}getLastCellOfColSpan(i){let t=this.getCellByPosition(i);if(!t)return i;let e=t.getColSpanningList();return e.length===1?i:{rowIndex:i.rowIndex,column:rt(e),rowPinned:i.rowPinned}}ensureCellVisible(i){let t=this.gos.isGroupRowsSticky(),e=this.rowModel.getRow(i.rowIndex);!(t&&e?.sticky)&&Te(i.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(i.rowIndex),i.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(i.column)}};g([w("mouseEventService")],ji.prototype,"mouseEventService",2);g([w("paginationProxy")],ji.prototype,"paginationProxy",2);g([w("focusService")],ji.prototype,"focusService",2);g([w("columnModel")],ji.prototype,"columnModel",2);g([w("rowModel")],ji.prototype,"rowModel",2);g([w("ctrlsService")],ji.prototype,"ctrlsService",2);g([w("rowRenderer")],ji.prototype,"rowRenderer",2);g([w("headerNavigationService")],ji.prototype,"headerNavigationService",2);g([w("rowPositionUtils")],ji.prototype,"rowPositionUtils",2);g([w("cellNavigationService")],ji.prototype,"cellNavigationService",2);g([w("pinnedRowModel")],ji.prototype,"pinnedRowModel",2);g([gt("rangeService")],ji.prototype,"rangeService",2);g([U],ji.prototype,"postConstruct",1);ji=g([te("navigationService")],ji);var pm=class Zw extends ta{constructor(t){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=t}postConstruct(){this.gos.setDomData(this.getGui(),Zw.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()}addKeyDownListener(){let t=this.getGui(),e=this.params,r=o=>{bh(this.gos,o,e.node,e.column,!0)||e.onKeyDown(o)};this.addManagedListener(t,"keydown",r)}};pm.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper";g([U],pm.prototype,"postConstruct",1);var oT=pm,nT=class extends Pe{constructor(i,t,e,r,o){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=i,this.column=t.getColumn(),this.rowNode=t.getRowNode(),this.rowCtrl=t.getRowCtrl(),this.eRow=r,this.cellCtrl=t;let n=document.createElement("div");n.setAttribute("comp-id",`${this.getCompId()}`),this.setTemplateFromElement(n);let s=this.getGui();this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1);let a=(u,c)=>{c!=null&&c!=""?s.setAttribute(u,c):s.removeAttribute(u)};Bt(s,t.getCellAriaRole()),a("col-id",t.getColumnIdSanitised());let l=t.getTabIndex();l!==void 0&&a("tabindex",l.toString());let d={addOrRemoveCssClass:(u,c)=>this.addOrRemoveCssClass(u,c),setUserStyles:u=>Kf(s,u),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:u=>this.includeSelection=u,setIncludeRowDrag:u=>this.includeRowDrag=u,setIncludeDndSource:u=>this.includeDndSource=u,setRenderDetails:(u,c,h)=>this.setRenderDetails(u,c,h),setEditDetails:(u,c,h)=>this.setEditDetails(u,c,h),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};t.setComp(d,this.getGui(),this.eCellWrapper,e,o)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(i,t,e){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;let o=this.refreshWrapper(!1);this.refreshEditStyles(!1),i?!(e||o)&&this.refreshCellRenderer(i)||(this.destroyRenderer(),this.createCellRendererInstance(i)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(t))}setEditDetails(i,t,e){i?this.createCellEditorInstance(i,t,e):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(i){let t=this.includeRowDrag||this.includeDndSource||this.includeSelection,e=t||this.forceWrapper,r=e&&this.eCellWrapper==null;if(r){let d=document.createElement("div");d.setAttribute("role","presentation"),d.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=d,this.getGui().appendChild(this.eCellWrapper)}let o=!e&&this.eCellWrapper!=null;o&&(Eo(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!e);let n=!i&&e,s=n&&this.eCellValue==null;if(s){let d=document.createElement("span");d.setAttribute("role","presentation"),d.setAttribute("class","ag-cell-value"),this.eCellValue=d,this.eCellWrapper.appendChild(this.eCellValue)}let a=!n&&this.eCellValue!=null;a&&(Eo(this.eCellValue),this.eCellValue=void 0);let l=r||o||s||a;return l&&this.removeControls(),i||t&&this.addControls(),l}addControls(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(i,t,e){let r=this.editorVersion,o=i.newAgStackInstance();if(!o)return;let{params:n}=i;o.then(a=>this.afterCellEditorCreated(r,a,n,t,e)),Te(this.cellEditor)&&n.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(i){let t=this.getParentOfValue();Zt(t);let e=i!=null?ti(i,!0):null;e!=null&&(t.textContent=e)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){let{context:i}=this.beans;this.cellRenderer=i.destroyBean(this.cellRenderer),Eo(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){let{context:i}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=i.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=i.destroyBean(this.cellEditorPopupWrapper),Eo(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(i){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==i.componentClass)return!1;let t=this.cellRenderer.refresh(i.params);return t===!0||t===void 0}createCellRendererInstance(i){let e=!this.beans.gos.get("suppressAnimationFrame"),r=this.rendererVersion,{componentClass:o}=i,n=()=>{if(this.rendererVersion!==r||!this.isAlive())return;let a=i.newAgStackInstance(),l=this.afterCellRendererCreated.bind(this,r,o);a&&a.then(l)};e&&this.firstRender?this.beans.animationFrameService.createTask(n,this.rowNode.rowIndex,"createTasksP2"):n()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(i,t,e){if(!this.isAlive()||i!==this.rendererVersion){this.beans.context.destroyBean(e);return}if(this.cellRenderer=e,this.cellRendererClass=t,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){let o=this.getParentOfValue();Zt(o),o.appendChild(this.cellRendererGui)}}afterCellEditorCreated(i,t,e,r,o){if(i!==this.editorVersion){this.beans.context.destroyBean(t);return}if(t.isCancelBeforeStart&&t.isCancelBeforeStart()){this.beans.context.destroyBean(t),this.cellCtrl.stopEditing(!0);return}if(!t.getGui){console.warn(`AG Grid: cellEditor for column ${this.column.getId()} is missing getGui() method`),this.beans.context.destroyBean(t);return}this.cellEditor=t,this.cellEditorGui=t.getGui();let a=r||t.isPopup!==void 0&&t.isPopup();a?this.addPopupCellEditor(e,o):this.addInCellEditor(),this.refreshEditStyles(!0,a),t.afterGuiAttached&&t.afterGuiAttached()}refreshEditStyles(i,t){var e;this.addOrRemoveCssClass("ag-cell-inline-editing",i&&!t),this.addOrRemoveCssClass("ag-cell-popup-editing",i&&!!t),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!i||!!t),(e=this.rowCtrl)==null||e.setInlineEditingCss(i)}addInCellEditor(){let i=this.getGui();i.contains(this.beans.gos.getActiveDomElement())&&i.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(i,t){this.beans.gos.get("editType")==="fullRow"&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");let e=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new oT(i));let r=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&r.appendChild(this.cellEditorGui);let o=this.beans.popupService,n=this.beans.gos.get("stopEditingWhenCellsLoseFocus"),s=t??(e.getPopupPosition?e.getPopupPosition():"over"),a=this.beans.gos.get("enableRtl"),l={ePopup:r,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:s,alignSide:a?"right":"left",keepWithinBounds:!0},d=o.positionPopupByComponent.bind(o,l),u=this.beans.localeService.getLocaleTextFunc(),c=o.addPopup({modal:n,eChild:r,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:d,ariaLabel:u("ariaLabelCellEditor","Cell Editor")});c&&(this.hideEditorPopup=c.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){let i=this.getGui();i.contains(this.beans.gos.getActiveDomElement())&&kf()&&i.focus({preventScroll:!0}),Zt(this.getParentOfValue())}},sT=class extends Pe{constructor(i,t,e){super(),this.cellComps={},this.beans=t,this.rowCtrl=i;let r=document.createElement("div");r.setAttribute("comp-id",`${this.getCompId()}`),r.setAttribute("style",this.getInitialStyle(e)),this.setTemplateFromElement(r);let o=this.getGui(),n=o.style;this.domOrder=this.rowCtrl.getDomOrder(),Bt(o,"row");let s=this.rowCtrl.getTabIndex();s!=null&&o.setAttribute("tabindex",s.toString());let a={setDomOrder:l=>this.domOrder=l,setCellCtrls:l=>this.setCellCtrls(l),showFullWidth:l=>this.showFullWidth(l),getFullWidthCellRenderer:()=>this.getFullWidthCellRenderer(),addOrRemoveCssClass:(l,d)=>this.addOrRemoveCssClass(l,d),setUserStyles:l=>Kf(o,l),setTop:l=>n.top=l,setTransform:l=>n.transform=l,setRowIndex:l=>o.setAttribute("row-index",l),setRowId:l=>o.setAttribute("row-id",l),setRowBusinessKey:l=>o.setAttribute("row-business-key",l),refreshFullWidth:l=>this.refreshFullWidth(l)};i.setComp(a,this.getGui(),e),this.addDestroyFunc(()=>{i.unsetComp(e)})}getInitialStyle(i){let t=this.rowCtrl.getInitialTransform(i);return t?`transform: ${t}`:`top: ${this.rowCtrl.getInitialRowTop(i)}`}showFullWidth(i){let t=r=>{if(this.isAlive()){let o=r.getGui();this.getGui().appendChild(o),this.rowCtrl.setupDetailRowAutoHeight(o),this.setFullWidthRowComp(r)}else this.beans.context.destroyBean(r)},e=i.newAgStackInstance();e&&e.then(t)}setCellCtrls(i){let t=Object.assign({},this.cellComps);i.forEach(r=>{let o=r.getInstanceId();this.cellComps[o]==null?this.newCellComp(r):t[o]=null});let e=os(t).filter(r=>r!=null);this.destroyCells(e),this.ensureDomOrder(i)}ensureDomOrder(i){if(!this.domOrder)return;let t=[];i.forEach(e=>{let r=this.cellComps[e.getInstanceId()];r&&t.push(r.getGui())}),qf(this.getGui(),t)}newCellComp(i){let t=new nT(this.beans,i,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[i.getInstanceId()]=t,this.getGui().appendChild(t.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){let i=os(this.cellComps).filter(t=>t!=null);this.destroyCells(i)}setFullWidthRowComp(i){this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=i,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}getFullWidthCellRenderer(){return this.fullWidthCellRenderer}destroyCells(i){i.forEach(t=>{if(!t)return;let e=t.getCtrl().getInstanceId();this.cellComps[e]===t&&(t.detach(),t.destroy(),this.cellComps[e]=null)})}refreshFullWidth(i){let{fullWidthCellRenderer:t}=this;if(!t||!t.refresh)return!1;let e=i();return t.refresh(e)}};function aT(){let i=Pe.elementGettingCreated.getAttribute("name"),t=Qw.getRowContainerCssClasses(i),e;return i==="center"||i==="topCenter"||i==="stickyTopCenter"||i==="bottomCenter"||i==="stickyBottomCenter"?e=`<div class="${t.viewport}" ref="eViewport" role="presentation">
                <div class="${t.container}" ref="eContainer"></div>
            </div>`:e=`<div class="${t.container}" ref="eContainer"></div>`,e}var wl=class extends Pe{constructor(){super(aT()),this.rowComps={},this.name=Pe.elementGettingCreated.getAttribute("name"),this.type=eT(this.name)}postConstruct(){let i={setViewportHeight:e=>this.eViewport.style.height=e,setRowCtrls:({rowCtrls:e})=>this.setRowCtrls(e),setDomOrder:e=>{this.domOrder=e},setContainerWidth:e=>this.eContainer.style.width=e};this.createManagedBean(new Qw(this.name)).setComp(i,this.eContainer,this.eViewport)}preDestroy(){this.setRowCtrls([])}setRowCtrls(i){let t=he({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;let e=r=>{let o=r.getInstanceId(),n=t[o];if(n)this.rowComps[o]=n,delete t[o],this.ensureDomOrder(n.getGui());else{if(!r.getRowNode().displayed)return;let s=new sT(r,this.beans,this.type);this.rowComps[o]=s,this.appendRow(s.getGui())}};i.forEach(e),os(t).forEach(r=>{this.eContainer.removeChild(r.getGui()),r.destroy()}),Bt(this.eContainer,"rowgroup")}appendRow(i){this.domOrder?Gb(this.eContainer,i,this.lastPlacedElement):this.eContainer.appendChild(i),this.lastPlacedElement=i}ensureDomOrder(i){this.domOrder&&(Uf(this.eContainer,i,this.lastPlacedElement),this.lastPlacedElement=i)}};g([w("beans")],wl.prototype,"beans",2);g([Q("eViewport")],wl.prototype,"eViewport",2);g([Q("eContainer")],wl.prototype,"eContainer",2);g([U],wl.prototype,"postConstruct",1);g([ir],wl.prototype,"preDestroy",1);var gm=class{constructor(i){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=i}onDragEnter(i){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;let t=i.dragItem.columns;t&&t.forEach(e=>{e.isPrimary()&&(e.isAnyFunctionActive()||(e.isAllowValue()?this.columnsToAggregate.push(e):e.isAllowRowGroup()?this.columnsToGroup.push(e):e.isAllowPivot()&&this.columnsToPivot.push(e)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?Fe.ICON_PINNED:Fe.ICON_MOVE:null}onDragLeave(i){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(i){}onDragStop(i){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}};g([w("columnModel")],gm.prototype,"columnModel",2);g([w("gridOptionsService")],gm.prototype,"gos",2);var Vs=class{static attemptMoveColumns(i){let{isFromHeader:t,hDirection:e,xPosition:r,fromEnter:o,fakeEvent:n,pinned:s,gos:a,columnModel:l}=i,d=e===0,u=e===1,{allMovingColumns:c}=i;if(t){let I=[];c.forEach(F=>{var L;let V=null,k=F.getParent();for(;k!=null&&k.getDisplayedLeafColumns().length===1;)V=k,k=k.getParent();V!=null?(!!((L=V.getColGroupDef())!=null&&L.marryChildren)?V.getProvidedColumnGroup().getLeafColumns():V.getLeafColumns()).forEach(le=>{I.includes(le)||I.push(le)}):I.includes(F)||I.push(F)}),c=I}let h=c.slice();l.sortColumnsLikeGridColumns(h);let p=this.calculateValidMoves({movingCols:h,draggingRight:u,xPosition:r,pinned:s,gos:a,columnModel:l}),f=this.calculateOldIndex(h,l);if(p.length===0)return;let C=p[0],b=f!==null&&!o;if(t&&(b=f!==null),b&&!n&&(d&&C>=f||u&&C<=f))return;let x=l.getAllDisplayedColumns(),S=[],R=null;for(let I=0;I<p.length;I++){let F=p[I],L=l.getProposedColumnOrder(h,F);if(!l.doesOrderPassRules(L))continue;let V=L.filter(G=>x.includes(G));if(R===null)R=V;else if(!cn(V,R))break;let k=this.groupFragCount(L);S.push({move:F,fragCount:k})}if(S.length!==0)return S.sort((I,F)=>I.fragCount-F.fragCount),this.moveColumns(c,S[0].move,"uiColumnMoved",!1,l)}static moveColumns(i,t,e,r,o){return o.moveColumns(i,t,e,r),r?null:{columns:i,toIndex:t}}static calculateOldIndex(i,t){let e=t.getAllGridColumns(),r=JC(i.map(l=>e.indexOf(l))),o=r[0];return rt(r)-o!==r.length-1?null:o}static groupFragCount(i){function t(r){let o=[],n=r.getOriginalParent();for(;n!=null;)o.push(n),n=n.getOriginalParent();return o}let e=0;for(let r=0;r<i.length-1;r++){let o=t(i[r]),n=t(i[r+1]);[o,n]=o.length>n.length?[o,n]:[n,o],o.forEach(s=>{n.indexOf(s)===-1&&e++})}return e}static getDisplayedColumns(i,t){switch(t){case"left":return i.getDisplayedLeftColumns();case"right":return i.getDisplayedRightColumns();default:return i.getDisplayedCenterColumns()}}static calculateValidMoves(i){let{movingCols:t,draggingRight:e,xPosition:r,pinned:o,gos:n,columnModel:s}=i;if(n.get("suppressMovableColumns")||t.some(S=>S.getColDef().suppressMovable))return[];let l=this.getDisplayedColumns(s,o),d=s.getAllGridColumns(),u=l.filter(S=>kr(t,S)),c=l.filter(S=>!kr(t,S)),h=d.filter(S=>!kr(t,S)),p=0,f=r;if(e){let S=0;u.forEach(R=>S+=R.getActualWidth()),f-=S}if(f>0){for(let S=0;S<c.length;S++){let R=c[S];if(f-=R.getActualWidth(),f<0)break;p++}e&&p++}let C;if(p>0){let S=c[p-1];C=h.indexOf(S)+1}else C=h.indexOf(c[0]),C===-1&&(C=0);let b=[C],x=(S,R)=>S-R;if(e){let S=C+1,R=d.length-1;for(;S<=R;)b.push(S),S++;b.sort(x)}else{let S=C,R=d.length-1,I=d[S];for(;S<=R&&l.indexOf(I)<0;)S++,b.push(S),I=d[S];S=C-1;let F=0;for(;S>=F;)b.push(S),S--;b.sort(x).reverse()}return b}static normaliseX(i,t,e,r,o){let n=o.getHeaderRowContainerCtrl(t).getViewport();return e&&(i-=n.getBoundingClientRect().left),r.get("enableRtl")&&(i=n.clientWidth-i),t==null&&(i+=o.get("center").getCenterViewportScrollLeft()),i}},Sl=class{constructor(i){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=i,this.isCenterContainer=!W(i)}init(){this.ctrlsService.whenReady(i=>{this.gridBodyCon=i.gridBodyCtrl})}getIconName(){return this.pinned?Fe.ICON_PINNED:Fe.ICON_MOVE}onDragEnter(i){let t=i.dragItem.columns;if(i.dragSource.type===0)this.setColumnsVisible(t,!0,"uiColumnDragged");else{let r=i.dragItem.visibleState,o=(t||[]).filter(n=>r[n.getId()]);this.setColumnsVisible(o,!0,"uiColumnDragged")}this.setColumnsPinned(t,this.pinned,"uiColumnDragged"),this.onDragging(i,!0,!0)}onDragLeave(){this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(i,t,e){if(i){let r=i.filter(o=>!o.getColDef().lockVisible);this.columnModel.setColumnsVisible(r,t,e)}}setColumnsPinned(i,t,e){if(i){let r=i.filter(o=>!o.getColDef().lockPinned);this.columnModel.setColumnsPinned(r,t,e)}}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}checkCenterForScrolling(i){if(this.isCenterContainer){let t=this.ctrlsService.get("center"),e=t.getCenterViewportScrollLeft(),r=e+t.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=i<e+50,this.needToMoveLeft=i>r-50):(this.needToMoveLeft=i<e+50,this.needToMoveRight=i>r-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}}onDragging(i=this.lastDraggingEvent,t=!1,e=!1,r=!1){var o;if(r){if(this.lastMovedInfo){let{columns:u,toIndex:c}=this.lastMovedInfo;Vs.moveColumns(u,c,"uiColumnMoved",!0,this.columnModel)}return}if(this.lastDraggingEvent=i,Te(i.hDirection))return;let n=Vs.normaliseX(i.x,this.pinned,!1,this.gos,this.ctrlsService);t||this.checkCenterForScrolling(n);let s=this.normaliseDirection(i.hDirection),a=i.dragSource.type,l=((o=i.dragSource.getDragItem().columns)==null?void 0:o.filter(u=>u.getColDef().lockPinned?u.getPinned()==this.pinned:!0))||[],d=Vs.attemptMoveColumns({allMovingColumns:l,isFromHeader:a===1,hDirection:s,xPosition:n,pinned:this.pinned,fromEnter:t,fakeEvent:e,gos:this.gos,columnModel:this.columnModel});d&&(this.lastMovedInfo=d)}normaliseDirection(i){if(this.gos.get("enableRtl"))switch(i){case 0:return 1;case 1:return 0;default:console.error(`AG Grid: Unknown direction ${i}`)}else return i}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(Fe.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(Fe.ICON_RIGHT,!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(Fe.ICON_MOVE))}moveInterval(){let i;this.intervalCount++,i=10+this.intervalCount*5,i>100&&(i=100);let t=null,e=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=e.scrollHorizontally(-i):this.needToMoveRight&&(t=e.scrollHorizontally(i)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;let o=this.lastDraggingEvent.dragItem.columns.filter(n=>!n.getColDef().lockPinned);if(o.length>0&&(this.dragAndDropService.setGhostIcon(Fe.ICON_PINNED),this.failedMoveAttempts>7)){let n=this.needToMoveLeft?"left":"right";this.setColumnsPinned(o,n,"uiColumnDragged"),this.dragAndDropService.nudge()}}}};g([w("columnModel")],Sl.prototype,"columnModel",2);g([w("dragAndDropService")],Sl.prototype,"dragAndDropService",2);g([w("gridOptionsService")],Sl.prototype,"gos",2);g([w("ctrlsService")],Sl.prototype,"ctrlsService",2);g([U],Sl.prototype,"init",1);var _l=class extends j{constructor(i,t){super(),this.pinned=i,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady(i=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[i.gridBodyCtrl.getBodyViewportElement(),i.left.getContainerElement()],[i.bottomLeft.getContainerElement()],[i.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[i.gridBodyCtrl.getBodyViewportElement(),i.right.getContainerElement()],[i.bottomRight.getContainerElement()],[i.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[i.gridBodyCtrl.getBodyViewportElement(),i.center.getViewportElement()],[i.bottomCenter.getViewportElement()],[i.topCenter.getViewportElement()]];break}})}isInterestedIn(i){return i===1||i===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}init(){this.moveColumnFeature=this.createManagedBean(new Sl(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new gm(this.pinned)),this.dragAndDropService.addDropTarget(this)}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(i){return this.columnModel.isPivotMode()&&i.dragSource.type===0}onDragEnter(i){this.currentDropListener=this.isDropColumnInPivotMode(i)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(i)}onDragLeave(i){this.currentDropListener.onDragLeave(i)}onDragging(i){this.currentDropListener.onDragging(i)}onDragStop(i){this.currentDropListener.onDragStop(i)}};g([w("dragAndDropService")],_l.prototype,"dragAndDropService",2);g([w("columnModel")],_l.prototype,"columnModel",2);g([w("ctrlsService")],_l.prototype,"ctrlsService",2);g([U],_l.prototype,"postConstruct",1);g([U],_l.prototype,"init",1);var xl=class Jw extends um{constructor(t){super(Jw.TEMPLATE,t),this.headerCompVersion=0,this.column=t.getColumnGroupChild(),this.pinned=t.getPinned()}postConstruct(){let t=this.getGui();((n,s)=>{s!=null&&s!=""?t.setAttribute(n,s):t.removeAttribute(n)})("col-id",this.column.getColId());let r={setWidth:n=>t.style.width=n,addOrRemoveCssClass:(n,s)=>this.addOrRemoveCssClass(n,s),setAriaSort:n=>n?Db(t,n):Tb(t),setUserCompDetails:n=>this.setUserCompDetails(n),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(r,this.getGui(),this.eResize,this.eHeaderCompWrapper);let o=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",o)}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(t){this.headerCompVersion++;let e=this.headerCompVersion;t.newAgStackInstance().then(r=>this.afterCompCreated(e,r))}afterCompCreated(t,e){if(t!=this.headerCompVersion||!this.isAlive()){this.destroyBean(e);return}this.destroyHeaderComp(),this.headerComp=e,this.headerCompGui=e.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}};xl.TEMPLATE=`<div class="ag-header-cell" role="columnheader">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`;g([Q("eResize")],xl.prototype,"eResize",2);g([Q("eHeaderCompWrapper")],xl.prototype,"eHeaderCompWrapper",2);g([U],xl.prototype,"postConstruct",1);g([ir],xl.prototype,"destroyHeaderComp",1);var lT=xl,op=class e0 extends um{constructor(t){super(e0.TEMPLATE,t)}postConstruct(){let t=this.getGui(),e=(o,n)=>n!=null?t.setAttribute(o,n):t.removeAttribute(o);t.setAttribute("col-id",this.ctrl.getColId());let r={addOrRemoveCssClass:(o,n)=>this.addOrRemoveCssClass(o,n),setResizableDisplayed:o=>qe(this.eResize,o),setWidth:o=>t.style.width=o,setAriaExpanded:o=>e("aria-expanded",o),setUserCompDetails:o=>this.setUserCompDetails(o),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(r,t,this.eResize)}setUserCompDetails(t){t.newAgStackInstance().then(e=>this.afterHeaderCompCreated(e))}afterHeaderCompCreated(t){let e=()=>this.destroyBean(t);if(!this.isAlive()){e();return}let r=this.getGui(),o=t.getGui();r.appendChild(o),this.addDestroyFunc(e),this.headerGroupComp=t,this.ctrl.setDragSource(r)}};op.TEMPLATE=`<div class="ag-header-group-cell" role="columnheader">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`;g([Q("eResize")],op.prototype,"eResize",2);g([U],op.prototype,"postConstruct",1);var dT=op;var fm=class extends Pe{constructor(i){super(),this.headerComps={},this.ctrl=i,this.setTemplate(`<div class="${this.ctrl.getHeaderRowClass()}" role="row"></div>`)}init(){Ff(this.getGui(),this.ctrl.getAriaRowIndex());let i={setHeight:t=>this.getGui().style.height=t,setTop:t=>this.getGui().style.top=t,setHeaderCtrls:(t,e)=>this.setHeaderCtrls(t,e),setWidth:t=>this.getGui().style.width=t};this.ctrl.setComp(i)}destroyHeaderCtrls(){this.setHeaderCtrls([],!1)}setHeaderCtrls(i,t){if(!this.isAlive())return;let e=this.headerComps;if(this.headerComps={},i.forEach(r=>{let o=r.getInstanceId(),n=e[o];delete e[o],n==null&&(n=this.createHeaderComp(r),this.getGui().appendChild(n.getGui())),this.headerComps[o]=n}),Wi(e,(r,o)=>{this.getGui().removeChild(o.getGui()),this.destroyBean(o)}),t){let r=os(this.headerComps);r.sort((n,s)=>{let a=n.getCtrl().getColumnGroupChild().getLeft(),l=s.getCtrl().getColumnGroupChild().getLeft();return a-l});let o=r.map(n=>n.getGui());qf(this.getGui(),o)}}createHeaderComp(i){let t;switch(this.ctrl.getType()){case"group":t=new dT(i);break;case"filter":t=new ED(i);break;default:t=new lT(i);break}return this.createBean(t),t.setParentComponent(this),t}};g([U],fm.prototype,"init",1);g([ir],fm.prototype,"destroyHeaderCtrls",1);var uT=0,Gn=class t0 extends j{constructor(t,e,r){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=t,this.parentRowCtrl=r,this.beans=e,this.instanceId=t.getUniqueId()+"-"+uT++}postConstruct(){this.addManagedPropertyListeners(["suppressHeaderFocus"],()=>this.refreshTabIndex())}shouldStopEventPropagation(t){let{headerRowIndex:e,column:r}=this.focusService.getFocusedHeader();return Xb(this.gos,t,e,r)}getWrapperHasFocus(){return this.gos.getActiveDomElement()===this.eGui}setGui(t){this.eGui=t,this.addDomData(),this.addManagedListener(this.beans.eventService,m.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onDisplayedColumnsChanged(){!this.comp||!this.column||(this.refreshFirstAndLastStyles(),this.refreshAriaColIndex())}refreshFirstAndLastStyles(){let{comp:t,column:e,beans:r}=this;tp.refreshFirstAndLastStyles(t,e,r.columnModel)}refreshAriaColIndex(){let{beans:t,column:e}=this,r=t.columnModel.getAriaColumnIndex(e);zf(this.eGui,r)}addResizeAndMoveKeyboardListeners(){this.resizeFeature&&(this.addManagedListener(this.eGui,"keydown",this.onGuiKeyDown.bind(this)),this.addManagedListener(this.eGui,"keyup",this.onGuiKeyUp.bind(this)))}refreshTabIndex(){this.gos.get("suppressHeaderFocus")?this.eGui.removeAttribute("tabindex"):this.eGui.setAttribute("tabindex","-1")}onGuiKeyDown(t){var e;let r=this.gos.getActiveDomElement(),o=t.key===z.LEFT||t.key===z.RIGHT;if(this.isResizing&&(t.preventDefault(),t.stopImmediatePropagation()),r!==this.eGui||!t.shiftKey&&!t.altKey||((this.isResizing||o)&&(t.preventDefault(),t.stopImmediatePropagation()),!o))return;let n=t.key===z.LEFT!==this.gos.get("enableRtl"),s=Tw[n?"Left":"Right"];if(t.altKey){this.isResizing=!0,this.resizeMultiplier+=1;let a=this.getViewportAdjustedResizeDiff(t);this.resizeHeader(a,t.shiftKey),(e=this.resizeFeature)==null||e.toggleColumnResizing(!0)}else this.moveHeader(s)}getViewportAdjustedResizeDiff(t){let e=this.getResizeDiff(t);if(this.column.getPinned()){let o=this.pinnedWidthService.getPinnedLeftWidth(),n=this.pinnedWidthService.getPinnedRightWidth(),s=Zs(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(o+n+e>s)if(s>o+n)e=s-o-n;else return 0}return e}getResizeDiff(t){let e=t.key===z.LEFT!==this.gos.get("enableRtl"),r=this.column.getPinned(),o=this.gos.get("enableRtl");return r&&o!==(r==="right")&&(e=!e),(e?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=setTimeout(()=>{var t;(t=this.resizeFeature)==null||t.toggleColumnResizing(!1)},150))}handleKeyDown(t){let e=this.getWrapperHasFocus();switch(t.key){case z.PAGE_DOWN:case z.PAGE_UP:case z.PAGE_HOME:case z.PAGE_END:e&&t.preventDefault()}}addDomData(){let t=t0.DOM_DATA_KEY_HEADER_CTRL;this.gos.setDomData(this.eGui,t,this),this.addDestroyFunc(()=>this.gos.setDomData(this.eGui,t,null))}getGui(){return this.eGui}focus(t){return this.eGui?(this.lastFocusEvent=t||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getInstanceId(){return this.instanceId}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(t,e,r){let o=t??e;this.gos.get("preventDefaultOnContextMenu")&&o.preventDefault();let n=r instanceof yt?r:void 0;this.menuService.isHeaderContextMenuEnabled(n)&&this.menuService.showHeaderContextMenu(n,t,e),this.dispatchColumnMouseEvent(m.EVENT_COLUMN_HEADER_CONTEXT_MENU,r)}dispatchColumnMouseEvent(t,e){let r={type:t,column:e};this.eventService.dispatchEvent(r)}destroy(){super.destroy(),this.removeDragSource(),this.comp=null,this.column=null,this.resizeFeature=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null,this.eGui=null}};Gn.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";g([w("pinnedWidthService")],Gn.prototype,"pinnedWidthService",2);g([w("focusService")],Gn.prototype,"focusService",2);g([w("userComponentFactory")],Gn.prototype,"userComponentFactory",2);g([w("ctrlsService")],Gn.prototype,"ctrlsService",2);g([w("dragAndDropService")],Gn.prototype,"dragAndDropService",2);g([w("menuService")],Gn.prototype,"menuService",2);g([U],Gn.prototype,"postConstruct",1);var np=Gn,sp=class extends j{constructor(i,t,e,r){super(),this.columnOrGroup=i,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=r,this.beans=e}setColsSpanning(i){this.colsSpanning=i,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?rt(this.colsSpanning):this.columnOrGroup}postConstruct(){this.addManagedListener(this.columnOrGroup,yt.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,m.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onLeftChanged.bind(this))}setLeftFirstTime(){let i=this.beans.gos.get("suppressColumnMoveAnimation"),t=W(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!i?this.animateInLeft():this.onLeftChanged()}animateInLeft(){let i=this.getColumnOrGroup(),t=i.getLeft(),e=i.getOldLeft(),r=this.modifyLeftForPrintLayout(i,e),o=this.modifyLeftForPrintLayout(i,t);this.setLeft(r),this.actualLeft=o,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===o&&this.setLeft(o)})}onLeftChanged(){let i=this.getColumnOrGroup(),t=i.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(i,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(i,t){if(!this.beans.gos.isDomLayout("print")||i.getPinned()==="left")return t;let r=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(i.getPinned()==="right"){let o=this.beans.columnModel.getBodyContainerWidth();return r+o+t}return r+t}setLeft(i){W(i)&&(this.eCell.style.left=`${i}px`);let t;if(this.columnOrGroup instanceof yt)t=this.columnOrGroup;else{let r=this.columnOrGroup.getLeafColumns();if(!r.length)return;r.length>1&&Eb(this.ariaEl,r.length),t=r[0]}}};g([U],sp.prototype,"postConstruct",1);var uu=class extends j{constructor(i,t){super(),this.columns=i,this.element=t}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}};g([w("columnHoverService")],uu.prototype,"columnHoverService",2);g([U],uu.prototype,"postConstruct",1);var cT=class extends np{constructor(i,t,e){super(i,t,e),this.iconCreated=!1,this.column=i}setComp(i,t,e,r){this.comp=i,this.eButtonShowMainFilter=e,this.eFloatingFilterBody=r,this.setGui(t),this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this)),this.setupFilterChangedListener(),this.addManagedListener(this.column,yt.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))}resizeHeader(){}moveHeader(){}setupActive(){let i=this.column.getColDef(),t=!!i.filter,e=!!i.floatingFilter;this.active=t&&e}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;let i=It("filter",this.gos,this.column);i&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(i))}setupFocus(){this.createManagedBean(new cs(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){let i=this.localeService.getLocaleTextFunc();Vr(this.eButtonShowMainFilter,i("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(i){if(this.gos.getActiveDomElement()===this.eGui)return;let r=this.focusService.findNextFocusableElement(this.eGui,null,i.shiftKey);if(r){this.beans.headerNavigationService.scrollToColumn(this.column),i.preventDefault(),r.focus();return}let o=this.findNextColumnWithFloatingFilter(i.shiftKey);o&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:o},event:i})&&i.preventDefault()}findNextColumnWithFloatingFilter(i){let t=this.beans.columnModel,e=this.column;do if(e=i?t.getDisplayedColBefore(e):t.getDisplayedColAfter(e),!e)break;while(!e.getColDef().filter||!e.getColDef().floatingFilter);return e}handleKeyDown(i){super.handleKeyDown(i);let t=this.getWrapperHasFocus();switch(i.key){case z.UP:case z.DOWN:t||i.preventDefault();case z.LEFT:case z.RIGHT:if(t)return;i.stopPropagation();case z.ENTER:t&&this.focusService.focusInto(this.eGui)&&i.preventDefault();break;case z.ESCAPE:t||this.eGui.focus()}}onFocusIn(i){if(this.eGui.contains(i.relatedTarget))return;let e=!!i.relatedTarget&&!i.relatedTarget.classList.contains("ag-floating-filter"),r=!!i.relatedTarget&&Os(i.relatedTarget,"ag-floating-filter");if(e&&r&&i.target===this.eGui){let n=this.lastFocusEvent,s=!!(n&&n.key===z.TAB);if(n&&s){let a=n.shiftKey;this.focusService.focusInto(this.eGui,a)}}let o=this.getRowIndex();this.beans.focusService.setFocusedHeader(o,this.column)}setupHover(){this.createManagedBean(new uu([this.column],this.eGui));let i=()=>{if(!this.gos.get("columnHoverHighlight"))return;let t=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",t)};this.addManagedListener(this.eventService,m.EVENT_COLUMN_HOVER_CHANGED,i),i()}setupLeft(){let i=new sp(this.column,this.eGui,this.beans);this.createManagedBean(i)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){if(!this.active)return;let i=this.beans.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());i&&this.setCompDetails(i)}setCompDetails(i){this.userCompDetails=i,this.comp.setCompDetails(i)}showParentFilter(){let i=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:i,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(){if(!this.active)return;let{filterManager:i}=this.beans,t=e=>{if(e?.source==="filterDestroyed"&&this.context.isDestroyed())return;let r=this.comp.getFloatingFilterComp();r&&r.then(o=>{var n;if(o){let s=i.getCurrentFloatingFilterParentModel(this.column);o.onParentModelChanged(s,e?this.gos.addGridCommonParams({columns:(n=e.columns)!=null?n:[],type:m.EVENT_FILTER_CHANGED,source:e.source==="api"?"api":"columnFilter"}):null)}})};this.destroySyncListener=this.addManagedListener(this.column,yt.EVENT_FILTER_CHANGED,t),i.isFilterActive(this.column)&&t(null)}setupWidth(){let i=()=>{let t=`${this.column.getActualWidth()}px`;this.comp.setWidth(t)};this.addManagedListener(this.column,yt.EVENT_WIDTH_CHANGED,i),i()}setupFilterChangedListener(){this.active&&(this.destroyFilterChangedListener=this.addManagedListener(this.column,yt.EVENT_FILTER_CHANGED,this.updateFilterButton.bind(this)),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){let i=this.beans.filterManager.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(i),this.highlightFilterButtonWhenActive&&i&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(){var i,t;let e=this.active;this.setupActive();let r=!e&&this.active;e&&!this.active&&((i=this.destroySyncListener)==null||i.call(this),(t=this.destroyFilterChangedListener)==null||t.call(this));let o=this.active?this.beans.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,n=this.comp.getFloatingFilterComp();!n||!o?this.updateCompDetails(o,r):n.then(s=>{var a;!s||this.beans.filterManager.areFilterCompsDifferent((a=this.userCompDetails)!=null?a:null,o)?this.updateCompDetails(o,r):this.updateFloatingFilterParams(o)})}updateCompDetails(i,t){this.isAlive()&&(this.setCompDetails(i),this.setupFilterButton(),this.setupUi(),t&&(this.setupSyncWithFilter(),this.setupFilterChangedListener()))}updateFloatingFilterParams(i){var t;if(!i)return;let e=i.params;(t=this.comp.getFloatingFilterComp())==null||t.then(r=>{let o=!1;r?.refresh&&typeof r.refresh=="function"&&r.refresh(e)!==null&&(o=!0),!o&&r?.onParamsUpdated&&typeof r.onParamsUpdated=="function"&&r.onParamsUpdated(e)!==null&&Ce("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.destroySyncListener=null,this.destroyFilterChangedListener=null}},El=class extends j{constructor(i,t,e,r,o){super(),this.pinned=i,this.column=t,this.eResize=e,this.comp=r,this.ctrl=o}postConstruct(){let i=[],t,e,r=()=>{if(qe(this.eResize,t),!t)return;let s=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(i.push(s),e){let a=this.gos.get("skipHeaderOnAutoSize"),l=()=>{this.columnModel.autoSizeColumn(this.column,"uiColumnResized",a)};this.eResize.addEventListener("dblclick",l);let d=new Di(this.eResize);d.addEventListener(Di.EVENT_DOUBLE_TAP,l),i.push(()=>{this.eResize.removeEventListener("dblclick",l),d.removeEventListener(Di.EVENT_DOUBLE_TAP,l),d.destroy()})}},o=()=>{i.forEach(s=>s()),i.length=0},n=()=>{let s=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(s!==t||a!==e)&&(t=s,e=a,o(),r())};n(),this.addDestroyFunc(o),this.ctrl.addRefreshFunction(n)}onResizing(i,t){let{column:e,lastResizeAmount:r,resizeStartWidth:o}=this,n=this.normaliseResizeAmount(t),s=o+n,a=[{key:e,newWidth:s}];if(this.column.getPinned()){let l=this.pinnedWidthService.getPinnedLeftWidth(),d=this.pinnedWidthService.getPinnedRightWidth(),u=Zs(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(l+d+(n-r)>u)return}this.lastResizeAmount=n,this.columnModel.setColumnWidths(a,this.resizeWithShiftKey,i,"uiColumnResized"),i&&this.toggleColumnResizing(!1)}onResizeStart(i){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=i,this.toggleColumnResizing(!0)}toggleColumnResizing(i){this.comp.addOrRemoveCssClass("ag-column-resizing",i)}normaliseResizeAmount(i){let t=i,e=this.pinned!=="left",r=this.pinned==="right";return this.gos.get("enableRtl")?e&&(t*=-1):r&&(t*=-1),t}};g([w("horizontalResizeService")],El.prototype,"horizontalResizeService",2);g([w("pinnedWidthService")],El.prototype,"pinnedWidthService",2);g([w("ctrlsService")],El.prototype,"ctrlsService",2);g([w("columnModel")],El.prototype,"columnModel",2);g([U],El.prototype,"postConstruct",1);var mm=class extends j{constructor(i){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=i}onSpaceKeyDown(i){let t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(this.gos.getActiveDomElement())&&(i.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(i){this.headerCellCtrl=i,this.cbSelectAll=this.createManagedBean(new Kh),this.cbSelectAll.addCssClass("ag-header-select-all"),Bt(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,m.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.addManagedListener(this.eventService,m.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,m.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,m.EVENT_PAGINATION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,m.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,m.EVENT_FIELD_VALUE_CHANGED,this.onCbSelectAll.bind(this)),tu(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;let i=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(i);let t=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){let i=this.localeService.getLocaleTextFunc(),e=this.cbSelectAll.getValue()?i("ariaChecked","checked"):i("ariaUnchecked","unchecked"),r=i("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${r} (${e})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(`${r} (${e})`),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(i){return this.gos.get("rowSelection")==="multiple"?!0:(console.warn(`AG Grid: ${i} is only available if using 'multiple' rowSelection.`),!1)}checkRightRowModelType(i){let t=this.rowModel.getType();return t==="clientSide"||t==="serverSide"?!0:(console.warn(`AG Grid: ${i} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;let i=this.cbSelectAll.getValue(),t=this.isFilteredOnly(),e=this.isCurrentPageOnly(),r="uiSelectAll";e?r="uiSelectAllCurrentPage":t&&(r="uiSelectAllFiltered");let o={source:r,justFiltered:t,justCurrentPage:e};i?this.selectionService.selectAllRowNodes(o):this.selectionService.deselectAllRowNodes(o)}isCheckboxSelection(){let i=this.column.getColDef().headerCheckboxSelection;if(typeof i=="function"){let t=i,e=this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()});i=t(e)}return i?this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection"):!1}isFilteredOnly(){return!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){return!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}};g([w("rowModel")],mm.prototype,"rowModel",2);g([w("selectionService")],mm.prototype,"selectionService",2);var hT=class extends np{constructor(i,t,e){super(i,t,e),this.refreshFunctions=[],this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=i}setComp(i,t,e,r){this.comp=i,this.setGui(t),this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(r),this.addColumnHoverListener(),this.setupFilterClass(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.resizeFeature=this.createManagedBean(new El(this.getPinned(),this.column,e,i,this)),this.createManagedBean(new uu([this.column],t)),this.createManagedBean(new sp(this.column,t,this.beans)),this.createManagedBean(new cs(t,{shouldStopEventPropagation:o=>this.shouldStopEventPropagation(o),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(),this.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],this.refresh.bind(this)),this.addManagedListener(this.column,yt.EVENT_COL_DEF_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,m.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,m.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,m.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this)),this.addManagedListener(this.eventService,m.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}resizeHeader(i,t){var e,r;if(!this.column.isResizable())return;let o=this.column.getActualWidth(),n=(e=this.column.getMinWidth())!=null?e:0,s=(r=this.column.getMaxWidth())!=null?r:Number.MAX_SAFE_INTEGER,a=Math.min(Math.max(o+i,n),s);this.beans.columnModel.setColumnWidths([{key:this.column,newWidth:a}],t,!0,"uiColumnResized")}moveHeader(i){let{eGui:t,column:e,gos:r,ctrlsService:o}=this,n=this.getPinned(),s=t.getBoundingClientRect().left,a=e.getActualWidth(),l=r.get("enableRtl"),d=i===0!==l,u=Vs.normaliseX(d?s-20:s+a+20,n,!0,r,o);Vs.attemptMoveColumns({allMovingColumns:[e],isFromHeader:!0,hDirection:i,xPosition:u,pinned:n,fromEnter:!1,fakeEvent:!1,gos:r,columnModel:this.beans.columnModel}),o.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(e,"auto")}setupUserComp(){let i=this.lookupUserCompDetails();this.setCompDetails(i)}setCompDetails(i){this.userCompDetails=i,this.comp.setUserCompDetails(i)}lookupUserCompDetails(){let i=this.createParams(),t=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(t,i)}createParams(){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:t=>{this.menuService.showColumnMenu({column:this.column,buttonElement:t,positionBy:"button"})},showColumnMenuAfterMouseClick:t=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:t,positionBy:"mouse"})},showFilter:t=>{this.menuService.showFilterMenu({column:this.column,buttonElement:t,containerType:"columnFilter",positionBy:"button"})},progressSort:t=>{this.beans.sortController.progressSort(this.column,!!t,"uiColumnSorted")},setSort:(t,e)=>{this.beans.sortController.setSortForColumn(this.column,t,!!e,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(t,e)=>{this.setupTooltip(t,e)}})}setupSelectAll(){this.selectAllFeature=this.createManagedBean(new mm(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(i){super.handleKeyDown(i),i.key===z.SPACE&&this.selectAllFeature.onSpaceKeyDown(i),i.key===z.ENTER&&this.onEnterKeyDown(i),i.key===z.DOWN&&i.altKey&&this.showMenuOnKeyPress(i,!1)}onEnterKeyDown(i){if(i.ctrlKey||i.metaKey)this.showMenuOnKeyPress(i,!0);else if(this.sortable){let t=i.shiftKey;this.beans.sortController.progressSort(this.column,t,"uiColumnSorted")}}showMenuOnKeyPress(i,t){let e=this.comp.getUserCompInstance();!e||!(e instanceof lf)||e.onMenuKeyboardShortcut(t)&&i.preventDefault()}onFocusIn(i){if(!this.getGui().contains(i.relatedTarget)){let t=this.getRowIndex();this.focusService.setFocusedHeader(t,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(i){this.getGui().contains(i.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(i,t){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let e=this.gos.get("tooltipShowMode")==="whenTruncated",r=this.eGui,o=this.column.getColDef();!t&&e&&!o.headerComponent&&(t=()=>{let a=r.querySelector(".ag-header-cell-text");return a?a.scrollWidth>a.clientWidth:!0});let n={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>r,getLocation:()=>"header",getTooltipValue:()=>i??this.column.getColDef().headerTooltip,shouldDisplayTooltip:t},s=this.createManagedBean(new Nn(n));this.refreshFunctions.push(()=>s.refreshToolTip())}setupClassesFromColDef(){let i=()=>{let t=this.column.getColDef(),e=tp.getHeaderClassesFromColDef(t,this.gos,this.column,null),r=this.userHeaderClasses;this.userHeaderClasses=new Set(e),e.forEach(o=>{r.has(o)?r.delete(o):this.comp.addOrRemoveCssClass(o,!0)}),r.forEach(o=>this.comp.addOrRemoveCssClass(o,!1))};this.refreshFunctions.push(i),i()}setDragSource(i){if(this.dragSourceElement=i,this.removeDragSource(),!i||!this.draggable)return;let{column:t,beans:e,displayName:r,dragAndDropService:o,gos:n}=this,{columnModel:s}=e,a=!this.gos.get("suppressDragLeaveHidesColumns"),l=this.dragSource={type:1,eElement:i,getDefaultIconName:()=>a?Fe.ICON_HIDE:Fe.ICON_NOT_ALLOWED,getDragItem:()=>this.createDragItem(t),dragItemName:r,onDragStarted:()=>{a=!n.get("suppressDragLeaveHidesColumns"),t.setMoving(!0,"uiColumnMoved")},onDragStopped:()=>t.setMoving(!1,"uiColumnMoved"),onGridEnter:d=>{var u;if(a){let c=((u=d?.columns)==null?void 0:u.filter(h=>!h.getColDef().lockVisible))||[];s.setColumnsVisible(c,!0,"uiColumnMoved")}},onGridExit:d=>{var u;if(a){let c=((u=d?.columns)==null?void 0:u.filter(h=>!h.getColDef().lockVisible))||[];s.setColumnsVisible(c,!1,"uiColumnMoved")}}};o.addDragSource(l,!0)}createDragItem(i){let t={};return t[i.getId()]=i.isVisible(),{columns:[i],visibleState:t}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}addRefreshFunction(i){this.refreshFunctions.push(i)}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(i=>i())}refreshHeaderComp(){let i=this.lookupUserCompDetails();(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==i.componentClass?this.attemptHeaderCompRefresh(i.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(i)}attemptHeaderCompRefresh(i){let t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(i)}calculateDisplayName(){return this.beans.columnModel.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){let i=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!i.suppressMovable&&!i.lockPosition)||!!i.enableRowGroup||!!i.enablePivot}onColumnRowGroupChanged(){this.checkDisplayName()}onColumnPivotChanged(){this.checkDisplayName()}onColumnValueChanged(){this.checkDisplayName()}setupWidth(){let i=()=>{let t=this.column.getActualWidth();this.comp.setWidth(`${t}px`)};this.addManagedListener(this.column,yt.EVENT_WIDTH_CHANGED,i),i()}setupMovingCss(){let i=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};this.addManagedListener(this.column,yt.EVENT_MOVING_CHANGED,i),i()}setupMenuClass(){let i=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};this.addManagedListener(this.column,yt.EVENT_MENU_VISIBLE_CHANGED,i),i()}setupSortableClass(){let i=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};i(),this.addRefreshFunction(i),this.addManagedListener(this.eventService,yt.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))}setupFilterClass(){let i=()=>{let t=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",t),this.refreshAria()};this.addManagedListener(this.column,yt.EVENT_FILTER_ACTIVE_CHANGED,i),i()}setupWrapTextClass(){let i=()=>{let t=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",t)};i(),this.addRefreshFunction(i)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){let{eGui:i,column:t,comp:e,beans:r}=this;if(!t.isSpanHeaderHeight()){i.style.removeProperty("top"),i.style.removeProperty("height"),e.addOrRemoveCssClass("ag-header-span-height",!1),e.addOrRemoveCssClass("ag-header-span-total",!1);return}let{numberOfParents:o,isSpanningTotal:n}=this.column.getColumnGroupPaddingInfo();e.addOrRemoveCssClass("ag-header-span-height",o>0);let{columnModel:s}=r,a=s.getColumnHeaderRowHeight();if(o===0){e.addOrRemoveCssClass("ag-header-span-total",!1),i.style.setProperty("top","0px"),i.style.setProperty("height",`${a}px`);return}e.addOrRemoveCssClass("ag-header-span-total",n);let d=s.isPivotMode()?s.getPivotGroupHeaderHeight():s.getGroupHeaderHeight(),u=o*d;i.style.setProperty("top",`${-u}px`),i.style.setProperty("height",`${a+u}px`)}setupAutoHeight(i){let{columnModel:t,resizeObserverService:e}=this.beans,r=d=>{if(!this.isAlive())return;let{paddingTop:u,paddingBottom:c,borderBottomWidth:h,borderTopWidth:p}=us(this.getGui()),f=u+c+h+p,b=i.offsetHeight+f;if(d<5){let x=this.beans.gos.getDocument(),S=!x||!x.contains(i),R=b==0;if(S||R){window.setTimeout(()=>r(d+1),0);return}}t.setColumnHeaderHeight(this.column,b)},o=!1,n,s=()=>{let d=this.column.isAutoHeaderHeight();d&&!o&&a(),!d&&o&&l()},a=()=>{o=!0,r(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),n=e.observeResize(i,()=>r(0))},l=()=>{o=!1,n&&n(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),n=void 0};s(),this.addDestroyFunc(()=>l()),this.addManagedListener(this.column,yt.EVENT_WIDTH_CHANGED,()=>o&&r(0)),this.addManagedListener(this.eventService,yt.EVENT_SORT_CHANGED,()=>{o&&window.setTimeout(()=>r(0))}),this.addRefreshFunction(s)}refreshAriaSort(){if(this.sortable){let i=this.localeService.getLocaleTextFunc(),t=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(fb(t)),this.setAriaDescriptionProperty("sort",i("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){let i=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",i("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){let i=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",i("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){let i=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",i("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(i,t){t!=null?this.ariaDescriptionProperties.set(i,t):this.ariaDescriptionProperties.delete(i)}announceAriaDescription(){if(!this.eGui.contains(this.beans.gos.getActiveDomElement()))return;let i=Array.from(this.ariaDescriptionProperties.keys()).sort((t,e)=>t==="filter"?-1:e.charCodeAt(0)-t.charCodeAt(0)).map(t=>this.ariaDescriptionProperties.get(t)).join(". ");this.beans.ariaAnnouncementService.announceValue(i)}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(){let i=()=>{if(!this.gos.get("columnHoverHighlight"))return;let t=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",t)};this.addManagedListener(this.eventService,m.EVENT_COLUMN_HOVER_CHANGED,i),i()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(){let i=r=>this.handleMouseOverChange(r.type==="mouseenter"),t=()=>this.dispatchColumnMouseEvent(m.EVENT_COLUMN_HEADER_CLICKED,this.column),e=r=>this.handleContextMenuMouseEvent(r,void 0,this.column);this.addManagedListener(this.getGui(),"mouseenter",i),this.addManagedListener(this.getGui(),"mouseleave",i),this.addManagedListener(this.getGui(),"click",t),this.addManagedListener(this.getGui(),"contextmenu",e)}handleMouseOverChange(i){this.setActiveHeader(i);let e={type:i?m.EVENT_COLUMN_HEADER_MOUSE_OVER:m.EVENT_COLUMN_HEADER_MOUSE_LEAVE,column:this.column};this.eventService.dispatchEvent(e)}setActiveHeader(i){this.comp.addOrRemoveCssClass("ag-header-active",i)}getAnchorElementForMenu(i){let t=this.comp.getUserCompInstance();return t instanceof lf?t.getAnchorElementForMenu(i):this.getGui()}destroy(){super.destroy(),this.refreshFunctions=null,this.selectAllFeature=null,this.dragSourceElement=null,this.userCompDetails=null,this.userHeaderClasses=null,this.ariaDescriptionProperties=null}},cu=class extends j{constructor(i,t,e,r){super(),this.eResize=t,this.comp=i,this.pinned=e,this.columnGroup=r}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}let i=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(i),!this.gos.get("suppressAutoSize")){let t=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{let e=[];this.columnGroup.getDisplayedLeafColumns().forEach(o=>{o.getColDef().suppressAutoSize||e.push(o.getColId())}),e.length>0&&this.columnModel.autoSizeColumns({columns:e,skipHeader:t,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(i){let t=this.getInitialValues(i);this.storeLocalValues(t),this.toggleColumnResizing(!0)}onResizing(i,t,e="uiColumnResized"){let r=this.normaliseDragChange(t),o=this.resizeStartWidth+r;this.resizeColumnsFromLocalValues(o,e,i)}getInitialValues(i){let t=this.getColumnsToResize(),e=this.getInitialSizeOfColumns(t),r=this.getSizeRatiosOfColumns(t,e),o={columnsToResize:t,resizeStartWidth:e,resizeRatios:r},n=null;if(i&&(n=this.columnModel.getDisplayedGroupAtDirection(this.columnGroup,"After")),n){let s=n.getDisplayedLeafColumns(),a=o.groupAfterColumns=s.filter(d=>d.isResizable()),l=o.groupAfterStartWidth=this.getInitialSizeOfColumns(a);o.groupAfterRatios=this.getSizeRatiosOfColumns(a,l)}else o.groupAfterColumns=void 0,o.groupAfterStartWidth=void 0,o.groupAfterRatios=void 0;return o}storeLocalValues(i){let{columnsToResize:t,resizeStartWidth:e,resizeRatios:r,groupAfterColumns:o,groupAfterStartWidth:n,groupAfterRatios:s}=i;this.resizeCols=t,this.resizeStartWidth=e,this.resizeRatios=r,this.resizeTakeFromCols=o,this.resizeTakeFromStartWidth=n,this.resizeTakeFromRatios=s}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(i){let t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),e=this.getInitialValues();t>e.resizeStartWidth&&this.resizeColumns(e,t,i,!0)}resizeColumnsFromLocalValues(i,t,e=!0){var r,o,n;if(!this.resizeCols||!this.resizeRatios)return;let s={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:(r=this.resizeTakeFromCols)!=null?r:void 0,groupAfterStartWidth:(o=this.resizeTakeFromStartWidth)!=null?o:void 0,groupAfterRatios:(n=this.resizeTakeFromRatios)!=null?n:void 0};this.resizeColumns(s,i,t,e)}resizeColumns(i,t,e,r=!0){let{columnsToResize:o,resizeStartWidth:n,resizeRatios:s,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:d}=i,u=[];if(u.push({columns:o,ratios:s,width:t}),a){let c=t-n;u.push({columns:a,ratios:d,width:l-c})}this.columnModel.resizeColumnSets({resizeSets:u,finished:r,source:e}),r&&this.toggleColumnResizing(!1)}toggleColumnResizing(i){this.comp.addOrRemoveCssClass("ag-column-resizing",i)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}getInitialSizeOfColumns(i){return i.reduce((t,e)=>t+e.getActualWidth(),0)}getSizeRatiosOfColumns(i,t){return i.map(e=>e.getActualWidth()/t)}normaliseDragChange(i){let t=i;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.clearLocalValues()}};g([w("horizontalResizeService")],cu.prototype,"horizontalResizeService",2);g([w("autoWidthCalculator")],cu.prototype,"autoWidthCalculator",2);g([w("columnModel")],cu.prototype,"columnModel",2);g([U],cu.prototype,"postConstruct",1);var i0=class extends j{constructor(i,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=i}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,wi.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();let i=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.addEventListener("widthChanged",i),t.addEventListener("visibleChanged",i),this.removeChildListenersFuncs.push(()=>{t.removeEventListener("widthChanged",i),t.removeEventListener("visibleChanged",i)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(i=>i()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){let i=this.columnGroup.getActualWidth();this.comp.setWidth(`${i}px`),this.comp.addOrRemoveCssClass("ag-hidden",i===0)}};g([U],i0.prototype,"postConstruct",1);var pT=class extends np{constructor(i,t,e){super(i,t,e),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){let r=this.getGui();this.setDragSource(r)}},this.column=i}setComp(i,t,e){this.comp=i,this.setGui(t),this.displayName=this.beans.columnModel.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.addDestroyFunc(()=>{this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature))}),this.setupUserComp(),this.addHeaderMouseListeners();let r=this.getParentRowCtrl().getPinned(),o=this.column.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new uu(o,t)),this.createManagedBean(new sp(this.column,t,this.beans)),this.createManagedBean(new i0(i,this.column)),this.resizeFeature=this.createManagedBean(new cu(i,e,r,this.column)),this.createManagedBean(new cs(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addManagedPropertyListener(m.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners()}resizeHeader(i,t){if(!this.resizeFeature)return;let e=this.resizeFeature.getInitialValues(t);this.resizeFeature.resizeColumns(e,e.resizeStartWidth+i,"uiColumnResized",!0)}moveHeader(i){let{beans:t,eGui:e,column:r,gos:o,ctrlsService:n}=this,s=o.get("enableRtl"),a=i===0,l=this.getPinned(),d=e.getBoundingClientRect(),u=d.left,c=d.width,h=Vs.normaliseX(a!==s?u-20:u+c+20,l,!0,o,n),p=r.getGroupId(),f=this.focusService.getFocusedHeader();Vs.attemptMoveColumns({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,hDirection:i,xPosition:h,pinned:l,fromEnter:!1,fakeEvent:!1,gos:o,columnModel:t.columnModel});let C=r.getDisplayedLeafColumns(),b=a?C[0]:rt(C);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(b,"auto"),!this.isAlive()&&f&&this.restoreFocus(p,r,f)}restoreFocus(i,t,e){let r=t.getLeafColumns();if(!r.length)return;let o=r[0].getParent();if(!o)return;let n=this.findGroupWidthId(o,i);n&&this.focusService.focusHeaderPosition({headerPosition:Pt(he({},e),{column:n})})}findGroupWidthId(i,t){for(;i;){if(i.getGroupId()===t)return i;i=i.getParent()}return null}resizeLeafColumnsToFit(i){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(i)}setupUserComp(){let i=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:e=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),e,"gridInitializing")},setTooltip:(e,r)=>{this.setupTooltip(e,r)}}),t=this.userComponentFactory.getHeaderGroupCompDetails(i);this.comp.setUserCompDetails(t)}addHeaderMouseListeners(){let i=r=>this.handleMouseOverChange(r.type==="mouseenter"),t=()=>this.dispatchColumnMouseEvent(m.EVENT_COLUMN_HEADER_CLICKED,this.column.getProvidedColumnGroup()),e=r=>this.handleContextMenuMouseEvent(r,void 0,this.column.getProvidedColumnGroup());this.addManagedListener(this.getGui(),"mouseenter",i),this.addManagedListener(this.getGui(),"mouseleave",i),this.addManagedListener(this.getGui(),"click",t),this.addManagedListener(this.getGui(),"contextmenu",e)}handleMouseOverChange(i){let e={type:i?m.EVENT_COLUMN_HEADER_MOUSE_OVER:m.EVENT_COLUMN_HEADER_MOUSE_LEAVE,column:this.column.getProvidedColumnGroup()};this.eventService.dispatchEvent(e)}setupTooltip(i,t){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let e=this.column.getColGroupDef(),r=this.gos.get("tooltipShowMode")==="whenTruncated",o=this.eGui;!t&&r&&!e?.headerGroupComponent&&(t=()=>{let s=o.querySelector(".ag-header-group-text");return s?s.scrollWidth>s.clientWidth:!0});let n={getColumn:()=>this.column,getGui:()=>o,getLocation:()=>"headerGroup",getTooltipValue:()=>i??(e&&e.headerTooltip),shouldDisplayTooltip:t};e&&(n.getColDef=()=>e),this.createBean(new Nn(n))}setupExpandable(){let i=this.column.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(i,ei.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(i,ei.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))}refreshExpanded(){let i=this.column;this.expandable=i.isExpandable();let t=i.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){let i=this.column.getColGroupDef(),t=tp.getHeaderClassesFromColDef(i,this.gos,null,this.column);this.column.isPadding()?(t.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(r=>r.isSpanHeaderHeight())&&t.push("ag-header-span-height")):t.push("ag-header-group-cell-with-group"),t.forEach(e=>this.comp.addOrRemoveCssClass(e,!0))}setupMovingCss(){let t=this.column.getProvidedColumnGroup().getLeafColumns(),e=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());t.forEach(r=>{this.addManagedListener(r,yt.EVENT_MOVING_CHANGED,e)}),e()}onFocusIn(i){if(!this.eGui.contains(i.relatedTarget)){let t=this.getRowIndex();this.beans.focusService.setFocusedHeader(t,this.column)}}handleKeyDown(i){super.handleKeyDown(i);let t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&i.key===z.ENTER){let e=this.column,r=!e.isExpanded();this.beans.columnModel.setColumnGroupOpened(e.getProvidedColumnGroup(),r,"uiColumnExpanded")}}setDragSource(i){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!i))return;let{beans:t,column:e,displayName:r,gos:o,dragAndDropService:n}=this,{columnModel:s}=t,a=e.getProvidedColumnGroup().getLeafColumns(),l=!o.get("suppressDragLeaveHidesColumns"),d=this.dragSource={type:1,eElement:i,getDefaultIconName:()=>l?Fe.ICON_HIDE:Fe.ICON_NOT_ALLOWED,dragItemName:r,getDragItem:()=>this.getDragItemForGroup(e),onDragStarted:()=>{l=!o.get("suppressDragLeaveHidesColumns"),a.forEach(u=>u.setMoving(!0,"uiColumnDragged"))},onDragStopped:()=>a.forEach(u=>u.setMoving(!1,"uiColumnDragged")),onGridEnter:u=>{var c;if(l){let h=((c=u?.columns)==null?void 0:c.filter(p=>!p.getColDef().lockVisible))||[];s.setColumnsVisible(h,!0,"uiColumnMoved")}},onGridExit:u=>{var c;if(l){let h=((c=u?.columns)==null?void 0:c.filter(p=>!p.getColDef().lockVisible))||[];s.setColumnsVisible(h,!1,"uiColumnMoved")}}};n.addDragSource(d,!0)}getDragItemForGroup(i){let t=i.getProvidedColumnGroup().getLeafColumns(),e={};t.forEach(o=>e[o.getId()]=o.isVisible());let r=[];return this.beans.columnModel.getAllDisplayedColumns().forEach(o=>{t.indexOf(o)>=0&&(r.push(o),br(t,o))}),t.forEach(o=>r.push(o)),{columns:r,visibleState:e}}isSuppressMoving(){let i=!1;return this.column.getLeafColumns().forEach(e=>{(e.getColDef().suppressMovable||e.getColDef().lockPosition)&&(i=!0)}),i||this.gos.get("suppressMovableColumns")}},gT=0,Ed=class extends j{constructor(i,t,e){super(),this.instanceId=gT++,this.rowIndex=i,this.pinned=t,this.type=e;let r=e=="group"?"ag-header-row-column-group":e=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${r}`}postConstruct(){this.isPrintLayout=this.gos.isDomLayout("print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}getInstanceId(){return this.instanceId}setComp(i,t=!0){this.comp=i,t&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(){this.addManagedListener(this.eventService,m.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.eventService,m.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,m.EVENT_VIRTUAL_COLUMNS_CHANGED,i=>this.onVirtualColumnsChanged(i.afterScroll)),this.addManagedListener(this.eventService,m.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,m.EVENT_GRID_STYLES_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,m.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",i=>this.isEnsureDomOrder=i.currentValue),this.addManagedPropertyListener("headerHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("groupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotGroupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("floatingFiltersHeight",this.onRowHeightChanged.bind(this))}getHeaderCellCtrl(i){if(this.headerCellCtrls)return As(this.headerCellCtrls).find(t=>t.getColumnGroupChild()===i)}onDisplayedColumnsChanged(){this.isPrintLayout=this.gos.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){let i=this.getWidthForRow();this.comp.setWidth(`${i}px`)}getWidthForRow(){let{columnModel:i}=this.beans;return this.isPrintLayout?this.pinned!=null?0:i.getContainerWidth("right")+i.getContainerWidth("left")+i.getContainerWidth(null):i.getContainerWidth(this.pinned)}onRowHeightChanged(){var{topOffset:i,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(i+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let{columnModel:i,filterManager:t}=this.beans,e=i.getHeaderRowCount(),r=[],o=0;t.hasFloatingFilters()&&(e++,o=1);let n=i.getColumnGroupHeaderRowHeight(),s=i.getColumnHeaderRowHeight(),a=1+o,l=e-a;for(let c=0;c<l;c++)r.push(n);r.push(s);for(let c=0;c<o;c++)r.push(i.getFloatingFiltersHeight());let d=0;for(let c=0;c<this.rowIndex;c++)d+=r[c];let u=r[this.rowIndex];return{topOffset:d,rowHeight:u}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(i=!1){let t=this.getHeaderCtrls(),e=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,e,i)}getHeaderCtrls(){let i=this.headerCellCtrls;this.headerCellCtrls=new Map;let t=this.getColumnsInViewport();for(let o of t)this.recycleAndCreateHeaderCtrls(o,i);let e=o=>{let{focusService:n,columnModel:s}=this.beans;return n.isHeaderWrapperFocused(o)?s.isDisplayed(o.getColumnGroupChild()):!1};if(i)for(let[o,n]of i)e(n)?this.headerCellCtrls.set(o,n):this.destroyBean(n);return Array.from(this.headerCellCtrls.values())}recycleAndCreateHeaderCtrls(i,t){if(!this.headerCellCtrls||i.isEmptyGroup())return;let e=i.getUniqueId(),r;if(t&&(r=t.get(e),t.delete(e)),r&&r.getColumnGroupChild()!=i&&(this.destroyBean(r),r=void 0),r==null)switch(this.type){case"filter":r=this.createBean(new cT(i,this.beans,this));break;case"group":r=this.createBean(new pT(i,this.beans,this));break;default:r=this.createBean(new hT(i,this.beans,this));break}this.headerCellCtrls.set(e,r)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let i=[],t=this.getActualDepth(),{columnModel:e}=this.beans;return["left",null,"right"].forEach(r=>{let o=e.getVirtualHeaderGroupRow(r,t);i=i.concat(o)}),i}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())}focusHeader(i,t){if(!this.headerCellCtrls)return!1;let r=Array.from(this.headerCellCtrls.values()).find(o=>o.getColumnGroupChild()==i);return r?r.focus(t):!1}destroy(){this.headerCellCtrls&&this.headerCellCtrls.forEach(i=>{this.destroyBean(i)}),this.headerCellCtrls=void 0,super.destroy()}};g([w("beans")],Ed.prototype,"beans",2);g([U],Ed.prototype,"postConstruct",1);var na=class extends j{constructor(i){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=i}setComp(i,t){this.comp=i,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport),this.addManagedListener(this.eventService,m.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,m.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,m.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()}setupDragAndDrop(i){let t=new _l(this.pinned,i);this.createManagedBean(t)}refresh(i=!1){let t=new al,e=this.focusService.getFocusHeaderToUseAfterRefresh(),r=()=>{let a=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let l=0;l<a;l++){let d=this.createBean(new Ed(t.next(),this.pinned,"group"));this.groupsRowCtrls.push(d)}},o=()=>{let a=t.next(),l=!this.hidden&&(this.columnsRowCtrl==null||!i||this.columnsRowCtrl.getRowIndex()!==a);(l||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),l&&(this.columnsRowCtrl=this.createBean(new Ed(a,this.pinned,"column")))},n=()=>{this.includeFloatingFilter=this.filterManager.hasFloatingFilters()&&!this.hidden;let a=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){a();return}let l=t.next();if(this.filtersRowCtrl){let d=this.filtersRowCtrl.getRowIndex()!==l;(!i||d)&&a()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new Ed(l,this.pinned,"filter")))};r(),o(),n();let s=this.getAllCtrls();this.comp.setCtrls(s),this.restoreFocusOnHeader(e)}restoreFocusOnHeader(i){i==null||i.column.getPinned()!=this.pinned||this.focusService.focusHeaderPosition({headerPosition:i})}getAllCtrls(){let i=[...this.groupsRowCtrls];return this.columnsRowCtrl&&i.push(this.columnsRowCtrl),this.filtersRowCtrl&&i.push(this.filtersRowCtrl),i}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){let i=this.filterManager.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==i&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new bl(i=>this.comp.setCenterWidth(`${i}px`),!0))}setHorizontalScroll(i){this.comp.setViewportScrollLeft(i)}setupPinnedWidth(){if(this.pinned==null)return;let i=this.pinned==="left",t=this.pinned==="right";this.hidden=!0;let e=()=>{let r=i?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(r==null)return;let o=r==0,n=this.hidden!==o,s=this.gos.get("enableRtl"),a=this.gos.getScrollbarWidth(),d=this.scrollVisibleService.isVerticalScrollShowing()&&(s&&i||!s&&t)?r+a:r;this.comp.setPinnedContainerWidth(`${d}px`),this.comp.setDisplayed(!o),n&&(this.hidden=o,this.refresh())};this.addManagedListener(this.eventService,m.EVENT_LEFT_PINNED_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,m.EVENT_RIGHT_PINNED_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,m.EVENT_SCROLL_VISIBILITY_CHANGED,e),this.addManagedListener(this.eventService,m.EVENT_SCROLLBAR_WIDTH_CHANGED,e)}getHeaderCtrlForColumn(i){if(i instanceof yt)return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(i):void 0;if(this.groupsRowCtrls.length!==0)for(let t=0;t<this.groupsRowCtrls.length;t++){let e=this.groupsRowCtrls[t].getHeaderCellCtrl(i);if(e)return e}}getHtmlElementForColumnHeader(i){let t=this.getHeaderCtrlForColumn(i);return t?t.getGui():null}getRowType(i){let e=this.getAllCtrls()[i];return e?e.getType():void 0}focusHeader(i,t,e){let o=this.getAllCtrls()[i];return o?o.focusHeader(t,e):!1}getViewport(){return this.eViewport}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}};g([w("ctrlsService")],na.prototype,"ctrlsService",2);g([w("scrollVisibleService")],na.prototype,"scrollVisibleService",2);g([w("pinnedWidthService")],na.prototype,"pinnedWidthService",2);g([w("columnModel")],na.prototype,"columnModel",2);g([w("focusService")],na.prototype,"focusService",2);g([w("filterManager")],na.prototype,"filterManager",2);var sa=class ch extends Pe{constructor(t){super(),this.headerRowComps={},this.rowCompsList=[],this.pinned=t}init(){this.selectAndSetTemplate();let t={setDisplayed:r=>this.setDisplayed(r),setCtrls:r=>this.setCtrls(r),setCenterWidth:r=>this.eCenterContainer.style.width=r,setViewportScrollLeft:r=>this.getGui().scrollLeft=r,setPinnedContainerWidth:r=>{let o=this.getGui();o.style.width=r,o.style.maxWidth=r,o.style.minWidth=r}};this.createManagedBean(new na(this.pinned)).setComp(t,this.getGui())}selectAndSetTemplate(){let t=this.pinned=="left",e=this.pinned=="right",r=t?ch.PINNED_LEFT_TEMPLATE:e?ch.PINNED_RIGHT_TEMPLATE:ch.CENTER_TEMPLATE;this.setTemplate(r),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()}destroyRowComps(){this.setCtrls([])}destroyRowComp(t){this.destroyBean(t),this.eRowContainer.removeChild(t.getGui())}setCtrls(t){let e=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let r,o=n=>{let s=n.getGui();s.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(s),r&&Uf(this.eRowContainer,s,r),r=s};t.forEach(n=>{let s=n.getInstanceId(),a=e[s];delete e[s];let l=a||this.createBean(new fm(n));this.headerRowComps[s]=l,this.rowCompsList.push(l),o(l)}),os(e).forEach(n=>this.destroyRowComp(n))}};sa.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="rowgroup"></div>';sa.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="rowgroup"></div>';sa.CENTER_TEMPLATE=`<div class="ag-header-viewport" role="presentation">
            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>
        </div>`;g([Q("eCenterContainer")],sa.prototype,"eCenterContainer",2);g([U],sa.prototype,"init",1);g([ir],sa.prototype,"destroyRowComps",1);var Hg=sa;var Bs=class extends j{constructor(){super(...arguments),this.currentHeaderRowWithoutSpan=-1}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCon=t.gridBodyCtrl});let i=this.gos.getDocument();this.addManagedListener(i,"mousedown",()=>this.setCurrentHeaderRowWithoutSpan(-1))}getHeaderRowCount(){let i=this.ctrlsService.getHeaderRowContainerCtrl();return i?i.getRowCount():0}navigateVertically(i,t,e){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;let{headerRowIndex:r,column:o}=t,n=this.getHeaderRowCount(),s=i===0,{headerRowIndex:a,column:l,headerRowIndexWithoutSpan:d}=s?this.headerPositionUtils.getColumnVisibleParent(o,r):this.headerPositionUtils.getColumnVisibleChild(o,r),u=!1;return a<0&&(a=0,l=o,u=!0),a>=n?(a=-1,this.setCurrentHeaderRowWithoutSpan(-1)):d!==void 0&&(this.currentHeaderRowWithoutSpan=d),!u&&!l?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a,column:l},allowUserOverride:!0,event:e})}setCurrentHeaderRowWithoutSpan(i){this.currentHeaderRowWithoutSpan=i}navigateHorizontally(i,t=!1,e){let r=this.focusService.getFocusedHeader(),o=i===2,n=this.gos.get("enableRtl"),s,a;if(this.currentHeaderRowWithoutSpan!==-1?r.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=r.headerRowIndex,o!==n?(a="Before",s=this.headerPositionUtils.findHeader(r,a)):(a="After",s=this.headerPositionUtils.findHeader(r,a)),s||!t)return this.focusService.focusHeaderPosition({headerPosition:s,direction:a,fromTab:t,allowUserOverride:!0,event:e});if(t){let l=this.gos.getCallback("tabToNextHeader");if(l)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:s,direction:a})}return this.focusNextHeaderRow(r,a,e)}focusNextHeaderRow(i,t,e){let r=i.headerRowIndex,o=null,n;if(t==="Before"?r>0&&(n=r-1,this.currentHeaderRowWithoutSpan-=1,o=this.headerPositionUtils.findColAtEdgeForHeaderRow(n,"end")):(n=r+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),o=this.headerPositionUtils.findColAtEdgeForHeaderRow(n,"start")),!o)return!1;let{column:s,headerRowIndex:a}=this.headerPositionUtils.getHeaderIndexToFocus(o.column,o?.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:s,headerRowIndex:a},direction:t,fromTab:!0,allowUserOverride:!0,event:e})}scrollToColumn(i,t="After"){if(i.getPinned())return;let e;if(i instanceof wi){let r=i.getDisplayedLeafColumns();e=t==="Before"?rt(r):r[0]}else e=i;this.gridBodyCon.getScrollFeature().ensureColumnVisible(e)}};g([w("focusService")],Bs.prototype,"focusService",2);g([w("headerPositionUtils")],Bs.prototype,"headerPositionUtils",2);g([w("ctrlsService")],Bs.prototype,"ctrlsService",2);g([U],Bs.prototype,"postConstruct",1);Bs=g([te("headerNavigationService")],Bs);var aa=class extends j{setComp(i,t,e){this.comp=i,this.eGui=t,this.createManagedBean(new cs(e,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,m.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,m.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight();let r=this.onHeaderContextMenu.bind(this);this.addManagedListener(this.eGui,"contextmenu",r),this.mockContextMenuForIPad(r),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){let i=this.setHeaderHeight.bind(this);i(),this.addManagedPropertyListener("headerHeight",i),this.addManagedPropertyListener("pivotHeaderHeight",i),this.addManagedPropertyListener("groupHeaderHeight",i),this.addManagedPropertyListener("pivotGroupHeaderHeight",i),this.addManagedPropertyListener("floatingFiltersHeight",i),this.addManagedListener(this.eventService,m.EVENT_DISPLAYED_COLUMNS_CHANGED,i),this.addManagedListener(this.eventService,m.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,i),this.addManagedListener(this.eventService,m.EVENT_GRID_STYLES_CHANGED,i),this.addManagedListener(this.eventService,m.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,i)}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){let{columnModel:i}=this,t=0,e=i.getHeaderRowCount(),r;this.filterManager.hasFloatingFilters()&&(e++,t=1);let n=this.columnModel.getColumnGroupHeaderRowHeight(),s=this.columnModel.getColumnHeaderRowHeight(),a=1+t,l=e-a;if(r=t*i.getFloatingFiltersHeight(),r+=l*n,r+=s,this.headerHeight===r)return;this.headerHeight=r;let d=`${r+1}px`;this.comp.setHeightAndMinHeight(d),this.eventService.dispatchEvent({type:m.EVENT_HEADER_HEIGHT_CHANGED})}onPivotModeChanged(){let i=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",i),this.comp.addOrRemoveCssClass("ag-pivot-off",!i)}onDisplayedColumnsChanged(){let t=this.columnModel.getAllDisplayedColumns().some(e=>e.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)}onTabKeyDown(i){let t=this.gos.get("enableRtl"),e=i.shiftKey!==t?2:3;(this.headerNavigationService.navigateHorizontally(e,!0,i)||this.focusService.focusNextGridCoreContainer(i.shiftKey))&&i.preventDefault()}handleKeyDown(i){let t=null;switch(i.key){case z.LEFT:t=2;case z.RIGHT:W(t)||(t=3),this.headerNavigationService.navigateHorizontally(t,!1,i);break;case z.UP:t=0;case z.DOWN:W(t)||(t=1),this.headerNavigationService.navigateVertically(t,null,i)&&i.preventDefault();break;default:return}}onFocusOut(i){let{relatedTarget:t}=i;!t&&this.eGui.contains(this.gos.getActiveDomElement())||this.eGui.contains(t)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(i,t,e){if(!i&&!e||!this.menuService.isHeaderContextMenuEnabled())return;let{target:r}=i??t;(r===this.eGui||r===this.ctrlsService.getHeaderRowContainerCtrl().getViewport())&&this.menuService.showHeaderContextMenu(void 0,i,e)}mockContextMenuForIPad(i){if(!Ln())return;let t=new Di(this.eGui),e=r=>{i(void 0,r.touchStart,r.touchEvent)};this.addManagedListener(t,Di.EVENT_LONG_TAP,e),this.addDestroyFunc(()=>t.destroy())}};g([w("headerNavigationService")],aa.prototype,"headerNavigationService",2);g([w("focusService")],aa.prototype,"focusService",2);g([w("columnModel")],aa.prototype,"columnModel",2);g([w("ctrlsService")],aa.prototype,"ctrlsService",2);g([w("filterManager")],aa.prototype,"filterManager",2);g([w("menuService")],aa.prototype,"menuService",2);var vm=class r0 extends Pe{constructor(){super(r0.TEMPLATE)}postConstruct(){let t={addOrRemoveCssClass:(o,n)=>this.addOrRemoveCssClass(o,n),setHeightAndMinHeight:o=>{this.getGui().style.height=o,this.getGui().style.minHeight=o}};this.createManagedBean(new aa).setComp(t,this.getGui(),this.getFocusableElement());let r=o=>{this.createManagedBean(o),this.appendChild(o)};r(new Hg("left")),r(new Hg(null)),r(new Hg("right"))}};vm.TEMPLATE='<div class="ag-header" role="presentation"/>';g([U],vm.prototype,"postConstruct",1);var fT=vm,kd=class extends j{addResizeBar(i){let t={dragStartPixels:i.dragStartPixels||0,eElement:i.eResizeBar,onDragStart:this.onDragStart.bind(this,i),onDragStop:this.onDragStop.bind(this,i),onDragging:this.onDragging.bind(this,i),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(t),()=>this.dragService.removeDragSource(t)}onDragStart(i,t){this.dragStartX=t.clientX,this.setResizeIcons();let e=t instanceof MouseEvent&&t.shiftKey===!0;i.onResizeStart(e)}setResizeIcons(){let i=this.ctrlsService.get("gridCtrl");i.setResizeCursor(!0),i.disableUserSelect(!0)}onDragStop(i,t){i.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){let i=this.ctrlsService.get("gridCtrl");i.setResizeCursor(!1),i.disableUserSelect(!1)}onDragging(i,t){this.resizeAmount=t.clientX-this.dragStartX,i.onResizing(this.resizeAmount)}};g([w("dragService")],kd.prototype,"dragService",2);g([w("ctrlsService")],kd.prototype,"ctrlsService",2);kd=g([te("horizontalResizeService")],kd);var ss=class extends j{hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(i,t,e){this.showPopup(i,r=>{this.popupService.positionPopupUnderMouseEvent({column:i,type:e,mouseEvent:t,ePopup:r})},e,t.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(i,t,e){let r=-1,o="left",n=this.menuService.isLegacyMenuEnabled();!n&&this.gos.get("enableRtl")&&(r=1,o="right");let s=n?void 0:4*r,a=n?void 0:4;this.showPopup(i,l=>{this.popupService.positionPopupByComponent({type:e,eventSource:t,ePopup:l,nudgeX:s,nudgeY:a,alignSide:o,keepWithinBounds:!0,position:"under",column:i})},e,t,n)}showPopup(i,t,e,r,o){let n=i?this.createBean(new Jh(i,"COLUMN_MENU")):void 0;if(this.activeMenu=n,!n?.hasFilter()||!i)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");let s=document.createElement("div");Bt(s,"presentation"),s.classList.add("ag-menu"),o||s.classList.add("ag-filter-menu"),this.tabListener=this.addManagedListener(s,"keydown",f=>this.trapFocusWithin(f,s)),s.appendChild(n?.getGui());let a,l=()=>n?.afterGuiDetached(),d=this.menuService.isColumnMenuAnchoringEnabled()?r??this.ctrlsService.getGridBodyCtrl().getGui():void 0,u=f=>{i.setMenuVisible(!1,"contextMenu");let C=f instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),C&&r&&Dr(r)){let b=this.focusService.findTabbableParent(r);b&&b.focus()}l(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,e,i)},c=this.localeService.getLocaleTextFunc(),h=o&&e!=="columnFilter"?c("ariaLabelColumnMenu","Column Menu"):c("ariaLabelColumnFilter","Column Filter"),p=this.popupService.addPopup({modal:!0,eChild:s,closeOnEsc:!0,closedCallback:u,positionCallback:()=>t(s),anchorToElement:d,ariaLabel:h});p&&(this.hidePopup=a=p.hideFunc),n.afterInit().then(()=>{t(s),n.afterGuiAttached({container:e,hidePopup:a})}),i.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,e,i)}trapFocusWithin(i,t){i.key!==z.TAB||i.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,i.shiftKey)||(i.preventDefault(),this.focusService.focusInto(t,i.shiftKey))}dispatchVisibleChangedEvent(i,t,e){let r={type:m.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible:i,switchingTab:!1,key:t,column:e??null};this.eventService.dispatchEvent(r)}isMenuEnabled(i){var t;return i.isFilterAllowed()&&((t=i.getColDef().menuTabs)!=null?t:["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}};g([w("filterManager")],ss.prototype,"filterManager",2);g([w("popupService")],ss.prototype,"popupService",2);g([w("focusService")],ss.prototype,"focusService",2);g([w("ctrlsService")],ss.prototype,"ctrlsService",2);g([w("menuService")],ss.prototype,"menuService",2);ss=g([te("filterMenuFactory")],ss);var ym=class extends j{constructor(i){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1;let{comp:t,eTopGuard:e,eBottomGuard:r,focusTrapActive:o,forceFocusOutWhenTabGuardsAreEmpty:n,focusInnerElement:s,onFocusIn:a,onFocusOut:l,shouldStopEventPropagation:d,onTabKeyDown:u,handleKeyDown:c,eFocusableElement:h}=i;this.comp=t,this.eTopGuard=e,this.eBottomGuard=r,this.providedFocusInnerElement=s,this.eFocusableElement=h,this.focusTrapActive=!!o,this.forceFocusOutWhenTabGuardsAreEmpty=!!n,this.providedFocusIn=a,this.providedFocusOut=l,this.providedShouldStopEventPropagation=d,this.providedOnTabKeyDown=u,this.providedHandleKeyDown=c}postConstruct(){this.createManagedBean(new cs(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:i=>this.onTabKeyDown(i),handleKeyDown:i=>this.handleKeyDown(i),onFocusIn:i=>this.onFocusIn(i),onFocusOut:i=>this.onFocusOut(i)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(i=>this.addManagedListener(i,"focus",this.onFocus.bind(this)))}handleKeyDown(i){this.providedHandleKeyDown&&this.providedHandleKeyDown(i)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;let i=this.gos.get("tabIndex");this.comp.setTabIndex(i.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(i){if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(i.target===this.eBottomGuard);return}let t=i.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(i){let t=this.gos.getDocument(),e=this.focusService.findFocusableElements(t.body,null,!0),r=e.indexOf(i?this.eTopGuard:this.eBottomGuard);if(r===-1)return;let o,n;i?(o=0,n=r):(o=r+1,n=e.length);let s=e.slice(o,n),a=this.gos.get("tabIndex");s.sort((l,d)=>{let u=parseInt(l.getAttribute("tabindex")||"0"),c=parseInt(d.getAttribute("tabindex")||"0");return c===a?1:u===a?-1:u===0?1:c===0?-1:u-c}),s[i?s.length-1:0].focus()}onFocusIn(i){this.focusTrapActive||(this.providedFocusIn&&this.providedFocusIn(i),this.deactivateTabGuards())}onFocusOut(i){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(i),this.eFocusableElement.contains(i.relatedTarget)||this.activateTabGuards())}onTabKeyDown(i){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(i);return}if(this.focusTrapActive||i.defaultPrevented)return;let t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();let e=this.getNextFocusableElement(i.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),e&&(e.focus(),i.preventDefault())}focusInnerElement(i=!1){let t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[i?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(i){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,i)}forceFocusOutOfContainer(i=!1){if(this.forcingFocusOut)return;let t=i?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(i){return i===this.eTopGuard||i===this.eBottomGuard}};g([w("focusService")],ym.prototype,"focusService",2);g([U],ym.prototype,"postConstruct",1);var hu=class extends Pe{initialiseTabGuard(i){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();let t=[this.eTopGuard,this.eBottomGuard],e={setTabIndex:r=>{t.forEach(o=>r!=null?o.setAttribute("tabindex",r):o.removeAttribute("tabindex"))}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new ym({comp:e,focusTrapActive:!!i.focusTrapActive,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:i.onFocusIn,onFocusOut:i.onFocusOut,focusInnerElement:i.focusInnerElement,handleKeyDown:i.handleKeyDown,onTabKeyDown:i.onTabKeyDown,shouldStopEventPropagation:i.shouldStopEventPropagation,forceFocusOutWhenTabGuardsAreEmpty:i.forceFocusOutWhenTabGuardsAreEmpty}))}createTabGuard(i){let t=document.createElement("div"),e=i==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return t.classList.add("ag-tab-guard",e),Bt(t,"presentation"),t}addTabGuards(i,t){this.eFocusableElement.insertAdjacentElement("afterbegin",i),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){let i=[this.eTopGuard,this.eBottomGuard];Zt(this.getFocusableElement()),this.addTabGuards(...i)}forceFocusOutOfContainer(i=!1){this.tabGuardCtrl.forceFocusOutOfContainer(i)}appendChild(i,t){ru(i)||(i=i.getGui());let{eBottomGuard:e}=this;e?e.insertAdjacentElement("beforebegin",i):super.appendChild(i,t)}},ap=class o0 extends hu{constructor(t){super(o0.getTemplate(t.cssClass)),this.items=[],this.tabbedItemScrollMap=new Map,this.params=t}postConstruct(){this.setupHeader(),this.params.items&&this.params.items.forEach(t=>this.addItem(t)),this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),focusInnerElement:this.focusInnerElement.bind(this),focusTrapActive:!0}),this.addDestroyFunc(()=>{var t,e,r;return(r=(e=(t=this.activeItem)==null?void 0:t.tabbedItem)==null?void 0:e.afterDetachedCallback)==null?void 0:r.call(e)})}static getTemplate(t){return`<div class="ag-tabs ${t}">
            <div ref="eHeader"></div>
            <div ref="eBody" role="presentation" class="ag-tabs-body ${t?`${t}-body`:""}"></div>
        </div>`}setupHeader(){let{enableCloseButton:t,cssClass:e}=this.params,r=(o,n)=>{o.classList.add(`ag-tabs-${n}`),e&&o.classList.add(`${e}-${n}`)};t?(this.setupCloseButton(r),this.eTabHeader=this.gos.getDocument().createElement("div"),r(this.eHeader,"header-wrapper"),Bt(this.eHeader,"presentation"),this.eHeader.appendChild(this.eTabHeader)):this.eTabHeader=this.eHeader,Bt(this.eTabHeader,"tablist"),r(this.eTabHeader,"header")}setupCloseButton(t){let e=this.gos.getDocument(),r=e.createElement("button");t(r,"close-button");let o=It("close",this.gos,void 0,!0);Vr(r,this.params.closeButtonAriaLabel),r.appendChild(o),this.addManagedListener(r,"click",()=>{var s,a;return(a=(s=this.params).onCloseClicked)==null?void 0:a.call(s)});let n=e.createElement("div");t(n,"close-button-wrapper"),Bt(n,"presentation"),n.appendChild(r),this.eHeader.appendChild(n),this.eCloseButton=r}handleKeyDown(t){switch(t.key){case z.RIGHT:case z.LEFT:if(!this.eTabHeader.contains(this.gos.getActiveDomElement()))return;let e=t.key===z.RIGHT,r=this.gos.get("enableRtl"),o=this.items.indexOf(this.activeItem),n=e!==r?Math.min(o+1,this.items.length-1):Math.max(o-1,0);if(o===n)return;t.preventDefault();let s=this.items[n];this.showItemWrapper(s),s.eHeaderButton.focus();break;case z.UP:case z.DOWN:t.stopPropagation();break}}onTabKeyDown(t){var e,r,o,n;if(t.defaultPrevented)return;let{focusService:s,eHeader:a,eBody:l,activeItem:d,params:u}=this,{suppressTrapFocus:c,enableCloseButton:h}=u,p=this.gos.getActiveDomElement(),f=t.target,C=t.shiftKey;if(a.contains(p)){t.preventDefault(),h&&C&&!((e=this.eCloseButton)!=null&&e.contains(p))?(r=this.eCloseButton)==null||r.focus():c&&C?(o=this.focusService.findFocusableElementBeforeTabGuard(this.gos.getDocument().body,f))==null||o.focus():this.focusBody(t.shiftKey);return}let b=null;if(s.isTargetUnderManagedComponent(l,f)&&(C&&(b=this.focusService.findFocusableElementBeforeTabGuard(l,f)),!b&&!c&&(b=d.eHeaderButton)),!b&&l.contains(p)&&(b=s.findNextFocusableElement(l,!1,C),!b)){t.preventDefault(),c&&!C?this.forceFocusOutOfContainer(C):h&&!C?(n=this.eCloseButton)==null||n.focus():this.focusHeader();return}b&&(t.preventDefault(),b.focus())}focusInnerElement(t){t?this.focusHeader():this.focusBody(!0)}focusHeader(t){this.activeItem.eHeaderButton.focus({preventScroll:t})}focusBody(t){this.focusService.focusInto(this.eBody,t)}setAfterAttachedParams(t){this.afterAttachedParams=t}showFirstItem(){this.items.length>0&&this.showItemWrapper(this.items[0])}addItem(t){let e=document.createElement("span");Bt(e,"tab"),e.setAttribute("tabindex","-1"),e.appendChild(t.title),e.classList.add("ag-tab"),this.eTabHeader.appendChild(e),Vr(e,t.titleLabel);let r={tabbedItem:t,eHeaderButton:e};this.items.push(r),e.addEventListener("click",this.showItemWrapper.bind(this,r))}showItem(t){let e=this.items.find(r=>r.tabbedItem===t);e&&this.showItemWrapper(e)}showItemWrapper(t){var e,r,o,n,s,a;let{tabbedItem:l,eHeaderButton:d}=t;if((r=(e=this.params).onItemClicked)==null||r.call(e,{item:l}),this.activeItem===t){(n=(o=this.params).onActiveItemClicked)==null||n.call(o);return}this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),Zt(this.eBody),l.bodyPromise.then(u=>{this.eBody.appendChild(u);let c=!this.focusService.isKeyboardMode();if(this.params.suppressFocusBodyOnOpen||this.focusService.focusInto(this.eBody,!1,c),l.afterAttachedCallback&&l.afterAttachedCallback(this.afterAttachedParams),this.params.keepScrollPosition){let h=l.getScrollableContainer&&l.getScrollableContainer()||u;this.lastScrollListener=this.addManagedListener(h,"scroll",()=>{this.tabbedItemScrollMap.set(l.name,h.scrollTop)});let p=this.tabbedItemScrollMap.get(l.name);p!==void 0&&setTimeout(()=>{h.scrollTop=p},0)}}),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),(a=(s=this.activeItem.tabbedItem).afterDetachedCallback)==null||a.call(s)),d.classList.add("ag-tab-selected"),this.activeItem=t}};g([w("focusService")],ap.prototype,"focusService",2);g([Q("eHeader")],ap.prototype,"eHeader",2);g([Q("eBody")],ap.prototype,"eBody",2);g([U],ap.prototype,"postConstruct",1);var mT=50,hf=class extends j{constructor(){super(...arguments),this.polyfillFunctions=[]}observeResize(i,t){let e=this.gos.getWindow(),r=()=>{let a=new e.ResizeObserver(t);return a.observe(i),()=>a.disconnect()},o=()=>{var a,l;let d=(a=i?.clientWidth)!=null?a:0,u=(l=i?.clientHeight)!=null?l:0,c=!0,h=()=>{var p,f;if(c){let C=(p=i?.clientWidth)!=null?p:0,b=(f=i?.clientHeight)!=null?f:0;(C!==d||b!==u)&&(d=C,u=b,t()),this.doNextPolyfillTurn(h)}};return h(),()=>c=!1},n=this.gos.get("suppressBrowserResizeObserver");return!!e.ResizeObserver&&!n?r():this.getFrameworkOverrides().wrapIncoming(()=>o(),"resize-observer")}doNextPolyfillTurn(i){this.polyfillFunctions.push(i),this.schedulePolyfill()}schedulePolyfill(){if(this.polyfillScheduled)return;let i=()=>{let t=this.polyfillFunctions;this.polyfillScheduled=!1,this.polyfillFunctions=[],t.forEach(e=>e())};this.polyfillScheduled=!0,window.setTimeout(i,mT)}};hf=g([te("resizeObserverService")],hf);var dl=class extends j{constructor(){super(...arguments),this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}setScrollTop(i){let t=this.gos.get("pagination");if(this.scrollGoingDown=i>=this.lastScrollTop,t&&i===0){let e=this.paginationProxy.getCurrentPage();e!==this.lastPage&&(this.lastPage=e,this.scrollGoingDown=!0)}this.lastScrollTop=i}init(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(i){this.useAnimationFrame===!1&&console.warn(`AG Grid: AnimationFrameService.${i} called but animation frames are off`)}createTask(i,t,e){this.verifyAnimationFrameOn(e);let r={task:i,index:t,createOrder:++this.taskCount};this.addTaskToList(this[e],r),this.schedule()}cancelTask(i){this.cancelledTasks.add(i)}addTaskToList(i,t){i.list.push(t),i.sorted=!1}sortTaskList(i){if(i.sorted)return;let t=this.scrollGoingDown?1:-1;i.list.sort((e,r)=>e.index!==r.index?t*(r.index-e.index):r.createOrder-e.createOrder),i.sorted=!0}addDestroyTask(i){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(i),this.schedule()}executeFrame(i){this.verifyAnimationFrameOn("executeFrame");let t=this.createTasksP1,e=t.list,r=this.createTasksP2,o=r.list,n=this.destroyTasks,s=new Date().getTime(),a=new Date().getTime()-s,l=i<=0,d=this.ctrlsService.getGridBodyCtrl();for(;l||a<i;){if(!d.getScrollFeature().scrollGridIfNeeded()){let c;if(e.length)this.sortTaskList(t),c=e.pop().task;else if(o.length)this.sortTaskList(r),c=o.pop().task;else if(n.length)c=n.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(c)||c()}a=new Date().getTime()-s}e.length||o.length||n.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){let i=this.executeFrame.bind(this,60);this.requestAnimationFrame(i)}requestAnimationFrame(i){let t=this.gos.getWindow();t.requestAnimationFrame?t.requestAnimationFrame(i):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(i):t.setTimeout(i,0)}isQueueEmpty(){return!this.ticking}debounce(i){let t=!1;return()=>{if(!this.isOn()){window.setTimeout(i,0);return}t||(t=!0,this.addDestroyTask(()=>{t=!1,i()}))}}};g([w("ctrlsService")],dl.prototype,"ctrlsService",2);g([w("paginationProxy")],dl.prototype,"paginationProxy",2);g([U],dl.prototype,"init",1);dl=g([te("animationFrameService")],dl);var Vd=class extends j{postConstruct(){this.isClientSideRowModel=this.rowModel.getType()==="clientSide"}expandRows(i){if(!this.isClientSideRowModel)return;let t=new Set(i);this.rowModel.forEachNode(e=>{e.id&&t.has(e.id)&&(e.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){let i=[];return this.rowModel.forEachNode(({expanded:t,id:e})=>{t&&e&&i.push(e)}),i}expandAll(i){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(i)}setRowNodeExpanded(i,t,e,r){i&&(e&&i.parent&&i.parent.level!==-1&&this.setRowNodeExpanded(i.parent,t,e,r),i.setExpanded(t,void 0,r))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}};g([w("rowModel")],Vd.prototype,"rowModel",2);g([U],Vd.prototype,"postConstruct",1);Vd=g([te("expansionService")],Vd);var io=class extends j{postConstruct(){var i;this.activeMenuFactory=(i=this.enterpriseMenuFactory)!=null?i:this.filterMenuFactory}showColumnMenu(i){this.showColumnMenuCommon(this.activeMenuFactory,i,"columnMenu")}showFilterMenu(i){let t=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(t,i,i.containerType,!0)}showHeaderContextMenu(i,t,e){this.activeMenuFactory.showMenuAfterContextMenuEvent(i,t,e)}getContextMenuPosition(i,t){let e=this.getRowCtrl(i),r=this.getCellGui(e,t);if(!r)return e?{x:0,y:e.getRowYPosition()}:{x:0,y:0};let o=r.getBoundingClientRect();return{x:o.x+o.width/2,y:o.y+o.height/2}}showContextMenu(i){var t,e,r;let{column:o,rowNode:n}=i,{anchorToElement:s,value:a}=i;n&&o&&a==null&&(a=n.getValueFromValueService(o)),s==null&&(s=this.getContextMenuAnchorElement(n,o)),(r=this.contextMenuFactory)==null||r.onContextMenu((t=i.mouseEvent)!=null?t:null,(e=i.touchEvent)!=null?e:null,n??null,o??null,a,s)}showColumnChooser(i){var t;(t=this.columnChooserFactory)==null||t.showColumnChooser(i)}hidePopupMenu(){var i;(i=this.contextMenuFactory)==null||i.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){var i;(i=this.columnChooserFactory)==null||i.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(i){let{suppressMenu:t,suppressHeaderMenuButton:e}=i.getColDef();return!(e??t)&&this.activeMenuFactory.isMenuEnabled(i)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(i){return!i.getColDef().suppressHeaderFilterButton&&this.filterManager.isFilterAllowed(i)}isHeaderContextMenuEnabled(i){return!i?.getColDef().suppressHeaderContextMenu&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){let i=!this.isSuppressMenuHide();return!(Ln()&&i)}isHeaderFilterButtonEnabled(i){return this.isFilterMenuInHeaderEnabled(i)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(i)}isFilterMenuItemEnabled(i){return this.filterManager.isFilterAllowed(i)&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(i)&&!this.isFloatingFilterButtonDisplayed(i)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(i){var t;let e=i.getColDef(),r=(t=e.floatingFilterComponentParams)==null?void 0:t.suppressFilterButton;return r!=null&&Ce("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),e.suppressFloatingFilterButton==null?!r:!e.suppressFloatingFilterButton}getColumnMenuType(){var i;return(i=this.gos.get("columnMenu"))!=null?i:"legacy"}isFloatingFilterButtonDisplayed(i){return!!i.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(i)}isSuppressMenuHide(){let i=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()||this.gos.exists("suppressMenuHide")?i:!0}showColumnMenuCommon(i,t,e,r){let{column:o,positionBy:n}=t;if(n==="button"){let{buttonElement:s}=t;i.showMenuAfterButtonClick(o,s,e,r)}else if(n==="mouse"){let{mouseEvent:s}=t;i.showMenuAfterMouseEvent(o,s,e,r)}else o&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(o,"auto"),this.animationFrameService.requestAnimationFrame(()=>{let s=this.ctrlsService.getHeaderRowContainerCtrl(o.getPinned()).getHeaderCtrlForColumn(o);i.showMenuAfterButtonClick(o,s.getAnchorElementForMenu(r),e,!0)}))}getRowCtrl(i){let{rowIndex:t,rowPinned:e}=i||{};if(t!=null)return this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:e})||void 0}getCellGui(i,t){if(!i||!t)return;let e=i.getCellCtrl(t);return e?.getGui()||void 0}getContextMenuAnchorElement(i,t){let e=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),r=this.getRowCtrl(i);if(!r)return e;let o=this.getCellGui(r,t);return o||(r.isFullWidth()?r.getFullWidthElement():e)}};g([w("filterMenuFactory")],io.prototype,"filterMenuFactory",2);g([w("ctrlsService")],io.prototype,"ctrlsService",2);g([w("animationFrameService")],io.prototype,"animationFrameService",2);g([w("filterManager")],io.prototype,"filterManager",2);g([w("rowRenderer")],io.prototype,"rowRenderer",2);g([gt("columnChooserFactory")],io.prototype,"columnChooserFactory",2);g([gt("contextMenuFactory")],io.prototype,"contextMenuFactory",2);g([gt("enterpriseMenuFactory")],io.prototype,"enterpriseMenuFactory",2);g([U],io.prototype,"postConstruct",1);io=g([te("menuService")],io);var $s=class extends j{postConstruct(){this.ctrlsService.whenReady(i=>{this.centerRowContainerCtrl=i.center})}getPreferredWidthForColumn(i,t){let e=this.getHeaderCellForColumn(i);if(!e)return-1;let r=this.rowRenderer.getAllCellsForColumn(i);return t||r.push(e),this.addElementsToContainerAndGetWidth(r)}getPreferredWidthForColumnGroup(i){let t=this.getHeaderCellForColumn(i);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(i){let t=document.createElement("form");t.style.position="fixed";let e=this.centerRowContainerCtrl.getContainerElement();i.forEach(n=>this.cloneItemIntoDummy(n,t)),e.appendChild(t);let r=t.offsetWidth;e.removeChild(t);let o=this.getAutoSizePadding();return r+o}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(i){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(e=>{let r=e.getHtmlElementForColumnHeader(i);r!=null&&(t=r)}),t}cloneItemIntoDummy(i,t){let e=i.cloneNode(!0);e.style.width="",e.style.position="static",e.style.left="";let r=document.createElement("div"),o=r.classList;["ag-header-cell","ag-header-group-cell"].some(a=>e.classList.contains(a))?(o.add("ag-header","ag-header-row"),r.style.position="static"):o.add("ag-row");let s=i.parentElement;for(;s;){if(["ag-header-row","ag-row"].some(l=>s.classList.contains(l))){for(let l=0;l<s.classList.length;l++){let d=s.classList[l];d!="ag-row-position-absolute"&&o.add(d)}break}s=s.parentElement}r.appendChild(e),t.appendChild(r)}};g([w("rowRenderer")],$s.prototype,"rowRenderer",2);g([w("ctrlsService")],$s.prototype,"ctrlsService",2);g([w("rowCssClassCalculator")],$s.prototype,"rowCssClassCalculator",2);g([U],$s.prototype,"postConstruct",1);$s=g([te("autoWidthCalculator")],$s);var pu=class extends j{constructor(i,t){super(),this.createRowCon=i,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.topContainerHeight=0,this.bottomContainerHeight=0}postConstruct(){this.isClientSide=this.rowModel.getType()==="clientSide",this.ctrlsService.whenReady(i=>{this.gridBodyCtrl=i.gridBodyCtrl})}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}getLastPixelOfGroup(i){return this.isClientSide?this.getClientSideLastPixelOfGroup(i):this.getServerSideLastPixelOfGroup(i)}getFirstPixelOfGroup(i){return i.footer?i.sibling.rowTop+i.sibling.rowHeight-1:i.hasChildren()?i.rowTop-1:0}getServerSideLastPixelOfGroup(i){var t,e,r,o;if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(i.isExpandable()||i.footer){if(i.master)return i.detailNode.rowTop+i.detailNode.rowHeight;if(!i.sibling||Math.abs(i.sibling.rowIndex-i.rowIndex)===1){let s=(t=i.childStore)==null?void 0:t.getStoreBounds();return i.footer&&(s=(e=i.sibling.childStore)==null?void 0:e.getStoreBounds()),((r=s?.heightPx)!=null?r:0)+((o=s?.topPx)!=null?o:0)}return i.footer?i.rowTop+i.rowHeight:i.sibling.rowTop+i.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(i){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(i.isExpandable()||i.footer){let t=i.footer&&i.rowIndex===0,e=!i.sibling||Math.abs(i.sibling.rowIndex-i.rowIndex)===1;if(t||e){let r=i.footer?i.sibling:i;for(;r.isExpandable()&&r.expanded;)if(r.master)r=r.detailNode;else if(r.childrenAfterSort){if(r.childrenAfterSort.length===0)break;r=rt(r.childrenAfterSort)}return r.rowTop+r.rowHeight}return i.footer?i.rowTop+i.rowHeight:i.sibling.rowTop+i.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(i){let t=i==="top",e=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(i,new Set,e);let r=t?this.rowRenderer.getFirstVisibleVerticalPixel():this.rowRenderer.getLastVisibleVerticalPixel(),o=new Set,n=d=>{if(o.add(d),t){let u=this.getLastPixelOfGroup(d),c=r+e+d.rowHeight;u<c?d.stickyRowTop=e+(u-c):d.stickyRowTop=e}else{let u=this.getFirstPixelOfGroup(d),c=r-(e+d.rowHeight);u>c?d.stickyRowTop=e-(u-c):d.stickyRowTop=e}e=0,o.forEach(u=>{let c=u.stickyRowTop+u.rowHeight;e<c&&(e=c)})},s=this.areFooterRowsStickySuppressed(),a=this.gos.get("suppressGroupRowsSticky"),l=d=>d.displayed?d.footer?s===!0||s==="grand"&&d.level===-1||s==="group"&&d.level>-1?!1:!o.has(d):d.isExpandable()?a===!0?!1:!o.has(d)&&d.expanded:!1:!1;for(let d=0;d<100;d++){let u=r+e;t||(u=r-e);let c=this.rowModel.getRowIndexAtPixel(u),h=this.rowModel.getRow(c);if(h==null)break;let f=this.getStickyAncestors(h).find(b=>(t?b.rowIndex<c:b.rowIndex>c)&&l(b));if(f){n(f);continue}if((t?h.rowTop<u:h.rowTop+h.rowHeight>u)&&l(h)){n(h);continue}break}return t||o.forEach(d=>{d.stickyRowTop=e-(d.stickyRowTop+d.rowHeight)}),this.refreshNodesAndContainerHeight(i,o,e)}areFooterRowsStickySuppressed(){let i=this.gos.get("suppressStickyTotalRow");if(i===!0)return!0;let t=!!this.gos.get("groupIncludeFooter")||i==="group",e=!!this.gos.get("groupIncludeTotalFooter")||i==="grand";return t&&e?!0:e?"grand":t?"group":!1}canRowsBeSticky(){let i=this.gos.isGroupRowsSticky(),t=this.areFooterRowsStickySuppressed(),e=this.gos.get("suppressGroupRowsSticky");return i&&(!t||!e)}getStickyAncestors(i){let t=[],e=i.footer?i.sibling:i.parent;for(;e;)e.sibling&&t.push(e.sibling),t.push(e),e=e.parent;return t.reverse()}checkStickyRows(){let i=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return i||t}destroyStickyCtrls(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(i){let t=new Set;if(this.stickyTopRowCtrls.some(e=>e.getRowNode()===i)){for(let e=0;e<this.stickyTopRowCtrls.length;e++){let r=this.stickyTopRowCtrls[e].getRowNode();r!==i&&t.add(r)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows();return}for(let e=0;e<this.stickyBottomRowCtrls.length;e++){let r=this.stickyBottomRowCtrls[e].getRowNode();r!==i&&t.add(r)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(i,t,e){let r=i==="top",o=r?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,n={},s=[];for(let c=0;c<o.length;c++){let h=o[c].getRowNode();if(!t.has(h)){n[h.id]=o[c],h.sticky=!1;continue}s.push(o[c])}let a=new Set;for(let c=0;c<s.length;c++)a.add(s[c].getRowNode());let l=[];t.forEach(c=>{a.has(c)||(c.sticky=!0,l.push(this.createRowCon(c,!1,!1)))});let d=!!l.length||s.length!==o.length;r?this.topContainerHeight!==e&&(this.topContainerHeight=e,this.gridBodyCtrl.setStickyTopHeight(e),d=!0):this.bottomContainerHeight!==e&&(this.bottomContainerHeight=e,this.gridBodyCtrl.setStickyBottomHeight(e),d=!0),this.destroyRowCtrls(n,!1);let u=[...s,...l];return u.sort((c,h)=>h.getRowNode().rowIndex-c.getRowNode().rowIndex),r||u.reverse(),u.forEach(c=>c.setRowTop(c.getRowNode().stickyRowTop)),d?(r?this.stickyTopRowCtrls=u:this.stickyBottomRowCtrls=u,!0):!1}};g([w("rowModel")],pu.prototype,"rowModel",2);g([w("rowRenderer")],pu.prototype,"rowRenderer",2);g([w("ctrlsService")],pu.prototype,"ctrlsService",2);g([U],pu.prototype,"postConstruct",1);var Gr=class extends j{constructor(){super(...arguments),this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{let i=()=>{this.getAllCellCtrls().forEach(n=>n.onRangeSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(n=>n.updateRangeBordersIfRangeCount())},e=()=>{this.eventService.addEventListener(m.EVENT_RANGE_SELECTION_CHANGED,i),this.eventService.addEventListener(m.EVENT_COLUMN_MOVED,t),this.eventService.addEventListener(m.EVENT_COLUMN_PINNED,t),this.eventService.addEventListener(m.EVENT_COLUMN_VISIBLE,t)},r=()=>{this.eventService.removeEventListener(m.EVENT_RANGE_SELECTION_CHANGED,i),this.eventService.removeEventListener(m.EVENT_COLUMN_MOVED,t),this.eventService.removeEventListener(m.EVENT_COLUMN_PINNED,t),this.eventService.removeEventListener(m.EVENT_COLUMN_VISIBLE,t)};this.addDestroyFunc(()=>r()),this.addManagedPropertyListener("enableRangeSelection",n=>{n.currentValue?e():r()}),this.gos.get("enableRangeSelection")&&e()}}postConstruct(){this.ctrlsService.whenReady(i=>{this.gridBodyCtrl=i.gridBodyCtrl,this.initialise()})}initialise(){if(this.addManagedListener(this.eventService,m.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,m.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,m.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,m.EVENT_BODY_SCROLL,this.onBodyScroll.bind(this)),this.addManagedListener(this.eventService,m.EVENT_BODY_HEIGHT_CHANGED,this.redraw.bind(this)),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListeners(["suppressCellFocus","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.gos.isGroupRowsSticky()){let i=this.rowModel.getType();(i==="clientSide"||i==="serverSide")&&(this.stickyRowFeature=this.createManagedBean(new pu(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gos.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){let i=this.getKeepDetailRowsCount(),t=i??3;this.cachedRowCtrls=new vT(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){let i=os(this.rowCtrlsByRowIndex),t=os(this.zombieRowCtrls),e=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];t.length>0||e.length>0?this.allRowCtrls=[...i,...t,...e]:this.allRowCtrls=i}onCellFocusChanged(i){this.getAllCellCtrls().forEach(t=>t.onCellFocused(i)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(i))}registerCellEventListeners(){this.addManagedListener(this.eventService,m.EVENT_CELL_FOCUSED,i=>{this.onCellFocusChanged(i)}),this.addManagedListener(this.eventService,m.EVENT_CELL_FOCUS_CLEARED,()=>{this.onCellFocusChanged()}),this.addManagedListener(this.eventService,m.EVENT_FLASH_CELLS,i=>{this.getAllCellCtrls().forEach(t=>t.onFlashCells(i))}),this.addManagedListener(this.eventService,m.EVENT_COLUMN_HOVER_CHANGED,()=>{this.getAllCellCtrls().forEach(i=>i.onColumnHover())}),this.addManagedListener(this.eventService,m.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>{this.getAllCellCtrls().forEach(i=>i.onDisplayedColumnsChanged())}),this.addManagedListener(this.eventService,m.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>{this.printLayout&&this.getAllCellCtrls().forEach(i=>i.onLeftChanged())}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,m.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(i=>i()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getAllGridColumns().forEach(t=>{let e=l=>{this.getAllCellCtrls().forEach(d=>{d.getColumn()===t&&l(d)})},r=()=>{e(l=>l.onLeftChanged())},o=()=>{e(l=>l.onWidthChanged())},n=()=>{e(l=>l.onFirstRightPinnedChanged())},s=()=>{e(l=>l.onLastLeftPinnedChanged())},a=()=>{e(l=>l.onColDefChanged())};t.addEventListener("leftChanged",r),t.addEventListener("widthChanged",o),t.addEventListener("firstRightPinnedChanged",n),t.addEventListener("lastLeftPinnedChanged",s),t.addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{t.removeEventListener("leftChanged",r),t.removeEventListener("widthChanged",o),t.removeEventListener("firstRightPinnedChanged",n),t.removeEventListener("lastLeftPinnedChanged",s),t.removeEventListener("colDefChanged",a)})})}onDomLayoutChanged(){let i=this.gos.isDomLayout("print"),t=i||this.gos.get("embedFullWidthRows"),e=t!==this.embedFullWidthRows||this.printLayout!==i;this.printLayout=i,this.embedFullWidthRows=t,e&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;let i=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(i)}onPageLoaded(i){let t={recycleRows:i.keepRenderedRows,animate:i.animate,newData:i.newData,newPage:i.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(i){let t=[];return this.getAllRowCtrls().forEach(e=>{let r=e.getCellElement(i);r&&t.push(r)}),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(i,t){i.forEach(e=>{e.destroyFirstPass(),e.destroySecondPass()}),i.length=0,t&&t.forEach(e=>{let r=new ks(e,this.beans,!1,!1,this.printLayout);i.push(r)})}onPinnedRowDataChanged(){let i={recycleRows:!0};this.redrawAfterModelUpdate(i)}redrawRow(i,t=!1){var e;if(i.sticky)this.stickyRowFeature.refreshStickyNode(i);else if((e=this.cachedRowCtrls)!=null&&e.has(i)){this.cachedRowCtrls.removeRow(i);return}else{let r=o=>{let n=o[i.rowIndex];n&&n.getRowNode()===i&&(n.destroyFirstPass(),n.destroySecondPass(),o[i.rowIndex]=this.createRowCon(i,!1,!1))};switch(i.rowPinned){case"top":r(this.topRowCtrls);break;case"bottom":r(this.bottomRowCtrls);break;default:r(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(i){if(i!=null){i?.forEach(e=>this.redrawRow(e,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(i){let t=i?.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(t==null)return null;let e=this.gos.getActiveDomElement(),r=this.gos.getDomData(e,Ns.DOM_DATA_KEY_CELL_CTRL),o=this.gos.getDomData(e,ks.DOM_DATA_KEY_ROW_CTRL);return r||o?t:null}redrawAfterModelUpdate(i={}){this.getLockOnRefresh();let t=this.getCellToRestoreFocusToAfterRefresh(i);this.updateContainerHeights(),this.scrollToTopIfNewData(i);let e=!i.domLayoutChanged&&!!i.recycleRows,r=i.animate&&this.gos.isAnimateRows(),o=e?this.getRowsToRecycle():null;e||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature&&this.stickyRowFeature.checkStickyRows(),this.recycleRows(o,r),this.gridBodyCtrl.updateRowCount(),i.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(i){let t=i.newData||i.newPage,e=this.gos.get("suppressScrollOnNewData");t&&!e&&this.gridBodyCtrl.getScrollFeature().scrollToTop()}updateContainerHeights(){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let i=this.paginationProxy.getCurrentPageHeight();i===0&&(i=1),this.rowContainerHeightService.setModelHeight(i)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0}releaseLockOnRefresh(){this.refreshInProgress=!1}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(i){i&&(this.focusService.setRestoreFocusedCell(i),this.onCellFocusChanged(this.beans.gos.addGridCommonParams({rowIndex:i.rowIndex,column:i.column,rowPinned:i.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"mock"})))}stopEditing(i=!1){this.getAllRowCtrls().forEach(t=>{t.stopEditing(i)})}getAllCellCtrls(){let i=[],t=this.getAllRowCtrls(),e=t.length;for(let r=0;r<e;r++){let o=t[r].getAllCellCtrls(),n=o.length;for(let s=0;s<n;s++)i.push(o[s])}return i}getAllRowCtrls(){let i=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],t=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],e=[...this.topRowCtrls,...this.bottomRowCtrls,...i,...t];for(let r in this.rowCtrlsByRowIndex)e.push(this.rowCtrlsByRowIndex[r]);return e}addRenderedRowListener(i,t,e){let r=this.rowCtrlsByRowIndex[t];r&&r.addEventListener(i,e)}flashCells(i={}){this.getCellCtrls(i.rowNodes,i.columns).forEach(t=>t.flashCell(i))}refreshCells(i={}){let t={forceRefresh:i.force,newData:!1,suppressFlash:i.suppressFlash};this.getCellCtrls(i.rowNodes,i.columns).forEach(e=>e.refreshOrDestroyCell(t)),i.rowNodes&&(this.getRowCtrls(i.rowNodes).forEach(e=>{if(!e.isFullWidth())return;e.refreshFullWidth()||this.redrawRow(e.getRowNode(),!0)}),this.dispatchDisplayedRowsChanged(!1))}getCellRendererInstances(i){var t;let e=this.getCellCtrls(i.rowNodes,i.columns).map(n=>n.getCellRenderer()).filter(n=>n!=null);if((t=i.columns)!=null&&t.length)return e;let r=[],o=this.mapRowNodes(i.rowNodes);return this.getAllRowCtrls().forEach(n=>{if(o&&!this.isRowInMap(n.getRowNode(),o)||!n.isFullWidth())return;let s=n.getFullWidthCellRenderers();for(let a=0;a<s.length;a++){let l=s[a];l!=null&&r.push(l)}}),[...r,...e]}getCellEditorInstances(i){let t=[];return this.getCellCtrls(i.rowNodes,i.columns).forEach(e=>{let r=e.getCellEditor();r&&t.push(r)}),t}getEditingCells(){let i=[];return this.getAllCellCtrls().forEach(t=>{if(t.isEditing()){let e=t.getCellPosition();i.push(e)}}),i}mapRowNodes(i){if(!i)return;let t={top:{},bottom:{},normal:{}};return i.forEach(e=>{let r=e.id;switch(e.rowPinned){case"top":t.top[r]=e;break;case"bottom":t.bottom[r]=e;break;default:t.normal[r]=e;break}}),t}isRowInMap(i,t){let e=i.id;switch(i.rowPinned){case"top":return t.top[e]!=null;case"bottom":return t.bottom[e]!=null;default:return t.normal[e]!=null}}getRowCtrls(i){let t=this.mapRowNodes(i),e=this.getAllRowCtrls();return!i||!t?e:e.filter(r=>{let o=r.getRowNode();return this.isRowInMap(o,t)})}getCellCtrls(i,t){let e;W(t)&&(e={},t.forEach(o=>{let n=this.columnModel.getGridColumn(o);W(n)&&(e[n.getId()]=!0)}));let r=[];return this.getRowCtrls(i).forEach(o=>{o.getAllCellCtrls().forEach(n=>{let s=n.getColumn().getId();e&&!e[s]||r.push(n)})}),r}destroy(){this.removeAllRowComps(),super.destroy()}removeAllRowComps(){let i=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(i),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){let i=[];Wi(this.rowCtrlsByRowIndex,(e,r)=>{r.getRowNode().id==null&&i.push(e)}),this.removeRowCtrls(i);let t={};return Wi(this.rowCtrlsByRowIndex,(e,r)=>{let o=r.getRowNode();t[o.id]=r}),this.rowCtrlsByRowIndex={},t}removeRowCtrls(i,t=!1){i.forEach(e=>{let r=this.rowCtrlsByRowIndex[e];r&&(r.destroyFirstPass(t),r.destroySecondPass()),delete this.rowCtrlsByRowIndex[e]})}onBodyScroll(i){i.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(i={}){let{afterScroll:t}=i,e;this.stickyRowFeature&&kf()&&(e=this.getCellToRestoreFocusToAfterRefresh()||void 0);let r=this.firstRenderedRow,o=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let n=!1;this.stickyRowFeature&&(n=this.stickyRowFeature.checkStickyRows());let s=this.firstRenderedRow!==r||this.lastRenderedRow!==o;if(!(t&&!n&&!s)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!n),e!=null)){let a=this.getCellToRestoreFocusToAfterRefresh();e!=null&&a==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(e))}}removeRowCompsNotToDraw(i,t){let e={};i.forEach(n=>e[n]=!0);let o=Object.keys(this.rowCtrlsByRowIndex).filter(n=>!e[n]);this.removeRowCtrls(o,t)}calculateIndexesToDraw(i){let t=Lb(this.firstRenderedRow,this.lastRenderedRow),e=(o,n)=>{let s=n.getRowNode().rowIndex;s!=null&&(s<this.firstRenderedRow||s>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(n)&&t.push(s)};Wi(this.rowCtrlsByRowIndex,e),Wi(i,e),t.sort((o,n)=>o-n);let r=[];for(let o=0;o<t.length;o++){let n=t[o],s=this.paginationProxy.getRow(n);s&&!s.sticky&&r.push(n)}return r}recycleRows(i,t=!1,e=!1){let r=this.calculateIndexesToDraw(i);(this.printLayout||e)&&(t=!1),this.removeRowCompsNotToDraw(r,!t);let o=[];r.forEach(n=>{let s=this.createOrUpdateRowCtrl(n,i,t,e);W(s)&&o.push(s)}),i&&(e&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(i,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(i,t)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(i=!1){let t={type:m.EVENT_DISPLAYED_ROWS_CHANGED,afterScroll:i};this.eventService.dispatchEvent(t)}onDisplayedColumnsChanged(){let i=this.columnModel.isPinningLeft(),t=this.columnModel.isPinningRight();(this.pinningLeft!==i||t!==this.pinningRight)&&(this.pinningLeft=i,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){let i=[];this.getFullWidthRowCtrls().forEach(t=>{let e=t.getRowNode().rowIndex;i.push(e.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(i),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(i){let t=this.mapRowNodes(i);return this.getAllRowCtrls().filter(e=>{if(!e.isFullWidth())return!1;let r=e.getRowNode();return!(t!=null&&!this.isRowInMap(r,t))})}createOrUpdateRowCtrl(i,t,e,r){let o,n=this.rowCtrlsByRowIndex[i];if(n||(o=this.paginationProxy.getRow(i),W(o)&&W(t)&&t[o.id]&&o.alreadyRendered&&(n=t[o.id],t[o.id]=null)),!n)if(o||(o=this.paginationProxy.getRow(i)),W(o))n=this.createRowCon(o,e,r);else return;return o&&(o.alreadyRendered=!0),this.rowCtrlsByRowIndex[i]=n,n}destroyRowCtrls(i,t){let e=[];Wi(i,(r,o)=>{if(o){if(this.cachedRowCtrls&&o.isCacheable()){this.cachedRowCtrls.addRow(o);return}o.destroyFirstPass(!t),t?(this.zombieRowCtrls[o.getInstanceId()]=o,e.push(()=>{o.destroySecondPass(),delete this.zombieRowCtrls[o.getInstanceId()]})):o.destroySecondPass()}}),t&&(e.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),$C(e))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){let i=this.getRowBuffer(),t=this.gos.getRowHeightAsNumber();return i*t}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let i,t;if(!this.paginationProxy.isRowsToRender())i=0,t=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),i=this.paginationProxy.getPageFirstRow(),t=this.paginationProxy.getPageLastRow();else{let a=this.getRowBufferInPixels(),l=this.ctrlsService.getGridBodyCtrl(),d=this.gos.get("suppressRowVirtualisation"),u=!1,c,h;do{let x=this.paginationProxy.getPixelOffset(),{pageFirstPixel:S,pageLastPixel:R}=this.paginationProxy.getCurrentPagePixelRange(),I=this.rowContainerHeightService.getDivStretchOffset(),F=l.getScrollFeature().getVScrollPosition(),L=F.top,V=F.bottom;d?(c=S+I,h=R+I):(c=Math.max(L+x-a,S)+I,h=Math.min(V+x+a,R)+I),this.firstVisibleVPixel=Math.max(L+x,S)+I,this.lastVisibleVPixel=Math.min(V+x,R)+I,u=this.ensureAllRowsInRangeHaveHeightsCalculated(c,h)}while(u);let p=this.paginationProxy.getRowIndexAtPixel(c),f=this.paginationProxy.getRowIndexAtPixel(h),C=this.paginationProxy.getPageFirstRow(),b=this.paginationProxy.getPageLastRow();p<C&&(p=C),f>b&&(f=b),i=p,t=f}let e=this.gos.isDomLayout("normal"),r=this.gos.get("suppressMaxRenderedRowRestriction"),o=Math.max(this.getRowBuffer(),500);e&&!r&&t-i>o&&(t=i+o);let n=i!==this.firstRenderedRow,s=t!==this.lastRenderedRow;if(n||s){this.firstRenderedRow=i,this.lastRenderedRow=t;let a={type:m.EVENT_VIEWPORT_CHANGED,firstRow:i,lastRow:t};this.eventService.dispatchEvent(a)}}dispatchFirstDataRenderedEvent(){if(this.dataFirstRenderedFired)return;this.dataFirstRenderedFired=!0;let i={type:m.EVENT_FIRST_DATA_RENDERED,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent(i)})}ensureAllRowsInRangeHaveHeightsCalculated(i,t){let e=this.paginationProxy.ensureRowHeightsValid(i,t,-1,-1);return e&&this.updateContainerHeights(),e}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(i){let r=i.getRowNode(),o=this.focusService.isRowNodeFocused(r),n=i.isEditing(),s=r.detail;return o||n||s?!!this.paginationProxy.isRowPresent(r):!1}createRowCon(i,t,e){let r=this.cachedRowCtrls?this.cachedRowCtrls.getRow(i):null;if(r)return r;let o=this.gos.get("suppressAnimationFrame"),n=e&&!o&&!this.printLayout;return new ks(i,this.beans,t,n,this.printLayout)}getRenderedNodes(){let i=this.rowCtrlsByRowIndex;return Object.values(i).map(t=>t.getRowNode())}getRowByPosition(i){let t,{rowIndex:e}=i;switch(i.rowPinned){case"top":t=this.topRowCtrls[e];break;case"bottom":t=this.bottomRowCtrls[e];break;default:t=this.rowCtrlsByRowIndex[e],t||(t=this.getStickyTopRowCtrls().find(r=>r.getRowNode().rowIndex===e)||null,t||(t=this.getStickyBottomRowCtrls().find(r=>r.getRowNode().rowIndex===e)||null));break}return t}isRangeInRenderedViewport(i,t){if(i==null||t==null)return!1;let r=i>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!r}};g([w("animationFrameService")],Gr.prototype,"animationFrameService",2);g([w("paginationProxy")],Gr.prototype,"paginationProxy",2);g([w("columnModel")],Gr.prototype,"columnModel",2);g([w("pinnedRowModel")],Gr.prototype,"pinnedRowModel",2);g([w("rowModel")],Gr.prototype,"rowModel",2);g([w("focusService")],Gr.prototype,"focusService",2);g([w("beans")],Gr.prototype,"beans",2);g([w("rowContainerHeightService")],Gr.prototype,"rowContainerHeightService",2);g([w("ctrlsService")],Gr.prototype,"ctrlsService",2);g([U],Gr.prototype,"postConstruct",1);Gr=g([te("rowRenderer")],Gr);var vT=class{constructor(i){this.entriesMap={},this.entriesList=[],this.maxCount=i}addRow(i){if(this.entriesMap[i.getRowNode().id]=i,this.entriesList.push(i),i.setCached(!0),this.entriesList.length>this.maxCount){let t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(i){if(i==null||i.id==null)return null;let t=this.entriesMap[i.id];return t?(this.removeFromCache(t),t.setCached(!1),t.getRowNode()!=i?null:t):null}has(i){return this.entriesMap[i.id]!=null}removeRow(i){let t=i.id,e=this.entriesMap[t];delete this.entriesMap[t],br(this.entriesList,e)}removeFromCache(i){let t=i.getRowNode().id;delete this.entriesMap[t],br(this.entriesList,i)}getEntries(){return this.entriesList}},Gd=class extends j{init(){this.setPinnedTopRowData(),this.setPinnedBottomRowData(),this.addManagedPropertyListener("pinnedTopRowData",()=>this.setPinnedTopRowData()),this.addManagedPropertyListener("pinnedBottomRowData",()=>this.setPinnedBottomRowData())}isEmpty(i){let t=i==="top"?this.pinnedTopRows:this.pinnedBottomRows;return Qr(t)}isRowsToRender(i){return!this.isEmpty(i)}getRowAtPixel(i,t){let e=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(Qr(e))return 0;for(let r=0;r<e.length;r++){let o=e[r];if(o.rowTop+o.rowHeight-1>=i)return r}return e.length-1}setPinnedTopRowData(){let i=this.gos.get("pinnedTopRowData");this.pinnedTopRows=this.createNodesFromData(i,!0);let t={type:m.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(t)}setPinnedBottomRowData(){let i=this.gos.get("pinnedBottomRowData");this.pinnedBottomRows=this.createNodesFromData(i,!1);let t={type:m.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(t)}createNodesFromData(i,t){let e=[];if(i){let r=0;i.forEach((o,n)=>{let s=new Ge(this.beans);s.data=o;let a=t?Ge.ID_PREFIX_TOP_PINNED:Ge.ID_PREFIX_BOTTOM_PINNED;s.id=a+n,s.rowPinned=t?"top":"bottom",s.setRowTop(r),s.setRowHeight(this.gos.getRowHeightForNode(s).height),s.setRowIndex(n),r+=s.rowHeight,e.push(s)})}return e}getPinnedTopRowData(){return this.pinnedTopRows}getPinnedBottomRowData(){return this.pinnedBottomRows}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedTopRowCount(){return this.pinnedTopRows?this.pinnedTopRows.length:0}getPinnedBottomRowCount(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0}getPinnedTopRow(i){return this.pinnedTopRows[i]}getPinnedBottomRow(i){return this.pinnedBottomRows[i]}forEachPinnedTopRow(i){Qr(this.pinnedTopRows)||this.pinnedTopRows.forEach(i)}forEachPinnedBottomRow(i){Qr(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(i)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getTotalHeight(i){if(!i||i.length===0)return 0;let t=rt(i);return t.rowTop+t.rowHeight}};g([w("beans")],Gd.prototype,"beans",2);g([U],Gd.prototype,"init",1);Gd=g([te("pinnedRowModel")],Gd);var lp=class{constructor(i,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=i,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(i,t){if(i.children)for(let e=0;e<i.children.length;e++)this.depthFirstSearchChangedPath(i.children[e],t);t(i.rowNode)}depthFirstSearchEverything(i,t,e){if(i.childrenAfterGroup)for(let r=0;r<i.childrenAfterGroup.length;r++){let o=i.childrenAfterGroup[r];o.childrenAfterGroup?this.depthFirstSearchEverything(i.childrenAfterGroup[r],t,e):e&&t(o)}t(i)}forEachChangedNodeDepthFirst(i,t=!1,e=!1){this.active&&!e?this.depthFirstSearchChangedPath(this.pathRoot,i):this.depthFirstSearchEverything(this.pathRoot.rowNode,i,t)}executeFromRootNode(i){i(this.pathRoot.rowNode)}createPathItems(i){let t=i,e=0;for(;!this.mapToItems[t.id];){let r={rowNode:t,children:null};this.mapToItems[t.id]=r,e++,t=t.parent}return e}populateColumnsMap(i,t){if(!this.keepingColumns||!t)return;let e=i;for(;e;)this.nodeIdsToColumns[e.id]||(this.nodeIdsToColumns[e.id]={}),t.forEach(r=>this.nodeIdsToColumns[e.id][r.getId()]=!0),e=e.parent}linkPathItems(i,t){let e=i;for(let r=0;r<t;r++){let o=this.mapToItems[e.id],n=this.mapToItems[e.parent.id];n.children||(n.children=[]),n.children.push(o),e=e.parent}}addParentNode(i,t){if(!i||i.isRowPinned())return;let e=this.createPathItems(i);this.linkPathItems(i,e),this.populateColumnsMap(i,t)}canSkip(i){return this.active&&!this.mapToItems[i.id]}getValueColumnsForNode(i,t){if(!this.keepingColumns)return t;let e=this.nodeIdsToColumns[i.id];return t.filter(o=>e[o.getId()])}getNotValueColumnsForNode(i,t){if(!this.keepingColumns)return null;let e=this.nodeIdsToColumns[i.id];return t.filter(o=>!e[o.getId()])}},Dl=class Fs extends j{constructor(t){super(),this.state=Fs.STATE_WAITING_TO_LOAD,this.version=0,this.id=t}getId(){return this.id}load(){this.state=Fs.STATE_LOADING,this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state=Fs.STATE_WAITING_TO_LOAD}getState(){return this.state}pageLoadFailed(t){this.isRequestMostRecentAndLive(t)&&(this.state=Fs.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)}success(t,e){this.successCommon(t,e)}pageLoaded(t,e,r){this.successCommon(t,{rowData:e,rowCount:r})}isRequestMostRecentAndLive(t){let e=t===this.version,r=this.isAlive();return e&&r}successCommon(t,e){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(t)&&(this.state=Fs.STATE_LOADED,this.processServerResult(e))}dispatchLoadCompleted(t=!0){let e={type:Fs.EVENT_LOAD_COMPLETE,success:t,block:this};this.dispatchEvent(e)}};Dl.EVENT_LOAD_COMPLETE="loadComplete";Dl.STATE_WAITING_TO_LOAD="needsLoading";Dl.STATE_LOADING="loading";Dl.STATE_LOADED="loaded";Dl.STATE_FAILED="failed";var pf=Dl,fn=class extends j{constructor(){super(...arguments),this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();let i=this.gos.get("blockLoadDebounceMillis");i&&i>0&&(this.checkBlockToLoadDebounce=He.debounce(this.performCheckBlocksToLoad.bind(this),i))}setBeans(i){this.logger=i.create("RowNodeBlockLoader")}getMaxConcurrentDatasourceRequests(){let i=this.gos.get("maxConcurrentDatasourceRequests");if(i==null)return 2;if(!(i<=0))return i}addBlock(i){this.blocks.push(i),i.addEventListener(pf.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(i){He.removeFromArray(this.blocks,i)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchEvent({type:fn.BLOCK_LOADED_EVENT}),this.activeBlockLoadsCount==0&&this.dispatchEvent({type:fn.BLOCK_LOADER_FINISHED_EVENT})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.logger.log("checkBlockToLoad: max loads exceeded");return}let i=this.getAvailableLoadingCount(),t=this.blocks.filter(e=>e.getState()===pf.STATE_WAITING_TO_LOAD).slice(0,i);this.registerLoads(t.length),t.forEach(e=>e.load()),this.printCacheStatus()}getBlockState(){if(this.gos.isRowModelType("serverSide"))return this.rowModel.getBlockStates();let i={};return this.blocks.forEach(t=>{let{id:e,state:r}=t.getBlockStateJson();i[e]=r}),i}printCacheStatus(){this.logger.isLogging()&&this.logger.log(`printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(i){this.activeBlockLoadsCount+=i}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}};fn.BLOCK_LOADED_EVENT="blockLoaded";fn.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished";g([w("rowModel")],fn.prototype,"rowModel",2);g([U],fn.prototype,"postConstruct",1);g([xo(0,Zr("loggerFactory"))],fn.prototype,"setBeans",1);fn=g([te("rowNodeBlockLoader")],fn);var Hd=class extends j{constructor(){super(...arguments),this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.pixelOffset=0,this.masterRowCount=0}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedListener(this.eventService,m.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this)),this.onModelUpdated()}ensureRowHeightsValid(i,t,e,r){let o=this.rowModel.ensureRowHeightsValid(i,t,this.getPageFirstRow(),this.getPageLastRow());return o&&this.calculatePages(),o}isPaginateChildRows(){return this.gos.get("groupRemoveSingleChildren")||this.gos.get("groupRemoveLowestSingleChildren")?!0:this.gos.get("paginateChildRows")}onModelUpdated(i){this.calculatePages();let t={type:m.EVENT_PAGINATION_CHANGED,animate:i?i.animate:!1,newData:i?i.newData:!1,newPage:i?i.newPage:!1,newPageSize:i?i.newPageSize:!1,keepRenderedRows:i?i.keepRenderedRows:!1};this.eventService.dispatchEvent(t)}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages();let i={type:m.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!1,keepRenderedRows:!0};this.eventService.dispatchEvent(i)}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(i){if(!this.active||this.currentPage===i||typeof this.currentPage!="number")return;this.currentPage=i,this.calculatePages();let t={type:m.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!0,newPageSize:!1,keepRenderedRows:!1};this.eventService.dispatchEvent(t)}getPixelOffset(){return this.pixelOffset}getRow(i){return this.rowModel.getRow(i)}getRowNode(i){return this.rowModel.getRowNode(i)}getRowIndexAtPixel(i){return this.rowModel.getRowIndexAtPixel(i)}getCurrentPageHeight(){return Te(this.topRowBounds)||Te(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){let i=this.topRowBounds?this.topRowBounds.rowTop:0,t=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:i,pageLastPixel:t}}isRowPresent(i){return this.rowModel.isRowPresent(i)?i.rowIndex>=this.topDisplayedRowIndex&&i.rowIndex<=this.bottomDisplayedRowIndex:!1}isEmpty(){return this.rowModel.isEmpty()}isRowsToRender(){return this.rowModel.isRowsToRender()}forEachNode(i){return this.rowModel.forEachNode(i)}forEachNodeOnPage(i){let t=this.getPageFirstRow(),e=this.getPageLastRow();for(let r=t;r<=e;r++){let o=this.getRow(r);o&&i(o)}}getType(){return this.rowModel.getType()}getRowBounds(i){let t=this.rowModel.getRowBounds(i);return t.rowIndex=i,t}getPageFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getPageLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getRowCount(){return this.rowModel.getRowCount()}getPageForIndex(i){return Math.floor(i/this.pageSize)}goToPageWithIndex(i){if(!this.active)return;let t=this.getPageForIndex(i);this.goToPage(t)}isRowInPage(i){return this.active?this.getPageForIndex(i.rowIndex)===this.currentPage:!0}isLastPageFound(){return this.rowModel.isLastRowIndexKnown()}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){let i=this.rowModel.getRowCount(),t=Math.floor(i/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(i){this.currentPage=i}get pageSize(){return W(this.pageSizeAutoCalculated)?this.pageSizeAutoCalculated:W(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:W(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:W(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;let i=this.pageSizeAutoCalculated;if(this.pageSizeAutoCalculated=void 0,this.pageSize===i)return;this.calculatePages();let t={type:m.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!0,keepRenderedRows:!1};this.eventService.dispatchEvent(t)}setPageSize(i,t){let e=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=i;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=i,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=i;break;case"gridOptions":this.pageSizeFromGridOptions=i,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}if(e!==this.pageSize){this.calculatePages();let r={type:m.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!0,keepRenderedRows:!0};this.eventService.dispatchEvent(r)}}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(W(this.topRowBounds)?this.topRowBounds.rowTop:0)}setPixelOffset(i){this.pixelOffset!==i&&(this.pixelOffset=i,this.eventService.dispatchEvent({type:m.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}let i=this.masterRowCount-1;this.totalPages=Math.floor(i/this.pageSize)+1,this.adjustCurrentPageIfInvalid();let t=this.pageSize*this.currentPage,e=this.pageSize*(this.currentPage+1)-1;if(e>i&&(e=i),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),e===i)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{let r=this.rowModel.getTopLevelRowDisplayedIndex(e+1);this.bottomDisplayedRowIndex=r-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}let i=this.masterRowCount-1;this.totalPages=Math.floor(i/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>i&&(this.bottomDisplayedRowIndex=i)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}};g([w("rowModel")],Hd.prototype,"rowModel",2);g([U],Hd.prototype,"postConstruct",1);Hd=g([te("paginationProxy")],Hd);var _h=class extends j{processAllCellClasses(i,t,e,r){this.processClassRules(void 0,i.cellClassRules,t,e,r),this.processStaticCellClasses(i,t,e)}processClassRules(i,t,e,r,o){if(t==null&&i==null)return;let n={},s={},a=(l,d)=>{l.split(" ").forEach(u=>{u.trim()!=""&&d(u)})};if(t){let l=Object.keys(t);for(let d=0;d<l.length;d++){let u=l[d],c=t[u],h;typeof c=="string"?h=this.expressionService.evaluate(c,e):typeof c=="function"&&(h=c(e)),a(u,p=>{h?n[p]=!0:s[p]=!0})}}i&&o&&Object.keys(i).forEach(l=>a(l,d=>{n[d]||(s[d]=!0)})),o&&Object.keys(s).forEach(o),Object.keys(n).forEach(r)}getStaticCellClasses(i,t){let{cellClass:e}=i;if(!e)return[];let r;return typeof e=="function"?r=e(t):r=e,typeof r=="string"&&(r=[r]),r||[]}processStaticCellClasses(i,t,e){this.getStaticCellClasses(i,t).forEach(o=>{e(o)})}};g([w("expressionService")],_h.prototype,"expressionService",2);_h=g([te("stylingService")],_h);var n0=class extends Kh{constructor(i){super(i,"ag-toggle-button")}setValue(i,t){return super.setValue(i,t),this.addOrRemoveCssClass("ag-selected",this.getValue()),this}},yT=class extends Do{constructor(i){super(i,"ag-text-area",null,"textarea")}setValue(i,t){let e=super.setValue(i,t);return this.eInput.value=i,e}setCols(i){return this.eInput.cols=i,this}setRows(i){return this.eInput.rows=i,this}},CT=class extends ea{constructor(i){super(i,"ag-date-field","date")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this));let i=gn();this.addManagedListener(this.eInput,"mousedown",()=>{this.isDisabled()||i||this.eInput.focus()}),this.eInput.step="any"}onWheel(i){this.gos.getActiveDomElement()===this.eInput&&i.preventDefault()}setMin(i){var t;let e=i instanceof Date?(t=Jr(i??null,!1))!=null?t:void 0:i;return this.min===e?this:(this.min=e,pn(this.eInput,"min",e),this)}setMax(i){var t;let e=i instanceof Date?(t=Jr(i??null,!1))!=null?t:void 0:i;return this.max===e?this:(this.max=e,pn(this.eInput,"max",e),this)}setStep(i){return this.step===i?this:(this.step=i,pn(this.eInput,"step",i),this)}getDate(){var i;if(this.eInput.validity.valid)return(i=Sr(this.getValue()))!=null?i:void 0}setDate(i,t){this.setValue(Jr(i??null,!1),t)}},bT=class extends Do{constructor(i){super(i,"ag-range-field","range")}postConstruct(){super.postConstruct();let{min:i,max:t,step:e}=this.config;i!=null&&this.setMinValue(i),t!=null&&this.setMaxValue(t),this.setStep(e||1)}addInputListeners(){this.addManagedListener(this.eInput,"input",i=>{let t=i.target.value;this.setValue(t)})}setMinValue(i){return this.min=i,this.eInput.setAttribute("min",i.toString()),this}setMaxValue(i){return this.max=i,this.eInput.setAttribute("max",i.toString()),this}setStep(i){return this.eInput.setAttribute("step",i.toString()),this}setValue(i,t){this.min!=null&&(i=Math.max(parseFloat(i),this.min).toString()),this.max!=null&&(i=Math.min(parseFloat(i),this.max).toString());let e=super.setValue(i,t);return this.eInput.value=i,e}},Cm=class extends Pe{constructor(i,t){super('<div class="ag-rich-select-row" role="presentation"></div>'),this.params=i,this.wrapperEl=t}postConstruct(){this.addManagedListener(this.getGui(),"click",this.onClick.bind(this))}setState(i){let t="";this.params.valueFormatter&&(t=this.params.valueFormatter(i)),this.populateWithRenderer(i,t)||this.populateWithoutRenderer(i,t),this.value=i}highlightString(i){let{parsedValue:t}=this;if(this.params.cellRenderer||!W(t))return;let e=W(i);if(e){let r=t?.toLocaleLowerCase().indexOf(i.toLocaleLowerCase());if(r>=0){let o=r+i.length,n=ti(t.slice(0,r),!0),s=ti(t.slice(r,o),!0),a=ti(t.slice(o));this.renderValueWithoutRenderer(`${n}<span class="ag-rich-select-row-text-highlight">${s}</span>${a}`)}else e=!1}e||this.renderValueWithoutRenderer(t)}updateHighlighted(i){var t;let e=this.getGui(),r=`ag-rich-select-row-${this.getCompId()}`;if((t=e.parentElement)==null||t.setAttribute("id",r),i){let o=this.getParentComponent().getAriaElement();If(o,r),this.wrapperEl.setAttribute("data-active-option",r)}nl(e.parentElement,i),this.addOrRemoveCssClass("ag-rich-select-row-selected",i)}populateWithoutRenderer(i,t){let e=this.gos.getDocument(),r=this.getGui(),o=e.createElement("span");o.style.overflow="hidden",o.style.textOverflow="ellipsis";let n=ti(W(t)?t:i,!0);this.parsedValue=W(n)?n:null,r.appendChild(o),this.renderValueWithoutRenderer(n),this.setTooltip({newTooltipText:this.parsedValue,shouldDisplayTooltip:()=>o.scrollWidth>o.clientWidth})}renderValueWithoutRenderer(i){let t=this.getGui().querySelector("span");t&&(t.innerHTML=W(i)?i:"&nbsp;")}populateWithRenderer(i,t){let e,r;return this.params.cellRenderer&&(r=this.userComponentFactory.getCellRendererDetails(this.params,{value:i,valueFormatted:t,setTooltip:(o,n)=>{this.setTooltip({newTooltipText:o,shouldDisplayTooltip:n})}})),r&&(e=r.newAgStackInstance()),e&&Xf(e,this.getGui()),e?(e.then(o=>{this.addDestroyFunc(()=>{this.getContext().destroyBean(o)})}),!0):!1}onClick(){let i=this.getParentComponent(),t={type:m.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:!1,value:this.value};i?.dispatchEvent(t)}};g([w("userComponentFactory")],Cm.prototype,"userComponentFactory",2);g([U],Cm.prototype,"postConstruct",1);var gu=class s0 extends hu{constructor(t){super(s0.getTemplate(t?.cssIdentifier||"default")),this.renderedRows=new Map,this.rowHeight=20,this.pageSize=-1,this.isScrolling=!1,this.isHeightFromTheme=!0;let{cssIdentifier:e="default",ariaRole:r="listbox",listName:o}=t||{};this.cssIdentifier=e,this.ariaRole=r,this.listName=o}postConstruct(){this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:t=>this.onFocusIn(t),onFocusOut:t=>this.onFocusOut(t),focusInnerElement:t=>this.focusInnerElement(t),onTabKeyDown:t=>this.onTabKeyDown(t),handleKeyDown:t=>this.handleKeyDown(t)}),this.setAriaProperties(),this.addManagedListener(this.eventService,m.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanged.bind(this))}onGridStylesChanged(){this.rowHeight=this.getItemHeight(),this.refresh()}setAriaProperties(){let e=this.localeService.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),r=this.eContainer;Bt(r,this.ariaRole),Vr(r,e)}addResizeObserver(){let t=()=>this.animationFrameService.requestAnimationFrame(()=>this.drawVirtualRows()),e=this.resizeObserverService.observeResize(this.getGui(),t);this.addDestroyFunc(e)}focusInnerElement(t){this.focusRow(t?this.model.getRowCount()-1:0)}onFocusIn(t){let e=t.target;e.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=mb(e)-1)}onFocusOut(t){this.getFocusableElement().contains(t.relatedTarget)||(this.lastFocusedRowIndex=null)}handleKeyDown(t){switch(t.key){case z.UP:case z.DOWN:this.navigate(t.key===z.UP)&&t.preventDefault();break;case z.PAGE_HOME:case z.PAGE_END:case z.PAGE_UP:case z.PAGE_DOWN:this.navigateToPage(t.key)!==null&&t.preventDefault();break}}onTabKeyDown(t){this.navigate(t.shiftKey)?t.preventDefault():(Ro(t),this.forceFocusOutOfContainer(t.shiftKey))}navigate(t){if(this.lastFocusedRowIndex==null)return!1;let e=this.lastFocusedRowIndex+(t?-1:1);return e<0||e>=this.model.getRowCount()?!1:(this.focusRow(e),!0)}navigateToPage(t,e="focused"){let r=!1;e==="focused"&&(e=this.getLastFocusedRow(),r=!0);let o=this.model.getRowCount()-1,n=-1;return t===z.PAGE_HOME?n=0:t===z.PAGE_END?n=o:t===z.PAGE_DOWN?n=Math.min(e+this.pageSize,o):t===z.PAGE_UP&&(n=Math.max(e-this.pageSize,0)),n===-1?null:(r?this.focusRow(n):this.ensureIndexVisible(n),n)}getLastFocusedRow(){return this.lastFocusedRowIndex}focusRow(t){this.isScrolling||(this.isScrolling=!0,this.ensureIndexVisible(t),this.animationFrameService.requestAnimationFrame(()=>{if(this.isScrolling=!1,!this.isAlive())return;let e=this.renderedRows.get(t);e&&e.eDiv.focus()}))}getComponentAt(t){let e=this.renderedRows.get(t);return e&&e.rowComponent}forEachRenderedRow(t){this.renderedRows.forEach((e,r)=>t(e.rowComponent,r))}static getTemplate(t){return`<div class="ag-virtual-list-viewport ag-${t}-virtual-list-viewport" role="presentation">
                <div class="ag-virtual-list-container ag-${t}-virtual-list-container" ref="eContainer"></div>
            </div>`}getItemHeight(){return this.isHeightFromTheme?this.environment.getListItemHeight():this.rowHeight}ensureIndexVisible(t,e=!0){let r=this.model.getRowCount();if(typeof t!="number"||t<0||t>=r)return console.warn("AG Grid: invalid row index for ensureIndexVisible: "+t),!1;let o=t*this.rowHeight,n=o+this.rowHeight,s=this.getGui(),a=s.scrollTop,l=s.offsetHeight,d=a+l,u=e?0:this.rowHeight,c=a>o+u,h=d<n-u;if(c)return s.scrollTop=o,!0;if(h){let p=n-l;return s.scrollTop=p,!0}return!1}setComponentCreator(t){this.componentCreator=t}setComponentUpdater(t){this.componentUpdater=t}getRowHeight(){return this.rowHeight}getScrollTop(){return this.getGui().scrollTop}setRowHeight(t){this.isHeightFromTheme=!1,this.rowHeight=t,this.refresh()}refresh(t){if(this.model==null||!this.isAlive())return;let e=this.model.getRowCount();this.eContainer.style.height=`${e*this.rowHeight}px`,xf(()=>this.eContainer.clientHeight>=e*this.rowHeight,()=>{this.isAlive()&&(this.canSoftRefresh(t)?this.drawVirtualRows(!0):(this.clearVirtualRows(),this.drawVirtualRows()))})}canSoftRefresh(t){return!!(t&&this.renderedRows.size&&typeof this.model.areRowsEqual=="function"&&this.componentUpdater)}clearVirtualRows(){this.renderedRows.forEach((t,e)=>this.removeRow(e))}drawVirtualRows(t){if(!this.isAlive()||!this.model)return;let e=this.getGui(),r=e.scrollTop,o=r+e.offsetHeight,n=Math.floor(r/this.rowHeight),s=Math.floor(o/this.rowHeight);this.pageSize=Math.floor((o-r)/this.rowHeight),this.ensureRowsRendered(n,s,t)}ensureRowsRendered(t,e,r){this.renderedRows.forEach((o,n)=>{(n<t||n>e)&&n!==this.lastFocusedRowIndex&&this.removeRow(n)}),r&&this.refreshRows();for(let o=t;o<=e;o++)this.renderedRows.has(o)||o<this.model.getRowCount()&&this.insertRow(o)}insertRow(t){let e=this.model.getRow(t),r=document.createElement("div");r.classList.add("ag-virtual-list-item",`ag-${this.cssIdentifier}-virtual-list-item`),Bt(r,this.ariaRole==="tree"?"treeitem":"option"),kh(r,this.model.getRowCount()),Vh(r,t+1),r.setAttribute("tabindex","-1"),r.style.height=`${this.rowHeight}px`,r.style.top=`${this.rowHeight*t}px`;let o=this.componentCreator(e,r);o.addGuiEventListener("focusin",()=>this.lastFocusedRowIndex=t),r.appendChild(o.getGui()),this.renderedRows.has(t-1)?this.renderedRows.get(t-1).eDiv.insertAdjacentElement("afterend",r):this.renderedRows.has(t+1)?this.renderedRows.get(t+1).eDiv.insertAdjacentElement("beforebegin",r):this.eContainer.appendChild(r),this.renderedRows.set(t,{rowComponent:o,eDiv:r,value:e})}removeRow(t){let e=this.renderedRows.get(t);this.eContainer.removeChild(e.eDiv),this.destroyBean(e.rowComponent),this.renderedRows.delete(t)}refreshRows(){let t=this.model.getRowCount();this.renderedRows.forEach((e,r)=>{var o,n;if(r>=t)this.removeRow(r);else{let s=this.model.getRow(r);(n=(o=this.model).areRowsEqual)!=null&&n.call(o,e.value,s)?this.componentUpdater(s,e.rowComponent):this.removeRow(r)}})}addScrollListener(){this.addGuiEventListener("scroll",()=>this.drawVirtualRows(),{passive:!0})}setModel(t){this.model=t}getAriaElement(){return this.eContainer}destroy(){this.isAlive()&&(this.clearVirtualRows(),super.destroy())}};g([w("resizeObserverService")],gu.prototype,"resizeObserverService",2);g([w("animationFrameService")],gu.prototype,"animationFrameService",2);g([Q("eContainer")],gu.prototype,"eContainer",2);g([U],gu.prototype,"postConstruct",1);var a0=gu,wT=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-rich-select-value ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,dp=class extends Js{constructor(i){var t,e;super(Pt(he({pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"ag-list",className:"ag-rich-select",pickerIcon:"smallDown",ariaRole:"combobox",template:(t=i?.template)!=null?t:wT,modalPicker:!1},i),{maxPickerHeight:(e=i?.maxPickerHeight)!=null?e:"calc(var(--ag-row-height) * 6.5)"})),this.searchString="",this.highlightedItem=-1,this.lastRowHovered=-1,this.searchStringCreator=null;let{cellRowHeight:r,value:o,valueList:n,searchStringCreator:s}=i||{};r!=null&&(this.cellRowHeight=r),o!==void 0&&(this.value=o),n!=null&&(this.values=n),s&&(this.searchStringCreator=s)}postConstruct(){super.postConstruct(),this.createLoadingElement(),this.createListComponent();let{allowTyping:i,placeholder:t}=this.config;i?(this.eInput.setAutoComplete(!1).setInputPlaceholder(t),this.eDisplayField.classList.add("ag-hidden")):this.eInput.setDisplayed(!1),this.eWrapper.tabIndex=this.gos.get("tabIndex");let{searchDebounceDelay:e=300}=this.config;this.clearSearchString=Ji(this.clearSearchString,e),this.renderSelectedValue(),i&&(this.eInput.onValueChange(r=>this.searchTextFromString(r)),this.addManagedListener(this.eWrapper,"focus",this.onWrapperFocus.bind(this))),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))}createLoadingElement(){let i=this.gos.getDocument(),t=this.localeService.getLocaleTextFunc(),e=i.createElement("div");e.classList.add("ag-loading-text"),e.innerText=t("loadingOoo","Loading..."),this.eLoading=e}createListComponent(){this.listComponent=this.createBean(new a0({cssIdentifier:"rich-select"})),this.listComponent.setComponentCreator(this.createRowComponent.bind(this));let i=(a,l)=>{};this.listComponent.setComponentUpdater(i),this.listComponent.setParentComponent(this),this.addManagedListener(this.listComponent,m.EVENT_FIELD_PICKER_VALUE_SELECTED,a=>{this.onListValueSelected(a.value,a.fromEnterKey)});let{cellRowHeight:t}=this;t&&this.listComponent.setRowHeight(t);let e=this.listComponent.getGui(),r=this.listComponent.getAriaElement();this.addManagedListener(e,"mousemove",this.onPickerMouseMove.bind(this)),this.addManagedListener(e,"mousedown",a=>a.preventDefault()),e.classList.add("ag-rich-select-list");let o=`ag-rich-select-list-${this.listComponent.getCompId()}`;r.setAttribute("id",o);let s=this.localeService.getLocaleTextFunc()(this.config.pickerAriaLabelKey,this.config.pickerAriaLabelValue);Vr(r,s),Af(this.eWrapper,r)}renderSelectedValue(){let{value:i,eDisplayField:t,config:e}=this,{allowTyping:r,initialInputValue:o}=this.config,n=this.config.valueFormatter?this.config.valueFormatter(i):i;if(r){this.eInput.setValue(o??n);return}let s;e.cellRenderer&&(s=this.userComponentFactory.getCellRendererDetails(this.config,{value:i,valueFormatted:n}));let a;if(s&&(a=s.newAgStackInstance()),a)Zt(t),Xf(a,t),a.then(l=>{this.addDestroyFunc(()=>this.getContext().destroyBean(l))});else{if(W(this.value))t.innerText=n,t.classList.remove("ag-display-as-placeholder");else{let{placeholder:l}=e;W(l)?(t.innerHTML=`${ti(l)}`,t.classList.add("ag-display-as-placeholder")):Zt(t)}this.setTooltip({newTooltipText:n??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth})}}getCurrentValueIndex(){let{currentList:i,value:t}=this;if(t==null||!i)return-1;for(let e=0;e<i.length;e++)if(i[e]===t)return e;return-1}highlightFilterMatch(){var i;(i=this.listComponent)==null||i.forEachRenderedRow((t,e)=>{t.highlightString(this.searchString)})}highlightSelectedValue(i){var t;i==null&&(i=this.getCurrentValueIndex()),this.highlightedItem=i,(t=this.listComponent)==null||t.forEachRenderedRow((e,r)=>{let o=i===-1?!1:this.highlightedItem===r;e.updateHighlighted(o)})}setRowHeight(i){i!==this.cellRowHeight&&(this.cellRowHeight=i),this.listComponent&&this.listComponent.setRowHeight(i)}createPickerComponent(){let{values:i}=this;return i&&this.setValueList({valueList:i}),this.listComponent}setSearchStringCreator(i){this.searchStringCreator=i}setValueList(i){let{valueList:t,refresh:e}=i;this.listComponent&&this.currentList!==t&&(this.currentList=t,this.listComponent.setModel({getRowCount:()=>t.length,getRow:r=>t[r],areRowsEqual:(r,o)=>r===o}),e&&(this.values?this.listComponent.refresh(!0):(this.values=t,this.isPickerDisplayed&&this.showCurrentValueInPicker())))}showPicker(){super.showPicker(),this.showCurrentValueInPicker(),this.displayOrHidePicker()}showCurrentValueInPicker(){var i,t;if(!this.listComponent)return;if(!this.currentList){this.isPickerDisplayed&&this.eLoading&&this.listComponent.appendChild(this.eLoading);return}(i=this.eLoading)!=null&&i.offsetParent&&((t=this.eLoading.parentElement)==null||t.removeChild(this.eLoading));let e=this.getCurrentValueIndex();e!==-1?(this.listComponent.refresh(),this.listComponent.ensureIndexVisible(e),this.listComponent.refresh(!0),this.highlightSelectedValue(e)):this.listComponent.refresh()}beforeHidePicker(){this.highlightedItem=-1,super.beforeHidePicker()}onWrapperFocus(){if(!this.eInput)return;let i=this.eInput.getFocusableElement();i.focus(),i.select()}onWrapperFocusOut(i){this.eWrapper.contains(i.relatedTarget)||this.hidePicker()}buildSearchStringFromKeyboardEvent(i){let{key:t}=i;if(t===z.BACKSPACE)this.searchString=this.searchString.slice(0,-1),t="";else if(!$h(i))return;i.preventDefault(),this.searchTextFromCharacter(t)}searchTextFromCharacter(i){this.searchString+=i,this.runSearch(),this.clearSearchString()}searchTextFromString(i){i==null&&(i=""),this.searchString=i,this.runSearch()}buildSearchStrings(i){let{valueFormatter:t=r=>r}=this.config,e;return typeof i[0]=="number"||typeof i[0]=="string"?e=i.map(r=>t(r)):typeof i[0]=="object"&&this.searchStringCreator&&(e=this.searchStringCreator(i)),e}getSuggestionsAndFilteredValues(i,t){let e=[],r=[];if(!i.length)return{suggestions:e,filteredValues:r};let{searchType:o="fuzzy",filterList:n}=this.config;if(o==="fuzzy"){let s=ou(this.searchString,t,!0);e=s.values;let a=s.indices;if(n&&a.length)for(let l=0;l<a.length;l++)r.push(this.values[a[l]])}else e=t.filter((s,a)=>{let l=s.toLocaleLowerCase(),d=this.searchString.toLocaleLowerCase(),u=o==="match"?l.startsWith(d):l.indexOf(d)!==-1;return n&&u&&r.push(this.values[a]),u});return{suggestions:e,filteredValues:r}}filterListModel(i){let{filterList:t}=this.config;t&&(this.setValueList({valueList:i,refresh:!0}),this.alignPickerToComponent())}runSearch(){var i,t;let{values:e}=this,r=this.buildSearchStrings(e);if(!r){this.highlightSelectedValue(-1);return}let{suggestions:o,filteredValues:n}=this.getSuggestionsAndFilteredValues(this.searchString,r),{filterList:s,highlightMatch:a,searchType:l="fuzzy"}=this.config,d=n.length,u=!!(s&&this.searchString!=="");if(this.filterListModel(u?n:e),o.length){let c=u?0:r.indexOf(o[0]);this.selectListItem(c)}else if(this.highlightSelectedValue(-1),!u||d)(i=this.listComponent)==null||i.ensureIndexVisible(0);else if(u){this.getAriaElement().removeAttribute("data-active-option");let c=(t=this.listComponent)==null?void 0:t.getAriaElement();c&&If(c,null)}a&&l!=="fuzzy"&&this.highlightFilterMatch(),this.displayOrHidePicker()}displayOrHidePicker(){var i;let t=(i=this.listComponent)==null?void 0:i.getGui(),e=this.currentList?this.currentList.length===0:!1;t?.classList.toggle("ag-hidden",e)}clearSearchString(){this.searchString=""}selectListItem(i,t){if(!this.isPickerDisplayed||!this.currentList||!this.listComponent||i<0||i>=this.currentList.length)return;this.listComponent.ensureIndexVisible(i,!t)&&!t&&this.listComponent.refresh(!0),this.highlightSelectedValue(i)}setValue(i,t,e){let r=this.currentList?this.currentList.indexOf(i):-1;return r===-1?this:(this.value=i,e||this.selectListItem(r),this.renderSelectedValue(),super.setValue(i,t))}createRowComponent(i){let t=new Cm(this.config,this.eWrapper);t.setParentComponent(this.listComponent),this.getContext().createBean(t),t.setState(i);let{highlightMatch:e,searchType:r="fuzzy"}=this.config;return e&&r!=="fuzzy"&&t.highlightString(this.searchString),t}getRowForMouseEvent(i){let{listComponent:t}=this;if(!t)return-1;let r=(t?.getGui()).getBoundingClientRect(),o=t.getScrollTop(),n=i.clientY-r.top+o;return Math.floor(n/t.getRowHeight())}onPickerMouseMove(i){if(!this.listComponent)return;let t=this.getRowForMouseEvent(i);t!==-1&&t!=this.lastRowHovered&&(this.lastRowHovered=t,this.selectListItem(t,!0))}onNavigationKeyDown(i,t){i.preventDefault();let e=t===z.DOWN;if(!this.isPickerDisplayed&&e){this.showPicker();return}let r=this.highlightedItem,n=r===-1?0:r+(e?1:-1);this.selectListItem(n)}onPageNavigation(i){var t;if(!this.isPickerDisplayed)return;let e=(t=this.listComponent)==null?void 0:t.navigateToPage(i,this.highlightedItem);e!=null&&this.animationFrameService.requestAnimationFrame(()=>{if(!this.isAlive())return null;this.highlightSelectedValue(e)})}onEnterKeyDown(i){this.isPickerDisplayed&&(i.preventDefault(),this.currentList&&this.onListValueSelected(this.currentList[this.highlightedItem],!0))}onTabKeyDown(){!this.isPickerDisplayed||!this.currentList||this.setValue(this.currentList[this.highlightedItem],!1,!0)}onListValueSelected(i,t){this.setValue(i,!1,!0),this.dispatchPickerEvent(i,t),this.hidePicker()}dispatchPickerEvent(i,t){let e={type:m.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:t,value:i};this.dispatchEvent(e)}getFocusableElement(){let{allowTyping:i}=this.config;return i?this.eInput.getFocusableElement():super.getFocusableElement()}onKeyDown(i){let t=i.key,{allowTyping:e}=this.config;switch(t){case z.LEFT:case z.RIGHT:e||i.preventDefault();break;case z.PAGE_HOME:case z.PAGE_END:if(e){i.preventDefault();let r=this.eInput.getInputElement(),o=t===z.PAGE_HOME?0:r.value.length;r.setSelectionRange(o,o);break}case z.PAGE_UP:case z.PAGE_DOWN:i.preventDefault(),this.onPageNavigation(t);break;case z.DOWN:case z.UP:this.onNavigationKeyDown(i,t);break;case z.ESCAPE:this.isPickerDisplayed&&(Dr(this.listComponent.getGui())&&(i.preventDefault(),Ro(i)),this.hidePicker());break;case z.ENTER:this.onEnterKeyDown(i);break;case z.TAB:this.onTabKeyDown();break;default:e||this.buildSearchStringFromKeyboardEvent(i)}}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),this.eLoading=void 0,super.destroy()}};g([w("userComponentFactory")],dp.prototype,"userComponentFactory",2);g([w("animationFrameService")],dp.prototype,"animationFrameService",2);g([Q("eInput")],dp.prototype,"eInput",2);var Tl=class l0 extends em{constructor(t){super(t,l0.TEMPLATE),this.labelAlignment="top"}init(){this.eSlider.addCssClass("ag-slider-field");let{minValue:t,maxValue:e,textFieldWidth:r,step:o,value:n,onValueChange:s}=this.config;t!=null&&this.setMinValue(t),e!=null&&this.setMaxValue(e),r!=null&&this.setTextFieldWidth(r),o!=null&&this.setStep(o),n!=null&&this.setValue(n),s!=null&&this.onValueChange(s)}onValueChange(t){let e=m.EVENT_FIELD_VALUE_CHANGED;return this.addManagedListener(this.eText,e,()=>{let r=parseFloat(this.eText.getValue());this.eSlider.setValue(r.toString(),!0),t(r||0)}),this.addManagedListener(this.eSlider,e,()=>{let r=this.eSlider.getValue();this.eText.setValue(r,!0),t(parseFloat(r))}),this}setSliderWidth(t){return this.eSlider.setWidth(t),this}setTextFieldWidth(t){return this.eText.setWidth(t),this}setMinValue(t){return this.eSlider.setMinValue(t),this.eText.setMin(t),this}setMaxValue(t){return this.eSlider.setMaxValue(t),this.eText.setMax(t),this}getValue(){return this.eText.getValue()}setValue(t,e){return this.getValue()===t?this:(this.eText.setValue(t,!0),this.eSlider.setValue(t,!0),e||this.dispatchEvent({type:m.EVENT_FIELD_VALUE_CHANGED}),this)}setStep(t){return this.eSlider.setStep(t),this.eText.setStep(t),this}};Tl.TEMPLATE=`<div class="ag-slider">
            <label ref="eLabel"></label>
            <div class="ag-wrapper ag-slider-wrapper">
                <ag-input-range ref="eSlider"></ag-input-range>
                <ag-input-number-field ref="eText"></ag-input-number-field>
            </div>
        </div>`;g([Q("eLabel")],Tl.prototype,"eLabel",2);g([Q("eSlider")],Tl.prototype,"eSlider",2);g([Q("eText")],Tl.prototype,"eText",2);g([U],Tl.prototype,"init",1);var ST=Tl,hs=class Ya extends Pe{constructor(t={}){super(Ya.getTemplate(t)),this.params=t,this.suppressEnabledCheckbox=!0,this.suppressToggleExpandOnEnableChange=!1;let{enabled:e,items:r,suppressEnabledCheckbox:o,expanded:n,suppressToggleExpandOnEnableChange:s,useToggle:a}=t;this.cssIdentifier=t.cssIdentifier||"default",this.enabled=e??!0,this.items=r||[],this.useToggle=a??!1,this.alignItems=t.alignItems||"center",this.expanded=n??!0,o!=null&&(this.suppressEnabledCheckbox=o),s!=null&&(this.suppressToggleExpandOnEnableChange=s)}static getTemplate(t){let e=t.cssIdentifier||"default",r=t.direction||"vertical";return`
            <div class="ag-group ag-${e}-group" role="presentation">
                <div ref="eToolbar" class="ag-group-toolbar ag-${e}-group-toolbar">
                    <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>
                </div>
                <div ref="eContainer" class="ag-group-container ag-group-container-${r} ag-${e}-group-container"></div>
            </div>
        `}postConstruct(){if(this.setupTitleBar(),this.items.length){let o=this.items;this.items=[],this.addItems(o)}let t=this.localeService.getLocaleTextFunc();this.cbGroupEnabled.setLabel(t("enabled","Enabled")),this.enabled&&this.setEnabled(this.enabled,void 0,!0),this.setAlignItems(this.alignItems);let{onEnableChange:e,suppressOpenCloseIcons:r}=this.params;this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(r??!1),this.refreshChildDisplay(),qe(this.eContainer,this.expanded),this.cbGroupEnabled.onValueChange(o=>{this.setEnabled(o,!0,this.suppressToggleExpandOnEnableChange),this.dispatchEnableChangeEvent(o)}),e!=null&&this.onEnableChange(e)}refreshChildDisplay(){var t;qe(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),(t=this.eTitleBar)==null||t.refreshOnExpand(this.expanded)}isExpanded(){return this.expanded}setAlignItems(t){this.alignItems!==t&&this.removeCssClass(`ag-group-item-alignment-${this.alignItems}`),this.alignItems=t;let e=`ag-group-item-alignment-${this.alignItems}`;return this.addCssClass(e),this}toggleGroupExpand(t){var e;let r=!1;if((e=this.eTitleBar)!=null&&e.isSuppressCollapse()&&!this.useToggle)t=!0,r=!0;else if(t=t??!this.expanded,this.expanded===t)return this;return this.expanded=t,this.refreshChildDisplay(),qe(this.eContainer,t),r||this.dispatchEvent({type:t?Ya.EVENT_EXPANDED:Ya.EVENT_COLLAPSED}),this}addItems(t){t.forEach(e=>this.addItem(e))}prependItem(t){this.insertItem(t,!0)}addItem(t){this.insertItem(t,!1)}insertItem(t,e){let r=this.eContainer,o=t instanceof Pe?t.getGui():t;o.classList.add("ag-group-item",`ag-${this.cssIdentifier}-group-item`),e?(r.insertAdjacentElement("afterbegin",o),this.items.unshift(o)):(r.appendChild(o),this.items.push(o))}hideItem(t,e){let r=this.items[e];qe(r,!t)}getItemIndex(t){let e=t instanceof Pe?t.getGui():t;return this.items.indexOf(e)}setTitle(t){var e;return(e=this.eTitleBar)==null||e.setTitle(t),this}addTitleBarWidget(t){var e;return(e=this.eTitleBar)==null||e.addWidget(t),this}addCssClassToTitleBar(t){var e;(e=this.eTitleBar)==null||e.addCssClass(t)}dispatchEnableChangeEvent(t){let e={type:Ya.EVENT_ENABLE_CHANGE,enabled:t};this.dispatchEvent(e)}setEnabled(t,e,r){var o;return this.enabled=t,this.refreshDisabledStyles(),r||this.toggleGroupExpand(t),e||(this.cbGroupEnabled.setValue(t),(o=this.eToggle)==null||o.setValue(t)),this}isEnabled(){return this.enabled}onEnableChange(t){return this.addManagedListener(this,Ya.EVENT_ENABLE_CHANGE,e=>t(e.enabled)),this}hideEnabledCheckbox(t){return this.suppressEnabledCheckbox=t,this.refreshChildDisplay(),this.refreshDisabledStyles(),this}hideOpenCloseIcons(t){var e;return(e=this.eTitleBar)==null||e.hideOpenCloseIcons(t),this}refreshDisabledStyles(){var t;let e=!this.enabled;this.eContainer.classList.toggle("ag-disabled",e),(t=this.eTitleBar)==null||t.refreshDisabledStyles(this.suppressEnabledCheckbox&&e),this.eContainer.classList.toggle("ag-disabled-group-container",e)}setupTitleBar(){let t=this.useToggle?this.createToggleTitleBar():this.createDefaultTitleBar();this.eToolbar.insertAdjacentElement("beforebegin",t.getGui())}createDefaultTitleBar(){let t=this.createManagedBean(new EC(this.params));return this.eTitleBar=t,t.refreshOnExpand(this.expanded),this.addManagedListener(t,EC.EVENT_EXPAND_CHANGED,e=>this.toggleGroupExpand(e.expanded)),t}createToggleTitleBar(){var t;let e=this.createManagedBean(new n0({value:this.enabled,label:this.params.title,labelAlignment:"left",labelWidth:"flex",onValueChange:r=>{this.setEnabled(r,!0),this.dispatchEnableChangeEvent(r)}}));return e.addCssClass("ag-group-title-bar"),e.addCssClass(`ag-${(t=this.params.cssIdentifier)!=null?t:"default"}-group-title-bar ag-unselectable`),this.eToggle=e,this.toggleGroupExpand(this.enabled),e}};hs.EVENT_EXPANDED="expanded";hs.EVENT_COLLAPSED="collapsed";hs.EVENT_ENABLE_CHANGE="enableChange";g([Q("eToolbar")],hs.prototype,"eToolbar",2);g([Q("cbGroupEnabled")],hs.prototype,"cbGroupEnabled",2);g([Q("eContainer")],hs.prototype,"eContainer",2);g([U],hs.prototype,"postConstruct",1);var _T=hs,Bg="ag-disabled-group-title-bar",Pl=class gf extends Pe{constructor(t={}){super(gf.getTemplate(t)),this.suppressOpenCloseIcons=!1;let{title:e,suppressOpenCloseIcons:r}=t;e&&e.length>0&&(this.title=e),r!=null&&(this.suppressOpenCloseIcons=r)}static getTemplate(t){var e;let r=(e=t.cssIdentifier)!=null?e:"default";return`
            <div class="ag-group-title-bar ag-${r}-group-title-bar ag-unselectable" role="button">
                <span class="ag-group-title-bar-icon ag-${r}-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>
                <span class="ag-group-title-bar-icon ag-${r}-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>
                <span ref="eTitle" class="ag-group-title ag-${r}-group-title"></span>
            </div>
        `}postConstruct(){this.setTitle(this.title),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract()}setupExpandContract(){this.eGroupClosedIcon.appendChild(Xr("columnSelectClosed",this.gos,null)),this.eGroupOpenedIcon.appendChild(Xr("columnSelectOpen",this.gos,null)),this.addManagedListener(this.getGui(),"click",()=>this.dispatchExpandChanged()),this.addManagedListener(this.getGui(),"keydown",t=>{switch(t.key){case z.ENTER:case z.SPACE:t.preventDefault(),this.dispatchExpandChanged();break;case z.RIGHT:case z.LEFT:t.preventDefault(),this.dispatchExpandChanged(t.key===z.RIGHT);break}})}refreshOnExpand(t){this.refreshAriaStatus(t),this.refreshOpenCloseIcons(t)}refreshAriaStatus(t){this.suppressOpenCloseIcons||zn(this.getGui(),t)}refreshOpenCloseIcons(t){let e=!this.suppressOpenCloseIcons;qe(this.eGroupOpenedIcon,e&&t),qe(this.eGroupClosedIcon,e&&!t)}isSuppressCollapse(){return this.suppressOpenCloseIcons}dispatchExpandChanged(t){let e={type:gf.EVENT_EXPAND_CHANGED,expanded:t};this.dispatchEvent(e)}setTitle(t){let e=this.getGui(),r=!!t&&t.length>0;t=r?t:void 0,this.eTitle.textContent=t??"",qe(e,r),t!==this.title&&(this.title=t);let o=e.classList.contains(Bg);return this.refreshDisabledStyles(o),this}addWidget(t){return this.getGui().appendChild(t),this}hideOpenCloseIcons(t){return this.suppressOpenCloseIcons=t,t&&this.dispatchExpandChanged(!0),this}refreshDisabledStyles(t){let e=this.getGui();t?(e.classList.add(Bg),e.removeAttribute("tabindex")):(e.classList.remove(Bg),typeof this.title=="string"?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex"))}};Pl.EVENT_EXPAND_CHANGED="expandedChanged";g([Q("eGroupOpenedIcon")],Pl.prototype,"eGroupOpenedIcon",2);g([Q("eGroupClosedIcon")],Pl.prototype,"eGroupClosedIcon",2);g([Q("eTitle")],Pl.prototype,"eTitle",2);g([U],Pl.prototype,"postConstruct",1);var EC=Pl,bm=class extends hu{constructor(i=0,t){super('<div class="ag-menu-list" role="tree"></div>'),this.level=i,this.menuItems=[],this.params=t??{column:null,node:null,value:null}}postConstruct(){this.initialiseTabGuard({onTabKeyDown:i=>this.onTabKeyDown(i),handleKeyDown:i=>this.handleKeyDown(i),onFocusIn:i=>this.handleFocusIn(i),onFocusOut:i=>this.handleFocusOut(i)})}onTabKeyDown(i){let t=this.getParentComponent(),e=t&&t.getGui();e&&e.classList.contains("ag-focus-managed")||i.preventDefault(),i.shiftKey&&this.closeIfIsChild(i)}handleKeyDown(i){switch(i.key){case z.UP:case z.RIGHT:case z.DOWN:case z.LEFT:i.preventDefault(),this.handleNavKey(i.key);break;case z.ESCAPE:this.closeIfIsChild()&&Ro(i);break}}handleFocusIn(i){var t,e;let r=i.relatedTarget;!this.tabGuardCtrl.isTabGuard(r)&&(this.getGui().contains(r)||(e=(t=this.activeMenuItem)==null?void 0:t.getSubMenuGui())!=null&&e.contains(r))||(this.activeMenuItem?this.activeMenuItem.activate():this.activateFirstItem())}handleFocusOut(i){var t;let e=i.relatedTarget;!this.activeMenuItem||this.getGui().contains(e)||(t=this.activeMenuItem.getSubMenuGui())!=null&&t.contains(e)||this.activeMenuItem.isSubMenuOpening()||this.activeMenuItem.deactivate()}clearActiveItem(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)}addMenuItems(i){i!=null&&Er.all(i.map(t=>t==="separator"?Er.resolve({eGui:this.createSeparator()}):typeof t=="string"?(console.warn(`AG Grid: unrecognised menu item ${t}`),Er.resolve({eGui:null})):this.addItem(t))).then(t=>{t.forEach(e=>{e?.eGui&&(this.appendChild(e.eGui),e.comp&&this.menuItems.push(e.comp))})})}addItem(i){let t=this.createManagedBean(new sh);return t.init({menuItemDef:i,isAnotherSubMenuOpen:()=>this.menuItems.some(e=>e.isSubMenuOpen()),level:this.level,contextParams:this.params}).then(()=>(t.setParentComponent(this),this.addManagedListener(t,sh.EVENT_CLOSE_MENU,e=>{this.dispatchEvent(e)}),this.addManagedListener(t,sh.EVENT_MENU_ITEM_ACTIVATED,e=>{this.activeMenuItem&&this.activeMenuItem!==e.menuItem&&this.activeMenuItem.deactivate(),this.activeMenuItem=e.menuItem}),{comp:t,eGui:t.getGui()}))}activateFirstItem(){let i=this.menuItems.filter(t=>!t.isDisabled())[0];i&&i.activate()}createSeparator(){return _r(`
            <div class="ag-menu-separator" aria-hidden="true">
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
            </div>`)}handleNavKey(i){switch(i){case z.UP:case z.DOWN:let e=this.findNextItem(i===z.UP);e&&e!==this.activeMenuItem&&e.activate();return}let t=this.gos.get("enableRtl")?z.RIGHT:z.LEFT;i===t?this.closeIfIsChild():this.openChild()}closeIfIsChild(i){let t=this.getParentComponent();return t&&t instanceof sh?(i&&i.preventDefault(),t.closeSubMenu(),t.getGui().focus(),!0):!1}openChild(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)}findNextItem(i){let t=this.menuItems.filter(o=>!o.isDisabled());if(!t.length)return;if(!this.activeMenuItem)return i?rt(t):t[0];i&&t.reverse();let e,r=!1;for(let o=0;o<t.length;o++){let n=t[o];if(!r){n===this.activeMenuItem&&(r=!0);continue}e=n;break}return r&&!e?t[0]:e||this.activeMenuItem}destroy(){this.clearActiveItem(),super.destroy()}};g([w("focusService")],bm.prototype,"focusService",2);g([U],bm.prototype,"postConstruct",1);var d0=class extends hu{constructor(i){super(),this.wrappedComponent=i,this.setTemplateFromElement(i.getGui())}postConstruct(){this.initialiseTabGuard({onTabKeyDown:i=>this.onTabKeyDown(i),handleKeyDown:i=>this.handleKeyDown(i)})}handleKeyDown(i){i.key===z.ESCAPE&&this.closePanel()}onTabKeyDown(i){i.defaultPrevented||(this.closePanel(),i.preventDefault())}closePanel(){let i=this.parentComponent;i.closeSubMenu(),setTimeout(()=>i.getGui().focus(),0)}};g([U],d0.prototype,"postConstruct",1);var Rl=class Xa extends j{constructor(){super(...arguments),this.isActive=!1,this.subMenuIsOpen=!1,this.subMenuIsOpening=!1,this.suppressRootStyles=!0,this.suppressAria=!0,this.suppressFocus=!0}init(t){var e,r;let{menuItemDef:o,isAnotherSubMenuOpen:n,level:s,childComponent:a,contextParams:l}=t;return this.params=t.menuItemDef,this.level=s,this.isAnotherSubMenuOpen=n,this.childComponent=a,this.contextParams=l,this.cssClassPrefix=(r=(e=this.params.menuItemParams)==null?void 0:e.cssClassPrefix)!=null?r:"ag-menu-option",this.userComponentFactory.getMenuItemCompDetails(this.params,Pt(he({},o),{level:s,isAnotherSubMenuOpen:n,openSubMenu:u=>this.openSubMenu(u),closeSubMenu:()=>this.closeSubMenu(),closeMenu:u=>this.closeMenu(u),updateTooltip:(u,c)=>this.refreshTooltip(u,c),onItemActivated:()=>this.onItemActivated()})).newAgStackInstance().then(u=>{var c;this.menuItemComp=u;let h=(c=u.configureDefaults)==null?void 0:c.call(u);h&&this.configureDefaults(h===!0?void 0:h)})}addListeners(t,e){e?.suppressClick||this.addManagedListener(t,"click",r=>this.onItemSelected(r)),e?.suppressKeyboardSelect||this.addManagedListener(t,"keydown",r=>{(r.key===z.ENTER||r.key===z.SPACE)&&(r.preventDefault(),this.onItemSelected(r))}),e?.suppressMouseDown||this.addManagedListener(t,"mousedown",r=>{r.stopPropagation(),r.preventDefault()}),e?.suppressMouseOver||(this.addManagedListener(t,"mouseenter",()=>this.onMouseEnter()),this.addManagedListener(t,"mouseleave",()=>this.onMouseLeave()))}isDisabled(){return!!this.params.disabled}openSubMenu(t=!1){var e,r;if(this.closeSubMenu(),!this.params.subMenu)return;this.subMenuIsOpening=!0;let o=_r('<div class="ag-menu" role="presentation"></div>');this.eSubMenuGui=o;let n,s=()=>{this.subMenuIsOpening=!1};if(this.childComponent){let u=this.createBean(new d0(this.childComponent));u.setParentComponent(this);let c=u.getGui(),h="mouseenter",p=()=>this.cancelDeactivate();c.addEventListener(h,p),n=()=>c.removeEventListener(h,p),o.appendChild(c),this.childComponent.afterGuiAttached&&(s=()=>{this.childComponent.afterGuiAttached(),this.subMenuIsOpening=!1})}else if(this.params.subMenu){let u=this.createBean(new bm(this.level+1,this.contextParams));u.setParentComponent(this),u.addMenuItems(this.params.subMenu),o.appendChild(u.getGui()),this.addManagedListener(u,Xa.EVENT_CLOSE_MENU,c=>this.dispatchEvent(c)),u.addGuiEventListener("mouseenter",()=>this.cancelDeactivate()),n=()=>this.destroyBean(u),t&&(s=()=>{u.activateFirstItem(),this.subMenuIsOpening=!1})}let a=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:this.eGui,ePopup:o}),l=this.localeService.getLocaleTextFunc(),d=this.popupService.addPopup({modal:!0,eChild:o,positionCallback:a,anchorToElement:this.eGui,ariaLabel:l("ariaLabelSubMenu","SubMenu"),afterGuiAttached:s});this.subMenuIsOpen=!0,this.setAriaExpanded(!0),this.hideSubMenu=()=>{var u,c;d&&d.hideFunc(),this.subMenuIsOpen=!1,this.setAriaExpanded(!1),n(),(c=(u=this.menuItemComp).setExpanded)==null||c.call(u,!1),this.eSubMenuGui=void 0},(r=(e=this.menuItemComp).setExpanded)==null||r.call(e,!0)}setAriaExpanded(t){this.suppressAria||zn(this.eGui,t)}closeSubMenu(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,this.setAriaExpanded(!1))}isSubMenuOpen(){return this.subMenuIsOpen}isSubMenuOpening(){return this.subMenuIsOpening}activate(t){var e,r;this.cancelActivate(),!this.params.disabled&&(this.isActive=!0,this.suppressRootStyles||this.eGui.classList.add(`${this.cssClassPrefix}-active`),(r=(e=this.menuItemComp).setActive)==null||r.call(e,!0),this.suppressFocus||this.eGui.focus({preventScroll:!0}),t&&this.params.subMenu&&window.setTimeout(()=>{this.isAlive()&&this.isActive&&this.openSubMenu()},300),this.onItemActivated())}deactivate(){var t,e;this.cancelDeactivate(),this.suppressRootStyles||this.eGui.classList.remove(`${this.cssClassPrefix}-active`),(e=(t=this.menuItemComp).setActive)==null||e.call(t,!1),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()}getGui(){return this.menuItemComp.getGui()}getParentComponent(){return this.parentComponent}setParentComponent(t){this.parentComponent=t}getSubMenuGui(){return this.eSubMenuGui}onItemSelected(t){var e,r;(r=(e=this.menuItemComp).select)==null||r.call(e),this.params.action?this.getFrameworkOverrides().wrapOutgoing(()=>this.params.action(this.gos.addGridCommonParams(he({},this.contextParams)))):this.openSubMenu(t&&t.type==="keydown"),!(this.params.subMenu&&!this.params.action||this.params.suppressCloseOnSelect)&&this.closeMenu(t)}closeMenu(t){let e={type:Xa.EVENT_CLOSE_MENU};t&&(t instanceof MouseEvent?e.mouseEvent=t:e.keyboardEvent=t),this.dispatchEvent(e)}onItemActivated(){let t={type:Xa.EVENT_MENU_ITEM_ACTIVATED,menuItem:this};this.dispatchEvent(t)}cancelActivate(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)}cancelDeactivate(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)}onMouseEnter(){this.cancelDeactivate(),this.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(()=>this.activate(!0),Xa.ACTIVATION_DELAY):this.activate(!0)}onMouseLeave(){this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(()=>this.deactivate(),Xa.ACTIVATION_DELAY):this.deactivate()}configureDefaults(t){var e,r,o;if(!this.menuItemComp){setTimeout(()=>this.configureDefaults(t));return}let n=this.menuItemComp.getGui(),s=(r=(e=this.menuItemComp).getRootElement)==null?void 0:r.call(e);s&&(t?.suppressRootStyles||n.classList.add("ag-menu-option-custom"),n=s),this.eGui=n,this.suppressRootStyles=!!t?.suppressRootStyles,this.suppressRootStyles||(n.classList.add(this.cssClassPrefix),(o=this.params.cssClasses)==null||o.forEach(a=>n.classList.add(a)),this.params.disabled&&n.classList.add(`${this.cssClassPrefix}-disabled`)),t?.suppressTooltip||this.refreshTooltip(this.params.tooltip),this.suppressAria=!!t?.suppressAria,this.suppressAria||(Bt(n,"treeitem"),bb(n,this.level+1),this.params.disabled&&Mf(n,!0)),t?.suppressTabIndex||n.setAttribute("tabindex","-1"),this.params.disabled||this.addListeners(n,t),this.suppressFocus=!!t?.suppressFocus}refreshTooltip(t,e){this.tooltip=t,this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),!(!t||!this.menuItemComp)&&(this.tooltipFeature=this.createBean(new Nn({getGui:()=>this.getGui(),getTooltipValue:()=>this.tooltip,getLocation:()=>"menu",shouldDisplayTooltip:e})))}destroy(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}};Rl.EVENT_CLOSE_MENU="closeMenu";Rl.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated";Rl.ACTIVATION_DELAY=80;g([w("popupService")],Rl.prototype,"popupService",2);g([w("userComponentFactory")],Rl.prototype,"userComponentFactory",2);var sh=Rl,la=class ff extends Pe{constructor(t){super(ff.getTemplate(t)),this.config=t,this.closable=!0}static getTemplate(t){let e=t.cssIdentifier||"default";return`<div class="ag-panel ag-${e}-panel" tabindex="-1">
            <div ref="eTitleBar" class="ag-panel-title-bar ag-${e}-panel-title-bar ag-unselectable">
                <span ref="eTitle" class="ag-panel-title-bar-title ag-${e}-panel-title-bar-title"></span>
                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-${e}-panel-title-bar-buttons"></div>
            </div>
            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-${e}-panel-content-wrapper"></div>
        </div>`}postConstruct(){let{component:t,closable:e,hideTitleBar:r,title:o,minWidth:n=250,width:s,minHeight:a=250,height:l,centered:d,popup:u,x:c,y:h}=this.config;this.positionableFeature=new vl(this.getGui(),{minWidth:n,width:s,minHeight:a,height:l,centered:d,x:c,y:h,popup:u,calculateTopBuffer:()=>this.positionableFeature.getHeight()-this.getBodyHeight()}),this.createManagedBean(this.positionableFeature);let p=this.getGui();t&&this.setBodyComponent(t),r?qe(this.eTitleBar,!1):(o&&this.setTitle(o),this.setClosable(e??this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",f=>{if(p.contains(f.relatedTarget)||p.contains(this.gos.getActiveDomElement())||this.eTitleBarButtons.contains(f.target)){f.preventDefault();return}let C=this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");C&&C.focus()}),!(u&&this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")}renderComponent(){let t=this.getGui();t.focus(),this.close=()=>{t.parentElement.removeChild(t),this.destroy()}}getHeight(){return this.positionableFeature.getHeight()}setHeight(t){this.positionableFeature.setHeight(t)}getWidth(){return this.positionableFeature.getWidth()}setWidth(t){this.positionableFeature.setWidth(t)}setClosable(t){if(t!==this.closable&&(this.closable=t),t){let e=this.closeButtonComp=new Pe(ff.CLOSE_BTN_TEMPLATE);this.getContext().createBean(e);let r=e.getGui(),o=It("close",this.gos);o.classList.add("ag-panel-title-bar-button-icon"),r.appendChild(o),this.addTitleBarButton(e),e.addManagedListener(r,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){let e=this.closeButtonComp.getGui();e.parentElement.removeChild(e),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}}setBodyComponent(t){t.setParentComponent(this),this.eContentWrapper.appendChild(t.getGui())}addTitleBarButton(t,e){let r=this.eTitleBarButtons,o=r.children,n=o.length;e==null&&(e=n),e=Math.max(0,Math.min(e,n)),t.addCssClass("ag-panel-title-bar-button");let s=t.getGui();e===0?r.insertAdjacentElement("afterbegin",s):e===n?r.insertAdjacentElement("beforeend",s):o[e-1].insertAdjacentElement("afterend",s),t.setParentComponent(this)}getBodyHeight(){return iu(this.eContentWrapper)}getBodyWidth(){return Zs(this.eContentWrapper)}setTitle(t){this.eTitle.innerText=t}onBtClose(){this.close()}destroy(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));let t=this.getGui();t&&Dr(t)&&this.close(),super.destroy()}};la.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>';g([Q("eContentWrapper")],la.prototype,"eContentWrapper",2);g([Q("eTitleBar")],la.prototype,"eTitleBar",2);g([Q("eTitleBarButtons")],la.prototype,"eTitleBarButtons",2);g([Q("eTitle")],la.prototype,"eTitle",2);g([U],la.prototype,"postConstruct",1);var xT=la,ET=class extends xT{constructor(i){super(Pt(he({},i),{popup:!0})),this.isMaximizable=!1,this.isMaximized=!1,this.maximizeListeners=[],this.resizeListenerDestroy=null,this.lastPosition={x:0,y:0,width:0,height:0}}postConstruct(){let i=this.getGui(),{movable:t,resizable:e,maximizable:r}=this.config;this.addCssClass("ag-dialog"),super.postConstruct(),this.addManagedListener(i,"focusin",o=>{this.popupService.bringPopupToFront(i)}),t&&this.setMovable(t),r&&this.setMaximizable(r),e&&this.setResizable(e)}renderComponent(){let i=this.getGui(),{alwaysOnTop:t,modal:e,title:r,afterGuiAttached:o}=this.config,n=this.localeService.getLocaleTextFunc(),s=this.popupService.addPopup({modal:e,eChild:i,closeOnEsc:!0,closedCallback:this.onClosed.bind(this),alwaysOnTop:t,ariaLabel:r||n("ariaLabelDialog","Dialog"),afterGuiAttached:o});s&&(this.close=s.hideFunc)}onClosed(i){var t,e;this.destroy(),(e=(t=this.config).closedCallback)==null||e.call(t,i)}toggleMaximize(){let i=this.positionableFeature.getPosition();if(this.isMaximized){let{x:t,y:e,width:r,height:o}=this.lastPosition;this.setWidth(r),this.setHeight(o),this.positionableFeature.offsetElement(t,e)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=i.x,this.lastPosition.y=i.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()}refreshMaximizeIcon(){qe(this.maximizeIcon,!this.isMaximized),qe(this.minimizeIcon,this.isMaximized)}clearMaximizebleListeners(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(i=>i()),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)}destroy(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),super.destroy()}setResizable(i){this.positionableFeature.setResizable(i)}setMovable(i){this.positionableFeature.setMovable(i,this.eTitleBar)}setMaximizable(i){if(!i){this.clearMaximizebleListeners(),this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0);return}let t=this.eTitleBar;if(!t||i===this.isMaximizable)return;let e=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),e.addManagedListener(e.getGui(),"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(e,0),this.maximizeListeners.push(this.addManagedListener(t,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",()=>{this.isMaximized=!1,this.refreshMaximizeIcon()})}buildMaximizeAndMinimizeElements(){let i=this.maximizeButtonComp=this.createBean(new Pe('<div class="ag-dialog-button"></span>')),t=i.getGui();return this.maximizeIcon=It("maximize",this.gos),t.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=It("minimize",this.gos),t.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),i}};g([w("popupService")],ET.prototype,"popupService",2);var DT=0,An=class extends j{constructor(){super(...arguments),this.popupList=[]}postConstruct(){this.ctrlsService.whenReady(i=>{this.gridCtrl=i.gridCtrl}),this.addManagedListener(this.eventService,m.EVENT_GRID_STYLES_CHANGED,this.handleThemeChange.bind(this))}getPopupParent(){let i=this.gos.get("popupParent");return i||this.gridCtrl.getGui()}positionPopupForMenu(i){let{eventSource:t,ePopup:e}=i,r=this.getPopupIndex(e);if(r!==-1){let p=this.popupList[r];p.alignedToElement=t}let o=t.getBoundingClientRect(),n=this.getParentRect(),s=this.keepXYWithinBounds(e,o.top-n.top,0),a=e.clientWidth>0?e.clientWidth:200;e.style.minWidth=`${a}px`;let d=n.right-n.left-a,u;this.gos.get("enableRtl")?(u=h(),u<0&&(u=c(),this.setAlignedStyles(e,"left")),u>d&&(u=0,this.setAlignedStyles(e,"right"))):(u=c(),u>d&&(u=h(),this.setAlignedStyles(e,"right")),u<0&&(u=0,this.setAlignedStyles(e,"left"))),e.style.left=`${u}px`,e.style.top=`${s}px`;function c(){return o.right-n.left-2}function h(){return o.left-n.left-a}}positionPopupUnderMouseEvent(i){let{ePopup:t,nudgeX:e,nudgeY:r,skipObserver:o}=i;this.positionPopup({ePopup:t,nudgeX:e,nudgeY:r,keepWithinBounds:!0,skipObserver:o,updatePosition:()=>this.calculatePointerAlign(i.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(i.type,i.ePopup,null,i.mouseEvent,i.column,i.rowNode)})}calculatePointerAlign(i){let t=this.getParentRect();return{x:i.clientX-t.left,y:i.clientY-t.top}}positionPopupByComponent(i){let{ePopup:t,nudgeX:e,nudgeY:r,keepWithinBounds:o,eventSource:n,alignSide:s="left",position:a="over",column:l,rowNode:d,type:u}=i,c=n.getBoundingClientRect(),h=this.getParentRect(),p=this.getPopupIndex(t);if(p!==-1){let C=this.popupList[p];C.alignedToElement=n}let f=()=>{let C=c.left-h.left;s==="right"&&(C-=t.offsetWidth-c.width);let b;return a==="over"?(b=c.top-h.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,c,h,i.nudgeY||0)==="under"?b=c.top-h.top+c.height:b=c.top-t.offsetHeight-(r||0)*2-h.top),{x:C,y:b}};this.positionPopup({ePopup:t,nudgeX:e,nudgeY:r,keepWithinBounds:o,updatePosition:f,postProcessCallback:()=>this.callPostProcessPopup(u,t,n,null,l,d)})}shouldRenderUnderOrAbove(i,t,e,r){let o=e.bottom-t.bottom,n=t.top-e.top,s=i.offsetHeight+r;return o>s?"under":n>s||n>o?"above":"under"}setAlignedStyles(i,t){let e=this.getPopupIndex(i);if(e===-1)return;let r=this.popupList[e],{alignedToElement:o}=r;!o||(["right","left","over","above","under"].forEach(s=>{o.classList.remove(`ag-has-popup-positioned-${s}`),i.classList.remove(`ag-popup-positioned-${s}`)}),!t)||(o.classList.add(`ag-has-popup-positioned-${t}`),i.classList.add(`ag-popup-positioned-${t}`))}callPostProcessPopup(i,t,e,r,o,n){let s=this.gos.getCallback("postProcessPopup");s&&s({column:o,rowNode:n,ePopup:t,type:i,eventSource:e,mouseEvent:r})}positionPopup(i){let{ePopup:t,keepWithinBounds:e,nudgeX:r,nudgeY:o,skipObserver:n,updatePosition:s}=i,a={width:0,height:0},l=(d=!1)=>{let{x:u,y:c}=s();d&&t.clientWidth===a.width&&t.clientHeight===a.height||(a.width=t.clientWidth,a.height=t.clientHeight,r&&(u+=r),o&&(c+=o),e&&(u=this.keepXYWithinBounds(t,u,1),c=this.keepXYWithinBounds(t,c,0)),t.style.left=`${u}px`,t.style.top=`${c}px`,i.postProcessCallback&&i.postProcessCallback())};if(l(),!n){let d=this.resizeObserverService.observeResize(t,()=>l(!0));setTimeout(()=>d(),An.WAIT_FOR_POPUP_CONTENT_RESIZE)}}getActivePopups(){return this.popupList.map(i=>i.element)}getPopupList(){return this.popupList}getParentRect(){let i=this.gos.getDocument(),t=this.getPopupParent();return t===i.body?t=i.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),Wf(t)}keepXYWithinBounds(i,t,e){let r=e===0,o=r?"clientHeight":"clientWidth",n=r?"top":"left",s=r?"offsetHeight":"offsetWidth",a=r?"scrollTop":"scrollLeft",l=this.gos.getDocument(),d=l.documentElement,u=this.getPopupParent(),c=u.getBoundingClientRect(),h=l.documentElement.getBoundingClientRect(),p=u===l.body,f=i[s],b=p?(r?$f:Fd)(d)+d[a]:u[o];p&&(b-=Math.abs(h[n]-c[n]));let x=b-f;return Math.min(Math.max(t,0),Math.abs(x))}addPopup(i){let t=this.gos.getDocument(),{eChild:e,ariaLabel:r,alwaysOnTop:o,positionCallback:n,anchorToElement:s}=i;if(!t)return console.warn("AG Grid: could not find the document, document is empty"),{hideFunc:()=>{}};let a=this.getPopupIndex(e);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(e);let l=this.createPopupWrapper(e,r,!!o),d=this.addEventListenersToPopup(Pt(he({},i),{wrapperEl:l}));return n&&n(),this.addPopupToPopupList(e,l,d,s),{hideFunc:d}}initialisePopupPosition(i){let e=this.getPopupParent().getBoundingClientRect();W(i.style.top)||(i.style.top=`${e.top*-1}px`),W(i.style.left)||(i.style.left=`${e.left*-1}px`)}createPopupWrapper(i,t,e){let r=this.getPopupParent(),o=document.createElement("div"),{allThemes:n}=this.environment.getTheme();return n.length&&o.classList.add(...n),o.classList.add("ag-popup"),i.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),i.hasAttribute("role")||Bt(i,"dialog"),Vr(i,t),o.appendChild(i),r.appendChild(o),e?this.setAlwaysOnTop(i,!0):this.bringPopupToFront(i),o}handleThemeChange(){let{allThemes:i}=this.environment.getTheme();for(let t of this.popupList){for(let e of Array.from(t.wrapper.classList))e.startsWith("ag-theme-")&&t.wrapper.classList.remove(e);i.length&&t.wrapper.classList.add(...i)}}addEventListenersToPopup(i){let t=this.gos.getDocument(),e=this.getPopupParent(),{wrapperEl:r,eChild:o,closedCallback:n,afterGuiAttached:s,closeOnEsc:a,modal:l}=i,d=!1,u=f=>{if(!r.contains(this.gos.getActiveDomElement()))return;f.key===z.ESCAPE&&!To(f)&&p({keyboardEvent:f})},c=f=>p({mouseEvent:f}),h=f=>p({touchEvent:f}),p=(f={})=>{let{mouseEvent:C,touchEvent:b,keyboardEvent:x,forceHide:S}=f;!S&&(this.isEventFromCurrentPopup({mouseEvent:C,touchEvent:b},o)||d)||(d=!0,e.removeChild(r),t.removeEventListener("keydown",u),t.removeEventListener("mousedown",c),t.removeEventListener("touchstart",h),t.removeEventListener("contextmenu",c),this.eventService.removeEventListener(m.EVENT_DRAG_STARTED,c),n&&n(C||b||x),this.removePopupFromPopupList(o))};return s&&s({hidePopup:p}),window.setTimeout(()=>{a&&t.addEventListener("keydown",u),l&&(t.addEventListener("mousedown",c),this.eventService.addEventListener(m.EVENT_DRAG_STARTED,c),t.addEventListener("touchstart",h),t.addEventListener("contextmenu",c))},0),p}addPopupToPopupList(i,t,e,r){this.popupList.push({element:i,wrapper:t,hideFunc:e,instanceId:DT++,isAnchored:!!r}),r&&this.setPopupPositionRelatedToElement(i,r)}getPopupIndex(i){return this.popupList.findIndex(t=>t.element===i)}setPopupPositionRelatedToElement(i,t){let e=this.getPopupIndex(i);if(e===-1)return;let r=this.popupList[e];if(r.stopAnchoringPromise&&r.stopAnchoringPromise.then(n=>n&&n()),r.stopAnchoringPromise=void 0,r.isAnchored=!1,!t)return;let o=this.keepPopupPositionedRelativeTo({element:t,ePopup:i,hidePopup:r.hideFunc});return r.stopAnchoringPromise=o,r.isAnchored=!0,o}removePopupFromPopupList(i){this.setAlignedStyles(i,null),this.setPopupPositionRelatedToElement(i,null),this.popupList=this.popupList.filter(t=>t.element!==i)}keepPopupPositionedRelativeTo(i){let t=this.getPopupParent(),e=t.getBoundingClientRect(),{element:r,ePopup:o}=i,n=r.getBoundingClientRect(),s=e.top-n.top,a=e.left-n.left,l=s,d=a,u=o.style.top,c=parseInt(u.substring(0,u.length-1),10),h=o.style.left,p=parseInt(h.substring(0,h.length-1),10);return new Er(f=>{this.getFrameworkOverrides().setInterval(()=>{let C=t.getBoundingClientRect(),b=r.getBoundingClientRect();if(b.top==0&&b.left==0&&b.height==0&&b.width==0){i.hidePopup();return}let S=C.top-b.top;if(S!=l){let I=this.keepXYWithinBounds(o,c+s-S,0);o.style.top=`${I}px`}l=S;let R=C.left-b.left;if(R!=d){let I=this.keepXYWithinBounds(o,p+a-R,1);o.style.left=`${I}px`}d=R},200).then(C=>{f(()=>{C!=null&&window.clearInterval(C)})})})}hasAnchoredPopup(){return this.popupList.some(i=>i.isAnchored)}isEventFromCurrentPopup(i,t){let{mouseEvent:e,touchEvent:r}=i,o=e||r;if(!o)return!1;let n=this.getPopupIndex(t);if(n===-1)return!1;for(let s=n;s<this.popupList.length;s++){let a=this.popupList[s];if(yh(a.element,o))return!0}return this.isElementWithinCustomPopup(o.target)}isElementWithinCustomPopup(i){let t=this.gos.getDocument();for(;i&&i!==t.body;){if(i.classList.contains("ag-custom-component-popup")||i.parentElement===null)return!0;i=i.parentElement}return!1}getWrapper(i){for(;!i.classList.contains("ag-popup")&&i.parentElement;)i=i.parentElement;return i.classList.contains("ag-popup")?i:null}setAlwaysOnTop(i,t){let e=this.getWrapper(i);e&&(e.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(e))}bringPopupToFront(i){let t=this.getPopupParent(),e=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),r=e.length,o=Array.prototype.slice.call(t.querySelectorAll(".ag-popup.ag-always-on-top")),n=o.length,s=this.getWrapper(i);if(!s||r<=1||!t.contains(i))return;let a=e.indexOf(s),l=s.querySelectorAll("div"),d=[];for(l.forEach(u=>{u.scrollTop!==0&&d.push([u,u.scrollTop])}),n?s.classList.contains("ag-always-on-top")?a!==r-1&&rt(o).insertAdjacentElement("afterend",s):a!==r-n-1&&o[0].insertAdjacentElement("beforebegin",s):a!==r-1&&rt(e).insertAdjacentElement("afterend",s);d.length;){let u=d.pop();u[0].scrollTop=u[1]}}};An.WAIT_FOR_POPUP_CONTENT_RESIZE=200;g([w("focusService")],An.prototype,"focusService",2);g([w("ctrlsService")],An.prototype,"ctrlsService",2);g([w("resizeObserverService")],An.prototype,"resizeObserverService",2);g([U],An.prototype,"postConstruct",1);An=g([te("popupService")],An);var TT=class extends Pe{constructor(){super(`
        <div class="ag-autocomplete-row" role="presentation">
            <div class="ag-autocomplete-row-label"></div>
        </div>`),this.hasHighlighting=!1}setState(i,t){this.value=i,this.render(),this.updateSelected(t)}updateSelected(i){this.addOrRemoveCssClass("ag-autocomplete-row-selected",i)}setSearchString(i){var t;let e=!1;if(W(i)){let r=(t=this.value)==null?void 0:t.toLocaleLowerCase().indexOf(i.toLocaleLowerCase());if(r>=0){e=!0,this.hasHighlighting=!0;let o=r+i.length,n=ti(this.value.slice(0,r)),s=ti(this.value.slice(r,o)),a=ti(this.value.slice(o));this.getGui().lastElementChild.innerHTML=`${n}<b>${s}</b>${a}`}}!e&&this.hasHighlighting&&(this.hasHighlighting=!1,this.render())}render(){var i;this.getGui().lastElementChild.innerHTML=(i=ti(this.value))!=null?i:"&nbsp;"}},up=class u0 extends ta{constructor(t){super(u0.TEMPLATE),this.params=t,this.searchString=""}destroy(){super.destroy()}init(){this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList=this.createManagedBean(new a0({cssIdentifier:"autocomplete"})),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:()=>this.autocompleteEntries.length,getRow:e=>this.autocompleteEntries[e]});let t=this.virtualList.getGui();this.addManagedListener(t,"click",()=>this.params.onConfirmed()),this.addManagedListener(t,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(t,"mousedown",e=>e.preventDefault()),this.setSelectedValue(0)}onNavigationKeyDown(t,e){t.preventDefault();let r=this.autocompleteEntries.indexOf(this.selectedValue),o=e===z.UP?r-1:r+1;this.checkSetSelectedValue(o)}setSearch(t){this.searchString=t,W(t)?this.runSearch():(this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList.refresh(),this.checkSetSelectedValue(0)),this.updateSearchInList()}runContainsSearch(t,e){let r,o=!1,n=t.toLocaleLowerCase(),s=e.filter(a=>{let d=a.toLocaleLowerCase().indexOf(n),u=d===0,c=d>=0;return c&&(!r||!o&&u||o===u&&a.length<r.length)&&(r=a,o=u),c});return!r&&s.length&&(r=s[0]),{topMatch:r,allMatches:s}}runSearch(){var t,e;let{autocompleteEntries:r}=this.params,o=r.map(d=>{var u;return(u=d.displayValue)!=null?u:d.key}),n,s;if(this.params.useFuzzySearch)n=ou(this.searchString,o,!0).values,s=n.length?n[0]:void 0;else{let d=this.runContainsSearch(this.searchString,o);n=d.allMatches,s=d.topMatch}let a=r.filter(({key:d,displayValue:u})=>n.includes(u??d));if(!a.length&&this.selectedValue&&((e=(t=this.params)==null?void 0:t.forceLastSelection)!=null&&e.call(t,this.selectedValue,this.searchString))&&(a=[this.selectedValue]),this.autocompleteEntries=a,this.virtualList.refresh(),!s)return;let l=n.indexOf(s);this.checkSetSelectedValue(l)}updateSearchInList(){this.virtualList.forEachRenderedRow(t=>t.setSearchString(this.searchString))}checkSetSelectedValue(t){t>=0&&t<this.autocompleteEntries.length&&this.setSelectedValue(t)}setSelectedValue(t){let e=this.autocompleteEntries[t];this.selectedValue!==e&&(this.selectedValue=e,this.virtualList.ensureIndexVisible(t),this.virtualList.forEachRenderedRow((r,o)=>{r.updateSelected(t===o)}))}createRowComponent(t){var e;let r=new TT;return this.getContext().createBean(r),r.setState((e=t.displayValue)!=null?e:t.key,t===this.selectedValue),r}onMouseMove(t){let e=this.virtualList.getGui().getBoundingClientRect(),r=this.virtualList.getScrollTop(),o=t.clientY-e.top+r,n=Math.floor(o/this.virtualList.getRowHeight());this.checkSetSelectedValue(n)}afterGuiAttached(){this.virtualList.refresh()}getSelectedValue(){var t;return this.autocompleteEntries.length&&(t=this.selectedValue)!=null?t:null}};up.TEMPLATE=`<div class="ag-autocomplete-list-popup">
            <div ref="eList" class="ag-autocomplete-list"></div>
        <div>`;g([Q("eList")],up.prototype,"eList",2);g([U],up.prototype,"init",1);var PT=up,ps=class Sd extends Pe{constructor(){super(`
            <div class="ag-autocomplete" role="presentation">
                <ag-input-text-field ref="eAutocompleteInput"></ag-input-text-field>
            </div>`),this.isListOpen=!1,this.lastPosition=0,this.valid=!0}postConstruct(){this.eAutocompleteInput.onValueChange(t=>this.onValueChanged(t)),this.eAutocompleteInput.getInputElement().setAttribute("autocomplete","off"),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.addGuiEventListener("click",this.updatePositionAndList.bind(this)),this.addDestroyFunc(()=>{this.destroyBean(this.autocompleteList)}),this.addGuiEventListener("focusout",()=>this.onFocusOut())}onValueChanged(t){let e=hn(t);this.updateValue(e),this.updateAutocompleteList(e)}updateValue(t){this.updateLastPosition(),this.dispatchEvent({type:Sd.EVENT_VALUE_CHANGED,value:t}),this.validate(t)}updateAutocompleteList(t){var e,r,o,n;let s=(r=(e=this.listGenerator)==null?void 0:e.call(this,t,this.lastPosition))!=null?r:{enabled:!1};if((!s.type||s.type!==((o=this.autocompleteListParams)==null?void 0:o.type))&&this.isListOpen&&this.closeList(),this.autocompleteListParams=s,(n=this.autocompleteListParams)!=null&&n.enabled){this.isListOpen||this.openList();let{searchString:a}=this.autocompleteListParams;this.autocompleteList.setSearch(a??"")}else this.isListOpen&&this.closeList()}onKeyDown(t){let e=t.key;switch(this.updateLastPosition(),e){case z.ENTER:this.onEnterKeyDown(t);break;case z.TAB:this.onTabKeyDown(t);break;case z.DOWN:case z.UP:this.onUpDownKeyDown(t,e);break;case z.LEFT:case z.RIGHT:case z.PAGE_HOME:case z.PAGE_END:setTimeout(()=>{this.updatePositionAndList()});break;case z.ESCAPE:this.onEscapeKeyDown(t);break;case z.SPACE:t.ctrlKey&&!this.isListOpen&&(t.preventDefault(),this.forceOpenList());break}}confirmSelection(){var t;let e=(t=this.autocompleteList)==null?void 0:t.getSelectedValue();e&&(this.closeList(),this.dispatchEvent({type:Sd.EVENT_OPTION_SELECTED,value:this.getValue(),position:this.lastPosition,updateEntry:e,autocompleteType:this.autocompleteListParams.type}))}onTabKeyDown(t){this.isListOpen&&(t.preventDefault(),t.stopPropagation(),this.confirmSelection())}onEnterKeyDown(t){t.preventDefault(),this.isListOpen?this.confirmSelection():this.onCompleted()}onUpDownKeyDown(t,e){var r;t.preventDefault(),this.isListOpen?(r=this.autocompleteList)==null||r.onNavigationKeyDown(t,e):this.forceOpenList()}onEscapeKeyDown(t){this.isListOpen&&(t.preventDefault(),t.stopPropagation(),this.closeList(),this.setCaret(this.lastPosition,!0))}onFocusOut(){this.isListOpen&&this.closeList()}updatePositionAndList(){var t;this.updateLastPosition(),this.updateAutocompleteList((t=this.eAutocompleteInput.getValue())!=null?t:null)}setCaret(t,e){let r=this.gos.getDocument(),o=this.gos.getActiveDomElement();e&&(!o||o===r.body)&&this.eAutocompleteInput.getFocusableElement().focus();let n=this.eAutocompleteInput.getInputElement();n.setSelectionRange(t,t),t===n.value.length&&(n.scrollLeft=n.scrollWidth)}forceOpenList(){this.onValueChanged(this.eAutocompleteInput.getValue())}updateLastPosition(){var t;this.lastPosition=(t=this.eAutocompleteInput.getInputElement().selectionStart)!=null?t:0}validate(t){var e;this.validator&&(this.validationMessage=this.validator(t),this.eAutocompleteInput.getInputElement().setCustomValidity((e=this.validationMessage)!=null?e:""),this.valid=!this.validationMessage,this.dispatchEvent({type:Sd.EVENT_VALID_CHANGED,isValid:this.valid,validationMessage:this.validationMessage}))}openList(){this.isListOpen=!0,this.autocompleteList=this.createBean(new PT({autocompleteEntries:this.autocompleteListParams.entries,onConfirmed:()=>this.confirmSelection(),forceLastSelection:this.forceLastSelection}));let t=this.autocompleteList.getGui(),e={ePopup:t,type:"autocomplete",eventSource:this.getGui(),position:"under",alignSide:this.gos.get("enableRtl")?"right":"left",keepWithinBounds:!0},r=this.popupService.addPopup({eChild:t,anchorToElement:this.getGui(),positionCallback:()=>this.popupService.positionPopupByComponent(e),ariaLabel:this.listAriaLabel});this.hidePopup=r.hideFunc,this.autocompleteList.afterGuiAttached()}closeList(){this.isListOpen=!1,this.hidePopup(),this.destroyBean(this.autocompleteList),this.autocompleteList=null}onCompleted(){this.isListOpen&&this.closeList(),this.dispatchEvent({type:Sd.EVENT_VALUE_CONFIRMED,value:this.getValue(),isValid:this.isValid()})}getValue(){return hn(this.eAutocompleteInput.getValue())}setInputPlaceholder(t){return this.eAutocompleteInput.setInputPlaceholder(t),this}setInputAriaLabel(t){return this.eAutocompleteInput.setInputAriaLabel(t),this}setListAriaLabel(t){return this.listAriaLabel=t,this}setListGenerator(t){return this.listGenerator=t,this}setValidator(t){return this.validator=t,this}isValid(){return this.valid}setValue(t){let{value:e,position:r,silent:o,updateListOnlyIfOpen:n,restoreFocus:s}=t;this.eAutocompleteInput.setValue(e,!0),this.setCaret(r??this.lastPosition,s),o||this.updateValue(e),(!n||this.isListOpen)&&this.updateAutocompleteList(e)}setForceLastSelection(t){return this.forceLastSelection=t,this}setInputDisabled(t){return this.eAutocompleteInput.setDisabled(t),this}};ps.EVENT_VALUE_CHANGED="eventValueChanged";ps.EVENT_VALUE_CONFIRMED="eventValueConfirmed";ps.EVENT_OPTION_SELECTED="eventOptionSelected";ps.EVENT_VALID_CHANGED="eventValidChanged";g([w("popupService")],ps.prototype,"popupService",2);g([Q("eAutocompleteInput")],ps.prototype,"eAutocompleteInput",2);g([U],ps.prototype,"postConstruct",1);var RT=ps,gs=class hh extends Pe{constructor(t,e,r,o){super(),this.dragSourceDropTarget=t,this.ghost=e,this.horizontal=r,this.template=o}init(){var t;this.setTemplate((t=this.template)!=null?t:hh.TEMPLATE);let e=this.getGui();this.addElementClasses(e),this.addElementClasses(this.eDragHandle,"drag-handle"),this.addElementClasses(this.eText,"text"),this.addElementClasses(this.eButton,"button"),this.eDragHandle.appendChild(It("columnDrag",this.gos)),this.eButton.appendChild(It("cancel",this.gos)),this.setupComponents(),!this.ghost&&this.isDraggable()&&this.addDragSource(),this.setupAria(),this.setupTooltip(),this.activateTabIndex(),this.refreshDraggable()}isDraggable(){return!0}refreshDraggable(){this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!this.isDraggable())}setupAria(){let t=this.localeService.getLocaleTextFunc(),e=[this.getAriaDisplayName()];this.addAdditionalAriaInstructions(e,t),Vr(this.getGui(),e.join(". "))}addAdditionalAriaInstructions(t,e){if(this.isRemovable()){let r=e("ariaDropZoneColumnComponentDescription","Press DELETE to remove");t.push(r)}}setupTooltip(){let t=()=>{let e=this.getTooltip();this.setTooltip({newTooltipText:e})};t(),this.addManagedListener(this.eventService,m.EVENT_NEW_COLUMNS_LOADED,t)}getDragSourceId(){}getDefaultIconName(){return Fe.ICON_NOT_ALLOWED}addDragSource(){let{dragAndDropService:t,eDragHandle:e}=this,r=this.createGetDragItem(),o=this.getDefaultIconName(),n={type:this.getDragSourceType(),sourceId:this.getDragSourceId(),eElement:e,getDefaultIconName:()=>o,getDragItem:r,dragItemName:this.getDisplayName()};t.addDragSource(n,!0),this.addDestroyFunc(()=>t.removeDragSource(n))}setupComponents(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost")}isRemovable(){return!0}refreshRemove(){qe(this.eButton,this.isRemovable())}setupRemove(){this.refreshRemove();let t={type:hh.EVENT_COLUMN_REMOVE};this.addGuiEventListener("keydown",r=>this.onKeyDown(r)),this.addManagedListener(this.eButton,"click",r=>{this.dispatchEvent(t),r.stopPropagation()});let e=new Di(this.eButton);this.addManagedListener(e,Di.EVENT_TAP,()=>{this.dispatchEvent(t)}),this.addDestroyFunc(e.destroy.bind(e))}onKeyDown(t){t.key===z.DELETE&&this.isRemovable()&&(t.preventDefault(),this.dispatchEvent({type:hh.EVENT_COLUMN_REMOVE}))}getDisplayValue(){return this.getDisplayName()}setTextValue(){let t=this.getDisplayValue(),e=ti(t);this.eText.innerHTML=e}addElementClasses(t,e){e=e?`-${e}`:"";let r=this.horizontal?"horizontal":"vertical";t.classList.add(`ag-column-drop-cell${e}`,`ag-column-drop-${r}-cell${e}`)}destroy(){super.destroy(),this.dragSourceDropTarget=null}};gs.EVENT_COLUMN_REMOVE="columnRemove";gs.TEMPLATE=`<span role="option">
          <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>
          <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>
          <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>
        </span>`;g([w("dragAndDropService")],gs.prototype,"dragAndDropService",2);g([Q("eText")],gs.prototype,"eText",2);g([Q("eDragHandle")],gs.prototype,"eDragHandle",2);g([Q("eButton")],gs.prototype,"eButton",2);g([U],gs.prototype,"init",1);var MT=gs,fu=class dn extends Pe{constructor(t){super('<div class="ag-unselectable" role="presentation"></div>'),this.horizontal=t,this.state=dn.STATE_NOT_DRAGGING,this.guiDestroyFunctions=[],this.childPillComponents=[],this.resizeEnabled=!1,this.addElementClasses(this.getGui()),this.ePillDropList=document.createElement("div"),this.addElementClasses(this.ePillDropList,"list"),Bt(this.ePillDropList,"listbox")}isHorizontal(){return this.horizontal}toggleResizable(t){this.positionableFeature.setResizable(t?{bottom:!0}:!1),this.resizeEnabled=t}isSourceEventFromTarget(t){let{dropZoneTarget:e,dragSource:r}=t;return e.contains(r.eElement)}destroy(){this.destroyGui(),super.destroy()}destroyGui(){this.guiDestroyFunctions.forEach(t=>t()),this.guiDestroyFunctions.length=0,this.childPillComponents.length=0,Zt(this.getGui()),Zt(this.ePillDropList)}init(t){this.params=t??{},this.createManagedBean(new cs(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.setupDropTarget(),this.positionableFeature=new vl(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature),this.refreshGui(),Vr(this.ePillDropList,this.getAriaLabel())}handleKeyDown(t){let e=!this.horizontal,r=t.key===z.DOWN,o=t.key===z.UP;if(!e){let s=this.gos.get("enableRtl");r=!s&&t.key===z.RIGHT||s&&t.key===z.LEFT,o=!s&&t.key===z.LEFT||s&&t.key===z.RIGHT}if(!r&&!o)return;let n=this.focusService.findNextFocusableElement(this.getFocusableElement(),!1,o);n&&(t.preventDefault(),n.focus())}addElementClasses(t,e){e=e?`-${e}`:"";let r=this.horizontal?"horizontal":"vertical";t.classList.add(`ag-column-drop${e}`,`ag-column-drop-${r}${e}`)}setupDropTarget(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.dragAndDropService.addDropTarget(this.dropTarget)}minimumAllowedNewInsertIndex(){return 0}checkInsertIndex(t){let e=this.getNewInsertIndex(t);if(e<0)return!1;let r=this.minimumAllowedNewInsertIndex(),o=Math.max(r,e),n=o!==this.insertIndex;return n&&(this.insertIndex=o),n}getNewInsertIndex(t){let e=t.event,r=this.horizontal?e.clientX:e.clientY,o=this.childPillComponents.map(s=>s.getGui().getBoundingClientRect()),n=o.findIndex(s=>this.horizontal?s.right>r&&s.left<r:s.top<r&&s.bottom>r);if(n===-1){let s=this.gos.get("enableRtl");return o.every(d=>r>(this.horizontal?d.right:d.bottom))?s&&this.horizontal?0:this.childPillComponents.length:o.every(d=>r<(this.horizontal?d.left:d.top))?s&&this.horizontal?this.childPillComponents.length:0:this.insertIndex}return this.insertIndex<=n?n+1:n}checkDragStartedBySelf(t){this.state===dn.STATE_NOT_DRAGGING&&(this.state=dn.STATE_REARRANGE_ITEMS,this.potentialDndItems=this.getItems(t.dragSource.getDragItem()),this.refreshGui(),this.checkInsertIndex(t),this.refreshGui())}onDragging(t){this.checkDragStartedBySelf(t),this.checkInsertIndex(t)&&this.refreshGui()}handleDragEnterEnd(t){}onDragEnter(t){let e=this.getItems(t.dragSource.getDragItem());this.state=dn.STATE_NEW_ITEMS_IN;let r=e.filter(n=>this.isItemDroppable(n,t)),o=r.every(n=>this.childPillComponents.map(s=>s.getItem()).indexOf(n)!==-1);if(r.length!==0){if(this.potentialDndItems=r,o){this.state=dn.STATE_NOT_DRAGGING;return}this.handleDragEnterEnd(t),this.checkInsertIndex(t),this.refreshGui()}}isPotentialDndItems(){return ZC(this.potentialDndItems)}handleDragLeaveEnd(t){}onDragLeave(t){if(this.state===dn.STATE_REARRANGE_ITEMS){let e=this.getItems(t.dragSource.getDragItem());this.removeItems(e)}this.isPotentialDndItems()&&(this.handleDragLeaveEnd(t),this.potentialDndItems=[],this.refreshGui()),this.state=dn.STATE_NOT_DRAGGING}refreshOnDragStop(){return!0}onDragStop(){if(this.isPotentialDndItems()){let t=!1;this.state===dn.STATE_NEW_ITEMS_IN?(this.addItems(this.potentialDndItems),t=!0):t=this.rearrangeItems(this.potentialDndItems),this.potentialDndItems=[],(this.refreshOnDragStop()||!t)&&this.refreshGui()}this.state=dn.STATE_NOT_DRAGGING}removeItems(t){let e=this.getExistingItems().filter(r=>!kr(t,r));this.updateItems(e)}addItems(t){if(!t)return;let e=this.getExistingItems().slice(),r=t.filter(o=>e.indexOf(o)<0);Qg(e,r,this.insertIndex),this.updateItems(e)}addItem(t){this.insertIndex=this.getExistingItems().length,this.addItems([t]),this.refreshGui()}rearrangeItems(t){let e=this.getNonGhostItems().slice();return Qg(e,t,this.insertIndex),cn(e,this.getExistingItems())?!1:(this.updateItems(e),!0)}refreshGui(){let t=this.ePillDropList.scrollTop,e=this.resizeEnabled,r=this.getFocusedItem(),o=this.focusService.findNextFocusableElement();o||(o=this.focusService.findNextFocusableElement(void 0,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addItemsToGui(),this.isHorizontal()||(this.ePillDropList.scrollTop=t),e&&this.toggleResizable(e),this.focusService.isKeyboardMode()&&this.restoreFocus(r,o)}getFocusedItem(){let t=this.getGui(),e=this.gos.getActiveDomElement();return t.contains(e)?Array.from(t.querySelectorAll(".ag-column-drop-cell")).indexOf(e):-1}restoreFocus(t,e){let r=this.getGui(),o=Array.from(r.querySelectorAll(".ag-column-drop-cell"));if(t===-1)return;o.length===0&&e.focus();let n=Math.min(o.length-1,t),s=o[n];s&&s.focus()}focusList(t){let e=t?this.childPillComponents.length-1:0;this.restoreFocus(e,this.getFocusableElement())}getNonGhostItems(){let t=this.getExistingItems();return this.isPotentialDndItems()?t.filter(e=>!kr(this.potentialDndItems,e)):t}addItemsToGui(){let e=this.getNonGhostItems().map(r=>this.createItemComponent(r,!1));if(this.isPotentialDndItems()){let r=this.potentialDndItems.map(o=>this.createItemComponent(o,!0));this.insertIndex>=e.length?e.push(...r):e.splice(this.insertIndex,0,...r)}this.appendChild(this.ePillDropList),e.forEach((r,o)=>{o>0&&this.addArrow(this.ePillDropList),this.ePillDropList.appendChild(r.getGui())}),this.addAriaLabelsToComponents()}addAriaLabelsToComponents(){this.childPillComponents.forEach((t,e)=>{let r=t.getGui();Vh(r,e+1),kh(r,this.childPillComponents.length)})}createItemComponent(t,e){let r=this.createPillComponent(t,this.dropTarget,e,this.horizontal);return r.addEventListener(MT.EVENT_COLUMN_REMOVE,this.removeItems.bind(this,[t])),this.context.createBean(r),this.guiDestroyFunctions.push(()=>this.destroyBean(r)),e||this.childPillComponents.push(r),r}addIconAndTitleToGui(){let{title:t,icon:e}=this.params;if(!t||!e)return;let r=document.createElement("div");if(tu(r,!0),this.addElementClasses(r,"title-bar"),this.addElementClasses(e,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingItemsEmpty()),r.appendChild(e),!this.horizontal){let o=document.createElement("span");this.addElementClasses(o,"title"),o.innerHTML=t,r.appendChild(o)}this.appendChild(r)}isExistingItemsEmpty(){return this.getExistingItems().length===0}addEmptyMessageToGui(){let{emptyMessage:t}=this.params;if(!t||!this.isExistingItemsEmpty()||this.isPotentialDndItems())return;let e=document.createElement("span");e.innerHTML=t,this.addElementClasses(e,"empty-message"),this.ePillDropList.appendChild(e)}addArrow(t){if(this.horizontal){let e=this.gos.get("enableRtl"),r=It(e?"smallLeft":"smallRight",this.gos);this.addElementClasses(r,"cell-separator"),t.appendChild(r)}}};fu.STATE_NOT_DRAGGING="notDragging";fu.STATE_NEW_ITEMS_IN="newItemsIn";fu.STATE_REARRANGE_ITEMS="rearrangeItems";g([w("focusService")],fu.prototype,"focusService",2);g([w("dragAndDropService")],fu.prototype,"dragAndDropService",2);var IT=["touchstart","touchend","touchmove","touchcancel"],wm=class{constructor(i="javascript"){this.frameworkName=i,this.renderingEngine="vanilla",this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t()}setInterval(i,t){return new Er(e=>{e(window.setInterval(i,t))})}addEventListener(i,t,e,r){let o=kr(IT,t);i.addEventListener(t,e,{capture:!!r,passive:o})}get shouldWrapOutgoing(){return!1}frameworkComponent(i){return null}isFrameworkComponent(i){return!1}getDocLink(i){return`https://www.ag-grid.com/${this.frameworkName==="solid"?"react":this.frameworkName}-data-grid${i?`/${i}`:""}`}},as=class extends j{getNextCellToFocus(i,t,e=!1){return e?this.getNextCellToFocusWithCtrlPressed(i,t):this.getNextCellToFocusWithoutCtrlPressed(i,t)}getNextCellToFocusWithCtrlPressed(i,t){let e=i===z.UP,r=i===z.DOWN,o=i===z.LEFT,n,s;if(e||r)s=e?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),n=t.column;else{let a=this.columnModel.getAllDisplayedColumns(),l=this.gos.get("enableRtl");s=t.rowIndex,n=o!==l?a[0]:rt(a)}return{rowIndex:s,rowPinned:null,column:n}}getNextCellToFocusWithoutCtrlPressed(i,t){let e=t,r=!1;for(;!r;){switch(i){case z.UP:e=this.getCellAbove(e);break;case z.DOWN:e=this.getCellBelow(e);break;case z.RIGHT:this.gos.get("enableRtl")?e=this.getCellToLeft(e):e=this.getCellToRight(e);break;case z.LEFT:this.gos.get("enableRtl")?e=this.getCellToRight(e):e=this.getCellToLeft(e);break;default:e=null,console.warn("AG Grid: unknown key for navigation "+i);break}e?r=this.isCellGoodToFocusOn(e):r=!0}return e}isCellGoodToFocusOn(i){let t=i.column,e;switch(i.rowPinned){case"top":e=this.pinnedRowModel.getPinnedTopRow(i.rowIndex);break;case"bottom":e=this.pinnedRowModel.getPinnedBottomRow(i.rowIndex);break;default:e=this.rowModel.getRow(i.rowIndex);break}return e?!t.isSuppressNavigable(e):!1}getCellToLeft(i){if(!i)return null;let t=this.columnModel.getDisplayedColBefore(i.column);return t?{rowIndex:i.rowIndex,column:t,rowPinned:i.rowPinned}:null}getCellToRight(i){if(!i)return null;let t=this.columnModel.getDisplayedColAfter(i.column);return t?{rowIndex:i.rowIndex,column:t,rowPinned:i.rowPinned}:null}getRowBelow(i){let t=i.rowIndex,e=i.rowPinned;if(this.isLastRowInContainer(i))switch(e){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}let r=this.rowModel.getRow(i.rowIndex),o=this.getNextStickyPosition(r);return o||{rowIndex:t+1,rowPinned:e}}getNextStickyPosition(i,t){if(!this.gos.isGroupRowsSticky()||!i||!i.sticky)return;let e=this.rowRenderer.getStickyTopRowCtrls().some(a=>a.getRowNode().rowIndex===i.rowIndex),r=[];e?r=[...this.rowRenderer.getStickyTopRowCtrls()].sort((a,l)=>a.getRowNode().rowIndex-l.getRowNode().rowIndex):r=[...this.rowRenderer.getStickyBottomRowCtrls()].sort((a,l)=>l.getRowNode().rowIndex-a.getRowNode().rowIndex);let o=t?-1:1,n=r.findIndex(a=>a.getRowNode().rowIndex===i.rowIndex),s=r[n+o];if(s)return{rowIndex:s.getRowNode().rowIndex,rowPinned:null}}getCellBelow(i){if(!i)return null;let t=this.getRowBelow(i);return t?{rowIndex:t.rowIndex,column:i.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(i){let t=i.rowPinned,e=i.rowIndex;return t==="top"?this.pinnedRowModel.getPinnedTopRowData().length-1<=e:t==="bottom"?this.pinnedRowModel.getPinnedBottomRowData().length-1<=e:this.paginationProxy.getPageLastRow()<=e}getRowAbove(i){let t=i.rowIndex,e=i.rowPinned;if(e?t===0:t===this.paginationProxy.getPageFirstRow())return e==="top"?null:e?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;let o=this.rowModel.getRow(i.rowIndex),n=this.getNextStickyPosition(o,!0);return n||{rowIndex:t-1,rowPinned:e}}getCellAbove(i){if(!i)return null;let t=this.getRowAbove({rowIndex:i.rowIndex,rowPinned:i.rowPinned});return t?{rowIndex:t.rowIndex,column:i.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.paginationProxy.getPageLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowData().length-1,rowPinned:"top"}}getNextTabbedCell(i,t){return t?this.getNextTabbedCellBackwards(i):this.getNextTabbedCellForwards(i)}getNextTabbedCellForwards(i){let t=this.columnModel.getAllDisplayedColumns(),e=i.rowIndex,r=i.rowPinned,o=this.columnModel.getDisplayedColAfter(i.column);if(!o){o=t[0];let n=this.getRowBelow(i);if(Te(n)||!n.rowPinned&&!this.paginationProxy.isRowInPage(n))return null;e=n?n.rowIndex:null,r=n?n.rowPinned:null}return{rowIndex:e,column:o,rowPinned:r}}getNextTabbedCellBackwards(i){let t=this.columnModel.getAllDisplayedColumns(),e=i.rowIndex,r=i.rowPinned,o=this.columnModel.getDisplayedColBefore(i.column);if(!o){o=rt(t);let n=this.getRowAbove({rowIndex:i.rowIndex,rowPinned:i.rowPinned});if(Te(n)||!n.rowPinned&&!this.paginationProxy.isRowInPage(n))return null;e=n?n.rowIndex:null,r=n?n.rowPinned:null}return{rowIndex:e,column:o,rowPinned:r}}};g([w("columnModel")],as.prototype,"columnModel",2);g([w("rowModel")],as.prototype,"rowModel",2);g([w("rowRenderer")],as.prototype,"rowRenderer",2);g([w("pinnedRowModel")],as.prototype,"pinnedRowModel",2);g([w("paginationProxy")],as.prototype,"paginationProxy",2);as=g([te("cellNavigationService")],as);var Ws=class extends j{constructor(){super(...arguments),this.consuming=!1}setBeans(i){this.logger=i.create("AlignedGridsService")}getAlignedGridApis(){var i;let t=(i=this.gos.get("alignedGrids"))!=null?i:[],e=typeof t=="function";typeof t=="function"&&(t=t());let r=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return t.map(n=>{var s;if(!n){un("alignedGrids contains an undefined option."),e||un(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),un(r());return}if(n instanceof We)return n;let a=n;return"current"in a?(s=a.current)==null?void 0:s.api:(a.api||un(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${r()}`),a.api)}).filter(n=>!!n&&!n.isDestroyed())}init(){this.addManagedListener(this.eventService,m.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,m.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,m.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,m.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,m.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,m.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))}fireEvent(i){this.consuming||this.getAlignedGridApis().forEach(t=>{if(t.isDestroyed())return;let e=t.__getAlignedGridService();i(e)})}onEvent(i){this.consuming=!0,i(),this.consuming=!1}fireColumnEvent(i){this.fireEvent(t=>{t.onColumnEvent(i)})}fireScrollEvent(i){i.direction==="horizontal"&&this.fireEvent(t=>{t.onScrollEvent(i)})}onScrollEvent(i){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(i.left,!0)})}getMasterColumns(i){let t=[];return i.columns?i.columns.forEach(e=>{t.push(e)}):i.column&&t.push(i.column),t}getColumnIds(i){let t=[];return i.columns?i.columns.forEach(e=>{t.push(e.getColId())}):i.column&&t.push(i.column.getColId()),t}onColumnEvent(i){this.onEvent(()=>{switch(i.type){case m.EVENT_COLUMN_MOVED:case m.EVENT_COLUMN_VISIBLE:case m.EVENT_COLUMN_PINNED:case m.EVENT_COLUMN_RESIZED:let t=i;this.processColumnEvent(t);break;case m.EVENT_COLUMN_GROUP_OPENED:let e=i;this.processGroupOpenedEvent(e);break;case m.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(i){i.columnGroups.forEach(t=>{let e=null;if(t){let r=t.getGroupId();e=this.columnModel.getProvidedColumnGroup(r)}t&&!e||(this.logger.log("onColumnEvent-> processing "+i+" expanded = "+t.isExpanded()),this.columnModel.setColumnGroupOpened(e,t.isExpanded(),"alignedGridChanged"))})}processColumnEvent(i){var t;let e=i.column,r=null;if(e&&(r=this.columnModel.getPrimaryColumn(e.getColId())),e&&!r)return;let o=this.getMasterColumns(i);switch(i.type){case m.EVENT_COLUMN_MOVED:{let d=i,c=i.api.getColumnState().map(h=>({colId:h.colId}));this.columnModel.applyColumnState({state:c,applyOrder:!0},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${i.type} toIndex = ${d.toIndex}`)}break;case m.EVENT_COLUMN_VISIBLE:{let d=i,c=i.api.getColumnState().map(h=>({colId:h.colId,hide:h.hide}));this.columnModel.applyColumnState({state:c},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${i.type} visible = ${d.visible}`)}break;case m.EVENT_COLUMN_PINNED:{let d=i,c=i.api.getColumnState().map(h=>({colId:h.colId,pinned:h.pinned}));this.columnModel.applyColumnState({state:c},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${i.type} pinned = ${d.pinned}`)}break;case m.EVENT_COLUMN_RESIZED:let a=i,l={};o.forEach(d=>{this.logger.log(`onColumnEvent-> processing ${i.type} actualWidth = ${d.getActualWidth()}`),l[d.getId()]={key:d.getColId(),newWidth:d.getActualWidth()}}),(t=a.flexColumns)==null||t.forEach(d=>{l[d.getId()]&&delete l[d.getId()]}),this.columnModel.setColumnWidths(Object.values(l),!1,a.finished,"alignedGridChanged");break}let s=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(a=>{a.setGridOption("alwaysShowVerticalScroll",s)})}};g([w("columnModel")],Ws.prototype,"columnModel",2);g([w("ctrlsService")],Ws.prototype,"ctrlsService",2);g([xo(0,Zr("loggerFactory"))],Ws.prototype,"setBeans",1);g([U],Ws.prototype,"init",1);Ws=g([te("alignedGridsService")],Ws);var js=class extends j{constructor(){super(...arguments),this.selectedNodes=new Map,this.lastRowNode=null}init(){this.rowSelection=this.gos.get("rowSelection"),this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.rowSelection=this.gos.get("rowSelection"),this.deselectAllRowNodes({source:"api"})}),this.addManagedListener(this.eventService,m.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))}destroy(){super.destroy(),this.resetNodes(),this.lastRowNode=null}isMultiselect(){return this.rowSelection==="multiple"}setNodesSelected(i){var t;let{newValue:e,clearSelection:r,suppressFinishActions:o,rangeSelect:n,nodes:s,event:a,source:l="api"}=i;if(s.length===0)return 0;if(s.length>1&&!this.isMultiselect())return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;let d=this.groupSelectsChildren&&i.groupSelectsFiltered===!0,u=s.map(h=>h.footer?h.sibling:h);if(n){if(s.length>1)return console.warn("AG Grid: cannot range select while selecting multiple rows"),0;let h=null;if(l==="checkboxSelected"&&e===!1&&this.lastRowNode&&(this.lastRowNode.id?h=this.lastRowNode:this.lastRowNode=null),h==null&&(h=this.getLastSelectedNode()),h){let p=u[0];if(p!==h&&this.isMultiselect())return this.selectRange(p,h,e,l)}}this.lastRowNode=e?null:u[0];let c=0;for(let h=0;h<u.length;h++){let p=u[h];d&&p.group||p.selectThisNode(e,a,l)&&c++,this.groupSelectsChildren&&((t=p.childrenAfterGroup)!=null&&t.length)&&(c+=this.selectChildren(p,e,d,l))}if(!o&&(e&&(r||!this.isMultiselect())&&(c+=this.clearOtherNodes(u[0],l)),c>0)){this.updateGroupsFromChildrenSelections(l);let p={type:m.EVENT_SELECTION_CHANGED,source:l};this.eventService.dispatchEvent(p)}return c}selectRange(i,t,e=!0,r){let o=this.rowModel.getNodesInRangeForSelection(i,t),n=0;o.forEach(a=>{if(a.group&&this.groupSelectsChildren)return;a.selectThisNode(e,void 0,r)&&n++}),this.updateGroupsFromChildrenSelections(r);let s={type:m.EVENT_SELECTION_CHANGED,source:r};return this.eventService.dispatchEvent(s),n}selectChildren(i,t,e,r){let o=e?i.childrenAfterAggFilter:i.childrenAfterGroup;return Te(o)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:e,source:r,nodes:o})}getLastSelectedNode(){let i=Array.from(this.selectedNodes.keys());if(i.length==0)return null;let t=this.selectedNodes.get(rt(i));return t||null}getSelectedNodes(){let i=[];return this.selectedNodes.forEach(t=>{t&&i.push(t)}),i}getSelectedRows(){let i=[];return this.selectedNodes.forEach(t=>{t&&t.data&&i.push(t.data)}),i}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(i){let t=new Map;this.selectedNodes.forEach((e,r)=>{e&&i(e)&&t.set(r,e)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(i,t){if(!this.groupSelectsChildren||this.rowModel.getType()!=="clientSide")return!1;let r=this.rowModel.getRootNode();t||(t=new lp(!0,r),t.setInactive());let o=!1;return t.forEachChangedNodeDepthFirst(n=>{if(n!==r){let s=n.calculateSelectedFromChildren();o=n.selectThisNode(s===null?!1:s,void 0,i)||o}}),o}clearOtherNodes(i,t){let e=new Map,r=0;return this.selectedNodes.forEach(o=>{if(o&&o.id!==i.id){let n=this.selectedNodes.get(o.id);r+=n.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&o.parent&&e.set(o.parent.id,o.parent)}}),e.forEach(o=>{let n=o.calculateSelectedFromChildren();o.selectThisNode(n===null?!1:n,void 0,t)}),r}onRowSelected(i){let t=i.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(i,t){this.syncInOldRowNode(i,t),this.syncInNewRowNode(i)}syncInOldRowNode(i,t){if(W(t)&&i.id!==t.id&&t){let r=t.id;this.selectedNodes.get(r)==i&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(i){this.selectedNodes.has(i.id)?(i.setSelectedInitialValue(!0),this.selectedNodes.set(i.id,i)):i.setSelectedInitialValue(!1)}reset(i){let t=this.getSelectionCount();if(this.resetNodes(),t){let e={type:m.EVENT_SELECTION_CHANGED,source:i};this.eventService.dispatchEvent(e)}}resetNodes(){var i;(i=this.selectedNodes)==null||i.clear()}getBestCostNodeSelection(){if(this.rowModel.getType()!=="clientSide")return;let t=this.rowModel.getTopLevelNodes();if(t===null)return;let e=[];function r(o){for(let n=0,s=o.length;n<s;n++){let a=o[n];if(a.isSelected())e.push(a);else{let l=a;l.group&&l.children&&r(l.children)}}}return r(t),e}isEmpty(){let i=0;return this.selectedNodes.forEach(t=>{t&&i++}),i===0}deselectAllRowNodes(i){let t=a=>a.selectThisNode(!1,void 0,r),e=this.rowModel.getType()==="clientSide",{source:r,justFiltered:o,justCurrentPage:n}=i;if(n||o){if(!e){console.error("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(o,n).forEach(t)}else this.selectedNodes.forEach(a=>{a&&t(a)}),this.reset(r);e&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(r);let s={type:m.EVENT_SELECTION_CHANGED,source:r};this.eventService.dispatchEvent(s)}getSelectedCounts(i,t){let e=0,r=0,o=n=>{this.groupSelectsChildren&&n.group||(n.isSelected()?e++:n.selectable&&r++)};return this.getNodesToSelect(i,t).forEach(o),{selectedCount:e,notSelectedCount:r}}getSelectAllState(i,t){let{selectedCount:e,notSelectedCount:r}=this.getSelectedCounts(i,t);return e===0&&r===0?!1:e>0&&r>0?null:e>0}hasNodesToSelect(i=!1,t=!1){return this.getNodesToSelect(i,t).filter(e=>e.selectable).length>0}getNodesToSelect(i=!1,t=!1){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);let e=[];if(t)return this.paginationProxy.forEachNodeOnPage(o=>{if(!o.group){e.push(o);return}if(!o.expanded){let n=s=>{var a;e.push(s),(a=s.childrenAfterFilter)!=null&&a.length&&s.childrenAfterFilter.forEach(n)};n(o);return}this.groupSelectsChildren||e.push(o)}),e;let r=this.rowModel;return i?(r.forEachNodeAfterFilter(o=>{e.push(o)}),e):(r.forEachNode(o=>{e.push(o)}),e)}selectAllRowNodes(i){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);let{source:t,justFiltered:e,justCurrentPage:r}=i,o=s=>s.selectThisNode(!0,void 0,t);this.getNodesToSelect(e,r).forEach(o),this.rowModel.getType()==="clientSide"&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t);let n={type:m.EVENT_SELECTION_CHANGED,source:t};this.eventService.dispatchEvent(n)}getSelectionState(){let i=[];return this.selectedNodes.forEach(t=>{t?.id&&i.push(t.id)}),i.length?i:null}setSelectionState(i,t){if(!Array.isArray(i))return;let e=new Set(i),r=[];this.rowModel.forEachNode(o=>{e.has(o.id)&&r.push(o)}),this.setNodesSelected({newValue:!0,nodes:r,source:t})}};g([w("rowModel")],js.prototype,"rowModel",2);g([w("paginationProxy")],js.prototype,"paginationProxy",2);g([U],js.prototype,"init",1);js=g([te("selectionService")],js);var Us=class{constructor(i){this.viaApi=(t,...e)=>(Ce(`Since v31, 'columnApi.${t}' is deprecated and moved to 'api.${t}'.`),this.api[t](...e)),this.api=i}sizeColumnsToFit(i){this.viaApi("sizeColumnsToFit",i)}setColumnGroupOpened(i,t){this.viaApi("setColumnGroupOpened",i,t)}getColumnGroup(i,t){return this.viaApi("getColumnGroup",i,t)}getProvidedColumnGroup(i){return this.viaApi("getProvidedColumnGroup",i)}getDisplayNameForColumn(i,t){return this.viaApi("getDisplayNameForColumn",i,t)}getDisplayNameForColumnGroup(i,t){return this.viaApi("getDisplayNameForColumnGroup",i,t)}getColumn(i){return this.viaApi("getColumn",i)}getColumns(){return this.viaApi("getColumns")}applyColumnState(i){return this.viaApi("applyColumnState",i)}getColumnState(){return this.viaApi("getColumnState")}resetColumnState(){this.viaApi("resetColumnState")}getColumnGroupState(){return this.viaApi("getColumnGroupState")}setColumnGroupState(i){this.viaApi("setColumnGroupState",i)}resetColumnGroupState(){this.viaApi("resetColumnGroupState")}isPinning(){return this.viaApi("isPinning")}isPinningLeft(){return this.viaApi("isPinningLeft")}isPinningRight(){return this.viaApi("isPinningRight")}getDisplayedColAfter(i){return this.viaApi("getDisplayedColAfter",i)}getDisplayedColBefore(i){return this.viaApi("getDisplayedColBefore",i)}setColumnVisible(i,t){this.viaApi("setColumnVisible",i,t)}setColumnsVisible(i,t){this.viaApi("setColumnsVisible",i,t)}setColumnPinned(i,t){this.viaApi("setColumnPinned",i,t)}setColumnsPinned(i,t){this.viaApi("setColumnsPinned",i,t)}getAllGridColumns(){return this.viaApi("getAllGridColumns")}getDisplayedLeftColumns(){return this.viaApi("getDisplayedLeftColumns")}getDisplayedCenterColumns(){return this.viaApi("getDisplayedCenterColumns")}getDisplayedRightColumns(){return this.viaApi("getDisplayedRightColumns")}getAllDisplayedColumns(){return this.viaApi("getAllDisplayedColumns")}getAllDisplayedVirtualColumns(){return this.viaApi("getAllDisplayedVirtualColumns")}moveColumn(i,t){this.viaApi("moveColumn",i,t)}moveColumnByIndex(i,t){this.viaApi("moveColumnByIndex",i,t)}moveColumns(i,t){this.viaApi("moveColumns",i,t)}moveRowGroupColumn(i,t){this.viaApi("moveRowGroupColumn",i,t)}setColumnAggFunc(i,t){this.viaApi("setColumnAggFunc",i,t)}setColumnWidth(i,t,e=!0,r){this.viaApi("setColumnWidth",i,t,e,r)}setColumnWidths(i,t=!0,e){this.viaApi("setColumnWidths",i,t,e)}setPivotMode(i){this.viaApi("setPivotMode",i)}isPivotMode(){return this.viaApi("isPivotMode")}getPivotResultColumn(i,t){return this.viaApi("getPivotResultColumn",i,t)}setValueColumns(i){this.viaApi("setValueColumns",i)}getValueColumns(){return this.viaApi("getValueColumns")}removeValueColumn(i){this.viaApi("removeValueColumn",i)}removeValueColumns(i){this.viaApi("removeValueColumns",i)}addValueColumn(i){this.viaApi("addValueColumn",i)}addValueColumns(i){this.viaApi("addValueColumns",i)}setRowGroupColumns(i){this.viaApi("setRowGroupColumns",i)}removeRowGroupColumn(i){this.viaApi("removeRowGroupColumn",i)}removeRowGroupColumns(i){this.viaApi("removeRowGroupColumns",i)}addRowGroupColumn(i){this.viaApi("addRowGroupColumn",i)}addRowGroupColumns(i){this.viaApi("addRowGroupColumns",i)}getRowGroupColumns(){return this.viaApi("getRowGroupColumns")}setPivotColumns(i){this.viaApi("setPivotColumns",i)}removePivotColumn(i){this.viaApi("removePivotColumn",i)}removePivotColumns(i){this.viaApi("removePivotColumns",i)}addPivotColumn(i){this.viaApi("addPivotColumn",i)}addPivotColumns(i){this.viaApi("addPivotColumns",i)}getPivotColumns(){return this.viaApi("getPivotColumns")}getLeftDisplayedColumnGroups(){return this.viaApi("getLeftDisplayedColumnGroups")}getCenterDisplayedColumnGroups(){return this.viaApi("getCenterDisplayedColumnGroups")}getRightDisplayedColumnGroups(){return this.viaApi("getRightDisplayedColumnGroups")}getAllDisplayedColumnGroups(){return this.viaApi("getAllDisplayedColumnGroups")}autoSizeColumn(i,t){return this.viaApi("autoSizeColumn",i,t)}autoSizeColumns(i,t){this.viaApi("autoSizeColumns",i,t)}autoSizeAllColumns(i){this.viaApi("autoSizeAllColumns",i)}setPivotResultColumns(i){this.viaApi("setPivotResultColumns",i)}getPivotResultColumns(){return this.viaApi("getPivotResultColumns")}};g([w("gridApi")],Us.prototype,"api",2);Us=g([te("columnApi")],Us);var ls=class extends j{constructor(){super(...arguments),this.initialised=!1,this.isSsrm=!1}init(){this.isSsrm=this.gos.isRowModelType("serverSide"),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;let i=e=>this.callColumnCellValueChangedHandler(e),t=this.gos.useAsyncEvents();this.eventService.addEventListener(m.EVENT_CELL_VALUE_CHANGED,i,t),this.addDestroyFunc(()=>this.eventService.removeEventListener(m.EVENT_CELL_VALUE_CHANGED,i,t)),this.addManagedPropertyListener("treeData",e=>this.isTreeData=e.currentValue)}getValue(i,t,e=!1,r=!1){if(this.initialised||this.init(),!t)return;let o=i.getColDef(),n=o.field,s=i.getColId(),a=t.data,l,d=t.groupData&&t.groupData[s]!==void 0,u=!r&&t.aggData&&t.aggData[s]!==void 0,c=this.isSsrm&&r&&!!i.getColDef().aggFunc,h=this.isSsrm&&t.footer&&t.field&&(i.getColDef().showRowGroup===!0||i.getColDef().showRowGroup===t.field);if(e&&o.filterValueGetter?l=this.executeFilterValueGetter(o.filterValueGetter,a,i,t):this.isTreeData&&u?l=t.aggData[s]:this.isTreeData&&o.valueGetter?l=this.executeValueGetter(o.valueGetter,a,i,t):this.isTreeData&&n&&a?l=Ja(a,n,i.isFieldContainsDots()):d?l=t.groupData[s]:u?l=t.aggData[s]:o.valueGetter?l=this.executeValueGetter(o.valueGetter,a,i,t):h?l=Ja(a,t.field,i.isFieldContainsDots()):n&&a&&!c&&(l=Ja(a,n,i.isFieldContainsDots())),this.cellExpressions&&typeof l=="string"&&l.indexOf("=")===0){let p=l.substring(1);l=this.executeValueGetter(p,a,i,t)}if(l==null){let p=this.getOpenedGroup(t,i);if(p!=null)return p}return l}parseValue(i,t,e,r){let o=i.getColDef(),n=this.gos.addGridCommonParams({node:t,data:t?.data,oldValue:r,newValue:e,colDef:o,column:i}),s=o.valueParser;return W(s)?typeof s=="function"?s(n):this.expressionService.evaluate(s,n):e}formatValue(i,t,e,r,o=!0){let n=null,s,a=i.getColDef();if(r?s=r:o&&(s=a.valueFormatter),s){let l=this.gos.addGridCommonParams({value:e,node:t,data:t?t.data:null,colDef:a,column:i});typeof s=="function"?n=s(l):n=this.expressionService.evaluate(s,l)}else if(a.refData)return a.refData[e]||"";return n==null&&Array.isArray(e)&&(n=e.join(", ")),n}getOpenedGroup(i,t){if(!this.gos.get("showOpenedGroup")||!t.getColDef().showRowGroup)return;let r=t.getColDef().showRowGroup,o=i.parent;for(;o!=null;){if(o.rowGroupColumn&&(r===!0||r===o.rowGroupColumn.getColId()))return o.key;o=o.parent}}setValue(i,t,e,r){let o=this.columnModel.getPrimaryColumn(t);if(!i||!o)return!1;Te(i.data)&&(i.data={});let{field:n,valueSetter:s}=o.getColDef();if(Te(n)&&Te(s))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;if(!this.dataTypeService.checkType(o,e))return console.warn("AG Grid: Data type of the new value does not match the cell data type of the column"),!1;let a=this.gos.addGridCommonParams({node:i,data:i.data,oldValue:this.getValue(o,i),newValue:e,colDef:o.getColDef(),column:o});a.newValue=e;let l;if(W(s)?typeof s=="function"?l=s(a):l=this.expressionService.evaluate(s,a):l=this.setValueUsingField(i.data,n,e,o.isFieldContainsDots()),l===void 0&&(l=!0),!l)return!1;i.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),a.newValue=this.getValue(o,i);let d={type:m.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:i.rowIndex,rowPinned:i.rowPinned,column:a.column,api:a.api,columnApi:a.columnApi,colDef:a.colDef,context:a.context,data:i.data,node:i,oldValue:a.oldValue,newValue:a.newValue,value:a.newValue,source:r};return this.eventService.dispatchEvent(d),!0}callColumnCellValueChangedHandler(i){let t=i.colDef.onCellValueChanged;typeof t=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{t({node:i.node,data:i.data,oldValue:i.oldValue,newValue:i.newValue,colDef:i.colDef,column:i.column,api:i.api,columnApi:i.columnApi,context:i.context})})}setValueUsingField(i,t,e,r){if(!t)return!1;let o=!1;if(!r)o=i[t]===e,o||(i[t]=e);else{let n=t.split("."),s=i;for(;n.length>0&&s;){let a=n.shift();n.length===0?(o=s[a]===e,o||(s[a]=e)):s=s[a]}}return!o}executeFilterValueGetter(i,t,e,r){let o=this.gos.addGridCommonParams({data:t,node:r,column:e,colDef:e.getColDef(),getValue:this.getValueCallback.bind(this,r)});return typeof i=="function"?i(o):this.expressionService.evaluate(i,o)}executeValueGetter(i,t,e,r){let o=e.getColId(),n=this.valueCache.getValue(r,o);if(n!==void 0)return n;let s=this.gos.addGridCommonParams({data:t,node:r,column:e,colDef:e.getColDef(),getValue:this.getValueCallback.bind(this,r)}),a;return typeof i=="function"?a=i(s):a=this.expressionService.evaluate(i,s),this.valueCache.setValue(r,o,a),a}getValueCallback(i,t){let e=this.columnModel.getPrimaryColumn(t);return e?this.getValue(e,i):null}getKeyForNode(i,t){let e=this.getValue(i,t),r=i.getColDef().keyCreator,o=e;if(r){let n=this.gos.addGridCommonParams({value:e,colDef:i.getColDef(),column:i,node:t,data:t.data});o=r(n)}return typeof o=="string"||o==null||(o=String(o),o==="[object Object]"&&Ce("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),o}};g([w("expressionService")],ls.prototype,"expressionService",2);g([w("columnModel")],ls.prototype,"columnModel",2);g([w("valueCache")],ls.prototype,"valueCache",2);g([w("dataTypeService")],ls.prototype,"dataTypeService",2);g([U],ls.prototype,"init",1);ls=g([te("valueService")],ls);var xh=class extends j{constructor(){super(...arguments),this.expressionToFunctionCache={}}setBeans(i){this.logger=i.create("ExpressionService")}evaluate(i,t){if(typeof i=="string")return this.evaluateExpression(i,t);console.error("AG Grid: value should be either a string or a function",i)}evaluateExpression(i,t){try{return this.createExpressionFunction(i)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.columnApi,t.getValue,t.column,t.columnGroup)}catch(e){return console.log("Processing of the expression failed"),console.log("Expression = "+i),console.log("Params =",t),console.log("Exception = "+e),null}}createExpressionFunction(i){if(this.expressionToFunctionCache[i])return this.expressionToFunctionCache[i];let t=this.createFunctionBody(i),e=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",t);return this.expressionToFunctionCache[i]=e,e}createFunctionBody(i){return i.indexOf("return")>=0?i:"return "+i+";"}};g([xo(0,Zr("loggerFactory"))],xh.prototype,"setBeans",1);xh=g([te("expressionService")],xh);var Eh=class extends j{setBeans(i){this.logging=i.get("debug")}create(i){return new Sm(i,this.isLogging.bind(this))}isLogging(){return this.logging}};g([xo(0,Zr("gridOptionsService"))],Eh.prototype,"setBeans",1);Eh=g([te("loggerFactory")],Eh);var Sm=class{constructor(i,t){this.name=i,this.isLoggingFunc=t}isLogging(){return this.isLoggingFunc()}log(i){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+i)}},da=class extends j{setComp(i,t,e){this.view=i,this.eGridHostDiv=t,this.eGui=e,this.eGui.setAttribute("grid-id",this.context.getGridId()),this.dragAndDropService.addDropTarget({getContainer:()=>this.eGui,isInterestedIn:o=>o===1||o===0,getIconName:()=>Fe.ICON_NOT_ALLOWED}),this.mouseEventService.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new ep(this.view)),this.addRtlSupport();let r=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>r()),this.ctrlsService.register("gridCtrl",this)}isDetailGrid(){var i;let t=this.focusService.findTabbableParent(this.getGui());return((i=t?.getAttribute("row-id"))==null?void 0:i.startsWith("detail"))||!1}showDropZones(){return pt.__isRegistered("@ag-grid-enterprise/row-grouping",this.context.getGridId())}showSideBar(){return pt.__isRegistered("@ag-grid-enterprise/side-bar",this.context.getGridId())}showStatusBar(){return pt.__isRegistered("@ag-grid-enterprise/status-bar",this.context.getGridId())}showWatermark(){return pt.__isRegistered("@ag-grid-enterprise/core",this.context.getGridId())}onGridSizeChanged(){let i={type:m.EVENT_GRID_SIZE_CHANGED,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(i)}addRtlSupport(){let i=this.gos.get("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(i)}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(i){this.view.setCursor(i?"ew-resize":null)}disableUserSelect(i){this.view.setUserSelect(i?"none":null)}focusNextInnerContainer(i){let t=this.view.getFocusableContainers(),e=this.gos.getActiveDomElement(),o=t.findIndex(n=>n.contains(e))+(i?-1:1);return o<=0||o>=t.length?!1:this.focusService.focusInto(t[o])}focusInnerElement(i){let t=this.view.getFocusableContainers(),e=this.columnModel.getAllDisplayedColumns();if(i){if(t.length>1)return this.focusService.focusInto(rt(t),!0);let r=rt(e);if(this.focusService.focusGridView(r,!0))return!0}if(this.gos.get("headerHeight")===0||this.gos.get("suppressHeaderFocus")){if(this.focusService.focusGridView(e[0]))return!0;for(let r=1;r<t.length;r++)if(this.focusService.focusInto(t[r]))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(i=!1){this.view.forceFocusOutOfContainer(i)}};g([w("focusService")],da.prototype,"focusService",2);g([w("resizeObserverService")],da.prototype,"resizeObserverService",2);g([w("columnModel")],da.prototype,"columnModel",2);g([w("ctrlsService")],da.prototype,"ctrlsService",2);g([w("mouseEventService")],da.prototype,"mouseEventService",2);g([w("dragAndDropService")],da.prototype,"dragAndDropService",2);var Ml=class extends hu{constructor(i){super(),this.eGridDiv=i}postConstruct(){this.logger=this.loggerFactory.create("GridComp");let i={destroyGridUi:()=>this.destroyBean(this),setRtlClass:e=>this.addCssClass(e),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:e=>{this.getGui().style.userSelect=e??"",this.getGui().style.webkitUserSelect=e??""},setCursor:e=>{this.getGui().style.cursor=e??""}};this.ctrl=this.createManagedBean(new da);let t=this.createTemplate();this.setTemplate(t),this.ctrl.setComp(i,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:e=>this.ctrl.focusInnerElement(e),forceFocusOutWhenTabGuardsAreEmpty:!0})}insertGridIntoDom(){let i=this.getGui();this.eGridDiv.appendChild(i),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(i),this.logger.log("Grid removed from DOM")})}updateLayoutClasses(i,t){let e=this.eRootWrapperBody.classList;e.toggle("ag-layout-auto-height",t.autoHeight),e.toggle("ag-layout-normal",t.normal),e.toggle("ag-layout-print",t.print),this.addOrRemoveCssClass("ag-layout-auto-height",t.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",t.normal),this.addOrRemoveCssClass("ag-layout-print",t.print)}createTemplate(){let i=this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",t=this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"",e=this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"",r=this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"";return`<div class="ag-root-wrapper" role="presentation">
                ${i}
                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">
                    <ag-grid-body ref="gridBody"></ag-grid-body>
                    ${t}
                </div>
                ${e}
                <ag-pagination></ag-pagination>
                ${r}
            </div>`}getFocusableElement(){return this.eRootWrapperBody}getFocusableContainers(){let i=[this.gridBodyComp.getGui()];return this.sideBarComp&&i.push(this.sideBarComp.getGui()),i.filter(t=>Dr(t))}};g([w("loggerFactory")],Ml.prototype,"loggerFactory",2);g([Q("gridBody")],Ml.prototype,"gridBodyComp",2);g([Q("sideBar")],Ml.prototype,"sideBarComp",2);g([Q("rootWrapperBody")],Ml.prototype,"eRootWrapperBody",2);g([U],Ml.prototype,"postConstruct",1);var qs=class extends j{progressSort(i,t,e){let r=this.getNextSortDirection(i);this.setSortForColumn(i,r,t,e)}setSortForColumn(i,t,e,r){t!=="asc"&&t!=="desc"&&(t=null);let o=this.gos.isColumnsSortingCoupledToGroup(),n=[i];if(o&&i.getColDef().showRowGroup){let l=this.columnModel.getSourceColumnsForGroupColumn(i),d=l?.filter(u=>u.isSortable());d&&(n=[i,...d])}n.forEach(l=>l.setSort(t,r));let s=(e||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"),a=[];if(!s){let l=this.clearSortBarTheseColumns(n,r);a.push(...l)}this.updateSortIndex(i),a.push(...n),this.dispatchSortChangedEvents(r,a)}updateSortIndex(i){let t=this.gos.isColumnsSortingCoupledToGroup(),e=this.columnModel.getGroupDisplayColumnForGroup(i.getId()),r=t&&e||i,o=this.getColumnsWithSortingOrdered();this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(a=>a.setSortIndex(null));let n=o.filter(a=>t&&a.getColDef().showRowGroup?!1:a!==r);(r.getSort()?[...n,r]:n).forEach((a,l)=>{a.setSortIndex(l)})}onSortChanged(i,t){this.dispatchSortChangedEvents(i,t)}isSortActive(){let t=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(e=>!!e.getSort());return t&&t.length>0}dispatchSortChangedEvents(i,t){let e={type:m.EVENT_SORT_CHANGED,source:i};t&&(e.columns=t),this.eventService.dispatchEvent(e)}clearSortBarTheseColumns(i,t){let e=[];return this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(r=>{i.includes(r)||(r.getSort()&&e.push(r),r.setSort(void 0,t))}),e}getNextSortDirection(i){let t;if(i.getColDef().sortingOrder?t=i.getColDef().sortingOrder:this.gos.get("sortingOrder")?t=this.gos.get("sortingOrder"):t=qs.DEFAULT_SORTING_ORDER,!Array.isArray(t)||t.length<=0)return console.warn(`AG Grid: sortingOrder must be an array with at least one element, currently it's ${t}`),null;let e=t.indexOf(i.getSort()),r=e<0,o=e==t.length-1,n;return r||o?n=t[0]:n=t[e+1],qs.DEFAULT_SORTING_ORDER.indexOf(n)<0?(console.warn("AG Grid: invalid sort type "+n),null):n}getIndexedSortMap(){let i=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(n=>!!n.getSort());if(this.columnModel.isPivotMode()){let n=this.gos.isColumnsSortingCoupledToGroup();i=i.filter(s=>{let a=!!s.getAggFunc(),l=!s.isPrimary(),d=n?this.columnModel.getGroupDisplayColumnForGroup(s.getId()):s.getColDef().showRowGroup;return a||l||d})}let t=this.columnModel.getRowGroupColumns().filter(n=>!!n.getSort()),e={};i.forEach((n,s)=>e[n.getId()]=s),i.sort((n,s)=>{let a=n.getSortIndex(),l=s.getSortIndex();if(a!=null&&l!=null)return a-l;if(a==null&&l==null){let d=e[n.getId()],u=e[s.getId()];return d>u?1:-1}else return l==null?-1:1});let r=this.gos.isColumnsSortingCoupledToGroup()&&!!t.length;r&&(i=[...new Set(i.map(n=>{var s;return(s=this.columnModel.getGroupDisplayColumnForGroup(n.getId()))!=null?s:n}))]);let o=new Map;return i.forEach((n,s)=>o.set(n,s)),r&&t.forEach(n=>{let s=this.columnModel.getGroupDisplayColumnForGroup(n.getId());o.set(n,o.get(s))}),o}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([i,t],[e,r])=>t-r).map(([i])=>i)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(i=>i.getSort()).map(i=>({sort:i.getSort(),colId:i.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(i=>i.getSort()).map(i=>({sort:i.getSort(),column:i}))}canColumnDisplayMixedSort(i){let t=this.gos.isColumnsSortingCoupledToGroup(),e=!!i.getColDef().showRowGroup;return t&&e}getDisplaySortForColumn(i){let t=this.columnModel.getSourceColumnsForGroupColumn(i);if(!this.canColumnDisplayMixedSort(i)||!t?.length)return i.getSort();let r=i.getColDef().field!=null||!!i.getColDef().valueGetter?[i,...t]:t,o=r[0].getSort();return r.every(s=>s.getSort()==o)?o:"mixed"}getDisplaySortIndexForColumn(i){return this.getIndexedSortMap().get(i)}};qs.DEFAULT_SORTING_ORDER=["asc","desc",null];g([w("columnModel")],qs.prototype,"columnModel",2);qs=g([te("sortController")],qs);var vt=class extends j{static addKeyboardModeEvents(i){this.instanceCount>0||(i.addEventListener("keydown",vt.toggleKeyboardMode),i.addEventListener("mousedown",vt.toggleKeyboardMode))}static removeKeyboardModeEvents(i){this.instanceCount>0||(i.addEventListener("keydown",vt.toggleKeyboardMode),i.addEventListener("mousedown",vt.toggleKeyboardMode))}static toggleKeyboardMode(i){let t=vt.keyboardModeActive,e=i.type==="keydown";e&&(i.ctrlKey||i.metaKey||i.altKey)||t!==e&&(vt.keyboardModeActive=e)}static unregisterGridCompController(i){vt.removeKeyboardModeEvents(i)}init(){let i=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,m.EVENT_COLUMN_PIVOT_MODE_CHANGED,i),this.addManagedListener(this.eventService,m.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,m.EVENT_COLUMN_GROUP_OPENED,i),this.addManagedListener(this.eventService,m.EVENT_COLUMN_ROW_GROUP_CHANGED,i),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(t=>{this.gridCtrl=t.gridCtrl})}registerKeyboardFocusEvents(){let i=this.gos.getDocument();vt.addKeyboardModeEvents(i),vt.instanceCount++,this.addDestroyFunc(()=>{vt.instanceCount--,vt.unregisterGridCompController(i)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;let i=this.focusedCellPosition.column,t=this.columnModel.getGridColumn(i.getId());i!==t&&this.clearFocusedCell()}isKeyboardMode(){return vt.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),ks.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),np.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(i,t){let e=i;for(;e;){if(this.gos.getDomData(e,t))return!1;e=e.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(i){return this.isCellRestoreFocused(i)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}isCellRestoreFocused(i){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(i,this.restoredFocusedCellPosition)}setRestoreFocusedCell(i){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=i)}getFocusEventParams(){let{rowIndex:i,rowPinned:t,column:e}=this.focusedCellPosition,r={rowIndex:i,rowPinned:t,column:e,isFullWidthCell:!1},o=this.rowRenderer.getRowByPosition({rowIndex:i,rowPinned:t});return o&&(r.isFullWidthCell=o.isFullWidth()),r}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;let i=he({type:m.EVENT_CELL_FOCUS_CLEARED},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(i)}setFocusedCell(i){let{column:t,rowIndex:e,rowPinned:r,forceBrowserFocus:o=!1,preventScrollOnBrowserFocus:n=!1}=i,s=this.columnModel.getGridColumn(t);if(!s){this.focusedCellPosition=null;return}this.focusedCellPosition=s?{rowIndex:e,rowPinned:hn(r),column:s}:null;let a=Pt(he({type:m.EVENT_CELL_FOCUSED},this.getFocusEventParams()),{forceBrowserFocus:o,preventScrollOnBrowserFocus:n,floating:null});this.eventService.dispatchEvent(a)}isCellFocused(i){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(i,this.focusedCellPosition)}isRowNodeFocused(i){return this.isRowFocused(i.rowIndex,i.rowPinned)}isHeaderWrapperFocused(i){if(this.focusedHeaderPosition==null)return!1;let t=i.getColumnGroupChild(),e=i.getRowIndex(),r=i.getPinned(),{column:o,headerRowIndex:n}=this.focusedHeaderPosition;return t===o&&e===n&&r==o.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(i,t){this.focusedHeaderPosition={headerRowIndex:i,column:t}}focusHeaderPosition(i){if(this.gos.get("suppressHeaderFocus"))return!1;let{direction:t,fromTab:e,allowUserOverride:r,event:o,fromCell:n,rowWithoutSpanValue:s}=i,{headerPosition:a}=i;if(n&&this.filterManager.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(a);if(r){let l=this.getFocusedHeader(),d=this.headerNavigationService.getHeaderRowCount();if(e){let u=this.gos.getCallback("tabToNextHeader");u&&(a=this.getHeaderPositionFromUserFunc({userFunc:u,direction:t,currentPosition:l,headerPosition:a,headerRowCount:d}))}else{let u=this.gos.getCallback("navigateToNextHeader");if(u&&o){let c={key:o.key,previousHeaderPosition:l,nextHeaderPosition:a,headerRowCount:d,event:o};a=u(c)}}}return a?this.focusProvidedHeaderPosition({headerPosition:a,direction:t,event:o,fromCell:n,rowWithoutSpanValue:s}):!1}focusHeaderPositionFromUserFunc(i){if(this.gos.get("suppressHeaderFocus"))return!1;let{userFunc:t,headerPosition:e,direction:r,event:o}=i,n=this.getFocusedHeader(),s=this.headerNavigationService.getHeaderRowCount(),a=this.getHeaderPositionFromUserFunc({userFunc:t,direction:r,currentPosition:n,headerPosition:e,headerRowCount:s});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:r,event:o})}getHeaderPositionFromUserFunc(i){let{userFunc:t,direction:e,currentPosition:r,headerPosition:o,headerRowCount:n}=i,a=t({backwards:e==="Before",previousHeaderPosition:r,nextHeaderPosition:o,headerRowCount:n});return a===!0||a===null?(a===null&&Ce("Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),r):a===!1?null:a}focusProvidedHeaderPosition(i){let{headerPosition:t,direction:e,fromCell:r,rowWithoutSpanValue:o,event:n}=i;if(t.headerRowIndex===-1)return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView(t.column);this.headerNavigationService.scrollToColumn(t.column,e);let a=this.ctrlsService.getHeaderRowContainerCtrl(t.column.getPinned()).focusHeader(t.headerRowIndex,t.column,n);return a&&(o!=null||r)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(o??-1),a}focusFirstHeader(){let i=this.columnModel.getAllDisplayedColumns()[0];if(!i)return!1;i.getParent()&&(i=this.columnModel.getColumnGroupAtLevel(i,0));let t=this.headerPositionUtils.getHeaderIndexToFocus(i,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(i){let t=this.headerNavigationService.getHeaderRowCount()-1,e=rt(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:e},rowWithoutSpanValue:-1,event:i})}focusPreviousFromFirstCell(i){return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(i)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(i,t){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===i&&this.focusedCellPosition.rowPinned===hn(t)}findFocusableElements(i,t,e=!1){let r=kb,o=Hf;t&&(o+=", "+t),e&&(o+=', [tabindex="-1"]');let n=Array.prototype.slice.apply(i.querySelectorAll(r)).filter(l=>Dr(l)),s=Array.prototype.slice.apply(i.querySelectorAll(o));return s.length?((l,d)=>l.filter(u=>d.indexOf(u)===-1))(n,s):n}focusInto(i,t=!1,e=!1){let r=this.findFocusableElements(i,null,e),o=t?rt(r):r[0];return o?(o.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(i,t){if(!t)return null;let e=this.findFocusableElements(i),r=e.indexOf(t);if(r===-1)return null;let o=-1;for(let n=r-1;n>=0;n--)if(e[n].classList.contains("ag-tab-guard-top")){o=n;break}return o<=0?null:e[o-1]}findNextFocusableElement(i=this.eGridDiv,t,e){let r=this.findFocusableElements(i,t?':not([tabindex="-1"])':null),o=this.gos.getActiveDomElement(),n;t?n=r.findIndex(a=>a.contains(o)):n=r.indexOf(o);let s=n+(e?-1:1);return s<0||s>=r.length?null:r[s]}isTargetUnderManagedComponent(i,t){if(!t)return!1;let e=i.querySelectorAll(`.${cs.FOCUS_MANAGED_CLASS}`);if(!e.length)return!1;for(let r=0;r<e.length;r++)if(e[r].contains(t))return!0;return!1}findTabbableParent(i,t=5){let e=0;for(;i&&Ch(i)===null&&++e<=t;)i=i.parentElement;return Ch(i)===null?null:i}focusGridView(i,t){var e;if(this.gos.get("suppressCellFocus"))return t?this.gos.get("suppressHeaderFocus")?this.focusNextGridCoreContainer(!0,!0):this.focusLastHeader():this.focusNextGridCoreContainer(!1);let r=t?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!r)return!1;let{rowIndex:o,rowPinned:n}=r,s=this.getFocusedHeader();return!i&&s&&(i=s.column),o==null||!i?!1:(this.navigationService.ensureCellVisible({rowIndex:o,column:i,rowPinned:n}),this.setFocusedCell({rowIndex:o,column:i,rowPinned:hn(n),forceBrowserFocus:!0}),(e=this.rangeService)==null||e.setRangeToCell({rowIndex:o,rowPinned:n,column:i}),!0)}focusNextGridCoreContainer(i,t=!1){return!t&&this.gridCtrl.focusNextInnerContainer(i)?!0:((t||!i&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(i),!1)}focusAdvancedFilter(i){var t,e;return this.advancedFilterFocusColumn=i?.column,(e=(t=this.advancedFilterService)==null?void 0:t.getCtrl().focusHeaderComp())!=null?e:!1}focusNextFromAdvancedFilter(i,t){var e,r;let o=(r=t?void 0:this.advancedFilterFocusColumn)!=null?r:(e=this.columnModel.getAllDisplayedColumns())==null?void 0:e[0];return i?this.focusHeaderPosition({headerPosition:{column:o,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(o)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}};vt.keyboardModeActive=!1;vt.instanceCount=0;g([w("eGridDiv")],vt.prototype,"eGridDiv",2);g([w("columnModel")],vt.prototype,"columnModel",2);g([w("headerNavigationService")],vt.prototype,"headerNavigationService",2);g([w("headerPositionUtils")],vt.prototype,"headerPositionUtils",2);g([w("rowRenderer")],vt.prototype,"rowRenderer",2);g([w("rowPositionUtils")],vt.prototype,"rowPositionUtils",2);g([w("cellPositionUtils")],vt.prototype,"cellPositionUtils",2);g([w("navigationService")],vt.prototype,"navigationService",2);g([w("ctrlsService")],vt.prototype,"ctrlsService",2);g([w("filterManager")],vt.prototype,"filterManager",2);g([gt("rangeService")],vt.prototype,"rangeService",2);g([gt("advancedFilterService")],vt.prototype,"advancedFilterService",2);g([U],vt.prototype,"init",1);vt=g([te("focusService")],vt);var mf=class extends j{setMouseOver(i){this.selectedColumns=i;let t={type:m.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(t)}clearMouseOver(){this.selectedColumns=null;let i={type:m.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(i)}isHovered(i){return!!this.selectedColumns&&this.selectedColumns.indexOf(i)>=0}};mf=g([te("columnHoverService")],mf);var Bd=class extends j{constructor(){super(...arguments),this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.ctrlsService.whenReady(i=>this.gridBodyCtrl=i.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(i){this.suppressAnimation=i}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)}finish(){this.active&&this.flush(()=>{this.active=!1})}executeNextVMTurn(i){this.active?this.executeNextFuncs.push(i):i()}executeLaterVMTurn(i){this.active?this.executeLaterFuncs.push(i):i()}ensureAnimationCssClassPresent(){this.animationThreadCount++;let i=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===i&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(i){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){i();return}let t=e=>{for(;e.length;){let r=e.pop();r&&r()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>t(this.executeNextFuncs),0),window.setTimeout(()=>{i(),t(this.executeLaterFuncs)},200)})}};g([w("ctrlsService")],Bd.prototype,"ctrlsService",2);g([U],Bd.prototype,"postConstruct",1);Bd=g([te("columnAnimationService")],Bd);var ul=class extends j{postConstruct(){this.ctrlsService.whenReady(i=>{this.centerRowsCtrl=i.center,this.addManagedListener(this.eventService,m.EVENT_BODY_HEIGHT_CHANGED,this.checkPageSize.bind(this)),this.addManagedListener(this.eventService,m.EVENT_SCROLL_VISIBILITY_CHANGED,this.checkPageSize.bind(this)),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationProxy.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;let i=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(i>0){let t=()=>{let e=this.gos.getRowHeightAsNumber(),r=Math.floor(i/e);this.paginationProxy.setPageSize(r,"autoCalculated")};this.isBodyRendered?Ji(()=>t(),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};g([w("ctrlsService")],ul.prototype,"ctrlsService",2);g([w("paginationProxy")],ul.prototype,"paginationProxy",2);g([U],ul.prototype,"postConstruct",1);ul=g([te("paginationAutoPageSizeService")],ul);var Dh=class extends j{constructor(){super(...arguments),this.cacheVersion=0}init(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(i,t,e){this.active&&(i.__cacheVersion!==this.cacheVersion&&(i.__cacheVersion=this.cacheVersion,i.__cacheData={}),i.__cacheData[t]=e)}getValue(i,t){if(!(!this.active||i.__cacheVersion!==this.cacheVersion))return i.__cacheData[t]}};g([U],Dh.prototype,"init",1);Dh=g([te("valueCache")],Dh);var FT="paste",cl=class extends j{init(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,m.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))}onCellValueChanged(i){i.source!==FT&&this.doChangeDetection(i.node,i.column)}doChangeDetection(i,t){if(this.gos.get("suppressChangeDetection"))return;let e=[i];if(this.clientSideRowModel&&!i.isRowPinned()){let r=this.gos.get("aggregateOnlyChangedColumns"),o=new lp(r,this.clientSideRowModel.getRootNode());o.addParentNode(i.parent,[t]),this.clientSideRowModel.doAggregate(o),o.forEachChangedNodeDepthFirst(n=>{e.push(n)})}this.rowRenderer.refreshCells({rowNodes:e})}};g([w("rowModel")],cl.prototype,"rowModel",2);g([w("rowRenderer")],cl.prototype,"rowRenderer",2);g([U],cl.prototype,"init",1);cl=g([te("changeDetectionService")],cl);var Th=class extends j{adaptFunction(i,t){let e=this.componentMetadataProvider.retrieve(i);return e&&e.functionAdapter?e.functionAdapter(t):null}adaptCellRendererFunction(i){class t{refresh(r){return!1}getGui(){return this.eGui}init(r){let o=i(r),n=typeof o;if(n==="string"||n==="number"||n==="boolean"){this.eGui=_r("<span>"+o+"</span>");return}if(o==null){this.eGui=_r("<span></span>");return}this.eGui=o}}return t}doesImplementIComponent(i){return i?i.prototype&&"getGui"in i.prototype:!1}};g([w("componentMetadataProvider")],Th.prototype,"componentMetadataProvider",2);Th=g([te("agComponentUtils")],Th);var $d=class extends j{postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(i){return this.componentMetaData[i]}};g([w("agComponentUtils")],$d.prototype,"agComponentUtils",2);g([U],$d.prototype,"postConstruct",1);$d=g([te("componentMetadataProvider")],$d);var zT=25,DC=10,$g=8,AT=4,Wg=4,jg=6,OT=16,TC=14,Ug=8,LT={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:AT*5,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:$g*7,headerCellMinWidth:48,listItemHeight:$g*4,rowHeight:$g*6,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:Wg*8,headerCellMinWidth:24,listItemHeight:Wg*6,rowHeight:Wg*7,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:jg*8,headerCellMinWidth:36,listItemHeight:jg*4,rowHeight:jg*7,chartMenuPanelWidth:240},"ag-theme-quartz":{headerHeight:TC+Ug*4.25,headerCellMinWidth:36,listItemHeight:OT+Ug,rowHeight:TC+Ug*3.5,chartMenuPanelWidth:260}},PC={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},Wd=class extends j{constructor(){super(...arguments),this.calculatedSizes={},this.calculatedTheme=null}postConstruct(){var i;let t=(i=this.getTheme().el)!=null?i:this.eGridDiv;this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.mutationObserver=new MutationObserver(()=>{this.calculatedSizes={},this.calculatedTheme=null,this.calculatedTheme=this.getTheme(),this.fireGridStylesChangedEvent()}),this.mutationObserver.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]})}fireGridStylesChangedEvent(){let i={type:m.EVENT_GRID_STYLES_CHANGED};this.eventService.dispatchEvent(i)}getSassVariable(i){let{themeFamily:t,el:e}=this.getTheme();if(!t||t.indexOf("ag-theme")!==0)return;this.calculatedSizes||(this.calculatedSizes={}),this.calculatedSizes[t]||(this.calculatedSizes[t]={});let r=this.calculatedSizes[t][i];return r??(this.calculatedSizes[t][i]=this.calculateValueForSassProperty(i,t,e),this.calculatedSizes[t][i])}calculateValueForSassProperty(i,t,e){let r="ag-theme-"+(t.match("material")?"material":t.match("balham")?"balham":t.match("alpine")?"alpine":"custom"),o=LT[r][i],n=this.gos.getDocument();if(e||(e=this.eGridDiv),!PC[i])return o;let s=PC[i],a=n.createElement("div"),l=Array.from(e.classList);a.classList.add(t,...l),a.style.position="absolute";let d=s.reduce((c,h)=>{let p=n.createElement("div");return p.style.position="static",p.classList.add(h),c.appendChild(p),p},a),u=0;if(n.body){n.body.appendChild(a);let c=i.toLowerCase().indexOf("height")!==-1?"height":"width";u=parseInt(window.getComputedStyle(d)[c],10),n.body.removeChild(a)}return u||o}isThemeDark(){let{theme:i}=this.getTheme();return!!i&&i.indexOf("dark")>=0}chartMenuPanelWidth(){return this.getSassVariable("chartMenuPanelWidth")}getTheme(){if(this.calculatedTheme)return this.calculatedTheme;let i=/\bag-(material|(?:theme-([\w\-]*)))\b/g,t=this.eGridDiv,e=null,r=[];for(;t;)if(e=i.exec(t.className),!e)t=t.parentElement||void 0;else{let n=t.className.match(i);n&&(r=n);break}if(!e)return{allThemes:r};let o=e[0];return this.calculatedTheme={theme:o,el:t,themeFamily:o.replace(/-dark$/,""),allThemes:r},this.calculatedTheme}getFromTheme(i,t){var e;return(e=this.getSassVariable(t))!=null?e:i}getDefaultRowHeight(){return this.getFromTheme(zT,"rowHeight")}getListItemHeight(){return this.getFromTheme(20,"listItemHeight")}refreshRowHeightVariable(){let i=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gos.get("rowHeight");if(t==null||isNaN(t)||!isFinite(t))return i!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;let e=`${t}px`;return i!=e?(this.eGridDiv.style.setProperty("--ag-line-height",e),t):i!=""?parseFloat(i):-1}getMinColWidth(){let i=this.getFromTheme(null,"headerCellMinWidth");return W(i)?Math.max(i,DC):DC}destroy(){this.calculatedSizes=null,this.mutationObserver&&this.mutationObserver.disconnect(),super.destroy()}};g([w("eGridDiv")],Wd.prototype,"eGridDiv",2);g([U],Wd.prototype,"postConstruct",1);Wd=g([te("environment")],Wd);var hl=class extends j{constructor(){super(...arguments),this.scrollY=0,this.uiBodyHeight=0}agWire(i){this.logger=i.create("RowContainerHeightService")}postConstruct(){this.addManagedListener(this.eventService,m.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=Rb(),this.logger.log("maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;let t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,e=this.getUiBodyHeight();(t!==this.scrollY||e!==this.uiBodyHeight)&&(this.scrollY=t,this.uiBodyHeight=e,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;let i=this.scrollY/this.maxScrollY,t=i*this.pixelsToShave;this.logger.log(`Div Stretch Offset = ${t} (${this.pixelsToShave} * ${i})`),this.setDivStretchOffset(t)}setUiContainerHeight(i){i!==this.uiContainerHeight&&(this.uiContainerHeight=i,this.eventService.dispatchEvent({type:m.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(i){let t=typeof i=="number"?Math.floor(i):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:m.EVENT_HEIGHT_SCALE_CHANGED}))}setModelHeight(i){this.modelHeight=i,this.stretching=i!=null&&this.maxDivHeight>0&&i>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(i){return i-this.divStretchOffset}getUiBodyHeight(){let t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return t.bottom-t.top}getScrollPositionForPixel(i){if(this.pixelsToShave<=0)return i;let t=this.modelHeight-this.getUiBodyHeight(),e=i/t;return this.maxScrollY*e}};g([w("ctrlsService")],hl.prototype,"ctrlsService",2);g([xo(0,Zr("loggerFactory"))],hl.prototype,"agWire",1);g([U],hl.prototype,"postConstruct",1);hl=g([te("rowContainerHeightService")],hl);var pl=class extends j{init(){this.addManagedPropertyListener("isRowSelectable",()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(i=!1){let t=!!this.gos.get("rowSelection"),e=this.gos.get("isRowSelectable");if(!t||!e)return;let r=this.gos.get("groupSelectsChildren"),o=this.rowModel.getType()==="clientSide"&&r,n=[],s=a=>{if(i&&!a.group)return;if(o&&a.group){let d=a.childrenAfterGroup.some(u=>u.selectable===!0);a.setRowSelectable(d,!0);return}let l=e?e(a):!0;a.setRowSelectable(l,!0),!l&&a.isSelected()&&n.push(a)};if(o){let a=this.rowModel;new lp(!1,a.getRootNode()).forEachChangedNodeDepthFirst(s,!0,!0)}else this.rowModel.forEachNode(s);n.length&&this.selectionService.setNodesSelected({nodes:n,newValue:!1,source:"selectableChanged"}),o&&this.selectionService instanceof js&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}};g([w("rowModel")],pl.prototype,"rowModel",2);g([w("selectionService")],pl.prototype,"selectionService",2);g([U],pl.prototype,"init",1);pl=g([te("selectableService")],pl);var Pr=class extends Pe{constructor(){super(),this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1}postConstruct(){let i=this.gos.get("enableRtl");this.setTemplate(this.getTemplate());let{btFirst:t,btPrevious:e,btNext:r,btLast:o,pageSizeComp:n}=this;this.activateTabIndex([t,e,r,o]),t.insertAdjacentElement("afterbegin",It(i?"last":"first",this.gos)),e.insertAdjacentElement("afterbegin",It(i?"next":"previous",this.gos)),r.insertAdjacentElement("afterbegin",It(i?"previous":"next",this.gos)),o.insertAdjacentElement("afterbegin",It(i?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.onPaginationChanged()}onPaginationChanged(){let t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedListener(this.eventService,m.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(i=>{let{el:t,fn:e}=i;this.addManagedListener(t,"click",e),this.addManagedListener(t,"keydown",r=>{(r.key===z.ENTER||r.key===z.SPACE)&&(r.preventDefault(),e())})}),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()}setCurrentPageLabel(){let i=this.paginationProxy.getTotalPages()>0,t=this.paginationProxy.getCurrentPage(),e=i?t+1:0;this.lbCurrent.textContent=this.formatNumber(e)}formatNumber(i){let t=this.gos.getCallback("paginationNumberFormatter");if(t)return t({value:i});let e=this.localeService.getLocaleTextFunc(),r=e("thousandSeparator",","),o=e("decimalSeparator",".");return Gf(i,r,o)}getTemplate(){let i=this.localeService.getLocaleTextFunc(),t=i("page","Page"),e=i("to","to"),r=i("of","of"),o=i("firstPage","First Page"),n=i("previousPage","Previous Page"),s=i("nextPage","Next Page"),a=i("lastPage","Last Page"),l=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${l}">
                <ag-page-size-selector ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel" role="status">
                    <span id="ag-${l}-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-to">${e}</span>
                    <span id="ag-${l}-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-of">${r}</span>
                    <span id="ag-${l}-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>
                    <div ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${n}"></div>
                    <span class="ag-paging-description" role="status">
                        <span id="ag-${l}-start-page">${t}</span>
                        <span id="ag-${l}-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${l}-of-page">${r}</span>
                        <span id="ag-${l}-of-page-number" ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${s}"></div>
                    <div ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()}enableOrDisableButtons(){let i=this.paginationProxy.getCurrentPage(),t=this.paginationProxy.isLastPageFound(),e=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=i===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);let r=this.isZeroPagesToDisplay(),o=i===e-1;this.nextButtonDisabled=o||r,this.lastButtonDisabled=!t||r||i===e-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(i,t){Mf(i,t),i.classList.toggle("ag-disabled",t)}updateRowLabels(){let i=this.paginationProxy.getCurrentPage(),t=this.paginationProxy.getPageSize(),e=this.paginationProxy.isLastPageFound(),r=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null,o,n;if(this.isZeroPagesToDisplay()?o=n=0:(o=t*i+1,n=o+t-1,e&&n>r&&(n=r)),this.lbFirstRowOnPage.textContent=this.formatNumber(o),this.rowNodeBlockLoader.isLoading()){let s=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=s("pageLastRowUnknown","?")}else this.lbLastRowOnPage.textContent=this.formatNumber(n)}isZeroPagesToDisplay(){let i=this.paginationProxy.isLastPageFound(),t=this.paginationProxy.getTotalPages();return i&&t===0}setTotalLabels(){let i=this.paginationProxy.isLastPageFound(),t=this.paginationProxy.getTotalPages(),e=i?this.paginationProxy.getMasterRowCount():null;if(e===1){let r=this.paginationProxy.getRow(0);if(r&&r.group&&!(r.groupData||r.aggData)){this.setTotalLabelsToZero();return}}if(i)this.lbTotal.textContent=this.formatNumber(t),this.lbRecordCount.textContent=this.formatNumber(e);else{let r=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=r,this.lbRecordCount.innerHTML=r}}setTotalLabelsToZero(){this.lbFirstRowOnPage.textContent=this.formatNumber(0),this.lbCurrent.textContent=this.formatNumber(0),this.lbLastRowOnPage.textContent=this.formatNumber(0),this.lbTotal.textContent=this.formatNumber(0),this.lbRecordCount.textContent=this.formatNumber(0)}};g([w("paginationProxy")],Pr.prototype,"paginationProxy",2);g([w("rowNodeBlockLoader")],Pr.prototype,"rowNodeBlockLoader",2);g([Q("btFirst")],Pr.prototype,"btFirst",2);g([Q("btPrevious")],Pr.prototype,"btPrevious",2);g([Q("btNext")],Pr.prototype,"btNext",2);g([Q("btLast")],Pr.prototype,"btLast",2);g([Q("lbRecordCount")],Pr.prototype,"lbRecordCount",2);g([Q("lbFirstRowOnPage")],Pr.prototype,"lbFirstRowOnPage",2);g([Q("lbLastRowOnPage")],Pr.prototype,"lbLastRowOnPage",2);g([Q("lbCurrent")],Pr.prototype,"lbCurrent",2);g([Q("lbTotal")],Pr.prototype,"lbTotal",2);g([Q("pageSizeComp")],Pr.prototype,"pageSizeComp",2);g([U],Pr.prototype,"postConstruct",1);var mu=class c0 extends Pe{constructor(){super(c0.TEMPLATE),this.inProgress=!1,this.destroyRequested=!1}updateLayoutClasses(t,e){let r=this.eOverlayWrapper.classList;r.toggle("ag-layout-auto-height",e.autoHeight),r.toggle("ag-layout-normal",e.normal),r.toggle("ag-layout-print",e.print)}postConstruct(){this.createManagedBean(new ep(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.registerOverlayWrapperComp(this)}setWrapperTypeClass(t){let e=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&e.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=t,e.toggle(t,!0)}showOverlay(t,e,r){this.inProgress||(this.setWrapperTypeClass(e),this.destroyActiveOverlay(),this.inProgress=!0,t&&t.then(o=>{this.inProgress=!1,this.eOverlayWrapper.appendChild(o.getGui()),this.activeOverlay=o,this.updateListenerDestroyFunc=r,this.destroyRequested&&(this.destroyRequested=!1,this.destroyActiveOverlay())}),this.setDisplayed(!0,{skipAriaHidden:!0}))}destroyActiveOverlay(){var t;if(this.inProgress){this.destroyRequested=!0;return}this.activeOverlay&&(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),(t=this.updateListenerDestroyFunc)==null||t.call(this),Zt(this.eOverlayWrapper))}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.destroyActiveOverlay(),super.destroy()}};mu.TEMPLATE=`
        <div class="ag-overlay" role="presentation">
            <div class="ag-overlay-panel" role="presentation">
                <div class="ag-overlay-wrapper" ref="eOverlayWrapper" role="presentation"></div>
            </div>
        </div>`;g([w("overlayService")],mu.prototype,"overlayService",2);g([Q("eOverlayWrapper")],mu.prototype,"eOverlayWrapper",2);g([U],mu.prototype,"postConstruct",1);var NT=mu,gl=class extends j{getFirstRow(){let i=0,t;return this.pinnedRowModel.getPinnedTopRowCount()?t="top":this.rowModel.getRowCount()?(t=null,i=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(t="bottom"),t===void 0?null:{rowIndex:i,rowPinned:t}}getLastRow(){let i,t=null,e=this.pinnedRowModel.getPinnedBottomRowCount(),r=this.pinnedRowModel.getPinnedTopRowCount();return e?(t="bottom",i=e-1):this.rowModel.getRowCount()?(t=null,i=this.paginationProxy.getPageLastRow()):r&&(t="top",i=r-1),i===void 0?null:{rowIndex:i,rowPinned:t}}getRowNode(i){switch(i.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[i.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[i.rowIndex];default:return this.rowModel.getRow(i.rowIndex)}}sameRow(i,t){return!i&&!t?!0:i&&!t||!i&&t?!1:i.rowIndex===t.rowIndex&&i.rowPinned==t.rowPinned}before(i,t){switch(i.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(W(t.rowPinned))return t.rowPinned!=="top";break}return i.rowIndex<t.rowIndex}};g([w("rowModel")],gl.prototype,"rowModel",2);g([w("pinnedRowModel")],gl.prototype,"pinnedRowModel",2);g([w("paginationProxy")],gl.prototype,"paginationProxy",2);gl=g([te("rowPositionUtils")],gl);var vf=class extends j{createId(i){let{rowIndex:t,rowPinned:e,column:r}=i;return this.createIdFromValues({rowIndex:t,column:r,rowPinned:e})}createIdFromValues(i){let{rowIndex:t,rowPinned:e,column:r}=i;return`${t}.${e??"null"}.${r.getId()}`}equals(i,t){let e=i.column===t.column,r=i.rowPinned===t.rowPinned,o=i.rowIndex===t.rowIndex;return e&&r&&o}};vf=g([te("cellPositionUtils")],vf);var _d=class{constructor(i){this.cellValueChanges=i}},qg=class extends _d{constructor(i,t,e,r){super(i),this.initialRange=t,this.finalRange=e,this.ranges=r}},h0=class p0{constructor(t){this.actionStack=[],this.maxStackSize=t||p0.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(t){t.cellValueChanges&&t.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(t))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}};h0.DEFAULT_STACK_SIZE=10;var RC=h0,mn=class extends j{constructor(){super(...arguments),this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=i=>{let t={column:i.column,rowIndex:i.rowIndex,rowPinned:i.rowPinned},e=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,t),r=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(e||r||this.isPasting||this.isRangeInAction))return;let{rowPinned:n,rowIndex:s,column:a,oldValue:l,value:d}=i,u={rowPinned:n,rowIndex:s,columnId:a.getColId(),newValue:d,oldValue:l};this.cellValueChanges.push(u)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}init(){if(!this.gos.get("undoRedoCellEditing"))return;let i=this.gos.get("undoRedoCellEditingLimit");i<=0||(this.undoStack=new RC(i),this.redoStack=new RC(i),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addCellKeyListeners(),this.addManagedListener(this.eventService,m.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,m.EVENT_MODEL_UPDATED,t=>{t.keepUndoRedoStack||this.clearStacks()}),this.addManagedListener(this.eventService,m.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,m.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,m.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,m.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,m.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,m.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,m.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,m.EVENT_ROW_DRAG_END,this.clearStacks),this.ctrlsService.whenReady(t=>{this.gridBodyCtrl=t.gridBodyCtrl}))}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(i){let t={type:m.EVENT_UNDO_STARTED,source:i};this.eventService.dispatchEvent(t);let e=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),r={type:m.EVENT_UNDO_ENDED,source:i,operationPerformed:e};this.eventService.dispatchEvent(r)}redo(i){let t={type:m.EVENT_REDO_STARTED,source:i};this.eventService.dispatchEvent(t);let e=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),r={type:m.EVENT_REDO_ENDED,source:i,operationPerformed:e};this.eventService.dispatchEvent(r)}undoRedo(i,t,e,r,o){if(!i)return!1;let n=i.pop();return!n||!n.cellValueChanges?!1:(this.processAction(n,s=>s[r],o),n instanceof qg?this.processRange(this.rangeService,n.ranges||[n[e]]):this.processCell(n.cellValueChanges),t.push(n),!0)}processAction(i,t,e){i.cellValueChanges.forEach(r=>{let{rowIndex:o,rowPinned:n,columnId:s}=r,a={rowIndex:o,rowPinned:n},l=this.rowPositionUtils.getRowNode(a);l.displayed&&l.setDataValue(s,t(r),e)})}processRange(i,t){let e;i.removeAllCellRanges(!0),t.forEach((r,o)=>{if(!r)return;let n=r.startRow,s=r.endRow;o===t.length-1&&(e={rowPinned:n.rowPinned,rowIndex:n.rowIndex,columnId:r.startColumn.getColId()},this.setLastFocusedCell(e));let a={rowStartIndex:n.rowIndex,rowStartPinned:n.rowPinned,rowEndIndex:s.rowIndex,rowEndPinned:s.rowPinned,columnStart:r.startColumn,columns:r.columns};i.addCellRange(a)})}processCell(i){let t=i[0],{rowIndex:e,rowPinned:r}=t,o={rowIndex:e,rowPinned:r},n=this.rowPositionUtils.getRowNode(o),s={rowPinned:t.rowPinned,rowIndex:n.rowIndex,columnId:t.columnId};this.setLastFocusedCell(s,this.rangeService)}setLastFocusedCell(i,t){let{rowIndex:e,columnId:r,rowPinned:o}=i,n=this.gridBodyCtrl.getScrollFeature(),s=this.columnModel.getGridColumn(r);if(!s)return;n.ensureIndexVisible(e),n.ensureColumnVisible(s);let a={rowIndex:e,column:s,rowPinned:o};this.focusService.setFocusedCell(Pt(he({},a),{forceBrowserFocus:!0})),t?.setRangeToCell(a)}addRowEditingListeners(){this.addManagedListener(this.eventService,m.EVENT_ROW_EDITING_STARTED,i=>{this.activeRowEdit={rowIndex:i.rowIndex,rowPinned:i.rowPinned}}),this.addManagedListener(this.eventService,m.EVENT_ROW_EDITING_STOPPED,()=>{let i=new _d(this.cellValueChanges);this.pushActionsToUndoStack(i),this.activeRowEdit=null})}addCellEditingListeners(){this.addManagedListener(this.eventService,m.EVENT_CELL_EDITING_STARTED,i=>{this.activeCellEdit={column:i.column,rowIndex:i.rowIndex,rowPinned:i.rowPinned}}),this.addManagedListener(this.eventService,m.EVENT_CELL_EDITING_STOPPED,i=>{if(this.activeCellEdit=null,i.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){let e=new _d(this.cellValueChanges);this.pushActionsToUndoStack(e)}})}addPasteListeners(){this.addManagedListener(this.eventService,m.EVENT_PASTE_START,()=>{this.isPasting=!0}),this.addManagedListener(this.eventService,m.EVENT_PASTE_END,()=>{let i=new _d(this.cellValueChanges);this.pushActionsToUndoStack(i),this.isPasting=!1})}addFillListeners(){this.addManagedListener(this.eventService,m.EVENT_FILL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,m.EVENT_FILL_END,i=>{let t=new qg(this.cellValueChanges,i.initialRange,i.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1})}addCellKeyListeners(){this.addManagedListener(this.eventService,m.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,m.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,()=>{let i;this.rangeService&&this.gos.get("enableRangeSelection")?i=new qg(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):i=new _d(this.cellValueChanges),this.pushActionsToUndoStack(i),this.isRangeInAction=!1})}pushActionsToUndoStack(i){this.undoStack.push(i),this.cellValueChanges=[],this.redoStack.clear()}};g([w("focusService")],mn.prototype,"focusService",2);g([w("ctrlsService")],mn.prototype,"ctrlsService",2);g([w("cellPositionUtils")],mn.prototype,"cellPositionUtils",2);g([w("rowPositionUtils")],mn.prototype,"rowPositionUtils",2);g([w("columnModel")],mn.prototype,"columnModel",2);g([gt("rangeService")],mn.prototype,"rangeService",2);g([U],mn.prototype,"init",1);mn=g([te("undoRedoService")],mn);var jd=class extends j{findHeader(i,t){let e,r;if(i.column instanceof wi?e=this.columnModel.getDisplayedGroupAtDirection(i.column,t):(r=`getDisplayedCol${t}`,e=this.columnModel[r](i.column)),!e)return;let{headerRowIndex:o}=i;if(this.getHeaderRowType(o)!=="filter"){let a=[e];for(;e.getParent();)e=e.getParent(),a.push(e);e=a[a.length-1-o]}let{column:n,headerRowIndex:s}=this.getHeaderIndexToFocus(e,o);return{column:n,headerRowIndex:s}}getHeaderIndexToFocus(i,t){let e;if(i instanceof wi&&this.isAnyChildSpanningHeaderHeight(i)&&i.isPadding()){let r=i;e=r.getLeafColumns()[0];let o=e;for(;o!==r;)t++,o=o.getParent()}return{column:e||i,headerRowIndex:t}}isAnyChildSpanningHeaderHeight(i){return i?i.getLeafColumns().some(t=>t.isSpanHeaderHeight()):!1}getColumnVisibleParent(i,t){let e=this.getHeaderRowType(t),r=e==="filter",o=e==="column",n=r?i:i.getParent(),s=t-1,a=s;if(o&&this.isAnyChildSpanningHeaderHeight(i.getParent())){for(;n&&n.isPadding();)n=n.getParent(),s--;a=s,s<0&&(n=i,s=t,a=void 0)}return{column:n,headerRowIndex:s,headerRowIndexWithoutSpan:a}}getColumnVisibleChild(i,t,e="After"){let r=this.getHeaderRowType(t),o=i,n=t+1,s=n;if(r==="group"){let a=i.getDisplayedLeafColumns(),l=e==="After"?a[0]:rt(a),d=[],u=l;for(;u.getParent()!==i;)u=u.getParent(),d.push(u);if(o=l,l.isSpanHeaderHeight())for(let c=d.length-1;c>=0;c--){let h=d[c];if(!h.isPadding()){o=h;break}n++}else o=rt(d),o||(o=l)}return{column:o,headerRowIndex:n,headerRowIndexWithoutSpan:s}}getHeaderRowType(i){let t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(i)}findColAtEdgeForHeaderRow(i,t){let e=this.columnModel.getAllDisplayedColumns(),r=e[t==="start"?0:e.length-1];if(!r)return;let n=this.ctrlsService.getHeaderRowContainerCtrl(r.getPinned()).getRowType(i);if(n=="group"){let s=this.columnModel.getColumnGroupAtLevel(r,i);return{headerRowIndex:i,column:s}}return{headerRowIndex:n==null?-1:i,column:r}}};g([w("columnModel")],jd.prototype,"columnModel",2);g([w("ctrlsService")],jd.prototype,"ctrlsService",2);jd=g([te("headerPositionUtils")],jd);var yf=class{buildColumnDefs(i,t,e){let r=[],o={};return i.forEach(n=>{let s=this.createDefFromColumn(n,t,e),a=!0,l=s,d=n.getOriginalParent(),u=null;for(;d;){let c=null;if(d.isPadding()){d=d.getOriginalParent();continue}let h=o[d.getGroupId()];if(h){h.children.push(l),a=!1;break}if(c=this.createDefFromGroup(d),c&&(c.children=[l],o[c.groupId]=c,l=c,d=d.getOriginalParent()),d!=null&&u===d){a=!1;break}u=d}a&&r.push(l)}),r}createDefFromGroup(i){let t=fh(i.getColGroupDef(),["children"]);return t&&(t.groupId=i.getGroupId()),t}createDefFromColumn(i,t,e){let r=fh(i.getColDef());return r.colId=i.getColId(),r.width=i.getActualWidth(),r.rowGroup=i.isRowGroupActive(),r.rowGroupIndex=i.isRowGroupActive()?t.indexOf(i):null,r.pivot=i.isPivotActive(),r.pivotIndex=i.isPivotActive()?e.indexOf(i):null,r.aggFunc=i.isValueActive()?i.getAggFunc():null,r.hide=i.isVisible()?void 0:!0,r.pinned=i.isPinned()?i.getPinned():null,r.sort=i.getSort()?i.getSort():null,r.sortIndex=i.getSortIndex()!=null?i.getSortIndex():null,r}};yf=g([te("columnDefFactory")],yf);var Ud=class{getInitialRowClasses(i){let t=[];return W(i.extraCssClass)&&t.push(i.extraCssClass),t.push("ag-row"),t.push(i.rowFocused?"ag-row-focus":"ag-row-no-focus"),i.fadeRowIn&&t.push("ag-opacity-zero"),t.push(i.rowIsEven?"ag-row-even":"ag-row-odd"),i.rowNode.isRowPinned()&&t.push("ag-row-pinned"),i.rowNode.isSelected()&&t.push("ag-row-selected"),i.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+i.rowLevel),i.rowNode.stub&&t.push("ag-row-loading"),i.fullWidthRow&&t.push("ag-full-width-row"),i.expandable&&(t.push("ag-row-group"),t.push(i.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),i.rowNode.dragging&&t.push("ag-row-dragging"),Jg(t,this.processClassesFromGridOptions(i.rowNode)),Jg(t,this.preProcessRowClassRules(i.rowNode)),t.push(i.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),i.firstRowOnPage&&t.push("ag-row-first"),i.lastRowOnPage&&t.push("ag-row-last"),i.fullWidthRow&&(i.pinned==="left"&&t.push("ag-cell-last-left-pinned"),i.pinned==="right"&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(i){let t=[],e=n=>{typeof n=="string"?t.push(n):Array.isArray(n)&&n.forEach(s=>t.push(s))},r=this.gos.get("rowClass");if(r){if(typeof r=="function")return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];e(r)}let o=this.gos.getCallback("getRowClass");if(o){let n={data:i.data,node:i,rowIndex:i.rowIndex},s=o(n);e(s)}return t}preProcessRowClassRules(i){let t=[];return this.processRowClassRules(i,e=>{t.push(e)},e=>{}),t}processRowClassRules(i,t,e){let r=this.gos.addGridCommonParams({data:i.data,node:i,rowIndex:i.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),r,t,e)}calculateRowLevel(i){return i.group?i.level:i.parent?i.parent.level+1:0}};g([w("stylingService")],Ud.prototype,"stylingService",2);g([w("gridOptionsService")],Ud.prototype,"gos",2);Ud=g([te("rowCssClassCalculator")],Ud);var fl=class extends j{init(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",i=>this.isAccentedSort=i.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup())}doFullSort(i,t){let e=(o,n)=>({currentPos:n,rowNode:o}),r=i.map(e);return r.sort(this.compareRowNodes.bind(this,t)),r.map(o=>o.rowNode)}compareRowNodes(i,t,e){let r=t.rowNode,o=e.rowNode;for(let n=0,s=i.length;n<s;n++){let a=i[n],l=a.sort==="desc",d=this.getValue(r,a.column),u=this.getValue(o,a.column),c,h=this.getComparator(a,r);if(h?c=h(d,u,r,o,l):c=He.defaultComparator(d,u,this.isAccentedSort),!isNaN(c)&&c!==0)return a.sort==="asc"?c:c*-1}return t.currentPos-e.currentPos}getComparator(i,t){let e=i.column,r=e.getColDef().comparator;if(r!=null)return r;if(!e.getColDef().showRowGroup)return;let o=!t.group&&e.getColDef().field;if(!o)return;let n=this.columnModel.getPrimaryColumn(o);if(n)return n.getColDef().comparator}getValue(i,t){var e,r;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,i,!1,!1);if(i.rowGroupColumn===t){if(this.gos.isGroupUseEntireRow(this.columnModel.isPivotActive())){let a=(e=i.allLeafChildren)==null?void 0:e[0];return a?this.valueService.getValue(t,a,!1,!1):void 0}let s=this.columnModel.getGroupDisplayColumnForGroup(t.getId());return s?(r=i.groupData)==null?void 0:r[s.getId()]:void 0}if(!(i.group&&t.getColDef().showRowGroup))return this.valueService.getValue(t,i,!1,!1)}};g([w("valueService")],fl.prototype,"valueService",2);g([w("columnModel")],fl.prototype,"columnModel",2);g([U],fl.prototype,"init",1);fl=g([te("rowNodeSorter")],fl);var Dd=class extends j{constructor(){super(...arguments),this.params={},this.ready=!1,this.readyCallbacks=[]}checkReady(){let i=this.params;this.ready=i.gridCtrl!=null&&i.gridBodyCtrl!=null&&i.center!=null&&i.left!=null&&i.right!=null&&i.bottomCenter!=null&&i.bottomLeft!=null&&i.bottomRight!=null&&i.topCenter!=null&&i.topLeft!=null&&i.topRight!=null&&i.stickyTopCenter!=null&&i.stickyTopLeft!=null&&i.stickyTopRight!=null&&i.stickyBottomCenter!=null&&i.stickyBottomLeft!=null&&i.stickyBottomRight!=null&&i.centerHeader!=null&&i.leftHeader!=null&&i.rightHeader!=null&&i.fakeHScrollComp!=null&&i.fakeVScrollComp!=null&&i.gridHeaderCtrl!=null,this.ready&&(this.readyCallbacks.forEach(t=>t(i)),this.readyCallbacks.length=0)}whenReady(i){this.ready?i(this.params):this.readyCallbacks.push(i)}register(i,t){this.params[i]=t,this.checkReady()}registerHeaderContainer(i,t){switch(t){case"left":this.params.leftHeader=i;break;case"right":this.params.rightHeader=i;break;default:this.params.centerHeader=i;break}this.checkReady()}get(i){return this.params[i]}getParams(){return this.params}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){return[this.params.leftHeader,this.params.rightHeader,this.params.centerHeader]}getHeaderRowContainerCtrl(i){switch(i){case"left":return this.params.leftHeader;case"right":return this.params.rightHeader;default:return this.params.centerHeader}}};Dd.NAME="ctrlsService";Dd=g([te(Dd.NAME)],Dd);var Cf=class extends j{constructor(){super(...arguments),this.registry={}}register(i){this.registry[i.controllerName]=i.controllerClass}getInstance(i){let t=this.registry[i];if(t!=null)return new t}};Cf=g([te("ctrlsFactory")],Cf);var ua=class extends Pe{constructor(i,t){super(i),this.direction=t,this.hideTimeout=null}postConstruct(){this.addManagedListener(this.eventService,m.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",Nf()||Ln())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=Vf(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){let i=["mouseenter","mousedown","touchstart"],t=["mouseleave","touchend"],e=this.getGui();i.forEach(r=>this.addManagedListener(e,r,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0))),t.forEach(r=>this.addManagedListener(e,r,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1)))}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedListener(this.eventService,m.EVENT_BODY_SCROLL,i=>{i.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))}),this.addManagedListener(this.eventService,m.EVENT_BODY_SCROLL_END,()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)})}attemptSettingScrollPosition(i){let t=this.getViewport();xf(()=>Dr(t),()=>this.setScrollPosition(i),100)}getViewport(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(i){this.addManagedListener(this.getViewport(),"scroll",i)}};g([Q("eViewport")],ua.prototype,"eViewport",2);g([Q("eContainer")],ua.prototype,"eContainer",2);g([w("scrollVisibleService")],ua.prototype,"scrollVisibleService",2);g([w("ctrlsService")],ua.prototype,"ctrlsService",2);g([w("animationFrameService")],ua.prototype,"animationFrameService",2);var ca=class g0 extends ua{constructor(){super(g0.TEMPLATE,"horizontal")}postConstruct(){super.postConstruct();let t=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,m.EVENT_DISPLAYED_COLUMNS_CHANGED,t),this.addManagedListener(this.eventService,m.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,t),this.addManagedListener(this.eventService,m.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedPropertyListener("domLayout",t),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new bl(e=>this.eContainer.style.width=`${e}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;let t=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${t}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){let t=this.scrollVisibleService.isVerticalScrollShowing(),e=this.columnModel.getDisplayedColumnsRightWidth(),r=!this.enableRtl&&t,o=this.gos.getScrollbarWidth();r&&(e+=o),eo(this.eRightSpacer,e),this.eRightSpacer.classList.toggle("ag-scroller-corner",e<=o);let n=this.columnModel.getDisplayedColumnsLeftWidth();this.enableRtl&&t&&(n+=o),eo(this.eLeftSpacer,n),this.eLeftSpacer.classList.toggle("ag-scroller-corner",n<=o)}setScrollVisible(){let t=this.scrollVisibleService.isHorizontalScrollShowing(),e=this.invisibleScrollbar,r=this.gos.get("suppressHorizontalScroll"),o=t&&this.gos.getScrollbarWidth()||0,s=r?0:o===0&&e?16:o;this.addOrRemoveCssClass("ag-scrollbar-invisible",e),Ls(this.getGui(),s),Ls(this.eViewport,s),Ls(this.eContainer,s),this.setDisplayed(t,{skipAriaHidden:!0})}getScrollPosition(){return Ad(this.getViewport(),this.enableRtl)}setScrollPosition(t){Dr(this.getViewport())||this.attemptSettingScrollPosition(t),Od(this.getViewport(),t,this.enableRtl)}};ca.TEMPLATE=`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>
        </div>`;g([Q("eLeftSpacer")],ca.prototype,"eLeftSpacer",2);g([Q("eRightSpacer")],ca.prototype,"eRightSpacer",2);g([w("columnModel")],ca.prototype,"columnModel",2);g([w("pinnedRowModel")],ca.prototype,"pinnedRowModel",2);g([U],ca.prototype,"postConstruct",1);var kT=ca,qd=class extends j{postConstruct(){let i=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,m.EVENT_DISPLAYED_COLUMNS_CHANGED,i),this.addManagedListener(this.eventService,m.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,i),this.addManagedPropertyListener("domLayout",i)}checkContainerWidths(){let i=this.gos.isDomLayout("print"),t=i?0:this.columnModel.getDisplayedColumnsLeftWidth(),e=i?0:this.columnModel.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:m.EVENT_LEFT_PINNED_WIDTH_CHANGED})),e!=this.rightWidth&&(this.rightWidth=e,this.eventService.dispatchEvent({type:m.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}};g([w("columnModel")],qd.prototype,"columnModel",2);g([U],qd.prototype,"postConstruct",1);qd=g([te("pinnedWidthService")],qd);var ml=class extends j{constructor(){super(...arguments),this.events=[]}postConstruct(){this.rowModel.getType()=="clientSide"&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(i,t){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(i);return}this.events.push(i);let e=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(r=>this.eventService.dispatchEvent(r)),this.events=[]};t?e():(this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(e)),this.dispatchExpandedDebounced())}};g([w("animationFrameService")],ml.prototype,"animationFrameService",2);g([w("rowModel")],ml.prototype,"rowModel",2);g([U],ml.prototype,"postConstruct",1);ml=g([te("rowNodeEventThrottle")],ml);var VT={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},dndSource:{version:"31.2",message:"This feature has been replaced by `Row Dragging to an External DropZone`."},dndSourceOnRowDrag:{version:"31.2",message:"This feature has been replaced by `Row Dragging to an External DropZone`."}},ts=(i,t)=>{var e;return((e=t.rowModelType)!=null?e:"clientSide")==="clientSide"?{module:"@ag-grid-enterprise/row-grouping"}:null},GT={enableRowGroup:ts,rowGroup:ts,rowGroupIndex:ts,enablePivot:ts,enableValue:ts,pivot:ts,pivotIndex:ts,aggFunc:ts,cellEditor:i=>i.cellEditor==="agRichSelect"||i.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:i=>{var t;let e=["columnsMenuTab","generalMenuTab"];return(t=i.menuTabs)!=null&&t.some(r=>e.includes(r))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],dependencies:(i,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],dependencies:(i,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],dependencies:(i,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>Za},HT={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0},BT=Object.keys(HT),Za={objectName:"colDef",allProperties:BT,docsUrl:"column-properties/",deprecations:VT,validations:GT},$T={enableChartToolPanelsButton:{version:"29"},functionsPassive:{version:"29.2"},onColumnRowGroupChangeRequest:{version:"29.2"},onColumnPivotChangeRequest:{version:"29.2"},onColumnValueChangeRequest:{version:"29.2"},onColumnAggFuncChangeRequest:{version:"29.2"},serverSideFilterAllLevels:{version:"30",message:"All server-side group levels are now filtered by default. This can be toggled using `serverSideOnlyRefreshFilteredGroups`."},suppressAggAtRootLevel:{version:"30",message:"The root level aggregation is now suppressed by default. This can be toggled using  `alwaysAggregateAtRootLevel`."},excludeHiddenColumnsFromQuickFilter:{version:"30",message:"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `includeHiddenColumnsInQuickFilter`."},enterMovesDown:{version:"30",renamed:"enterNavigatesVertically"},enterMovesDownAfterEdit:{version:"30",renamed:"enterNavigatesVerticallyAfterEdit"},suppressParentsInRowNodes:{version:"30.2",message:"Using suppressParentsInRowNodes is no longer recommended. To serialize nodes it is now recommended to instead remove the parent node reference before serialization."},advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."}},WT={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!1,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,suppressChartToolPanelsButton:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,functionsPassive:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1},jT={sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",dependencies:i=>{var t;let e=(t=i.rowModelType)!=null?t:"clientSide";switch(e){case"clientSide":let r=`treeData requires 'getDataPath' in the ${e} row model.`;return i.getDataPath?null:r;case"serverSide":let o=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${e} row model.`;return i.isServerSideGroup&&i.getServerSideGroupKey?null:o}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],dependencies:i=>{var t;switch((t=i.rowModelType)!=null?t:"clientSide"){case"clientSide":return null;case"serverSide":return i.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},suppressParentsInRowNodes:{dependencies:{groupSelectsChildren:[void 0,!1]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},columnDefs:()=>Za,defaultColDef:()=>Za,defaultColGroupDef:()=>Za,autoGroupColumnDef:()=>Za},UT={objectName:"gridOptions",allProperties:[...Id.ALL_PROPERTIES,...eu.EVENT_CALLBACKS],propertyExceptions:["api","columnApi"],docsUrl:"grid-options/",deprecations:$T,validations:jT},nt=class{constructor(){this.destroyed=!1,this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new Po,this.globalEventHandlerFactory=i=>(t,e)=>{if(this.destroyed)return;let r=ah.has(t);if(r&&!i||!r&&i)return;let o=eu.getCallbackForEvent(t),n=this.gridOptions[o];typeof n=="function"&&this.frameworkOverrides.wrapOutgoing(()=>{n(e)})}}get context(){return this.gridOptions.context}init(){this.columnApi=new Us(this.api);let i=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),i),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.getScrollbarWidth()}destroy(){this.destroyed=!0,this.columnApi=void 0}get(i){var t;return(t=this.gridOptions[i])!=null?t:WT[i]}getCallback(i){return this.mergeGridCommonParams(this.gridOptions[i])}exists(i){return W(this.gridOptions[i])}mergeGridCommonParams(i){return i&&(e=>{let r=e;return r.api=this.api,r.columnApi=this.columnApi,r.context=this.context,i(r)})}static toBoolean(i){return typeof i=="boolean"?i:typeof i=="string"?i.toUpperCase()==="TRUE"||i=="":!1}static toNumber(i){if(typeof i=="number")return i;if(typeof i=="string"){let t=parseInt(i);return isNaN(t)?void 0:t}}static toConstrainedNum(i,t){return e=>{let r=nt.toNumber(e);if(!(r==null||r<i||r>t))return r}}static getCoercedValue(i,t){let e=nt.PROPERTY_COERCIONS.get(i);return e?e(t):t}static getCoercedGridOptions(i){let t={};return Object.entries(i).forEach(([e,r])=>{let o=nt.getCoercedValue(e,r);t[e]=o}),t}updateGridOptions({options:i,force:t,source:e="api"}){let r={id:nt.changeSetId++,properties:[]},o=[];Object.entries(i).forEach(([n,s])=>{e==="api"&&vE[n]&&Ce(`${n} is an initial property and cannot be updated.`);let a=nt.getCoercedValue(n,s),l=t||typeof a=="object"&&e==="api",d=this.gridOptions[n];if(l||d!==a){this.gridOptions[n]=a;let u={type:n,currentValue:a,previousValue:d,changeSet:r,source:e};o.push(u)}}),this.validationService.processGridOptions(this.gridOptions),r.properties=o.map(n=>n.type),o.forEach(n=>{this.gridOptions.debug&&console.log(`AG Grid: Updated property ${n.type} from `,n.previousValue," to  ",n.currentValue),this.propertyEventService.dispatchEvent(n)})}addEventListener(i,t){this.propertyEventService.addEventListener(i,t)}removeEventListener(i,t){this.propertyEventService.removeEventListener(i,t)}getScrollbarWidth(){if(this.scrollbarWidth==null){let t=typeof this.gridOptions.scrollbarWidth=="number"&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:Fb();t!=null&&(this.scrollbarWidth=t,this.eventService.dispatchEvent({type:m.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth}isRowModelType(i){return this.gridOptions.rowModelType===i||i==="clientSide"&&Te(this.gridOptions.rowModelType)}isDomLayout(i){var t;return((t=this.gridOptions.domLayout)!=null?t:"normal")===i}isRowSelection(){return this.gridOptions.rowSelection==="single"||this.gridOptions.rowSelection==="multiple"}useAsyncEvents(){return!this.get("suppressAsyncEvents")}isGetRowHeightFunction(){return typeof this.gridOptions.getRowHeight=="function"}getRowHeightForNode(i,t=!1,e){if(e==null&&(e=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(t)return{height:e,estimated:!0};let o={node:i,data:i.data},n=this.getCallback("getRowHeight")(o);if(this.isNumeric(n))return n===0&&Ce("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,n),estimated:!1}}return i.detail&&this.get("masterDetail")?this.getMasterDetailRowHeight():{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:e,estimated:!1}}getMasterDetailRowHeight(){return this.get("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}}getRowHeightAsNumber(){if(!this.gridOptions.rowHeight||Te(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();let i=this.environment.refreshRowHeightVariable();return i!==-1?i:(console.warn("AG Grid row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())}isNumeric(i){return!isNaN(i)&&typeof i=="number"&&isFinite(i)}getDomDataKey(){return this.domDataKey}getDomData(i,t){let e=i[this.getDomDataKey()];return e?e[t]:void 0}setDomData(i,t,e){let r=this.getDomDataKey(),o=i[r];Te(o)&&(o={},i[r]=o),o[t]=e}getDocument(){let i=null;return this.gridOptions.getDocument&&W(this.gridOptions.getDocument)?i=this.gridOptions.getDocument():this.eGridDiv&&(i=this.eGridDiv.ownerDocument),i&&W(i)?i:document}getWindow(){return this.getDocument().defaultView||window}getRootNode(){return this.eGridDiv.getRootNode()}getActiveDomElement(){return this.getRootNode().activeElement}getAsyncTransactionWaitMillis(){return W(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50}isAnimateRows(){return this.get("ensureDomOrder")?!1:this.get("animateRows")}isGroupRowsSticky(){return!(this.get("paginateChildRows")||this.get("groupHideOpenParents")||this.isDomLayout("print"))}isColumnsSortingCoupledToGroup(){let i=this.gridOptions.autoGroupColumnDef;return!i?.comparator&&!this.get("treeData")}getGroupAggFiltering(){let i=this.gridOptions.groupAggFiltering;if(typeof i=="function")return this.getCallback("groupAggFiltering");if(i===!0)return()=>!0}getGrandTotalRow(){let i=this.gridOptions.grandTotalRow;if(i)return i;if(this.gridOptions.groupIncludeTotalFooter)return"bottom"}getGroupTotalRowCallback(){let i=this.get("groupTotalRow");if(typeof i=="function")return this.getCallback("groupTotalRow");if(i)return()=>i;let t=this.get("groupIncludeFooter");if(typeof t=="function"){let e=this.getCallback("groupIncludeFooter");return r=>e(r)?"bottom":void 0}return()=>t?"bottom":void 0}isGroupMultiAutoColumn(){return this.gridOptions.groupDisplayType?this.gridOptions.groupDisplayType==="multipleColumns":this.get("groupHideOpenParents")}isGroupUseEntireRow(i){return i?!1:this.gridOptions.groupDisplayType==="groupRows"}getGridCommonParams(){return{api:this.api,columnApi:this.columnApi,context:this.context}}addGridCommonParams(i){let t=i;return t.api=this.api,t.columnApi=this.columnApi,t.context=this.context,t}};nt.PROPERTY_COERCIONS=new Map([...Id.BOOLEAN_PROPERTIES.map(i=>[i,nt.toBoolean]),...Id.NUMBER_PROPERTIES.map(i=>[i,nt.toNumber]),["groupAggFiltering",i=>typeof i=="function"?i:nt.toBoolean(i)],["pageSize",nt.toConstrainedNum(1,Number.MAX_VALUE)],["autoSizePadding",nt.toConstrainedNum(0,Number.MAX_VALUE)],["keepDetailRowsCount",nt.toConstrainedNum(1,Number.MAX_VALUE)],["rowBuffer",nt.toConstrainedNum(0,Number.MAX_VALUE)],["infiniteInitialRowCount",nt.toConstrainedNum(1,Number.MAX_VALUE)],["cacheOverflowSize",nt.toConstrainedNum(1,Number.MAX_VALUE)],["cacheBlockSize",nt.toConstrainedNum(1,Number.MAX_VALUE)],["serverSideInitialRowCount",nt.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelPageSize",nt.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelBufferSize",nt.toConstrainedNum(0,Number.MAX_VALUE)]]);nt.changeSetId=0;g([w("gridOptions")],nt.prototype,"gridOptions",2);g([w("eventService")],nt.prototype,"eventService",2);g([w("environment")],nt.prototype,"environment",2);g([w("frameworkOverrides")],nt.prototype,"frameworkOverrides",2);g([w("eGridDiv")],nt.prototype,"eGridDiv",2);g([w("validationService")],nt.prototype,"validationService",2);g([w("gridApi")],nt.prototype,"api",2);g([U],nt.prototype,"init",1);g([ir],nt.prototype,"destroy",1);nt=g([te("gridOptionsService")],nt);var bf=class extends j{getLocaleTextFunc(){let i=this.gos.getCallback("getLocaleText");if(i)return(e,r,o)=>i({key:e,defaultValue:r,variableValues:o});let t=this.gos.get("localeText");return(e,r,o)=>{let n=t&&t[e];if(n&&o&&o.length){let s=0;for(;!(s>=o.length||n.indexOf("${variable}")===-1);)n=n.replace("${variable}",o[s++])}return n??r}}};bf=g([te("localeService")],bf);var _m=class f0 extends ua{constructor(){super(f0.TEMPLATE,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new ip(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedListener(this.eventService,m.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onRowContainerHeightChanged.bind(this))}setScrollVisible(){let t=this.scrollVisibleService.isVerticalScrollShowing(),e=this.invisibleScrollbar,r=t&&this.gos.getScrollbarWidth()||0,o=r===0&&e?16:r;this.addOrRemoveCssClass("ag-scrollbar-invisible",e),eo(this.getGui(),o),eo(this.eViewport,o),eo(this.eContainer,o),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(){let{ctrlsService:t}=this,r=t.getGridBodyCtrl().getBodyViewportElement(),o=this.getScrollPosition(),n=r.scrollTop;o!=n&&this.setScrollPosition(n,!0)}getScrollPosition(){return this.getViewport().scrollTop}setScrollPosition(t,e){!e&&!Dr(this.getViewport())&&this.attemptSettingScrollPosition(t),this.getViewport().scrollTop=t}};_m.TEMPLATE=`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" ref="eViewport">
                <div class="ag-body-vertical-scroll-container" ref="eContainer"></div>
            </div>
        </div>`;g([U],_m.prototype,"postConstruct",1);var qT=_m,MC={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},IC=["january","february","march","april","may","june","july","august","september","october","november","december"],Ks=class extends j{constructor(){super(...arguments),this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}init(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",i=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(Qa(i.source))})}processDataTypeDefinitions(){var i;let t=this.getDefaultDataTypes();this.dataTypeDefinitions={},Object.entries(t).forEach(([r,o])=>{this.dataTypeDefinitions[r]=Pt(he({},o),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(o)})});let e=(i=this.gos.get("dataTypeDefinitions"))!=null?i:{};this.dataTypeMatchers={},Object.entries(e).forEach(([r,o])=>{let n=this.processDataTypeDefinition(o,e,[r],t);n&&(this.dataTypeDefinitions[r]=n,o.dataTypeMatcher&&(this.dataTypeMatchers[r]=o.dataTypeMatcher))}),this.checkObjectValueHandlers(t),["dateString","text","number","boolean","date"].forEach(r=>{let o=this.dataTypeMatchers[r];o&&delete this.dataTypeMatchers[r],this.dataTypeMatchers[r]=o??t[r].dataTypeMatcher})}mergeDataTypeDefinitions(i,t){let e=he(he({},i),t);return i.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(e.columnTypes=[...this.convertColumnTypes(i.columnTypes),...this.convertColumnTypes(t.columnTypes)]),e}processDataTypeDefinition(i,t,e,r){let o,n=i.extendsDataType;if(i.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),i.extendsDataType===i.baseDataType){let s=r[n],a=t[n];if(s&&a&&(s=a),!this.validateDataTypeDefinition(i,s,n))return;o=this.mergeDataTypeDefinitions(s,i)}else{if(e.includes(n)){Ce('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}let s=t[n];if(!this.validateDataTypeDefinition(i,s,n))return;let a=this.processDataTypeDefinition(s,t,[...e,n],r);if(!a)return;o=this.mergeDataTypeDefinitions(a,i)}return Pt(he({},o),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(o)})}validateDataTypeDefinition(i,t,e){return t?t.baseDataType!==i.baseDataType?(Ce('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(Ce(`The data type definition ${e} does not exist.`),!1)}createGroupSafeValueFormatter(i){if(i.valueFormatter)return t=>{var e,r;if((e=t.node)!=null&&e.group){let o=t.column.getAggFunc();if(o){if(o==="first"||o==="last")return i.valueFormatter(t);if(i.baseDataType==="number"&&o!=="count"){if(typeof t.value=="number")return i.valueFormatter(t);if(typeof t.value=="object"){if(!t.value)return;if("toNumber"in t.value)return i.valueFormatter(Pt(he({},t),{value:t.value.toNumber()}));if("value"in t.value)return i.valueFormatter(Pt(he({},t),{value:t.value.value}))}}}if(!this.gos.get("suppressGroupMaintainValueType"))return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive()){if(typeof t.value!="string"||(r=i.dataTypeMatcher)!=null&&r.call(i,t.value))return i.valueFormatter(t);if(!this.gos.get("suppressGroupMaintainValueType"))return}return i.valueFormatter(t)}}updateColDefAndGetDataTypeDefinitionColumnType(i,t,e){let{cellDataType:r}=t,{field:o}=t;if(r===void 0&&(r=i.cellDataType),(r==null||r===!0)&&(r=this.canInferCellDataType(i,t)?this.inferCellDataType(o,e):!1),!r){i.cellDataType=!1;return}let n=this.dataTypeDefinitions[r];if(!n){Ce(`Missing data type definition - "${r}"`);return}return i.cellDataType=r,n.groupSafeValueFormatter&&(i.valueFormatter=n.groupSafeValueFormatter),n.valueParser&&(i.valueParser=n.valueParser),n.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(i,n,e),n.columnTypes}updateColDefAndGetColumnType(i,t,e){var r,o;let n=this.updateColDefAndGetDataTypeDefinitionColumnType(i,t,e),s=(o=(r=t.type)!=null?r:n)!=null?o:i.type;return i.type=s,s?this.convertColumnTypes(s):void 0}addColumnListeners(i){if(!this.isWaitingForRowData)return;let t=this.columnStateUpdatesPendingInference[i.getColId()];if(!t)return;let e=r=>{t.add(r.key)};i.addEventListener(yt.EVENT_STATE_UPDATED,e),this.columnStateUpdateListenerDestroyFuncs.push(()=>i.removeEventListener(yt.EVENT_STATE_UPDATED,e))}canInferCellDataType(i,t){var e;if(this.rowModel.getType()!=="clientSide")return!1;let r={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,r))return!1;let o=t.type===null?i.type:t.type;if(o){let n=(e=this.gos.get("columnTypes"))!=null?e:{};if(this.convertColumnTypes(o).some(a=>{let l=n[a.trim()];return l&&this.doColDefPropsPreventInference(l,r)}))return!1}return!this.doColDefPropsPreventInference(i,r)}doColDefPropsPreventInference(i,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([e,r])=>this.doesColDefPropPreventInference(i,t,e,r))}doesColDefPropPreventInference(i,t,e,r){if(!t[e])return!1;let o=i[e];return o===null?(t[e]=!1,!1):r===void 0?!!o:o===r}inferCellDataType(i,t){var e;if(!i)return;let r,o=this.getInitialData();if(o){let s=i.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");r=Ja(o,i,s)}else this.initWaitForRowData(t);if(r==null)return;let[n]=(e=Object.entries(this.dataTypeMatchers).find(([s,a])=>a(r)))!=null?e:["object"];return n}getInitialData(){let i=this.gos.get("rowData");if(i?.length)return i[0];if(this.initialData)return this.initialData;{let t=this.rowModel.getRootNode().allLeafChildren;if(t?.length)return t[0].data}return null}initWaitForRowData(i){if(this.columnStateUpdatesPendingInference[i]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;let t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();let e=this.addManagedListener(this.eventService,m.EVENT_ROW_DATA_UPDATE_STARTED,r=>{let{firstRowData:o}=r;if(!o)return;e?.(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(o,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations();let n={type:m.EVENT_DATA_TYPES_INFERRED};this.eventService.dispatchEvent(n)})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(i,t){this.initialData=i;let e=[];this.columnStateUpdateListenerDestroyFuncs.forEach(n=>n()),this.columnStateUpdateListenerDestroyFuncs=[];let r={},o={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([n,s])=>{let a=this.columnModel.getGridColumn(n);if(!a)return;let l=a.getColDef();if(!this.columnModel.resetColumnDefIntoColumn(a,"cellDataTypeInferred"))return;let d=a.getColDef();if(t&&d.type&&d.type!==l.type){let u=this.getUpdatedColumnState(a,s);u.rowGroup&&u.rowGroupIndex==null&&(r[n]=u),u.pivot&&u.pivotIndex==null&&(o[n]=u),e.push(u)}}),t&&e.push(...this.columnModel.generateColumnStateForRowGroupAndPivotIndexes(r,o)),e.length&&this.columnModel.applyColumnState({state:e},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(i,t){let e=this.columnModel.getColumnStateFromColDef(i);return t.forEach(r=>{delete e[r],r==="rowGroup"?delete e.rowGroupIndex:r==="pivot"&&delete e.pivotIndex}),e}checkObjectValueHandlers(i){let t=this.dataTypeDefinitions.object,e=i.object;this.hasObjectValueParser=t.valueParser!==e.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==e.valueFormatter}convertColumnTypes(i){let t=[];return i instanceof Array?i.some(r=>typeof r!="string")?console.warn("if colDef.type is supplied an array it should be of type 'string[]'"):t=i:typeof i=="string"?t=i.split(","):console.warn("colDef.type should be of type 'string' | 'string[]'"),t}getDateStringTypeDefinition(i){var t;return i?(t=this.getDataTypeDefinition(i))!=null?t:this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(i){return this.getDateStringTypeDefinition(i).dateParser}getDateFormatterFunction(i){return this.getDateStringTypeDefinition(i).dateFormatter}getDataTypeDefinition(i){let t=i.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(i){var t;return(t=this.getDataTypeDefinition(i))==null?void 0:t.baseDataType}checkType(i,t){var e;if(t==null)return!0;let r=(e=this.getDataTypeDefinition(i))==null?void 0:e.dataTypeMatcher;return r?r(t):!0}validateColDef(i){i.cellDataType==="object"&&(i.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&Ce('Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"'),i.editable&&i.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&Ce('Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"'))}setColDefPropertiesForBaseDataType(i,t,e){let r=(a,l,d)=>{let u=a.getColDef().valueFormatter;return u===t.groupSafeValueFormatter&&(u=t.valueFormatter),this.valueService.formatValue(a,l,d,u)},o=pt.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()),n=this.localeService.getLocaleTextFunc(),s=a=>{let{filterParams:l}=i;i.filterParams=typeof l=="object"?he(he({},l),a):a};switch(t.baseDataType){case"number":{i.cellEditor="agNumberCellEditor",o&&s({comparator:(a,l)=>{let d=a==null?0:parseInt(a),u=l==null?0:parseInt(l);return d===u?0:d>u?1:-1}});break}case"boolean":{i.cellEditor="agCheckboxCellEditor",i.cellRenderer="agCheckboxCellRenderer",i.suppressKeyboardEvent=a=>!!a.colDef.editable&&a.event.key===z.SPACE,s(o?{valueFormatter:a=>W(a.value)?n(String(a.value),a.value?"True":"False"):n("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(a,l)=>l,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(a,l)=>l===!1,numberOfInputs:0}]});break}case"date":{i.cellEditor="agDateCellEditor",i.keyCreator=a=>r(a.column,a.node,a.value),o&&s({valueFormatter:a=>{let l=r(a.column,a.node,a.value);return W(l)?l:n("blanks","(Blanks)")},treeList:!0,treeListFormatter:(a,l)=>{if(l===1&&a!=null){let d=IC[Number(a)-1];return n(d,MC[d])}return a??n("blanks","(Blanks)")}});break}case"dateString":{i.cellEditor="agDateStringCellEditor",i.keyCreator=l=>r(l.column,l.node,l.value);let a=t.dateParser;s(o?{valueFormatter:l=>{let d=r(l.column,l.node,l.value);return W(d)?d:n("blanks","(Blanks)")},treeList:!0,treeListPathGetter:l=>{let d=a(l??void 0);return d?[String(d.getFullYear()),String(d.getMonth()+1),String(d.getDate())]:null},treeListFormatter:(l,d)=>{if(d===1&&l!=null){let u=IC[Number(l)-1];return n(u,MC[u])}return l??n("blanks","(Blanks)")}}:{comparator:(l,d)=>{let u=a(d);return d==null||u<l?-1:u>l?1:0}});break}case"object":{i.cellEditorParams={useFormatter:!0},i.comparator=(a,l)=>{let d=this.columnModel.getPrimaryColumn(e),u=d?.getColDef();if(!d||!u)return 0;let c=a==null?"":r(d,null,a),h=l==null?"":r(d,null,l);return c===h?0:c>h?1:-1},i.keyCreator=a=>r(a.column,a.node,a.value),o?s({valueFormatter:a=>{let l=r(a.column,a.node,a.value);return W(l)?l:n("blanks","(Blanks)")}}):i.filterValueGetter=a=>r(a.column,a.node,this.valueService.getValue(a.column,a.node));break}}}getDefaultDataTypes(){let i=e=>!!e.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:e=>{var r,o;return((o=(r=e.newValue)==null?void 0:r.trim)==null?void 0:o.call(r))===""?null:Number(e.newValue)},valueFormatter:e=>e.value==null?"":typeof e.value!="number"||isNaN(e.value)?t("invalidNumber","Invalid Number"):String(e.value),dataTypeMatcher:e=>typeof e=="number"},text:{baseDataType:"text",valueParser:e=>e.newValue===""?null:Td(e.newValue),dataTypeMatcher:e=>typeof e=="string"},boolean:{baseDataType:"boolean",valueParser:e=>{var r,o;return e.newValue==null?e.newValue:((o=(r=e.newValue)==null?void 0:r.trim)==null?void 0:o.call(r))===""?null:String(e.newValue).toLowerCase()==="true"},valueFormatter:e=>e.value==null?"":String(e.value),dataTypeMatcher:e=>typeof e=="boolean"},date:{baseDataType:"date",valueParser:e=>Sr(e.newValue==null?null:String(e.newValue)),valueFormatter:e=>{var r;return e.value==null?"":!(e.value instanceof Date)||isNaN(e.value.getTime())?t("invalidDate","Invalid Date"):(r=Jr(e.value,!1))!=null?r:""},dataTypeMatcher:e=>e instanceof Date},dateString:{baseDataType:"dateString",dateParser:e=>{var r;return(r=Sr(e))!=null?r:void 0},dateFormatter:e=>{var r;return(r=Jr(e??null,!1))!=null?r:void 0},valueParser:e=>i(String(e.newValue))?e.newValue:null,valueFormatter:e=>i(String(e.value))?e.value:"",dataTypeMatcher:e=>typeof e=="string"&&i(e)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:e=>{var r;return(r=Td(e.value))!=null?r:""}}}}};g([w("rowModel")],Ks.prototype,"rowModel",2);g([w("columnModel")],Ks.prototype,"columnModel",2);g([w("valueService")],Ks.prototype,"valueService",2);g([U],Ks.prototype,"init",1);Ks=g([te("dataTypeService")],Ks);var Ys=class extends j{constructor(){super(...arguments),this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",i=>this.setColumnDefs(i))}start(){this.ctrlsService.whenReady(()=>{let i=this.gos.get("columnDefs");i?this.setColumnsAndData(i):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(i){this.columnModel.setColumnDefs(i??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.dispatchGridReadyEvent();let i=pt.__isRegistered("@ag-grid-enterprise/core",this.context.getGridId());new Sm("AG Grid",()=>this.gos.get("debug")).log(`initialised successfully, enterprise = ${i}`)}dispatchGridReadyEvent(){let i={type:m.EVENT_GRID_READY};this.eventService.dispatchEvent(i)}setColumnDefs(i){let t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.columnModel.setColumnDefs(t,Qa(i.source))}}};g([w("ctrlsService")],Ys.prototype,"ctrlsService",2);g([w("columnModel")],Ys.prototype,"columnModel",2);g([w("rowModel")],Ys.prototype,"rowModel",2);g([U],Ys.prototype,"postConstruct",1);Ys=g([te("syncService")],Ys);var Xs=class extends j{constructor(){super(...arguments),this.manuallyDisplayed=!1}postConstruct(){this.addManagedListener(this.eventService,m.EVENT_ROW_DATA_UPDATED,()=>this.onRowDataUpdated()),this.addManagedListener(this.eventService,m.EVENT_NEW_COLUMNS_LOADED,()=>this.onNewColumnsLoaded())}registerOverlayWrapperComp(i){this.overlayWrapperComp=i,(!this.gos.get("columnDefs")||this.gos.isRowModelType("clientSide")&&!this.gos.get("rowData"))&&this.showLoadingOverlay()}showLoadingOverlay(){if(this.gos.get("suppressLoadingOverlay"))return;let i={},t=this.userComponentFactory.getLoadingOverlayCompDetails(i);this.showOverlay(t,"ag-overlay-loading-wrapper","loadingOverlayComponentParams")}showNoRowsOverlay(){if(this.gos.get("suppressNoRowsOverlay"))return;let i={},t=this.userComponentFactory.getNoRowsOverlayCompDetails(i);this.showOverlay(t,"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams")}showOverlay(i,t,e){let r=i.newAgStackInstance(),o=this.addManagedPropertyListener(e,({currentValue:n})=>{r.then(s=>{s.refresh&&s.refresh(this.gos.addGridCommonParams(he({},n??{})))})});this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.overlayWrapperComp.showOverlay(r,t,o)}hideOverlay(){this.manuallyDisplayed=!1,this.overlayWrapperComp.hideOverlay()}showOrHideOverlay(){let i=this.paginationProxy.isEmpty(),t=this.gos.get("suppressNoRowsOverlay");i&&!t?this.showNoRowsOverlay():this.hideOverlay()}onRowDataUpdated(){this.showOrHideOverlay()}onNewColumnsLoaded(){this.columnModel.isReady()&&!this.paginationProxy.isEmpty()&&!this.manuallyDisplayed&&this.hideOverlay()}};g([w("userComponentFactory")],Xs.prototype,"userComponentFactory",2);g([w("paginationProxy")],Xs.prototype,"paginationProxy",2);g([w("columnModel")],Xs.prototype,"columnModel",2);g([U],Xs.prototype,"postConstruct",1);Xs=g([te("overlayService")],Xs);var er=class extends j{constructor(){super(...arguments),this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=Ji(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=Ji(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=Ji(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){var i;this.isClientSideRowModel=this.rowModel.getType()==="clientSide",this.cachedState=(i=this.gos.get("initialState"))!=null?i:{},this.ctrlsService.whenReady(()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));let t=this.addManagedListener(this.eventService,m.EVENT_NEW_COLUMNS_LOADED,({source:o})=>{o==="gridInitializing"&&(t?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))}),e=this.addManagedListener(this.eventService,m.EVENT_ROW_COUNT_READY,()=>{e?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())}),r=this.addManagedListener(this.eventService,m.EVENT_FIRST_DATA_RENDERED,()=>{r?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState()),this.addManagedListener(this.eventService,m.EVENT_TOOL_PANEL_VISIBLE_CHANGED,()=>this.updateCachedState("sideBar",this.getSideBarState())),this.addManagedListener(this.eventService,m.EVENT_SIDE_BAR_UPDATED,()=>this.updateCachedState("sideBar",this.getSideBarState()))}setupStateOnColumnsInitialised(){var i;let t=(i=this.gos.get("initialState"))!=null?i:{};this.setColumnState(t),this.setColumnGroupState(t),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState()),this.addManagedListener(this.eventService,m.EVENT_COLUMN_VALUE_CHANGED,()=>this.updateColumnState(["aggregation"])),this.addManagedListener(this.eventService,m.EVENT_COLUMN_MOVED,()=>this.updateColumnState(["columnOrder"])),this.addManagedListener(this.eventService,m.EVENT_COLUMN_PINNED,()=>this.updateColumnState(["columnPinning"])),this.addManagedListener(this.eventService,m.EVENT_COLUMN_RESIZED,()=>this.updateColumnState(["columnSizing"])),this.addManagedListener(this.eventService,m.EVENT_COLUMN_VISIBLE,()=>this.updateColumnState(["columnVisibility"])),this.addManagedListener(this.eventService,m.EVENT_COLUMN_PIVOT_CHANGED,()=>this.updateColumnState(["pivot"])),this.addManagedListener(this.eventService,m.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.updateColumnState(["pivot"])),this.addManagedListener(this.eventService,m.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.updateColumnState(["rowGroup"])),this.addManagedListener(this.eventService,m.EVENT_SORT_CHANGED,()=>this.updateColumnState(["sort"])),this.addManagedListener(this.eventService,m.EVENT_NEW_COLUMNS_LOADED,()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"])),this.addManagedListener(this.eventService,m.EVENT_COLUMN_GROUP_OPENED,()=>this.updateCachedState("columnGroup",this.getColumnGroupState()))}setupStateOnRowCountReady(){var i;let{filter:t,rowGroupExpansion:e,rowSelection:r,pagination:o}=(i=this.gos.get("initialState"))!=null?i:{},n=this.gos.get("advancedFilterModel");(t||n)&&this.setFilterState(t,n),e&&this.setRowGroupExpansionState(e),r&&this.setRowSelectionState(r),o&&this.setPaginationState(o),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState()),this.addManagedListener(this.eventService,m.EVENT_FILTER_CHANGED,()=>this.updateCachedState("filter",this.getFilterState())),this.addManagedListener(this.eventService,m.EVENT_ROW_GROUP_OPENED,()=>this.onRowGroupOpenedDebounced()),this.addManagedListener(this.eventService,m.EVENT_EXPAND_COLLAPSE_ALL,()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())),this.addManagedListener(this.eventService,m.EVENT_SELECTION_CHANGED,()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()}),this.addManagedListener(this.eventService,m.EVENT_PAGINATION_CHANGED,s=>{(s.newPage||s.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())})}setupStateOnFirstDataRendered(){var i;let{scroll:t,rangeSelection:e,focusedCell:r,columnOrder:o}=(i=this.gos.get("initialState"))!=null?i:{};r&&this.setFocusedCellState(r),e&&this.setRangeSelectionState(e),t&&this.setScrollState(t),this.setColumnPivotState(!!o?.orderedColIds),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState()),this.updateCachedState("rangeSelection",this.getRangeSelectionState()),this.updateCachedState("scroll",this.getScrollState()),this.addManagedListener(this.eventService,m.EVENT_CELL_FOCUSED,()=>this.updateCachedState("focusedCell",this.getFocusedCellState())),this.addManagedListener(this.eventService,m.EVENT_RANGE_SELECTION_CHANGED,n=>{n.finished&&this.updateCachedState("rangeSelection",this.getRangeSelectionState())}),this.addManagedListener(this.eventService,m.EVENT_BODY_SCROLL_END,()=>this.updateCachedState("scroll",this.getScrollState()))}getColumnState(){let i=this.columnModel.isPivotMode(),t=[],e=[],r=[],o=[],n=[],s=[],a=[],l=[],d=[],u=this.columnModel.getColumnState();for(let c=0;c<u.length;c++){let{colId:h,sort:p,sortIndex:f,rowGroup:C,rowGroupIndex:b,aggFunc:x,pivot:S,pivotIndex:R,pinned:I,hide:F,width:L,flex:V}=u[c];d.push(h),p&&(t[f??0]={colId:h,sort:p}),C&&(e[b??0]=h),typeof x=="string"&&r.push({colId:h,aggFunc:x}),S&&(o[R??0]=h),I&&(I==="right"?s:n).push(h),F&&a.push(h),(V||L)&&l.push({colId:h,flex:V??void 0,width:L})}return{sort:t.length?{sortModel:t}:void 0,rowGroup:e.length?{groupColIds:e}:void 0,aggregation:r.length?{aggregationModel:r}:void 0,pivot:o.length||i?{pivotMode:i,pivotColIds:o}:void 0,columnPinning:n.length||s.length?{leftColIds:n,rightColIds:s}:void 0,columnVisibility:a.length?{hiddenColIds:a}:void 0,columnSizing:l.length?{columnSizingModel:l}:void 0,columnOrder:d.length?{orderedColIds:d}:void 0}}setColumnState(i){let{sort:t,rowGroup:e,aggregation:r,pivot:o,columnPinning:n,columnVisibility:s,columnSizing:a,columnOrder:l}=i,d={},u=f=>{let C=d[f];return C||(C={colId:f},d[f]=C,C)};t&&t.sortModel.forEach(({colId:f,sort:C},b)=>{let x=u(f);x.sort=C,x.sortIndex=b}),e&&e.groupColIds.forEach((f,C)=>{let b=u(f);b.rowGroup=!0,b.rowGroupIndex=C}),r&&r.aggregationModel.forEach(({colId:f,aggFunc:C})=>{u(f).aggFunc=C}),o&&(o.pivotColIds.forEach((f,C)=>{let b=u(f);b.pivot=!0,b.pivotIndex=C}),this.gos.updateGridOptions({options:{pivotMode:o.pivotMode},source:"gridInitializing"})),n&&(n.leftColIds.forEach(f=>{u(f).pinned="left"}),n.rightColIds.forEach(f=>{u(f).pinned="right"})),s&&s.hiddenColIds.forEach(f=>{u(f).hide=!0}),a&&a.columnSizingModel.forEach(({colId:f,flex:C,width:b})=>{let x=u(f);x.flex=C??null,x.width=b});let c=l?.orderedColIds,h=!!c?.length,p=h?c.map(f=>u(f)):Object.values(d);if(p.length){this.columnStates=p;let f={sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};this.columnModel.applyColumnState({state:p,applyOrder:h,defaultState:f},"gridInitializing")}}setColumnPivotState(i){let t=this.columnStates;this.columnStates=void 0;let e=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.columnModel.isSecondaryColumnsPresent()){if(t){let r=[];for(let o of t)this.columnModel.getSecondaryColumn(o.colId)&&r.push(o);this.columnModel.applyColumnState({state:r,applyOrder:i},"gridInitializing")}e&&this.columnModel.setColumnGroupState(e,"gridInitializing")}}getColumnGroupState(){let i=this.columnModel.getColumnGroupState(),t=[];return i.forEach(({groupId:e,open:r})=>{r&&t.push(e)}),t.length?{openColumnGroupIds:t}:void 0}setColumnGroupState(i){var t;if(!i.hasOwnProperty("columnGroup"))return;let e=new Set((t=i.columnGroup)==null?void 0:t.openColumnGroupIds),o=this.columnModel.getColumnGroupState().map(({groupId:n})=>{let s=e.has(n);return s&&e.delete(n),{groupId:n,open:s}});e.forEach(n=>{o.push({groupId:n,open:!0})}),o.length&&(this.columnGroupStates=o),this.columnModel.setColumnGroupState(o,"gridInitializing")}getFilterState(){var i;let t=this.filterManager.getFilterModel();t&&Object.keys(t).length===0&&(t=void 0);let e=(i=this.filterManager.getAdvancedFilterModel())!=null?i:void 0;return t||e?{filterModel:t,advancedFilterModel:e}:void 0}setFilterState(i,t){let{filterModel:e,advancedFilterModel:r}=i??{advancedFilterModel:t};e&&this.filterManager.setFilterModel(e,"columnFilter"),r&&this.filterManager.setAdvancedFilterModel(r)}getRangeSelectionState(){var i;let t=(i=this.rangeService)==null?void 0:i.getCellRanges().map(e=>{let{id:r,type:o,startRow:n,endRow:s,columns:a,startColumn:l}=e;return{id:r,type:o,startRow:n,endRow:s,colIds:a.map(d=>d.getColId()),startColId:l.getColId()}});return t?.length?{cellRanges:t}:void 0}setRangeSelectionState(i){if(!this.gos.get("enableRangeSelection")||!this.rangeService)return;let t=[];i.cellRanges.forEach(e=>{let r=[];if(e.colIds.forEach(n=>{let s=this.columnModel.getGridColumn(n);s&&r.push(s)}),!r.length)return;let o=this.columnModel.getGridColumn(e.startColId);if(!o){let n=this.columnModel.getAllDisplayedColumns(),s=new Set(r);o=n.find(a=>s.has(a))}t.push(Pt(he({},e),{columns:r,startColumn:o}))}),this.rangeService.setCellRanges(t)}getScrollState(){var i,t,e;if(!this.isClientSideRowModel)return;let r=(i=this.ctrlsService.getGridBodyCtrl())==null?void 0:i.getScrollFeature(),{left:o}=(t=r?.getHScrollPosition())!=null?t:{left:0},{top:n}=(e=r?.getVScrollPosition())!=null?e:{top:0};return n||o?{top:n,left:o}:void 0}setScrollState(i){var t;if(!this.isClientSideRowModel)return;let{top:e,left:r}=i;(t=this.ctrlsService.getGridBodyCtrl())==null||t.getScrollFeature().setScrollPosition(e,r)}getSideBarState(){var i,t;return(t=(i=this.sideBarService)==null?void 0:i.getSideBarComp())==null?void 0:t.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;let i=this.focusService.getFocusedCell();if(i){let{column:t,rowIndex:e,rowPinned:r}=i;return{colId:t.getColId(),rowIndex:e,rowPinned:r}}}setFocusedCellState(i){if(!this.isClientSideRowModel)return;let{colId:t,rowIndex:e,rowPinned:r}=i;this.focusService.setFocusedCell({column:this.columnModel.getGridColumn(t),rowIndex:e,rowPinned:r,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){let i=this.paginationProxy.getCurrentPage(),t=this.gos.get("paginationAutoPageSize")?void 0:this.paginationProxy.getPageSize();if(!(!i&&!t))return{page:i,pageSize:t}}setPaginationState(i){i.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationProxy.setPageSize(i.pageSize,"initialState"),typeof i.page=="number"&&this.paginationProxy.setPage(i.page)}getRowSelectionState(){var i;let t=this.selectionService.getSelectionState();return!t||!Array.isArray(t)&&(t.selectAll===!1||t.selectAllChildren===!1)&&!((i=t?.toggledNodes)!=null&&i.length)?void 0:t}setRowSelectionState(i){this.selectionService.setSelectionState(i,"gridInitializing")}getRowGroupExpansionState(){let i=this.expansionService.getExpandedRows();return i.length?{expandedRowGroupIds:i}:void 0}setRowGroupExpansionState(i){this.expansionService.expandRows(i.expandedRowGroupIds)}updateColumnState(i){let t=this.getColumnState(),e=!1;Object.entries(t).forEach(([r,o])=>{Kg(o,this.cachedState[r])||(e=!0)}),this.cachedState=he(he({},this.cachedState),t),e&&this.dispatchStateUpdateEvent(i)}updateCachedState(i,t){let e=this.cachedState[i];this.setCachedStateValue(i,t),Kg(t,e)||this.dispatchStateUpdateEvent([i])}setCachedStateValue(i,t){this.cachedState=Pt(he({},this.cachedState),{[i]:t})}refreshStaleState(){this.staleStateKeys.forEach(i=>{switch(i){case"rowSelection":this.setCachedStateValue(i,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(i){this.suppressEvents||(i.forEach(t=>this.queuedUpdateSources.add(t)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){let i=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear();let t={type:m.EVENT_STATE_UPDATED,sources:i,state:this.cachedState};this.eventService.dispatchEvent(t)}suppressEventsAndDispatchInitEvent(i){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),i(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}};g([w("filterManager")],er.prototype,"filterManager",2);g([w("ctrlsService")],er.prototype,"ctrlsService",2);g([w("focusService")],er.prototype,"focusService",2);g([w("columnModel")],er.prototype,"columnModel",2);g([w("paginationProxy")],er.prototype,"paginationProxy",2);g([w("rowModel")],er.prototype,"rowModel",2);g([w("selectionService")],er.prototype,"selectionService",2);g([w("expansionService")],er.prototype,"expansionService",2);g([w("columnAnimationService")],er.prototype,"columnAnimationService",2);g([gt("sideBarService")],er.prototype,"sideBarService",2);g([gt("rangeService")],er.prototype,"rangeService",2);g([U],er.prototype,"postConstruct",1);er=g([te("stateService")],er);var Kd=class extends j{init(){this.processGridOptions(this.gridOptions)}processGridOptions(i){this.processOptions(i,UT)}processColumnDefs(i){this.processOptions(i,Za)}processOptions(i,t){let{validations:e,deprecations:r,allProperties:o,propertyExceptions:n,objectName:s,docsUrl:a}=t;o&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(i,[...n??[],...Object.keys(r)],o,s,a);let l=new Set;Object.keys(i).forEach(u=>{var c;let h=r[u];if(h)if("renamed"in h){let{renamed:R,version:I}=h;l.add(`As of v${I}, ${String(u)} is deprecated. Please use ${String(R)} instead.`),i[R]=i[u]}else{let{message:R,version:I}=h;l.add(`As of v${I}, ${String(u)} is deprecated. ${R??""}`)}let p=i[u];if(p==null||p===!1)return;let f=e[u],C;if(f)if(typeof f=="function"){let R=f(i,this.gridOptions);if(!R)return;if("objectName"in R){let I=i[u];if(Array.isArray(I)){I.forEach(F=>{this.processOptions(F,R)});return}this.processOptions(i[u],R);return}C=R}else C=f;else return;let{module:b,dependencies:x,supportedRowModels:S}=C;if(S){let R=(c=this.gridOptions.rowModelType)!=null?c:"clientSide";if(!S.includes(R)){l.add(`${String(u)} is not supported with the '${R}' row model.`);return}}if(b){let R=Array.isArray(b)?b:[b],I=!0;if(R.forEach(F=>{pt.__assertRegistered(F,String(u),this.context.getGridId())||(I=!1,l.add(`${String(u)} is only available when ${F} is loaded.`))}),!I)return}if(x){let R=this.checkForWarning(u,x,i);if(R){l.add(R);return}}}),l.size>0&&l.forEach(u=>{Ce(u)})}checkForWarning(i,t,e){if(typeof t=="function")return t(e,this.gridOptions);let o=Object.entries(t).find(([a,l])=>{let d=e[a];return!l.includes(d)});if(!o)return null;let[n,s]=o;return s.length>1?`'${String(i)}' requires '${n}' to be one of [${s.join(", ")}].`:`'${String(i)}' requires '${n}' to be ${s[0]}.`}checkProperties(i,t,e,r,o){let n=["__ob__","__v_skip","__metadata__"],s=Ub(Object.getOwnPropertyNames(i),[...n,...t,...e],e);if(Wi(s,(a,l)=>{Ce(`invalid ${r} property '${a}' did you mean any of these: ${l.slice(0,8).join(", ")}`)}),Object.keys(s).length>0&&o){let a=this.getFrameworkOverrides().getDocLink(o);Ce(`to see all the valid ${r} properties please check: ${a}`)}}};g([w("gridOptions")],Kd.prototype,"gridOptions",2);g([U],Kd.prototype,"init",1);Kd=g([te("validationService")],Kd);var Ph=class extends j{constructor(){super(...arguments),this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new Ef(this.getFrameworkOverrides())}addEventListener(i,t){let e=this.frameworkEventWrappingService.wrap(t),r=this.gos.useAsyncEvents()&&!ah.has(i),o=r?this.asyncEventListeners:this.syncEventListeners;o.has(i)||o.set(i,new Set),o.get(i).add(e),this.eventService.addEventListener(i,e,r)}removeEventListener(i,t){var e;let r=this.frameworkEventWrappingService.unwrap(t),o=this.asyncEventListeners.get(i),n=!!o?.delete(r);n||(e=this.syncEventListeners.get(i))==null||e.delete(r),this.eventService.removeEventListener(i,r,n)}addGlobalListener(i){let t=this.frameworkEventWrappingService.wrapGlobal(i);if(this.gos.useAsyncEvents()){let r=(n,s)=>{ah.has(n)&&t(n,s)},o=(n,s)=>{ah.has(n)||t(n,s)};this.globalEventListenerPairs.set(i,{syncListener:r,asyncListener:o}),this.eventService.addGlobalListener(r,!1),this.eventService.addGlobalListener(o,!0)}else this.syncGlobalEventListeners.add(t),this.eventService.addGlobalListener(t,!1)}removeGlobalListener(i){let t=this.frameworkEventWrappingService.unwrapGlobal(i);if(this.globalEventListenerPairs.has(t)){let{syncListener:r,asyncListener:o}=this.globalEventListenerPairs.get(t);this.eventService.removeGlobalListener(r,!1),this.eventService.removeGlobalListener(o,!0),this.globalEventListenerPairs.delete(i)}else this.syncGlobalEventListeners.delete(t),this.eventService.removeGlobalListener(t,!1)}destroyEventListeners(i,t){i.forEach((e,r)=>{e.forEach(o=>this.eventService.removeEventListener(r,o,t)),e.clear()}),i.clear()}destroyGlobalListeners(i,t){i.forEach(e=>this.eventService.removeGlobalListener(e,t)),i.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:i,asyncListener:t})=>{this.eventService.removeGlobalListener(i,!1),this.eventService.removeGlobalListener(t,!0)}),this.globalEventListenerPairs.clear()}};g([U],Ph.prototype,"postConstruct",1);Ph=g([te("apiEventService")],Ph);var xm=class extends Pe{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;let i=this.selectPageSizeComp.getValue();if(!i)return;let t=Number(i);isNaN(t)||t<1||t===this.paginationProxy.getPageSize()||(this.paginationProxy.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}init(){this.addManagedPropertyListener("paginationPageSizeSelector",()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedListener(this.eventService,m.EVENT_PAGINATION_CHANGED,i=>this.handlePaginationChanged(i))}handlePaginationChanged(i){if(!this.selectPageSizeComp||!i?.newPageSize)return;let t=this.paginationProxy.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(i){this.selectPageSizeComp&&this.reset(),i&&(this.reloadPageSizesSelector(),this.selectPageSizeComp&&this.appendChild(this.selectPageSizeComp))}reset(){Zt(this.getGui()),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0)}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get("paginationPageSizeSelector")!==!1}reloadPageSizesSelector(){let i=this.getPageSizeSelectorValues(),t=this.paginationProxy.getPageSize(),e=!t||!i.includes(t);e&&(i.unshift(""),Ce(`The paginationPageSize grid option is set to a value that is not in the list of page size options.
                Please make sure that the paginationPageSize grid option is set to one of the values in the 
                paginationPageSizeSelector array, or set the paginationPageSizeSelector to false to hide the page size selector.`)),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0);let r=this.localeService.getLocaleTextFunc(),o=r("pageSizeSelectorLabel","Page Size:"),n=i.map(a=>({value:String(a),text:String(a)})),s=r("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new qh).addOptions(n).setValue(String(e?"":t)).setAriaLabel(s).setLabel(o).onValueChange(()=>this.handlePageSizeItemSelected()),this.hasEmptyOption=e}getPageSizeSelectorValues(){let i=[20,50,100],t=this.gos.get("paginationPageSizeSelector");return!Array.isArray(t)||!this.validateValues(t)?i:[...t].sort((e,r)=>e-r)}validateValues(i){if(!i.length)return Ce(`The paginationPageSizeSelector grid option is an empty array. This is most likely a mistake.
                If you want to hide the page size selector, please set the paginationPageSizeSelector to false.`),!1;for(let t=0;t<i.length;t++){let e=i[t],r=typeof e=="number",o=e>0;if(!r)return Ce(`The paginationPageSizeSelector grid option contains a non-numeric value.
                    Please make sure that all values in the paginationPageSizeSelector array are numbers.`),!1;if(!o)return Ce(`The paginationPageSizeSelector grid option contains a negative number or zero.
                    Please make sure that all values in the paginationPageSizeSelector array are positive.`),!1}return!0}destroy(){this.toggleSelectDisplay(!1),super.destroy()}};g([w("paginationProxy")],xm.prototype,"paginationProxy",2);g([U],xm.prototype,"init",1);var Yd=class extends j{constructor(){super(),this.descriptionContainer=null,this.announceValue=Ji(this.announceValue.bind(this),200)}postConstruct(){let i=this.gos.getDocument(),t=this.descriptionContainer=i.createElement("div");t.classList.add("ag-aria-description-container"),Rf(t,"polite"),Cb(t,"additions text"),yb(t,!0),this.eGridDiv.appendChild(t)}announceValue(i){this.descriptionContainer&&(this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=i)},50))}destroy(){super.destroy();let{descriptionContainer:i}=this;i&&(Zt(i),i.parentElement&&i.parentElement.removeChild(i)),this.descriptionContainer=null,this.eGridDiv=null}};g([w("eGridDiv")],Yd.prototype,"eGridDiv",2);g([U],Yd.prototype,"postConstruct",1);Yd=g([te("ariaAnnouncementService")],Yd);var wf=class{};wf.gridOptions=void 0;function m0(i,t,e){if(!t)return un("No gridOptions provided to createGrid"),{};let r=new YT().create(i,t,o=>{let n=new Ml(i);o.createBean(n)},void 0,e);if(!Object.isFrozen(t)&&!e?.frameworkOverrides){let o="https://ag-grid.com/javascript-data-grid/grid-interface/#grid-api";Object.defineProperty(t,"api",{get:()=>{un(`gridOptions.api is no longer supported. See ${o}.`)},configurable:!0}),Object.defineProperty(t,"columnApi",{get:()=>{un(`gridOptions.columnApi is no longer supported and all methods moved to the grid api. See ${o}.`)},configurable:!0})}return r}var KT=1,YT=class{create(i,t,e,r,o){var n;let s={};wf.gridOptions?(wr(s,wf.gridOptions,!0,!0),s=he(he({},s),t)):s=t;let a=nt.getCoercedGridOptions(s),l=!!a.debug,d=(n=a.gridId)!=null?n:String(KT++),u=this.getRegisteredModules(o,d),c=this.createBeansList(a.rowModelType,u,d),h=this.createProvidedBeans(i,a,o);if(!c){un("Failed to create grid.");return}let p={providedBeanInstances:h,beanClasses:c,debug:l,gridId:d},f=new Sm("Context",()=>p.debug),C=new iE(p,f),b=C.getBean("beans");return this.registerModuleUserComponents(b,u),this.registerStackComponents(b,u),this.registerControllers(b,u),e(C),b.syncService.start(),r&&r(C),C.getBean("gridApi")}registerControllers(i,t){t.forEach(e=>{e.controllers&&e.controllers.forEach(r=>i.ctrlsFactory.register(r))})}registerStackComponents(i,t){let e=this.createAgStackComponentsList(t);i.agStackComponentsRegistry.setupComponents(e)}getRegisteredModules(i,t){let e=i?i.modules:null,r=pt.__getRegisteredModules(t),o=[],n={},s=(a,l,d)=>{(c=>{n[c.moduleName]||(n[c.moduleName]=!0,o.push(c),pt.__register(c,a,d))})(l),l.dependantModules&&l.dependantModules.forEach(c=>s(a,c,d))};return e&&e.forEach(a=>s(!0,a,t)),r&&r.forEach(a=>s(!pt.__isPackageBased(),a,void 0)),o}registerModuleUserComponents(i,t){this.extractModuleEntity(t,r=>r.userComponents?r.userComponents:[]).forEach(r=>{i.userComponentRegistry.registerDefaultComponent(r.componentName,r.componentClass)})}createProvidedBeans(i,t,e){let r=e?e.frameworkOverrides:null;Te(r)&&(r=new wm);let o={gridOptions:t,eGridDiv:i,globalEventListener:e?e.globalEventListener:null,globalSyncEventListener:e?e.globalSyncEventListener:null,frameworkOverrides:r};return e&&e.providedBeanInstances&&Object.assign(o,e.providedBeanInstances),o}createAgStackComponentsList(i){let t=[{componentName:"AgCheckbox",componentClass:Kh},{componentName:"AgRadioButton",componentClass:uw},{componentName:"AgToggleButton",componentClass:n0},{componentName:"AgInputTextField",componentClass:ea},{componentName:"AgInputTextArea",componentClass:yT},{componentName:"AgInputNumberField",componentClass:om},{componentName:"AgInputDateField",componentClass:CT},{componentName:"AgInputRange",componentClass:bT},{componentName:"AgRichSelect",componentClass:dp},{componentName:"AgSelect",componentClass:qh},{componentName:"AgSlider",componentClass:ST},{componentName:"AgGridBody",componentClass:Mo},{componentName:"AgHeaderRoot",componentClass:fT},{componentName:"AgSortIndicator",componentClass:sm},{componentName:"AgPagination",componentClass:Pr},{componentName:"AgPageSizeSelector",componentClass:xm},{componentName:"AgOverlayWrapper",componentClass:NT},{componentName:"AgGroupComponent",componentClass:_T},{componentName:"AgRowContainer",componentClass:wl},{componentName:"AgFakeHorizontalScroll",componentClass:kT},{componentName:"AgFakeVerticalScroll",componentClass:qT},{componentName:"AgAutocomplete",componentClass:RT}],e=this.extractModuleEntity(i,r=>r.agStackComponents?r.agStackComponents:[]);return t=t.concat(e),t}createBeansList(i="clientSide",t,e){let r=t.filter(l=>!l.rowModel||l.rowModel===i),o={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!o[i]){un("Could not find row model for rowModelType = "+i);return}if(!pt.__assertRegistered(o[i],`rowModelType = '${i}'`,e))return;let n=[Oe,gl,vf,jd,ul,We,Sh,Th,$d,hf,ns,hl,kd,bf,Kd,Gd,Nd,ef,Po,nt,An,js,to,Ti,Bs,Hd,Gr,xh,Rd,Ws,ji,Dh,ls,Eh,$s,ss,Fe,Us,vt,Fn,Wd,as,_h,ll,qs,mf,Bd,pl,Md,cl,dl,mn,tf,yf,Ud,fn,fl,Dd,qd,ml,Cf,Ks,xr,Ys,Xs,er,Vd,Ph,Yd,io],s=this.extractModuleEntity(r,l=>l.beans?l.beans:[]);n.push(...s);let a=[];return n.forEach(l=>{a.indexOf(l)<0&&a.push(l)}),a}extractModuleEntity(i,t){return[].concat(...i.map(t))}},v0=class{wrap(i,t,e=[],r){let o=this.createWrapper(i,r);return t.forEach(n=>{this.createMethod(o,n,!0)}),e.forEach(n=>{this.createMethod(o,n,!1)}),o}unwrap(i){return i}createMethod(i,t,e){i.addMethod(t,this.createMethodProxy(i,t,e))}createMethodProxy(i,t,e){return function(){return i.hasMethod(t)?i.callMethod(t,arguments):(e&&console.warn("AG Grid: Framework component is missing the method "+t+"()"),null)}}},Em=class{};Em.CHART_TYPE_TO_SERIES_TYPE={column:"bar",groupedColumn:"bar",stackedColumn:"bar",normalizedColumn:"bar",bar:"bar",groupedBar:"bar",stackedBar:"bar",normalizedBar:"bar",line:"line",scatter:"scatter",bubble:"bubble",pie:"pie",donut:"donut",doughnut:"donut",area:"area",stackedArea:"area",normalizedArea:"area",histogram:"histogram",radarLine:"radar-line",radarArea:"radar-area",nightingale:"nightingale",radialColumn:"radial-column",radialBar:"radial-bar",sunburst:"sunburst",rangeBar:"range-bar",rangeArea:"range-area",boxPlot:"box-plot",treemap:"treemap",heatmap:"heatmap",waterfall:"waterfall"};Em.COMBO_CHART_TYPES=["columnLineCombo","areaColumnCombo","customCombo"];Em.SERIES_GROUP_TYPES=["grouped","stacked","normalized"];var Il=typeof global>"u"?{}:global;Il.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;Il.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;Il.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;Il.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;Il.Node=typeof Node>"u"?{}:Node;Il.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var Dm=class xd{constructor(t,e,r,o,n,s){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=t,this.gos=e,this.eventService=r,this.columnModel=o,this.beans=s,this.selectionService=n,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=xd.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return He.cloneObject(this.allNodesMap)}getRowNode(t){return this.allNodesMap[t]}setRowData(t){if(typeof t=="string"){console.warn("AG Grid: rowData must be an array.");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(t);let e=this.rootNode,r=this.rootNode.sibling;e.childrenAfterFilter=null,e.childrenAfterGroup=null,e.childrenAfterAggFilter=null,e.childrenAfterSort=null,e.childrenMapped=null,e.updateHasChildren(),this.nextId=0,this.allNodesMap={},t?e.allLeafChildren=t.map(o=>this.createNode(o,this.rootNode,xd.TOP_LEVEL)):(e.allLeafChildren=[],e.childrenAfterGroup=[]),r&&(r.childrenAfterFilter=e.childrenAfterFilter,r.childrenAfterGroup=e.childrenAfterGroup,r.childrenAfterAggFilter=e.childrenAfterAggFilter,r.childrenAfterSort=e.childrenAfterSort,r.childrenMapped=e.childrenMapped,r.allLeafChildren=e.allLeafChildren)}updateRowData(t,e){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(t.add);let r={remove:[],update:[],add:[]},o=[];return this.executeRemove(t,r,o),this.executeUpdate(t,r,o),this.executeAdd(t,r),this.updateSelection(o,"rowDataChanged"),e&&He.sortRowNodesByOrder(this.rootNode.allLeafChildren,e),r}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(t){let e={type:m.EVENT_ROW_DATA_UPDATE_STARTED,firstRowData:t?.length?t[0]:null};this.eventService.dispatchEvent(e)}updateSelection(t,e){let r=t.length>0;if(r&&this.selectionService.setNodesSelected({newValue:!1,nodes:t,suppressFinishActions:!0,source:e}),this.selectionService.updateGroupsFromChildrenSelections(e),r){let o={type:m.EVENT_SELECTION_CHANGED,source:e};this.eventService.dispatchEvent(o)}}executeAdd(t,e){var r;let{add:o,addIndex:n}=t;if(He.missingOrEmpty(o))return;let s=o.map(a=>this.createNode(a,this.rootNode,xd.TOP_LEVEL));if(typeof n=="number"&&n>=0){let{allLeafChildren:a}=this.rootNode,l=a.length,d=n;if(this.gos.get("treeData")&&n>0&&l>0){for(let p=0;p<l;p++)if(((r=a[p])==null?void 0:r.rowIndex)==n-1){d=p+1;break}}let c=a.slice(0,d),h=a.slice(d,a.length);this.rootNode.allLeafChildren=[...c,...s,...h]}else this.rootNode.allLeafChildren=[...this.rootNode.allLeafChildren,...s];this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),e.add=s}executeRemove(t,e,r){let{remove:o}=t;if(He.missingOrEmpty(o))return;let n={};o.forEach(s=>{let a=this.lookupRowNode(s);a&&(a.isSelected()&&r.push(a),a.clearRowTopAndRowIndex(),n[a.id]=!0,delete this.allNodesMap[a.id],e.remove.push(a))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(s=>!n[s.id]),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(t,e,r){let{update:o}=t;He.missingOrEmpty(o)||o.forEach(n=>{let s=this.lookupRowNode(n);s&&(s.updateData(n),!s.selectable&&s.isSelected()&&r.push(s),this.setMasterForRow(s,n,xd.TOP_LEVEL,!1),e.update.push(s))})}lookupRowNode(t){let e=this.gos.getCallback("getRowId"),r;if(e){let o=e({data:t,level:0});if(r=this.allNodesMap[o],!r)return console.error(`AG Grid: could not find row id=${o}, data item was not found for this id`),null}else if(r=this.rootNode.allLeafChildren.find(o=>o.data===t),!r)return console.error("AG Grid: could not find data item as object was not found",t),console.error("Consider using getRowId to help the Grid find matching row data"),null;return r||null}createNode(t,e,r){let o=new Ge(this.beans);o.group=!1,this.setMasterForRow(o,t,r,!0);let n=this.gos.get("suppressParentsInRowNodes");return e&&!n&&(o.parent=e),o.level=r,o.setDataAndId(t,this.nextId.toString()),this.allNodesMap[o.id]&&console.warn(`AG Grid: duplicate node id '${o.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[o.id]=o,this.nextId++,o}setMasterForRow(t,e,r,o){if(this.gos.get("treeData"))t.setMaster(!1),o&&(t.expanded=!1);else{if(this.gos.get("masterDetail")){let a=this.gos.get("isRowMaster");a?t.setMaster(a(e)):t.setMaster(!0)}else t.setMaster(!1);if(o){let a=this.columnModel.getRowGroupColumns(),l=a?a.length:0,d=r+l;t.expanded=t.master?this.isExpanded(d):!1}}}isExpanded(t){let e=this.gos.get("groupDefaultExpanded");return e===-1?!0:t<e}};Dm.TOP_LEVEL=0;Dm.ROOT_NODE_ID="ROOT_NODE_ID";var XT=Dm,tr=class extends j{constructor(){super(...arguments),this.onRowHeightChanged_debounced=He.debounce(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}init(){let i=this.refreshModel.bind(this,{step:"group"}),t=!this.gos.get("suppressAnimationFrame"),e=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedListener(this.eventService,m.EVENT_NEW_COLUMNS_LOADED,e),this.addManagedListener(this.eventService,m.EVENT_COLUMN_ROW_GROUP_CHANGED,i),this.addManagedListener(this.eventService,m.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,m.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:"pivot"})),this.addManagedListener(this.eventService,m.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,m.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,m.EVENT_COLUMN_PIVOT_MODE_CHANGED,i),this.addManagedListener(this.eventService,m.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanges.bind(this)),this.addManagedListener(this.eventService,m.EVENT_GRID_READY,()=>this.onGridReady()),this.addPropertyListeners(),this.rootNode=new Ge(this.beans),this.nodeManager=new XT(this.rootNode,this.gos,this.eventService,this.columnModel,this.selectionService,this.beans)}addPropertyListeners(){let i=new Set(["treeData","masterDetail"]),t=new Set(["suppressParentsInRowNodes","groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),e=new Set(["excludeChildrenWhenTreeDataFiltering"]),r=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),o=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),n=new Set(["postSortRows","groupDisplayType","accentedSort"]),s=new Set([]),a=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),l=[...i,...t,...e,...r,...r,...o,...n,...s,...a];this.addManagedPropertyListeners(l,d=>{var u;let c=(u=d.changeSet)==null?void 0:u.properties;if(!c)return;let h=p=>c.some(f=>p.has(f));if(h(i)){this.setRowData(this.rootNode.allLeafChildren.map(p=>p.data));return}if(h(t)){this.refreshModel({step:"group"});return}if(h(e)){this.refreshModel({step:"filter"});return}if(h(r)){this.refreshModel({step:"pivot"});return}if(h(o)){this.refreshModel({step:"aggregate"});return}if(h(n)){this.refreshModel({step:"sort"});return}if(h(s)){this.refreshModel({step:"filter_aggregates"});return}h(a)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){let i=this.gos.get("rowData");i&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(i))}ensureRowHeightsValid(i,t,e,r){let o,n=!1;do{o=!1;let s=this.getRowIndexAtPixel(i),a=this.getRowIndexAtPixel(t),l=Math.max(s,e),d=Math.min(a,r);for(let u=l;u<=d;u++){let c=this.getRow(u);if(c.rowHeightEstimated){let h=this.gos.getRowHeightForNode(c);c.setRowHeight(h.height),o=!0,n=!0}}o&&this.setRowTopAndRowIndex()}while(o);return n}setRowTopAndRowIndex(){let i=this.environment.getDefaultRowHeight(),t=0,e=new Set,r=this.gos.isDomLayout("normal");for(let o=0;o<this.rowsToDisplay.length;o++){let n=this.rowsToDisplay[o];if(n.id!=null&&e.add(n.id),n.rowHeight==null){let s=this.gos.getRowHeightForNode(n,r,i);n.setRowHeight(s.height,s.estimated)}n.setRowTop(t),n.setRowIndex(o),t+=n.rowHeight}return e}clearRowTopAndRowIndex(i,t){let e=i.isActive(),r=n=>{n&&n.id!=null&&!t.has(n.id)&&n.clearRowTopAndRowIndex()},o=n=>{if(r(n),r(n.detailNode),r(n.sibling),n.hasChildren()&&n.childrenAfterGroup){let s=n.level==-1;e&&!s&&!n.expanded||n.childrenAfterGroup.forEach(o)}};o(this.rootNode)}ensureRowsAtPixel(i,t,e=0){let r=this.getRowIndexAtPixel(t),o=this.getRow(r),n=!this.gos.get("suppressAnimationFrame");return o===i[0]?!1:(i.forEach(s=>{He.removeFromArray(this.rootNode.allLeafChildren,s)}),i.forEach((s,a)=>{He.insertIntoArray(this.rootNode.allLeafChildren,s,Math.max(r+e,0)+a)}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:n}),!0)}highlightRowAtPixel(i,t){let e=t!=null?this.getRowIndexAtPixel(t):null,r=e!=null?this.getRow(e):null;if(!r||!i||r===i||t==null){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null);return}let o=this.getHighlightPosition(t,r);this.lastHighlightedRow&&this.lastHighlightedRow!==r&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),r.setHighlighted(o),this.lastHighlightedRow=r}getHighlightPosition(i,t){if(!t){let o=this.getRowIndexAtPixel(i);if(t=this.getRow(o||0),!t)return 1}let{rowTop:e,rowHeight:r}=t;return i-e<r/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;let t=this.rootNode.childrenAfterAggFilter;return t?t.length:0}getTopLevelRowDisplayedIndex(i){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return i;let e=this.rootNode.childrenAfterSort[i];if(this.gos.get("groupHideOpenParents"))for(;e.expanded&&e.childrenAfterSort&&e.childrenAfterSort.length>0;)e=e.childrenAfterSort[0];return e.rowIndex}getRowBounds(i){if(He.missing(this.rowsToDisplay))return null;let t=this.rowsToDisplay[i];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){let i=this.gos.isAnimateRows();this.refreshModel({step:"map",keepRenderedRows:!0,animate:i})}onFilterChanged(i){if(i.afterDataChange)return;let t=this.gos.isAnimateRows(),r=i.columns.length===0||i.columns.some(o=>o.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:r,keepRenderedRows:!0,animate:t})}onSortChanged(){let i=this.gos.isAnimateRows();this.refreshModel({step:"sort",keepRenderedRows:!0,animate:i,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(i){let t=He.missingOrEmpty(i),e=new lp(!1,this.rootNode);return(t||this.gos.get("treeData"))&&e.setInactive(),e}isSuppressModelUpdateAfterUpdateTransaction(i){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")||i.rowNodeTransactions==null)return!1;let t=i.rowNodeTransactions.filter(r=>r.add!=null&&r.add.length>0||r.remove!=null&&r.remove.length>0);return t==null||t.length==0}buildRefreshModelParams(i){let t="group",e={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",sort:"sort",pivot:"pivot"};if(He.exists(i)&&(t=e[i]),He.missing(t)){console.error(`AG Grid: invalid step ${i}, available steps are ${Object.keys(e).join(", ")}`);return}let r=!this.gos.get("suppressAnimationFrame");return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:r}}refreshModel(i){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.shouldRowModelIgnoreRefresh())return;let t=typeof i=="object"&&"step"in i?i:this.buildRefreshModelParams(i);if(!t||this.isSuppressModelUpdateAfterUpdateTransaction(t))return;let e=this.createChangePath(t.rowNodeTransactions);switch(this.isRefreshingModel=!0,t.step){case"group":this.doRowGrouping(t.rowNodeTransactions,t.rowNodeOrder,e,!!t.afterColumnsChanged);case"filter":this.doFilter(e);case"pivot":this.doPivot(e);case"aggregate":this.doAggregate(e);case"filter_aggregates":this.doFilterAggregates(e);case"sort":this.doSort(t.rowNodeTransactions,e);case"map":this.doRowsToDisplay()}let r=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(e,r),this.isRefreshingModel=!1;let o={type:m.EVENT_MODEL_UPDATED,animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack};this.eventService.dispatchEvent(o)}isEmpty(){let i=He.missing(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return He.missing(this.rootNode)||i||!this.columnModel.isReady()}isRowsToRender(){return He.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(i,t){let e=!t,r=!1,o=[],n=this.gos.get("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(s=>{if(r)return;if(e&&(s===t||s===i)&&(r=!0,s.group&&n)){o.push(...s.allLeafChildren);return}if(!e){if(s!==t&&s!==i)return;e=!0}if(!s.group||!n){o.push(s);return}}),o}setDatasource(i){console.error("AG Grid: should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(i){return this.rowsToDisplay[i]}isRowPresent(i){return this.rowsToDisplay.indexOf(i)>=0}getRowIndexAtPixel(i){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let t=0,e=this.rowsToDisplay.length-1;if(i<=0)return 0;if(He.last(this.rowsToDisplay).rowTop<=i)return this.rowsToDisplay.length-1;let o=-1,n=-1;for(;;){let s=Math.floor((t+e)/2),a=this.rowsToDisplay[s];if(this.isRowInPixel(a,i)||(a.rowTop<i?t=s+1:a.rowTop>i&&(e=s-1),o===t&&n===e))return s;o=t,n=e}}isRowInPixel(i,t){let e=i.rowTop,r=i.rowTop+i.rowHeight;return e<=t&&r>t}forEachLeafNode(i){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((t,e)=>i(t,e))}forEachNode(i,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:i,recursionType:0,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(i,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:i,recursionType:1,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(i,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:i,recursionType:2,index:0,includeFooterNodes:t})}forEachPivotNode(i,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:i,recursionType:3,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(i){let{nodes:t,callback:e,recursionType:r,includeFooterNodes:o}=i,{index:n}=i,s=a=>{var l;let d=(l=t[0])==null?void 0:l.parent;if(!d)return;let u=o&&this.gos.getGrandTotalRow(),c=this.gos.getGroupTotalRowCallback(),h=o&&c({node:d});if(d===this.rootNode){u===a&&(d.createFooter(),e(d.sibling,n++));return}h===a&&(d.createFooter(),e(d.sibling,n++))};s("top");for(let a=0;a<t.length;a++){let l=t[a];if(e(l,n++),l.hasChildren()&&!l.footer){let d=null;switch(r){case 0:d=l.childrenAfterGroup;break;case 1:d=l.childrenAfterAggFilter;break;case 2:d=l.childrenAfterSort;break;case 3:d=l.leafGroup?null:l.childrenAfterSort;break}d&&(n=this.recursivelyWalkNodesAndCallback({nodes:[...d],callback:e,recursionType:r,index:n,includeFooterNodes:o}))}}return s("bottom"),n}doAggregate(i){var t;(t=this.aggregationStage)==null||t.execute({rowNode:this.rootNode,changedPath:i})}doFilterAggregates(i){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:i}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(i){let t=this.gos.get("treeData"),e=this.columnModel.isPivotActive(),r=s=>{s&&s.forEach(a=>{let l=()=>{a.expanded=i,r(a.childrenAfterGroup)};if(t){He.exists(a.childrenAfterGroup)&&l();return}if(e){!a.leafGroup&&l();return}a.group&&l()})};this.rootNode&&r(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"});let o=i?"expandAll":"collapseAll",n={type:m.EVENT_EXPAND_COLLAPSE_ALL,source:o};this.eventService.dispatchEvent(n)}doSort(i,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:i,changedPath:t})}doRowGrouping(i,t,e,r){if(this.groupStage){if(i?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:i,rowNodeOrder:t,changedPath:e}):this.groupStage.execute({rowNode:this.rootNode,changedPath:e,afterColumnsChanged:r}),this.gos.get("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",e)){let n={type:m.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"};this.eventService.dispatchEvent(n)}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren();this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:m.EVENT_ROW_COUNT_READY}))}doFilter(i){this.filterStage.execute({rowNode:this.rootNode,changedPath:i})}doPivot(i){var t;(t=this.pivotStage)==null||t.execute({rowNode:this.rootNode,changedPath:i})}getCopyOfNodesMap(){return this.nodeManager.getCopyOfNodesMap()}getRowNode(i){if(typeof i=="string"&&i.indexOf(Ge.ID_PREFIX_ROW_GROUP)==0){let e;return this.forEachNode(r=>{r.id===i&&(e=r)}),e}return this.nodeManager.getRowNode(i)}setRowData(i){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(i),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){let i={type:m.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(i),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(i,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];let e=this.gos.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.executeBatchUpdateRowData()},e)}this.rowDataTransactionBatch.push({rowDataTransaction:i,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();let i=[],t=[],e=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(r=>{let o=this.nodeManager.updateRowData(r.rowDataTransaction,void 0);t.push(o),r.callback&&i.push(r.callback.bind(null,o)),typeof r.rowDataTransaction.addIndex=="number"&&(e=!0)}),this.commonUpdateRowData(t,void 0,e),i.length>0&&window.setTimeout(()=>{i.forEach(r=>r())},0),t.length>0){let r={type:m.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:t};this.eventService.dispatchEvent(r)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(i,t){this.valueCache.onDataChanged();let e=this.nodeManager.updateRowData(i,t),r=typeof i.addIndex=="number";return this.commonUpdateRowData([e],t,r),e}createRowNodeOrder(){if(this.gos.get("suppressMaintainUnsortedOrder"))return;let t={};if(this.rootNode&&this.rootNode.allLeafChildren)for(let e=0;e<this.rootNode.allLeafChildren.length;e++){let r=this.rootNode.allLeafChildren[e];t[r.id]=e}return t}commonUpdateRowData(i,t,e){if(!this.hasStarted)return;let r=!this.gos.get("suppressAnimationFrame");e&&(t=this.createRowNodeOrder());let o={type:m.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(o),this.refreshModel({step:"group",rowNodeTransactions:i,rowNodeOrder:t,keepRenderedRows:!0,keepEditingRows:!0,animate:r})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){let i=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),i&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let i=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);let e=t.detailNode;e&&e.setRowHeight(e.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),i=!0}),i}onGridStylesChanges(){this.columnModel.isAutoRowHeightActive()||this.resetRowHeights()}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}};g([w("columnModel")],tr.prototype,"columnModel",2);g([w("selectionService")],tr.prototype,"selectionService",2);g([w("valueCache")],tr.prototype,"valueCache",2);g([w("beans")],tr.prototype,"beans",2);g([w("filterStage")],tr.prototype,"filterStage",2);g([w("sortStage")],tr.prototype,"sortStage",2);g([w("flattenStage")],tr.prototype,"flattenStage",2);g([gt("groupStage")],tr.prototype,"groupStage",2);g([gt("aggregationStage")],tr.prototype,"aggregationStage",2);g([gt("pivotStage")],tr.prototype,"pivotStage",2);g([gt("filterAggregatesStage")],tr.prototype,"filterAggregatesStage",2);g([U],tr.prototype,"init",1);tr=g([te("rowModel")],tr);var Rh=class extends j{execute(i){let{changedPath:t}=i;this.filterService.filter(t)}};g([w("filterService")],Rh.prototype,"filterService",2);Rh=g([te("filterStage")],Rh);var Xd=class extends j{execute(i){let t=this.sortController.getSortOptions(),e=He.exists(t)&&t.length>0,r=e&&He.exists(i.rowNodeTransactions)&&this.gos.get("deltaSort"),o=t.some(n=>this.gos.isColumnsSortingCoupledToGroup()?n.column.isPrimary()&&n.column.isRowGroupActive():!!n.column.getColDef().showRowGroup);this.sortService.sort(t,e,r,i.rowNodeTransactions,i.changedPath,o)}};g([w("sortService")],Xd.prototype,"sortService",2);g([w("sortController")],Xd.prototype,"sortController",2);Xd=g([te("sortStage")],Xd);var Mh=class extends j{execute(i){let t=i.rowNode,e=[],r=this.beans.columnModel.isPivotMode(),o=r&&t.leafGroup,n=o?[t]:t.childrenAfterSort,s=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(s,n,e,r,0);let a=e.length>0;if(!o&&a&&s.grandTotalRow){t.createFooter();let d=s.grandTotalRow==="top";this.addRowNodeToRowsToDisplay(s,t.sibling,e,0,d)}return e}getFlattenDetails(){let i=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!i&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:i,isGroupMultiAutoColumn:this.gos.isGroupMultiAutoColumn(),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:this.gos.getGrandTotalRow(),groupTotalRow:this.gos.getGroupTotalRowCallback()}}recursivelyAddToRowsToDisplay(i,t,e,r,o){if(!He.missingOrEmpty(t))for(let n=0;n<t.length;n++){let s=t[n],a=s.hasChildren(),l=r&&!a,d=i.groupRemoveSingleChildren&&a&&s.childrenAfterGroup.length===1,u=i.groupRemoveLowestSingleChildren&&a&&s.leafGroup&&s.childrenAfterGroup.length===1,c=r&&s.leafGroup,h=i.hideOpenParents&&s.expanded&&!s.master&&!c;if(!l&&!h&&!d&&!u&&this.addRowNodeToRowsToDisplay(i,s,e,o),!(r&&s.leafGroup)){if(a){let f=d||u;if(s.expanded||f){let C=i.groupTotalRow({node:s});C||s.destroyFooter();let b=f?o:o+1;C==="top"&&(s.createFooter(),this.addRowNodeToRowsToDisplay(i,s.sibling,e,b)),this.recursivelyAddToRowsToDisplay(i,s.childrenAfterSort,e,r,b),C==="bottom"&&(s.createFooter(),this.addRowNodeToRowsToDisplay(i,s.sibling,e,b))}}else if(s.master&&s.expanded){let f=this.createDetailNode(s);this.addRowNodeToRowsToDisplay(i,f,e,o)}}}}addRowNodeToRowsToDisplay(i,t,e,r,o){o?e.unshift(t):e.push(t),t.setUiLevel(i.isGroupMultiAutoColumn?0:r)}createDetailNode(i){if(He.exists(i.detailNode))return i.detailNode;let t=new Ge(this.beans);return t.detail=!0,t.selectable=!1,t.parent=i,He.exists(i.id)&&(t.id="detail_"+i.id),t.data=i.data,t.level=i.level+1,i.detailNode=t,t}};g([w("beans")],Mh.prototype,"beans",2);Mh=g([te("flattenStage")],Mh);var Qd=class extends j{sort(i,t,e,r,o,n){let s=this.gos.get("groupMaintainOrder"),a=this.columnModel.getAllGridColumns().some(h=>h.isRowGroupActive()),l={};e&&r&&(l=this.calculateDirtyNodes(r));let d=this.columnModel.isPivotMode(),u=this.gos.getCallback("postSortRows"),c=h=>{var p;this.pullDownGroupDataForHideOpenParents(h.childrenAfterAggFilter,!0);let f=d&&h.leafGroup;if(s&&a&&!h.leafGroup&&!n){let b=(p=this.columnModel.getRowGroupColumns())==null?void 0:p[h.level+1],x=b?.getSort()===null,S=h.childrenAfterAggFilter.slice(0);if(h.childrenAfterSort&&!x){let R={};h.childrenAfterSort.forEach((I,F)=>{R[I.id]=F}),S.sort((I,F)=>{var L,V;return((L=R[I.id])!=null?L:0)-((V=R[F.id])!=null?V:0)})}h.childrenAfterSort=S}else!t||f?h.childrenAfterSort=h.childrenAfterAggFilter.slice(0):e?h.childrenAfterSort=this.doDeltaSort(h,l,o,i):h.childrenAfterSort=this.rowNodeSorter.doFullSort(h.childrenAfterAggFilter,i);if(h.sibling&&(h.sibling.childrenAfterSort=h.childrenAfterSort),this.updateChildIndexes(h),u){let b={nodes:h.childrenAfterSort};u(b)}};o&&o.forEachChangedNodeDepthFirst(c),this.updateGroupDataForHideOpenParents(o)}calculateDirtyNodes(i){let t={},e=r=>{r&&r.forEach(o=>t[o.id]=!0)};return i&&i.forEach(r=>{e(r.add),e(r.update),e(r.remove)}),t}doDeltaSort(i,t,e,r){let o=i.childrenAfterAggFilter,n=i.childrenAfterSort;if(!n)return this.rowNodeSorter.doFullSort(o,r);let s={},a=[];o.forEach(c=>{t[c.id]||!e.canSkip(c)?a.push(c):s[c.id]=!0});let l=n.filter(c=>s[c.id]),d=(c,h)=>({currentPos:h,rowNode:c}),u=a.map(d).sort((c,h)=>this.rowNodeSorter.compareRowNodes(r,c,h));return this.mergeSortedArrays(r,u,l.map(d)).map(({rowNode:c})=>c)}mergeSortedArrays(i,t,e){let r=[],o=0,n=0;for(;o<t.length&&n<e.length;)this.rowNodeSorter.compareRowNodes(i,t[o],e[n])<0?r.push(t[o++]):r.push(e[n++]);for(;o<t.length;)r.push(t[o++]);for(;n<e.length;)r.push(e[n++]);return r}updateChildIndexes(i){if(He.missing(i.childrenAfterSort))return;let t=i.childrenAfterSort;for(let e=0;e<t.length;e++){let r=t[e],o=e===0,n=e===i.childrenAfterSort.length-1;r.setFirstChild(o),r.setLastChild(n),r.setChildIndex(e)}}updateGroupDataForHideOpenParents(i){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return He.warnOnce("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;let t=e=>{this.pullDownGroupDataForHideOpenParents(e.childrenAfterSort,!1),e.childrenAfterSort.forEach(r=>{r.hasChildren()&&t(r)})};i&&i.executeFromRootNode(e=>t(e))}pullDownGroupDataForHideOpenParents(i,t){!this.gos.get("groupHideOpenParents")||He.missing(i)||i.forEach(e=>{this.columnModel.getGroupDisplayColumns().forEach(o=>{let n=o.getColDef().showRowGroup;if(typeof n!="string"){console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}let s=n,a=this.columnModel.getPrimaryColumn(s);if(a!==e.rowGroupColumn)if(t)e.setGroupValue(o.getId(),void 0);else{let d=e.getFirstChildOfFirstChild(a);d&&e.setGroupValue(o.getId(),d.key)}})})}};g([w("columnModel")],Qd.prototype,"columnModel",2);g([w("rowNodeSorter")],Qd.prototype,"rowNodeSorter",2);Qd=g([te("sortService")],Qd);var Ih=class extends j{filter(i){let t=this.filterManager.isChildFilterPresent();this.filterNodes(t,i)}filterNodes(i,t){let e=(r,o)=>{r.hasChildren()&&i&&!o?r.childrenAfterFilter=r.childrenAfterGroup.filter(n=>{let s=n.childrenAfterFilter&&n.childrenAfterFilter.length>0,a=n.data&&this.filterManager.doesRowPassFilter({rowNode:n});return s||a}):r.childrenAfterFilter=r.childrenAfterGroup,r.sibling&&(r.sibling.childrenAfterFilter=r.childrenAfterFilter)};if(this.doingTreeDataFiltering()){let r=(n,s)=>{if(n.childrenAfterGroup)for(let a=0;a<n.childrenAfterGroup.length;a++){let l=n.childrenAfterGroup[a],d=s||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?r(n.childrenAfterGroup[a],d):e(l,d)}e(n,s)},o=n=>r(n,!1);t.executeFromRootNode(o)}else{let r=o=>e(o,!1);t.forEachChangedNodeDepthFirst(r,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}};g([w("filterManager")],Ih.prototype,"filterManager",2);Ih=g([te("filterService")],Ih);var Qs=class extends j{postConstruct(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){let i=this.gos.exists("getRowId");return this.gos.get("resetRowDataOnUpdate")?!1:i}setRowData(i){let t=this.createTransactionForRowData(i);if(!t)return;let[e,r]=t;this.clientSideRowModel.updateRowData(e,r)}createTransactionForRowData(i){if(He.missing(this.clientSideRowModel)){console.error("AG Grid: ImmutableService only works with ClientSideRowModel");return}let t=this.gos.getCallback("getRowId");if(t==null){console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");return}let e={remove:[],update:[],add:[]},r=this.clientSideRowModel.getCopyOfNodesMap(),n=this.gos.get("suppressMaintainUnsortedOrder")?void 0:{};return He.exists(i)&&i.forEach((s,a)=>{let l=t({data:s,level:0}),d=r[l];n&&(n[l]=a),d?(d.data!==s&&e.update.push(s),r[l]=void 0):e.add.push(s)}),He.iterateObject(r,(s,a)=>{a&&e.remove.push(a.data)}),[e,n]}onRowDataUpdated(){let i=this.gos.get("rowData");i&&(this.isActive()?this.setRowData(i):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(i)))}};g([w("rowModel")],Qs.prototype,"rowModel",2);g([w("rowRenderer")],Qs.prototype,"rowRenderer",2);g([w("selectionService")],Qs.prototype,"selectionService",2);g([U],Qs.prototype,"postConstruct",1);Qs=g([te("immutableService")],Qs);var QT="31.3.4",ZT={version:QT,moduleName:"@ag-grid-community/client-side-row-model",rowModel:"clientSide",beans:[tr,Rh,Xd,Mh,Qd,Ih,Qs]},JT=Object.defineProperty,eP=Object.getOwnPropertyDescriptor,nr=(i,t,e,r)=>{for(var o=r>1?void 0:r?eP(t,e):t,n=i.length-1,s;n>=0;n--)(s=i[n])&&(o=(r?s(t,e,o):s(o))||o);return r&&o&&JT(t,e,o),o},tP=(i,t)=>(e,r)=>t(e,r,i),Zd=class extends pf{constructor(i,t,e){super(i),this.parentCache=t,this.params=e,this.startRow=i*e.blockSize,this.endRow=this.startRow+e.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(i,t,e){He.exists(t)?i.setDataAndId(t,e.toString()):i.setDataAndId(void 0,void 0)}loadFromDatasource(){let i=this.createLoadParams();if(He.missing(this.params.datasource.getRows)){console.warn("AG Grid: datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(i)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(i,t,e){this.rowNodes.forEach((r,o)=>{this.startRow+o<e&&i(r,t.next())})}getLastAccessed(){return this.lastAccessed}getRow(i,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.next());let e=i-this.startRow;return this.rowNodes[e]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let i=0;i<this.params.blockSize;i++){let t=this.startRow+i,e=new Ge(this.beans);e.setRowHeight(this.params.rowHeight),e.uiLevel=0,e.setRowIndex(t),e.setRowTop(this.params.rowHeight*t),this.rowNodes.push(e)}}processServerResult(i){this.rowNodes.forEach((e,r)=>{let o=i.rowData?i.rowData[r]:void 0;!e.id&&e.alreadyRendered&&o&&(this.rowNodes[r]=new Ge(this.beans),this.rowNodes[r].setRowIndex(e.rowIndex),this.rowNodes[r].setRowTop(e.rowTop),this.rowNodes[r].setRowHeight(e.rowHeight),e.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[r],o,this.startRow+r)});let t=i.rowCount!=null&&i.rowCount>=0?i.rowCount:void 0;this.parentCache.pageLoaded(this,t)}destroyRowNodes(){this.rowNodes.forEach(i=>{i.clearRowTopAndRowIndex()})}};nr([w("beans")],Zd.prototype,"beans",2);nr([U],Zd.prototype,"postConstruct",1);nr([ir],Zd.prototype,"destroyRowNodes",1);var Fl=class y0 extends j{constructor(t){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=t.initialRowCount,this.params=t}setBeans(t){this.logger=t.create("InfiniteCache")}getRow(t,e=!1){let r=Math.floor(t/this.params.blockSize),o=this.blocks[r];if(!o){if(e)return;o=this.createBlock(r)}return o.getRow(t)}createBlock(t){let e=this.createBean(new Zd(t,this,this.params));return this.blocks[e.getId()]=e,this.blockCount++,this.purgeBlocksIfNeeded(e),this.params.rowNodeBlockLoader.addBlock(e),e}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(e=>e.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroyAllBlocks(){this.getBlocksInOrder().forEach(t=>this.destroyBlock(t))}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(t,e){this.isAlive()&&(this.logger.log(`onPageLoaded: page = ${t.getId()}, lastRow = ${e}`),this.checkRowCount(t,e),this.onCacheUpdated())}purgeBlocksIfNeeded(t){let e=this.getBlocksInOrder().filter(a=>a!=t),r=(a,l)=>l.getLastAccessed()-a.getLastAccessed();e.sort(r);let o=this.params.maxBlocksInCache>0,n=o?this.params.maxBlocksInCache-1:null,s=y0.MAX_EMPTY_BLOCKS_TO_KEEP-1;e.forEach((a,l)=>{let d=a.getState()===Zd.STATE_WAITING_TO_LOAD&&l>=s,u=o?l>=n:!1;if(d||u){if(this.isBlockCurrentlyDisplayed(a)||this.isBlockFocused(a))return;this.removeBlockFromCache(a)}})}isBlockFocused(t){let e=this.focusService.getFocusCellToUseAfterRefresh();if(!e||e.rowPinned!=null)return!1;let r=t.getStartRow(),o=t.getEndRow();return e.rowIndex>=r&&e.rowIndex<o}isBlockCurrentlyDisplayed(t){let e=t.getStartRow(),r=t.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(e,r)}removeBlockFromCache(t){t&&this.destroyBlock(t)}checkRowCount(t,e){if(typeof e=="number"&&e>=0)this.rowCount=e,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){let o=(t.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<o&&(this.rowCount=o)}}setRowCount(t,e){this.rowCount=t,He.exists(e)&&(this.lastRowIndexKnown=e),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(t){let e=new al;this.getBlocksInOrder().forEach(r=>r.forEachNode(t,e,this.rowCount))}getBlocksInOrder(){let t=(r,o)=>r.getId()-o.getId();return He.getAllValuesInObject(this.blocks).sort(t)}destroyBlock(t){delete this.blocks[t.getId()],this.destroyBean(t),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(t)}onCacheUpdated(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();let t={type:m.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(t)}}destroyAllBlocksPastVirtualRowCount(){let t=[];this.getBlocksInOrder().forEach(e=>{e.getId()*this.params.blockSize>=this.rowCount&&t.push(e)}),t.length>0&&t.forEach(e=>this.destroyBlock(e))}purgeCache(){this.getBlocksInOrder().forEach(t=>this.removeBlockFromCache(t)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(t,e){let r=[],o=-1,n=!1,s=new al;He.missing(t)&&(n=!0);let a=!1;return this.getBlocksInOrder().forEach(d=>{if(!a){if(n&&o+1!==d.getId()){a=!0;return}o=d.getId(),d.forEachNode(u=>{let c=u===t||u===e;(n||c)&&r.push(u),c&&(n=!n)},s,this.rowCount)}}),a||n?[]:r}};Fl.MAX_EMPTY_BLOCKS_TO_KEEP=2;nr([w("rowRenderer")],Fl.prototype,"rowRenderer",2);nr([w("focusService")],Fl.prototype,"focusService",2);nr([tP(0,Zr("loggerFactory"))],Fl.prototype,"setBeans",1);nr([ir],Fl.prototype,"destroyAllBlocks",1);var iP=Fl,vn=class extends j{getRowBounds(i){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*i}}ensureRowHeightsValid(i,t,e,r){return!1}init(){this.gos.isRowModelType("infinite")&&(this.rowHeight=this.gos.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&He.warnOnce("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroyDatasource(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedListener(this.eventService,m.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,m.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,m.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,m.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this)),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=this.gos.getRowHeightAsNumber(),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let i;this.cacheParams?i=this.isSortModelDifferent():i=!0,i&&this.reset()}isSortModelDifferent(){return!He.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(i){this.destroyDatasource(),this.datasource=i,i&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(i,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(i,t):[]}reset(){if(!this.datasource)return;this.gos.getCallback("getRowId")!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}createModelUpdatedEvent(){return{type:m.EVENT_MODEL_UPDATED,newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1}}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:this.gos.getRowHeightAsNumber(),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new al},this.infiniteCache=this.createBean(new iP(this.cacheParams)),this.eventService.dispatchEventOnce({type:m.EVENT_ROW_COUNT_READY});let i=this.createModelUpdatedEvent();this.eventService.dispatchEvent(i)}updateRowHeights(){this.forEachNode(t=>{t.setRowHeight(this.rowHeight),t.setRowTop(this.rowHeight*t.rowIndex)});let i=this.createModelUpdatedEvent();this.eventService.dispatchEvent(i)}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){let i=this.createModelUpdatedEvent();this.eventService.dispatchEvent(i)}getRow(i){if(this.infiniteCache&&!(i>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(i)}getRowNode(i){let t;return this.forEachNode(e=>{e.id===i&&(t=e)}),t}forEachNode(i){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(i)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(i){return i}getRowIndexAtPixel(i){if(this.rowHeight!==0){let t=Math.floor(i/this.rowHeight),e=this.getRowCount()-1;return t>e?e:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(i){return!!this.getRowNode(i.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(i,t){this.infiniteCache&&this.infiniteCache.setRowCount(i,t)}};nr([w("filterManager")],vn.prototype,"filterManager",2);nr([w("sortController")],vn.prototype,"sortController",2);nr([w("selectionService")],vn.prototype,"selectionService",2);nr([w("rowRenderer")],vn.prototype,"rowRenderer",2);nr([w("rowNodeBlockLoader")],vn.prototype,"rowNodeBlockLoader",2);nr([U],vn.prototype,"init",1);nr([ir],vn.prototype,"destroyDatasource",1);vn=nr([te("rowModel")],vn);var rP="31.3.4",oP={version:rP,moduleName:"@ag-grid-community/infinite-row-model",rowModel:"infinite",beans:[vn]},C0=Object.defineProperty,nP=Object.defineProperties,sP=Object.getOwnPropertyDescriptor,aP=Object.getOwnPropertyDescriptors,FC=Object.getOwnPropertySymbols,lP=Object.prototype.hasOwnProperty,dP=Object.prototype.propertyIsEnumerable,zC=(i,t,e)=>t in i?C0(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,b0=(i,t)=>{for(var e in t||(t={}))lP.call(t,e)&&zC(i,e,t[e]);if(FC)for(var e of FC(t))dP.call(t,e)&&zC(i,e,t[e]);return i},w0=(i,t)=>nP(i,aP(t)),Rr=(i,t,e,r)=>{for(var o=r>1?void 0:r?sP(t,e):t,n=i.length-1,s;n>=0;n--)(s=i[n])&&(o=(r?s(t,e,o):s(o))||o);return r&&o&&C0(t,e,o),o},Jd=(i,t,e)=>new Promise((r,o)=>{var n=l=>{try{a(e.next(l))}catch(d){o(d)}},s=l=>{try{a(e.throw(l))}catch(d){o(d)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(n,s);a((e=e.apply(i,t)).next())}),uP=class{setBeans(i){this.beans=i}getFileName(i){let t=this.getDefaultFileExtension();return(i==null||!i.length)&&(i=this.getDefaultFileName()),i.indexOf(".")===-1?`${i}.${t}`:i}getData(i){let t=this.createSerializingSession(i);return this.beans.gridSerializer.serialize(t,i)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},cP=class{constructor(i){this.groupColumns=[];let{columnModel:t,valueService:e,gos:r,processCellCallback:o,processHeaderCallback:n,processGroupHeaderCallback:s,processRowGroupCallback:a}=i;this.columnModel=t,this.valueService=e,this.gos=r,this.processCellCallback=o,this.processHeaderCallback=n,this.processGroupHeaderCallback=s,this.processRowGroupCallback=a}prepare(i){this.groupColumns=i.filter(t=>!!t.getColDef().showRowGroup)}extractHeaderValue(i){let t=this.getHeaderName(this.processHeaderCallback,i);return t??""}extractRowCellValue(i,t,e,r,o){let s=(!this.gos.get("groupHideOpenParents")||o.footer)&&this.shouldRenderGroupSummaryCell(o,i,t)?this.createValueForGroupNode(i,o):this.valueService.getValue(i,o);return this.processCell({accumulatedRowIndex:e,rowNode:o,column:i,value:s,processCellCallback:this.processCellCallback,type:r})}shouldRenderGroupSummaryCell(i,t,e){var r;if(!(i&&i.group))return!1;if(this.groupColumns.indexOf(t)!==-1){if(((r=i.groupData)==null?void 0:r[t.getId()])!=null||this.gos.isRowModelType("serverSide")&&i.group)return!0;if(i.footer&&i.level===-1){let a=t.getColDef();return a==null||a.showRowGroup===!0||a.showRowGroup===this.columnModel.getRowGroupColumns()[0].getId()}}let s=this.gos.isGroupUseEntireRow(this.columnModel.isPivotMode());return e===0&&s}getHeaderName(i,t){return i?i(this.gos.addGridCommonParams({column:t})):this.columnModel.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(i,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:i,node:t}));let e=this.gos.get("treeData"),r=this.gos.get("suppressGroupMaintainValueType"),o=l=>{var d,u;if(e||r)return l.key;let c=(d=l.groupData)==null?void 0:d[i.getId()];return!c||!l.rowGroupColumn||l.rowGroupColumn.getColDef().useValueFormatterForExport===!1?c:(u=this.valueService.formatValue(l.rowGroupColumn,l,c))!=null?u:c},n=t.footer,s=[o(t)];if(!this.gos.isGroupMultiAutoColumn())for(;t.parent;)t=t.parent,s.push(o(t));let a=s.reverse().join(" -> ");return n?`Total ${a}`:a}processCell(i){var t;let{accumulatedRowIndex:e,rowNode:r,column:o,value:n,processCellCallback:s,type:a}=i;return s?{value:(t=s(this.gos.addGridCommonParams({accumulatedRowIndex:e,column:o,node:r,value:n,type:a,parseValue:l=>this.valueService.parseValue(o,r,l,this.valueService.getValue(o,r)),formatValue:l=>{var d;return(d=this.valueService.formatValue(o,r,l))!=null?d:l}})))!=null?t:""}:o.getColDef().useValueFormatterForExport!==!1?{value:n??"",valueFormatted:this.valueService.formatValue(o,r,n)}:{value:n??""}}},hP=class{static download(i,t){let e=document.defaultView||window;if(!e){console.warn("AG Grid: There is no `window` associated with the current `document`");return}let r=document.createElement("a"),o=e.URL.createObjectURL(t);r.setAttribute("href",o),r.setAttribute("download",i),r.style.display="none",document.body.appendChild(r),r.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:e})),document.body.removeChild(r),e.setTimeout(()=>{e.URL.revokeObjectURL(o)},0)}},AC=`\r
`,pP=class extends cP{constructor(i){super(i),this.isFirstLine=!0,this.result="";let{suppressQuotes:t,columnSeparator:e}=i;this.suppressQuotes=t,this.columnSeparator=e}addCustomContent(i){i&&(typeof i=="string"?(/^\s*\n/.test(i)||this.beginNewLine(),i=i.replace(/\r?\n/g,AC),this.result+=i):i.forEach(t=>{this.beginNewLine(),t.forEach((e,r)=>{r!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e.data.value||""),e.mergeAcross&&this.appendEmptyCells(e.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(i,t,e,r){e!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(r)}appendEmptyCells(i){for(let t=1;t<=i;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(i,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(i))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(i,t,e){var r;t!=0&&(this.result+=this.columnSeparator);let o=this.extractRowCellValue(i,t,t,"csv",e);this.result+=this.putInQuotes((r=o.valueFormatted)!=null?r:o.value)}putInQuotes(i){if(this.suppressQuotes)return i;if(i==null)return'""';let t;return typeof i=="string"?t=i:typeof i.toString=="function"?t=i.toString():(console.warn("AG Grid: unknown value type during csv conversion"),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=AC),this.isFirstLine=!1}},ds=class extends uP{postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(i){let t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,i)}export(i){if(this.isExportSuppressed()){console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration.");return}let t=this.getMergedParams(i),e=this.getData(t),r=new Blob(["\uFEFF",e],{type:"text/plain"}),o=typeof t.fileName=="function"?t.fileName(this.gos.getGridCommonParams()):t.fileName;hP.download(this.getFileName(o),r)}exportDataAsCsv(i){this.export(i)}getDataAsCsv(i,t=!1){let e=t?Object.assign({},i):this.getMergedParams(i);return this.getData(e)}getDefaultFileExtension(){return"csv"}createSerializingSession(i){let{columnModel:t,valueService:e,gos:r}=this,{processCellCallback:o,processHeaderCallback:n,processGroupHeaderCallback:s,processRowGroupCallback:a,suppressQuotes:l,columnSeparator:d}=i;return new pP({columnModel:t,valueService:e,gos:r,processCellCallback:o||void 0,processHeaderCallback:n||void 0,processGroupHeaderCallback:s||void 0,processRowGroupCallback:a||void 0,suppressQuotes:l||!1,columnSeparator:d||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};Rr([w("columnModel")],ds.prototype,"columnModel",2);Rr([w("valueService")],ds.prototype,"valueService",2);Rr([w("gridSerializer")],ds.prototype,"gridSerializer",2);Rr([w("gridOptionsService")],ds.prototype,"gos",2);Rr([U],ds.prototype,"postConstruct",1);ds=Rr([te("csvCreator")],ds);var yn=class extends j{serialize(i,t={}){let{allColumns:e,columnKeys:r,skipRowGroups:o}=t,n=this.getColumnsToExport(e,o,r);return He.compose(this.prepareSession(n),this.prependContent(t),this.exportColumnGroups(t,n),this.exportHeaders(t,n),this.processPinnedTopRows(t,n),this.processRows(t,n),this.processPinnedBottomRows(t,n),this.appendContent(t))(i).parse()}processRow(i,t,e,r){let o=t.shouldRowBeSkipped||(()=>!1),n=this.gos.get("groupRemoveSingleChildren"),s=this.gos.get("groupRemoveLowestSingleChildren"),l=t.rowPositions!=null||!!t.onlySelected,d=this.gos.get("groupHideOpenParents")&&!l,u=this.columnModel.isPivotMode()?r.leafGroup:!r.group,c=!!r.footer,h=t.skipRowGroups,p=s&&r.leafGroup,f=r.allChildrenCount===1&&(n||p);if(!u&&!c&&(t.skipRowGroups||f||d)||t.onlySelected&&!r.isSelected()||t.skipPinnedTop&&r.rowPinned==="top"||t.skipPinnedBottom&&r.rowPinned==="bottom"||r.level===-1&&!u&&!c||o(this.gos.addGridCommonParams({node:r})))return;let x=i.onNewBodyRow(r);if(e.forEach((S,R)=>{x.onColumn(S,R,r)}),t.getCustomContentBelowRow){let S=t.getCustomContentBelowRow(this.gos.addGridCommonParams({node:r}));S&&i.addCustomContent(S)}}appendContent(i){return t=>{let e=i.appendContent;return e&&t.addCustomContent(e),t}}prependContent(i){return t=>{let e=i.prependContent;return e&&t.addCustomContent(e),t}}prepareSession(i){return t=>(t.prepare(i),t)}exportColumnGroups(i,t){return e=>{if(!i.skipColumnGroupHeaders){let r=new lb,o=this.displayedGroupCreator.createDisplayedGroups(t,r,null);this.recursivelyAddHeaderGroups(o,e,i.processGroupHeaderCallback)}return e}}exportHeaders(i,t){return e=>{if(!i.skipColumnHeaders){let r=e.onNewHeaderRow();t.forEach((o,n)=>{r.onColumn(o,n,void 0)})}return e}}processPinnedTopRows(i,t){return e=>{let r=this.processRow.bind(this,e,i,t);return i.rowPositions?i.rowPositions.filter(o=>o.rowPinned==="top").sort((o,n)=>o.rowIndex-n.rowIndex).map(o=>this.pinnedRowModel.getPinnedTopRow(o.rowIndex)).forEach(r):this.pinnedRowModel.forEachPinnedTopRow(r),e}}processRows(i,t){return e=>{let r=this.rowModel,o=r.getType(),n=o==="clientSide",s=o==="serverSide",a=!n&&i.onlySelected,l=this.processRow.bind(this,e,i,t),{exportedRows:d="filteredAndSorted"}=i;if(i.rowPositions)i.rowPositions.filter(u=>u.rowPinned==null).sort((u,c)=>u.rowIndex-c.rowIndex).map(u=>r.getRow(u.rowIndex)).forEach(l);else if(this.columnModel.isPivotMode())n?r.forEachPivotNode(l,!0):s?r.forEachNodeAfterFilterAndSort(l,!0):r.forEachNode(l);else if(i.onlySelectedAllPages||a){let u=this.selectionService.getSelectedNodes();this.replicateSortedOrder(u),u.forEach(l)}else d==="all"?r.forEachNode(l):n||s?r.forEachNodeAfterFilterAndSort(l,!0):r.forEachNode(l);return e}}replicateSortedOrder(i){let t=this.sortController.getSortOptions(),e=(r,o)=>{var n,s,a,l;return r.rowIndex!=null&&o.rowIndex!=null?r.rowIndex-o.rowIndex:r.level===o.level?((n=r.parent)==null?void 0:n.id)===((s=o.parent)==null?void 0:s.id)?this.rowNodeSorter.compareRowNodes(t,{rowNode:r,currentPos:(a=r.rowIndex)!=null?a:-1},{rowNode:o,currentPos:(l=o.rowIndex)!=null?l:-1}):e(r.parent,o.parent):r.level>o.level?e(r.parent,o):e(r,o.parent)};i.sort(e)}processPinnedBottomRows(i,t){return e=>{let r=this.processRow.bind(this,e,i,t);return i.rowPositions?i.rowPositions.filter(o=>o.rowPinned==="bottom").sort((o,n)=>o.rowIndex-n.rowIndex).map(o=>this.pinnedRowModel.getPinnedBottomRow(o.rowIndex)).forEach(r):this.pinnedRowModel.forEachPinnedBottomRow(r),e}}getColumnsToExport(i=!1,t=!1,e){let r=this.columnModel.isPivotMode();if(e&&e.length)return this.columnModel.getGridColumns(e);let o=this.gos.get("treeData"),n=[];return i&&!r?n=this.columnModel.getAllGridColumns():n=this.columnModel.getAllDisplayedColumns(),t&&!o&&(n=n.filter(s=>s.getColId()!==rl)),n}recursivelyAddHeaderGroups(i,t,e){let r=[];i.forEach(o=>{let n=o;n.getChildren&&n.getChildren().forEach(s=>r.push(s))}),i.length>0&&i[0]instanceof wi&&this.doAddHeaderHeader(t,i,e),r&&r.length>0&&this.recursivelyAddHeaderGroups(r,t,e)}doAddHeaderHeader(i,t,e){let r=i.onNewHeaderGroupingRow(),o=0;t.forEach(n=>{let s=n,a;e?a=e(this.gos.addGridCommonParams({columnGroup:s})):a=this.columnModel.getDisplayNameForColumnGroup(s,"header");let l=s.getLeafColumns().reduce((d,u,c,h)=>{let p=He.last(d);return u.getColumnGroupShow()==="open"?(!p||p[1]!=null)&&(p=[c],d.push(p)):p&&p[1]==null&&(p[1]=c-1),c===h.length-1&&p&&p[1]==null&&(p[1]=c),d},[]);r.onColumn(s,a||"",o++,s.getLeafColumns().length-1,l)})}};Rr([w("displayedGroupCreator")],yn.prototype,"displayedGroupCreator",2);Rr([w("columnModel")],yn.prototype,"columnModel",2);Rr([w("rowModel")],yn.prototype,"rowModel",2);Rr([w("pinnedRowModel")],yn.prototype,"pinnedRowModel",2);Rr([w("selectionService")],yn.prototype,"selectionService",2);Rr([w("rowNodeSorter")],yn.prototype,"rowNodeSorter",2);Rr([w("sortController")],yn.prototype,"sortController",2);yn=Rr([te("gridSerializer")],yn);var gP="31.3.4",fP={version:gP,moduleName:"@ag-grid-community/csv-export",beans:[ds,yn]};var mP=i=>{let t=i.getHours();return t<<=6,t=t|i.getMinutes(),t<<=5,t=t|i.getSeconds()/2,t},vP=i=>{let t=i.getFullYear()-1980;return t<<=4,t=t|i.getMonth()+1,t<<=5,t=t|i.getDate(),t};function $i(i,t){let e="";for(let r=0;r<t;r++)e+=String.fromCharCode(i&255),i>>>=8;return e}var OC=i=>{if(!i.length)return 0;let t=-1,e=0,r=0,o=0;for(let n=0;n<i.length;n++)e=i[n],r=(t^e)&255,o=yP[r],t=t>>>8^o;return t^-1},LC=i=>i.length?OC(typeof i=="string"?new TextEncoder().encode(i):i):0,yP=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),CP=i=>Jd(void 0,null,function*(){let t=0,e=[],r=new WritableStream({write:s=>{e.push(s),t+=s.length}}),o=new ReadableStream({start:s=>{let a=new FileReader;a.onload=l=>{var d;(d=l.target)!=null&&d.result&&s.enqueue(l.target.result),s.close()},a.readAsArrayBuffer(i)}}),n=new window.CompressionStream("deflate-raw");return yield o.pipeThrough(n).pipeTo(r),{size:t,content:new Blob(e)}}),bP=i=>Jd(void 0,null,function*(){let t=new Blob([i]),{size:e,content:r}=yield CP(t),o=new Uint8Array(yield r.arrayBuffer());return{size:e,content:o}}),{utf8_encode:wP}=He,SP=(i,t)=>Jd(void 0,null,function*(){let{content:e}=i,{size:r,content:o}=e?_0(e):{size:0,content:Uint8Array.from([])},n,s,a=!1;if(i.type==="file"&&o&&r>0){let u=yield bP(o);n=u.content,s=u.size,a=!0}let d=S0(i,a,t,r,o,s);return w0(b0({},d),{content:n||o,isCompressed:a})}),_P=(i,t)=>{let{content:e}=i,{content:r}=e?_0(e):{content:Uint8Array.from([])},o=S0(i,!1,t,r.length,r,void 0);return w0(b0({},o),{content:r,isCompressed:!1})},S0=(i,t,e,r,o,n)=>{let{content:s,path:a,created:l}=i,d=mP(l),u=vP(l),c=LC(o),h=n!==void 0?n:r,p=wP(a),f=p!==a,C="";if(f){let R=$i(1,1)+$i(LC(p),4)+p;C="up"+$i(R.length,2)+R}let b="\0"+(f?"\0\b":"\0\0")+$i(t?8:0,2)+$i(d,2)+$i(u,2)+$i(h?c:0,4)+$i(n??r,4)+$i(r,4)+$i(p.length,2)+$i(C.length,2),x="PK"+b+p+C,S="PK\0"+b+"\0\0\0\0\0\0"+(s?"\0\0\0\0":"\0\0\0")+$i(e,4)+p+C;return{localFileHeader:Uint8Array.from(x,R=>R.charCodeAt(0)),centralDirectoryHeader:Uint8Array.from(S,R=>R.charCodeAt(0))}},xP=(i,t,e)=>{let r="PK\0\0\0\0"+$i(i,2)+$i(i,2)+$i(t,4)+$i(e,4)+"\0\0";return Uint8Array.from(r,o=>o.charCodeAt(0))},EP=i=>{let t=new Uint8Array(i.length);for(let e=0;e<i.length;e++)t[e]=i.charCodeAt(e);return t},_0=i=>{let t;if(typeof i=="string"){let e=atob(i.split(";base64,")[1]);t=EP(e)}else t=i;return{size:t.length,content:t}},x0=class{static addFolders(i){i.forEach(this.addFolder.bind(this))}static addFolder(i){this.folders.push({path:i,created:new Date,isBase64:!1,type:"folder"})}static addFile(i,t,e=!1){this.files.push({path:i,created:new Date,content:e?t:new TextEncoder().encode(t),isBase64:e,type:"file"})}static getZipFile(i="application/zip"){return Jd(this,null,function*(){let t=yield this.buildCompressedFileStream();return this.clearStream(),new Blob([t],{type:i})})}static getUncompressedZipFile(i="application/zip"){let t=this.buildFileStream();return this.clearStream(),new Blob([t],{type:i})}static clearStream(){this.folders=[],this.files=[]}static packageFiles(i){let t=new Uint8Array(0),e=new Uint8Array(0),r=0,o=0;for(let a of i){let{localFileHeader:l,centralDirectoryHeader:d,content:u}=a,c=new Uint8Array(t.length+l.length);c.set(t),c.set(l,t.length),t=c;let h=new Uint8Array(t.length+u.length);h.set(t),h.set(u,t.length),t=h;let p=new Uint8Array(e.length+d.length);p.set(e),p.set(d,e.length),e=p,r+=l.length+u.length,o+=d.length}let n=xP(i.length,o,r),s=new Uint8Array(t.length+e.length+n.length);return s.set(t),s.set(e,t.length),s.set(n,t.length+e.length),s}static buildCompressedFileStream(){return Jd(this,null,function*(){let i=[...this.folders,...this.files],t=[],e=0;for(let r of i){let o=yield SP(r,e),{localFileHeader:n,content:s}=o;t.push(o),e+=n.length+s.length}return this.packageFiles(t)})}static buildFileStream(){let i=[...this.folders,...this.files],t=[],e=0;for(let r of i){let o=_P(r,e),{localFileHeader:n,content:s}=o;t.push(o),e+=n.length+s.length}return this.packageFiles(t)}};x0.folders=[];x0.files=[];pt.__registerModules([ZT,oP,fP],!1,void 0);var E0=(()=>{class i extends wm{constructor(e){super("angular"),this._ngZone=e,this.isRunningWithinTestZone=!1,this.wrapIncoming=(r,o)=>this.runOutside(r,o),this.wrapOutgoing=r=>this.runInsideAngular(r),this.isRunningWithinTestZone=window?.AG_GRID_UNDER_TEST??!!window?.Zone?.AsyncTestZoneSpec,this._ngZone?this.isRunningWithinTestZone?this.runOutside=(r,o)=>o==="resize-observer"?this._ngZone.runOutsideAngular(r):r():this.runOutside=r=>this._ngZone.runOutsideAngular(r):this.runOutside=r=>r()}get shouldWrapOutgoing(){return this._ngZone&&_i.isInAngularZone()}isFrameworkComponent(e){if(!e)return!1;let r=e.prototype;return r&&"agInit"in r}runInsideAngular(e){return this._ngZone?this._ngZone.run(e):e()}runOutsideAngular(e,r){return this.runOutside(e,r)}}return i.\u0275fac=function(e){return new(e||i)(Or(_i))},i.\u0275prov=$r({token:i,factory:i.\u0275fac}),i})(),D0=(()=>{class i extends v0{setViewContainerRef(e,r){this.viewContainerRef=e,this.angularFrameworkOverrides=r}createWrapper(e,r){let o=this.angularFrameworkOverrides,n=this;class s extends Tm{init(d){o.runInsideAngular(()=>{super.init(d),this._componentRef.changeDetectorRef.detectChanges()})}createComponent(){return o.runInsideAngular(()=>n.createComponent(e))}hasMethod(d){return a.getFrameworkComponentInstance()[d]!=null}callMethod(d,u){let c=this.getFrameworkComponentInstance();return o.runInsideAngular(()=>a.getFrameworkComponentInstance()[d].apply(c,u))}addMethod(d,u){a[d]=u}}let a=new s;return a}createComponent(e){return this.viewContainerRef.createComponent(e)}}return i.\u0275fac=(()=>{let t;return function(r){return(t||(t=ay(i)))(r||i)}})(),i.\u0275prov=$r({token:i,factory:i.\u0275fac}),i})(),Tm=class{init(t){this._params=t,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,this._agAwareComponent.agInit(this._params)}getGui(){return this._eGui}getRootElement(){return this._eGui.firstChild}destroy(){this._frameworkComponentInstance&&typeof this._frameworkComponentInstance.destroy=="function"&&this._frameworkComponentInstance.destroy(),this._componentRef&&this._componentRef.destroy()}getFrameworkComponentInstance(){return this._frameworkComponentInstance}},Pm=(()=>{class i{constructor(e,r,o,n){this.viewContainerRef=r,this.angularFrameworkOverrides=o,this.frameworkComponentWrapper=n,this._initialised=!1,this._destroyed=!1,this._fullyReady=Er.resolve(!0),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.columnMenu=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipTrigger=void 0,this.tooltipShowDelay=void 0,this.tooltipHideDelay=void 0,this.tooltipMouseTrack=void 0,this.tooltipShowMode=void 0,this.tooltipInteraction=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.copyGroupHeadersToClipboard=void 0,this.clipboardDelimiter=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressCopySingleCellRanges=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.suppressCutToClipboard=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.dataTypeDefinitions=void 0,this.maintainColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressDragLeaveHidesColumns=void 0,this.suppressRowGroupHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.autoSizeStrategy=void 0,this.components=void 0,this.editType=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.readOnlyEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterMovesDown=void 0,this.enterMovesDownAfterEdit=void 0,this.enterNavigatesVertically=void 0,this.enterNavigatesVerticallyAfterEdit=void 0,this.enableCellEditingOnBackspace=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.excludeHiddenColumnsFromQuickFilter=void 0,this.includeHiddenColumnsInQuickFilter=void 0,this.quickFilterParser=void 0,this.quickFilterMatcher=void 0,this.applyQuickFilterBeforePivotOrAgg=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.enableAdvancedFilter=void 0,this.advancedFilterModel=void 0,this.includeHiddenColumnsInAdvancedFilter=void 0,this.advancedFilterParent=void 0,this.advancedFilterBuilderParams=void 0,this.suppressAdvancedFilterEval=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.enableChartToolPanelsButton=void 0,this.suppressChartToolPanelsButton=void 0,this.chartToolPanelsDef=void 0,this.chartMenuItems=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.context=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressParentsInRowNodes=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressAsyncEvents=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationPageSizeSelector=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotMaxGeneratedColumns=void 0,this.pivotDefaultExpanded=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.alwaysAggregateAtRootLevel=void 0,this.suppressAggAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.removePivotHeaderRowWhenSingleValueColumn=void 0,this.animateRows=void 0,this.enableCellChangeFlash=void 0,this.cellFlashDuration=void 0,this.cellFlashDelay=void 0,this.cellFadeDuration=void 0,this.cellFadeDelay=void 0,this.allowShowChangeAfterFilter=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.suppressRowVirtualisation=void 0,this.rowDragManaged=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.rowDragText=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.suppressGroupMaintainValueType=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupLockGroupColumns=void 0,this.groupAggFiltering=void 0,this.groupIncludeFooter=void 0,this.groupIncludeTotalFooter=void 0,this.groupTotalRow=void 0,this.grandTotalRow=void 0,this.suppressStickyTotalRow=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.groupAllowUnbalanced=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererParams=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.treeData=void 0,this.rowGroupPanelSuppressSort=void 0,this.suppressGroupRowsSticky=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.rowModelType=void 0,this.rowData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideInitialRowCount=void 0,this.suppressServerSideInfiniteScroll=void 0,this.suppressServerSideFullWidthLoadingRow=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortAllLevels=void 0,this.serverSideEnableClientSideSort=void 0,this.serverSideOnlyRefreshFilteredGroups=void 0,this.serverSideFilterAllLevels=void 0,this.serverSideSortOnServer=void 0,this.serverSideFilterOnServer=void 0,this.serverSidePivotResultFieldSeparator=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellFocus=void 0,this.suppressHeaderFocus=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.alwaysMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.gridId=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.functionsPassive=void 0,this.enableGroupEdit=void 0,this.initialState=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processUnpinnedColumns=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processGroupHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.getLocaleText=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.getGroupRowAgg=void 0,this.isGroupOpenByDefault=void 0,this.initialGroupOrderComparator=void 0,this.processPivotResultColDef=void 0,this.processPivotResultColGroupDef=void 0,this.getDataPath=void 0,this.getChildCount=void 0,this.getServerSideGroupLevelParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowId=void 0,this.resetRowDataOnUpdate=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSortRows=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthRow=void 0,this.toolPanelVisibleChanged=new Y,this.toolPanelSizeChanged=new Y,this.columnMenuVisibleChanged=new Y,this.contextMenuVisibleChanged=new Y,this.cutStart=new Y,this.cutEnd=new Y,this.pasteStart=new Y,this.pasteEnd=new Y,this.columnVisible=new Y,this.columnPinned=new Y,this.columnResized=new Y,this.columnMoved=new Y,this.columnValueChanged=new Y,this.columnPivotModeChanged=new Y,this.columnPivotChanged=new Y,this.columnGroupOpened=new Y,this.newColumnsLoaded=new Y,this.gridColumnsChanged=new Y,this.displayedColumnsChanged=new Y,this.virtualColumnsChanged=new Y,this.columnEverythingChanged=new Y,this.columnHeaderMouseOver=new Y,this.columnHeaderMouseLeave=new Y,this.columnHeaderClicked=new Y,this.columnHeaderContextMenu=new Y,this.componentStateChanged=new Y,this.cellValueChanged=new Y,this.cellEditRequest=new Y,this.rowValueChanged=new Y,this.cellEditingStarted=new Y,this.cellEditingStopped=new Y,this.rowEditingStarted=new Y,this.rowEditingStopped=new Y,this.undoStarted=new Y,this.undoEnded=new Y,this.redoStarted=new Y,this.redoEnded=new Y,this.rangeDeleteStart=new Y,this.rangeDeleteEnd=new Y,this.fillStart=new Y,this.fillEnd=new Y,this.filterOpened=new Y,this.filterChanged=new Y,this.filterModified=new Y,this.advancedFilterBuilderVisibleChanged=new Y,this.chartCreated=new Y,this.chartRangeSelectionChanged=new Y,this.chartOptionsChanged=new Y,this.chartDestroyed=new Y,this.cellKeyDown=new Y,this.gridReady=new Y,this.gridPreDestroyed=new Y,this.firstDataRendered=new Y,this.gridSizeChanged=new Y,this.modelUpdated=new Y,this.virtualRowRemoved=new Y,this.viewportChanged=new Y,this.bodyScroll=new Y,this.bodyScrollEnd=new Y,this.dragStarted=new Y,this.dragStopped=new Y,this.stateUpdated=new Y,this.paginationChanged=new Y,this.rowDragEnter=new Y,this.rowDragMove=new Y,this.rowDragLeave=new Y,this.rowDragEnd=new Y,this.columnRowGroupChanged=new Y,this.rowGroupOpened=new Y,this.expandOrCollapseAll=new Y,this.pivotMaxColumnsExceeded=new Y,this.pinnedRowDataChanged=new Y,this.rowDataUpdated=new Y,this.asyncTransactionsFlushed=new Y,this.storeRefreshed=new Y,this.cellClicked=new Y,this.cellDoubleClicked=new Y,this.cellFocused=new Y,this.cellMouseOver=new Y,this.cellMouseOut=new Y,this.cellMouseDown=new Y,this.rowClicked=new Y,this.rowDoubleClicked=new Y,this.rowSelected=new Y,this.selectionChanged=new Y,this.cellContextMenu=new Y,this.rangeSelectionChanged=new Y,this.tooltipShow=new Y,this.tooltipHide=new Y,this.sortChanged=new Y,this.columnRowGroupChangeRequest=new Y,this.columnPivotChangeRequest=new Y,this.columnValueChangeRequest=new Y,this.columnAggFuncChangeRequest=new Y,this._nativeElement=e.nativeElement}ngAfterViewInit(){this.angularFrameworkOverrides.runOutsideAngular(()=>{this.frameworkComponentWrapper.setViewContainerRef(this.viewContainerRef,this.angularFrameworkOverrides);let e=eu.combineAttributesAndGridOptions(this.gridOptions,this);this.gridParams={globalEventListener:this.globalEventListener.bind(this),frameworkOverrides:this.angularFrameworkOverrides,providedBeanInstances:{frameworkComponentWrapper:this.frameworkComponentWrapper},modules:this.modules||[]};let r=m0(this._nativeElement,e,this.gridParams);r&&(this.api=r,this.columnApi=new Us(r));let o=this.gridPreDestroyed;(o.observed??o.observers.length>0)&&console.warn('AG Grid: gridPreDestroyed event listener registered via (gridPreDestroyed)="method($event)" will be ignored! Please assign via gridOptions.gridPreDestroyed and pass to the grid as [gridOptions]="gridOptions"'),this._initialised=!0,this._fullyReady.resolveNow(null,n=>n)})}ngOnChanges(e){this._initialised&&this.angularFrameworkOverrides.runOutsideAngular(()=>{let r={};Object.entries(e).forEach(([o,n])=>{r[o]=n.currentValue}),eu.processOnChange(r,this.api)})}ngOnDestroy(){this._initialised&&(this._destroyed=!0,this.api?.destroy())}isEmitterUsed(e){let o=this[e],n=o?.observed??o?.observers?.length>0,s=`on${e.charAt(0).toUpperCase()}${e.substring(1)}`,a=!!this.gridOptions&&!!this.gridOptions[s];return n||a}globalEventListener(e,r){if(this._destroyed)return;let o=this[e];if(o&&this.isEmitterUsed(e)){let n=()=>this.angularFrameworkOverrides.runInsideAngular(()=>o.emit(r));e==="gridReady"?this._fullyReady.then(()=>n()):n()}}}return i.\u0275fac=function(e){return new(e||i)(ee(Aa),ee(cy),ee(E0),ee(D0))},i.\u0275cmp=ke({type:i,selectors:[["ag-grid-angular"]],inputs:{gridOptions:"gridOptions",modules:"modules",statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:"suppressContextMenu",preventDefaultOnContextMenu:"preventDefaultOnContextMenu",allowContextMenuWithControlKey:"allowContextMenuWithControlKey",columnMenu:"columnMenu",suppressMenuHide:"suppressMenuHide",enableBrowserTooltips:"enableBrowserTooltips",tooltipTrigger:"tooltipTrigger",tooltipShowDelay:"tooltipShowDelay",tooltipHideDelay:"tooltipHideDelay",tooltipMouseTrack:"tooltipMouseTrack",tooltipShowMode:"tooltipShowMode",tooltipInteraction:"tooltipInteraction",popupParent:"popupParent",copyHeadersToClipboard:"copyHeadersToClipboard",copyGroupHeadersToClipboard:"copyGroupHeadersToClipboard",clipboardDelimiter:"clipboardDelimiter",suppressCopyRowsToClipboard:"suppressCopyRowsToClipboard",suppressCopySingleCellRanges:"suppressCopySingleCellRanges",suppressLastEmptyLineOnPaste:"suppressLastEmptyLineOnPaste",suppressClipboardPaste:"suppressClipboardPaste",suppressClipboardApi:"suppressClipboardApi",suppressCutToClipboard:"suppressCutToClipboard",columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",dataTypeDefinitions:"dataTypeDefinitions",maintainColumnOrder:"maintainColumnOrder",suppressFieldDotNotation:"suppressFieldDotNotation",headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",allowDragFromColumnsToolPanel:"allowDragFromColumnsToolPanel",suppressMovableColumns:"suppressMovableColumns",suppressColumnMoveAnimation:"suppressColumnMoveAnimation",suppressDragLeaveHidesColumns:"suppressDragLeaveHidesColumns",suppressRowGroupHidesColumns:"suppressRowGroupHidesColumns",colResizeDefault:"colResizeDefault",suppressAutoSize:"suppressAutoSize",autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:"skipHeaderOnAutoSize",autoSizeStrategy:"autoSizeStrategy",components:"components",editType:"editType",singleClickEdit:"singleClickEdit",suppressClickEdit:"suppressClickEdit",readOnlyEdit:"readOnlyEdit",stopEditingWhenCellsLoseFocus:"stopEditingWhenCellsLoseFocus",enterMovesDown:"enterMovesDown",enterMovesDownAfterEdit:"enterMovesDownAfterEdit",enterNavigatesVertically:"enterNavigatesVertically",enterNavigatesVerticallyAfterEdit:"enterNavigatesVerticallyAfterEdit",enableCellEditingOnBackspace:"enableCellEditingOnBackspace",undoRedoCellEditing:"undoRedoCellEditing",undoRedoCellEditingLimit:"undoRedoCellEditingLimit",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:"suppressCsvExport",defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:"suppressExcelExport",excelStyles:"excelStyles",quickFilterText:"quickFilterText",cacheQuickFilter:"cacheQuickFilter",excludeHiddenColumnsFromQuickFilter:"excludeHiddenColumnsFromQuickFilter",includeHiddenColumnsInQuickFilter:"includeHiddenColumnsInQuickFilter",quickFilterParser:"quickFilterParser",quickFilterMatcher:"quickFilterMatcher",applyQuickFilterBeforePivotOrAgg:"applyQuickFilterBeforePivotOrAgg",excludeChildrenWhenTreeDataFiltering:"excludeChildrenWhenTreeDataFiltering",enableAdvancedFilter:"enableAdvancedFilter",advancedFilterModel:"advancedFilterModel",includeHiddenColumnsInAdvancedFilter:"includeHiddenColumnsInAdvancedFilter",advancedFilterParent:"advancedFilterParent",advancedFilterBuilderParams:"advancedFilterBuilderParams",suppressAdvancedFilterEval:"suppressAdvancedFilterEval",enableCharts:"enableCharts",chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",enableChartToolPanelsButton:"enableChartToolPanelsButton",suppressChartToolPanelsButton:"suppressChartToolPanelsButton",chartToolPanelsDef:"chartToolPanelsDef",chartMenuItems:"chartMenuItems",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:"masterDetail",keepDetailRows:"keepDetailRows",keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:"detailRowAutoHeight",context:"context",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:"valueCache",valueCacheNeverExpires:"valueCacheNeverExpires",enableCellExpressions:"enableCellExpressions",suppressParentsInRowNodes:"suppressParentsInRowNodes",suppressTouch:"suppressTouch",suppressFocusAfterRefresh:"suppressFocusAfterRefresh",suppressAsyncEvents:"suppressAsyncEvents",suppressBrowserResizeObserver:"suppressBrowserResizeObserver",suppressPropertyNamesCheck:"suppressPropertyNamesCheck",suppressChangeDetection:"suppressChangeDetection",debug:"debug",overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:"suppressLoadingOverlay",overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:"suppressNoRowsOverlay",pagination:"pagination",paginationPageSize:"paginationPageSize",paginationPageSizeSelector:"paginationPageSizeSelector",paginationAutoPageSize:"paginationAutoPageSize",paginateChildRows:"paginateChildRows",suppressPaginationPanel:"suppressPaginationPanel",pivotMode:"pivotMode",pivotPanelShow:"pivotPanelShow",pivotMaxGeneratedColumns:"pivotMaxGeneratedColumns",pivotDefaultExpanded:"pivotDefaultExpanded",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:"pivotSuppressAutoColumn",suppressExpandablePivotGroups:"suppressExpandablePivotGroups",functionsReadOnly:"functionsReadOnly",aggFuncs:"aggFuncs",suppressAggFuncInHeader:"suppressAggFuncInHeader",alwaysAggregateAtRootLevel:"alwaysAggregateAtRootLevel",suppressAggAtRootLevel:"suppressAggAtRootLevel",aggregateOnlyChangedColumns:"aggregateOnlyChangedColumns",suppressAggFilteredOnly:"suppressAggFilteredOnly",removePivotHeaderRowWhenSingleValueColumn:"removePivotHeaderRowWhenSingleValueColumn",animateRows:"animateRows",enableCellChangeFlash:"enableCellChangeFlash",cellFlashDuration:"cellFlashDuration",cellFlashDelay:"cellFlashDelay",cellFadeDuration:"cellFadeDuration",cellFadeDelay:"cellFadeDelay",allowShowChangeAfterFilter:"allowShowChangeAfterFilter",domLayout:"domLayout",ensureDomOrder:"ensureDomOrder",enableRtl:"enableRtl",suppressColumnVirtualisation:"suppressColumnVirtualisation",suppressMaxRenderedRowRestriction:"suppressMaxRenderedRowRestriction",suppressRowVirtualisation:"suppressRowVirtualisation",rowDragManaged:"rowDragManaged",suppressRowDrag:"suppressRowDrag",suppressMoveWhenRowDragging:"suppressMoveWhenRowDragging",rowDragEntireRow:"rowDragEntireRow",rowDragMultiRow:"rowDragMultiRow",rowDragText:"rowDragText",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:"embedFullWidthRows",suppressGroupMaintainValueType:"suppressGroupMaintainValueType",groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:"groupMaintainOrder",groupSelectsChildren:"groupSelectsChildren",groupLockGroupColumns:"groupLockGroupColumns",groupAggFiltering:"groupAggFiltering",groupIncludeFooter:"groupIncludeFooter",groupIncludeTotalFooter:"groupIncludeTotalFooter",groupTotalRow:"groupTotalRow",grandTotalRow:"grandTotalRow",suppressStickyTotalRow:"suppressStickyTotalRow",groupSuppressBlankHeader:"groupSuppressBlankHeader",groupSelectsFiltered:"groupSelectsFiltered",showOpenedGroup:"showOpenedGroup",groupRemoveSingleChildren:"groupRemoveSingleChildren",groupRemoveLowestSingleChildren:"groupRemoveLowestSingleChildren",groupHideOpenParents:"groupHideOpenParents",groupAllowUnbalanced:"groupAllowUnbalanced",rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererParams:"groupRowRendererParams",suppressMakeColumnVisibleAfterUnGroup:"suppressMakeColumnVisibleAfterUnGroup",treeData:"treeData",rowGroupPanelSuppressSort:"rowGroupPanelSuppressSort",suppressGroupRowsSticky:"suppressGroupRowsSticky",pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",rowModelType:"rowModelType",rowData:"rowData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:"suppressModelUpdateAfterUpdateTransaction",datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideInitialRowCount:"serverSideInitialRowCount",suppressServerSideInfiniteScroll:"suppressServerSideInfiniteScroll",suppressServerSideFullWidthLoadingRow:"suppressServerSideFullWidthLoadingRow",cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:"purgeClosedRowNodes",serverSideDatasource:"serverSideDatasource",serverSideSortAllLevels:"serverSideSortAllLevels",serverSideEnableClientSideSort:"serverSideEnableClientSideSort",serverSideOnlyRefreshFilteredGroups:"serverSideOnlyRefreshFilteredGroups",serverSideFilterAllLevels:"serverSideFilterAllLevels",serverSideSortOnServer:"serverSideSortOnServer",serverSideFilterOnServer:"serverSideFilterOnServer",serverSidePivotResultFieldSeparator:"serverSidePivotResultFieldSeparator",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:"alwaysShowHorizontalScroll",alwaysShowVerticalScroll:"alwaysShowVerticalScroll",debounceVerticalScrollbar:"debounceVerticalScrollbar",suppressHorizontalScroll:"suppressHorizontalScroll",suppressScrollOnNewData:"suppressScrollOnNewData",suppressScrollWhenPopupsAreOpen:"suppressScrollWhenPopupsAreOpen",suppressAnimationFrame:"suppressAnimationFrame",suppressMiddleClickScrolls:"suppressMiddleClickScrolls",suppressPreventDefaultOnMouseWheel:"suppressPreventDefaultOnMouseWheel",scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",rowMultiSelectWithClick:"rowMultiSelectWithClick",suppressRowDeselection:"suppressRowDeselection",suppressRowClickSelection:"suppressRowClickSelection",suppressCellFocus:"suppressCellFocus",suppressHeaderFocus:"suppressHeaderFocus",suppressMultiRangeSelection:"suppressMultiRangeSelection",enableCellTextSelection:"enableCellTextSelection",enableRangeSelection:"enableRangeSelection",enableRangeHandle:"enableRangeHandle",enableFillHandle:"enableFillHandle",fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:"suppressClearOnFillReduction",sortingOrder:"sortingOrder",accentedSort:"accentedSort",unSortIcon:"unSortIcon",suppressMultiSort:"suppressMultiSort",alwaysMultiSort:"alwaysMultiSort",multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:"suppressMaintainUnsortedOrder",icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:"suppressRowHoverHighlight",suppressRowTransform:"suppressRowTransform",columnHoverHighlight:"columnHoverHighlight",gridId:"gridId",deltaSort:"deltaSort",treeDataDisplayType:"treeDataDisplayType",functionsPassive:"functionsPassive",enableGroupEdit:"enableGroupEdit",initialState:"initialState",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processUnpinnedColumns:"processUnpinnedColumns",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processGroupHeaderForClipboard:"processGroupHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",getLocaleText:"getLocaleText",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",getGroupRowAgg:"getGroupRowAgg",isGroupOpenByDefault:"isGroupOpenByDefault",initialGroupOrderComparator:"initialGroupOrderComparator",processPivotResultColDef:"processPivotResultColDef",processPivotResultColGroupDef:"processPivotResultColGroupDef",getDataPath:"getDataPath",getChildCount:"getChildCount",getServerSideGroupLevelParams:"getServerSideGroupLevelParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowId:"getRowId",resetRowDataOnUpdate:"resetRowDataOnUpdate",processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSortRows:"postSortRows",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthRow:"isFullWidthRow"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",toolPanelSizeChanged:"toolPanelSizeChanged",columnMenuVisibleChanged:"columnMenuVisibleChanged",contextMenuVisibleChanged:"contextMenuVisibleChanged",cutStart:"cutStart",cutEnd:"cutEnd",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",columnHeaderMouseOver:"columnHeaderMouseOver",columnHeaderMouseLeave:"columnHeaderMouseLeave",columnHeaderClicked:"columnHeaderClicked",columnHeaderContextMenu:"columnHeaderContextMenu",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",cellEditRequest:"cellEditRequest",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",undoStarted:"undoStarted",undoEnded:"undoEnded",redoStarted:"redoStarted",redoEnded:"redoEnded",rangeDeleteStart:"rangeDeleteStart",rangeDeleteEnd:"rangeDeleteEnd",fillStart:"fillStart",fillEnd:"fillEnd",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",advancedFilterBuilderVisibleChanged:"advancedFilterBuilderVisibleChanged",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",gridReady:"gridReady",gridPreDestroyed:"gridPreDestroyed",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",stateUpdated:"stateUpdated",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pivotMaxColumnsExceeded:"pivotMaxColumnsExceeded",pinnedRowDataChanged:"pinnedRowDataChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",storeRefreshed:"storeRefreshed",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",tooltipShow:"tooltipShow",tooltipHide:"tooltipHide",sortChanged:"sortChanged",columnRowGroupChangeRequest:"columnRowGroupChangeRequest",columnPivotChangeRequest:"columnPivotChangeRequest",columnValueChangeRequest:"columnValueChangeRequest",columnAggFuncChangeRequest:"columnAggFuncChangeRequest"},standalone:!0,features:[Pc([E0,D0]),Zn,Wr],decls:0,vars:0,template:function(e,r){},encapsulation:2}),i})(),gk=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=jo({type:i}),i.\u0275inj=Wo({imports:[Pm]}),i})();var P0=Qn(Ts());var T0=(()=>{class i{constructor(e,r){this.afs=e,this.aff=r}getUsersByCustomer(e){let r=[];return this.afs.collection("users",n=>n.where("customerId","==",e)).snapshotChanges()}getUsersByRouteCustomer(e,r){let o=[];return this.afs.collection("users",s=>s.where("customerId","==",e)).snapshotChanges()}getUserByRoundCustomer(e,r,o){return console.log("entro"),this.afs.collection("users",s=>s.where("defaultRoute","==",r))}getUserByRouteRound(e,r){let o=new Date;return this.afs.collectionGroup("boardingPasses",s=>s.where("routeId","==",r).where("round","==",e).where("validTo",">=",o))}getUserToken(e){return this.afs.collection("users").doc(e).snapshotChanges()}static{this.\u0275fac=function(r){return new(r||i)(Or(ur),Or(ky))}}static{this.\u0275prov=$r({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function RP(i,t){if(i&1&&N(0,"nz-option",16),i&2){let e=t.$implicit;E("nzLabel",e.name)("nzValue",e.id)}}function MP(i,t){if(i&1&&N(0,"nz-option",16),i&2){let e=t.$implicit;E("nzLabel",e.label)("nzValue",e.id)}}function IP(i,t){if(i&1){let e=re();v(0,"div")(1,"nz-form-label",2),D(2,"Usuarios "),y(),v(3,"nz-select",17),ht("ngModelChange",function(o){H(e);let n=O();return ct(n.selectedUser,o)||(n.selectedUser=o),B(o)}),q("ngModelChange",function(o){H(e);let n=O();return B(n.userSelectedInd(o))}),$(4,MP,1,2,"nz-option",4),y()()}if(i&2){let e=O();_(),E("nzSpan",2),_(2),E("nzMaxTagCount",3),ut("ngModel",e.selectedUser),_(),E("ngForOf",e.userObj)}}function FP(i,t){if(i&1&&N(0,"nz-option",16),i&2){let e=t.$implicit;E("nzLabel",e.label)("nzValue",e.id)}}function zP(i,t){if(i&1){let e=re();v(0,"div")(1,"nz-form-label",2),D(2,"Ejecutores "),y(),v(3,"nz-select",18),ht("ngModelChange",function(o){H(e);let n=O();return ct(n.selectedEjecutor,o)||(n.selectedEjecutor=o),B(o)}),q("ngModelChange",function(o){H(e);let n=O();return B(n.userEjecutorInd(o))}),$(4,FP,1,2,"nz-option",4),y()()}if(i&2){let e=O();_(),E("nzSpan",2),_(2),E("nzMaxTagCount",3),ut("ngModel",e.selectedEjecutor),_(),E("ngForOf",e.ejecutorObj)}}function AP(i,t){if(i&1){let e=re();v(0,"div")(1,"div"),N(2,"nz-divider",12),v(3,"textarea",13),ht("ngModelChange",function(o){H(e);let n=O();return ct(n.newMessageInd,o)||(n.newMessageInd=o),B(o)}),y()(),v(4,"button",14),q("click",function(){H(e);let o=O();return B(o.sendIndMessage())}),N(5,"i",15),D(6,"Enviar Mensaje"),y()()}if(i&2){let e=O();_(3),ut("ngModel",e.newMessageInd)}}function OP(i,t){if(i&1&&N(0,"nz-option",16),i&2){let e=t.$implicit;E("nzLabel",e.name)("nzValue",e.id)}}function LP(i,t){if(i&1&&N(0,"nz-option",16),i&2){let e=t.$implicit;E("nzLabel",e.label)("nzValue",e.id)}}function NP(i,t){if(i&1&&(v(0,"div")(1,"nz-form-label",2),D(2,"Usuarios "),y(),v(3,"nz-select",19),$(4,LP,1,2,"nz-option",4),y()()),i&2){let e=O();_(),E("nzSpan",2),_(2),E("nzMaxTagCount",3),_(),E("ngForOf",e.userObjG)}}function kP(i,t){if(i&1&&N(0,"nz-option",16),i&2){let e=t.$implicit;E("nzLabel",e.label)("nzValue",e.id)}}function VP(i,t){if(i&1&&(v(0,"div")(1,"nz-form-label",2),D(2,"Ejecutores "),y(),v(3,"nz-select",19),$(4,kP,1,2,"nz-option",4),y()()),i&2){let e=O();_(),E("nzSpan",2),_(2),E("nzMaxTagCount",3),_(),E("ngForOf",e.ejecutorObjG)}}var R0=(()=>{class i{constructor(e,r,o){this.afs=e,this.messageCenterService=r,this.message=o,this.customerService=ie(Vy),this.accountsService=ie(gr),this.dashboardService=ie(iC),this.routeService=ie(Kr),this.userService=ie(Jn),this.driverService=ie(nn),this.stopSubscription$=new it,this.isShowDiv=!1,this.isShowDivGroup=!1,this.isShowDivRoutes=!1,this.filllistRoutes=[],this.isShowDivCustomer=!1,this.allChecked=!1,this.indeterminate=!0,this.isShowUsers=!1,this.listofUsersPreview=[],this.InputMessage="",this.newMessage="",this.newMessageInd="",this.newMessageG="",this.listofRoutesByRound=[],this.IdCustomerLive="",this.IdCustomerName="",this.IdCustomerLiveInd="",this.IdCustomerLiveGral="",this.IdCustomerNameInd="",this.listofRecordsAfected=[],this.listRecordsSeg=[],this.arrayPreview=[],this.listOfRound=[],this.listOfSelectedCustomer="",this.userObj=[],this.ejecutorObj=[],this.userObjG=[],this.ejecutorObjG=[],this.accountId$=new it,this.routeId$=new it,this.routes=[],this.ListofUsersIDs=[],this.FinalList=[],this.infoSegment=[],this.authService=ie(bt),this.isEjecutoresSelectedInd=!1,this.isUserSelectedInd=!1,this.isEjecutoresSelectedIndGeneral=!1,this.isUserSelectedIndGeneral=!1,this.isUserSelectedSeg=!1,this.isMessageInd=!1,this.isEjecSelectedSeg=!1,this.selectedCustomer=[],this.selectedCustomerGral=[],this.selectedUser=[],this.selectedEjecutor=[],this.selectedSearchType="",this.selectedSearchTypeG="",this.newMessageSeg="",this.checkOptionsUnit=[{label:"Unidad",value:"Unidad",checked:!1},{label:"Todas las Unidades",value:"allUnit",checked:!1}],this.checkOptionsRoute=[{label:"De 1 a 10 Operaciones",value:"Route",checked:!1},{label:"Todas las Operaciones",value:"allRoutes",checked:!1}],this.chekOptionsRound=[{label:"D\xEDa",value:"D\xEDa",checked:!1},{label:"Tarde",value:"Tarde",checked:!1},{label:"Noche",value:"Noche",checked:!1},{label:"Sencillo",value:"sencillo",checked:!1}],this.selectedValue="",this.authService.user.subscribe(n=>{n&&(this.user=n,this.user!==null&&this.user!==void 0&&this.user.idSegment!==void 0&&this.accountsService.getSegmentLevel(this.user.idSegment).pipe(xe(this.stopSubscription$),ce(s=>{let a=s.payload.id,l=s.payload.data();return me({id:a},l)}),ft(s=>(this.infoSegment=s,this.infoCustomerLoad(),s))).subscribe())})}infoCustomerLoad(){this.infoSegment.nivelNum!==void 0&&this.infoSegment.nivelNum==1?this.accountsService.getAccountsByCustomer(this.user.customerId).pipe(xe(this.stopSubscription$),ce(r=>{let o=r.payload.id,n=r.payload.data();return me({id:o},n)})).subscribe(r=>{this.listOfCustomer=[r],this.listOfCustomerGeneral=[r]}):this.accountsService.getAccounts().pipe(xe(this.stopSubscription$),ce(r=>r.map(o=>{let n=o.payload.doc.id,s=o.payload.doc.data();return me({id:n},s)}))).subscribe(r=>{this.listOfCustomer=r,this.listOfCustomerGeneral=r}),this.accountId$.pipe($o(r=>this.afs.collection("customers").doc(r).collection("routes",o=>o.where("active","==",!0)).valueChanges({idField:"routeId"}))).subscribe(r=>{this.routes=r})}ngOnInit(){}log(e){}updateSingleCheckedRoute(){let e=this.IdCustomerLive;this.filllistRoutes=[],this.listOfRoutes=[],e.length>0?this.accountId$.next(e):(this.checkOptionsRoute.forEach(r=>{r.checked=!1}),this.createMessage("error","No has seleccionado una empresa."))}sendMessage(){this.InputMessage?this.FinalList.length>0?(this.FinalList.forEach(e=>{if(e.token||""){let o={createdAt:new Date,from:"FyXKSXsUbYNtAbWL7zZ66o2f1M92",fromName:"Apps And Informa General",msg:this.InputMessage,requestId:"suhB7YFAh6PYXCRuJhfD",token:e.token,uid:e.uid,email:e.email,title:"Apps And Informa General",body:this.InputMessage},n={timestamp:new Date,title:"Apps And Informa General",email:e.email,body:this.InputMessage,token:e.token,uid:e.uid};this.dashboardService.setChatMessage(o),this.dashboardService.setMessage(n,e.idUser)}else this.createMessage("error","Token Invalido :"+e.uid+"// "+e.name)}),this.createMessage("sucess","Concluyo el envio")):this.createMessage("warning","Se tiene que seleccionar una Operaci\xF3n para envio de mensajes."):this.createMessage("warning","El campo mensaje no puede estar vac\xEDo.")}updateSingleCheckedRound(){this.chekOptionsRound.every(e=>!e.checked)?(this.allChecked=!1,this.indeterminate=!1):this.chekOptionsRound.every(e=>e.checked)?this.allChecked=!0:this.chekOptionsRound.forEach(e=>{e.checked&&this.arrayListAfterRound(e.value)})}updateAllChecked(){this.indeterminate=!1,this.allChecked?(this.chekOptionsRound=this.chekOptionsRound.map(e=>dr(me({},e),{checked:!0})),this.arrayListAfterRound("D\xEDa"),this.arrayListAfterRound("Tarde"),this.arrayListAfterRound("Noche")):(this.chekOptionsRound=this.chekOptionsRound.map(e=>dr(me({},e),{checked:!1})),this.listOfRound=[])}arrayListAfterRound(e){this.checkOptionsRoute.find(n=>n.value=="Route").checked&&(this.isShowDivRoutes=!0),this.listOfRound.find(n=>n.idRound==e)||this.listOfRound.push({idRound:e})}applyFilterSeg(){this.selectedValue==="usuarios"&&this.messageCenterService.getUserByRoundCustomer("",this.listOfSelectedRoutes,this.listOfSelectedCustomer).snapshotChanges().pipe(Bo(1),ce(e=>e.map(r=>{let o=r.payload.doc.data(),n=r.payload.doc.id,l=r.payload.doc.ref.parent.path.split("/")[1];return dr(me({id:n},o),{VuserID:l})}).filter(r=>r.token!=="")),ft(e=>{if(e){this.isUserSelectedSeg=!0,this.isEjecSelectedSeg=!1;let r={route:this.getSelectedRouteName(this.listOfSelectedRoutes),users:e.length};this.listRecordsSeg.push(r),this.isShowUsers=!0,e.forEach(o=>{if(!this.userObj.find(s=>s.routeId==o.routeId&&s.customerId==o.customerId)){let s={active:!0,id:o.uid,label:o.firstName+" "+o.lastName+" // "+o.email,phoneNumber:o.phone,firstName:o.firstName,lastName:o.lastName,email:o.email,displayName:o.displayName,token:o.token};this.userObj.push(s)}})}})).subscribe()}applyFilter(){this.changesOverRoutesSelected(),this.arrayPreview.length>0?(this.listofRecordsAfected=[...this.arrayPreview],this.isShowUsers=!0,this.ListofUsersIDs=[],this.listofRecordsAfected.forEach(e=>{this.messageCenterService.getUserByRouteRound(e.round,e.routeId).snapshotChanges().pipe(Bo(1),ce(r=>r.toString()?r.map(o=>{let n=o.payload.doc.data(),s=o.payload.doc.id,d=o.payload.doc.ref.parent.path.split("/")[1];return dr(me({id:s},n),{VuserID:d})}):!1),ft(r=>{r&&this.userFillFinal(r)})).subscribe()})):this.createMessage("warning","No se ha seleccionado un filtro a agregar, favor de validar.")}removeRecord(e){this.listofRecordsAfected.splice(e,1),this.listofRecordsAfected=[...this.listofRecordsAfected]}getSelectedRouteName(e){let r=this.routes.find(o=>o.routeId===e);return r?r.name:void 0}changesOverRoutesSelected(){if(this.checkOptionsRoute.find(r=>r.value=="Route").checked){let r=this.listOfSelectedRoutes,n=(0,P0.filter)(this.routes,s=>s.routeId==this.listOfSelectedRoutes)[0];n&&(this.listOfRound.length>0?this.listOfRound.forEach(s=>{this.listofRecordsAfected.find(l=>l.routeId==r&&l.customerId==n.customerId&&l.round==s.idRound)||this.arrayPreview.push({customerName:n.description,routeId:r,customerId:n.customerId,round:s.idRound,routeName:n.name})}):this.createMessage("warning","No se ha seleccionado un turno a elegir, favor de validar"))}else this.routes.forEach(r=>{this.listOfRound.length>0?this.listOfRound.forEach(o=>{this.listofRecordsAfected.find(s=>s.routeId==r.routeId&&s.customerId==r.customerId&&s.round==o.idRound)?this.createMessage("warning","Ya existe un registro con este criterio"):this.arrayPreview.push({customerName:r.description,routeId:r.routeId,customerId:r.customerId,round:o.idRound,routeName:r.name})}):this.createMessage("warning","No se ha seleccionado un turno a elegir, favor de validar")})}userFillFinal(e){e.forEach(r=>{this.ListofUsersIDs.find(n=>n.idUser==r.VuserID&&n.round==r.round)||this.ListofUsersIDs.push({idUser:r.VuserID,routeId:r.routeId,customer_id:r.customer_id,round:r.round})}),this.ListofUsersIDs.forEach(r=>{this.customerService.getUser(r.idUser).valueChanges().subscribe(o=>{this.FinalList.find(s=>s.token==o.token&&s.uid==o.uid)||this.FinalList.push({token:o.token,uid:o.uid,email:o.email,idUser:r.idUser,displayName:r.displayName})})})}ngOnDestroy(){this.stopSubscription$.next(!1),this.stopSubscription$.complete(),this.accountsSubscription&&this.accountsSubscription.unsubscribe()}sendGeneralMessage(){this.isUserSelectedIndGeneral?this.newMessageG!=""?(this.userObjG.forEach(e=>{let r={createdAt:new Date,from:"FyXKSXsUbYNtAbWL7zZ66o2f1M92",fromName:"Apps And Informa General",msg:this.newMessageG,requestId:"suhB7YFAh6PYXCRuJhfD",token:e.token,uid:e.id,email:e.email,title:"Apps And Informa General",body:this.newMessageG},o={timestamp:new Date,title:"Apps And Informa General",email:e.email,body:this.newMessageG,token:e.token,uid:e.id};this.dashboardService.setChatMessage(r),this.dashboardService.setMessage(o,e.id)}),this.createMessage("sucess","El mensaje se a enviado a todos los destinatarios")):this.createMessage("warning","El campo mensaje no puede estar vac\xEDo."):this.newMessageG!=""?(this.ejecutorObjG.forEach(e=>{let r={createdAt:new Date,from:"FyXKSXsUbYNtAbWL7zZ66o2f1M92",fromName:"Apps And Informa General",msg:this.newMessageG,requestId:"suhB7YFAh6PYXCRuJhfD",token:e.token,uid:e.id,email:e.email,title:"Apps And Informa General",body:this.newMessageG},o={timestamp:new Date,title:"Apps And Informa General",email:e.email,body:this.newMessageG,token:e.token,uid:e.id};this.dashboardService.setChatMessage(r),this.dashboardService.setMessage(o,e.id)}),this.createMessage("sucess","Se a enviado el mensaje a todos los destinatarios"),this.newMessageG=""):this.createMessage("warning","El campo mensaje no puede estar vac\xEDo."),this.newMessageG=""}sendIndMessage(){if(this.isUserSelectedInd){let e=this.userObj.find(r=>r.id===this.selectedUser);if(this.newMessageInd!=""){let r={createdAt:new Date,from:"FyXKSXsUbYNtAbWL7zZ66o2f1M92",fromName:"Apps And Informa General",msg:this.newMessageInd,requestId:"suhB7YFAh6PYXCRuJhfD",token:e.token,uid:e.id,email:e.email,title:"Apps And Informa General",body:this.newMessageInd},o={timestamp:new Date,title:"Apps And Informa General",email:e.email,body:this.newMessageInd,token:e.token,uid:e.id};this.dashboardService.setChatMessage(r),this.dashboardService.setMessage(o,e.id),this.createMessage("success","El mensaje fue enviado con \xE9xito."),this.newMessageInd=""}else this.createMessage("warning","El campo mensaje no puede estar vac\xEDo.")}else{let e=this.ejecutorObj.find(r=>r.id===this.selectedEjecutor);if(this.newMessageInd!=""){let r={createdAt:new Date,from:"FyXKSXsUbYNtAbWL7zZ66o2f1M92",fromName:"Apps And Informa General",msg:this.newMessageInd,requestId:"suhB7YFAh6PYXCRuJhfD",token:e.token,uid:e.id,email:e.email,title:"Apps And Informa General",body:this.newMessageInd},o={timestamp:new Date,title:"Apps And Informa General",email:e.email,body:this.newMessageInd,token:e.token,uid:e.id};this.dashboardService.setChatMessage(r),this.dashboardService.setMessage(o,e.id),this.createMessage("success","El mensaje fue enviado con \xE9xito.")}else this.createMessage("warning","El campo mensaje no puede estar vac\xEDo.")}this.newMessageInd=""}sendSeg(){this.isUserSelectedSeg?this.newMessageSeg!=""?(this.userObj.forEach(e=>{let r={createdAt:new Date,from:"FyXKSXsUbYNtAbWL7zZ66o2f1M92",fromName:"Apps And Informa General",msg:this.newMessageSeg,requestId:"suhB7YFAh6PYXCRuJhfD",token:e.token,uid:e.id,email:e.email,title:"Apps And Informa General",body:this.newMessageSeg},o={timestamp:new Date,title:"Apps And Informa General",email:e.email,body:this.newMessageSeg,token:e.token,uid:e.id};this.dashboardService.setChatMessage(r),this.dashboardService.setMessage(o,e.id)}),this.createMessage("sucess","El mensaje se a enviado a todos los destinatarios")):this.createMessage("warning","El campo mensaje no puede estar vac\xEDo."):this.newMessageSeg!=""?(this.ejecutorObjG.forEach(e=>{let r={createdAt:new Date,from:"FyXKSXsUbYNtAbWL7zZ66o2f1M92",fromName:"Apps And Informa General",msg:this.newMessageSeg,requestId:"suhB7YFAh6PYXCRuJhfD",token:e.token,uid:e.id,email:e.email,title:"Apps And Informa General",body:this.newMessageSeg},o={timestamp:new Date,title:"Apps And Informa General",email:e.email,body:this.newMessageSeg,token:e.token,uid:e.id};this.dashboardService.setChatMessage(r),this.dashboardService.setMessage(o,e.id)}),this.createMessage("sucess","Se a enviado el mensaje a todos los destinatarios"),this.newMessageG=""):this.createMessage("warning","El campo mensaje no puede estar vac\xEDo."),this.newMessageG=""}changesOverClient(e){this.listOfRound=[],this.IdCustomerLive=e,this.chekOptionsRound.forEach(r=>{r.checked=!1}),this.listofRecordsAfected.length<0&&(this.isShowUsers=!1),this.listOfUsers=[],this.listofUsersPreview=[],this.isShowDivRoutes=!1,this.updateSingleCheckedRoute()}changesOverClientGral(e){this.IdCustomerLiveGral=e}changesOverClientInd(e){this.IdCustomerLiveInd=e}userSelectedInd(e){this.isMessageInd=!0,this.selectedUser=e}userEjecutorInd(e){this.isMessageInd=!0,this.selectedEjecutor=e}selectedCriteriaG(e){e=="usuarios"?(this.isUserSelectedIndGeneral=!0,this.isEjecutoresSelectedIndGeneral=!1,this.accountsSubscription=this.userService.getUserByAccount(this.IdCustomerLiveGral).subscribe(r=>{r.forEach(o=>{let n=o.payload.doc.data();if(n.token!=""){let s={active:!0,id:n.uid,label:n.firstName+" "+n.lastName+" // "+n.email,phoneNumber:n.phoneNumber,firstName:n.firstName,lastName:n.lastName,email:n.email,displayName:n.displayName,token:n.token};this.userObjG.push(s)}})})):(this.isEjecutoresSelectedIndGeneral=!0,this.isUserSelectedIndGeneral=!1,this.accountsSubscription=this.driverService.getDriversByCustomer(this.IdCustomerLiveGral).subscribe(r=>{r.forEach(o=>{let n=o.payload.doc.data();if(n.token!=""){let s={active:!0,id:n.uid,label:n.firstName+" "+n.lastName+" // "+n.email,phoneNumber:n.phone,firstName:n.firstName,lastName:n.lastName,email:n.email,displayName:n.displayName,token:n.token};this.ejecutorObjG.push(s)}})}))}selectedCriteriaSeg(e){}selectedCriteria(e){e=="usuarios"?(this.isUserSelectedInd=!0,this.isUserSelectedSeg=!0,this.isEjecSelectedSeg=!1,this.isShowUsers=!0,this.isEjecutoresSelectedInd=!1,this.accountsSubscription=this.userService.getUserByAccount(this.listOfSelectedCustomer).subscribe(r=>{r.forEach(o=>{let n=o.payload.doc.data();if(n.token!==""&&!this.userObj.some(a=>a.id===n.uid)){let a={active:!0,id:n.uid,label:`${n.firstName} ${n.lastName} // ${n.email}`,phoneNumber:n.phoneNumber,firstName:n.firstName,lastName:n.lastName,email:n.email,displayName:n.displayName,token:n.token};this.userObj.push(a)}})})):(this.isEjecutoresSelectedInd=!0,this.isUserSelectedSeg=!1,this.isEjecSelectedSeg=!0,this.isUserSelectedInd=!1,this.isShowUsers=!1,this.accountsSubscription=this.driverService.getDriversByCustomer(this.IdCustomerLiveInd).subscribe(r=>{r.forEach(o=>{let n=o.payload.doc.data();if(n.token!==""&&!this.ejecutorObj.some(a=>a.id===n.uid)){let a={active:!0,id:n.uid,label:`${n.firstName} ${n.lastName} // ${n.email}`,phoneNumber:n.phone,firstName:n.firstName,lastName:n.lastName,email:n.email,displayName:n.displayName,token:n.token};this.ejecutorObj.push(a)}})}))}createMessage(e,r){this.message.create(e,r)}Cancel(){this.isUserSelectedInd=!1,this.isEjecutoresSelectedInd=!1,this.listOfSelectedCustomer="",this.isShowDivRoutes=!1,this.isShowUsers=!1,this.listOfUsers=[],this.listofUsersPreview=[],this.chekOptionsRound.forEach(e=>{e.checked=!1}),this.arrayPreview=[],this.checkOptionsRoute.forEach(e=>{e.checked=!1}),this.ListofUsersIDs=[],this.listOfRound=[],this.InputMessage="",this.isMessageInd=!1}static{this.\u0275fac=function(r){return new(r||i)(ee(ur),ee(T0),ee(Mt))}}static{this.\u0275cmp=ke({type:i,selectors:[["app-shared-messageCenter"]],decls:47,vars:21,consts:[[3,"nzSelectedIndex"],["nzTitle","Individual"],["nzFor","label",3,"nzSpan"],["nzPlaceHolder","Selecciona una empresa",2,"width","250px",3,"ngModelChange","ngModel","nzMaxTagCount"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzPlaceHolder","Selecciona un tipo de Busqueda",2,"width","250px",3,"ngModelChange","ngModel","nzMaxTagCount"],["nzValue","ejecutores","nzLabel","Ejecutores"],["nzValue","usuarios","nzLabel","Usuarios"],[4,"ngIf"],["nzTitle","General"],["nzPlaceHolder","Selecciona una empresa",2,"width","250px",3,"ngModelChange","nzMaxTagCount","ngModel"],["nzPlaceHolder","Selecciona un tipo de Busqueda",2,"width","250px",3,"ngModelChange","nzMaxTagCount","ngModel"],["nzPlain","","nzText","Mensaje"],["rows","4","nz-input","","placeholder","Mensaje",3,"ngModelChange","ngModel"],["nz-button","",1,"m-r-10",2,"background-color","#4F6F57","color","#f6f3ea",3,"click"],["nz-icon","","nzType","plus"],[3,"nzLabel","nzValue"],["nzPlaceHolder","Selecciona un usuario",2,"width","70%",3,"ngModelChange","nzMaxTagCount","ngModel"],["nzPlaceHolder","Selecciona un ejecutor",2,"width","70%",3,"ngModelChange","nzMaxTagCount","ngModel"],[2,"width","70%",3,"nzMaxTagCount"]],template:function(r,o){r&1&&(v(0,"div")(1,"nz-tabset",0)(2,"nz-tab",1)(3,"div")(4,"p"),D(5,"Nota: Los registros encontrados solo se muestran si cuentan con un token. "),N(6,"br"),D(7," Para obtenerlo, es necesario que la cuenta tenga la aplicacion instalada en su telefono y haya iniciado sessi\xF3n. "),y()(),v(8,"div")(9,"nz-form-label",2),D(10,"Empresa "),y(),v(11,"nz-select",3),ht("ngModelChange",function(s){return ct(o.selectedCustomer,s)||(o.selectedCustomer=s),s}),q("ngModelChange",function(s){return o.changesOverClientInd(s)}),$(12,RP,1,2,"nz-option",4),y()(),v(13,"div")(14,"nz-form-label",2),D(15," Tipo Busqueda "),y(),v(16,"nz-select",5),ht("ngModelChange",function(s){return ct(o.selectedSearchType,s)||(o.selectedSearchType=s),s}),q("ngModelChange",function(s){return o.selectedCriteria(s)}),N(17,"nz-option",6)(18,"nz-option",7),y()(),$(19,IP,5,4,"div",8)(20,zP,5,4,"div",8)(21,AP,7,1,"div",8),y(),v(22,"nz-tab",9)(23,"div")(24,"nz-form-label",2),D(25,"Empresa "),y(),v(26,"nz-select",10),ht("ngModelChange",function(s){return ct(o.selectedCustomerGral,s)||(o.selectedCustomerGral=s),s}),q("ngModelChange",function(s){return o.changesOverClientGral(s)}),$(27,OP,1,2,"nz-option",4),y()(),v(28,"div")(29,"nz-form-label",2),D(30," Tipo Busqueda "),y(),v(31,"nz-select",11),ht("ngModelChange",function(s){return ct(o.selectedSearchTypeG,s)||(o.selectedSearchTypeG=s),s}),q("ngModelChange",function(s){return o.selectedCriteriaG(s)}),N(32,"nz-option",6)(33,"nz-option",7),y()(),v(34,"div")(35,"p"),D(36,"Nota: Los registros encontrados solo se muestran si cuentan con un token. "),N(37,"br"),D(38," Se enviar\xE1 el mensaje a todos los miembros del listado encontrados. "),y()(),$(39,NP,5,3,"div",8)(40,VP,5,3,"div",8),v(41,"div"),N(42,"nz-divider",12),v(43,"textarea",13),ht("ngModelChange",function(s){return ct(o.newMessageG,s)||(o.newMessageG=s),s}),y()(),v(44,"button",14),q("click",function(){return o.sendGeneralMessage()}),N(45,"i",15),D(46,"Enviar Mensaje"),y()()()()),r&2&&(_(),E("nzSelectedIndex",0),_(8),E("nzSpan",4),_(2),ut("ngModel",o.selectedCustomer),E("nzMaxTagCount",3),_(),E("ngForOf",o.listOfCustomer),_(2),E("nzSpan",4),_(2),ut("ngModel",o.selectedSearchType),E("nzMaxTagCount",3),_(3),E("ngIf",o.isUserSelectedInd),_(),E("ngIf",o.isEjecutoresSelectedInd),_(),E("ngIf",o.isMessageInd),_(3),E("nzSpan",4),_(2),E("nzMaxTagCount",3),ut("ngModel",o.selectedCustomerGral),_(),E("ngForOf",o.listOfCustomerGeneral),_(2),E("nzSpan",4),_(2),E("nzMaxTagCount",3),ut("ngModel",o.selectedSearchTypeG),_(8),E("ngIf",o.isUserSelectedIndGeneral),_(),E("ngIf",o.isEjecutoresSelectedIndGeneral),_(3),ut("ngModel",o.newMessageG))},dependencies:[At,Dt,Tt,Lt,Ei,Gi,Qc,Vt,Nt,kt,yr,Cr,Vi,Ot,jr,Xo,Yo]})}}return i})();var BP=["map"],$P=()=>({x:"600px"});function WP(i,t){if(i&1&&(v(0,"nz-option",41),D(1),y()),i&2){let e=t.$implicit;E("nzLabel",e.name)("nzValue",e.id),_(),Et(" ",e.name," ")}}function jP(i,t){if(i&1&&(v(0,"div")(1,"nz-row",53)(2,"nz-col",54),D(3),y(),v(4,"nz-col",55),D(5),y()()()),i&2){let e=t.$implicit;_(2),E("nzSpan",18),_(),Et(" ",e.key," "),_(),E("nzSpan",6),_(),gd(" ",e.value," usuario",e.value!==1?"s":""," ")}}function UP(i,t){if(i&1&&(v(0,"div",50)(1,"nz-row",51)(2,"nz-col",17),D(3," Usuarios por ruta: "),y(),v(4,"nz-col",44),D(5," Cantidad "),y()(),N(6,"nz-divider",52),$(7,jP,6,5,"div",48),Lr(8,"keyvalue"),y()),i&2){let e=O().$implicit;_(2),E("nzSpan",18),_(2),E("nzSpan",6),_(3),E("ngForOf",Tg(8,3,e.routeCounts))}}function qP(i,t){if(i&1&&(v(0,"tr")(1,"td"),D(2),y(),v(3,"td"),D(4),y(),v(5,"td"),D(6),y(),v(7,"td"),D(8),y(),v(9,"td"),D(10),y()()),i&2){let e=t.$implicit;_(2),J(e.firstName),_(2),J(e.lastName),_(2),J(e.email),_(2),J(e.defaultRoute),_(2),J(e.turno)}}function KP(i,t){if(i&1){let e=re();v(0,"nz-card",42)(1,"nz-row",43)(2,"nz-col",17)(3,"strong"),D(4,"Fecha:"),y(),D(5),y(),v(6,"nz-col",44)(7,"strong"),D(8),y()(),v(9,"nz-col",44)(10,"button",45),q("click",function(){let o=H(e).$implicit,n=O();return B(n.exportToExcel(o))}),D(11," Exportar "),y()()(),$(12,UP,9,5,"div",46),v(13,"nz-table",47)(14,"thead")(15,"tr")(16,"th"),D(17,"Nombre"),y(),v(18,"th"),D(19,"Apellido"),y(),v(20,"th"),D(21,"Email"),y(),v(22,"th"),D(23,"Ruta"),y(),v(24,"th"),D(25,"Turno"),y()()(),v(26,"tbody"),$(27,qP,11,5,"tr",48),Lr(28,"slice"),y()(),v(29,"nz-pagination",49),ht("nzPageIndexChange",function(o){H(e);let n=O();return ct(n.pageIndex,o)||(n.pageIndex=o),B(o)}),y()()}if(i&2){let e=t.$implicit,r=O();E("nzTitle","Desglose "+e.date),_(2),E("nzSpan",12),_(3),Et(" ",e.date," "),_(),E("nzSpan",6),_(2),Et("",e.count," usuarios"),_(),E("nzSpan",6),_(3),E("ngIf",e.routeCounts),_(),E("nzData",e.users)("nzFrontPagination",!0)("nzPageSize",5)("nzScroll",Na(24,$P))("nzBordered",!0)("nzSize","middle"),_(14),E("ngForOf",yy(28,20,e.users,(r.pageIndex-1)*r.pageSize,r.pageIndex*r.pageSize)),_(2),E("nzPageSize",r.pageSize)("nzTotal",e.users.length),ut("nzPageIndex",r.pageIndex),E("nzSize","small")("nzShowQuickJumper",!0)("nzShowSizeChanger",!1)}}function YP(i,t){if(i&1&&(v(0,"nz-option",41),D(1),y()),i&2){let e=t.$implicit;E("nzLabel",e.name)("nzValue",e.id),_(),Et(" ",e.name," ")}}function XP(i,t){if(i&1&&(v(0,"nz-option",41),N(1,"i",56),D(2),y()),i&2){let e=t.$implicit;E("nzLabel",e.name)("nzValue",e.routeId),_(2),Et(" ",e.name,"")}}function QP(i,t){if(i&1&&(v(0,"nz-option",41),N(1,"i",56),D(2),y()),i&2){let e=t.$implicit;E("nzLabel",e.driver)("nzValue",e.driverId),_(2),Et(" ",e.driver,"")}}function ZP(i,t){if(i&1&&N(0,"map-marker",32),i&2){let e=t.$implicit,r=O();E("position",e)("options",r.markerOptions)}}function JP(i,t){if(i&1&&(v(0,"div"),N(1,"ag-grid-angular",57),y()),i&2){let e=O();_(),E("rowData",e.rowData)("columnDefs",e.columnDefs)("animateRows",!0)("pagination",!0)("sideBar",!0)}}var Kk=(()=>{class i{constructor(e,r,o,n,s){this.platformId=e,this.notification=r,this.afs=o,this.fb=n,this.zone=s,this.customerIdSelected="",this.customersList=[],this.visible=!1,this.vMessage=!1,this.lat=37.75,this.lng=-122.41,this.loading=!1,this.center={lat:37.75,lng:-122.41},this.markerPositions=[],this.markerOptions={icon:"/assets/icon/bluePointer.png"},this.mapOptions={zoomControl:!0,scrollwheel:!1,disableDoubleClickZoom:!1,panControl:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1},this.vertices=[],this.accountsList=[],this.driversList=[],this.stopSubscription$=new it,this.customerName="Empresa",this.infoSegment=[],this.fillRoutes=!1,this.fillCustomer=!1,this.sumD="0",this.sumT="0",this.sumN="0",this.sumTotalUsers=0,this.sumTotalUsersRange=0,this.cardTitle="",this.descriptionRoute="",this.driverName="",this.driverConfirmationAt=null,this.dateRangeSelected="",this.startedAt=null,this.lastUpdatedAt=null,this.isConfirmed=!1,this.isRejected=!1,this.hasEnded=!1,this.activeRoute="False",this.round="",this.vehicleName="",this.logisticsService=ie(Yc),this.liveService=ie(Xc),this.accountsService=ie(gr),this.authService=ie(bt),this.routesService=ie(Kr),this.listOfColumns=[{name:"Fecha",sortOrder:null,sortFn:(a,l)=>a.created.localeCompare(l.created),sortDirections:["ascend","descend",null],filterMultiple:!0,listOfFilter:[{text:"Joe",value:"Joe"},{text:"Jim",value:"Jim",byDefault:!0}],filterFn:(a,l)=>a.some(d=>l.created.indexOf(d)!==-1)},{name:"Alumno",sortOrder:null,sortFn:(a,l)=>a.studentName.localeCompare(l.studentName),sortDirections:["ascend","descend",null],filterMultiple:!0,listOfFilter:[{text:"Joe",value:"Joe"},{text:"Jim",value:"Jim",byDefault:!0}],filterFn:(a,l)=>a.some(d=>l.studentName.indexOf(d)!==-1)},{name:"Identificaci\xF3n",sortOrder:null,sortFn:(a,l)=>a.studentId.localeCompare(l.studentId),sortDirections:["ascend","descend",null],filterMultiple:!0,listOfFilter:[{text:"Joe",value:"Joe"},{text:"Jim",value:"Jim",byDefault:!0}],filterFn:(a,l)=>a.some(d=>l.studentId.indexOf(d)!==-1)},{name:"Ingreso con",sortOrder:null,sortFn:(a,l)=>a.studentId.localeCompare(l.studentId),sortDirections:["ascend","descend",null],filterMultiple:!0,listOfFilter:[{text:"Joe",value:"Joe"},{text:"Jim",value:"Jim",byDefault:!0}],filterFn:(a,l)=>a.some(d=>l.studentId.indexOf(d)!==-1)},{name:"Evento",sortOrder:null,sortFn:(a,l)=>a.event.localeCompare(l.event),sortDirections:["ascend","descend",null],filterMultiple:!0,listOfFilter:[{text:"Joe",value:"Joe"},{text:"Jim",value:"Jim",byDefault:!0}],filterFn:(a,l)=>a.some(d=>l.event.indexOf(d)!==-1)},{name:"Tipo",sortOrder:null,sortFn:(a,l)=>a.type.localeCompare(l.type),sortDirections:["ascend","descend",null],filterMultiple:!0,listOfFilter:[{text:"Joe",value:"Joe"},{text:"Jim",value:"Jim",byDefault:!0}],filterFn:(a,l)=>a.some(d=>l.type.indexOf(d)!==-1)},{name:"Descripci\xF3n",sortOrder:null,sortFn:(a,l)=>a.description.localeCompare(l.description),sortDirections:["ascend","descend",null],filterMultiple:!0,listOfFilter:[{text:"Joe",value:"Joe"},{text:"Jim",value:"Jim",byDefault:!0}],filterFn:(a,l)=>a.some(d=>l.description.indexOf(d)!==-1)},{name:"Operaci\xF3n",sortOrder:null,sortFn:(a,l)=>a.route.localeCompare(l.route),sortDirections:["ascend","descend",null],filterMultiple:!0,listOfFilter:[{text:"Joe",value:"Joe"},{text:"Jim",value:"Jim",byDefault:!0}],filterFn:(a,l)=>a.some(d=>l.route.indexOf(d)!==-1)},{name:"Turno",sortOrder:null,sortFn:(a,l)=>a.round.localeCompare(l.round),sortDirections:["ascend","descend",null],filterMultiple:!0,listOfFilter:[{text:"Joe",value:"Joe"},{text:"Jim",value:"Jim",byDefault:!0}],filterFn:(a,l)=>a.some(d=>l.round.indexOf(d)!==-1)},{name:"Programa",sortOrder:null,sortFn:(a,l)=>a.program.localeCompare(l.program),sortDirections:["ascend","descend",null],filterMultiple:!0,listOfFilter:[{text:"Joe",value:"Joe"},{text:"Jim",value:"Jim",byDefault:!0}],filterFn:(a,l)=>a.some(d=>l.program.indexOf(d)!==-1)},{name:"Veh\xEDculo",sortOrder:null,sortFn:(a,l)=>a.vehicleName.localeCompare(l.vehicleName),sortDirections:["ascend","descend",null],filterMultiple:!0,listOfFilter:[{text:"Joe",value:"Joe"},{text:"Jim",value:"Jim",byDefault:!0}],filterFn:(a,l)=>a.some(d=>l.vehicleName.indexOf(d)!==-1)},{name:"\xBFSubi\xF3?",sortOrder:null,sortFn:null,sortDirections:["ascend","descend",null],filterMultiple:!0,listOfFilter:[{text:"Si",value:!0},{text:"No",value:!1,byDefault:!0}],filterFn:null}],this.pageIndex=1,this.pageSize=5,this.defaultColDef={flex:1,minWidth:100},this.cardsByDate=[],this.userRoutes=[],this.markers=[],this.startDate=mo(),this.endDate=Mn(),this.startDateA=mo(),this.endDateA=Mn(),this.startDateAct=mo(),this.endDateAct=Mn(),this.startedAt=mo(),this.lastUpdatedAt=null,this.driverConfirmationAt=null,this.authService.user.subscribe(a=>{a&&(this.user=a,this.user!==null&&this.user!==void 0&&this.user.idSegment!==void 0&&this.accountsService.getSegmentLevel(this.user.idSegment).pipe(xe(this.stopSubscription$),ce(l=>{let d=l.payload.id,u=l.payload.data();return me({id:d},u)}),ft(l=>(this.infoSegment=l,this.getAccountsMaps(),this.getCustomersList(),l))).subscribe())}),this.dateRangeForm=this.fb.group({startDate:[mo()],endDate:[Mn()],selectedOption:[null]}),this.dateRangeFormA=this.fb.group({startDate:[mo()],endDate:[Mn()]}),this.dateRangeFormAct=this.fb.group({startDate:[mo()],endDate:[Mn()],customerId:[]}),this.dateRangeFormMap=this.fb.group({customerId:[],customerName:[],routeId:[],routeName:[],driverId:[null]}),typeof window<"u"&&window.navigator&&window.navigator.geolocation?window.navigator.geolocation.getCurrentPosition(a=>{let l=a.coords.latitude,d=a.coords.longitude;this.center={lat:l,lng:d}},a=>{console.error("Error getting geolocation:",a)}):console.error("Geolocation is not supported by this browser."),this.isBrowser=Lc(this.platformId),this.columnDefs=[{headerName:"Fecha",floatingFilter:!0,filter:!0,field:"created",cellRenderer:a=>a&&a.value?Yt(Li(a.value.seconds),"MM/dd/yyyy HH:mm",{locale:Qt}):""},{headerName:"Alumno",field:"studentName",filter:!0,floatingFilter:!0},{headerName:"Identificaci\xF3n",field:"studentId",filter:!0,floatingFilter:!0},{headerName:"Ingreso con",field:"studentId",floatingFilter:!0,enableValue:!0,filter:!0,allowedAggFuncs:["count"]},{headerName:"Evento",field:"event",filter:!0,floatingFilter:!0},{headerName:"Tipo",field:"type",filter:!0,floatingFilter:!0},{headerName:"Descripci\xF3n",field:"description",filter:!0,floatingFilter:!0},{headerName:"Operaci\xF3n",field:"route",filter:!0,floatingFilter:!0},{headerName:"Turno",field:"round",filter:!0,floatingFilter:!0},{headerName:"Programa",field:"program",filter:!0,floatingFilter:!0},{headerName:"Veh\xEDculo",field:"vehicle",filter:!0,floatingFilter:!0},{headerName:"\xBFSubi\xF3?",field:"allowedOnBoard",filter:!0,floatingFilter:!0}]}getCustomersList(){this.infoSegment.nivelNum!==void 0&&this.infoSegment.nivelNum==1?this.afs.collection("customers").doc(this.user.customerId).snapshotChanges().pipe(xe(this.stopSubscription$),ce(r=>{let o=r.payload.id,n=r.payload.data();return me({id:o},n)}),ft(r=>(this.customersList=[r],r))).subscribe():this.afs.collection("customers",r=>r.orderBy("name")).snapshotChanges().pipe(xe(this.stopSubscription$),ce(r=>r.map(o=>{let n=o.payload.doc.id,s=o.payload.doc.data();return me({id:n},s)})),ft(r=>(this.customersList=r,r))).subscribe()}moveMap(e){}move(e){e.latLng&&(this.center=e.latLng.toJSON())}onDateRangeChange(){this.startDate=this.dateRangeForm.get("startDate").value,this.endDate=this.dateRangeForm.get("endDate").value,this.startDate&&this.endDate?this.loadData():this.notification.create("error","Error","Se Requiere un rango de fechas")}onDateRangeChangeA(){this.startDateA=this.dateRangeFormA.get("startDate").value,this.endDateA=this.dateRangeFormA.get("endDate").value,this.startDateA&&this.endDateA?this.loadData():this.notification.create("error","Error","Se Requiere un rango de fechas")}onDateRangeChangeMap(){let e=this.dateRangeFormMap.controls.driversId.value,r=this.driversList.find(o=>o.driverId===e);r?(this.driverName=r.driver,this.driverConfirmationAt=r.driverConfirmationAt,this.startedAt=r.startAted,this.activeRoute=r.active,this.isConfirmed=r.isConfirmed,this.isRejected=r.isRejected,this.hasEnded=r.hasEnded,this.lastUpdatedAt=r.lastUpdatedAt,this.round=r.round,this.vehicleName=r.vehicleName,this.addGeoPointToMarkerPositions(r.geopoint)):(this.notification.create("warning","Informaci\xF3n","No hay operaciones activas en este momento."),this.driverName="",this.driverConfirmationAt=null,this.startedAt=null,this.lastUpdatedAt=null,this.activeRoute="False",this.isConfirmed=!1,this.isRejected=!1,this.hasEnded=!1,this.round="",this.vehicleName="",this.descriptionRoute="",this.lastUpdatedAt=null,this.markerPositions=[])}onOpSelected(){if(this.dateRangeFormMap.get("routeId").value!=null){let r=Al.filter(this.routes,o=>o.id==this.dateRangeFormMap.get("routeId").value)[0];this.cardTitle=r.name,this.descriptionRoute=r.description}this.infoSegment.nivelNum!==void 0&&this.infoSegment.nivelNum==1?(this.markers=this.logisticsService.getliveBusses(this.dateRangeFormMap.get("customerId").value,this.dateRangeFormMap.get("routeId").value),this.markers.pipe(ce(e=>e.map(r=>{let o=r.payload.doc.data(),n=r.payload.doc.id;return me({id:n},o)}))).subscribe(e=>{e&&e.length>0&&e[0].geopoint&&(this.driversList=e)})):(this.markers=this.logisticsService.getliveBusses(this.dateRangeFormMap.get("customerId").value,this.dateRangeFormMap.get("routeId").value),this.markers.pipe(ce(e=>e.map(r=>{let o=r.payload.doc.data(),n=r.payload.doc.id,s=r.payload.doc.data().geopoint;return me({id:n,arrayLatLng:s},o)}))).subscribe(e=>{e&&e.length>0&&e[0].geopoint&&(this.driversList=e)}))}transformToHoursAndMinutes(e){if(!e)return"NA";let r;e instanceof Date?r=e:r=new Date(e.seconds*1e3);let o=r.getHours(),n=r.getMinutes();return`${o}:${n<10?"0"+n:n}`}addGeoPointToMarkerPositions(e){this.markerPositions=[],e?._lat!==void 0&&e?._long!==void 0?this.markerPositions.push({lat:e._lat,lng:e._long}):console.error("Invalid GeoPoint object:",e)}isActiveRoute(){return typeof this.activeRoute=="string"?this.activeRoute.toLowerCase()==="true":!!this.activeRoute}onDateRangeChangeAct(){this.cardsByDate=[],this.sumTotalUsersRange=0,this.startDateAct=this.dateRangeFormAct.get("startDate").value,this.endDateAct=this.dateRangeFormAct.get("endDate").value,this.customerIdSelected=this.dateRangeFormAct.get("customerId").value;let e=new Date(this.startDateAct),r=new Date(this.endDateAct),o=e.toLocaleDateString("es-MX"),n=r.toLocaleDateString("es-MX");this.dateRangeSelected=`Del ${o} al ${n}`,this.startDateAct&&this.endDateAct&&this.customerIdSelected?(this.logisticsService.getChartDatabyCustomer(this.startDate,this.endDate,this.customerIdSelected).pipe(ce(s=>s.map(a=>{let l=a.payload.doc.data(),d=a.payload.doc.id;return{vehicle:l.vehicle,round:l.round,route:l.routeName,program:l.program,value:1}}))).subscribe(s=>{this.getSums(s)}),this.onSubmitDateRange(),this.logisticsService.getUsersByCustomerTot(this.customerIdSelected).pipe(ce(s=>s.length)).subscribe(s=>{this.sumTotalUsers=s})):this.notification.create("error","Error","Se Requiere un rango de fechas")}getRoutes(){this.userRoutes=[],this.routesService.getRoutes(this.customerIdSelected).pipe(xe(this.stopSubscription$),ce(e=>e.map(r=>{let o=r.payload.doc.id,n=r.payload.doc.data();return me({id:o},n)}))).subscribe(e=>{this.userRoutes=e})}onSubmitDateRange(){let e=this.dateRangeFormAct.get("startDate").value,r=this.dateRangeFormAct.get("endDate").value,o=new Date(e),n=new Date(r);for(this.getRoutes(),this.cardsByDate=[];o<=n;){let s=o.getDate(),a=o.getMonth()+1,l=o.getFullYear(),d=`${s}/${a}/${l}`;this.logisticsService.getUsersByCustomer(d,d,this.customerIdSelected).pipe(ce(u=>{let c={},h=u.map(p=>{let f=p.payload.doc.data(),C=f.defaultRoute||"",b=this.userRoutes.find(S=>S.id===C),x=b?b.description:"Sin ruta";return x&&(c[x]=(c[x]||0)+1),{firstName:f.firstName||"",lastName:f.lastName||"",email:f.email||"",defaultRoute:x,turno:f.turno||"",curp:f.curp||"",group:f.group||"",adress:f.adress||""}});return{count:u.length,users:h,routeCounts:c}})).subscribe(({count:u,users:c,routeCounts:h})=>{this.cardsByDate.some(f=>f.date===d)||this.cardsByDate.push({date:d,count:u,users:c,routeCounts:h}),this.cardsByDate.sort((f,C)=>{let[b,x,S]=f.date.split("/").map(Number),[R,I,F]=C.date.split("/").map(Number);return new Date(S,x-1,b).getTime()-new Date(F,I-1,R).getTime()})}),o.setDate(o.getDate()+1)}}getSums(e){this.resultLiveRoundD=e.filter(s=>s.round==="D\xEDa"),this.resultLiveRoundT=e.filter(s=>s.round==="Tarde"),this.resultLiveRoundN=e.filter(s=>s.round==="Noche");let r={},o={},n={};this.resultLiveRoundD.forEach(s=>{r.hasOwnProperty(s.route)?r[s.route]+=s.value:r[s.route]=s.value}),this.resultLiveRoundT.forEach(s=>{o.hasOwnProperty(s.route)?o[s.route]+=s.value:o[s.route]=s.value}),this.resultLiveRoundN.forEach(s=>{n.hasOwnProperty(s.route)?n[s.route]+=s.value:n[s.route]=s.value}),this.resultLiveRoundDLevel2=Object.entries(r).map(([s,a])=>({route:s,sum:a})),this.resultLiveRoundTLevel2=Object.entries(o).map(([s,a])=>({route:s,sum:a})),this.resultLiveRoundNLevel2=Object.entries(n).map(([s,a])=>({route:s,sum:a})),this.sumD=this.resultLiveRoundD.reduce((s,a)=>s+a.value,0),this.sumT=this.resultLiveRoundT.reduce((s,a)=>s+a.value,0),this.sumN=this.resultLiveRoundN.reduce((s,a)=>s+a.value,0)}getAccountsMaps(){this.infoSegment!==null&&this.infoSegment!==void 0&&this.infoSegment.nivelNum!==void 0&&this.infoSegment.nivelNum==3?this.accountsService.getAccounts().pipe(xe(this.stopSubscription$),ce(e=>e.map(r=>{let o=r.payload.doc.id,n=r.payload.doc.data();return me({id:o},n)}))).subscribe(e=>{this.accountsList=e}):this.user&&this.user.customerId&&this.accountsService.getAccount(this.user.customerId).pipe(xe(this.stopSubscription$),ce(e=>{let r=e.payload.id,o=e.payload.data();return me({id:r},o)}),ft(e=>(this.accountsList=[e],e))).subscribe()}ngOnInit(){this.isBrowser}open(){this.visible=!0}close(){this.visible=!1}ngAfterViewInit(){this.infoSegment.nivelNum==1&&this.logisticsService.getChartData(this.startDate,this.endDate).pipe(ce(e=>e.map(r=>{let o=r.payload.doc.data(),n=r.payload.doc.id;return{vehicle:o.vehicle,round:o.round,route:o.routeName,program:o.program,value:1}}))).subscribe(e=>{this.zone.runOutsideAngular(()=>{let r=[...e.reduce((a,l)=>{let d=l.round+"-"+l.program,u=a.get(d)||Object.assign({},l,{from:l.round,to:l.program,values:0});return u.values+=l.value,a.set(d,u)},new Map).values()],o=[...e.reduce((a,l)=>{let d=l.round+"-"+l.program+"-"+l.route,u=a.get(d)||Object.assign({},l,{from:l.program,to:l.route,values:0});return u.values+=l.value,a.set(d,u)},new Map).values()],n=[...e.reduce((a,l)=>{let d=l.round+"-"+l.program+"-"+l.route+"-"+l.vehicle,u=a.get(d)||Object.assign({},l,{from:l.route,to:l.vehicle,values:0});return u.values+=l.value,a.set(d,u)},new Map).values()],s=[...e.reduce((a,l)=>{let d=l.round+"-"+l.program+"-"+l.route+"-"+l.vehicle,u=a.get(d)||Object.assign({},l,{from:l.vehicle,to:l.program=="M"?"Prepa 2":"Salida",values:0});return u.values+=l.value,a.set(d,u)},new Map).values()]})})}ngOnDestroy(){this.accountsSubscription&&this.accountsSubscription.unsubscribe()}formatDate(e){return Yt(Li(e.seconds),"HH:mm",{locale:Qt})}loadData(){this.infoSegment.nivelNum!==void 0&&this.infoSegment.nivelNum==1?(this.logisticsService.getActivityLogByCustomer(this.startDate,this.endDate,this.user.customerId).pipe(ce(e=>e.map(r=>{let o=r.payload.doc.data(),n=r.payload.doc.id;return o}))).subscribe(e=>{this.rowData=e,this.activityList=this.rowData.slice(0,5),this.chartData=Al.map(this.rowData,r=>({country:r.vehicle,visits:r.studentId}))}),this.liveService.getLiveProgrambyCustomer(this.user.customerId).subscribe(e=>{this.rowFleetData=e})):(this.logisticsService.getActivityLog(this.startDate,this.endDate).pipe(ce(e=>e.map(r=>{let o=r.payload.doc.data(),n=r.payload.doc.id;return o}))).subscribe(e=>{this.rowData=e,this.activityList=this.rowData.slice(0,5),this.chartData=Al.map(this.rowData,r=>({country:r.vehicle,visits:r.studentId}))}),this.liveService.getLiveProgram().subscribe(e=>{this.rowFleetData=e}))}openMessage(){this.vMessage=!0}closeMessage(){this.vMessage=!1}onCustomerSelected(e){if(e!=null){let n=Al.filter(this.accountsList,s=>s.id==e)[0];if(this.cardTitle="",this.fillCustomer==!1)this.fillCustomer=!0,this.dateRangeFormMap.controls.customerName.setValue(n.name),this.dateRangeFormMap.controls.customerId.setValue(n.id),this.fillCustomerRoute(n.id);else{var r=this.dateRangeFormMap.get("customerName").value;n.name!=r&&(this.dateRangeFormMap.controls.customerName.setValue(n.name),this.dateRangeFormMap.controls.customerId.setValue(n.id),this.fillCustomerRoute(n.id))}}}fillCustomerRoute(e){this.fillRoutes=!0,this.routesService.getRoutes(e).pipe(xe(this.stopSubscription$),ce(r=>r.map(o=>{let n=o.payload.doc.id,s=o.payload.doc.data();return me({id:n},s)}))).subscribe(r=>{this.routes=r})}formatCreated(e){return e?Yt(Li(e.seconds),"MM/dd/yyyy HH:mm",{locale:Qt}):"No"}exportToExcel(e){let r=[];r.push(["Fecha",e.date]),r.push(["Total de usuarios",e.count]),r.push([]),r.push(["Usuarios por ruta"]),r.push(["Ruta","Cantidad"]);for(let[l,d]of Object.entries(e.routeCounts))r.push([l,d]);r.push([]),r.push([]),r.push(["Usuarios"]),r.push(["Nombre","Apellido","Email","Ruta","Turno","Curp","Grupo","Direccion"]);for(let l of e.users)r.push([l.firstName||"",l.lastName||"",l.email||"",l.defaultRoute||"",l.turno||"",l.curp||"",l.group||"",l.adress||""]);let n={Sheets:{Desglose:tC.aoa_to_sheet(r)},SheetNames:["Desglose"]},s=eC(n,{bookType:"xlsx",type:"array"}),a=`Desglose_${e.date.replace(/\//g,"-")}.xlsx`;M0.saveAs(new Blob([s],{type:"application/octet-stream"}),a)}static{this.\u0275fac=function(r){return new(r||i)(ee(_c),ee(Ay),ee(ur),ee(hi),ee(_i))}}static{this.\u0275cmp=ke({type:i,selectors:[["app-logistics"]],viewQuery:function(r,o){if(r&1&&Tc(BP,7),r&2){let n;hd(n=pd())&&(o.mapElement=n.first)}},decls:137,vars:42,consts:[["map",""],[2,"margin","buttom 15px","margin-right","15px","margin-left","15px"],[1,"site-page-header-ghost-wrapper"],[2,"background-color","#f9fbfd",3,"nzGhost"],[2,"margin-left","350px"],[3,"nzSelectedIndex"],["nzTitle","Registros Nuevos"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[3,"nzGutter"],[1,"form-inline",3,"ngSubmit","formGroup"],["formControlName","startDate","id","startDate",1,"form-control"],["formControlName","endDate","id","endDate",1,"form-control"],["formControlName","customerId","id","customerId","nzAllowClear","","nzPlaceHolder","Selecciona el Cliente",1,"form-control",2,"width","250px"],["nzCustomContent","",3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nz-button","","type","submit",1,"btn","btn-primary",2,"background-color","#4F6F57","color","#f6f3ea"],[3,"nzTitle"],[3,"nzSpan"],[3,"nzValue","nzTitle"],["style","margin-bottom: 24px;",3,"nzTitle",4,"ngFor","ngForOf"],["nzTitle","Mapas",3,"nzClick"],["nzTitle","Empresa"],[1,"m-t-30"],[3,"ngSubmit","formGroup"],["formControlName","customerId","nzAllowClear","","nzPlaceHolder","Selecciona la Empresa",2,"width","250px",3,"ngModelChange"],["formControlName","routeId","nzAllowClear","","nzPlaceHolder","Selecciona la Operaci\xF3n",2,"width","320px",3,"ngModelChange"],["formControlName","driverId","nzAllowClear","","nzPlaceHolder","Selecciona el Ejecutor",2,"width","320px"],["nz-","","button","","type","submit",2,"background-color","#4F6F57","color","#f6f3ea"],[1,"details-table"],["nz-icon","",3,"nzType","ngClass"],["id","map",1,"match-parent"],["height","600px","width","1100px",3,"mapClick","center","options","zoom"],[3,"position","options"],["nzTitle","Usuarios"],[1,"row"],[1,"col-lg-12"],["formControlName","startDate"],["formControlName","endDate"],["nz-button","","type","submit",2,"background-color","#4F6F57","color","#f6f3ea"],[4,"ngIf"],["nzTitle","Mensajes"],["nzCustomContent","",3,"nzLabel","nzValue"],[2,"margin-bottom","24px",3,"nzTitle"],[1,"mb-2"],[2,"text-align","right",3,"nzSpan"],["nz-button","","nzType","default",3,"click"],["class","route-counts-container","style","padding: 12px; border: 1px solid #d9d9d9; border-radius: 4px; background: #fafafa;",4,"ngIf"],[3,"nzData","nzFrontPagination","nzPageSize","nzScroll","nzBordered","nzSize"],[4,"ngFor","ngForOf"],[3,"nzPageIndexChange","nzPageSize","nzTotal","nzPageIndex","nzSize","nzShowQuickJumper","nzShowSizeChanger"],[1,"route-counts-container",2,"padding","12px","border","1px solid #d9d9d9","border-radius","4px","background","#fafafa"],["align","middle",1,"mb-2",2,"font-weight","600","font-size","16px","color","#333"],[2,"margin","8px 0"],["align","middle",2,"padding","6px 0","border-bottom","1px solid #f0f0f0"],[2,"font-weight","500","color","#595959",3,"nzSpan"],[2,"text-align","right","font-weight","700","color","#1890ff",3,"nzSpan"],["nz-icon",""],[1,"ag-theme-quartz",2,"height","600px","width","100%",3,"rowData","columnDefs","animateRows","pagination","sideBar"]],template:function(r,o){if(r&1){let n=re();v(0,"div",1)(1,"div",2)(2,"nz-page-header",3)(3,"nz-page-header-title",4),D(4,"En Vivo"),y(),v(5,"nz-page-header-subtitle"),D(6,"Informaci\xF3n en vivo del proceso "),y()()(),v(7,"nz-tabset",5)(8,"nz-tab",6)(9,"nz-card")(10,"div",7)(11,"h5",8),D(12,"Selecciona"),y()(),v(13,"nz-row",9)(14,"form",10),q("ngSubmit",function(){return H(n),B(o.onDateRangeChangeAct())}),N(15,"nz-date-picker",11)(16,"nz-date-picker",12),v(17,"nz-select",13),$(18,WP,2,3,"nz-option",14),y(),v(19,"button",15),D(20,"Aceptar"),y()()()(),v(21,"nz-card",16)(22,"nz-row",9)(23,"nz-col",17),N(24,"nz-statistic",18),Lr(25,"number"),y()()(),$(26,KP,30,25,"nz-card",19),y(),v(27,"nz-tab",20),q("nzClick",function(){return H(n),B(o.getAccountsMaps())}),v(28,"nz-card",21)(29,"div",7)(30,"h5",8),D(31,"Selecciona: "),y()(),v(32,"div",22)(33,"form",23),q("ngSubmit",function(){return H(n),B(o.onDateRangeChangeMap())}),v(34,"nz-select",24),q("ngModelChange",function(a){return H(n),B(o.onCustomerSelected(a))}),$(35,YP,2,3,"nz-option",14),y(),v(36,"nz-select",25),q("ngModelChange",function(){return H(n),B(o.onOpSelected())}),$(37,XP,3,3,"nz-option",14),y(),v(38,"nz-select",26),$(39,QP,3,3,"nz-option",14),y(),v(40,"button",27),D(41,"Aceptar"),y()()()(),v(42,"nz-card",16)(43,"table",28)(44,"tr")(45,"td")(46,"strong"),D(47,"Descripci\xF3n:"),y()(),v(48,"td"),D(49),y(),v(50,"td")(51,"strong"),D(52,"Conductor:"),y()(),v(53,"td"),D(54),y(),v(55,"td")(56,"strong"),D(57,"Turno:"),y()(),v(58,"td"),D(59),y()(),v(60,"tr")(61,"td")(62,"strong"),D(63,"Hora de Confirmaci\xF3n:"),y()(),v(64,"td"),D(65),y(),v(66,"td")(67,"strong"),D(68,"Hora de Inicio:"),y()(),v(69,"td"),D(70),y(),v(71,"td")(72,"strong"),D(73,"Online:"),y()(),v(74,"td"),N(75,"i",29),v(76,"span"),D(77),y()()(),v(78,"tr")(79,"td")(80,"strong"),D(81,"Veh\xEDculo:"),y()(),v(82,"td"),D(83),y(),v(84,"td")(85,"strong"),D(86,"Ultima Actualizaci\xF3n : "),y()(),v(87,"td"),D(88),y(),v(89,"td"),N(90,"strong"),y(),N(91,"td"),y(),v(92,"tr")(93,"td")(94,"strong"),D(95,"Confirmado:"),y()(),v(96,"td"),N(97,"i",29),v(98,"span"),D(99),y()(),v(100,"td")(101,"strong"),D(102,"Rechazado:"),y()(),v(103,"td"),N(104,"i",29),v(105,"span"),D(106),y()(),v(107,"td")(108,"strong"),D(109,"Finalizado:"),y()(),v(110,"td"),N(111,"i",29),v(112,"span"),D(113),y()()()()(),v(114,"nz-card")(115,"div",30,0)(117,"google-map",31),q("mapClick",function(a){return H(n),B(o.moveMap(a))}),Ec(118,ZP,1,2,"map-marker",32,fy),y()()()(),v(120,"nz-tab",33)(121,"div",34)(122,"div",35)(123,"nz-card")(124,"div",7)(125,"h5",8),D(126,"Actividad de los usuarios"),y()(),v(127,"div",22)(128,"form",23),q("ngSubmit",function(){return H(n),B(o.onDateRangeChange())}),N(129,"nz-date-picker",36)(130,"nz-date-picker",37),v(131,"button",38),D(132,"Aceptar"),y()(),N(133,"br"),$(134,JP,2,5,"div",39),y()()()()(),v(135,"nz-tab",40),N(136,"app-shared-messageCenter"),y()()()}r&2&&(_(2),E("nzGhost",!1),_(5),E("nzSelectedIndex",0),_(6),E("nzGutter",16),_(),E("formGroup",o.dateRangeFormAct),_(4),E("ngForOf",o.accountsList),_(3),E("nzTitle","Registro de Usuarios"),_(),E("nzGutter",16),_(),E("nzSpan",12),_(),E("nzValue",Tg(25,40,o.sumTotalUsers))("nzTitle","Total de Usuarios"),_(2),E("ngForOf",o.cardsByDate),_(7),E("formGroup",o.dateRangeFormMap),_(2),E("ngForOf",o.accountsList),_(2),E("ngForOf",o.routes),_(2),E("ngForOf",o.driversList),_(3),E("nzTitle",o.cardTitle),_(7),J(o.descriptionRoute),_(5),J(o.driverName),_(5),J(o.round),_(6),J(o.transformToHoursAndMinutes(o.driverConfirmationAt)),_(5),J(o.transformToHoursAndMinutes(o.startedAt)),_(5),E("nzType",o.isActiveRoute()?"check-circle":"close-circle")("ngClass",o.isActiveRoute()?"active-icon":"inactive-icon"),_(2),J(o.isActiveRoute()?"Active":"Inactive"),_(6),J(o.vehicleName),_(5),J(o.transformToHoursAndMinutes(o.lastUpdatedAt)),_(9),E("nzType",o.isConfirmed?"check-circle":"close-circle")("ngClass",o.isConfirmed?"active-icon":"inactive-icon"),_(2),J(o.isConfirmed?"True":"False"),_(5),E("nzType",o.isRejected?"check-circle":"close-circle")("ngClass",o.isRejected?"active-icon":"inactive-icon"),_(2),J(o.isRejected?"True":"False"),_(5),E("nzType",o.hasEnded?"check-circle":"close-circle")("ngClass",o.hasEnded?"active-icon":"inactive-icon"),_(2),J(o.hasEnded?"True":"False"),_(4),E("center",o.center)("options",o.mapOptions)("zoom",9),_(),Dc(o.markerPositions),_(10),E("formGroup",o.dateRangeForm),_(6),E("ngIf",o.isBrowser))},dependencies:[Mg,pC,vd,Sy,At,Dt,Pm,Tt,Lt,Kt,Uc,en,Qo,Zo,rn,Jo,tn,Xy,Qc,Vt,Nt,kt,Xt,vr,mr,qr,yr,Cr,di,Ot,li,ui,ci,Xo,Yo,R0,Ey,xy,_y],styles:[".match-parent[_ngcontent-%COMP%]{width:100%!important;height:600px!important;background-color:#f6f6f4}.details-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;table-layout:fixed}.details-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:4px 8px;vertical-align:top}.details-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700}.active-icon[_ngcontent-%COMP%]{color:green}.inactive-icon[_ngcontent-%COMP%]{color:red}.red-cell[_ngcontent-%COMP%]{background-color:#fcc;color:#000}"]})}}return i})();var Ll=(()=>{class i{constructor(e,r){this.afs=e,this.message=r}getVendorVehicles(e){return this.afs.collection("vendors").doc(e).collection("fleet").snapshotChanges()}getVehicle(e,r){return this.afs.collection("vendors").doc(e).collection("fleet").doc(r).snapshotChanges()}addVehicle(e,r){return this.afs.collection("vendors").doc(e).collection("fleet").add(r)}deleteVehicle(e,r){return this.afs.collection("vendors").doc(e).collection("fleet").doc(r).delete()}updateVehicle(e,r,o){return this.afs.collection("vendors").doc(e).collection("fleet").doc(r).update(o)}updateVehicleAvatar(e,r,o){this.message.loading("Actualizando ..."),this.afs.collection("vendors").doc(e).collection("fleet").doc(r).update({avatar:o}).then(()=>{this.message.remove(),this.message.success("Todo listo")}).catch(s=>{this.message.remove(),this.message.error("Hubo un error: ",s)})}toggleActive(e,r,o){return this.afs.collection("vendors").doc(e).collection("fleet").doc(r).update({active:!o})}toggleDisabled(e,r,o){return this.afs.collection("vendors").doc(e).collection("fleet").doc(r).update({disabled:!o})}static{this.\u0275fac=function(r){return new(r||i)(Or(ur),Or(Mt))}}static{this.\u0275prov=$r({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function oR(i,t){if(i&1&&N(0,"nz-option",33),i&2){let e=t.$implicit;E("nzValue",e.id)("nzLabel",e.displayName)}}function nR(i,t){if(i&1){let e=re();v(0,"nz-card",9)(1,"div",10),N(2,"nz-avatar",11),v(3,"div",12)(4,"h5",13),D(5),y(),v(6,"p",14),D(7),y()(),v(8,"nz-upload",15),q("nzChange",function(o){H(e);let n=O(2);return B(n.handleChange(o))}),v(9,"button",16)(10,"span"),D(11,"Cambiar im\xE1gen"),y()()()(),N(12,"hr",17),v(13,"div",18)(14,"div",19)(15,"nz-form-item")(16,"nz-form-label"),D(17,"Eco"),y(),v(18,"nz-form-control"),N(19,"input",20),y()()(),v(20,"div",19)(21,"nz-form-item")(22,"nz-form-label"),D(23,"Placas"),y(),v(24,"nz-form-control"),N(25,"input",21),y()()(),v(26,"div",19)(27,"nz-form-item")(28,"nz-form-label"),D(29,"Tipo"),y(),v(30,"nz-form-control")(31,"nz-select",22),N(32,"nz-option",23)(33,"nz-option",24)(34,"nz-option",25),y()()()(),v(35,"div",19)(36,"nz-form-item")(37,"nz-form-label"),D(38,"Modelo"),y(),v(39,"nz-form-control"),N(40,"input",26),y()()()(),v(41,"div",18)(42,"div",19)(43,"nz-form-item")(44,"nz-form-label"),D(45,"Chasis"),y(),v(46,"nz-form-control"),N(47,"input",27),y()()(),v(48,"div",19)(49,"nz-form-item")(50,"nz-form-label"),D(51,"A\xF1o modelo"),y(),v(52,"nz-form-control"),N(53,"input",28),y()()(),v(54,"div",19)(55,"nz-form-item")(56,"nz-form-label"),D(57,"PR"),y(),v(58,"nz-form-control")(59,"nz-select",29),$(60,oR,1,2,"nz-option",30),y()()()()(),v(61,"div",18)(62,"div",19)(63,"nz-form-item")(64,"nz-form-label"),D(65,"Asientos"),y(),v(66,"nz-form-control"),N(67,"input",31),y()()(),v(68,"div",19)(69,"nz-form-item")(70,"nz-form-label"),D(71,"Puertas"),y(),v(72,"nz-form-control"),N(73,"input",32),y()()()()()}if(i&2){O();let e=ue(4),r=O();E("nzExtra",e),_(2),E("nzSize",80)("nzSrc",r.record.avatar),_(3),J(r.record.name),_(2),Et(" ",r.record.licensePlate," "),_(),E("nzBeforeUpload",r.beforeUpload)("nzShowUploadList",!1),_(52),E("ngForOf",r.driversList)}}function sR(i,t){i&1&&N(0,"nz-switch",34)}function aR(i,t){if(i&1){let e=re();v(0,"form",3),q("ngSubmit",function(){H(e);let o=O();return B(o.submitForm())}),v(1,"div",4),$(2,nR,74,8,"nz-card",5)(3,sR,1,0,"ng-template",null,0,Re),y(),v(5,"div",6)(6,"button",7),N(7,"i",8),v(8,"span"),D(9,"Actualizar"),y()()()()}if(i&2){let e=O();E("formGroup",e.objectForm),_(2),E("ngIf",!!e.record),_(4),E("disabled",!e.objectForm.valid)}}var n1=(()=>{class i{constructor(e,r,o,n){this.fb=e,this.route=r,this.bucketStorage=o,this.messageService=n,this.rolService=ie(Hi),this.authService=ie(bt),this.vehicleService=ie(Ll),this.vendorId="",this.driversList=[],this.selectedIndex=0,this.record={},this.avatarUrl="http://themenate.com/applicator/dist/assets/images/avatars/thumb-13.jpg",this.autosave=!0,this.uploading=!1,this.bucketPath="vendors/",this.uploadvalue=0,this.stopSubscriptions$=new it,this.infoLoad=[],this.driversService=ie(nn)}ngOnInit(){this.authService.user.pipe(xe(this.stopSubscriptions$),ft(e=>{this.user=e}),$o(e=>e&&e.rolId?this.rolService.getRol(e.rolId).valueChanges().pipe(ft(r=>{this.infoLoad=r,this.userlevelAccess=this.infoLoad.optionAccessLavel}),bc(r=>(console.error("Error fetching role:",r),Ho(null)))):Ho(null))).subscribe(),this.objectSubscription=this.route.params.pipe(xe(this.stopSubscriptions$)).subscribe(e=>{this.recordId=e.vehicleid,this.vendorId=e.accountid,this.bucketPath+=this.recordId,this.getSubscriptions(this.vendorId)}),this.createForm()}ngOnDestroy(){this.stopSubscriptions$.next(!1),this.stopSubscriptions$.complete(),this.autosave=!1}sendMessage(e,r){this.messageService.create(e,r)}autoSave(){this.objectForm.statusChanges.pipe(iy(2e3),oy(()=>this.autosave)).subscribe(e=>{this.objectForm.valid&&(this.userlevelAccess!="3"?this.vendorId!=""?this.vehicleService.updateVehicle(this.vendorId,this.recordId,this.objectForm.value):this.sendMessage("error","VendorId no esta establecido, favor de validar con administraci\xF3n"):this.sendMessage("error","El usuario no tiene permisos para actualizar datos, favor de contactar al administrador."))})}createForm(){this.objectForm=this.fb.group({active:[""],name:[""],ac:[!1],avatar:[""],carMaker:[""],chassis:[""],deviceId:[""],doors:[""],driver:[""],driverId:[""],emissions:[""],engineType:[""],fuelTankCapacity:[""],fuelType:[""],horsePower:[""],insuranceAgent:[""],insuranceValidFrom:[""],insuranceValidTo:[""],insuranceId:[""],insuranceAgentPhone:[""],lastService:[""],licensePlate:[""],model:[""],seats:[""],type:[""],vendor:[""],year:[""]})}patchForm(e){this.objectForm.patchValue({active:e.active||!1,ac:e.ac||!1,name:e.name,avatar:e.avatar||"",carMaker:e.carMaker||"",chassis:e.chassis||"",deviceId:e.deviceId||"",disabled:e.disabled||!1,doors:e.doors||1,driver:e.driver||"",driverId:e.driverId||"",emissions:e.emissions||"",engineType:e.engineType||"",fuelTankCapacity:e.fuelTankCapacity||"",fuelType:e.fuelType||"",horsePower:e.horsePower||"",insuranceAgent:e.insuranceAgent||"",insuranceValidFrom:e.insuranceValidFrom||"",insuranceValidTo:e.insuranceValidTo||"",insuranceId:e.insuranceId||"",insuranceAgentPhone:e.insuranceAgentPhone||"",lastService:e.lastService||"",licensePlate:e.licensePlate||"",model:e.model||"",seats:e.seats||"",type:e.type||"",vendor:e.vendor||"",year:e.year||""})}getSubscriptions(e){e!=""?(this.vehicleService.getVehicle(e,this.recordId).pipe(xe(this.stopSubscriptions$),ce(r=>{let o=r.payload.id,n=r.payload.data();return me({id:o},n)})).subscribe(r=>{this.record=r,this.patchForm(r)}),this.driversService.getDrivers(e).pipe(xe(this.stopSubscriptions$),ce(r=>r.map(o=>{let n=o.payload.doc.id,s=o.payload.doc.data();return me({id:n},s)}))).subscribe(r=>{this.driversList=r})):this.sendMessage("error","VendorId no esta establecido, favor de validar con administraci\xF3n")}submitForm(){for(let e in this.objectForm.controls)this.objectForm.controls[e].markAsDirty(),this.objectForm.controls[e].updateValueAndValidity();this.objectForm.valid?this.userlevelAccess!="3"?this.vendorId!=""?this.vehicleService.updateVehicle(this.vendorId,this.recordId,this.objectForm.value):this.sendMessage("error","VendorId no esta establecido, favor de validar con administraci\xF3n"):this.sendMessage("error","El usuario no tiene permisos para actualizar datos, favor de contactar al administrador."):this.sendMessage("error","La forma no es valida")}getBase64(e,r){let o=new FileReader;o.addEventListener("load",()=>{o.result!==null&&typeof o.result=="string"?r(o.result):console.error("Invalid result from FileReader")}),o.readAsDataURL(e)}beforeUpload(){return Ho(!0)}handleChange(e){e.file.originFileObj&&this.getBase64(e.file.originFileObj,r=>{this.avatarUrl=r;let o=this.bucketStorage.ref(this.bucketPath);this.task=this.bucketStorage.ref(this.bucketPath).putString(r,"data_url"),this.uploadPercent=this.task.percentageChanges(),this.uploadPercent.pipe(ce(n=>Number((n/100).toFixed(2)))).subscribe(n=>{this.uploading=n!=0,this.uploadvalue=n}),this.task.snapshotChanges().pipe(wc(()=>{this.uploading=!1,this.downloadURL=o.getDownloadURL(),this.downloadURL.subscribe(n=>za(this,null,function*(){this.updatePhotoURL(n)}))})).subscribe()})}updatePhotoURL(e){return za(this,null,function*(){this.objectForm.controls.avatar.patchValue(e),this.userlevelAccess!="3"?this.vendorId!=""?this.vehicleService.updateVehicleAvatar(this.vendorId,this.recordId,e):this.sendMessage("error","VendorId no esta establecido, favor de validar con administraci\xF3n"):this.sendMessage("error","El usuario no tiene permisos para actualizar datos, favor de contactar al administrador.")})}static{this.\u0275fac=function(r){return new(r||i)(ee(hi),ee(ka),ee(jc),ee(Mt))}}static{this.\u0275cmp=ke({type:i,selectors:[["app-edit"]],decls:7,vars:2,consts:[["basicTpl",""],["nzBackIcon","",1,"page-header",2,"background-color","#f9fbfd"],["nz-form","",3,"formGroup","ngSubmit",4,"ngIf"],["nz-form","",3,"ngSubmit","formGroup"],[1,"container"],["nzType","inner","nzTitle","Informaci\xF3n B\xE1sica",3,"nzExtra",4,"ngIf"],[1,"media","justify-content-end","m-r-15","m-b-15"],["nz-button","","type","submit",2,"background-color","#4F6F57","color","#f6f3ea",3,"disabled"],["nz-icon","","nzType","edit","theme","outline"],["nzType","inner","nzTitle","Informaci\xF3n B\xE1sica",3,"nzExtra"],[1,"media","align-items-center"],["nzIcon","user","nzShape","square",3,"nzSize","nzSrc"],[1,"m-l-20","m-r-20"],[1,"m-b-5","font-size-18"],[1,"opacity-07","font-size-13","m-b-0"],["nzName","avatar","nzAction","action",3,"nzChange","nzBeforeUpload","nzShowUploadList"],["nz-button","","nzGhost","",2,"background-color","#4F6F57","color","#f6f3ea"],[1,"m-v-25"],[1,"row"],[1,"col-md-3"],["type","text","nz-input","","formControlName","name","placeholder","Eco (alias)"],["nz-input","","formControlName","licensePlate","placeholder","Placas"],["formControlName","type","nzAllowClear","","nzPlaceHolder","Tipo de veh\xEDculo"],["nzValue","Cami\xF3n","nzLabel","Cami\xF3n"],["nzValue","Camioneta","nzLabel","Camioneta"],["nzValue","Veh\xEDculo","nzLabel","Veh\xEDculo"],["nz-input","","formControlName","model","placeholder","Modelo"],["nz-input","","formControlName","chassis","placeholder","No serie"],["type","number","nz-input","","formControlName","year","placeholder","A\xF1o"],["formControlName","driver","nzAllowClear","","nzPlaceHolder","PR"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["type","number","nz-input","","formControlName","seats","placeholder","Asientos"],["type","number","nz-input","","formControlName","doors","placeholder","Puertas"],[3,"nzValue","nzLabel"],["formControlName","active","nzCheckedChildren","Activo","nzUnCheckedChildren","Inactivo"]],template:function(r,o){r&1&&(v(0,"nz-page-header",1)(1,"nz-page-header-title"),D(2),y(),v(3,"nz-page-header-subtitle"),D(4,"Detalles del veh\xEDculo"),y(),v(5,"nz-page-header-content"),$(6,aR,10,3,"form",2),y()()),r&2&&(_(2),J(o.record.name),_(4),E("ngIf",o.objectForm))},dependencies:[At,Dt,Tt,Lt,Kt,xi,pi,Ei,gi,Gi,Ur,Kc,qc,Vt,Nt,kt,Xt,vr,mr,qr,Wa,yr,Cr,di,Vi,Ha,Ot,li,ui,ci]})}}return i})();var Me=function(){function i(t){this._value=t}return Object.defineProperty(i.prototype,"value",{get:function(){return this._value/100},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"percent",{get:function(){return this._value},enumerable:!0,configurable:!0}),i.prototype.toString=function(){return""+this._value+"%"},i}();function ae(i){return new Me(i)}function Rm(i){return i instanceof Me}function Nl(i){return Number(i)!==i}function I0(i){return{}.toString.call(i)}function kl(i){if(typeof i=="string")return i;if(typeof i=="number")return""+i;throw new Error("Expected a string or number but got "+I0(i))}function ot(i){return!!i}function Xe(i){if(T(i)&&!M(i)){var t=Number(i);return Nl(t)&&je(i)&&i!=""?Xe(i.replace(/[^0-9.\-]+/g,"")):t}return i}function ri(i){if(T(i)&&!je(i)){if(M(i))return kl(i);if(Qe(i))return i.toString()}return i}function F0(i){return!T(i)||M(i)||Rm(i)?i:je(i)&&i.indexOf("%")!=-1?ae(Xe(i)):Xe(i)}function T(i){return i!=null}function Ct(i){if(T(i))return i;throw new Error("Value doesn't exist")}function pp(i,t){return T(i)?i:t}function fs(i){return I0(i)==="[object Date]"}function je(i){return typeof i=="string"}function M(i){return typeof i=="number"&&Number(i)==i}function Qe(i){return typeof i=="object"&&i!=null}function jt(i){return Array.isArray(i)}var vu=Math.PI,Im=vu/2,yu=vu/180,Vl=180/vu;function fp(i,t,e){return T(i)?(i=Xe(i),De(i,t,e)):i}function oe(i,t,e){if(!M(t)||t<=0){var r=Math.round(i);return e&&r-i==.5&&r--,r}else{var o=Math.pow(10,t);return Math.round(i*o)/o}}function De(i,t,e){if(M(t)){if(M(e)&&e<t){var r=e;e=t,t=r}i<t&&(i=t)}return M(e)&&i>e&&(i=e),i}function Ae(i){return oe(Math.sin(yu*i),10)}function Ve(i){return oe(Math.cos(yu*i),10)}function ze(i,t){return M(i)?M(t)&&t>i?t:i:M(t)?t:null}function st(i,t){return M(i)?M(t)&&t<i?t:i:M(t)?t:null}function Ri(i,t){return i?(t||(t={x:0,y:0}),Math.sqrt(Math.pow(Math.abs(i.x-t.x),2)+Math.pow(Math.abs(i.y-t.y),2))):0}function z0(i,t,e,r,o){if(!i)return 0;t||(t={x:0,y:0});var n=0,s=i;if(o>0)for(var a=0;a<=o;a++){var l=Cu(i,t,e,r,a/o);n+=Ri(s,l),s=l}return n}function A0(i,t,e,r){var o=Ri(t,r),n=Ri(i,e);return Math.abs(n/o)}function ha(i,t,e){return M(e)||(e=.5),{x:i.x+(t.x-i.x)*e,y:i.y+(t.y-i.y)*e}}function no(i,t){t||(t={x:i.x*2,y:i.y*2});var e=t.x-i.x,r=t.y-i.y,o=Math.atan2(r,e)*Vl;return o<0&&(o+=360),Fm(o)}function Gl(i){if(i){var t=i.length;if(t!==0){for(var e=void 0,r=void 0,o,n=void 0,s=0;s<t;s++){var a=i[s];(!M(r)||a.x>r)&&(r=a.x),(!M(e)||a.x<e)&&(e=a.x),(!M(o)||a.y<o)&&(o=a.y),(!M(n)||a.y>n)&&(n=a.y)}return{x:e,y:o,width:r-e,height:n-o}}}return{x:0,y:0,width:0,height:0}}function mp(i){var t=i.length;if(t!==0){for(var e=void 0,r=void 0,o=void 0,n=void 0,s=0;s<t;s++){var a=i[s];e=st(a.x,e),r=st(a.y,r),o=ze(a.x+a.width,o),n=ze(a.y+a.height,n)}return{x:e,y:r,width:o-e,height:n-r}}}function Cu(i,t,e,r,o){var n={x:0,y:0},s=1-o,a=s*s,l=a*s;return n.x=i.x*l+e.x*3*a*o+r.x*3*s*o*o+t.x*o*o*o,n.y=i.y*l+e.y*3*a*o+r.y*3*s*o*o+t.y*o*o*o,n}function vp(i,t,e,r,o,n){return o=gp(o),n=gp(n),{x:(-i.x+t.x/o+e.x)*o,y:(-i.y+t.y/n+e.y)*n}}function yp(i,t,e,r,o,n){return o=gp(o),n=gp(n),{x:(t.x+e.x/o-r.x)*o,y:(t.y+e.y/n-r.y)*n}}function gp(i){return 1-i+1e-5}function Fm(i){return i==360?360:i%360}function zm(i,t,e){var r=Number.MAX_VALUE,o=Number.MAX_VALUE,n=-Number.MAX_VALUE,s=-Number.MAX_VALUE,a=[];M(e)||(e=1),a.push(Mm(e,i)),a.push(Mm(e,t));for(var l=Math.min(Math.floor(i/90)*90,Math.floor(t/90)*90),d=Math.max(Math.ceil(i/90)*90,Math.ceil(t/90)*90),u=l;u<=d;u+=90)u>=i&&u<=t&&a.push(Mm(e,u));for(var c=0;c<a.length;c++){var h=a[c];h.x<r&&(r=h.x),h.y<o&&(o=h.y),h.x>n&&(n=h.x),h.y>s&&(s=h.y)}return{x:r,y:o,width:n-r,height:s-o}}function Mm(i,t){return{x:i*Ve(t),y:i*Ae(t)}}function O0(i,t){return i.x>=t.x&&i.x<=t.x+t.width&&i.y>=t.y&&i.y<=t.y+t.height}function Mi(i,t){for(var e=i.length,r=0;r<e;++r)if(i[r]===t)return r;return-1}function bu(i,t){for(var e=i.length,r=0;r<e;++r)if(t(i[r]))return!0;return!1}function Hn(i,t){for(var e=i.length,r=new Array(e),o=0;o<e;++o)r[o]=t(i[o],o);return r}function Z(i,t){for(var e=i.length,r=0;r<e;++r)t(i[r],r)}function L0(i,t){for(var e=i.length;e--;)t(i[e],e)}function Cp(i,t){for(var e=i.length,r=0;r<e&&t(i[r],r);++r);}function N0(i,t){for(var e=i.length,r=t;r<e;++r)i[r-t]=i[r];i.length=e-t}function k0(i,t){for(var e=t.length,r=0;r<e;++r)i.push(t[r])}function ve(i,t){var e=!1,r=i.indexOf(t);if(r!==-1){e=!0,i.splice(r,1);for(var o=i.length;r<o;)i[r]===t?(i.splice(r,1),--o):++r}return e}function Io(i,t,e){var r=Mi(i,t);r!==-1&&vs(i,r),e==null?i.push(t):ms(i,e,t)}function pa(i,t,e){M(e)?e===0?i.unshift(t):i.splice(e,0,t):i.push(t)}function V0(i,t,e){var r=i.indexOf(t);r!==-1&&i.splice(r,1),M(e)?i.splice(e,0,t):i.push(t)}function bp(i){return Array.isArray(i)?i:[i]}function Bn(i){for(var t=i.length,e=new Array(t),r=0;r<t;++r)e[r]=i[r];return e}function ms(i,t,e){i.splice(t,0,e)}function vs(i,t){i.splice(t,1)}function Hl(i,t,e){for(var r=0,o=i.length,n=!1;r<o;){var s=r+o>>1,a=t(e,i[s]);a<0?o=s:(a===0&&(n=!0),r=s+1)}return{found:n,index:n?r-1:r}}function wp(i,t){for(var e=i.length,r=0;r<e;++r)if(t(i[r],r))return r;return-1}function Am(i,t){for(var e=i.length,r=0;r<e;)t(i[r])?++r:(i.splice(r,1),--e)}var Ke=function(){function i(t){this._disposed=!1,this._dispose=t}return i.prototype.isDisposed=function(){return this._disposed},i.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._dispose())},i}();var tt=function(i){A(t,i);function t(e){return i.call(this,function(){Z(e,function(r){r.dispose()})})||this}return t}(Ke);var $n=function(i){A(t,i);function t(){var e=i.call(this,function(){T(e._disposer)&&(e._disposer.dispose(),e._disposer=void 0)})||this;return e}return t.prototype.get=function(){return this._value},t.prototype.set=function(e,r){T(this._disposer)&&this._disposer.dispose(),this._disposer=r,this._value=e},t.prototype.reset=function(){this.set(void 0,void 0)},t}(Ke);var Wn=function(i){A(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e._counter=0,e}return t.prototype.increment=function(){var e=this;return++this._counter,new Ke(function(){--e._counter,e._counter===0&&e.dispose()})},t}(Ke);var Om=!1,Sp=[],wu=[],_p=[],Lm=[],lR=1e3/60,xp=typeof requestAnimationFrame=="function"?function(i){requestAnimationFrame(i)}:function(i){setTimeout(i,lR)};function G0(){for(var i=Date.now(),t=Sp.length,e=0;e<t;++e)Sp[e](i);N0(Sp,t);for(var e=0;e<wu.length;++e)wu[e](i);wu.length=0;for(var e=0;e<_p.length;++e)_p[e](i);_p.length=0,Sp.length===0&&wu.length===0?Om=!1:xp(G0)}function H0(){Om||(Om=!0,xp(G0))}function Nm(i){wu.push(i),H0()}function Ep(i){_p.push(i),H0()}function km(i){Lm.push(i)}function Vm(){for(var i=Date.now(),t=Lm.length,e=0;e<t;++e)Lm.shift()(i)}var Mr=function(){function i(){this._listeners=[],this._killed=[],this._disabled={},this._iterating=0,this._enabled=!0,this._disposed=!1}return i.prototype.isDisposed=function(){return this._disposed},i.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var t=this._listeners;this._iterating=1,this._listeners=null,this._disabled=null;try{Z(t,function(e){e.disposer.dispose()})}finally{this._killed=null,this._iterating=null}}},i.prototype.hasListeners=function(){return this._listeners.length!==0},i.prototype.hasListenersByType=function(t){return bu(this._listeners,function(e){return(e.type===null||e.type===t)&&!e.killed})},i.prototype.enable=function(){this._enabled=!0},i.prototype.disable=function(){this._enabled=!1},i.prototype.enableType=function(t){delete this._disabled[t]},i.prototype.disableType=function(t,e){e===void 0&&(e=1/0),this._disabled[t]=e},i.prototype._removeListener=function(t){if(this._iterating===0){var e=this._listeners.indexOf(t);if(e===-1)throw new Error("Invalid state: could not remove listener");this._listeners.splice(e,1)}else this._killed.push(t)},i.prototype._removeExistingListener=function(t,e,r,o){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener(function(n){n.once===t&&n.type===e&&(r==null||n.callback===r)&&n.context===o&&n.disposer.dispose()})},i.prototype.isEnabled=function(t){if(this._disposed)throw new Error("EventDispatcher is disposed");return this._enabled&&this._listeners.length>0&&this.hasListenersByType(t)&&this._disabled[t]==null},i.prototype.has=function(t,e,r){var o=wp(this._listeners,function(n){return n.once!==!0&&n.type===t&&(e==null||n.callback===e)&&n.context===r});return o!==-1},i.prototype._shouldDispatch=function(t){if(this._disposed)throw new Error("EventDispatcher is disposed");var e=this._disabled[t];return M(e)?(e<=1?delete this._disabled[t]:--this._disabled[t],!1):this._enabled},i.prototype._eachListener=function(t){var e=this;++this._iterating;try{Z(this._listeners,t)}finally{--this._iterating,this._iterating===0&&this._killed.length!==0&&(Z(this._killed,function(r){e._removeListener(r)}),this._killed.length=0)}},i.prototype.dispatchImmediately=function(t,e){this._shouldDispatch(t)&&this._eachListener(function(r){!r.killed&&(r.type===null||r.type===t)&&r.dispatch(t,e)})},i.prototype.dispatch=function(t,e){this._shouldDispatch(t)&&this._eachListener(function(r){!r.killed&&(r.type===null||r.type===t)&&km(function(){r.killed||r.dispatch(t,e)})})},i.prototype._on=function(t,e,r,o,n,s){var a=this;if(this._disposed)throw new Error("EventDispatcher is disposed");this._removeExistingListener(t,e,r,o);var l={type:e,callback:r,context:o,shouldClone:n,dispatch:s,killed:!1,once:t,disposer:new Ke(function(){l.killed=!0,a._removeListener(l)})};return this._listeners.push(l),l},i.prototype.onAll=function(t,e,r){return r===void 0&&(r=!0),this._on(!1,null,t,e,r,function(o,n){return t.call(e,o,n)}).disposer},i.prototype.on=function(t,e,r,o){return o===void 0&&(o=!0),this._on(!1,t,e,r,o,function(n,s){return e.call(r,s)}).disposer},i.prototype.once=function(t,e,r,o){o===void 0&&(o=!0);var n=this._on(!0,t,e,r,o,function(s,a){n.disposer.dispose(),e.call(r,a)});return n.disposer},i.prototype.off=function(t,e,r){this._removeExistingListener(!1,t,e,r)},i.prototype.copyFrom=function(t){var e=this;if(this._disposed)throw new Error("EventDispatcher is disposed");if(t===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");Z(t._listeners,function(r){!r.killed&&r.shouldClone&&(r.type===null?e.onAll(r.callback,r.context):r.once?e.once(r.type,r.callback,r.context):e.on(r.type,r.callback,r.context))})},i}();var Su=function(i){A(t,i);function t(e){var r=i.call(this)||this;return r.target=e,r}return t.prototype.copyFrom=function(e){var r=this;if(this._disposed)throw new Error("EventDispatcher is disposed");if(e===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");Z(e._listeners,function(o){o.context!==e.target&&!o.killed&&o.shouldClone&&(o.type===null?r.onAll(o.callback,o.context):o.once?r.once(o.type,o.callback,o.context):r.on(o.type,o.callback,o.context))})},t}(Mr);function $0(i){return function(t){for(var e in i)if(so(i,e)&&!t([e,i[e]]))break}}function W0(i){var t=[];for(var e in i)so(i,e)&&t.push(e);return t}function dR(i,t){return W0(i).sort(t)}function so(i,t){return{}.hasOwnProperty.call(i,t)}function Gm(i,t){for(var e in i)if(so(i,e)&&!t(e,i[e]))break}function ne(i,t){Gm(i,function(e,r){return t(e,r),!0})}function Fo(i,t,e){Z(dR(i,e),function(r){t(r,i[r])})}function _u(i,t){return Object.assign({},i,t)}function j0(i){return JSON.parse(JSON.stringify(i))}function xu(i,t,e){Z(e,function(r){T(i[r])&&(t[r]=i[r])})}function Bl(i,t){xu(i,t,W0(i))}function Cn(i){return function(t){for(var e=i.length,r=0;r<e&&t(i[r]);++r);}}function Eu(i){var t=[];return i(function(e){return t.push(e),!0}),t}function $l(i,t){i(t)}function de(i,t){i(function(e){return t(e),!0})}function U0(i,t){return Cn(Eu(i).sort(t))}function Dp(i,t){return function(e){return i(function(r){return e(t(r))})}}function q0(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return function(e){for(var r=!0,o=function(a){return r=e(a)},n=i.length,s=0;s<n&&(i[s](o),!!r);++s);}}function K0(i){return function(t){var e=!0,r=function(o){return e=t(o)};i(function(o){return o(r),e})}}function Tp(i){return function(t){var e=0;i(function(r){return t([e++,r])})}}function Pp(i,t){var e=!1;return i(function(r){return t(r)?(e=!0,!1):!0}),e}var uR=function(){function i(t,e){this.createNewItems=!1,this.list=t,this._create=e,this.reset()}return i.prototype.reset=function(){this._listCopy=Eu(this.list.iterator())},i.prototype.clear=function(){this._listCopy.length=0},i.prototype.getFirst=function(){return this.returnItem(0)},i.prototype.getLast=function(){return this.returnItem(this._listCopy.length-1)},i.prototype.find=function(t){var e=wp(this._listCopy,t);if(e!==-1){var r=this._listCopy[e];return ve(this._listCopy,r),r}else return this.getLast()},i.prototype.removeItem=function(t){return ve(this._listCopy,t)},i.prototype.returnItem=function(t){if(t>=0&&t<this._listCopy.length){var e=this._listCopy[t];return ve(this._listCopy,e),e}else if(this.createNewItems)return this._create()},i.prototype.iterator=function(){return Cn(this._listCopy)},i}();function Y0(i,t){return i===t?0:i<t?-1:1}function Hm(i,t){return new Array(t+1).join(i)}function X0(i){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<i;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}var ao=function(i){A(t,i);function t(e){var r=this,o=e.events.on("removed",function(n){n.oldValue.dispose()},void 0,!1);return r=i.call(this,function(){o.dispose(),de(e.iterator(),function(n){var s=n[1];s.dispose()})})||this,r}return t}(Ke);var Be=function(){function i(){this.events=new Mr,this._dictionary={}}return i.prototype.hasKey=function(t){return so(this._dictionary,t)},i.prototype.getKey=function(t){return this._dictionary[t]},i.prototype.insertKey=function(t,e){if(so(this._dictionary,t))throw new Error("Key "+t+" already exists in dictionary");this._dictionary[t]=e,this.events.isEnabled("insertKey")&&this.events.dispatchImmediately("insertKey",{type:"insertKey",target:this,key:t,newValue:e})},i.prototype.setKey=function(t,e){if(so(this._dictionary,t)){var r=this._dictionary[t];r!==e&&(this._dictionary[t]=e,this.events.isEnabled("setKey")&&this.events.dispatchImmediately("setKey",{type:"setKey",target:this,key:t,oldValue:r,newValue:e}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:r}))}else this._dictionary[t]=e,this.events.isEnabled("insertKey")&&this.events.dispatchImmediately("insertKey",{type:"insertKey",target:this,key:t,newValue:e})},i.prototype.updateKey=function(t,e){if(so(this._dictionary,t)){var r=this._dictionary[t],o=e(r);r!==o&&(this._dictionary[t]=o,this.events.isEnabled("setKey")&&this.events.dispatchImmediately("setKey",{type:"setKey",target:this,key:t,oldValue:r,newValue:o}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:r}))}else throw new Error("Key "+t+" doesn't exist in dictionary")},i.prototype.removeKey=function(t){if(so(this._dictionary,t)){var e=this._dictionary[t];delete this._dictionary[t],this.events.isEnabled("removeKey")&&this.events.dispatchImmediately("removeKey",{type:"removeKey",target:this,key:t,oldValue:e}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:e})}},i.prototype.insertKeyIfEmpty=function(t,e){return this.hasKey(t)||this.insertKey(t,e()),this.getKey(t)},i.prototype.clear=function(){var t=this;this.events.isEnabled("removed")&&ne(this._dictionary,function(e,r){t.events.dispatchImmediately("removed",{type:"removed",target:t,oldValue:r})}),this._dictionary={},this.events.isEnabled("cleared")&&this.events.dispatchImmediately("cleared",{type:"cleared",target:this})},i.prototype.copyFrom=function(t){var e=this;de(t.iterator(),function(r){e.setKey(r[0],r[1])})},i.prototype.iterator=function(){return $0(this._dictionary)},i.prototype[Symbol.iterator]=function(){var t,e,r,o;return $e(this,function(n){switch(n.label){case 0:t=[];for(e in this._dictionary)t.push(e);r=0,n.label=1;case 1:return r<t.length?(o=t[r],so(this._dictionary,o)?[4,[o,this._dictionary[o]]]:[3,3]):[3,4];case 2:n.sent(),n.label=3;case 3:return r++,[3,1];case 4:return[2]}})},i.prototype.each=function(t){de(this.iterator(),function(e){var r=Jv(e,2),o=r[0],n=r[1];return t(o,n)})},i.prototype.sortedIterator=function(){return U0(this.iterator(),function(t,e){return Y0(t[0],e[0])})},i}();var Wl=function(i){A(t,i);function t(e){var r=i.call(this)||this;return r.template=e,r}return Object.defineProperty(t.prototype,"template",{get:function(){return this._template},set:function(e){e.isTemplate=!0,this._template=e},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(e){var r=this;de(e.iterator(),function(o){r.setKey(o[0],o[1].clone())})},t.prototype.create=function(e){var r=this;return this.insertKeyIfEmpty(e,function(){return r.template.clone()})},t}(Be);var Q0=function(){function i(){this._storage=new Be,this.ttl=1e3}return i.prototype.set=function(t,e,r,o){var n=this._storage.insertKeyIfEmpty(t,function(){return new Be}),s={touched:new Date().getTime(),ttl:M(o)?o:this.ttl,value:r};n.setKey(e,s)},i.prototype.get=function(t,e,r){if(r===void 0&&(r=void 0),this._storage.hasKey(t)){var o=this._storage.getKey(t);if(o.hasKey(e)){var n=o.getKey(e);return n.ttl&&n.touched+n.ttl<new Date().getTime()&&(n.expired=!0),n.expired?(o.removeKey(e),r):n.value}else return r}else return r},i.prototype.clear=function(t){t?this._storage.removeKey(t):this._storage.clear()},i}();var ys=new Q0;var Z0=function(){function i(){var t=this;this.events=new Mr,this.themes=[],this.loadedThemes={},this._uidCount=0,this.registeredClasses={},this._placeholders={},this.invalidSprites={},this.invalidDatas={},this.invalidRawDatas=[],this.invalidDataItems=[],this.invalidDataRange=[],this.invalidPositions={},this.invalidLayouts={},this.baseSprites=[],this.baseSpritesByUid={},this.queue=[],this.deferred=[],this.uid=this.getUniqueId(),this.invalidSprites.noBase=[],this.invalidDatas.noBase=[],this.invalidLayouts.noBase=[],this.invalidPositions.noBase=[],typeof addEventListener<"u"&&(addEventListener("beforeprint",function(){Z(t.baseSprites,function(e){var r=e.paper.svg;r.setAttribute("viewBox","0 0 "+r.clientWidth+" "+r.clientHeight)})}),addEventListener("afterprint",function(){Z(t.baseSprites,function(e){var r=e.paper.svg;r.removeAttribute("viewBox")})}))}return i.prototype.getUniqueId=function(){var t=this._uidCount;return this._uidCount+=1,"id-"+t},Object.defineProperty(i.prototype,"map",{get:function(){return this._map||(this._map=new Be),this._map},enumerable:!0,configurable:!0}),i.prototype.setCache=function(t,e,r){ys.set(this.uid,t,e,r)},i.prototype.getCache=function(t,e){return e===void 0&&(e=void 0),ys.get(this.uid,t,e)},i.prototype.dispatch=function(t,e){this.events.isEnabled(t)&&(e?(e.type=t,e.target=e.target||this,this.events.dispatch(t,{type:t,target:this})):this.events.dispatch(t,{type:t,target:this}))},i.prototype.dispatchImmediately=function(t,e){this.events.isEnabled(t)&&(e?(e.type=t,e.target=e.target||this,this.events.dispatchImmediately(t,e)):this.events.dispatchImmediately(t,{type:t,target:this}))},i.prototype.getPlaceholder=function(t){return T(this._placeholders[t])?this._placeholders[t]:(this._placeholders[t]="__amcharts_"+t+"_"+X0(8)+"__",this._placeholders[t])},i.prototype.addToInvalidComponents=function(t){t.baseId?Io(this.invalidDatas[t.baseId],t):Io(this.invalidDatas.noBase,t)},i.prototype.removeFromInvalidComponents=function(t){t.baseId&&ve(this.invalidDatas[t.baseId],t),ve(this.invalidDatas.noBase,t)},i.prototype.addToInvalidSprites=function(t){t.baseId?pa(this.invalidSprites[t.baseId],t):pa(this.invalidSprites.noBase,t)},i.prototype.removeFromInvalidSprites=function(t){t.baseId&&ve(this.invalidSprites[t.baseId],t),ve(this.invalidSprites.noBase,t)},i.prototype.addToInvalidPositions=function(t){t.baseId?pa(this.invalidPositions[t.baseId],t):pa(this.invalidPositions.noBase,t)},i.prototype.removeFromInvalidPositions=function(t){t.baseId&&ve(this.invalidPositions[t.baseId],t),ve(this.invalidPositions.noBase,t)},i.prototype.addToInvalidLayouts=function(t){t.baseId?pa(this.invalidLayouts[t.baseId],t):pa(this.invalidLayouts.noBase,t)},i.prototype.removeFromInvalidLayouts=function(t){t.baseId&&ve(this.invalidLayouts[t.baseId],t),ve(this.invalidLayouts.noBase,t)},i}();var P=new Z0;function Si(i,t){var e=P.registeredClasses[t];return e!=null&&i instanceof e}var Bm=function(){function i(t,e,r){this._array=t,this._start=e,this._end=r}return i.prototype.iterator=function(){var t=this;return function(e){if(t._start!==t._end)if(t._start<t._end)for(var r=t._start;r<t._end&&e(t._array[r]);++r);else for(var r=t._start-1;r>=t._end&&e(t._array[r]);--r);}},i.prototype.backwards=function(){return new i(this._array,this._end,this._start)},i.prototype.range=function(t,e){if(t<=e){if(this._start===this._end)return this;if(this._start<this._end){var r=e-t;return t=Math.max(this._start+t,this._start),e=Math.min(t+r,this._end),new i(this._array,t,e)}else{var r=e-t;return t=Math.max(this._start-t,this._end),e=Math.max(t-r,this._end),new i(this._array,t,e)}}else throw new Error("Start index must be lower than end index")},i}();var cR=function(i){A(t,i);function t(e,r,o){var n=i.call(this,[e.events.on("inserted",function(s){var a=s.newValue,l=n._getKey(a),d=0;$l(e.iterator(),function(u){return u===a?!1:(n._getKey(u)===l&&++d,!0)}),n._insert(a,l,d)},void 0,!1),e.events.on("removed",function(s){n._remove(s.oldValue)},void 0,!1)])||this;return n._keys=[],n._groups={},n._getKey=r,n._sort=o,de(e.iterator(),function(s){n._insert(s,r(s))}),n}return t.prototype._insert=function(e,r,o){if(this._groups[r]==null){this._groups[r]=[];var n=Hl(this._keys,this._sort,r),s=n.found,a=n.index;if(s)throw new Error("Key already exists: "+r);ms(this._keys,a,r)}o==null?this._groups[r].push(e):ms(this._groups[r],o,e)},t.prototype._remove=function(e){var r=this._getKey(e),o=this._groups[r];if(o!=null&&(ve(o,e),o.length===0)){delete this._groups[r];var n=Hl(this._keys,this._sort,r),s=n.found,a=n.index;if(s)vs(this._keys,a);else throw new Error("Key doesn't exist: "+r)}},t.prototype.iterator=function(){var e=this;return K0(Dp(Cn(this._keys),function(r){return Cn(e._groups[r])}))},t}(tt);var St=function(i){A(t,i);function t(e,r){r===void 0&&(r=!0);var o=this;if(r){var n=e.events.on("removed",function(s){s.oldValue.dispose()},void 0,!1);o=i.call(this,function(){n.dispose(),de(e.iterator(),function(s){s.dispose()})})||this}else o=i.call(this,function(){de(e.iterator(),function(s){s.dispose()})})||this;return o}return t}(Ke);function Du(i,t){if(!(i>=0&&i<t))throw new Error("Index out of bounds: "+i)}var Ie=function(){function i(t){t===void 0&&(t=[]),this.events=new Mr,this._values=t}return Object.defineProperty(i.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),i.prototype.contains=function(t){return this._values.indexOf(t)!==-1},i.prototype.removeValue=function(t){for(var e=0,r=this._values.length;e<r;)this._values[e]===t?(this.removeIndex(e),--r):++e},i.prototype.indexOf=function(t){return Mi(this._values,t)},Object.defineProperty(i.prototype,"length",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),i.prototype.hasIndex=function(t){return t>=0&&t<this._values.length},i.prototype.getIndex=function(t){return this._values[t]},i.prototype.setIndex=function(t,e){Du(t,this._values.length);var r=this._values[t];return r!==e&&(this._values[t]=e,this.events.isEnabled("setIndex")&&this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:t,oldValue:r,newValue:e}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:r}),this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:e})),r},i.prototype.insertIndex=function(t,e){Du(t,this._values.length+1),ms(this._values,t,e),this.events.isEnabled("insertIndex")&&this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:t,newValue:e}),this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:e})},i.prototype._sortQuicksort=function(t,e,r){if(t<e){var o=this._sortPartition(t,e,r);this._sortQuicksort(t,o,r),this._sortQuicksort(o+1,e,r)}},i.prototype._sortPartition=function(t,e,r){for(var o=this._values,n=o[t],s=t-1,a=e+1;;){do++s;while(r(o[s],n)<0);do--a;while(r(o[a],n)>0);if(s>=a)return a;this.swap(s,a)}},i.prototype.sort=function(t){this._sortQuicksort(0,this._values.length-1,t)},i.prototype.swap=function(t,e){var r=this._values.length;if(Du(t,r),Du(e,r),t!==e){var o=this._values[t],n=this._values[e];this._values[t]=n,this.events.isEnabled("setIndex")&&this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:t,oldValue:o,newValue:n}),this._values[e]=o,this.events.isEnabled("setIndex")&&this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:e,oldValue:n,newValue:o})}},i.prototype.removeIndex=function(t){Du(t,this._values.length);var e=this._values[t];return vs(this._values,t),this.events.isEnabled("removeIndex")&&this.events.dispatchImmediately("removeIndex",{type:"removeIndex",target:this,index:t,oldValue:e}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:e}),e},i.prototype.moveValue=function(t,e){var r=this.indexOf(t);if(r!==-1){var o=this._values[r];vs(this._values,r),this.events.isEnabled("removeIndex")&&this.events.dispatchImmediately("removeIndex",{type:"removeIndex",target:this,index:r,oldValue:o})}e==null?(e=this._values.length,this._values.push(t)):ms(this._values,e,t),this.events.isEnabled("insertIndex")&&this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:e,newValue:t}),r===-1&&this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:t})},i.prototype.push=function(t){var e=this._values.push(t)-1;return this.events.isEnabled("insertIndex")&&this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:e,newValue:t}),this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:t}),t},i.prototype.unshift=function(t){this.insertIndex(0,t)},i.prototype.pushAll=function(t){var e=this;Z(t,function(r){e.push(r)})},i.prototype.copyFrom=function(t){this.pushAll(t._values)},i.prototype.pop=function(){var t=this._values.length-1;return t<0?void 0:this.removeIndex(this._values.length-1)},i.prototype.shift=function(){return this._values.length?this.removeIndex(0):void 0},i.prototype.setAll=function(t){var e=this,r=Bn(this._values);this._values.length=0,Z(t,function(o){e._values.push(o)}),this.events.isEnabled("setAll")&&this.events.dispatchImmediately("setAll",{type:"setAll",target:this,oldArray:r,newArray:this._values}),this.events.isEnabled("removed")&&Z(r,function(o){e.events.dispatchImmediately("removed",{type:"removed",target:e,oldValue:o})}),this.events.isEnabled("inserted")&&Z(this._values,function(o){e.events.dispatchImmediately("inserted",{type:"inserted",target:e,newValue:o})})},i.prototype.clear=function(){this.setAll([])},i.prototype.iterator=function(){return Cn(this._values)},i.prototype[Symbol.iterator]=function(){var t,e;return $e(this,function(r){switch(r.label){case 0:t=this._values.length,e=0,r.label=1;case 1:return e<t?[4,this._values[e]]:[3,4];case 2:r.sent(),r.label=3;case 3:return++e,[3,1];case 4:return[2]}})},i.prototype.each=function(t){Z(this._values,t)},i.prototype.range=function(t,e){if(t<=e){var r=e-t;return t=Math.max(t,0),e=Math.min(t+r,this._values.length),new Bm(this._values,t,e)}else throw new Error("Start index must be lower than end index")},i.prototype.backwards=function(){return new Bm(this._values,this._values.length,0)},i}();var oi=function(i){A(t,i);function t(e){var r=i.call(this)||this;return r.template=e,r}return Object.defineProperty(t.prototype,"template",{get:function(){return this._template},set:function(e){e.isTemplate=!0,this._template=e},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(e){var r=this;de(e.iterator(),function(o){r.push(o.clone())})},t.prototype.create=function(e){var r=e!=null?new e:this.template.clone();return this.push(r),r},t.prototype.clone=function(){for(var e=new t(this.template),r=this.values,o=r.length,n=0;n<o;++n)e.push(r[n].clone());return e},t}(Ie);var $m=function(){function i(t){this._values=[],this.events=new Mr,t!=null&&this.setAll(t)}return Object.defineProperty(i.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),i.prototype._insert=function(t){return this._values.push(t),this._values.length-1},Object.defineProperty(i.prototype,"length",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),i.prototype.indexOf=function(t){return Mi(this._values,t)},i.prototype.contains=function(t){return this.indexOf(t)!==-1},i.prototype.getIndex=function(t){return this._values[t]},Object.defineProperty(i.prototype,"first",{get:function(){return this._values[0]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"last",{get:function(){return this._values[this._values.length-1]},enumerable:!0,configurable:!0}),i.prototype.insert=function(t){var e=this._insert(t);this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,index:e,newValue:t})},i.prototype.remove=function(t){var e=this.indexOf(t);if(e!==-1){var r=this._values[e];vs(this._values,e),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,index:e,oldValue:r})}},i.prototype.setAll=function(t){var e=this;L0(this._values,function(r,o){e._values.pop(),e.events.isEnabled("removed")&&e.events.dispatchImmediately("removed",{type:"removed",target:e,index:o,oldValue:r})}),Z(t,function(r){e.insert(r)})},i.prototype.clear=function(){this.setAll([])},i.prototype.slice=function(t,e){var r=new i;return r._values=this._values.slice(t,e),r},i.prototype.findClosestIndex=function(t,e,r){r===void 0&&(r="any");var o=-1,n,s,a=0;return $l(this.iterator(),function(l){var d=e(l);if(r==="any"){if(d===t)return o=a,!1;var u=Math.abs(t-d);(!T(s)||s>u)&&(o=a,n=d,s=u)}else r==="left"&&d<t?(!T(n)||n<d)&&(o=a,n=d):r==="right"&&d>=t&&(!T(n)||n>=d)&&(o=a,n=d);return++a,!0}),o===-1&&(r==="left"?o=0:r==="right"&&(o=this.length-1)),o},i.prototype.iterator=function(){return Cn(this._values)},i.prototype[Symbol.iterator]=function(){var t,e;return $e(this,function(r){switch(r.label){case 0:t=this._values.length,e=0,r.label=1;case 1:return e<t?[4,this._values[e]]:[3,4];case 2:r.sent(),r.label=3;case 3:return++e,[3,1];case 4:return[2]}})},i.prototype.each=function(t){Z(this._values,t)},i}();var Tu=function(i){A(t,i);function t(e){var r=i.call(this)||this;return r._ordering=e,r}return t.prototype._insert=function(e){var r=Hl(this._values,this._ordering,e).index;return ms(this._values,r,e),r},t.prototype.indexOf=function(e){var r=Hl(this._values,this._ordering,e),o=r.found,n=r.index;return o?n:-1},t.prototype.update=function(e){var r=Mi(this._values,e);if(r!==-1){var o=this._values.length-1;(r===0||this._ordering(this._values[r-1],e)<0)&&(r===o||this._ordering(e,this._values[r+1])<0)||(vs(this._values,r),this._insert(e))}},t}($m);var jl=function(i){A(t,i);function t(e){var r=i.call(this)||this;return r.template=e,r}return Object.defineProperty(t.prototype,"template",{get:function(){return this._template},set:function(e){e.isTemplate=!0,this._template=e},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(e){var r=this;de(e.iterator(),function(o){r.insert(o.clone())})},t.prototype.slice=function(e,r){var o=new t(this.template);return o._values=this._values.slice(e,r),o},t.prototype.create=function(e){var r=e!=null?new e:this.template.clone();return this.insert(r),r},t}($m);var Wm=function(i){A(t,i);function t(e,r){var o=i.call(this,r)||this;return o.template=e,o}return Object.defineProperty(t.prototype,"template",{get:function(){return this._template},set:function(e){e.isTemplate=!0,this._template=e},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(e){var r=this;de(e.iterator(),function(o){r.insert(o.clone())})},t.prototype.create=function(e){var r=e!=null?new e:this.template.clone();return this.insert(r),r},t}(Tu);function Pu(i,t){return i===t?0:i<t?-1:1}function Mp(i,t){return i===0?t:i}var eS=function(){function i(){this._callbackId=0,this._callbacks=new Tu(function(t,e){return Mp(Pu(t.priority,e.priority),Pu(t.id,e.id))})}return i.prototype.addAll=function(t,e,r,o,n){o===void 0&&(o=0),this._callbacks.insert({id:++this._callbackId,key:e,callback:r,priority:o,scope:n,type:t})},i.prototype.isEnabled=function(t,e){return bu(this._callbacks.values,function(r){return r.key===e&&t instanceof r.type})},i.prototype.applyAll=function(t,e,r){var o=this._callbacks.values,n=o.length;if(n==0)return r;for(var s=0;s<n;++s){var a=o[s];a.key===e&&t instanceof a.type&&(r=a.callback.call(a.scope,r,t,e))}return r},i}();var Ru=new eS,_t=function(){function i(t){this._callbackId=0,this._callbacks=new Tu(function(e,r){return Mp(Pu(e.priority,r.priority),Pu(e.id,r.id))}),this._disabled={},this.object=t,this.events=this._callbacks.events}return i.prototype.add=function(t,e,r,o){r===void 0&&(r=0),this._callbacks.insert({id:++this._callbackId,key:t,callback:e,priority:r,scope:o})},i.prototype.has=function(t,e,r,o){return r===void 0&&(r=0),Pp(this._callbacks.iterator(),function(n){return n.key===t&&n.callback===e&&n.priority===r&&n.scope===o})},i.prototype.remove=function(t,e){var r=this;Z(Eu(this._callbacks.iterator()),function(o){o.key===t&&(!M(e)||e===o.priority)&&r._callbacks.remove(o)})},i.prototype.enableKey=function(t){delete this._disabled[t]},i.prototype.disableKey=function(t,e){e===void 0&&(e=1/0),this._disabled[t]=e},i.prototype._hasListenersByType=function(t){return bu(this._callbacks.values,function(e){return e.key===t})},i.prototype.isEnabled=function(t){return this._disabled[t]==null&&(this._hasListenersByType(t)||Ru.isEnabled(this.object,t))},i.prototype._shouldDispatch=function(t){var e=this._disabled[t];return M(e)?(e<=1?delete this._disabled[t]:--this._disabled[t],!1):!0},i.prototype.apply=function(t,e){if(this._shouldDispatch(t)){var r=this._callbacks.values,o=r.length;if(o>0)for(var n=0;n<o;++n){var s=r[n];s.key===t&&(e=s.callback.call(s.scope,e,this.object,t))}return e=Ru.applyAll(this.object,t,e),e}else return e},i.prototype.keys=function(){return Eu(Dp(this._callbacks.iterator(),function(t){return t.key}))},i.prototype.copyFrom=function(t){var e=this;de(t._callbacks.iterator(),function(r){e.add(r.key,r.callback,r.priority,r.scope)}),ne(t._disabled,function(r,o){e._disabled[r]=o})},i.prototype.clear=function(){this._callbacks.clear()},i}();var tS={aliceblue:{r:240,g:248,b:255},antiquewhite:{r:250,g:235,b:215},aqua:{r:0,g:255,b:255},aquamarine:{r:127,g:255,b:212},azure:{r:240,g:255,b:255},beige:{r:245,g:245,b:220},bisque:{r:255,g:228,b:196},black:{r:0,g:0,b:0},blanchedalmond:{r:255,g:235,b:205},blue:{r:0,g:0,b:255},blueviolet:{r:138,g:43,b:226},brown:{r:165,g:42,b:42},burlywood:{r:222,g:184,b:135},cadetblue:{r:95,g:158,b:160},chartreuse:{r:127,g:255,b:0},chocolate:{r:210,g:105,b:30},coral:{r:255,g:127,b:80},cornflowerblue:{r:100,g:149,b:237},cornsilk:{r:255,g:248,b:220},crimson:{r:220,g:20,b:60},cyan:{r:0,g:255,b:255},darkblue:{r:0,g:0,b:139},darkcyan:{r:0,g:139,b:139},darkgoldenrod:{r:184,g:134,b:11},darkgray:{r:169,g:169,b:169},darkgrey:{r:169,g:169,b:169},darkgreen:{r:0,g:100,b:0},darkkhaki:{r:189,g:183,b:107},darkmagenta:{r:139,g:0,b:139},darkolivegreen:{r:85,g:107,b:47},darkorange:{r:255,g:140,b:0},darkorchid:{r:153,g:50,b:204},darkred:{r:139,g:0,b:0},darksalmon:{r:233,g:150,b:122},darkseagreen:{r:143,g:188,b:143},darkslateblue:{r:72,g:61,b:139},darkslategray:{r:47,g:79,b:79},darkslategrey:{r:47,g:79,b:79},darkturquoise:{r:0,g:206,b:209},darkviolet:{r:148,g:0,b:211},deeppink:{r:255,g:20,b:147},deepskyblue:{r:0,g:191,b:255},dimgray:{r:105,g:105,b:105},dimgrey:{r:105,g:105,b:105},dodgerblue:{r:30,g:144,b:255},firebrick:{r:178,g:34,b:34},floralwhite:{r:255,g:250,b:240},forestgreen:{r:34,g:139,b:34},fuchsia:{r:255,g:0,b:255},gainsboro:{r:220,g:220,b:220},ghostwhite:{r:248,g:248,b:255},gold:{r:255,g:215,b:0},goldenrod:{r:218,g:165,b:32},gray:{r:128,g:128,b:128},grey:{r:128,g:128,b:128},green:{r:0,g:128,b:0},greenyellow:{r:173,g:255,b:47},honeydew:{r:240,g:255,b:240},hotpink:{r:255,g:105,b:180},indianred:{r:205,g:92,b:92},indigo:{r:75,g:0,b:130},ivory:{r:255,g:255,b:240},khaki:{r:240,g:230,b:140},lavender:{r:230,g:230,b:250},lavenderblush:{r:255,g:240,b:245},lawngreen:{r:124,g:252,b:0},lemonchiffon:{r:255,g:250,b:205},lightblue:{r:173,g:216,b:230},lightcoral:{r:240,g:128,b:128},lightcyan:{r:224,g:255,b:255},lightgoldenrodyellow:{r:250,g:250,b:210},lightgray:{r:211,g:211,b:211},lightgrey:{r:211,g:211,b:211},lightgreen:{r:144,g:238,b:144},lightpink:{r:255,g:182,b:193},lightsalmon:{r:255,g:160,b:122},lightseagreen:{r:32,g:178,b:170},lightskyblue:{r:135,g:206,b:250},lightslategray:{r:119,g:136,b:153},lightslategrey:{r:119,g:136,b:153},lightsteelblue:{r:176,g:196,b:222},lightyellow:{r:255,g:255,b:224},lime:{r:0,g:255,b:0},limegreen:{r:50,g:205,b:50},linen:{r:250,g:240,b:230},magenta:{r:255,g:0,b:255},maroon:{r:128,g:0,b:0},mediumaquamarine:{r:102,g:205,b:170},mediumblue:{r:0,g:0,b:205},mediumorchid:{r:186,g:85,b:211},mediumpurple:{r:147,g:112,b:219},mediumseagreen:{r:60,g:179,b:113},mediumslateblue:{r:123,g:104,b:238},mediumspringgreen:{r:0,g:250,b:154},mediumturquoise:{r:72,g:209,b:204},mediumvioletred:{r:199,g:21,b:133},midnightblue:{r:25,g:25,b:112},mintcream:{r:245,g:255,b:250},mistyrose:{r:255,g:228,b:225},moccasin:{r:255,g:228,b:181},navajowhite:{r:255,g:222,b:173},navy:{r:0,g:0,b:128},oldlace:{r:253,g:245,b:230},olive:{r:128,g:128,b:0},olivedrab:{r:107,g:142,b:35},orange:{r:255,g:165,b:0},orangered:{r:255,g:69,b:0},orchid:{r:218,g:112,b:214},palegoldenrod:{r:238,g:232,b:170},palegreen:{r:152,g:251,b:152},paleturquoise:{r:175,g:238,b:238},palevioletred:{r:219,g:112,b:147},papayawhip:{r:255,g:239,b:213},peachpuff:{r:255,g:218,b:185},peru:{r:205,g:133,b:63},pink:{r:255,g:192,b:203},plum:{r:221,g:160,b:221},powderblue:{r:176,g:224,b:230},purple:{r:128,g:0,b:128},rebeccapurple:{r:102,g:51,b:153},red:{r:255,g:0,b:0},rosybrown:{r:188,g:143,b:143},royalblue:{r:65,g:105,b:225},saddlebrown:{r:139,g:69,b:19},salmon:{r:250,g:128,b:114},sandybrown:{r:244,g:164,b:96},seagreen:{r:46,g:139,b:87},seashell:{r:255,g:245,b:238},sienna:{r:160,g:82,b:45},silver:{r:192,g:192,b:192},skyblue:{r:135,g:206,b:235},slateblue:{r:106,g:90,b:205},slategray:{r:112,g:128,b:144},slategrey:{r:112,g:128,b:144},snow:{r:255,g:250,b:250},springgreen:{r:0,g:255,b:127},steelblue:{r:70,g:130,b:180},tan:{r:210,g:180,b:140},teal:{r:0,g:128,b:128},thistle:{r:216,g:191,b:216},tomato:{r:255,g:99,b:71},turquoise:{r:64,g:224,b:208},violet:{r:238,g:130,b:238},wheat:{r:245,g:222,b:179},white:{r:255,g:255,b:255},whitesmoke:{r:245,g:245,b:245},yellow:{r:255,g:255,b:0},yellowgreen:{r:154,g:205,b:50}};function iS(i,t){var e;return tS[i]?e=tS[i]:i.charAt(0)==="#"?e=pR(i):i.match(/^rgba?\(/)&&(e=fR(i)),e||(e={r:0,g:0,b:0,a:1}),T(t)&&(e.a=t),e}function pR(i){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;i=i.replace(t,function(r,o,n,s){return o+o+n+n+s+s});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:gR(i)}function gR(i){var t=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])$/i;i=i.replace(t,function(r,o,n,s,a){return o+o+n+n+s+s+a+a});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),a:parseInt(e[4],16)/256}:void 0}function fR(i){i=i.replace(/[ ]/g,"");var t=i.match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i);if(t)t.push("1");else if(t=i.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i),!t)return;return{r:parseInt(t[1]),g:parseInt(t[2]),b:parseInt(t[3]),a:parseFloat(t[4])}}function rS(i){return"#"+jm(i.r.toString(16))+jm(i.g.toString(16))+jm(i.b.toString(16))}function oS(i){return T(i.a)&&i.a!==1?"rgba("+i.r+","+i.g+","+i.b+","+i.a+")":"rgb("+i.r+","+i.g+","+i.b+")"}function jm(i){return i.length==1?"0"+i:""+i}function Fp(i,t,e){return e=De(e,0,1),i?t?{r:i.r+Math.round((t.r-i.r)*e),g:i.g+Math.round((t.g-i.g)*e),b:i.b+Math.round((t.b-i.b)*e),a:(i.a||1)+Math.round(((t.a||1)-(i.a||1))*e)}:i:t||i}function nS(i,t){return i&&{r:Math.max(0,Math.min(255,i.r+Ip(i.r,t))),g:Math.max(0,Math.min(255,i.g+Ip(i.g,t))),b:Math.max(0,Math.min(255,i.b+Ip(i.b,t))),a:i.a}}function Ip(i,t){var e=t>0?255-i:i;return Math.round(e*t)}function sS(i,t){if(i){var e=Math.min(Math.max(i.r,i.g,i.b),230),r=Ip(e,t);return{r:Math.max(0,Math.min(255,Math.round(i.r+r))),g:Math.max(0,Math.min(255,Math.round(i.g+r))),b:Math.max(0,Math.min(255,Math.round(i.b+r))),a:i.a}}else return i}function aS(i,t){if(i==null||t==1)return i;var e=Mu(i);return e.s=t,Um(e)}function Um(i){var t,e,r,o=i.h,n=i.s,s=i.l;if(n==0)t=e=r=s;else{var a=function(c,h,p){return p<0&&(p+=1),p>1&&(p-=1),p<.16666666666666666?c+(h-c)*6*p:p<.5?h:p<.6666666666666666?c+(h-c)*(.6666666666666666-p)*6:c},l=s<.5?s*(1+n):s+n-s*n,d=2*s-l;t=a(d,l,o+1/3),e=a(d,l,o),r=a(d,l,o-1/3)}return{r:Math.round(t*255),g:Math.round(e*255),b:Math.round(r*255)}}function Mu(i){var t=i.r/255,e=i.g/255,r=i.b/255,o=Math.max(t,e,r),n=Math.min(t,e,r),s=0,a=0,l=(o+n)/2;if(o===n)s=a=0;else{var d=o-n;switch(a=l>.5?d/(2-o-n):d/(o+n),o){case t:s=(e-r)/d+(e<r?6:0);break;case e:s=(r-t)/d+2;break;case r:s=(t-e)/d+4;break}s/=6}return{h:s,s:a,l}}function lS(i){return(i.r*299+i.g*587+i.b*114)/1e3>=128}var Ue=function(){function i(t){this._value=t}return Object.defineProperty(i.prototype,"rgb",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hex",{get:function(){return this._value?rS(this._value):"none"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rgba",{get:function(){return this._value?oS(this._value):"none"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"alpha",{get:function(){return this._value!=null&&this._value.a!=null?this._value.a:1},set:function(t){this._value&&(this._value.a=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lightColor",{get:function(){return this._lightColor||(this._lightColor=new i({r:255,g:255,b:255})),this._lightColor},set:function(t){this._lightColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"darkColor",{get:function(){return this._darkColor||(this._darkColor=new i({r:0,g:0,b:0})),this._darkColor},set:function(t){this._darkColor=t},enumerable:!0,configurable:!0}),i.prototype.toString=function(){return this.alpha<1?this.rgba:this.hex},i.prototype.lighten=function(t){return new i(nS(this.rgb,t))},i.prototype.brighten=function(t){return new i(sS(this.rgb,t))},i.prototype.saturate=function(t){return new i(aS(this.rgb,t))},Object.defineProperty(i.prototype,"alternative",{get:function(){if(this.rgb!=null)return lS(this.rgb)?this.darkColor:this.lightColor;throw new Error("Color does not exist")},enumerable:!0,configurable:!0}),i}();function fe(i,t){if(!T(i))return new Ue(void 0);if(typeof i=="string"){var e="_color_"+i+"_"+(t||"1"),r=P.getCache(e);if(r)return new Ue({r:r.r,g:r.g,b:r.b,a:r.a});var o=iS(i,t);return P.setCache(e,o),new Ue(o)}return i instanceof Ue?(T(t)&&(i.alpha=t),i):new Ue(i)}function dS(i){return i instanceof Ue}function uS(i){return fe(i)}function ga(i){return T(i)&&!dS(i)?uS(i):i}var lt=function(){function i(){this._disposed=!1,this._disposers=[],this.className="BaseObject"}return i.prototype.debug=function(){},Object.defineProperty(i.prototype,"uid",{get:function(){return this._uid||(this._uid=P.getUniqueId(),P.map.setKey(this._uid,this)),this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"id",{get:function(){return this._id},set:function(t){this._id=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"map",{get:function(){return this._map||(this._map=new Be),this._map},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"delayedMap",{get:function(){return this._delayedMap||(this._delayedMap=new Be),this._delayedMap},enumerable:!0,configurable:!0}),i.prototype.addDelayedMap=function(t,e){var r=this.delayedMap;r.hasKey(e)||r.setKey(e,[]);var o=r.getKey(e);o.push({property:t,target:this})},i.prototype.processDelayedMap=function(){var t=this;this.delayedMap.each(function(e,r){if(t.map.hasKey(e)){var o=t.map.getKey(e);Z(r,function(n){n.target[n.property]=o}),t.delayedMap.removeKey(e)}})},i.prototype.applyTheme=function(){var t=this;if(P){var e=this.getCurrentThemes();e&&Z(e,function(r,o){r(t)})}},Object.defineProperty(i.prototype,"themes",{get:function(){return this._themes},set:function(t){this._themes=t},enumerable:!0,configurable:!0}),i.prototype.getCurrentThemes=function(){return this.themes||P.themes},i.prototype.isDisposed=function(){return this._disposed},i.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var t=this._disposers;for(this._disposers=null;t.length!==0;){var e=t.shift();e.dispose()}this.clearCache(),this.clonedFrom&&this.clonedFrom.clones.removeValue(this);var r=this._uid;r!=null&&P.map.removeKey(r)}},i.prototype.addDisposer=function(t){this._disposers.push(t)},i.prototype.removeDispose=function(t){if(!this._disposed){var e=Mi(this._disposers,t);e>-1&&this._disposers.splice(e,1)}t.dispose()},i.prototype.clone=function(t){t||(t="clone-"+P.getUniqueId());var e=new this.constructor;return e.cloneId=t,e.copyFrom(this),e},Object.defineProperty(i.prototype,"clones",{get:function(){return this._clones||(this._clones=new Ie),this._clones},enumerable:!0,configurable:!0}),i.prototype.copyFrom=function(t){t.clones.push(this),this.clonedFrom=t},Object.defineProperty(i.prototype,"className",{get:function(){return this._className},set:function(t){this._className=t},enumerable:!0,configurable:!0}),i.prototype.setCache=function(t,e,r){ys.set(this.uid,t,e,r)},i.prototype.getCache=function(t,e){return e===void 0&&(e=void 0),ys.get(this.uid,t,e)},i.prototype.clearCache=function(){ys.clear(this.uid)},i.prototype.setTimeout=function(t,e){var r=this,o=setTimeout(function(){r.removeDispose(n),t()},e),n=new Ke(function(){clearTimeout(o)});return this._disposers.push(n),n},i.prototype.setInterval=function(t,e){var r=this,o=setInterval(function(){r.removeDispose(n),t()},e),n=new Ke(function(){clearTimeout(o)});return this._disposers.push(n),n},Object.defineProperty(i.prototype,"config",{set:function(t){try{this.processConfig(t)}catch(e){this.raiseCriticalError(e)}},enumerable:!0,configurable:!0}),i.prototype.processConfig=function(t){var e=this;if(t){var r=this;if(Fo(t,function(n,s){var a=s;if(n=="callback"&&typeof s=="function"&&s.call(r),e.hasProperty(n)){var l;if(Qe(a)&&T(a.type)&&(!Qe(r[n])||!T(r[n].className)||a.forceCreate||r[n].className!=a.type)&&!e.asIs(n)?(l=e.createClassInstance(a.type),l?r[n]=l:l=r[n]):l=r[n],l instanceof _t)e.processAdapters(l,a);else if(l instanceof Mr)e.processEvents(l,a);else if(n=="locale"&&je(a))window["am4lang_"+a]&&(r[n]=window["am4lang_"+a]);else if(n=="parent"&&je(a)){var d=e.map.getKey(a);d?r[n]=d:e.addDelayedMap("parent",a)}else if(e.asIs(n))r[n]=a;else if(e.asFunction(n)&&je(a))if(T(P.registeredClasses[a]))r[n]=P.registeredClasses[a];else throw Error("Invalid easing function: "+a);else if(a instanceof i)r[n]=a;else if(l instanceof i)l.config=a;else if(l instanceof oi||l instanceof jl||l instanceof Wm){if(jt(a))l instanceof oi?e.processListTemplate(a,l):e.processOrderedTemplate(a,l);else if(Qe(a))if(a instanceof i)l.template=a;else{var u=void 0;T(a.template)?u=a.template:u=a,l.template instanceof i?l.template.config=u:ne(u,function(c,h){var p=l.template[c];p instanceof _t?e.processAdapters(p,h):p instanceof Mr?e.processEvents(p,h):p instanceof Wl?e.processDictionaryTemplate(p,h):l.template[c]instanceof i?l.template[c].config=h:Qe(h)&&T(h.type)?(p=e.createClassInstance(h.type),p?(p instanceof i&&(p.config=h),l.template[c]=p):l.template[c]=h):p instanceof Ie?e.processList(h,p):l.template[c]=e.maybeColorOrPercent(h)}),T(a.values)&&(l instanceof oi?e.processListTemplate(a.values,l):e.processOrderedTemplate(a.values,l))}}else l instanceof Ie?n=="children"?e.processList(a,l,e):e.processList(a,l):l instanceof Wl?e.processDictionaryTemplate(l,a):l instanceof Be?e.processDictionary(l,a):l instanceof Ue||l instanceof Me?r[n]=e.maybeColorOrPercent(a):Qe(l)&&Qe(a)?Bl(a,l):(a=e.maybeColorOrPercent(a),r[n]=a)}else e.isReserved(n)||(r[n]=a)},this.configOrder),this.processingErrors.length){var o=this.processingErrors.join(`
`);throw this._processingErrors=[],Error(o)}}},i.prototype.maybeColorOrPercent=function(t){if(je(t)){if(t.match(/^[\-]?[0-9.]+\%$/))return ae(Xe(t));if(t.match(/^\#[0-9abcdef]{3,}$/i))return fe(t)}return t},i.prototype.processAdapters=function(t,e){var r=this;jt(e)?Z(e,function(o,n){t.add(o.key,o.callback,o.priority||0,r)}):Qe(e)&&ne(e,function(o,n){t.has(o,n)||t.add(o,n)})},i.prototype.processEvents=function(t,e){var r=this;jt(e)?Z(e,function(o,n){t.on(o.type,o.callback,r)}):Qe(e)&&ne(e,function(o,n){t.has(o,n)||t.on(o,n)})},i.prototype.processDictionaryTemplate=function(t,e){Qe(e)&&ne(e,function(r,o){var n;r=="template"?n=t.template:t.hasKey(r)?n=t.getKey(r):n=t.create(r),n instanceof i?n.config=o:Qe(n)&&Qe(o)?Bl(o,n):n.setKey(r,o)})},i.prototype.processDictionary=function(t,e){Qe(e)&&ne(e,function(r,o){t.setKey(r,o)})},i.prototype.processListTemplate=function(t,e){var r=this;for(Z(t,function(o,n){var s=r.getConfigEntryType(o),a;if(e.hasIndex(n)&&!o.forceCreate)a=e.getIndex(n);else if(o instanceof i){e.push(o);return}else s?a=e.create(s):a=e.create();o===a||Qe(o)&&(a instanceof i?a.config=o:Qe(a)&&Qe(o)?Bl(o,a):e.setIndex(e.indexOf(a),o))});t.length>e.length;)e.pop()},i.prototype.processOrderedTemplate=function(t,e){var r=this;Z(t,function(o,n){var s=r.getConfigEntryType(o),a;s?a=e.create(s):a=e.create(),Qe(o)&&(a instanceof i?a.config=o:Qe(a)&&Qe(o)?Bl(o,a):e.insert(o))})},i.prototype.processList=function(t,e,r){var o=this;jt(t)||(t=[t]);var n=e.length,s=0;for(Z(t,function(a,l){if(Qe(a)){var d=void 0;if(l<n&&!a.forceCreate)d=e.getIndex(l);else if(a instanceof i){e.push(a);return}else s++,d=o.createEntryInstance(a),r?d.parent=r:e.push(d);d instanceof i?d.config=a:Qe(d)&&Qe(a)&&Bl(a,d)}else e.hasIndex(l)?e.setIndex(l,a):e.push(a)});!r&&t.length+s<e.length;)e.pop()},i.prototype.configOrder=function(t,e){return t==e?0:t=="language"?-1:e=="language"?1:0},i.prototype.asIs=function(t){return Mi(["locale"],t)!=-1},i.prototype.asFunction=function(t){return!1},i.prototype.createClassInstance=function(t){if(T(P.registeredClasses[t]))return new P.registeredClasses[t];throw Error('Invalid type: "'+t+'".')},i.prototype.createEntryInstance=function(t){var e;return T(t.type)&&(e=this.createClassInstance(t.type)),e||t},i.prototype.getConfigEntryType=function(t){if(T(t.type)){if(T(P.registeredClasses[t.type]))return P.registeredClasses[t.type];throw Error('Invalid type: "'+t.type+'".')}},i.prototype.hasProperty=function(t){return t in this},i.prototype.isReserved=function(t){return["type","forceCreate"].indexOf(t)!==-1},Object.defineProperty(i.prototype,"processingErrors",{get:function(){return this._processingErrors||(this._processingErrors=[]),this._processingErrors},enumerable:!0,configurable:!0}),i}();var ni=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="BaseObjectEvents",e}return Object.defineProperty(t.prototype,"events",{get:function(){return this._eventDispatcher||(this._eventDispatcher=new Mr,this._disposers.push(this._eventDispatcher)),this._eventDispatcher},enumerable:!0,configurable:!0}),t.prototype.dispatch=function(e,r){this._eventDispatcher&&this.events.isEnabled(e)&&(r?(r.type=e,r.target=r.target||this,this.events.dispatch(e,{type:e,target:this})):this.events.dispatch(e,{type:e,target:this}))},t.prototype.dispatchImmediately=function(e,r){this._eventDispatcher&&this.events.isEnabled(e)&&(r?(r.type=e,r.target=r.target||this,this.events.dispatchImmediately(e,r)):this.events.dispatchImmediately(e,{type:e,target:this}))},t.prototype.copyFrom=function(e){i.prototype.copyFrom.call(this,e),e._eventDispatcher&&this.events.copyFrom(e._eventDispatcher)},t}(lt);function cS(){return/apple/i.test(navigator.vendor)}function hS(){return/MSIE |Trident\//.test(navigator.userAgent)}var zp="string",fa="number",ma="date",Ul="duration",vi="__\xA7\xA7\xA7__",jn="__\xA7\xA7\xA7\xA7__";function bn(i,t){return ne(i,function(e,r){T(r)&&(t[e]=r)}),t}function pS(i){return/^[^#]*/.exec(i)[0]}function ya(){var i="#";if(cS()){var t=document.baseURI;if(t){t=pS(t);var e=pS(location.href);t!==e&&(i=e+i)}}return i}function vS(i,t){return ne(i,function(e,r){t[e]=r}),t}function ql(i){return T(i)&&i.toString()!==""}function qt(i,t){return M(i)?i:i!=null&&M(i.value)&&M(t)?t*i.value:0}function yS(){var i=window.devicePixelRatio||1;return i}function Km(i){return JSON.stringify(i)}function zu(i){return i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function Ap(i,t,e,r,o){if(i.length<=t)return[i];var n=[];if(e){for(var s=-1,a=i.replace(/([,;:!?\\\/]+|[\s])/g,vi+"$1"+vi),l=a.split(vi),d=1;d<l.length;d++){var u=l[d];(u=="."||u==",")&&l[d-1].match(/[\w]+$/)&&(l[d-1]+=u,l[d]="")}for(var d=0;d<l.length;d++){var u=l[d],c=u.length;if(c!==0){if(c>t&&(e!==!0||o!=!1)){r&&(u=qm(u));var h=u.match(new RegExp(".{1,"+t+"}","g"));if(h){if(r)for(var p=0;p<h.length;p++)h[p]=qm(h[p]);n=n.concat(h)}}else s===-1&&(n.push(""),s=0),n[s].length+c+1>t&&n[s]!==""&&(n.push(""),s++),n[s]+=u;s=n.length-1}}}else{var h=i.match(new RegExp(".{1,"+t+"}","g"));if(h){if(r)for(var p=0;p<h.length;p++)r||(h[p]=qm(h[p]));n=h}}return n.length==1&&e&&o&&n[0].length>t&&(n=[]),n}function Au(i,t,e,r,o){if(i.length<=t)return i;t-=e.length,t<1&&(t=1);var n=Ap(i,t,r,o);return(n[0]||"")+e}function Op(i){return i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function CS(i){return i.replace(/[\s\uFEFF\xA0]+$/g,"")}function bS(i){return i.replace(/^[\s\uFEFF\xA0]+/g,"")}function qm(i){return i.split("").reverse().join("")}function yi(i,t,e){return t===void 0&&(t=0),e===void 0&&(e="0"),typeof i!="string"&&(i=i.toString()),t>i.length?Array(t-i.length+1).join(e)+i:i}function wS(i){if(typeof i>"u")return zp;i=i.toLowerCase().replace(/^\[[^\]]*\]/,""),i=i.replace(/\[[^\]]+\]/,""),i=i.trim();var t=i.match(/\/(date|number|duration)$/);return t?t[1]:i===fa?fa:i===ma?ma:i===Ul?Ul:i.match(/[#0]/)?fa:i.match(/[ymwdhnsqaxkzgtei]/)?ma:zp}function Ca(i){return i.replace(/\/(date|number|duration)$/i,"")}function Ym(i){return i&&i.replace(/<[^>]*>/g,"")}function Ou(i){return i&&Ym((""+i).replace(/[\n\r]+/g,". "))}function SS(i){if(Nl(i))return"NaN";if(i===1/0)return"Infinity";if(i===-1/0)return"-Infinity";if(i===0&&1/i===-1/0)return"-0";var t=i<0;i=Math.abs(i);var e=Ct(/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(""+i)),r=e[1],o=e[2]||"",n;if(e[3]==null)n=o===""?r:r+"."+o;else{var s=+e[3];if(i<1){var a=s-1;n="0."+Hm("0",a)+r+o}else{var a=s-o.length;a===0?n=r+o:a<0?n=r+o.slice(0,a)+"."+o.slice(a):n=r+o+Hm("0",a)}}return t?"-"+n:n}function Lp(i){if(fs(i)){var t=new Date(i);return t.setMilliseconds(i.getMilliseconds()),t}else{if(M(i))return new Date(i);var e=Number(i);return M(e)?new Date(e):new Date(i)}}function Lu(i){if(fs(i))return i.getTime();if(M(i))return i;if(je(i)){var t=Number(i);return M(t)?t:void 0}}function Xm(i,t){t===void 0&&(t=!1);var e=new Date(i.getFullYear(),0,0),r=i.getTime()-e.getTime()+(e.getTimezoneOffset()-i.getTimezoneOffset())*60*1e3,o=1e3*60*60*24;return Math.floor(r/o)}function Fu(i,t){t===void 0&&(t=!1);var e=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate())),r=e.getUTCDay()||7;e.setUTCDate(e.getUTCDate()+4-r);var o=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e.getTime()-o.getTime())/864e5+1)/7)}function _S(i,t){t===void 0&&(t=!1);var e=Fu(new Date(i.getFullYear(),i.getMonth(),1),t),r=Fu(i,t);return r==1&&(r=53),r-e+1}function xS(i,t,e,r){e===void 0&&(e=1),r===void 0&&(r=!1);var o=new Date(t,0,4,0,0,0,0);r&&o.setUTCFullYear(t);var n=i*7+e-((o.getDay()||7)+3);return n}function Nu(i,t){return i>12?i-=12:i===0&&(i=12),T(t)?i+(t-1):i}function ku(i,t,e,r){if(t===void 0&&(t=!1),e===void 0&&(e=!1),r===void 0&&(r=!1),r)return t?"Coordinated Universal Time":"UTC";var o=i.toLocaleString("UTC"),n=i.toLocaleString("UTC",{timeZoneName:t?"long":"short"}).substr(o.length);return e===!1&&(n=n.replace(/ (standard|daylight|summer|winter) /i," ")),n}function ES(i,t){t===void 0&&(t=!1);var e=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate())),r=e.getUTCDay()||7;e.setUTCDate(e.getUTCDate()+4-r);var o=new Date(Date.UTC(e.getUTCFullYear(),0,1));return o.getFullYear()}function Np(i,t,e){return i>e?e:i<t?t:i}function kp(i,t,e){var r=e-t;return(i>e||i<t)&&(i=t+(i-r*Math.floor(i/r))),i}function Vp(i,t){var e=i.x,r=i.y,o=[];if(t){for(;T(t.parent);)o.push(t),t=t.parent;o.reverse();for(var n=0;n<o.length;n++){var s=o[n],a=s.rotation,l=e-s.pixelX-s.ex,d=r-s.pixelY-s.ey;s.dx&&(e-=s.dx),s.dy&&(r-=s.dy);var u=s.scale;s.group&&(u=s.group.scale),e=(Ve(-a)*l-Ae(-a)*d)/u-s.pixelPaddingLeft,r=(Ve(-a)*d+Ae(-a)*l)/u-s.pixelPaddingTop}}return{x:e,y:r}}function Cs(i,t){var e=i.x,r=i.y;if(t)for(;T(t.parent);){var o=t.rotation;e+=t.pixelPaddingLeft+t.ex,r+=t.pixelPaddingTop+t.ey;var n=t.scale;t.group&&(n=t.group.scale);var s=t.pixelX+(e*Ve(o)-r*Ae(o))*n,a=t.pixelY+(e*Ae(o)+r*Ve(o))*n;t.dx&&(s+=t.dx),t.dy&&(a+=t.dy),e=s,r=a,t=t.parent}return{x:e,y:r}}function Gp(i,t,e){return Vp(Cs(i,t),e)}function DS(i,t){var e=Cs(i,t),r=Cs({x:i.x+i.width,y:i.y+i.height},t);return{x:e.x,y:e.y,width:r.x-e.x,height:r.y-e.y}}function Un(i,t,e){try{var r=t.getBoundingClientRect();return M(e)||(e=1),{x:(i.x-r.left)/e,y:(i.y-r.top)/e}}catch{return i}}function vR(i,t){try{var e=t.getBoundingClientRect();return{x:i.x+e.left,y:i.y+e.top}}catch{return i}}function ba(i,t){if(t&&t.htmlContainer){var e=Un(i,Ct(t.htmlContainer),t.svgContainer.cssScale);return Vp(e,t)}else return i}function Qm(i,t){if(t&&t.htmlContainer){var e=Cs(i,t);return vR(e,Ct(t.htmlContainer))}else return i}function TS(i){var t=getComputedStyle(i),e=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),r=parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth);return i.clientWidth-e-r}function PS(i){var t=getComputedStyle(i),e=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),r=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth);return i.clientHeight-e-r}var yR=/^([a-zA-Z][a-zA-Z0-9\+\.\-]*:)?(?:(\/\/)([^\@]+\@)?([^\/\?\#\:]*)(\:[0-9]+)?)?([^\?\#]*)(\?[^\#]*)?(\#.*)?$/;function gS(i){var t=yR.exec(i);return{protocol:t&&t[1]||"",separator:t&&t[2]||"",authority:t&&t[3]||"",domain:t&&t[4]||"",port:t&&t[5]||"",path:t&&t[6]||"",query:t&&t[7]||"",hash:t&&t[8]||""}}function fS(i){return i.protocol+i.separator+i.authority+i.domain+i.port+i.path+i.query+i.hash}function mS(i){return i.protocol===""&&i.separator===""&&i.authority===""&&i.domain===""&&i.port===""}function Hp(i,t){var e=gS(i),r=gS(t);if(mS(e))throw new Error("Left URL is not absolute");if(mS(r)){if(r.path!=="")if(r.path[0]==="/")e.path=r.path;else{var o=e.path.split(/\//),n=r.path.split(/\//);if(o.length===0?n.length!==0&&o.push(""):o.length>1&&o.pop(),k0(o,n),e.path=o.join("/"),e.path!==""&&e.path[0]!=="/")throw new Error("URL path must start with /")}return e.query=r.query,e.hash=r.hash,fS(e)}else return fS(r)}function RS(){return!!window.MSInputMethodContext&&!!document.documentMode}function Jm(i){return+i}P.registeredClasses["ease.linear"]=Jm;function CR(i){return i*i}P.registeredClasses["ease.quadIn"]=CR;function bR(i){return i*(2-i)}P.registeredClasses["ease.quadOut"]=bR;function wR(i){return i*=2,(i<=1?i*i:--i*(2-i)+1)/2}P.registeredClasses["ease.quadInOut"]=wR;function MS(i,t){return Math.pow(i,t)}P.registeredClasses["ease.polyIn"]=MS;function IS(i,t){return 1-Math.pow(1-i,t)}P.registeredClasses["ease.polyOut"]=IS;function FS(i,t){return i*=2,(i<=1?Math.pow(i,t):2-Math.pow(2-i,t))/2}P.registeredClasses["ease.polyInOut"]=FS;function SR(i){return MS(i,3)}P.registeredClasses["ease.polyIn3"]=SR;function jp(i){return IS(i,3)}P.registeredClasses["ease.polyOut3"]=jp;function _R(i){return FS(i,3)}P.registeredClasses["ease.polyInOut3"]=_R;function xR(i){return Math.pow(2,10*i-10)}P.registeredClasses["ease.expIn"]=xR;function ER(i){return 1-Math.pow(2,-10*i)}P.registeredClasses["ease.expOut"]=ER;function DR(i){return i*=2,(i<=1?Math.pow(2,10*i-10):2-Math.pow(2,10-10*i))/2}P.registeredClasses["ease.expInOut"]=DR;function TR(i){return 1-Math.cos(i*Im)}P.registeredClasses["ease.sinIn"]=TR;function PR(i){return Math.sin(i*Im)}P.registeredClasses["ease.sinOut"]=PR;function RR(i){return(1-Math.cos(vu*i))/2}P.registeredClasses["ease.sinInOut"]=RR;function ev(i){return i*i*i}P.registeredClasses["ease.cubicIn"]=ev;function Ir(i){return--i*i*i+1}P.registeredClasses["ease.cubicOut"]=Ir;function MR(i){return i*=2,(i<=1?i*i*i:(i-=2)*i*i+2)/2}P.registeredClasses["ease.cubicInOut"]=MR;function IR(i){return 1-Math.sqrt(1-i*i)}P.registeredClasses["ease.circleIn"]=IR;function FR(i){return Math.sqrt(1- --i*i)}P.registeredClasses["ease.circleOut"]=FR;function zR(i){return i*=2,(i<=1?1-Math.sqrt(1-i*i):Math.sqrt(1-(i-=2)*i)+1)/2}P.registeredClasses["ease.circleInOut"]=zR;var Zm=4/11,AR=6/11,OR=8/11,LR=3/4,NR=9/11,kR=10/11,VR=15/16,GR=21/22,HR=63/64,Bp=1/Zm/Zm;function BR(i){return 1-$p(1-i)}P.registeredClasses["ease.bounceIn"]=BR;function $p(i){return i=+i,i<Zm?Bp*i*i:i<OR?Bp*(i-=AR)*i+LR:i<kR?Bp*(i-=NR)*i+VR:Bp*(i-=GR)*i+HR}P.registeredClasses["ease.bounceOut"]=$p;function $R(i){return i*=2,(i<=1?1-$p(1-i):$p(i-1)+1)/2}P.registeredClasses["ease.bounceInOut"]=$R;var WR=2*Math.PI,Vu=1,Gu=.3/WR,Wp=Math.asin(1/Vu)*Gu;function jR(i){return Vu*Math.pow(2,10*--i)*Math.sin((Wp-i)/Gu)}P.registeredClasses["ease.elasticIn"]=jR;function UR(i){return 1-Vu*Math.pow(2,-10*(i=+i))*Math.sin((i+Wp)/Gu)}P.registeredClasses["ease.elasticOut"]=UR;function qR(i){return i=i*2-1,(i<0?Vu*Math.pow(2,10*i)*Math.sin((Wp-i)/Gu):2-Vu*Math.pow(2,-10*i)*Math.sin((Wp+i)/Gu))/2}P.registeredClasses["ease.elasticInOut"]=qR;var wa=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.transitionDuration=0,e.transitionEasing=Ir,e.properties={},e.propertyFields={},e.filters=new Ie,e.isTemplate=!1,e.className="SpriteState",e._disposers.push(new St(e.filters)),e.applyTheme(),e}return Object.defineProperty(t.prototype,"adapter",{get:function(){var e=this;return this._adapterO||(this._adapterO=new _t(this),this._adapterO.events.on("inserted",function(r){e[r.newValue.key]=e[r.newValue.key]},void 0,!1),this._adapterO.events.on("removed",function(r){e[r.newValue.key]=e[r.newValue.key]},void 0,!1)),this._adapterO},enumerable:!0,configurable:!0}),t.prototype.getPropertyValue=function(e){var r=this.properties[e],o=this.sprite;if(o){var n=this.propertyFields[e];if(T(n)&&(o.dataItem&&(r=o.dataItem.dataContext[n]),r==null&&(r="__unset")),T(r))this._adapterO&&(r=this._adapterO.apply(e,r));else{var s=o.getPropertyValue(e);this._adapterO?r=this._adapterO.apply(e,s):r=s,r==s&&(r=void 0)}}return r},t.prototype.copyFrom=function(e){e&&e!=this&&(this.transitionDuration=e.transitionDuration,this.transitionEasing=e.transitionEasing,bn(e.properties,this.properties),bn(e.propertyFields,this.propertyFields),this.filters.copyFrom(e.filters),e._adapterO&&this.adapter.copyFrom(e._adapterO))},Object.defineProperty(t.prototype,"allValues",{get:function(){var e=this,r={};if(ne(this.properties,function(s,a){r[s]=e.getPropertyValue(s)}),this._adapterO){var o=this._adapterO.keys();ne(o,function(s,a){var l=e.getPropertyValue(a);r[a]=l})}var n=this.propertyFields;return ne(n,function(s){var a=e.getPropertyValue(s);r[s]=a}),r},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.properties={},this.filters.clear()},t.prototype.processConfig=function(e){T(e)&&T(e.properties)&&ne(e.properties,function(r,o){je(o)&&(o.match(/^[0-9.\-]+\%$/)?e.properties[r]=ae(Xe(o)):o.match(/^\#[0-9abcdef]{3,}$/i)&&(e.properties[r]=ga(o)))}),i.prototype.processConfig.call(this,e)},t.prototype.asFunction=function(e){return e=="transitionEasing"||i.prototype.asIs.call(this,e)},t}(lt);P.registeredClasses.SpriteState=wa;var tv=function(i){A(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e._interactionEvents=new Be,e}return t.prototype._dispatchSpriteEvent=function(e){if(!(this.target.disabled||this.target.isTemplate)&&this.target.events.isEnabled(e.type)){var r=_u(e,{target:this.target});this.target.events.dispatchImmediately(r.type,r)}},t.prototype._dispatchSpritePointEvent=function(e){if(!(this.target.disabled||this.target.isTemplate)&&this.target.events.isEnabled(e.type)){var r=_u(e,{target:this.target,spritePoint:e.point?ba(e.point,this.target):void 0,svgPoint:this.target.getSvgPoint(e.point)});this.target.events.dispatchImmediately(r.type,r)}},t.prototype._addInteractionObjectEvent=function(e,r,o,n){var s=this,a=n+"-"+e,l=this._interactionEvents.insertKeyIfEmpty(a,function(){var d=s.target.interactions.events.on(e,r,o,n);return new Wn(function(){s._interactionEvents.removeKey(a),d.dispose()})});return l.increment()},t.prototype._on=function(e,r,o,n,s,a){var l=i.prototype._on.call(this,e,r,o,n,s,a),d=[l.disposer];switch(r){case"hit":case"track":case"doublehit":case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":d.push(this._addInteractionObjectEvent(r,this._dispatchSpritePointEvent,this,s));break;case"rightclick":case"down":case"up":case"drag":case"dragged":case"dragstart":case"dragstop":case"over":case"out":case"swipe":case"swipeleft":case"swiperight":case"resize":case"focus":case"blur":case"toggled":d.push(this._addInteractionObjectEvent(r,this._dispatchSpriteEvent,this,s));break}switch(r){case"hit":case"doublehit":case"rightclick":case"down":case"up":this.target.clickable=!0;break;case"toggled":this.target.togglable=!0;break;case"drag":case"dragstart":case"dragstop":this.target.draggable=!0;break;case"track":this.target.trackable=!0;break;case"resize":this.target.resizable=!0;break;case"swipe":case"swipeleft":case"swiperight":this.target.swipeable=!0;break;case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":this.target.wheelable=!0;break;case"over":this.target.hoverable=!0;case"out":this.target.hoverable=!0;break;case"focus":case"blur":this.target.focusable=!0;break}return l.disposer=new tt(d),l},t}(Su);var iv=function(){function i(){}return i.opacity=1,i.strokeOpacity=1,i.strokeWidth=1,i.fillOpacity=1,i.fill=fe("#000000"),i.stroke=fe("#000000"),i.focusable=void 0,i.tabindex=0,i}();var we={verbose:!0,commercialLicense:!1,classNamePrefix:"amcharts-",autoSetClassName:!1,minPolylineStep:.5,onlyShowOnViewport:!1,queue:!1,autoDispose:!1,licenses:[],suppressErrors:!1,suppressWarnings:!1,animationsEnabled:!0,nonce:"",deferredDelay:100,disableHoverOnTransform:"never",pixelPerfectPrecision:0};function AS(i,t,e){return t+(e-t)*i}function YR(i,t,e){return new Me(AS(i,t.percent,e.percent))}function XR(i,t,e){var r=new Ue(Fp(t.rgb,e.rgb,i));return t.alpha!=e.alpha&&(r.alpha=t.alpha+(e.alpha-t.alpha)*i),r}function zS(i,t){return t+i.charAt(0).toUpperCase()+i.substr(1)}var lo=function(){function i(t){this._disposer=new Ke(function(){for(;t.length!==0;)t[0].dispose()})}return i.prototype.isDisposed=function(){return this._disposer.isDisposed()},i.prototype.dispose=function(){this._disposer.dispose()},i}();var Fi=function(i){A(t,i);function t(e,r,o,n){var s=i.call(this)||this;return s.duration=0,s.easing=Jm,s.progress=0,s._loop=0,s._pause=!1,s._delayTimeout=null,s._time=0,s._isFinished=!1,s.className="Animation",we.animationsEnabled===!1&&(o=0),s.object=e,s.animationOptions=bp(r),s.duration=o,n&&(s.easing=n),s.applyTheme(),s}return t.prototype.debug=function(){},t.prototype.dispose=function(){i.prototype.dispose.call(this),this.pause()},t.prototype.delay=function(e){var r=this;if(e>0){this.pause(),Io(this.object.animations,this);var o=setTimeout(function(){r._delayTimeout=null,r.start()},e);this._delayTimeout=new Ke(function(){clearTimeout(o)})}return this},t.prototype._start=function(){this._isFinished=!1,this._delayTimeout&&(this.removeDispose(this._delayTimeout),this._delayTimeout=null),this.stopSameAnimations(),this._pause=!1,Io(Ee.animations,this),Io(this.object.animations,this),Ee.requestFrame()},t.prototype.start=function(){this._start(),this._startTime=Date.now(),this._time=0,this.staticOptions=[];for(var e=this.animationOptions.length-1;e>=0;e--){var r=this.animationOptions[e];if(T(r.from)||(r.childObject?r.from=r.childObject[r.property]:(r.from=this.object[r.property],T(r.from)||(r.from=iv[r.property]))),r.from==r.to)ve(this.animationOptions,r);else if(!T(r.from)||!(r.from instanceof Me)&&r.to instanceof Me||r.from instanceof Me&&!(r.to instanceof Me))this.staticOptions.push(r),ve(this.animationOptions,r);else if(M(r.to))if(r.updateMethod=AS,r.from instanceof Me){var o=this.object[zS(r.property,"pixel")];isNaN(o)?(this.staticOptions.push(r),ve(this.animationOptions,r)):r.from=o}else isNaN(r.from)&&(this.staticOptions.push(r),ve(this.animationOptions,r));else if(r.to instanceof Ue)r.from?r.updateMethod=XR:(this.staticOptions.push(r),ve(this.animationOptions,r));else if(r.to instanceof Me){if(r.updateMethod=YR,!isNaN(r.from)){var o=this.object[zS(r.property,"relative")];isNaN(o)||(r.from=ae(o*100))}}else this.staticOptions.push(r),ve(this.animationOptions,r)}if(this.applyStaticOptions(),this.events.isEnabled("animationstarted")){var n={type:"animationstarted",target:this,progress:this.progress};this.events.dispatchImmediately("animationstarted",n)}return this.update(),this.duration===0&&this.end(),this},t.prototype.loop=function(e){return M(e)||(e=1/0),this._loop=e,this},t.prototype.pause=function(){return this._pause=!0,this._delayTimeout&&(this.removeDispose(this._delayTimeout),this._delayTimeout=null),ve(Ee.animations,this),ve(this.object.animations,this),this},t.prototype.resume=function(){return this._start(),this._startTime=Date.now()-this._time,this},t.prototype.end=function(){if(this._loop==0&&this.pause(),this.setProgress(1),this.applyStaticOptions(),this.events.isEnabled("animationended")){var e={type:"animationended",target:this,progress:this.progress};this.events.dispatchImmediately("animationended",e)}return this._loop>0?(this._loop--,this.start()):(this.stop(),this._isFinished=!0),this},t.prototype.kill=function(){this.pause(),this._isFinished=!0},t.prototype.isFinished=function(){return this._isFinished},t.prototype.applyStaticOptions=function(){var e=this;Z(this.staticOptions,function(r){r.childObject?r.childObject[r.property]=e.progress==1?r.to:r.from:e.object[r.property]=e.progress==1?r.to:r.from})},t.prototype.stop=function(e){if(this.pause(),!e&&this.events.isEnabled("animationstopped")){var r={type:"animationstopped",target:this,progress:this.progress};this.events.dispatchImmediately("animationstopped",r)}return this},t.prototype.setProgress=function(e){var r=this;if(this._time=this.duration*e,Z(this.animationOptions,function(n){if(n.updateMethod&&T(n.from)){var s=n.updateMethod(e,n.from,n.to);n.childObject?n.childObject[n.property]=s:r.object[n.property]=s}}),this.progress=e,this.events.isEnabled("animationprogress")){var o={type:"animationprogress",target:this,progress:this.progress};this.events.dispatchImmediately("animationprogress",o)}Ee.requestFrame()},t.prototype.update=function(){if(!this._pause){var e=void 0;this._time=De(Date.now()-this._startTime,0,this.duration);var r=this._time/this.duration;e=this.easing(r),(this.duration==0||!M(e)||r>=1)&&(e=1),this.setProgress(e),oe(this._time/this.duration,6)==1&&this.end()}return this},Object.defineProperty(t.prototype,"delayed",{get:function(){return!!this._delayTimeout},enumerable:!0,configurable:!0}),t.prototype.stopSameAnimations=function(){var e=this;Z(Bn(this.object.animations),function(r){if(r!==e&&!r.delayed){var o=[];Z(e.animationOptions,function(n){Z(r.animationOptions,function(s){n.property==s.property&&n.childObject==s.childObject&&(o.push(s),r.animationOptions.length==0&&r.kill())})}),Z(o,function(n){ve(r.animationOptions,n)})}})},t.prototype.asFunction=function(e){return e=="easing"||i.prototype.asIs.call(this,e)},t}(ni);var bs="http://www.w3.org/2000/svg",ov="http://www.w3.org/2000/xmlns/",Kl="http://www.w3.org/1999/xlink";function dt(i,t,e,r){return i.addEventListener(t,e,r||!1),new Ke(function(){i.removeEventListener(t,e,r||!1)})}function Hu(i){if(je(i)){var t=document.getElementById(i);if(t==null&&(t=document.getElementsByClassName(i)[0]),t instanceof HTMLElement)return t}else if(i instanceof HTMLElement)return i}function Yl(i,t){if(i)if(i.classList){var e=t.split(" ");Z(e,function(o){i.classList.add(o)})}else{var r=i.getAttribute("class");r?i.setAttribute("class",r.split(" ").filter(function(o){return o!==t}).join(" ")+" "+t):i.setAttribute("class",t)}}function Xl(i,t){if(i)if(i.classList)i.classList.remove(t);else{var e=i.getAttribute("class");e&&i.setAttribute("class",e.split(" ").filter(function(r){return r!==t}).join(" "))}}function nv(i,t,e){i.style[t]=e}function Up(i,t){return i.currentStyle?i.currentStyle[t]:document.defaultView.getComputedStyle(i,null).getPropertyValue(t)}function Bu(){if(document.activeElement&&document.activeElement!=document.body)if(document.activeElement.blur)document.activeElement.blur();else{var i=document.createElement("button");i.style.position="fixed",i.style.top="0px",i.style.left="-10000px",document.body.appendChild(i),i.focus(),i.blur(),document.body.removeChild(i)}}function sv(i,t){for(var e=t;;){if(i===e)return!0;if(e.parentNode==null){if(e.host==null)return!1;e=e.host}else e=e.parentNode}}function Ql(i){for(var t=i;;){if(t.parentNode==null)return t.host!=null?t:null;t=t.parentNode}}function qp(i){for(var t=i.ownerDocument,e=i;;){if(e.parentNode==null)return e===t||e.host!=null?e:null;e=e.parentNode}}function OS(i){return typeof i.composedPath=="function"?i.composedPath()[0]:i.target}function av(i){Nm(function(){try{var t=i.getBoundingClientRect(),e=t.left-Math.round(t.left),r=t.top-Math.round(t.top);e!==0&&Ep(function(){i.style.left=e+"px"}),r!==0&&Ep(function(){i.style.top=r+"px"})}catch{}})}var rv;function QR(i){if(i==null){if(!T(rv)){var t=document.createElement("style");t.type="text/css",we.nonce!=""&&t.setAttribute("nonce",we.nonce),document.head.appendChild(t),rv=t.sheet}return rv}else{var t=document.createElement("style");return t.type="text/css",we.nonce!=""&&t.setAttribute("nonce",we.nonce),i.appendChild(t),t.sheet}}function ZR(i,t){var e=i.cssRules.length;return i.insertRule(t+"{}",e),i.cssRules[e]}var Ye=function(i){A(t,i);function t(e,r,o){var n=this,s=QR(e);return n=i.call(this,function(){var a=Mi(s.cssRules,n._rule);if(a===-1)throw new Error("Could not dispose StyleRule");s.deleteRule(a)})||this,n._rule=ZR(s,r),ne(o,function(a,l){n.setStyle(a,l)}),n}return Object.defineProperty(t.prototype,"selector",{get:function(){return this._rule.selectorText},set:function(e){this._rule.selectorText=e},enumerable:!0,configurable:!0}),t.prototype._setVendorPrefixName=function(e,r){var o=this._rule.style;o.setProperty("-webkit-"+e,r,""),o.setProperty("-moz-"+e,r,""),o.setProperty("-ms-"+e,r,""),o.setProperty("-o-"+e,r,""),o.setProperty(e,r,"")},t.prototype.setStyle=function(e,r){e==="transition"?this._setVendorPrefixName(e,r):this._rule.style.setProperty(e,r,"")},t}(Ke);var JR=0,eM=function(i){A(t,i);function t(e,r,o){var n=this,s=T(o)?o:"__style_"+ ++JR+"__";return n=i.call(this,e,"."+s,r)||this,n._className=s,n}return Object.defineProperty(t.prototype,"className",{get:function(){return this._className},set:function(e){this._className=e,this.selector="."+e},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this._className},t}(Ye);function lv(i){if(document.readyState!=="loading")i();else{var t=function(){document.readyState!=="loading"&&(document.removeEventListener("readystatechange",t),i())};document.addEventListener("readystatechange",t)}}function $u(i){var t=Up(i,"font-family");if(t)return t;var e=i.parentElement||i.parentNode;return e?$u(e):void 0}function Wu(i){var t=Up(i,"font-size");if(t)return t;var e=i.parentElement||i.parentNode;return e?Wu(e):void 0}function Kp(i,t){var e=i.getBoundingClientRect(),r=jt(t)?t:t?[t]:[];if(r.length){for(var o=0;o<r.length;o++){var n=r[o];if(!Kp(n))return!1;var s=n.getBoundingClientRect();if(e.top>=0&&e.left>=0&&e.top<=s.top+s.height&&e.left<=s.left+s.width)return!0}return!1}return e.top>=0&&e.left>=0&&e.top<=(window.innerHeight||document.documentElement.clientHeight)&&e.left<=(window.innerWidth||document.documentElement.clientWidth)}var ws=function(){function i(t){this._isDisposed=!1,this._x=0,this._y=0,this._rotationY=0,this._rotationX=0,this._rotation=0,this._scale=1,typeof t=="string"?this.node=document.createElementNS(bs,t):this.node=t}return i.prototype.removeNode=function(){this.node&&this.node.parentNode&&this.node.parentNode.removeChild(this.node)},Object.defineProperty(i.prototype,"transformString",{get:function(){if(this.node)return this._transformString},enumerable:!0,configurable:!0}),i.prototype.transform=function(){var t="translate("+this._x+","+this._y+")";if(this._scale!=1&&(t+=(t?" ":"")+"scale("+this._scale+")"),this._rotation!=0){var e="rotate("+this._rotation+")";this._rotationX&&this._rotationY&&(e="rotate("+this._rotation+" "+this._rotationX+" "+this._rotationY+")"),t+=(t?" ":"")+e}this._transformString=t,this.node.setAttribute("transform",t)},i.prototype.getBBox=function(){var t={width:0,height:0,x:0,y:0};if(this.node&&this.node.parentNode)try{var e=this.node.getBBox();t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height}catch{}return t},i.prototype.moveTo=function(t){if(t){var e=t.x,r=t.y;(this._x!=e||this._y!=r)&&(this._x=e,this._y=r,this.transform())}},Object.defineProperty(i.prototype,"content",{get:function(){return this.node.innerHTML||""},set:function(t){this.node.innerHTML=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textContent",{get:function(){return this.node.textContent||""},set:function(t){this.node.textContent=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"x",{get:function(){return this._x},set:function(t){this._x!=t&&(this._x=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this._y},set:function(t){this._y!=t&&(this._y=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!=t&&(this._rotation=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotationX",{get:function(){return this._rotationX},set:function(t){this._rotationX!=t&&(this._rotationX=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotationY",{get:function(){return this._rotationY},set:function(t){this._rotationY!=t&&(this._rotationY=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale!=t&&(this._scale=t,this.transform())},enumerable:!0,configurable:!0}),i.prototype.removeAttr=function(t){this.node.removeAttribute(t)},i.prototype.attr=function(t){var e=this;return ne(t,function(r,o){T(o)?e.node.setAttribute(r,o):e.node.removeAttribute(r)}),this},i.prototype.getAttr=function(t){return this.node.getAttribute(t)},i.prototype.attrNS=function(t,e,r){return this.node.setAttributeNS(t,e,r),this},i.prototype.getAttrNS=function(t,e){return this.node.getAttributeNS(t,e)},i.prototype.removeStyle=function(t){this.node.style[t]=null,delete this.node.style[t]},i.prototype.getStyle=function(t){return this.node.style[t]},i.prototype.addStyle=function(t){var e=this;return ne(t,function(r,o){T(o)?e.node.style[r]=o:e.removeStyle(r)}),this},i.prototype.addClass=function(t){Yl(this.node,t)},i.prototype.removeClass=function(t){Xl(this.node,t)},i.prototype.setClass=function(t){this.node.setAttribute("class",t)},i.prototype.removeChildNodes=function(){for(;this.node.childNodes.length>0;)this.node.removeChild(this.node.firstChild)},i.prototype.isDisposed=function(){return this._isDisposed},i.prototype.dispose=function(){this.removeNode()},i}();var dv=function(i){A(t,i);function t(e){return i.call(this,e)||this}return t.prototype.add=function(e){e&&this.node.appendChild(e.node)},t.prototype.addToBack=function(e){if(e){var r=this.node.childNodes[0];r?r!=e.node&&this.node.insertBefore(e.node,r):this.node.appendChild(e.node)}},t.prototype.removeElement=function(e){if(e)try{e.node&&e.node.parentNode==this.node&&this.node.removeChild(e.node)}catch{}},t.prototype.hasChild=function(e){for(var r=0;r<this.node.childNodes.length;r++)if(this.node.childNodes[r]==e.node)return!0;return!1},Object.defineProperty(t.prototype,"content",{get:function(){return this.node.innerHTML},set:function(e){this.node.innerHTML=e},enumerable:!0,configurable:!0}),t.prototype.removeChildren=function(){if(this.node.childNodes)for(;this.node.childNodes.length>0;){var e=this.node.firstChild;e&&e.parentNode&&e.parentNode.removeChild(e)}},t.prototype.removeChildrenByTag=function(e){if(this.node.childNodes)for(var r=this.node.getElementsByTagName(e),o=0;o<r.length;o++)this.node.removeChild(r[o])},t}(ws);var Le=function(i){A(t,i);function t(){var e=i.call(this)||this;return e._purposes={stroke:fe("#e5e5e5"),fill:fe("#f3f3f3"),primaryButton:fe("#6794dc"),primaryButtonHover:fe("#6771dc"),primaryButtonDown:fe("#68dc75"),primaryButtonActive:fe("#68dc75"),primaryButtonText:fe("#FFFFFF"),primaryButtonStroke:fe("#FFFFFF"),secondaryButton:fe("#d9d9d9"),secondaryButtonHover:fe("#d9d9d9").brighten(-.25),secondaryButtonDown:fe("#d9d9d9").brighten(-.35),secondaryButtonActive:fe("#d9d9d9").brighten(.35),secondaryButtonText:fe("#000000"),secondaryButtonStroke:fe("#FFFFFF"),grid:fe("#000000"),background:fe("#ffffff"),alternativeBackground:fe("#000000"),text:fe("#000000"),alternativeText:fe("#FFFFFF"),disabledBackground:fe("#999999"),positive:fe("#67dc75"),negative:fe("#dc6788")},e.className="InterfaceColorSet",e.applyTheme(),e}return t.prototype.debug=function(){},t.prototype.getFor=function(e){return this._purposes[e]},t.prototype.setFor=function(e,r){this._purposes[e]=r},t}(lt);P.registeredClasses.InterfaceColorSet=Le;var LS=new Be;function NS(i,t){t||(t="ampopup");var e=new Le,r=e.getFor("text"),o=e.getFor("background");o.alpha=.8;var n=e.getFor("alternativeBackground");n.alpha=.05;var s=LS.insertKeyIfEmpty(t,function(){var a=new tt([new Ye(i,"."+t,{overflow:"visible",position:"absolute",top:"0",left:"0","z-index":"2000"}),new Ye(i,"."+t+"-curtain",{width:"100%",height:"100%",position:"absolute",top:"0",left:"0","z-index":"2001","background-color":o.hex,opacity:"0.5"}),new Ye(i,"."+t+"-header",{display:"block",width:"100%","min-height":"1.8em",background:n.rgba}),new Ye(i,"."+t+"-title",{"font-weight":"bold","font-size":"110%",padding:"0.5em 1.2em 0.5em 1em"}),new Ye(i,"."+t+"-content",{background:o.hex,"background-color":o.rgba,color:r.hex,display:"inline-block",position:"absolute",top:"0",left:"0","max-width":"90%","max-height":"90%",overflow:"auto","z-index":"2002"}),new Ye(i,"."+t+"-inside",{padding:"1em"}),new Ye(i,"."+t+"-close",{display:"block",position:"absolute",top:"0.3em",right:"0.3em","background-color":"rgb(100, 100, 100)",background:"rgba(100, 100, 100, 0.1) url(data:image/svg+xml;charset=utf-8;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmVyc2lvbj0iMSIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ0NS4yIDEwOS4ybC00Mi40LTQyLjRMMjU2IDIxMy42IDEwOS4yIDY2LjhsLTQyLjQgNDIuNEwyMTMuNiAyNTYgNjYuOCA0MDIuOGw0Mi40IDQyLjRMMjU2IDI5OC40bDE0Ni44IDE0Ni44IDQyLjQtNDIuNEwyOTguNCAyNTYiLz48L3N2Zz4=) no-repeat center","background-size":"80%",width:"1.2em",height:"1.2em",cursor:"pointer"})]);return new Wn(function(){LS.removeKey(t),a.dispose()})});return s.increment()}var uv=function(i){A(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e._domEvents={},e}return t.prototype._addDOMEvent=function(e,r,o,n){var s=this;if(!this._domEvents[e]){var a=function(l){o.call(n,r,l)};this.target.element.addEventListener(e,a,!1),this._domEvents[e]=new Wn(function(){delete s._domEvents[e],s.target.element.removeEventListener(e,a,!1)})}return this._domEvents[e].increment()},t.prototype._dispatchKeyboardEvent=function(e,r){this.target.events.isEnabled(e)&&this.target.events.dispatchImmediately(e,{type:e,target:this.target,event:r})},t.prototype._on=function(e,r,o,n,s,a){var l=i.prototype._on.call(this,e,r,o,n,s,a),d=[l.disposer];switch(r){case"hit":case"doublehit":case"rightclick":case"down":case"up":this.target.clickable=!0;break;case"drag":case"dragstart":case"dragstop":this.target.draggable=!0;break;case"track":this.target.trackable=!0;break;case"resize":this.target.resizable=!0;break;case"swipe":case"swipeleft":case"swiperight":this.target.swipeable=!0;break;case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":this.target.wheelable=!0;break;case"over":case"out":this.target.hoverable=!0;break;case"focus":case"blur":case"focusin":case"focusout":this.target.focusable=!0;break;case"keydown":d.push(this._addDOMEvent(r,r,this._dispatchKeyboardEvent,this));break;case"keyup":d.push(this._addDOMEvent(r,r,this._dispatchKeyboardEvent,this));break;case"keypress":d.push(this._addDOMEvent(r,r,this._dispatchKeyboardEvent,this));break;case"input":d.push(this._addDOMEvent(r,r,this._dispatchKeyboardEvent,this));break}return l.disposer=new tt(d),l},t}(Su);var cv=function(i){A(t,i);function t(e){var r=i.call(this)||this;return r._eventDispatcher=new uv(r),r.eventDisposers=new Be,r.replacedStyles=new Be,r._clickable=!1,r._contextMenuDisabled=!1,r._hoverable=!1,r._trackable=!1,r._draggable=!1,r._swipeable=!1,r._resizable=!1,r._wheelable=!1,r._inert=!1,r._isHover=!1,r.isRealHover=!1,r._isHoverByTouch=!1,r._isDown=!1,r._isFocused=!1,r._isTouchProtected=!1,r._inertiaOptions=new Be,r.inertias=new Be,r._hitOptions={},r._hoverOptions={},r._swipeOptions={},r._keyboardOptions={},r._mouseOptions={},r._cursorOptions={defaultStyle:[{property:"cursor",value:"default"}]},r._disposers.push(r._eventDispatcher),r._element=e,r.className="InteractionObject",r._disposers.push(new ao(r.inertias)),r._disposers.push(new ao(r.eventDisposers)),r.applyTheme(),r}return Object.defineProperty(t.prototype,"events",{get:function(){return this._eventDispatcher},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isHover",{get:function(){return this._isHover},set:function(e){this.isHover!=e&&(this._isHover=e,e?ye().overObjects.moveValue(this):(this.isRealHover=!1,ye().overObjects.removeValue(this)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isHoverByTouch",{get:function(){return this._isHoverByTouch},set:function(e){this.isHoverByTouch!=e&&(this._isHoverByTouch=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overPointers",{get:function(){return this._overPointers||(this._overPointers=new Ie),this._overPointers},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDown",{get:function(){return this._isDown},set:function(e){this.isDown!=e&&(this._isDown=e,e?ye().downObjects.moveValue(this):ye().downObjects.removeValue(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"downPointers",{get:function(){return this._downPointers||(this._downPointers=new Ie),this._downPointers},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFocused",{get:function(){return this._isFocused},set:function(e){this.isFocused!=e&&(this._isFocused=e,e?ye().focusedObject=this:ye().focusedObject=void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isTouchProtected",{get:function(){return this._isTouchProtected},set:function(e){this._isTouchProtected!=e&&(this._isTouchProtected=e,e?ye().unprepElement(this):(this.draggable||this.swipeable||this.trackable||this.resizable)&&ye().prepElement(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clickable",{get:function(){return this._clickable},set:function(e){this._clickable!==e&&(this._clickable=e,ye().processClickable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contextMenuDisabled",{get:function(){return this._contextMenuDisabled},set:function(e){this._contextMenuDisabled!==e&&(this._contextMenuDisabled=e,ye().processContextMenu(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hoverable",{get:function(){return this._hoverable},set:function(e){this._hoverable!==e&&(this._hoverable=e,ye().processHoverable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trackable",{get:function(){return this._trackable},set:function(e){this._trackable!==e&&(this._trackable=e,ye().processTrackable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"draggable",{get:function(){return this._draggable},set:function(e){this._draggable!==e&&(this._draggable=e,ye().processDraggable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"swipeable",{get:function(){return this._swipeable},set:function(e){this._swipeable!==e&&(this._swipeable=e,ye().processSwipeable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resizable",{get:function(){return this._resizable},set:function(e){this._resizable!==e&&(this._resizable=e,ye().processResizable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wheelable",{get:function(){return this._wheelable},set:function(e){this._wheelable!==e&&(this._wheelable=e,ye().processWheelable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inert",{get:function(){return this._inert},set:function(e){this._inert!==e&&(this._inert=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusable",{get:function(){return this._focusable},set:function(e){this._focusable!==e&&(this._focusable=e,this._focusable&&this.tabindex==-1&&(this._tabindex=1),ye().processFocusable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabindex",{get:function(){return pp(this._tabindex,-1)},set:function(e){this._tabindex!==e&&(this._tabindex=e,e>-1&&(this.focusable=!0),ye().processFocusable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this._element},set:function(e){this._element=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalPosition",{get:function(){return this._originalPosition||{x:0,y:0}},set:function(e){this._originalPosition=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalScale",{get:function(){return pp(this._originalScale,1)},set:function(e){this._originalScale!==e&&(this._originalScale=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalAngle",{get:function(){return pp(this._originalAngle,0)},set:function(e){this._originalAngle!==e&&(this._originalAngle=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inertiaOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("inertiaOptions",this._inertiaOptions):this._inertiaOptions},set:function(e){this._inertiaOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hitOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("hitOptions",this._hitOptions):this._hitOptions},set:function(e){this._hitOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hoverOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("hoverOptions",this._hoverOptions):this._hoverOptions},set:function(e){this._hoverOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"swipeOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("swipeOptions",this._swipeOptions):this._swipeOptions},set:function(e){this._swipeOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyboardOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("keyboardOptions",this._keyboardOptions):this._keyboardOptions},set:function(e){this._keyboardOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mouseOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("mouseOptions",this._mouseOptions):this._mouseOptions},set:function(e){this._mouseOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursorOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("cursorOptions",this._cursorOptions):this._cursorOptions},set:function(e){this._cursorOptions=e},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(e){i.prototype.copyFrom.call(this,e),this.inertiaOptions=e.inertiaOptions,this.hitOptions=e.hitOptions,this.hoverOptions=e.hoverOptions,this.swipeOptions=e.swipeOptions,this.keyboardOptions=e.keyboardOptions,this.cursorOptions=e.cursorOptions,this.contextMenuDisabled=e.contextMenuDisabled,ye().applyCursorOverStyle(this)},t.prototype.setEventDisposer=function(e,r,o){var n=this.eventDisposers.getKey(e);r?n==null&&this.eventDisposers.setKey(e,o()):n!=null&&(n.dispose(),this.eventDisposers.removeKey(e))},t.prototype.dispose=function(){i.prototype.dispose.call(this);var e=ye();e.overObjects.removeValue(this),e.downObjects.removeValue(this),e.trackedObjects.removeValue(this),e.transformedObjects.removeValue(this),this.isHover&&this.wheelable&&e.unlockWheel(),e.focusedObject===this&&(e.focusedObject=void 0)},t}(ni);var hv=function(){function i(t,e){this._disposed=!1,this.directionX=0,this.directionY=0,this.interaction=t,this.keyboardEvent=e,this._startedOn=new Date().getTime(),ye().processDragStart(t),Ee.animations.push(this),this.update()}return i.prototype.update=function(){var t=this.interaction,e=ye().getKeyboardOption(t,"speed"),r=ye().getKeyboardOption(t,"accelleration"),o=ye().getKeyboardOption(t,"accellerationDelay"),n={x:0,y:0};this.keyboardEvent.shiftKey?(e*=.5,r=1):this.keyboardEvent.ctrlKey&&(e*=2);var s=new Date().getTime()-this._startedOn,a=s-o;if(r>0&&a>0){var l=s/o;s=o,n.x+=this.directionX*(e*r*l*a),n.y+=this.directionY*(e*r*l*a)}n.x+=this.directionX*(e*s),n.y+=this.directionY*(e*s),ye().handleTransformMove(t,n,{x:0,y:0},this.keyboardEvent,!0,!1)},i.prototype.isDisposed=function(){return this._disposed},i.prototype.dispose=function(){this._disposed||(ye().processDragStop(this.interaction),ve(Ee.animations,this))},i}();var pv=function(i){A(t,i);function t(e,r,o,n){var s=i.call(this)||this;return s.animations=[],s.className="Inertia",s.interaction=e,s.type=r,s.point=o,s.startPoint=n,s._disposers.push(new lo(s.animations)),s}return Object.defineProperty(t.prototype,"x",{get:function(){return this.point.x},set:function(e){M(e)&&(this.point.x=e,this.handleMove())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.point.y},set:function(e){M(e)&&(this.point.y=e,this.handleMove())},enumerable:!0,configurable:!0}),t.prototype.handleMove=function(){if(this.interaction.events.isEnabled("drag")){var e={type:"drag",target:this.interaction,shift:{x:this.x-this.startPoint.x,y:this.y-this.startPoint.y},startPoint:this.startPoint,point:{x:this.x,y:this.y},touch:!1};this.interaction.events.dispatchImmediately("drag",e)}},t.prototype.done=function(){this.interaction.inertias.removeKey(this.type),this.type==="move"&&ye().processDragStop(this.interaction),this.dispose()},t}(lt);var kS=function(){function i(){}return i.prototype.getEventKey=function(t){var e=t.keyCode||t.which,r;switch(e){case 38:r="up";break;case 40:r="down";break;case 37:r="left";break;case 39:r="right";break;case 13:r="enter";break;case 27:r="esc";break;case 36:r="home";break;case 35:r="end";break;case 9:r="tab";break;case 17:r="ctrl";break;case 18:r="alt";break;case 16:r="shift";break;case 32:r="space";break;case 36:r="home";break;case 35:r="end";break;case 33:r="pgup";break;case 34:r="pgdn";break;case 45:r="ins";break;case 46:r="del";break;case 107:r="plus";break;case 109:r="minus";break;default:r="other";break}return r},i.prototype.isKey=function(t,e){var r=this.getEventKey(t);return je(e)&&(e=[e]),e.indexOf(r)!==-1},i.prototype.shiftKey=function(t){return t.shiftKey},i.prototype.ctrlKey=function(t){return t.ctrlKey},i.prototype.altKey=function(t){return t.altKey},i.prototype.metaKey=function(t){return t.metaKey},i}();var qi=new kS;function tM(){return new Date}function zo(){return tM().getTime()}function gv(i,t){var e=new Date(i.toLocaleString("en-US",{timeZone:t}));return e}function VS(i){var t=new Date;t.setHours(0,0,0,0);var e=gv(t,i);return e.getMinutes()}var GS=function(i){A(t,i);function t(){var e=i.call(this)||this;return e._globalEventsAdded=!1,e._pointerEvents={pointerdown:"mousedown",pointerup:"mouseup",pointermove:"mousemove",pointercancel:"mouseup",pointerover:"mouseover",pointerout:"mouseout",wheel:"wheel"},e._usePointerEventsOnly=!1,e._useTouchEventsOnly=!1,e._addHoverEvents=!0,e._passiveSupported=!1,e._delayedEvents={out:[]},e.overObjects=new Ie,e.downObjects=new Ie,e.trackedObjects=new Ie,e.transformedObjects=new Ie,e.pointers=new Be,e.inertiaOptions=new Be,e.hitOptions={doubleHitTime:300,hitTolerance:10,noFocus:!0},e.hoverOptions={touchOutBehavior:"leave",touchOutDelay:1e3},e.swipeOptions={time:500,verticalThreshold:75,horizontalThreshold:30},e.keyboardOptions={speed:.1,accelleration:1.2,accellerationDelay:2e3},e.mouseOptions={sensitivity:1},e.className="Interaction",e.body=e.getInteraction(document.body),e._disposers.push(e.body),window.hasOwnProperty("PointerEvent")?(e._pointerEvents.pointerdown="pointerdown",e._pointerEvents.pointerup="pointerup",e._pointerEvents.pointermove="pointermove",e._pointerEvents.pointercancel="pointercancel",e._pointerEvents.pointerover="pointerover",e._pointerEvents.pointerout="pointerout"):window.hasOwnProperty("MSPointerEvent")?(e._pointerEvents.pointerdown="MSPointerDown",e._pointerEvents.pointerup="MSPointerUp",e._pointerEvents.pointermove="MSPointerMove",e._pointerEvents.pointercancel="MSPointerUp",e._pointerEvents.pointerover="MSPointerOver",e._pointerEvents.pointerout="MSPointerOut"):typeof matchMedia<"u"&&matchMedia("(pointer:fine)").matches?"ontouchstart"in window&&(e._addHoverEvents=!1,e._useTouchEventsOnly=!0):window.navigator.userAgent.match(/MSIE /)||e.fullFF()?e._usePointerEventsOnly=!0:e._useTouchEventsOnly=!0,"onwheel"in document.createElement("div")?e._pointerEvents.wheel="wheel":T(document.onmousewheel)&&(e._pointerEvents.wheel="mousewheel"),e.inertiaOptions.setKey("move",{time:100,duration:500,factor:1,easing:jp}),e.inertiaOptions.setKey("resize",{time:100,duration:500,factor:1,easing:jp}),e._passiveSupported=t.passiveSupported,e.applyTheme(),e}return t.prototype.fullFF=function(){return window.navigator.userAgent.match(/Firefox/)&&!window.navigator.userAgent.match(/Android/)},t.prototype.debug=function(){},t.prototype.addGlobalEvents=function(){var e=this;this._globalEventsAdded||(this._useTouchEventsOnly||(this._disposers.push(dt(document,this._pointerEvents.pointerdown,function(r){e.handleGlobalPointerDown(r)})),this._disposers.push(dt(document,this._pointerEvents.pointermove,function(r){e.handleGlobalPointerMove(r)})),this._disposers.push(dt(document,this._pointerEvents.pointerup,function(r){e.handleGlobalPointerUp(r)})),this._disposers.push(dt(document,this._pointerEvents.pointercancel,function(r){e.handleGlobalPointerUp(r,!0)})),this._disposers.push(dt(document,"mouseenter",function(r){!T(r.relatedTarget)&&(r.buttons==0||r.which==0)&&e.handleDocumentLeave(r)}))),this._usePointerEventsOnly||(this._disposers.push(dt(document,"touchstart",function(r){e.handleGlobalTouchStart(r)})),this._disposers.push(dt(document,"touchmove",function(r){e.handleGlobalTouchMove(r)})),this._disposers.push(dt(document,"touchend",function(r){e.handleGlobalTouchEnd(r)}))),this._disposers.push(dt(document,"keydown",function(r){e.handleGlobalKeyDown(r)})),this._disposers.push(dt(document,"keyup",function(r){e.handleGlobalKeyUp(r)})),this._globalEventsAdded=!0)},t.prototype.processClickable=function(e){this.processTouchable(e)},t.prototype.processContextMenu=function(e){e.contextMenuDisabled?e.eventDisposers.hasKey("contextMenuDisabled")||e.eventDisposers.setKey("contextMenuDisabled",dt(e.element,"contextmenu",function(r){r.preventDefault()})):e.eventDisposers.hasKey("contextMenuDisabled")&&e.eventDisposers.getKey("contextMenuDisabled").dispose()},t.prototype.processHoverable=function(e){var r=this;if(e.hoverable||e.trackable)this.addGlobalEvents(),this.applyCursorOverStyle(e),!e.eventDisposers.hasKey("hoverable")&&this._addHoverEvents&&e.eventDisposers.setKey("hoverable",new tt([dt(e.element,this._pointerEvents.pointerout,function(n){return r.handlePointerOut(e,n)}),dt(e.element,this._pointerEvents.pointerover,function(n){return r.handlePointerOver(e,n)})])),e.trackable;else{var o=e.eventDisposers.getKey("hoverable");o!=null&&(o.dispose(),e.eventDisposers.removeKey("hoverable"))}this.processTouchable(e)},t.prototype.processMovable=function(e){(e.draggable||e.swipeable||e.trackable||e.resizable)&&(!this.isGlobalElement(e)&&!e.isTouchProtected&&this.prepElement(e),this.applyCursorOverStyle(e)),this.processTouchable(e)},t.prototype.processTrackable=function(e){this.processHoverable(e),this.processMovable(e),e.trackable?this.trackedObjects.moveValue(e):this.trackedObjects.removeValue(e)},t.prototype.processDraggable=function(e){this.processMovable(e)},t.prototype.processSwipeable=function(e){this.processMovable(e)},t.prototype.processResizable=function(e){this.processMovable(e)},t.prototype.processWheelable=function(e){var r=this;if(e.wheelable)e.eventDisposers.hasKey("wheelable")||e.eventDisposers.setKey("wheelable",new tt([dt(e.element,this._pointerEvents.wheel,function(n){return r.handleMouseWheel(e,n)},this._passiveSupported?{passive:!1}:!1),e.events.on("out",function(n){e.wheelable&&r.unlockWheel()}),e.events.on("over",function(n){e.wheelable&&r.lockWheel()})]));else{var o=e.eventDisposers.getKey("wheelable");o!=null&&(o.dispose(),e.eventDisposers.removeKey("wheelable"))}},t.prototype.processFocusable=function(e){var r=this;if(e.focusable===!0&&e.tabindex>-1&&!this._useTouchEventsOnly)e.eventDisposers.hasKey("focusable")||e.eventDisposers.setKey("focusable",new tt([dt(e.element,"focus",function(n){return r.handleFocus(e,n)}),dt(e.element,"blur",function(n){return r.handleBlur(e,n)}),dt(e.element,this._pointerEvents.pointerdown,function(n){return r.handleFocusBlur(e,n)}),dt(e.element,"touchstart",function(n){return r.handleFocusBlur(e,n)},this._passiveSupported?{passive:!1}:!1)]));else{var o=e.eventDisposers.getKey("focusable");o!=null&&(o.dispose(),e.eventDisposers.removeKey("focusable"))}},t.prototype.processTouchable=function(e){var r=this;if(e.clickable||e.hoverable||e.trackable||e.draggable||e.swipeable||e.resizable)this.addGlobalEvents(),e.eventDisposers.hasKey("touchable")||(!this._useTouchEventsOnly&&!this._usePointerEventsOnly?e.eventDisposers.setKey("touchable",new tt([dt(e.element,this._pointerEvents.pointerdown,function(n){return r.handlePointerDown(e,n)}),dt(e.element,"touchstart",function(n){return r.handleTouchDown(e,n)},this._passiveSupported?{passive:!1}:!1)])):this._useTouchEventsOnly?this._usePointerEventsOnly||e.eventDisposers.setKey("touchable",dt(e.element,"touchstart",function(n){return r.handleTouchDown(e,n)},this._passiveSupported?{passive:!1}:!1)):e.eventDisposers.setKey("touchable",dt(e.element,this._pointerEvents.pointerdown,function(n){return r.handlePointerDown(e,n)})));else{var o=e.eventDisposers.getKey("touchable");o!=null&&(o.dispose(),e.eventDisposers.removeKey("touchable"))}},t.prototype.handleFocus=function(e,r){if(!e.focusable){r.preventDefault();return}if(e.isFocused=!0,e.events.isEnabled("focus")&&!Ee.isPaused){var o={type:"focus",target:e,event:r};e.events.dispatchImmediately("focus",o)}},t.prototype.handleFocusBlur=function(e,r){e.focusable!==!1&&this.getHitOption(e,"noFocus")&&e.events.once("focus",function(){e.events.disableType("blur"),Bu(),e.sprite&&e.sprite.handleBlur(),e.events.enableType("blur")})},t.prototype.handleBlur=function(e,r){if(!e.focusable){r.preventDefault();return}if(e.isFocused=!1,e.events.isEnabled("blur")&&!Ee.isPaused){var o={type:"blur",target:e,event:r};e.events.dispatchImmediately("blur",o)}},t.prototype.handleGlobalKeyDown=function(e){if(this.focusedObject){if(qi.isKey(e,"esc"))Bu();else if(this.focusedObject.draggable&&qi.isKey(e,["up","down","left","right"])){e.preventDefault();var r=this.focusedObject,o="interactionKeyboardObject";if(r.eventDisposers.hasKey(o))return;var n=new hv(r,e);switch(r.eventDisposers.setKey(o,n),qi.getEventKey(e)){case"up":n.directionY=-1;break;case"down":n.directionY=1;break;case"left":n.directionX=-1;break;case"right":n.directionX=1;break}}}},t.prototype.handleGlobalKeyUp=function(e){var r="interactionKeyboardObject";if(this.focusedObject){var o=this.focusedObject.eventDisposers.getKey(r);o!=null&&(e.preventDefault(),o.dispose(),this.focusedObject.eventDisposers.removeKey(r));var n=this.focusedObject.sprite;qi.isKey(e,"enter")&&n&&(n.events.isEnabled("hit")||n.events.isEnabled("toggled")?this.focusedObject.dispatchImmediately("hit"):n.showTooltipOn=="hit"&&this.focusedObject.dispatchImmediately("up"))}},t.prototype.handleGlobalPointerMove=function(e){var r=this.getPointer(e);if(r.point=this.getPointerPoint(e),this.events.isEnabled("track")&&!Ee.isPaused){var o={type:"track",target:this,event:e,pointer:r,touch:r.touch};this.events.dispatchImmediately("track",o)}this.addBreadCrumb(r,r.point),this.handleGlobalMove(r,e)},t.prototype.handleGlobalPointerDown=function(e){this.processDelayed();var r=this.getPointer(e);if(this.events.isEnabled("down")&&!Ee.isPaused){var o={type:"down",target:this,event:e,pointer:r,touch:r.touch};this.events.dispatchImmediately("down",o)}},t.prototype.preventTouchAction=function(e){e.defaultPrevented||e.preventDefault()},t.prototype.handleGlobalPointerUp=function(e,r){r===void 0&&(r=!1);var o=this.getPointer(e);if(this.events.isEnabled("up")&&!Ee.isPaused){var n={type:"up",target:this,event:e,pointer:o,touch:o.touch};this.events.dispatchImmediately("up",n)}this.handleGlobalUp(o,e,r)},t.prototype.handleGlobalTouchMove=function(e){for(var r=0;r<e.changedTouches.length;r++){var o=this.getPointer(e.changedTouches[r]);if(o.point=this.getPointerPoint(e.changedTouches[r]),this.events.isEnabled("track")&&!Ee.isPaused){var n={type:"track",target:this,event:e,pointer:o,touch:o.touch};this.events.dispatchImmediately("track",n)}this.addBreadCrumb(o,o.point),this.handleGlobalMove(o,e)}},t.prototype.handleGlobalTouchStart=function(e){this.processDelayed();for(var r=0;r<e.changedTouches.length;r++){var o=this.getPointer(e.changedTouches[r]);if(!this._usePointerEventsOnly&&this.events.isEnabled("down")&&!Ee.isPaused){var n={type:"down",target:this,event:e,pointer:o,touch:o.touch};this.events.dispatchImmediately("down",n)}}},t.prototype.handleGlobalTouchEnd=function(e){for(var r=0;r<e.changedTouches.length;r++){var o=this.getPointer(e.changedTouches[r]);if(this.events.isEnabled("up")&&!Ee.isPaused){var n={type:"up",target:this,event:e,pointer:o,touch:o.touch};this.events.dispatchImmediately("up",n)}this.handleGlobalUp(o,e)}},t.prototype.handlePointerDown=function(e,r){var o=this.getPointer(r);!o.touch&&r.which!=1&&r.which!=3||(o.button=r.which,this.resetPointer(o,r),this.handleDown(e,o,r))},t.prototype.handlePointerOver=function(e,r){var o=this.getPointer(r);this.handleOver(e,o,r)},t.prototype.handlePointerOut=function(e,r){var o=this.getPointer(r);this.handleOut(e,o,r)},t.prototype.handleMouseWheel=function(e,r){var o=this.getPointer(r);o.point=this.getPointerPoint(r);var n=0,s=0,a=1;if(r.deltaMode==1&&(a=50),a*=this.getMouseOption(e,"sensitivity"),r instanceof WheelEvent)n=Math.round(-1*r.wheelDeltaX||r.deltaX*a),s=Math.round(-1*r.wheelDeltaY||r.deltaY*a);else throw new Error("Invalid event type");this.handleWheel(e,o,n,s,r)},t.prototype.handleTouchDown=function(e,r){for(var o=0;o<r.changedTouches.length;o++){var n=this.getPointer(r.changedTouches[o]);this.maybePreventDefault(e,r,n),this.resetPointer(n,r.changedTouches[o]),this.handleDown(e,n,r)}},t.prototype.handleHit=function(e,r,o){var n=zo();if(e.lastHit&&e.lastHit>=n-this.getHitOption(e,"doubleHitTime")){if(n-e.lastHit<100)return;if(e.lastHit=void 0,e.lastHitPointer=void 0,e.events.isEnabled("doublehit")&&!Ee.isPaused){var s={type:"doublehit",target:e,point:r.point,event:o,touch:r.touch};e.events.dispatchImmediately("doublehit",s)}}else if(e.lastHit=n,e.lastHitPointer=r,r.button===3){if(e.events.isEnabled("rightclick")&&!Ee.isPaused){var s={type:"rightclick",target:e,event:o};e.events.dispatchImmediately("rightclick",s)}}else if(e.events.isEnabled("hit")&&!Ee.isPaused){var s={type:"hit",target:e,event:o,point:r.point,touch:r.touch};e.events.dispatchImmediately("hit",s)}},t.prototype.handleOver=function(e,r,o,n){if(n===void 0&&(n=!1),!!e.hoverable){var s=!1;if(this.shouldCancelHovers(r)&&this.areTransformed()&&this.moved(r,this.getHitOption(e,"hitTolerance"))&&(s=!0,this.cancelAllHovers(o)),this.processDelayed(),e.overPointers.moveValue(r),!e.isRealHover&&(s||(e.isHover=!0,e.isRealHover=!0,this.overObjects.moveValue(e)),this.handleTrack(this.body,r,o,!0),e.events.isEnabled("over")&&!Ee.isPaused&&!s)){var a={type:"over",target:e,event:o,pointer:r,touch:r.touch};e.events.dispatchImmediately("over",a)}}},t.prototype.handleOut=function(e,r,o,n,s){var a=this;if(n===void 0&&(n=!1),s===void 0&&(s=!1),!!e.hoverable&&(e.overPointers.removeValue(r),e.isHover&&(!e.hasDelayedOut||s))){if(n&&e.overPointers.length)return;if(r&&r.touch&&!s&&!this.old(r)){var l=this.getHoverOption(e,"touchOutBehavior");if(l=="leave"){this._delayedEvents.out.push({type:"out",io:e,pointer:r,event:o,keepUntil:zo()+500}),e.hasDelayedOut=!0;return}else if(l=="delay"&&this.getHoverOption(e,"touchOutDelay")){this._delayedEvents.out.push({type:"out",io:e,pointer:r,event:o,keepUntil:zo()+500,timeout:this.setTimeout(function(){a.handleOut(e,r,o,!0)},this.getHoverOption(e,"touchOutDelay"))});return}}if(e.isHover=!1,this.overObjects.removeValue(e),!e.isDisposed()&&e.events.isEnabled("out")&&!Ee.isPaused){var d={type:"out",target:e,event:o,pointer:r,touch:r.touch};e.events.dispatchImmediately("out",d)}e.overPointers.clear(),e.hasDelayedOut=!1}},t.prototype.processDelayed=function(){for(var e;e=this._delayedEvents.out.pop(),!!e;)e.timeout&&e.timeout.dispose(),this.handleOut(e.io,e.pointer,e.event,!1,!0)},t.prototype.handleDown=function(e,r,o){if(this.maybePreventDefault(e,o,r),e.inert&&this.stopInertia(e),this.handleOver(e,r,o,!0),e.downPointers.moveValue(r),this.applyCursorDownStyle(e,r),e.isDown||(e.focusable!==!1&&this.getHitOption(e,"noFocus")&&this.focusedObject&&Bu(),e.isDown=!0,this.downObjects.moveValue(e),e.draggable&&this.processDragStart(e,r,o),e.resizable&&this.processResizeStart(e,r,o)),e.events.isEnabled("down")&&!Ee.isPaused){var n={type:"down",target:e,event:o,pointer:r,touch:r.touch};e.events.dispatchImmediately("down",n)}},t.prototype.handleGlobalUp=function(e,r,o){var n=this;o===void 0&&(o=!1);var s=this.downObjects.values.slice();s.sort(function(a,l){if(a&&l){var d=a.element.compareDocumentPosition(l.element);return d&Node.DOCUMENT_POSITION_CONTAINED_BY?1:d&Node.DOCUMENT_POSITION_CONTAINS?-1:0}else return 0}),Z(s,function(a){a&&a.downPointers.contains(e)&&n.handleUp(a,e,r,o)})},t.prototype.handleDocumentLeave=function(e){var r=this;de(this.downObjects.backwards().iterator(),function(o){o.downPointers.each(function(n){r.handleUp(o,n,e)})})},t.prototype.handleUp=function(e,r,o,n){if(n===void 0&&(n=!1),this.restoreCursorDownStyle(e,r),e.downPointers.removeValue(r),(r&&r.touch||this._useTouchEventsOnly)&&this.handleOut(e,r,o,!0),e.isDown){if(e.downPointers.length==0&&(e.isDown=!1,this.downObjects.removeValue(e)),e.events.isEnabled("up")&&!Ee.isPaused&&r){var s={type:"up",target:e,event:o,pointer:r,touch:r.touch};e.events.dispatchImmediately("up",s)}n||(e.swipeable&&this.swiped(e,r)?this.handleSwipe(e,r,o):(e.clickable&&!this.moved(r,this.getHitOption(e,"hitTolerance"))&&this.handleHit(e,r,o),e.inert&&this.moved(r,this.getHitOption(e,"hitTolerance"))?this.handleInertia(e,r):e.draggable&&this.processDragStop(e,r,o),e.resizable&&this.processResizeStop(e,r,o)))}},t.prototype.maybePreventDefault=function(e,r,o){T(r)&&(e.draggable||e.swipeable||e.trackable||e.resizable)&&!this.isGlobalElement(e)&&r.cancelable!==!1&&(!e.isTouchProtected||!o||!o.touch)&&r.preventDefault()},t.prototype.cancelAllHovers=function(e){var r=this;de(this.overObjects.backwards().iterator(),function(o){if(o){var n=o.overPointers.getIndex(0);r.handleOut(o,n,e,!0,!0)}})},t.prototype.shouldCancelHovers=function(e){return we.disableHoverOnTransform=="always"||we.disableHoverOnTransform=="touch"&&e.touch},t.prototype.handleGlobalMove=function(e,r){var o=this;if(!e.touch){var n=OS(e.lastEvent);de(this.overObjects.backwards().iterator(),function(s){if(s&&s.overPointers.contains(e)&&s.hoverable){var a=!1;s.element&&e.lastEvent&&sv(s.element,n)||(a=!0),a&&o.handleOut(s,e,r,!0)}})}de(this.transformedObjects.backwards().iterator(),function(s){s.downPointers.contains(e)&&!(s.swipeable&&o.swiping(s,e))&&(s.draggable||s.resizable)&&o.handleTransform(s,r)}),de(this.trackedObjects.backwards().iterator(),function(s){s.overPointers.contains(e)||o.handleTrack(s,e,r)})},t.prototype.handleTrack=function(e,r,o,n){if(n===void 0&&(n=!1),!(!n&&!this.moved(r,0))&&e.events.isEnabled("track")&&!Ee.isPaused){var s={type:"track",target:e,event:o,point:r.point,pointer:r,touch:r.touch};e.events.dispatchImmediately("track",s)}},t.prototype.handleSwipe=function(e,r,o){if(e.events.isEnabled("swipe")&&!Ee.isPaused){var n={type:"swipe",target:e,event:o,touch:r.touch};e.events.dispatchImmediately("swipe",n)}if(r.startPoint.x<r.point.x){if(e.events.isEnabled("swiperight")&&!Ee.isPaused){var n={type:"swiperight",target:e,event:o,touch:r.touch};e.events.dispatchImmediately("swiperight",n)}}else if(e.events.isEnabled("swipeleft")&&!Ee.isPaused){var n={type:"swipeleft",target:e,event:o,touch:r.touch};e.events.dispatchImmediately("swipeleft",n)}},t.prototype.handleWheel=function(e,r,o,n,s){var a={x:o,y:n};e.events.isEnabled("wheel")&&!Ee.isPaused&&e.events.dispatchImmediately("wheel",{type:"wheel",target:e,event:s,point:r.point,shift:a}),o<0?e.events.isEnabled("wheelleft")&&!Ee.isPaused&&e.events.dispatchImmediately("wheelleft",{type:"wheelleft",target:e,event:s,point:r.point,shift:a}):o>0?e.events.isEnabled("swiperight")&&!Ee.isPaused&&e.events.dispatchImmediately("wheelright",{type:"wheelright",target:e,event:s,point:r.point,shift:a}):n<0?e.events.isEnabled("wheelup")&&!Ee.isPaused&&e.events.dispatchImmediately("wheelup",{type:"wheelup",target:e,event:s,point:r.point,shift:a}):n>0&&e.events.isEnabled("wheeldown")&&!Ee.isPaused&&e.events.dispatchImmediately("wheeldown",{type:"wheeldown",target:e,event:s,point:r.point,shift:a})},t.prototype.handleInertia=function(e,r){e.draggable&&e.downPointers.length===0&&this.handleMoveInertia(e,r),e.resizable&&e.downPointers.length>1&&this.handleResizeInertia(e,r)},t.prototype.handleMoveInertia=function(e,r){var o=e,n="move",s={x:r.point.x,y:r.point.y},a={x:r.startPoint.x,y:r.startPoint.y},l=new pv(o,n,s,a),d=this.getTrailPoint(r,zo()-this.getInertiaOption(e,"move","time"));if(typeof d>"u"){this.processDragStop(e,r,r.lastUpEvent);return}var u=this.getInertiaOption(e,"move","factor"),c=[{to:r.point.x+(r.point.x-d.point.x)*u,property:"x"},{to:r.point.y+(r.point.y-d.point.y)*u,property:"y"}],h=new Fi(l,c,this.getInertiaOption(e,"move","duration"),this.getInertiaOption(e,"move","easing")).start();this._disposers.push(h.events.on("animationended",function(p){l.done()})),e.inertias.setKey("move",l)},t.prototype.handleResizeInertia=function(e,r){},t.prototype.handleTransform=function(e,r){var o=e.downPointers.getIndex(0),n=null,s=null;o&&(n=o.point,s=o.startPoint);var a,l,d;l={x:e.originalPosition.x,y:e.originalPosition.y},d=l;for(var u=!0,c=1;c<e.downPointers.length;c++){var h=e.downPointers.getIndex(c);if(s.x!=h.startPoint.x&&s.y!=h.startPoint.y){u=!1,a=h,l=a.point,d=a.startPoint;break}}var p=o&&this.moved(o,0);if(e.draggable&&o&&o.dragStartEvents&&o.dragStartEvents.length&&p&&e.events.isEnabled("dragstart")&&!Ee.isPaused&&e.events.dispatchImmediately("dragstart",o.dragStartEvents.shift()),u&&e.draggable)this.handleTransformMove(e,n,s,r,p,o.touch),this.shouldCancelHovers(o)&&this.moved(o,this.getHitOption(e,"hitTolerance"))&&this.cancelAllHovers(r);else{var f=a&&this.moved(a,0);(this.shouldCancelHovers(o)&&this.moved(o,this.getHitOption(e,"hitTolerance"))||this.shouldCancelHovers(a)&&this.moved(a,this.getHitOption(e,"hitTolerance")))&&this.cancelAllHovers(r),e.draggable&&e.resizable?(this.handleTransformMove(e,n,s,r,p&&f,o.touch),this.handleTransformResize(e,n,s,l,d,r,p&&f,o.touch)):(e.draggable&&this.handleTransformMove(e,n,s,r,p,o.touch),e.resizable&&(!u||r.ctrlKey)&&this.handleTransformResize(e,n,s,l,d,r,p&&f,o.touch))}},t.prototype.handleTransformMove=function(e,r,o,n,s,a){if(s&&e.events.isEnabled("drag")&&!Ee.isPaused&&(!e.isTouchProtected||!a)){var l={type:"drag",target:e,event:n,shift:{x:r.x-o.x,y:r.y-o.y},startPoint:o,point:r,touch:a};e.events.dispatchImmediately("drag",l)}},t.prototype.handleTransformResize=function(e,r,o,n,s,a,l,d){if(e.events.isEnabled("resize")&&!Ee.isPaused&&(!e.isTouchProtected||!d)){var u={type:"resize",target:e,event:a,scale:A0(r,o,n,s),startPoint1:o,point1:r,startPoint2:s,point2:n,touch:d};e.events.dispatchImmediately("resize",u)}},t.prototype.processDragStart=function(e,r,o){this.transformedObjects.moveValue(e),this.shouldCancelHovers(r)&&this.cancelAllHovers(o);var n={type:"dragstart",target:e,event:o,touch:r?r.touch:!1};r&&(r.dragTarget=e),r&&r.dragStartEvents?r.dragStartEvents.push(n):Ee.isPaused||e.dispatchImmediately("dragstart",n)},t.prototype.processDragStop=function(e,r,o){if(r||(r=this.getDragPointer(e)),r&&(r.dragTarget=void 0),this.transformedObjects.removeValue(e),(!r||this.moved(r,0))&&e.events.isEnabled("dragstop")&&!Ee.isPaused){var n={type:"dragstop",target:e,touch:r?r.touch:!1};e.events.dispatchImmediately("dragstop",n)}},t.prototype.processResizeStart=function(e,r,o){this.transformedObjects.moveValue(e)},t.prototype.processResizeStop=function(e,r,o){this.transformedObjects.removeValue(e)},t.prototype.dragStart=function(e,r){r||(r=this.getDragPointer(e)),r&&this.handleDown(e,r,r.lastDownEvent)},t.prototype.dragStop=function(e,r,o){r||(r=this.getDragPointer(e)),r&&!o&&this.handleGlobalUp(r,r.lastUpEvent,o)},t.prototype.getDragPointer=function(e){return e?e.downPointers.getIndex(0):this.transformedObjects.length?this.getDragPointer(this.transformedObjects.getIndex(0)):void 0},t.prototype.getPointerId=function(e){var r="";return T(e.identifier)?r=""+e.identifier:T(e.pointerId)?r=""+e.pointerId:r="m",r.replace("-","")},t.prototype.getPointerPoint=function(e){return{x:e.clientX,y:e.clientY}},t.prototype.getPointer=function(e){var r=this.getPointerId(e),o=this.getPointerPoint(e),n;return this.pointers.hasKey(r)?(n=this.pointers.getKey(r),n.touch=this.isPointerTouch(e)):(n={id:r,touch:this.isPointerTouch(e),startPoint:o,startTime:zo(),point:o,track:[],swipeCanceled:!1,dragStartEvents:[]},this.addBreadCrumb(n,o),this.pointers.setKey(r,n)),n.lastEvent=e,this.lastPointer=n,n},t.prototype.isPointerTouch=function(e){if(typeof Touch<"u"&&e instanceof Touch)return!0;if(typeof PointerEvent<"u"&&e instanceof PointerEvent&&T(e.pointerType))switch(e.pointerType){case"touch":case"pen":case 2:return!0;case"mouse":case 4:return!1;default:return!(e instanceof MouseEvent)}else if(T(e.type)&&e.type.match(/^mouse/))return!1;return!0},t.prototype.resetPointer=function(e,r){var o=this.getPointerPoint(r);e.startTime=zo(),e.startPoint={x:o.x,y:o.y},e.point={x:o.x,y:o.y},e.track=[],e.swipeCanceled=!1},t.prototype.addBreadCrumb=function(e,r){e.track.push({timestamp:zo(),point:r})},t.prototype.lockDocument=function(){this.prepElement(this.body)},t.prototype.unlockDocument=function(){this.transformedObjects.length==0&&this.restoreAllStyles(this.body)},t.prototype.lockElement=function(e){this.prepElement(e)},t.prototype.unlockElement=function(e){this.restoreAllStyles(e)},t.prototype.lockWheel=function(){window.addEventListener(this._pointerEvents.wheel,this.wheelLockEvent,this._passiveSupported?{passive:!1}:!1)},t.prototype.unlockWheel=function(){window.removeEventListener(this._pointerEvents.wheel,this.wheelLockEvent)},t.prototype.isLocalElement=function(e,r,o){var n=this.getCache("local_pointer_"+e.id);if(T(n))return n;var s=qp(r)||document;if(s.elementFromPoint){var a=s.elementFromPoint(e.point.x,e.point.y),l=a&&sv(r,a);return this.setCache("local_pointer_"+e.id+"_"+o,l,100),l}return!1},t.prototype.wheelLockEvent=function(e){return e.preventDefault(),!1},t.prototype.prepElement=function(e){var r=e.element;if(r){for(var o=["touchAction","webkitTouchAction","MozTouchAction","MSTouchAction","msTouchAction","oTouchAction","userSelect","webkitUserSelect","MozUserSelect","MSUserSelect","msUserSelect","oUserSelect","touchSelect","webkitTouchSelect","MozTouchSelect","MSTouchSelect","msTouchSelect","oTouchSelect","touchCallout","webkitTouchCallout","MozTouchCallout","MSTouchCallout","msTouchCallout","oTouchCallout","contentZooming","webkitContentZooming","MozContentZooming","MSContentZooming","msContentZooming","oContentZooming","userDrag","webkitUserDrag","MozUserDrag","MSUserDrag","msUserDrag","oUserDrag"],n=0;n<o.length;n++)o[n]in r.style&&this.setTemporaryStyle(e,o[n],"none");this.setTemporaryStyle(e,"tapHighlightColor","rgba(0, 0, 0, 0)")}},t.prototype.unprepElement=function(e){var r=e.element;if(r){for(var o=["touchAction","webkitTouchAction","MozTouchAction","MSTouchAction","msTouchAction","oTouchAction","userSelect","webkitUserSelect","MozUserSelect","MSUserSelect","msUserSelect","oUserSelect","touchSelect","webkitTouchSelect","MozTouchSelect","MSTouchSelect","msTouchSelect","oTouchSelect","touchCallout","webkitTouchCallout","MozTouchCallout","MSTouchCallout","msTouchCallout","oTouchCallout","contentZooming","webkitContentZooming","MozContentZooming","MSContentZooming","msContentZooming","oContentZooming","userDrag","webkitUserDrag","MozUserDrag","MSUserDrag","msUserDrag","oUserDrag"],n=0;n<o.length;n++)o[n]in r.style&&this.restoreStyle(e,o[n]);this.restoreStyle(e,"tapHighlightColor")}},t.prototype.getHitOption=function(e,r){var o=e.hitOptions[r];return typeof o>"u"&&(o=this.hitOptions[r]),o},t.prototype.getHoverOption=function(e,r){var o=e.hoverOptions[r];return typeof o>"u"&&(o=this.hoverOptions[r]),o},t.prototype.getSwipeOption=function(e,r){var o=e.swipeOptions[r];return typeof o>"u"&&(o=this.swipeOptions[r]),o},t.prototype.getKeyboardOption=function(e,r){var o=e.keyboardOptions[r];return typeof o>"u"&&(o=this.keyboardOptions[r]),o},t.prototype.getMouseOption=function(e,r){var o=e.mouseOptions[r];return typeof o>"u"&&(o=this.mouseOptions[r]),o},t.prototype.getInertiaOption=function(e,r,o){var n=e.inertiaOptions.getKey(r),s;return n&&T(n[o])?s=n[o]:s=this.inertiaOptions.getKey(r)[o],s},t.prototype.stopInertia=function(e){for(var r,o=["move","resize"],n=0;n<o.length;n++)if(r=o[n],e.inertias.hasKey(r)){var s=e.inertias.getKey(r);if(s){s.dispose();continue}}},t.prototype.swiping=function(e,r){var o=zo();return r.swipeCanceled||!e.swipeable?!1:Math.abs(r.startPoint.y-r.point.y)<this.getSwipeOption(e,"verticalThreshold")&&r.startTime>o-this.getSwipeOption(e,"time")},t.prototype.swiped=function(e,r){var o=zo();return r.swipeCanceled?!1:Math.abs(r.startPoint.x-r.point.x)>this.getSwipeOption(e,"horizontalThreshold")&&Math.abs(r.startPoint.y-r.point.y)<this.getSwipeOption(e,"verticalThreshold")&&r.startTime>o-this.getSwipeOption(e,"time")},t.prototype.applyCursorOverStyle=function(e){var r=e.cursorOptions;if(T(r.overStyle))for(var o=0;o<r.overStyle.length;o++)nv(e.element,r.overStyle[o].property,r.overStyle[o].value)},t.prototype.applyCursorDownStyle=function(e,r){if(!(r&&r.touch)){var o=e.cursorOptions.downStyle;if(e.downPointers.contains(r)&&T(o))for(var n=0;n<o.length;n++)this.setTemporaryStyle(this.body,o[n].property,o[n].value),this.setTemporaryStyle(e,o[n].property,o[n].value)}},t.prototype.restoreCursorDownStyle=function(e,r){if(!(r&&r.touch)){var o=e.cursorOptions.downStyle;if(e.downPointers.contains(r)&&T(o))for(var n=0;n<o.length;n++)this.restoreStyle(this.body,o[n].property),this.restoreStyle(e,o[n].property)}},t.prototype.setGlobalStyle=function(e){for(var r=ye().body,o=jt(e)?e:[e],n=0;n<o.length;n++)this.setTemporaryStyle(r,o[n].property,o[n].value)},t.prototype.restoreGlobalStyle=function(e){for(var r=ye().body,o=jt(e)?e:[e],n=0;n<o.length;n++)this.restoreStyle(r,o[n].property)},t.prototype.isGlobalElement=function(e){return document.body===e.element},t.prototype.moved=function(e,r,o){o===void 0&&(o=300);var n=this.getShift(e);return Math.abs(n.x)>r||Math.abs(n.y)>r},t.prototype.old=function(e,r){return r===void 0&&(r=300),zo()-e.startTime>r},t.prototype.getShift=function(e){return{x:e.startPoint.x-e.point.x,y:e.startPoint.y-e.point.y}},t.prototype.getTrailPoint=function(e,r){for(var o,n=0;n<e.track.length;n++)if(e.track[n].timestamp>=r){o=e.track[n];break}return o},t.prototype.pointerExists=function(e,r){var o=!1;return e.each(function(n){n!=r&&(o=n.point.x==r.point.x&&n.point.y==r.point.y)}),o},t.prototype.getInteraction=function(e){return new cv(e)},t.prototype.setTemporaryStyle=function(e,r,o){var n=e.element;T(n.style[r])&&!e.replacedStyles.hasKey(r)&&e.replacedStyles.setKey(r,n.style[r]),nv(n,r,o)},t.prototype.restoreStyle=function(e,r){e.replacedStyles.hasKey(r)?(e.element.style[r]=e.replacedStyles.getKey(r),e.replacedStyles.removeKey(r)):delete e.element.style[r]},t.prototype.restoreAllStyles=function(e){de(e.replacedStyles.iterator(),function(r){var o=r[0],n=r[1];e.element.style[o]=n,e.replacedStyles.removeKey(o)})},t.prototype.dispose=function(){this.isDisposed()||(i.prototype.dispose.call(this),this.restoreAllStyles(this.body),this.unlockWheel())},t.prototype.log=function(e,r,o){var n=!0;if(n){if(r.changedTouches){for(var s=0;s<r.changedTouches.length;s++)this.logTouch(e,r.type,r.changedTouches[s]);return}var a="";if(r.pointerType)switch(r.pointerType){case 2:a="touch";break;case 4:a="mouse";break;default:a=r.pointerType;break}else typeof TouchEvent<"u"&&r instanceof TouchEvent?a="touch":r.type.match(/^mouse/)?a="mouse":a="???";var l="";T(r.identifier)?l=r.identifier:T(r.pointerId)?l=r.pointerId:l="???",console.log(o?e+" ("+o.uid+")  "+r.type+"  "+a+"  "+l:e+"  "+r.type+"  "+a+"  "+l)}},t.prototype.areTransformed=function(e){var r=this.transformedObjects.length;if(e)for(var o=jt(e)?e:[e],n=0;n<o.length;n++)this.transformedObjects.contains(o[n])&&r--;return r>0},t.prototype.logTouch=function(e,r,o){console.log(e+"  "+r+"  touch  "+o.identifier)},Object.defineProperty(t,"passiveSupported",{get:function(){var e=this;if(this._passiveSupported==null)try{var r=Object.defineProperty({},"passive",{get:function(){e._passiveSupported=!0}});window.addEventListener("test",r,r),window.removeEventListener("test",r,r)}catch{this._passiveSupported=!1}return this._passiveSupported},enumerable:!0,configurable:!0}),t}(ni);var mv=null;function ye(){return mv==null&&(mv=new GS),mv}var ju=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.adapter=new _t(e),e._elements={},e._IOs={},e._content="",e._title="",e._classPrefix="ampopup",e._defaultStyles=!0,e._showCurtain=!1,e._draggable=!0,e._align="center",e._dynamicResize=!0,e._verticalAlign="middle",e._shift={x:0,y:0},e._tempShift={x:0,y:0},e._readerTitle="",e._closable=!0,e._cssLoaded=!1,e._fitTo="window",e.isTemplate=!1,e._sized=!1,e.className="Popup",e}return t.prototype.open=function(){this.container&&(this._elements.wrapper&&this.container.appendChild(this._elements.wrapper),this._elements.curtain&&(this.container.appendChild(this._elements.curtain),this.showCurtain=this.showCurtain),this.positionElement(),this.dispatchImmediately("opened"))},t.prototype.close=function(){this._elements.wrapper&&this._elements.wrapper.parentElement&&this._elements.wrapper.parentElement.removeChild(this._elements.wrapper),this._elements.curtain&&this._elements.curtain.parentElement&&this._elements.curtain.parentElement.removeChild(this._elements.curtain),this.dispatchImmediately("closed"),this.releasePointers()},t.prototype.dispose=function(){this.close(),i.prototype.dispose.call(this)},t.prototype.positionElement=function(e){var r=this;e===void 0&&(e=!0),this._elements.wrapper&&setTimeout(function(){if(r._elements.wrapper){if(e||!r._sized){r._elements.wrapper.style.opacity="0.01",r._elements.wrapper.style.left="0",r._elements.wrapper.style.top="0",r._elements.wrapper.style.margin="0 0 0 0",r._elements.wrapper.style.width="",r._elements.wrapper.style.height="";var o=r._elements.wrapper.getBoundingClientRect();r._elements.wrapper.style.width=o.width+"px",r._elements.wrapper.style.height=o.height+"px",r._sized=!0}if(r.dynamicResize)for(var n=r._elements.wrapper.getElementsByTagName("img"),s=0;s<n.length;s++){var a=n[s];if(!a.complete){a.addEventListener("load",function(){r.positionElement(!0)});break}}setTimeout(function(){if(r._elements.wrapper){var l;switch((e||!r._sized)&&r._bbox?l=r._bbox:(l=r._elements.wrapper.getBoundingClientRect(),r._elements.wrapper.style.opacity=""),r.align){case"left":r._elements.wrapper.style.left="0",r._elements.wrapper.style.right="auto",r._elements.wrapper.style.marginLeft=r.toStyle(r._shift.x+r._tempShift.x);break;case"center":r._elements.wrapper.style.left="50%",r._elements.wrapper.style.right="auto",r._elements.wrapper.style.marginLeft=r.toStyle(Math.round(-l.width/2)+(r._shift.x+r._tempShift.x));break;case"right":r._elements.wrapper.style.left="auto",r._elements.wrapper.style.right="0",r._elements.wrapper.style.marginLeft=r.toStyle(r._shift.x+r._tempShift.x);break;default:r._elements.wrapper.style.left=r.toStyle(r.left)||"auto",r._elements.wrapper.style.right=r.toStyle(r.right)||"auto",r._elements.wrapper.style.marginLeft=r.toStyle(r._shift.x+r._tempShift.x);break}switch(r.verticalAlign){case"top":r._elements.wrapper.style.top="0",r._elements.wrapper.style.bottom="auto",r._elements.wrapper.style.marginTop=r.toStyle(r._shift.y+r._tempShift.y);break;case"middle":r._elements.wrapper.style.top="50%",r._elements.wrapper.style.bottom="auto",r._elements.wrapper.style.marginTop=r.toStyle(Math.round(-l.height/2)+(r._shift.y+r._tempShift.y));break;case"bottom":r._elements.wrapper.style.top="auto",r._elements.wrapper.style.bottom="0",r._elements.wrapper.style.marginTop=r.toStyle(r._shift.y+r._tempShift.y);break;default:r._elements.wrapper.style.top=r.toStyle(r.top)||"auto",r._elements.wrapper.style.bottom=r.toStyle(r.bottom)||"auto",r._elements.wrapper.style.marginTop=r.toStyle(r._shift.y+r._tempShift.y);break}}},1)}},1)},t.prototype.setupDragging=function(){var e=this;this.draggable?(this._IOs.header.events.has("drag")||this._IOs.header.events.on("drag",function(r){e._tempShift.x=r.shift.x,e._tempShift.y=r.shift.y,e.positionElement(!1)}),this._IOs.header.events.has("dragstop")||this._IOs.header.events.on("dragstop",function(r){e._shift.x+=e._tempShift.x,e._shift.y+=e._tempShift.y,e._tempShift.x=0,e._tempShift.y=0,e.positionElement(!1)})):this._IOs.header&&(ye().unprepElement(this._IOs.header),this._IOs.header.events.has("drag")&&this._IOs.header.events.off("drag"),this._IOs.header.events.has("dragstop")&&this._IOs.header.events.off("dragstop"))},t.prototype.toStyle=function(e){return T(e)?M(e)?""+e+"px":e.toString():null},Object.defineProperty(t.prototype,"classPrefix",{get:function(){return this.adapter.apply("classPrefix",this._classPrefix)},set:function(e){this._classPrefix=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classPrefixRaw",{get:function(){return this._classPrefix},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this.adapter.apply("content",this._content)},set:function(e){this._content!=e&&(this._content=e,this._elements.content||this.createContentElement(),this._elements.content.innerHTML=e,this.positionElement())},enumerable:!0,configurable:!0}),t.prototype.getClassNames=function(){return this.adapter.apply("classNames",{wrapperClass:this.classPrefix+"",headerClass:this.classPrefix+"-header",titleClass:this.classPrefix+"-title",contentClass:this.classPrefix+"-content",insideClass:this.classPrefix+"-inside",curtainClass:this.classPrefix+"-curtain",closeClass:this.classPrefix+"-close"})},t.prototype.createContentElement=function(){if(!this._elements.wrapper){var e=this.getClassNames(),r=document.createElement("div");r.className=e.contentClass,r.style.opacity="0.01";var o=document.createElement("a");o.className=e.closeClass;var n=document.createElement("div");n.className=e.headerClass;var s=document.createElement("div");s.innerHTML=this.title,s.className=e.titleClass,this.title||(s.style.display="none");var a=document.createElement("div");a.className=e.insideClass,a.innerHTML=this.content,this._IOs.wrapper=ye().getInteraction(r),this._IOs.header=ye().getInteraction(n),this._disposers.push(this._IOs.wrapper),this._IOs.wrapper.events.on("over",this.disablePointers,this),this._IOs.wrapper.events.on("out",this.releasePointers,this),this._IOs.close=ye().getInteraction(o),this._disposers.push(this._IOs.close),o.style.visibility="hidden",r.setAttribute("role","dialog"),n.appendChild(o),n.appendChild(s),r.appendChild(n),r.appendChild(a),this.container.appendChild(r),this._elements.wrapper=r,this._elements.header=n,this._elements.content=a,this._elements.title=s,this._elements.close=o,this.defaultStyles&&this.loadDefaultCSS(),this.createCurtainElement(),this.applyEvents(),this.applyReaderSettings(),this.setupDragging()}},Object.defineProperty(t.prototype,"title",{get:function(){return this.adapter.apply("title",this._title)},set:function(e){this._title!=e&&(this._title=e,this._elements.content||this.createContentElement(),this._elements.title.innerHTML=e,this.positionElement(),this.applyReaderSettings())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readerTitle",{get:function(){return this.adapter.apply("readerTitle",this._readerTitle!=""?this._readerTitle:this.title)},set:function(e){this._readerTitle!=e&&(this._readerTitle=e,this.applyReaderSettings())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closable",{get:function(){return this.adapter.apply("closable",this._closable)},set:function(e){e!==this._closable&&(this._closable=e,this.applyEvents())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fitTo",{get:function(){return this.adapter.apply("fitTo",this._fitTo)},set:function(e){e!=this._fitTo&&(this._fitTo=e,this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultStyles",{get:function(){return this.adapter.apply("defaultStyles",this._defaultStyles)},set:function(e){this._defaultStyles!=e&&(this._defaultStyles=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showCurtain",{get:function(){return this.adapter.apply("showCurtain",this._showCurtain)},set:function(e){this._showCurtain!=e&&(this._showCurtain=e,this._elements.curtain&&(this._elements.curtain.style.display=e?"block":"none"))},enumerable:!0,configurable:!0}),t.prototype.createCurtainElement=function(){var e=this.getClassNames(),r=document.createElement("div");r.className=e.curtainClass,this.container.appendChild(r),this._IOs.curtain=ye().getInteraction(r),this._disposers.push(this._IOs.curtain),this._IOs.curtain.events.on("over",this.disablePointers,this),this._IOs.curtain.events.on("out",this.releasePointers,this),r.style.display=this.showCurtain?"block":"none",this._elements.curtain=r},Object.defineProperty(t.prototype,"draggable",{get:function(){return this.adapter.apply("draggable",this._draggable)},set:function(e){this._draggable!=e&&(this._draggable=e,this.setupDragging())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dynamicResize",{get:function(){return this.adapter.apply("dynamicResize",this._dynamicResize)},set:function(e){this._dynamicResize!=e&&(this._dynamicResize=e,this.positionElement(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this.adapter.apply("align",this._align)},set:function(e){this._align!=e&&(this._align=e,this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalAlign",{get:function(){return this.adapter.apply("verticalAlign",this._verticalAlign)},set:function(e){this._verticalAlign!=e&&(this._verticalAlign=e,this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.adapter.apply("left",this._left)},set:function(e){this.left!=e&&(this._left=e,this._align="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.adapter.apply("right",this._right)},set:function(e){this.right!=e&&(this._right=e,this._align="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.adapter.apply("top",this._top)},set:function(e){this.top!=e&&(this._top=e,this._verticalAlign="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.adapter.apply("bottom",this._bottom)},set:function(e){this.bottom!=e&&(this._bottom=e,this._verticalAlign="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),t.prototype.loadDefaultCSS=function(){this._cssLoaded||(this._disposers.push(NS(Ql(this.container),this.classPrefix)),ne(this._elements,function(e,r){r.style.display=""}),this._cssLoaded=!0)},t.prototype.applyEvents=function(){var e=this;if(this._IOs.close)if(this.closable){this._IOs.close.element.style.visibility="visible";var r=[ye().body.events.on("keyup",function(o){qi.isKey(o.event,"esc")&&e.closable&&e.close()}),this._IOs.close.events.on("hit",function(o){e.close()})];r.push(this._IOs.curtain.events.on("hit",function(o){e.showCurtain&&e.closable&&e.close()})),this._disposers.push(new tt(r))}else this._IOs.close.element.style.visibility="hidden"},t.prototype.disablePointers=function(){this.sprite&&(this._spriteInteractionsEnabled=this.sprite.interactionsEnabled,this.sprite.interactionsEnabled=!1)},t.prototype.releasePointers=function(){T(this._spriteInteractionsEnabled)&&(this.sprite.interactionsEnabled=this._spriteInteractionsEnabled,this._spriteInteractionsEnabled=void 0)},t.prototype.applyReaderSettings=function(){this.elements.wrapper.setAttribute("aria-label",this.readerTitle)},t.prototype.copyFrom=function(e){i.prototype.copyFrom.call(this,e),this.container=e.container,this.sprite=e.sprite,this.classPrefix=e.classPrefixRaw,this.content=e.content,this.title=e.title,this.readerTitle=e.readerTitle,this.defaultStyles=e.defaultStyles,this.showCurtain=e.showCurtain,this.align=e.align,this.verticalAlign=e.verticalAlign,this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.adapter.copyFrom(e.adapter)},t}(ni);var Uu=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.adapter=new _t(e),e.className="Modal",e.showCurtain=!0,e.draggable=!1,e}return t}(ju);function HS(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];we.verbose&&console&&console.log.apply(console,_s(i))}function Zl(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];we.suppressWarnings||console&&console.warn.apply(console,_s(i))}var iM=function(){function i(){var t=this;this._targets=[],this._observer=new ResizeObserver(function(e){Z(e,function(r){Z(t._targets,function(o){o.target===r.target&&o.callback()})})})}return i.prototype.addTarget=function(t,e){this._observer.observe(t,{box:"content-box"}),this._targets.push({target:t,callback:e})},i.prototype.removeTarget=function(t){this._observer.unobserve(t),Am(this._targets,function(e){return e.target!==t})},i}(),rM=function(){function i(){this._targets=[]}return i.prototype.addTarget=function(t,e){var r=this;if(this._targets.length===0){var o=null,n=function(){var a=Date.now();(o===null||a>o+i.delay)&&(o=a,Z(r._targets,function(l){var d=l.target.getBoundingClientRect();(d.width!==l.size.width||d.height!==l.size.height)&&(l.size=d,l.callback())})),r._timer=requestAnimationFrame(n)};this._timer=requestAnimationFrame(n)}var s=t.getBoundingClientRect();this._targets.push({target:t,callback:e,size:s})},i.prototype.removeTarget=function(t){Am(this._targets,function(e){return e.target!==t}),this._targets.length===0&&cancelAnimationFrame(this._timer)},i.delay=200,i}(),Xp=null;function oM(){return Xp===null&&(typeof ResizeObserver<"u"?Xp=new iM:Xp=new rM),Xp}var BS=function(){function i(t,e){this._disposed=!1,this._sensor=oM(),this._element=t,this._sensor.addTarget(t,e)}return i.prototype.isDisposed=function(){return this._disposed},i.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._sensor.removeTarget(this._element))},Object.defineProperty(i.prototype,"sensor",{get:function(){return this._sensor},enumerable:!0,configurable:!0}),i.prototype.reset=function(){Zl("resizeSensor.reset() is no longer needed and can be removed")},i}();var Qp=[],qu=function(){function i(t,e){var r=this;this._disposed=!1,this.autoResize=!0,this.nonExportableSprites=[],this._disposers=[],this.cssScale=1,this._printing=!1,this.htmlElement=t,e||(this._printing=!1,this.initSensor(),this._disposers.push(dt(window,"beforeprint",function(){r._printing=!0})),this._disposers.push(dt(window,"afterprint",function(){r._printing=!1}))),Qp.push(this);var o=document.createElement("div"),n=o.style;n.width="100%",n.height="100%",n.position="relative",t.appendChild(o),this.SVGContainer=o}return i.prototype.initSensor=function(){var t=this;this.resizeSensor&&this.resizeSensor.dispose();var e=function(){t.autoResize&&!t._printing&&t.measure()};this.resizeSensor=new BS(this.htmlElement,e),this._disposers.push(this.resizeSensor)},i.prototype.measure=function(){var t=TS(this.htmlElement),e=PS(this.htmlElement),r=this.container;r&&((this.width!=t||this.height!=e)&&(this.width=t,this.height=e,t>0&&(r.maxWidth=t),e>0&&(r.maxHeight=e),av(this.SVGContainer)),r.maxWidth||(r.maxWidth=0),r.maxHeight||(r.maxHeight=0),this.cssScale=1,this.checkTransform(this.htmlElement))},Object.defineProperty(i.prototype,"container",{get:function(){return this._container},set:function(t){this._container=t,this.measure()},enumerable:!0,configurable:!0}),i.prototype.isDisposed=function(){return this._disposed},i.prototype.dispose=function(){this._disposed||ve(Qp,this),Z(this._disposers,function(t){t.dispose()})},Object.defineProperty(i.prototype,"hideOverflow",{set:function(t){t?this.SVGContainer.style.overflow="hidden":this.SVGContainer.style.overflow=""},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"modal",{get:function(){return T(this._modal)||(this._modal=new Uu,this._modal.container=this.SVGContainer,this._disposers.push(this._modal)),this._modal},enumerable:!0,configurable:!0}),i.prototype.openModal=function(t,e){this.closeModal();var r=this.modal;return r.content=t,r.readerTitle=e||"",r.title=e||"",r.open(),r},i.prototype.closeModal=function(){this._modal&&this.modal.close()},Object.defineProperty(i.prototype,"popups",{get:function(){if(!T(this._popups)){var t=new ju;t.container=this.SVGContainer,this._popups=new oi(t),this._disposers.push(new St(this._popups)),this._disposers.push(this._popups.template)}return this._popups},enumerable:!0,configurable:!0}),i.prototype.openPopup=function(t,e){var r=this.popups.create();return r.content=t,T(e)&&(r.title=e),r.open(),r},i.prototype.closeAllPopups=function(){this.popups.each(function(t){t.close()})},Object.defineProperty(i.prototype,"readerAlertElement",{get:function(){if(!T(this._readerAlertElement)){var t=document.createElement("div");t.setAttribute("role","alert"),t.style.zIndex="-100000",t.style.opacity="0",t.style.position="absolute",t.style.top="0",this.SVGContainer.appendChild(t),this._readerAlertElement=t}return this._readerAlertElement},enumerable:!0,configurable:!0}),i.prototype.readerAlert=function(t){this.readerAlertElement.innerHTML=t},i.prototype.checkTransform=function(t){if(window.getComputedStyle){if(t&&t.style){var e=window.getComputedStyle(t,null);if(e){var r=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("-moz-transform")||e.getPropertyValue("-ms-transform")||e.getPropertyValue("-o-transform")||e.getPropertyValue("transform");if(r&&r!=="none"){var o=r.split("(")[1].split(")")[0].split(","),n=Number(o[0]),s=Number(o[1]),a=Math.sqrt(n*n+s*s);isNaN(a)||(this.cssScale*=a)}}}t.parentNode&&t.parentNode instanceof HTMLElement&&this.checkTransform(t.parentNode)}},i}();var Zp=function(){function i(t,e){this.container=t,this.id=e;var r=document.createElementNS(bs,"svg");r.setAttribute("version","1.1"),r.setAttributeNS(ov,"xmlns",bs),r.setAttributeNS(ov,"xmlns:xlink",Kl),r.setAttribute("role","group"),this.container.appendChild(r),this.defs=document.createElementNS(bs,"defs"),r.appendChild(this.defs),r.style.width="100%",r.style.height="100%",r.style.overflow="visible",this.svg=r}return i.prototype.add=function(t){return new ws(t)},i.prototype.addGroup=function(t){return new dv(t)},i.prototype.append=function(t){t&&this.svg.appendChild(t.node)},i.prototype.appendDef=function(t){t&&this.defs.appendChild(t.node)},i.prototype.foreignObject=function(){var t=new ws("foreignObject");return t},i.prototype.supportsForeignObject=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Extensibility","1.1")},i}();var vv=null;function Ao(){if(vv===null){var i=document.createElement("div");i.hidden=!0,i.style.width="1px",i.style.height="1px",i.style.position="absolute",i.style.zIndex="-1000000",document.body.appendChild(i);var t=new qu(i,!0);vv=new Zp(t.SVGContainer,"ghost")}return vv}var Oo=function(i){A(t,i);function t(){var e=i.call(this)||this;e._elements=new Ie,e.properties={},e.className="Pattern",e.width=10,e.height=10,e.x=0,e.y=0,e.patternUnits="userSpaceOnUse";var r=new Le;return e.backgroundFill=r.getFor("background"),e.backgroundOpacity=0,e.fillOpacity=1,e.fill=r.getFor("alternativeBackground"),e.stroke=r.getFor("alternativeBackground"),e.strokeOpacity=1,e.strokeWidth=1,e.shapeRendering="crispEdges",e.rotation=0,e.element=e.paper.addGroup("pattern"),e.id="pattern-"+P.getUniqueId(),e.element.attr({id:e.id}),e._disposers.push(e.element),e._disposers.push(new St(e._elements)),e.patternUnits=e.patternUnits,e.width=e.width,e.height=e.height,e.applyTheme(),e}return t.prototype.draw=function(){var e=this,r=this.element;if(r){r.removeChildNodes();var o=this.paper.add("rect");o.attr({width:this.width,height:this.height,"shape-rendering":"crispEdges",fill:this.backgroundFill.hex,"fill-opacity":this.backgroundOpacity,stroke:this.backgroundFill.hex,"stroke-opacity":0}),r.add(o),r.attr({x:this.x,y:this.y,width:this.width,height:this.height,stroke:this.stroke.hex,fill:this.fill.hex,"fill-opacity":this.fillOpacity,"stroke-opacity":this.strokeOpacity,"stroke-width":this.strokeWidth,"shape-rendering":this.shapeRendering,patternUnits:this.patternUnits,"stroke-dasharray":this.strokeDasharray}),de(this._elements.iterator(),function(n){n.rotation=e.rotation,n.rotationX=e.properties.rotationX,n.rotationY=e.properties.rotationY,e.element.add(n)})}},t.prototype.animate=function(e,r,o){return new Fi(this,e,r,o).start()},t.prototype.addElement=function(e){this._elements.push(e),this._disposers.push(e)},t.prototype.removeElement=function(e){this._elements.removeValue(e),this.removeDispose(e)},Object.defineProperty(t.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillOpacity",{get:function(){return this.properties.fillOpacity},set:function(e){this.properties.fillOpacity=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this.properties.fill},set:function(e){this.properties.fill=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundFill",{get:function(){return this.properties.backgroundFill},set:function(e){this.properties.backgroundFill=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundOpacity",{get:function(){return this.properties.backgroundOpacity},set:function(e){this.properties.backgroundOpacity=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this.properties.stroke},set:function(e){this.properties.stroke=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeOpacity",{get:function(){return this.properties.strokeOpacity},set:function(e){this.properties.strokeOpacity=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return this.properties.strokeWidth},set:function(e){this.properties.strokeWidth=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shapeRendering",{get:function(){return this.properties.shapeRendering},set:function(e){this.properties.shapeRendering=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.properties.rotation},set:function(e){this.properties.rotation=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"patternUnits",{get:function(){return this.properties.patternUnits},set:function(e){this.properties.patternUnits=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.properties.width},set:function(e){this.properties.width=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.properties.height},set:function(e){this.properties.height=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.properties.x},set:function(e){this.properties.x=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.properties.y},set:function(e){this.properties.y=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paper",{get:function(){return this._paper?this._paper:Ao()},set:function(e){this._paper!=e&&(this._paper=e,this.draw(),e.appendDef(this.element))},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(e){var r=this;i.prototype.copyFrom.call(this,e),ne(e.properties,function(o,n){r[o]=n})},Object.defineProperty(t.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new lo(this._animations))),this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeDasharray",{get:function(){return this.properties.strokeDashArray},set:function(e){this.properties.strokeDashArray=e,this.draw()},enumerable:!0,configurable:!0}),t.prototype.processConfig=function(e){if(e&&T(e.elements)&&jt(e.elements))for(var r=0,o=e.elements.length;r<o;r++){var n=e.elements[r];if(T(n.type)){var s=this.createEntryInstance(n);s instanceof lt&&(s.config=n),this.addElement(T(n.typeProperty)?s[n.typeProperty]:s.element)}}i.prototype.processConfig.call(this,e)},t}(lt);P.registeredClasses.Pattern=Oo;var Ki=function(i){A(t,i);function t(){var e=i.call(this)||this;return e._stops=new Ie,e._rotation=0,e.className="LinearGradient",e._stops.events.on("setIndex",e.validate,e),e._stops.events.on("inserted",e.validate,e),e.element=e.paper.addGroup("linearGradient"),e.id="gradient-"+P.getUniqueId(),e.element.attr({id:e.id}),e._disposers.push(e.element),e.applyTheme(),e}return t.prototype.validate=function(){var e=this,r=(this._rotation+90)*yu,o=Math.round(50+Math.sin(r+Math.PI)*50)+"%",n=Math.round(50+Math.cos(r)*50)+"%",s=Math.round(50+Math.sin(r)*50)+"%",a=Math.round(50+Math.cos(r+Math.PI)*50)+"%",l=this.element;l.removeChildNodes(),l.attr({x1:o,x2:s,y1:n,y2:a}),de(Tp(this._stops.iterator()),function(d){var u=d[0],c=d[1],h=c.offset;M(h)||(h=u/(e._stops.length-1));var p=e.paper.add("stop");T(c.color)&&p.attr({"stop-color":c.color.toString()}),M(c.opacity)&&p.attr({"stop-opacity":c.opacity}),M(h)&&p.attr({offset:h}),l.add(p)})},t.prototype.clear=function(){this._stops.clear()},t.prototype.addColor=function(e,r,o){this._stops.push({color:e,opacity:r,offset:o})},Object.defineProperty(t.prototype,"stops",{get:function(){return this._stops},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paper",{get:function(){return this._paper?this._paper:Ao()},set:function(e){this._paper!=e&&(this._paper=e,this.validate(),e.appendDef(this.element))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation=e,this.validate()},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(e){i.prototype.copyFrom.call(this,e),this.stops.copyFrom(e.stops),this._rotation=e.rotation},Object.defineProperty(t.prototype,"gradientUnits",{set:function(e){this.element.attr({gradientUnits:e})},enumerable:!0,configurable:!0}),t}(lt);P.registeredClasses.LinearGradient=Ki;var Fr=function(i){A(t,i);function t(){var e=i.call(this)||this;return e._stops=new Ie,e.element=e.paper.addGroup("radialGradient"),e.id="gradient-"+P.getUniqueId(),e.element.attr({id:e.id}),e._disposers.push(e.element),e.applyTheme(),e}return t.prototype.draw=function(){var e=this,r=this.element;if(M(this.cx)){var o=this.cx;o instanceof Me&&(o=o.percent+"%"),r.attr({cx:o})}if(M(this.cy)){var o=this.cy;o instanceof Me&&(o=o.percent+"%"),r.attr({cy:o})}if(this.fx){var o=this.fx;o instanceof Me&&(o=o.percent+"%"),r.attr({fx:o})}if(this.fy){var o=this.fy;o instanceof Me&&(o=o.percent+"%"),r.attr({fy:o})}r.removeChildNodes(),de(Tp(this._stops.iterator()),function(n){var s=n[0],a=n[1],l=a.offset;M(l)||(l=s/(e._stops.length-1));var d=e.paper.add("stop");T(a.color)&&d.attr({"stop-color":a.color.toString()}),M(a.opacity)&&d.attr({"stop-opacity":a.opacity}),M(l)&&d.attr({offset:l}),r.add(d)})},t.prototype.addColor=function(e,r,o){this._stops.push({color:e,opacity:r,offset:o}),this.draw()},Object.defineProperty(t.prototype,"paper",{get:function(){return this._paper?this._paper:Ao()},set:function(e){this._paper!=e&&(this._paper=e,this.draw(),e.appendDef(this.element))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cx",{get:function(){return this._cx},set:function(e){this._cx=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cy",{get:function(){return this._cy},set:function(e){this._cy=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fx",{get:function(){return this._fx},set:function(e){this._fx=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fy",{get:function(){return this._fy},set:function(e){this._fy=e,this.draw()},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(e){i.prototype.copyFrom.call(this,e),this.stops.copyFrom(e.stops),this.cx=e.cx,this.cy=e.cy,this.fx=e.fx,this.fy=e.fy},Object.defineProperty(t.prototype,"stops",{get:function(){return this._stops},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._stops.clear()},t}(lt);P.registeredClasses.RadialGradient=Fr;var Ft=function(){function i(){}return i.grab=[{property:"cursor",value:"move"},{property:"cursor",value:"grab"},{property:"cursor",value:"-webkit-grab"}],i.grabbing=[{property:"cursor",value:"move"},{property:"cursor",value:"grabbing"},{property:"cursor",value:"-webkit-grabbing"}],i.pointer=[{property:"cursor",value:"pointer"}],i.default=[{property:"cursor",value:"default"}],i.horizontalResize=[{property:"cursor",value:"ew-resize"}],i.verticalResize=[{property:"cursor",value:"ns-resize"}],i.notAllowed=[{property:"cursor",value:"not-allowed"}],i.text=[{property:"cursor",value:"text"}],i}();var yv={_decimalSeparator:".",_thousandSeparator:",",_percentPrefix:null,_percentSuffix:"%",_big_number_suffix_3:"k",_big_number_suffix_6:"M",_big_number_suffix_9:"G",_big_number_suffix_12:"T",_big_number_suffix_15:"P",_big_number_suffix_18:"E",_big_number_suffix_21:"Z",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"\u03BC",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date:"yyyy-MM-dd",_date_millisecond:"mm:ss SSS",_date_second:"HH:mm:ss",_date_minute:"HH:mm",_date_hour:"HH:mm",_date_day:"MMM dd",_date_week:"ww",_date_month:"MMM",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_millisecond_second:"ss.SSS",_duration_millisecond_minute:"mm:ss SSS",_duration_millisecond_hour:"hh:mm:ss SSS",_duration_millisecond_day:"d'd' mm:ss SSS",_duration_millisecond_week:"d'd' mm:ss SSS",_duration_millisecond_month:"M'm' dd'd' mm:ss SSS",_duration_millisecond_year:"y'y' MM'm' dd'd' mm:ss SSS",_duration_second:"ss",_duration_second_minute:"mm:ss",_duration_second_hour:"hh:mm:ss",_duration_second_day:"d'd' hh:mm:ss",_duration_second_week:"d'd' hh:mm:ss",_duration_second_month:"M'm' dd'd' hh:mm:ss",_duration_second_year:"y'y' MM'm' dd'd' hh:mm:ss",_duration_minute:"mm",_duration_minute_hour:"hh:mm",_duration_minute_day:"d'd' hh:mm",_duration_minute_week:"d'd' hh:mm",_duration_minute_month:"M'm' dd'd' hh:mm",_duration_minute_year:"y'y' MM'm' dd'd' hh:mm",_duration_hour:"hh'h'",_duration_hour_day:"d'd' hh'h'",_duration_hour_week:"d'd' hh'h'",_duration_hour_month:"M'm' dd'd' hh'h'",_duration_hour_year:"y'y' MM'm' dd'd' hh'h'",_duration_day:"d'd'",_duration_day_week:"d'd'",_duration_day_month:"M'm' dd'd'",_duration_day_year:"y'y' MM'm' dd'd'",_duration_week:"w'w'",_duration_week_month:"w'w'",_duration_week_year:"w'w'",_duration_month:"M'm'",_duration_month_year:"y'y' MM'm'",_duration_year:"y'y'",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(i){var t="th";if(i<11||i>13)switch(i%10){case 1:t="st";break;case 2:t="nd";break;case 3:t="rd";break}return t},"Zoom Out":"",Play:"",Stop:"",Legend:"","Click, tap or press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"","Radar chart":"","Sankey diagram":"","Flow diagram":"","Chord diagram":"","TreeMap chart":"","Force directed tree":"","Sliced chart":"",Series:"","Candlestick Series":"","OHLC Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","Funnel Series":"","Pyramid Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"","Press ENTER or use arrow keys to navigate":"","Click, tap or press ENTER to open":"","Click, tap or press ENTER to print.":"","Click, tap or press ENTER to export as %1.":"",'To save the image, right-click this link and choose "Save picture as..."':"",'To save the image, right-click thumbnail on the left and choose "Save picture as..."':"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"","Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":"",Close:"",Minimize:""};var Yi=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.adapter=new _t(e),e._locale=yv,e._defaultLocale=yv,e.className="Language",T(we.defaultLocale)&&(e.locale=we.defaultLocale),e.applyTheme(),e}return t.prototype.getLocale=function(e){return e==null&&(e=this._locale),this.adapter.apply("locale",{locale:e}).locale},t.prototype.translate=function(e,r){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];r=this.getLocale(r);var s=e,a=this.getTranslations(r),l=a[e];if(l===null)s="";else if(T(l))l&&(s=l);else if(r!==this._defaultLocale)return this.translate.apply(this,_s([e,this._defaultLocale],o));if(o.length)for(var d=o.length,u=0;u<d;++u)s=s.split("%"+(u+1)).join(o[u]);return this.adapter.apply("translate",{translation:s,locale:r}).translation},t.prototype.translateAny=function(e,r){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];return this.translate.apply(this,_s([e,r],o))},t.prototype.setTranslationAny=function(e,r,o){var n=o||this.locale;n[e]=r},t.prototype.translateEmpty=function(e,r){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];var s=this.translate.apply(this,_s([e,r],o));return s==e?"":s},t.prototype.translateFunc=function(e,r){r=this.getLocale(r);var o=this.getTranslations(r),n=o[e];return n??(r!==this._defaultLocale?this.translateFunc(e,this._defaultLocale):function(){return""})},t.prototype.translateAll=function(e,r){var o=this;return this.isDefault()?e:Hn(e,function(n){return o.translate(n,r)})},t.prototype.isDefault=function(){return this._defaultLocale===this._locale},Object.defineProperty(t.prototype,"locale",{get:function(){return this._locale},set:function(e){if(this._locale!=e&&(this._locale=e,this.events.isEnabled("localechanged"))){var r={type:"localechanged",locale:e,target:this};this.events.dispatchImmediately("localechanged",r)}},enumerable:!0,configurable:!0}),t.prototype.getTranslations=function(e){return this.adapter.apply("translations",{translations:e,locale:e}).translations},t}(ni);var bv=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.adapter=new _t(e),e.className="TextFormatter",e.applyTheme(),e}return t.prototype.debug=function(){},t.prototype.format=function(e,r){T(r)||(r="svg");var o="";e=this.escape(e);var n=e.match(/\[([^\]]*?)\]/gm);if(!n)return this.wrap(e,"",r);for(var s=e.split(/\[[^\[\]]*\]/),a=0,l=s.length;a<l;a++){var d=s[a];if(d!==""){d=this.adapter.apply("chunk",d);var u="";a>0&&(u=n[a-1].replace("[","").replace("]","")),o+=this.wrap(d,u,r)}}return o=this.unescape(o),this.cleanUp(o)},t.prototype.escape=function(e){return e.replace(/\[\[/g,P.getPlaceholder("1")).replace(/([^\/\]]{1})\]\]/g,"$1"+P.getPlaceholder("2")).replace(/\]\]/g,P.getPlaceholder("2")).replace(/\{\{/g,P.getPlaceholder("3")).replace(/\}\}/g,P.getPlaceholder("4")).replace(/\'\'/g,P.getPlaceholder("5"))},t.prototype.unescape=function(e){return e.replace(new RegExp(P.getPlaceholder("1"),"g"),"[[").replace(new RegExp(P.getPlaceholder("2"),"g"),"]]").replace(new RegExp(P.getPlaceholder("3"),"g"),"{{").replace(new RegExp(P.getPlaceholder("4"),"g"),"}}").replace(new RegExp(P.getPlaceholder("5"),"g"),"''")},t.prototype.cleanUp=function(e){return e.replace(/\[\[/g,"[").replace(/\]\]/g,"]").replace(/\{\{/g,"{").replace(/\}\}/g,"}").replace(/\'\'/g,"'")},t.prototype.wrap=function(e,r,o){switch((r===""||r==="/")&&(r=""),o){case"html":return this.wrapHtml(e,this.translateStyleShortcuts(r));default:return this.wrapSvg(e,this.translateStyleShortcuts(r))}},t.prototype.wrapSvg=function(e,r){return r===""?"<tspan>"+e+"</tspan>":"<tspan style='"+r+"'>"+e+"</tspan>"},t.prototype.getSvgElement=function(e,r){var o=new ws("tspan");return o.textContent=e,r&&o.node.setAttribute("style",r),o},t.prototype.wrapHtml=function(e,r){return r===""?"<span>"+e+"</span>":"<span style='"+this.styleSvgToHtml(r)+"'>"+e+"</span>"},t.prototype.getHtmlElement=function(e,r){var o=document.createElement("span");return o.innerHTML=e,r&&o.setAttribute("style",r),o},t.prototype.styleSvgToHtml=function(e){return e=e.replace(/fill:/,"color:"),e},t.prototype.translateStyleShortcuts=function(e){if(e==""||e=="[ ]")return"";var r=P.getCache("translateStyleShortcuts_"+e);if(r)return r;var o=e.match(/('[^']*')|("[^"]*")/gi);if(o)for(var n=0;n<o.length;n++)e=e.replace(o[n],o[n].replace(/['"]*/g,"").replace(/[ ]+/g,"+"));var s=e.match(/([\w\-]*:[\s]?[^;\s\]]*)|(\#[\w]{1,6})|([\w]+)|(\/)/gi);if(!s)return e;for(var n=0;n<s.length;n++)s[n].match(/^bold$/i)?s[n]="font-weight:"+s[n]:s[n]=="/"?s[n]="":s[n].match(/:/)?s[n]=s[n].replace(/\+/g," "):s[n]="fill:"+s[n];var a=s.join(";");return P.setCache("translateStyleShortcuts_"+e,a),a},t.prototype.chunk=function(e,r,o){r===void 0&&(r=!1),o===void 0&&(o=!1);var n=[];e=this.escape(e);for(var s=r?e.split("'"):[e],a=0;a<s.length;a++){var l=s[a];if(l!=="")if(a%2===0){l=l.replace(/\]\[/g,"]"+vi+"["),l=l.replace(/\[\]/g,"[ ]");for(var d=l.split(/[\[\]]+/),u=0;u<d.length;u++){var c=this.cleanUp(this.unescape(d[u]));c!==vi&&c!==""&&(u%2===0?n.push({type:"value",text:this.adapter.apply("chunk",c)}):n.push({type:o?"value":"format",text:"["+c+"]"}))}}else for(var d=l.split(/[\[\]]+/),u=0;u<d.length;u++){var c=this.cleanUp(this.unescape(d[u]));c!==""&&(u%2===0?n.push({type:"text",text:c}):this.isImage(c)?n.push({type:"image",text:"["+c+"]"}):n.push({type:"format",text:"["+c+"]"}))}}return n},t.prototype.isImage=function(e){return!!e.match(/img[ ]?:/)},t}(lt);var Cv;function sr(){return Cv==null&&(Cv=new bv),Cv}P.registeredClasses.TextFormatter=bv;var Jl=function(i){A(t,i);function t(){var e=i.call(this)||this;return e._negativeBase=0,e._numberFormat="#,###.#####",e._outputFormat="svg",e._smallNumberThreshold=1,e._forceLTR=!1,e.className="NumberFormatter",e.applyTheme(),e}return t.prototype.dispose=function(){i.prototype.dispose.call(this),this.language&&this.language.dispose()},Object.defineProperty(t.prototype,"language",{get:function(){return this._language||(this.sprite?this._language=this.sprite.language:this._language=new Yi),this._language},set:function(e){this._language=e},enumerable:!0,configurable:!0}),t.prototype.format=function(e,r,o){(typeof r>"u"||je(r)&&r.toLowerCase()==="number")&&(r=this._numberFormat);var n,s=Number(e);if(Qe(r))try{return this.intlLocales?new Intl.NumberFormat(this.intlLocales,r).format(s):new Intl.NumberFormat(void 0,r).format(s)}catch{return"Invalid"}else{r=Ca(r);var a=this.parseFormat(r,this.language),l=void 0;s>this._negativeBase?l=a.positive:s<this._negativeBase?l=a.negative:l=a.zero,T(o)&&!l.mod&&(l=j0(l),l.decimals.active=s==0?0:o),n=l.template.split(vi).join(this.applyFormat(s,l))}return this.forceLTR&&(n="\u200E"+n),n},t.prototype.parseFormat=function(e,r){var o=this,n=this.getCache(e);if(T(n))return n;var s={positive:{thousands:{active:-1,passive:-1,interval:-1,separator:r.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:r.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:!1},negative:{thousands:{active:-1,passive:-1,interval:-1,separator:r.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:r.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:!1},zero:{thousands:{active:-1,passive:-1,interval:-1,separator:r.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:r.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:!1}};e=e.replace("||",jn);var a=e.split("|");return s.positive.source=a[0],typeof a[2]>"u"?s.zero=s.positive:s.zero.source=a[2],typeof a[1]>"u"?s.negative=s.positive:s.negative.source=a[1],ne(s,function(l,d){if(!d.parsed){if(typeof o.getCache(d.source)<"u"){s[l]=o.getCache(d.source);return}var u=d.source;u.toLowerCase()==="number"&&(u=je(o._numberFormat)?o._numberFormat:"#,###.#####");for(var c=sr().chunk(u,!0),h=0;h<c.length;h++){var p=c[h];if(p.text=p.text.replace(jn,"|"),p.type==="value"){var f=p.text.match(/[#0.,]+[ ]?[abespABESP%!]?[abespABESP‰!]?/);if(f)if(f===null||f[0]==="")d.template+=p.text;else{var C=f[0].match(/[abespABESP%‰!]{2}|[abespABESP%‰]{1}$/);C&&(d.mod=C[0].toLowerCase(),d.modSpacing=!!f[0].match(/[ ]{1}[abespABESP%‰!]{1}$/));var b=f[0].split(".");if(b[0]!==""){d.thousands.active=(b[0].match(/0/g)||[]).length,d.thousands.passive=(b[0].match(/\#/g)||[]).length+d.thousands.active;var x=b[0].split(",");x.length===1||(d.thousands.interval=Ct(x.pop()).length,d.thousands.interval===0&&(d.thousands.interval=-1))}typeof b[1]>"u"||(d.decimals.active=(b[1].match(/0/g)||[]).length,d.decimals.passive=(b[1].match(/\#/g)||[]).length+d.decimals.active),d.template+=p.text.split(f[0]).join(vi)}}else d.template+=p.text}o.setCache(d.source,d),d.parsed=!0}}),this.setCache(e,s),s},t.prototype.applyFormat=function(e,r){var o=e<0;e=Math.abs(e);var n="",s="",a=r.mod?r.mod.split(""):[];if(a.indexOf("b")!==-1){var l=this.applyPrefix(e,this.bytePrefixes,a.indexOf("!")!==-1);e=l[0],n=l[1],s=l[2],r.modSpacing&&(s=" "+s)}else if(a.indexOf("a")!==-1){var d=this.applyPrefix(e,e<this.smallNumberThreshold?this.smallNumberPrefixes:this.bigNumberPrefixes,a.indexOf("!")!==-1);e=d[0],n=d[1],s=d[2],r.modSpacing&&(s=" "+s)}else if(a.indexOf("p")!==-1){var u=Math.min(e.toString().length+2,21);e=parseFloat(e.toPrecision(u)),n=this.language.translate("_percentPrefix")||"",s=this.language.translate("_percentSuffix")||"",n==""&&s==""&&(s="%")}else if(a.indexOf("%")!==-1){var u=st(e.toString().length+2,21);e*=100,e=parseFloat(e.toPrecision(u)),s="%"}else if(a.indexOf("\u2030")!==-1){var u=st(e.toString().length+3,21);e*=1e3,e=parseFloat(e.toPrecision(u)),s="\u2030"}if(a.indexOf("e")!==-1){var c=void 0;r.decimals.passive>=0?c=e.toExponential(r.decimals.passive).split("e"):c=e.toExponential().split("e"),e=Number(c[0]),s="e"+c[1],r.modSpacing&&(s=" "+s)}else if(r.decimals.passive===0)e=Math.round(e);else if(r.decimals.passive>0){var h=Math.pow(10,r.decimals.passive);e=Math.round(e*h)/h}var p="",f=SS(e).split("."),C=f[0];if(C.length<r.thousands.active&&(C=Array(r.thousands.active-C.length+1).join("0")+C),r.thousands.interval>0){for(var b=[],x=C.split("").reverse().join(""),S=0,R=C.length;S<=R;S+=r.thousands.interval){var I=x.substr(S,r.thousands.interval).split("").reverse().join("");I!==""&&b.unshift(I)}C=b.join(r.thousands.separator)}p+=C,f.length===1&&f.push("");var F=f[1];return F.length<r.decimals.active&&(F+=Array(r.decimals.active-F.length+1).join("0")),F!==""&&(p+=r.decimals.separator+F),p===""&&(p="0"),e!==0&&o&&a.indexOf("s")===-1&&(p="-"+p),n&&(p=n+p),s&&(p+=s),p},t.prototype.applyPrefix=function(e,r,o){o===void 0&&(o=!1);for(var n=e,s="",a="",l=!1,d=1,u=0,c=r.length;u<c;u++)r[u].number<=e&&(r[u].number===0?n=0:(n=e/r[u].number,d=r[u].number),s=r[u].prefix,a=r[u].suffix,l=!0);return!l&&o&&r.length&&e!=0&&(n=e/r[0].number,s=r[0].prefix,a=r[0].suffix,l=!0),l&&(n=parseFloat(n.toPrecision(st(d.toString().length+Math.floor(n).toString().replace(/[^0-9]*/g,"").length,21)))),[n,s,a]},t.prototype.invalidateSprite=function(){this.sprite&&this.sprite.invalidate()},Object.defineProperty(t.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(e){this._numberFormat=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"intlLocales",{get:function(){return this._intlLocales},set:function(e){this._intlLocales=e,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"negativeBase",{get:function(){return this._negativeBase},set:function(e){this._negativeBase=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bigNumberPrefixes",{get:function(){return T(this._bigNumberPrefixes)||(this._bigNumberPrefixes=[{number:1e3,suffix:this.language.translate("_big_number_suffix_3")},{number:1e6,suffix:this.language.translate("_big_number_suffix_6")},{number:1e9,suffix:this.language.translate("_big_number_suffix_9")},{number:1e12,suffix:this.language.translate("_big_number_suffix_12")},{number:1e15,suffix:this.language.translate("_big_number_suffix_15")},{number:1e18,suffix:this.language.translate("_big_number_suffix_18")},{number:1e21,suffix:this.language.translate("_big_number_suffix_21")},{number:1e24,suffix:this.language.translate("_big_number_suffix_24")}]),this._bigNumberPrefixes},set:function(e){this._bigNumberPrefixes=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"smallNumberPrefixes",{get:function(){return T(this._smallNumberPrefixes)||(this._smallNumberPrefixes=[{number:1e-24,suffix:this.language.translate("_small_number_suffix_24")},{number:1e-21,suffix:this.language.translate("_small_number_suffix_21")},{number:1e-18,suffix:this.language.translate("_small_number_suffix_18")},{number:1e-15,suffix:this.language.translate("_small_number_suffix_15")},{number:1e-12,suffix:this.language.translate("_small_number_suffix_12")},{number:1e-9,suffix:this.language.translate("_small_number_suffix_9")},{number:1e-6,suffix:this.language.translate("_small_number_suffix_6")},{number:.001,suffix:this.language.translate("_small_number_suffix_3")}]),this._smallNumberPrefixes},set:function(e){this._smallNumberPrefixes=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"smallNumberThreshold",{get:function(){return this._smallNumberThreshold},set:function(e){this._smallNumberThreshold=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bytePrefixes",{get:function(){return T(this._bytePrefixes)||(this._bytePrefixes=[{number:1,suffix:this.language.translate("_byte_suffix_B")},{number:1024,suffix:this.language.translate("_byte_suffix_KB")},{number:1048576,suffix:this.language.translate("_byte_suffix_MB")},{number:1073741824,suffix:this.language.translate("_byte_suffix_GB")},{number:1099511627776,suffix:this.language.translate("_byte_suffix_TB")},{number:0x4000000000000,suffix:this.language.translate("_byte_suffix_PB")}]),this._bytePrefixes},set:function(e){this._bytePrefixes=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(e){this._outputFormat=e.toLowerCase(),this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"forceLTR",{get:function(){return this._forceLTR},set:function(e){this._forceLTR=e,this.invalidateSprite()},enumerable:!0,configurable:!0}),t.prototype.escape=function(e){return e.replace("||",jn)},t.prototype.unescape=function(e){return e.replace(jn,"|")},t}(lt);P.registeredClasses.NumberFormatter=Jl;var _n=function(i){A(t,i);function t(){var e=i.call(this)||this;return e._dateFormat="yyyy-MM-dd",e._inputDateFormat="yyyy-MM-dd",e._utc=!1,e.timezoneMinutes=0,e._firstDayOfWeek=1,e.months=["January","February","March","April","May","June","July","August","September","October","November","December"],e.monthsShort=["Jan","Feb","Mar","Apr","May(short)","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e.weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e.weekdaysShort=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],e._outputFormat="svg",e.capitalize=!0,e.className="DateFormatter",e.applyTheme(),e}return Object.defineProperty(t.prototype,"language",{get:function(){return this._language},set:function(e){this._language=e,this.dateFormat=this._language.translate("_date")},enumerable:!0,configurable:!0}),t.prototype.format=function(e,r,o){this.language||(this.sprite?this.language=this.sprite.language:this.language=new Yi),(typeof r>"u"||r==="")&&(r=this._dateFormat);var n,s;if(je(e)?s=this.parse(e):s=Lp(e),Qe(r))try{return this.intlLocales?new Intl.DateTimeFormat(this.intlLocales,r).format(s):new Intl.DateTimeFormat(void 0,r).format(s)}catch{return"Invalid"}else{r=Ca(r);var a=this.parseFormat(r);if(T(this.timezoneOffset)?s.setMinutes(s.getMinutes()+s.getTimezoneOffset()-this.timezoneOffset):T(this.timezone)&&o!==!1&&(s=gv(s,this.timezone)),!M(s.getTime()))return this.language.translate("Invalid date");n=this.applyFormat(s,a,this.language),this.capitalize&&(n=n.replace(/^.{1}/,n.substr(0,1).toUpperCase()))}return n},t.prototype.parseFormat=function(e){var r=this.getCache(e);if(T(r))return r;for(var o={template:"",parts:[]},n=sr().chunk(e,!0),s=0;s<n.length;s++){var a=n[s];if(a.type==="value"){a.text.match(/^date$/i)&&je(this._dateFormat)&&(a.text=this._dateFormat);var l=a.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);if(l)for(var d=0;d<l.length;d++)o.parts.push(l[d]),a.text=a.text.replace(l[d],vi)}o.template+=a.text}return this.setCache(e,o),o},t.prototype.applyFormat=function(e,r,o){var n=r.template,s,a,l,d,u,c,h,p,f=e.getTimezoneOffset(),C=e.getTime();this.utc?(s=e.getUTCFullYear(),a=e.getUTCMonth(),l=e.getUTCDay(),d=e.getUTCDate(),u=e.getUTCHours(),c=e.getUTCMinutes(),h=e.getUTCSeconds(),p=e.getUTCMilliseconds()):(s=e.getFullYear(),a=e.getMonth(),l=e.getDay(),d=e.getDate(),u=e.getHours(),c=e.getMinutes(),h=e.getSeconds(),p=e.getMilliseconds());for(var b=0,x=r.parts.length;b<x;b++){var S="";switch(r.parts[b]){case"G":S=o.translate(s<0?"_era_bc":"_era_ad");break;case"yyyy":S=Math.abs(s).toString(),s<0&&(S+=o.translate("_era_bc"));break;case"yyy":case"yy":case"y":S=Math.abs(s).toString().substr(-r.parts[b].length),s<0&&(S+=o.translate("_era_bc"));break;case"YYYY":case"YYY":case"YY":case"Y":var R=ES(e);r.parts[b]=="YYYY"?S=Math.abs(R).toString():S=Math.abs(R).toString().substr(-r.parts[b].length),R<0&&(S+=o.translate("_era_bc"));break;case"u":break;case"q":S=""+Math.ceil((e.getMonth()+1)/3);break;case"MMMMM":S=o.translate(this.months[a]).substr(0,1);break;case"MMMM":S=o.translate(this.months[a]);break;case"MMM":S=o.translate(this.monthsShort[a]);break;case"MM":S=yi(a+1,2,"0");break;case"M":S=(a+1).toString();break;case"ww":S=yi(Fu(e,this.utc),2,"0");break;case"w":S=Fu(e,this.utc).toString();break;case"W":S=_S(e,this.utc).toString();break;case"dd":S=yi(d,2,"0");break;case"d":S=d.toString();break;case"DD":case"DDD":S=yi(Xm(e,this.utc).toString(),r.parts[b].length,"0");break;case"D":S=Xm(e,this.utc).toString();break;case"F":break;case"g":break;case"t":S=o.translateFunc("_dateOrd").call(this,d);break;case"E":S=(l||7).toString();break;case"EE":S=yi((l||7).toString(),2,"0");break;case"EEE":case"eee":S=o.translate(this.weekdaysShort[l]);break;case"EEEE":case"eeee":S=o.translate(this.weekdays[l]);break;case"EEEEE":case"eeeee":S=o.translate(this.weekdays[l]).substr(0,1);break;case"e":case"ee":S=(l-this.firstDayOfWeek+1).toString(),r.parts[b]=="ee"&&(S=yi(S,2,"0"));break;case"a":u>=12?S=o.translate("PM"):S=o.translate("AM");break;case"aa":u>=12?S=o.translate("P.M."):S=o.translate("A.M.");break;case"aaa":u>=12?S=o.translate("P"):S=o.translate("A");break;case"h":S=Nu(u).toString();break;case"hh":S=yi(Nu(u),2,"0");break;case"H":S=u.toString();break;case"HH":S=yi(u,2,"0");break;case"K":S=Nu(u,0).toString();break;case"KK":S=yi(Nu(u,0),2,"0");break;case"k":S=(u+1).toString();break;case"kk":S=yi(u+1,2,"0");break;case"m":S=c.toString();break;case"mm":S=yi(c,2,"0");break;case"s":S=h.toString();break;case"ss":S=yi(h,2,"0");break;case"S":case"SS":case"SSS":S=Math.round(p/1e3*Math.pow(10,r.parts[b].length)).toString();break;case"x":S=C.toString();break;case"n":case"nn":case"nnn":S=yi(p,r.parts[b].length,"0");break;case"z":S=ku(e,!1,!1,this.utc);break;case"zz":S=ku(e,!0,!1,this.utc);break;case"zzz":S=ku(e,!1,!0,this.utc);break;case"zzzz":S=ku(e,!0,!0,this.utc);break;case"Z":case"ZZ":var I=Math.abs(f)/60,F=Math.floor(I),L=I*60-F*60;this.utc&&(F=0,L=0),r.parts[b]=="Z"?(S="GMT",S+=f>0?"-":"+",S+=yi(F,2)+":"+yi(L,2)):(S=f>0?"-":"+",S+=yi(F,2)+yi(L,2));break;case"i":S=e.toISOString();break;case"I":S=e.toUTCString();break}n=n.replace(vi,S)}return n},t.prototype.parse=function(e,r){if(T(r)||(r=this.inputDateFormat),e instanceof Date)return e;if(typeof e=="number")return new Date(e);typeof e!="string"&&(e=e.toString()),this.language||(this.sprite?this.language=this.sprite.language:this.language=new Yi);var o,n="";r=Ca(r),r=r.substr(0,e.length);for(var s=this.parseFormat(r),a={year:-1,year3:-1,year2:-1,year1:-1,month:-1,monthShort:-1,monthLong:-1,weekdayShort:-1,weekdayLong:-1,day:-1,yearDay:-1,week:-1,hourBase0:-1,hour12Base0:-1,hourBase1:-1,hour12Base1:-1,minute:-1,second:-1,millisecond:-1,millisecondDigits:-1,am:-1,zone:-1,timestamp:-1,iso:-1},l={year:1970,month:0,day:1,hour:0,minute:0,second:0,millisecond:0,timestamp:null,offset:0,utc:this.utc},d=0,u=0,c=0;c<s.parts.length;c++){switch(u=c+d+1,s.parts[c]){case"yyyy":case"YYYY":n+="([0-9]{4})",a.year=u;break;case"yyy":case"YYY":n+="([0-9]{3})",a.year3=u;break;case"yy":case"YY":n+="([0-9]{2})",a.year2=u;break;case"y":case"Y":n+="([0-9]{1})",a.year1=u;break;case"MMMM":n+="("+this.getStringList(this.months).join("|")+")",a.monthLong=u;break;case"MMM":n+="("+this.getStringList(this.monthsShort).join("|")+")",a.monthShort=u;break;case"MM":case"M":n+="([0-9]{2}|[0-9]{1})",a.month=u;break;case"ww":case"w":n+="([0-9]{2}|[0-9]{1})",a.week=u;break;case"dd":case"d":n+="([0-9]{2}|[0-9]{1})",a.day=u;break;case"DDD":case"DD":case"D":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",a.yearDay=u;break;case"dddd":n+="("+this.getStringList(this.weekdays).join("|")+")",a.weekdayLong=u;break;case"ddd":n+="("+this.getStringList(this.weekdaysShort).join("|")+")",a.weekdayShort=u;break;case"aaa":case"aa":case"a":n+="("+this.getStringList(["AM","PM","A.M.","P.M.","A","P"]).join("|")+")",a.am=u;break;case"hh":case"h":n+="([0-9]{2}|[0-9]{1})",a.hour12Base1=u;break;case"HH":case"H":n+="([0-9]{2}|[0-9]{1})",a.hourBase0=u;break;case"KK":case"K":n+="([0-9]{2}|[0-9]{1})",a.hour12Base0=u;break;case"kk":case"k":n+="([0-9]{2}|[0-9]{1})",a.hourBase1=u;break;case"mm":case"m":n+="([0-9]{2}|[0-9]{1})",a.minute=u;break;case"ss":case"s":n+="([0-9]{2}|[0-9]{1})",a.second=u;break;case"SSS":case"SS":case"S":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",a.millisecond=u,a.millisecondDigits=s.parts[c].length;break;case"nnn":case"nn":case"n":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",a.millisecond=u;break;case"x":n+="([0-9]{1,})",a.timestamp=u;break;case"Z":n+="GMT([-+]+[0-9]{2}:[0-9]{2})",a.zone=u;break;case"ZZ":n+="([\\-+]+[0-9]{2}[0-9]{2})",a.zone=u;break;case"i":n+="([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2}).?([0-9]{0,3})([zZ]|[+-][0-9]{2}:?[0-9]{2}|$)",a.iso=u,d+=7;break;case"G":case"YYYY":case"YYY":case"YY":case"Y":case"MMMMM":case"W":case"EEEEE":case"EEEE":case"EEE":case"EE":case"E":case"eeeee":case"eeee":case"eee":case"ee":case"e":case"zzzz":case"zzz":case"zz":case"z":case"t":d--;break}n+="[^0-9]*"}var h=new RegExp(n),p=e.match(h);if(p){if(a.year>-1&&(l.year=parseInt(p[a.year])),a.year3>-1){var f=parseInt(p[a.year3]);f+=1e3,l.year=f}if(a.year2>-1){var f=parseInt(p[a.year2]);f>50?f+=1e3:f+=2e3,l.year=f}if(a.year1>-1){var f=parseInt(p[a.year1]);f=Math.floor(new Date().getFullYear()/10)*10+f,l.year=f}if(a.monthLong>-1&&(l.month=this.resolveMonth(p[a.monthLong])),a.monthShort>-1&&(l.month=this.resolveShortMonth(p[a.monthShort])),a.month>-1&&(l.month=parseInt(p[a.month])-1),a.week>-1&&a.day===-1&&(l.month=0,l.day=xS(parseInt(p[a.week]),l.year,1,this.utc)),a.day>-1&&(l.day=parseInt(p[a.day])),a.yearDay>-1&&(l.month=0,l.day=parseInt(p[a.yearDay])),a.hourBase0>-1&&(l.hour=parseInt(p[a.hourBase0])),a.hourBase1>-1&&(l.hour=parseInt(p[a.hourBase1])-1),a.hour12Base0>-1){var f=parseInt(p[a.hour12Base0]);f==11&&(f=0),a.am>-1&&!this.isAm(p[a.am])&&(f+=12),l.hour=f}if(a.hour12Base1>-1){var f=parseInt(p[a.hour12Base1]);f==12&&(f=0),a.am>-1&&!this.isAm(p[a.am])&&(f+=12),l.hour=f}if(a.minute>-1&&(l.minute=parseInt(p[a.minute])),a.second>-1&&(l.second=parseInt(p[a.second])),a.millisecond>-1){var f=parseInt(p[a.millisecond]);a.millisecondDigits==2?f*=10:a.millisecondDigits==1&&(f*=100),l.millisecond=f}if(a.timestamp>-1){l.timestamp=parseInt(p[a.timestamp]);var C=new Date(l.timestamp);l.year=C.getUTCFullYear(),l.month=C.getUTCMonth(),l.day=C.getUTCDate(),l.hour=C.getUTCHours(),l.minute=C.getUTCMinutes(),l.second=C.getUTCSeconds(),l.millisecond=C.getUTCMilliseconds()}a.zone>-1&&(l.offset=this.resolveTimezoneOffset(new Date(l.year,l.month,l.day),p[a.zone])),a.iso>-1&&(l.year=Xe(p[a.iso+0]),l.month=Xe(p[a.iso+1])-1,l.day=Xe(p[a.iso+2]),l.hour=Xe(p[a.iso+3]),l.minute=Xe(p[a.iso+4]),l.second=Xe(p[a.iso+5]),l.millisecond=Xe(p[a.iso+6]),p[a.iso+7]=="Z"||p[a.iso+7]=="z"?l.utc=!0:p[a.iso+7]!=""&&(l.offset=this.resolveTimezoneOffset(new Date(l.year,l.month,l.day),p[a.iso+7]))),l.utc?o=new Date(Date.UTC(l.year,l.month,l.day,l.hour,l.minute,l.second,l.millisecond)):o=new Date(l.year,l.month,l.day,l.hour,l.minute+l.offset,l.second,l.millisecond)}else o=new Date(e);return o},t.prototype.resolveTimezoneOffset=function(e,r){var o=r.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/);if(o){var n=Ct(r.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/)),s=n[1],a=n[2],l=n[3],d=parseInt(a)*60+parseInt(l);s=="+"&&(d*=-1);var u=(e||new Date).getTimezoneOffset(),c=d-u;return c}return 0},t.prototype.resolveMonth=function(e){var r=this.months.indexOf(e);return r>-1||this.language&&!this.language.isDefault()&&(r=this.language.translateAll(this.months).indexOf(e),r>-1)?r:0},t.prototype.resolveShortMonth=function(e){var r=this.monthsShort.indexOf(e);return r>-1||(r=this.months.indexOf(e),r>-1)||this.language&&!this.language.isDefault()&&(r=this.language.translateAll(this.monthsShort).indexOf(e),r>-1)?r:0},t.prototype.isAm=function(e){var r=this.getStringList(["AM","A.M.","A"]);return r.indexOf(e.toUpperCase())>-1},t.prototype.invalidateSprite=function(){this.sprite&&this.sprite.invalidate()},t.prototype.getStringList=function(e){for(var r=[],o=0;o<e.length;o++)this.language?r.push(zu(this.language.translate(e[o]))):r.push(zu(e[o]));return r},Object.defineProperty(t.prototype,"dateFormat",{get:function(){return this._dateFormat},set:function(e){this._dateFormat=e,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputDateFormat",{get:function(){return this._inputDateFormat},set:function(e){this._inputDateFormat=e,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"intlLocales",{get:function(){return this._intlLocales},set:function(e){this._intlLocales=e,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"utc",{get:function(){return this._utc},set:function(e){this._utc=e,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timezoneOffset",{get:function(){return this._timezoneOffset},set:function(e){this._timezoneOffset!=e&&(this._timezoneOffset=e,this.invalidateSprite())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timezone",{get:function(){return this._timezone},set:function(e){this._timezone!=e&&(this._timezone=e,this.timezoneMinutes=VS(e),this.invalidateSprite())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstDayOfWeek",{get:function(){return this._firstDayOfWeek},set:function(e){this._firstDayOfWeek=e,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(e){this._outputFormat=e.toLowerCase(),this.invalidateSprite()},enumerable:!0,configurable:!0}),t}(lt);P.registeredClasses.DateFormatter=_n;var ed=function(i){A(t,i);function t(){var e=i.call(this)||this;return e._negativeBase=0,e._baseUnit="second",e._outputFormat="svg",e._unitValues={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6},e._unitAliases={Y:"y",D:"d",H:"h",K:"h",k:"h",n:"S"},e.className="DurationFormatter",e.applyTheme(),e}return t.prototype.format=function(e,r,o){this.language||(this.sprite?this.language=this.sprite.language:this.language=new Yi);var n=o||this._baseUnit;(typeof r>"u"||r==="")&&(T(this.durationFormat)?r=this.durationFormat:r=this.getFormat(Xe(e),null,n)),r=Ca(r);var s=this.parseFormat(r,n),a=Number(e),l;a>this._negativeBase?l=s.positive:a<this._negativeBase?l=s.negative:l=s.zero;var d=this.applyFormat(a,l);return l.color!==""&&(this._outputFormat==="svg"?d="<tspan fill='"+l.color+"'>"+d+"</tspan>":this._outputFormat==="html"&&(d="<span style='color: "+l.color+";'>"+d+"</span>")),d},t.prototype.parseFormat=function(e,r){var o=this,n=this.getCache(e);if(T(n))return n;var s=r||this._baseUnit,a={positive:{color:"",template:"",parts:[],source:"",baseUnit:s,parsed:!1,absolute:!1},negative:{color:"",template:"",parts:[],source:"",baseUnit:s,parsed:!1,absolute:!1},zero:{color:"",template:"",parts:[],source:"",baseUnit:s,parsed:!1,absolute:!1}};e=e.replace("||",jn);var l=e.split("|");return a.positive.source=l[0],typeof l[2]>"u"?a.zero=a.positive:a.zero.source=l[2],typeof l[1]>"u"?a.negative=a.positive:a.negative.source=l[1],ne(a,function(d,u){if(!u.parsed){if(typeof o.getCache(u.source)<"u"){a[d]=o.getCache(u.source);return}var c=u.source,h=[];h=u.source.match(/^\[([^\]]*)\]/),h&&h.length&&h[0]!==""&&(c=u.source.substr(h[0].length),u.color=h[1]);for(var p=sr().chunk(c,!0),f=0;f<p.length;f++){var C=p[f];if(C.text=C.text.replace(jn,"|"),C.type==="value"){C.text.match(/[yYMdDwhHKkmsSn]+a/)&&(u.absolute=!0,C.text=C.text.replace(/([yYMdDwhHKkmsSn]+)a/,"$1"));var b=C.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);if(b)for(var x=0;x<b.length;x++)T(b[x])||(b[x]=o._unitAliases[b[x]]),u.parts.push(b[x]),C.text=C.text.replace(b[x],vi)}u.template+=C.text}o.setCache(u.source,u),u.parsed=!0}}),this.setCache(e,a),a},t.prototype.applyFormat=function(e,r){var o=!r.absolute&&e<this._negativeBase;e=Math.abs(e);for(var n=this.toTimeStamp(e,r.baseUnit),s=r.template,a=0,l=r.parts.length;a<l;a++){var d=r.parts[a],u=this.toTimeUnit(d.substr(0,1)),c=d.length,h=Math.floor(n/this._unitValues[u]);s=s.replace(vi,yi(h,c,"0")),n-=h*this._unitValues[u]}return o&&(s="-"+s),s},t.prototype.toTimeStamp=function(e,r){return e*this._unitValues[r]},t.prototype.toTimeUnit=function(e){switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year"}},t.prototype.invalidateSprite=function(){this.sprite&&this.sprite.invalidate()},Object.defineProperty(t.prototype,"baseUnit",{get:function(){return this._baseUnit},set:function(e){this._baseUnit=e,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(e){this._outputFormat=e.toLowerCase(),this.invalidateSprite()},enumerable:!0,configurable:!0}),t.prototype.getFormat=function(e,r,o){if(T(this.durationFormat))return this.durationFormat;if(o||(o=this.baseUnit),T(r)&&e!=r){e=Math.abs(e),r=Math.abs(r);var n=this.getValueUnit(ze(e,r),o);return this.durationFormats[o][n]}else{var s=this.getValueUnit(e,o);return this.durationFormats[o][s]}},t.prototype.getValueUnit=function(e,r){r||(r=this.baseUnit);var o,n=this.getMilliseconds(e,r);return Gm(this._unitValues,function(s,a){if(s==r||o){var l=n/a;if(l<=1)return o||(o=s),!1;o=s}return!0}),o},t.prototype.getMilliseconds=function(e,r){return r||(r=this.baseUnit),e*this._unitValues[r]},Object.defineProperty(t.prototype,"durationFormat",{get:function(){return this._durationFormat},set:function(e){this._durationFormat!=e&&(this._durationFormat=e,this.invalidateSprite())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"durationFormats",{get:function(){return this._durationFormats||(this._durationFormats={millisecond:{millisecond:this.language.translate("_duration_millisecond"),second:this.language.translate("_duration_millisecond_second"),minute:this.language.translate("_duration_millisecond_minute"),hour:this.language.translate("_duration_millisecond_hour"),day:this.language.translate("_duration_millisecond_day"),week:this.language.translate("_duration_millisecond_week"),month:this.language.translate("_duration_millisecond_month"),year:this.language.translate("_duration_millisecond_year")},second:{second:this.language.translate("_duration_second"),minute:this.language.translate("_duration_second_minute"),hour:this.language.translate("_duration_second_hour"),day:this.language.translate("_duration_second_day"),week:this.language.translate("_duration_second_week"),month:this.language.translate("_duration_second_month"),year:this.language.translate("_duration_second_year")},minute:{minute:this.language.translate("_duration_minute"),hour:this.language.translate("_duration_minute_hour"),day:this.language.translate("_duration_minute_day"),week:this.language.translate("_duration_minute_week"),month:this.language.translate("_duration_minute_month"),year:this.language.translate("_duration_minute_year")},hour:{hour:this.language.translate("_duration_hour"),day:this.language.translate("_duration_hour_day"),week:this.language.translate("_duration_hour_week"),month:this.language.translate("_duration_hour_month"),year:this.language.translate("_duration_hour_year")},day:{day:this.language.translate("_duration_day"),week:this.language.translate("_duration_day_week"),month:this.language.translate("_duration_day_month"),year:this.language.translate("_duration_day_year")},week:{week:this.language.translate("_duration_week"),month:this.language.translate("_duration_week_month"),year:this.language.translate("_duration_week_year")},month:{month:this.language.translate("_duration_month"),year:this.language.translate("_duration_month_year")},year:{year:this.language.translate("_duration_year")}}),this._durationFormats},set:function(e){this._durationFormats=e,this.invalidateSprite()},enumerable:!0,configurable:!0}),t}(lt);P.registeredClasses.DurationFormatter=ed;var $S=new Be;function WS(i,t){var e=t||"amexport",r=new Le,o=$S.insertKeyIfEmpty(e,function(){var n=new tt([new Ye(i,"."+e+"-menu *",{"box-sizing":"border-box"}),new Ye(i,"."+e+"-menu-level-0",{position:"absolute",top:"5px",right:"5px"}),new Ye(i,"."+e+"-menu-level-0."+e+"-left",{right:"auto",left:"5px"}),new Ye(i,"."+e+"-menu-level-0."+e+"-right",{right:"5px",left:"auto"}),new Ye(i,"."+e+"-menu-level-0."+e+"-top",{top:"5px",bottom:"auto"}),new Ye(i,"."+e+"-menu-level-0."+e+"-bottom",{top:"auto",bottom:"5px"}),new Ye(i,"."+e+"-item."+e+"-item-level-0",{opacity:"0.3",width:"30px","min-height":"30px",transition:"all 100ms ease-in-out"}),new Ye(i,"div:hover > div > ."+e+"-menu ."+e+"-item."+e+"-item-level-0, ."+e+"-item."+e+"-item-level-0.active",{opacity:"0.9"}),new Ye(i,"."+e+"-item."+e+"-item-level-0 > a",{padding:"0","text-align":"center",overflow:"hidden"}),new Ye(i,"."+e+"-item."+e+"-item-level-0:before",{display:"block"}),new Ye(i,"."+e+"-item",{position:"relative",display:"block",opacity:"0","z-index":"1","border-radius":"3px","background-color":r.getFor("secondaryButton").hex,padding:"0",margin:"1px 1px 0 0",color:r.getFor("secondaryButton").alternative.hex,transition:"all 100ms ease-in-out, opacity 0.5s ease 0.5s"}),new Ye(i,"."+e+"-left ."+e+"-item",{margin:"1px 0 0 1px"}),new Ye(i,"."+e+"-item:hover, ."+e+"-item.active",{background:r.getFor("secondaryButtonHover").hex,color:r.getFor("secondaryButtonText").hex}),new Ye(i,"."+e+"-item > ."+e+"-menu",{position:"absolute",top:"-1px",right:"0","margin-right":"100%"}),new Ye(i,"."+e+"-left ."+e+"-item > ."+e+"-menu",{left:"0",right:"auto","margin-left":"100%","margin-right":"auto"}),new Ye(i,"."+e+"-right ."+e+"-item > ."+e+"-menu",{left:"auto",right:"0","margin-left":"auto","margin-right":"100%"}),new Ye(i,"."+e+"-top ."+e+"-item > ."+e+"-menu",{top:"-1px",bottom:"auto"}),new Ye(i,"."+e+"-bottom ."+e+"-item > ."+e+"-menu",{top:"auto",bottom:"0"}),new Ye(i,"."+e+"-item > ."+e+"-menu",{display:"none"}),new Ye(i,"."+e+"-item:hover > ."+e+"-menu, ."+e+"-item.active > ."+e+"-menu",{display:"block"}),new Ye(i,"."+e+"-item:hover > ."+e+"-menu > ."+e+"-item, ."+e+"-item.active > ."+e+"-menu > ."+e+"-item",{opacity:"1"}),new Ye(i,"."+e+"-menu",{display:"block","list-style":"none",margin:"0",padding:"0"}),new Ye(i,"."+e+"-label",{display:"block",cursor:"default",padding:"0.5em 1em"}),new Ye(i,"."+e+"-icon",{display:"block",cursor:"default",padding:"0.2em 0.4em",width:"1.2em",height:"1.2em","min-width":"32px","min-height":"32px",margin:"auto auto","border-radius":"3px"}),new Ye(i,"."+e+"-item-level-0 > ."+e+"-icon",{padding:"0.1em 0.2em"}),new Ye(i,"."+e+"-clickable",{cursor:"pointer"})]);return new Wn(function(){$S.removeKey(e),n.dispose()})});return o.increment()}var Ku=function(i){A(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e._validateDisposer=null,e}return t.prototype.invalidate=function(){this._validateDisposer===null&&(this._validateDisposer=P.events.on("exitframe",this.validate,this))},t.prototype.validate=function(){this._validateDisposer!==null&&(this._validateDisposer.dispose(),this._validateDisposer=null)},t.prototype.dispose=function(){this._validateDisposer!==null&&(this._validateDisposer.dispose(),this._validateDisposer=null),i.prototype.dispose.call(this)},t}(ni);var wv=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.adapter=new _t(e),e.closeDelay=1e3,e.closeOnClick=!0,e._language=new $n,e._menuTag="ul",e._itemTag="li",e._labelTag="a",e._iconTag="img",e._classPrefix="amexport",e._defaultStyles=!0,e._align="right",e._verticalAlign="top",e._tabindex=0,e._ignoreNextClose=!1,e._items=[{label:"...",menu:[{label:"Image",menu:[{type:"png",label:"PNG"},{type:"jpg",label:"JPG"},{type:"svg",label:"SVG"},{type:"pdf",label:"PDF"}]},{label:"Data",menu:[{type:"json",label:"JSON"},{type:"csv",label:"CSV"},{type:"xlsx",label:"XLSX"},{type:"html",label:"HTML"},{type:"pdfdata",label:"PDF"}]},{label:"Print",type:"print"}]}],e.className="ExportMenu",e._disposers.push(e._language),e.invalidate(),e.applyTheme(),e}return t.prototype.validate=function(){this.draw(),i.prototype.validate.call(this)},t.prototype.draw=function(){var e=this;this._element?(this._element.innerHTML="",this._element.className=this.getMenuItemClass(0)):this._element=this.createMenuElement(0),this.defaultStyles&&(this._element.style.display="none"),Ct(this._container).appendChild(this._element);for(var r=this.adapter.apply("items",{items:this._items}).items,o=r.length,n=0;n<o;n++)this.drawBranch(this._element,r[n],0);this._element=this.adapter.apply("menuElement",{menuElement:this._element}).menuElement,this._disposers.push(ye().body.events.on("down",function(s){s.pointer.touch||(e._ignoreNextClose=!1),e.close()})),this._disposers.push(ye().body.events.on("keydown",function(s){var a=qi.getEventKey(s.event);switch(a){case"esc":e.close();break;case"up":case"down":case"left":case"right":e._currentSelection&&s.event.preventDefault(),e.moveSelection(a);break}})),this.defaultStyles&&this.loadDefaultCSS()},t.prototype.drawBranch=function(e,r,o){var n=this;if(r=this.adapter.apply("branch",{branch:r,level:o}).branch,r.unsupported!==!0){r.ascendants||(r.ascendants=new Ie);var s=r.type,a=this.createItemElement(o,s),l;r.icon?(l=this.createIconElement(o,s),l.src=r.icon,(r.label||r.title)&&(l.title=r.title||r.label)):r.svg?(l=this.createSvgElement(o,s,r.svg),(r.label||r.title)&&(l.title=r.title||r.label)):(l=this.createLabelElement(o,s),l.innerHTML=r.label?this.language.translate(r.label):"",r.title&&(l.title=r.title));var d=this.getReaderLabel(r,l.innerHTML);l.setAttribute("aria-label",d),a.appendChild(l),r.interactions=ye().getInteraction(a),r.element=a,this.typeClickable(s)&&(r.interactions.events.on("hit",function(b){if(n.events.isEnabled("hit")&&!n.isDisposed()){var x={type:"hit",event:b.event,target:n,branch:r};n.events.dispatchImmediately("hit",x)}}),r.interactions.events.on("keyup",function(b){if(qi.isKey(b.event,"enter")&&n.events.isEnabled("enter")){var x={type:"enter",event:b.event,target:n,branch:r};n.events.dispatchImmediately("enter",x)}}));{var u=this.getSubMenu(r);u!=null&&(r.interactions.events.on("keyup",function(b){qi.isKey(b.event,"enter")&&(n.selectBranch(u[0]),n.setFocus(u[0]))}),r.interactions.events.on("hit",function(b){n.selectBranch(r)}))}r.interactions.events.on("over",function(b){if(b.pointer.touch&&(n._ignoreNextClose=!0),n.selectBranch(r),n.events.isEnabled("over")){var x={type:"over",event:b.event,target:n,branch:r};n.events.dispatchImmediately("over",x)}}),r.interactions.events.on("out",function(b){if(!n.isDisposed()&&(b.pointer.touch||n.delayUnselectBranch(r),n.events.isEnabled("out"))){var x={type:"out",event:b.event,target:n,branch:r};n.events.dispatchImmediately("out",x)}}),r.interactions.events.on("focus",function(b){n.selectBranch(r)}),r.interactions.events.on("blur",function(b){n.delayUnselectBranch(r)});var c=o+1;if(r.menu){var h=this.createMenuElement(c);r.submenuElement=h;for(var p=r.menu.length,f=0;f<p;f++){var C=new Ie;r.menu[f].ascendants=C,r.ascendants.length&&C.copyFrom(r.ascendants),C.push(r),this.drawBranch(h,r.menu[f],c)}if(h.innerHTML=="")return;a.appendChild(h)}r.hidden&&this.hideBranch(r),r.id&&a.setAttribute("id",r.id),r.color&&(a.style.backgroundColor=r.color.hex),e.appendChild(a)}},t.prototype.createMenuElement=function(e){var r=document.createElement(this.menuTag);return r.className=this.getMenuItemClass(e),e===0?r.setAttribute("role","menubar"):r.setAttribute("role","menu"),r},t.prototype.getMenuItemClass=function(e){var r=this.classPrefix+"-menu "+this.classPrefix+"-menu-level-"+e;return e===0&&(r+=" "+this.classPrefix+"-menu-root "+this.classPrefix+"-"+this.align+" "+this.classPrefix+"-"+this.verticalAlign),this.adapter.apply("menuClass",{className:r,level:e}).className},t.prototype.createItemElement=function(e,r){var o=document.createElement(this.itemTag),n=this.classPrefix+"-item "+this.classPrefix+"-item-level-"+e+" "+this.classPrefix+"-item-"+(r||"blank");return o.className=this.adapter.apply("itemClass",{className:n,level:e,type:r}).className,o.setAttribute("role","menuitem"),o.setAttribute("tabindex",this.tabindex.toString()),o},t.prototype.createLabelElement=function(e,r){var o=document.createElement(this.labelTag),n=this.classPrefix+"-label "+this.classPrefix+"-label-level-"+e+" "+this.classPrefix+"-item-"+(r||"blank");return this.typeClickable(r)&&(n+=" "+this.classPrefix+"-clickable"),o.className=this.adapter.apply("labelClass",{className:n,level:e,type:r}).className,o},t.prototype.createIconElement=function(e,r){var o=document.createElement(this.iconTag),n=this.classPrefix+"-icon "+this.classPrefix+"-icon-level-"+e+" "+this.classPrefix+"-item-"+(r||"blank");return this.typeClickable(r)&&(n+=" "+this.classPrefix+"-clickable"),o.className=this.adapter.apply("labelClass",{className:n,level:e,type:r}).className,o.setAttribute("tabindex",this.tabindex.toString()),o.setAttribute("role","menuitem"),o},t.prototype.createSvgElement=function(e,r,o){var n=new DOMParser,s=n.parseFromString(o,"image/svg+xml").documentElement,a=this.classPrefix+"-icon "+this.classPrefix+"-icon-level-"+e+" "+this.classPrefix+"-item-"+(r||"blank");return this.typeClickable(r)&&(a+=" "+this.classPrefix+"-clickable"),s.setAttribute("class",this.adapter.apply("labelClass",{className:a,level:e,type:r}).className),s.setAttribute("tabindex",this.tabindex.toString()),s.setAttribute("role","menuitem"),s},t.prototype.dispose=function(){this._disposed||(i.prototype.dispose.call(this),this._element&&this._element.parentNode&&this._element.parentNode.removeChild(this._element))},t.prototype.typeClickable=function(e){return T(e)},t.prototype.hasSubMenu=function(e){return!!(e.menu&&e.menu.length)},t.prototype.getSubMenu=function(e){if(e.menu&&e.menu.length)return e.menu},t.prototype.getReaderLabel=function(e,r){return r=Ym(r),e.ascendants.length==0?(r=r=="..."?this.language.translate("Export"):r,r+=" ["+this.language.translate("Press ENTER or use arrow keys to navigate")+"]"):this.hasSubMenu(e)?r+=" ["+this.language.translate("Click, tap or press ENTER to open")+"]":e.type=="print"?r=this.language.translate("Click, tap or press ENTER to print."):this.typeClickable(e.type)&&(r=this.language.translate("Click, tap or press ENTER to export as %1.",void 0,r)),this.adapter.apply("rederLabel",{label:r,branch:e}).label},Object.defineProperty(t.prototype,"container",{get:function(){return this._container},set:function(e){this._container=e,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this._items},set:function(e){this._items=e,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tag",{set:function(e){this._menuTag=e,this._itemTag=e=="ul"?"li":"div",this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"menuTag",{get:function(){return this.adapter.apply("menuTag",{tag:this._menuTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemTag",{get:function(){return this.adapter.apply("itemTag",{tag:this._itemTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelTag",{get:function(){return this.adapter.apply("labelTag",{tag:this._labelTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iconTag",{get:function(){return this.adapter.apply("iconTag",{tag:this._iconTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this.adapter.apply("align",{align:this._align}).align},set:function(e){this._align=e,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalAlign",{get:function(){return this.adapter.apply("verticalAlign",{verticalAlign:this._verticalAlign}).verticalAlign},set:function(e){this._verticalAlign=e,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classPrefix",{get:function(){return this.adapter.apply("classPrefix",{classPrefix:this._classPrefix}).classPrefix},set:function(e){this._classPrefix=e,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultStyles",{get:function(){return this.adapter.apply("defaultStyles",{defaultStyles:this._defaultStyles}).defaultStyles},set:function(e){this._defaultStyles!=e&&(this._defaultStyles=e,e&&this.loadDefaultCSS()),this.invalidate()},enumerable:!0,configurable:!0}),t.prototype.loadDefaultCSS=function(){this._disposers.push(WS(Ql(this.container),this.classPrefix)),this._element&&(this._element.style.display="")},Object.defineProperty(t.prototype,"tabindex",{get:function(){return this.adapter.apply("tabindex",{tabindex:this._tabindex}).tabindex},set:function(e){this._tabindex=e,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"language",{get:function(){var e=this,r=this._language.get();return r==null&&(r=new Yi,this._language.set(r,r.events.on("localechanged",function(o){e.invalidate()}))),r},set:function(e){var r=this;this._language.set(e,e.events.on("localechanged",function(o){r.invalidate()})),this.invalidate()},enumerable:!0,configurable:!0}),t.prototype.close=function(){var e=this;if(!this.isDisposed()){if(this._ignoreNextClose){this._ignoreNextClose=!1;return}if(this.closeOnClick&&(this._element.style.pointerEvents="none",setTimeout(function(){e._element.style.pointerEvents="auto"},100)),this._currentSelection&&(this.setBlur(this._currentSelection),this._currentSelection=void 0),this._element)for(var r=this._element.getElementsByClassName("active"),o=r.length,n=o-1;n>=0;n--)r[n]&&Xl(r[n],"active");this.events.dispatchImmediately("closed",{type:"closed",target:this})}},t.prototype.selectBranch=function(e){var r=this;if(!this.isDisposed()&&(e.closeTimeout&&(this.removeDispose(e.closeTimeout),e.closeTimeout=void 0),Yl(e.element,"active"),e.submenuElement&&e.submenuElement.setAttribute("aria-expanded","true"),this._currentSelection&&this._currentSelection!==e&&this._currentSelection.ascendants&&de(q0(Cn([this._currentSelection]),this._currentSelection.ascendants.iterator()),function(n){!e.ascendants.contains(n)&&e!==n&&r.unselectBranch(n,!0)}),de(e.ascendants.iterator(),function(n){n.closeTimeout&&(r.removeDispose(n.closeTimeout),n.closeTimeout=void 0),Yl(n.element,"active")}),this._currentSelection=e,this.events.isEnabled("branchselected"))){var o={type:"branchselected",target:this,branch:e};this.events.dispatchImmediately("branchselected",o)}},t.prototype.unselectBranch=function(e,r){if(!this.isDisposed()&&(Xl(e.element,"active"),e.submenuElement&&e.submenuElement.removeAttribute("aria-expanded"),this._currentSelection==e&&(this._currentSelection=void 0),this.events.isEnabled("branchunselected"))){var o={type:"branchunselected",target:this,branch:e};this.events.dispatchImmediately("branchunselected",o)}},t.prototype.delayUnselectBranch=function(e,r){var o=this;this.isDisposed()||(e.closeTimeout&&(this.removeDispose(e.closeTimeout),e.closeTimeout=void 0),e.closeTimeout=this.setTimeout(function(){o.unselectBranch(e,r)},this.closeDelay),r!==!0&&e.ascendants&&de(e.ascendants.iterator(),function(n){o.delayUnselectBranch(n,!0)}))},t.prototype.moveSelection=function(e){if(!this.isDisposed()&&this._currentSelection){var r;if(e=="up")r=this.getPrevSibling(this._currentSelection);else if(e=="down")r=this.getNextSibling(this._currentSelection);else if(e=="left"&&this.align=="right"||e=="right"&&this.align=="left"){var o=this.getSubMenu(this._currentSelection);o!=null&&(r=o[0])}else(e=="right"&&this.align=="right"||e=="left"&&this.align=="left")&&(r=this.getParentItem(this._currentSelection));r&&r!==this._currentSelection&&(this.selectBranch(r),this.setFocus(r),this._currentSelection=r)}},t.prototype.getSiblings=function(e){var r=this.getParentItem(e);return r&&r.menu?r.menu:[]},t.prototype.getParentItem=function(e){if(e.ascendants&&e.ascendants.length)return e.ascendants.getIndex(e.ascendants.length-1)},t.prototype.getNextSibling=function(e){var r=this.getSiblings(e);if(r.length>1){var o=r.indexOf(e)+1;return o=r.length==o?0:o,r[o].unsupported?this.getNextSibling(r[o]):r[o]}else return e},t.prototype.getPrevSibling=function(e){var r=this.getSiblings(e);if(r.length>1){var o=r.indexOf(e)-1;return o=o==-1?r.length-1:o,r[o].unsupported?this.getPrevSibling(r[o]):r[o]}else return e},t.prototype.setFocus=function(e){if(e.interactions)try{e.interactions.element.focus()}catch{}},t.prototype.setBlur=function(e){if(e.interactions)try{e.interactions.element.blur()}catch{}},t.prototype.hideBranch=function(e){e.element.style.display="none"},t.prototype.showBranch=function(e){e.element.style.display=""},Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),t}(Ku);function td(i,t,e){return new Promise(function(r,o){var n=T(e)&&e.responseType=="blob",s=new XMLHttpRequest;if(s.onload=function(){if(s.status===200){var d=void 0,u;if(n){u=s.response,nM(u).then(function(h){var p={xhr:s,error:!1,response:h,blob:u,type:s.getResponseHeader("Content-Type"),target:t};r(p)});return}else d=s.responseText||s.response;var c={xhr:s,error:!1,response:d,blob:u,type:s.getResponseHeader("Content-Type"),target:t};r(c)}else o({xhr:s,error:!0,type:s.getResponseHeader("Content-Type"),target:t})},s.onerror=function(){o({xhr:s,error:!0,type:s.getResponseHeader("Content-Type"),target:t})},s.open("GET",i,!0),e&&e.withCredentials&&(s.withCredentials=!0),T(e)){if(T(e.requestHeaders))for(var a=0;a<e.requestHeaders.length;a++){var l=e.requestHeaders[a];s.setRequestHeader(l.key,l.value)}T(e.responseType)&&(s.responseType=e.responseType)}s.send()})}function nM(i){return new Promise(function(t,e){var r=new FileReader;r.onload=function(o){t(r.result)},r.onerror=function(o){e(o)},r.readAsText(i)})}var _v;function sM(){return et(this,void 0,void 0,function(){var i,t,e,r;return $e(this,function(o){switch(o.label){case 0:return[4,Promise.all([import("./chunk-AUL5PBBL.js"),import("./chunk-J6A4624A.js")])];case 1:return i=o.sent(),t=i[0].default||i[0],e=i[1].default||i[1],r=window,r.pdfMake=r.pdfMake||{},r.pdfMake.vfs=e,t.vfs=e,[2,t]}})})}var jS=/src: ([^;]+);/;function aM(){return window.navigator.msSaveOrOpenBlob!=null}function lM(i){return new Promise(function(t,e){var r=new FileReader;r.onload=function(o){t(r.result)},r.onerror=function(o){e(o)},r.readAsDataURL(i)})}function dM(i){return et(this,void 0,void 0,function(){var t,e;return $e(this,function(r){switch(r.label){case 0:t=i.sheet,r.label=1;case 1:return r.trys.push([1,2,,4]),[2,t.cssRules];case 2:return e=r.sent(),[4,new Promise(function(o,n){i.addEventListener("load",function(){o(t.cssRules)},!0),i.addEventListener("error",function(s){n(s)},!0),setTimeout(function(){n(new Error("Timeout while waiting for <style> to load"))},1e4)})];case 3:return[2,r.sent()];case 4:return[2]}})})}function US(i,t,e){return et(this,void 0,void 0,function(){var r,o,n,s;return $e(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,td(t)];case 1:return r=a.sent(),[3,3];case 2:return o=a.sent(),console.error("Failed to load stylesheet",t,o),[2];case 3:n=i.createElement("style"),n.textContent=r.response,we.nonce!=""&&n.setAttribute("nonce",we.nonce),i.head.appendChild(n),a.label=4;case 4:return a.trys.push([4,,7,8]),[4,dM(n)];case 5:return s=a.sent(),[4,qS(i,t,s,e)];case 6:return a.sent(),[3,8];case 7:return i.head.removeChild(n),[7];case 8:return[2]}})})}function qS(i,t,e,r){return et(this,void 0,void 0,function(){var o,n,s,a,l;return $e(this,function(d){switch(d.label){case 0:for(o=[],n=e.length,s=0;s<n;s++)a=e[s],a.type===CSSRule.IMPORT_RULE?(l=a.href,l&&(l=Hp(t,l),o.push(US(i,l,r)))):r(t,a);return o.length?[4,Promise.all(o)]:[3,2];case 1:d.sent(),d.label=2;case 2:return[2]}})})}function uM(i){return et(this,void 0,void 0,function(){var t,e;return $e(this,function(r){switch(r.label){case 0:t=document.createElement("iframe"),t.src="about:blank",t.setAttribute("title",""),document.head.appendChild(t),r.label=1;case 1:return r.trys.push([1,,3,4]),e=t.contentDocument,[4,Promise.all(Hn(document.styleSheets,function(o){var n=o.href;return n==null?qS(e,location.href,o.cssRules,i):(n=Hp(location.href,n),US(e,n,i))}))];case 2:return r.sent(),[3,4];case 3:return document.head.removeChild(t),[7];case 4:return[2]}})})}var xv=function(i){A(t,i);function t(e){var r=i.call(this)||this;return r.adapter=new _t(r),r._formatOptions=new Be,r._extraSprites=[],r._validateSprites=[],r.dataFieldsOrder=[],r._dynamicDataFields=!0,r._removedObjects=new Ie,r._hiddenObjects=[],r._objectsAlreadyHidden=!1,r._filePrefix="amCharts",r.useWebFonts=!0,r.useRetina=!0,r.useSimplifiedExport=!0,r.timeoutDelay=2e3,r._exportRunning=!1,r._prevHasData=!1,r._container=e,r.className="Export",r._formatOptions.setKey("png",{}),r._formatOptions.setKey("jpg",{quality:.8}),r._formatOptions.setKey("gif",{}),r._formatOptions.setKey("svg",{}),r._formatOptions.setKey("pdf",{fontSize:14,imageFormat:"png",align:"left",addURL:!0,addColumnNames:!0}),r._formatOptions.setKey("json",{indent:2,useLocale:!0}),r._formatOptions.setKey("csv",{addColumnNames:!0,emptyAs:"",addBOM:!0}),r._formatOptions.setKey("xlsx",{addColumnNames:!0,useLocale:!0,emptyAs:""}),r._formatOptions.setKey("html",{addColumnNames:!0,emptyAs:""}),r._formatOptions.setKey("pdfdata",{fontSize:14,imageFormat:"png",addURL:!0,addColumnNames:!0,emptyAs:""}),r._formatOptions.setKey("print",{delay:500,printMethod:"iframe"}),r.adapter.add("options",function(o){var n=r._formatOptions.getKey(o.type);return o.options?o.options=_u(n,o.options):o.options=n,o}),r.applyTheme(),r.dispatchImmediately("inited"),r}return Object.defineProperty(t.prototype,"menu",{get:function(){return this._menu},set:function(e){var r=this;this._menu&&this.removeDispose(this._menu),this._menu=e,this._menu.container=this.container,this._menu.language=this._language,this._menu.adapter.add("branch",function(o){return o.branch.unsupported=!r.typeSupported(o.branch.type),o}),this._menu.events.on("hit",function(o){r.export(o.branch.type,o.branch.options),r.menu.close()}),this._menu.events.on("enter",function(o){r.export(o.branch.type,o.branch.options),r.menu.close()}),this._menu.events.on("over",function(o){r._disablePointers()}),this._menu.events.on("out",function(o){setTimeout(function(){r._releasePointers()},10)}),this.dispatchImmediately("menucreated"),this._menu.adapter.add("classPrefix",function(o){return o.classPrefix=we.classNamePrefix+o.classPrefix,o}),this._disposers.push(this._menu)},enumerable:!0,configurable:!0}),t.prototype.typeSupported=function(e){var r=!0,o=this.getFormatOptions(e);return T(o)&&o.disabled?r=!1:e==="pdf"||(e==="xlsx"?r=!!this._hasData():(e=="print"&&!window.print||["json","csv","html","pdfdata"].indexOf(e)!==-1&&!this._hasData())&&(r=!1)),this.adapter.apply("supported",{supported:r,type:e}).supported},t.prototype._hasData=function(){return this.data&&this.data.length},t.prototype._getFunction=function(e){switch(e){case"png":case"gif":case"jpg":return this.getImage;case"svg":return this.getSVG;case"pdf":case"pdfdata":return this.getPDF;case"xlsx":return this.getExcel;case"csv":return this.getCSV;case"json":return this.getJSON;case"html":return this.getHTML;case"print":return this.getPrint;default:return this.unsupported}},t.prototype.export=function(e,r){return et(this,void 0,void 0,function(){var o,n,s,a,l,d=this;return $e(this,function(u){switch(u.label){case 0:return e=="custom"?(this.handleCustom(r),[2,!0]):(this._exportRunning=!0,this.events.isEnabled("exportstarted")&&(o={type:"exportstarted",target:this,format:e,options:r},this.events.dispatchImmediately("exportstarted",o)),this.showPreloader(),this.timeoutDelay&&(this.hideTimeout(),this._timeoutTimeout=this.setTimeout(function(){if(d.events.isEnabled("exporttimedout")){var c={type:"exporttimedout",target:d,format:e,options:r};d.events.dispatchImmediately("exporttimedout",c)}d.showTimeout()},this.timeoutDelay)),this.hideNonExportableSprites(),n=this._getFunction(e),r=this.adapter.apply("options",{options:r,type:e}).options,n=this.adapter.apply("exportFunction",{func:n,type:e,options:r}).func,[4,n.call(this,e,r)]);case 1:return s=u.sent(),this._exportRunning=!1,this._releasePointers(),this.restoreNonExportableSprites(),s?(this.events.isEnabled("exportfinished")&&(a={type:"exportfinished",target:this,format:e,options:r},this.events.dispatchImmediately("exportfinished",a)),this.hidePreloader(),this.hideTimeout(),this.menu&&this.menu.close(),e==="print"?[2,this.print(s,r,this.adapter.apply("title",{title:this.title,options:r}).title)]:e=="pdfdata"?[2,this.download(s,this.filePrefix+".pdf")]:[2,this.download(s,this.filePrefix+"."+e,r&&r.addBOM)]):(this.events.isEnabled("error")&&(l={type:"error",target:this,format:e,options:r},this.events.dispatchImmediately("error",l)),[2,!1])}})})},t.prototype.unsupported=function(e,r){return et(this,void 0,void 0,function(){return $e(this,function(o){return[2,""]})})},t.prototype.handleCustom=function(e){T(e)&&T(e.callback)&&e.callback.call(e.callbackTarget||this,e)},t.prototype.getPrint=function(e,r){return et(this,void 0,void 0,function(){return $e(this,function(o){return[2,this.getImage("png",r)]})})},t.prototype.getFontFamilies=function(){return et(this,void 0,void 0,function(){var e,r,o,n,s=this;return $e(this,function(a){switch(a.label){case 0:return e=this.getDOMURL(),r=[],o=[],[4,uM(function(l,d){if(d.type===CSSRule.FONT_FACE_RULE){var u=d.cssText,c=jS.exec(u);if(c!==null){var h=c[1].split(/ *, */).map(function(p){return et(s,void 0,void 0,function(){var f,C,b,x,S,R;return $e(this,function(I){switch(I.label){case 0:return f=/^url\(["']?([^"'\)]+)["']?\)([^,]*)$/.exec(p),f!==null?[3,1]:[2,p];case 1:if(C=f[2],b=Hp(l,f[1]),this.webFontFilter&&!b.match(this.webFontFilter))return[2,null];I.label=2;case 2:return I.trys.push([2,7,,8]),[4,td(b,void 0,{responseType:"blob"})];case 3:return x=I.sent(),aM()?(S=e.createObjectURL(x.blob),r.push(S),[3,6]):[3,4];case 4:return[4,lM(x.blob)];case 5:S=I.sent(),I.label=6;case 6:return[2,'url("'+S+'")'+C];case 7:return R=I.sent(),console.error("Failed to load font",b,R),[2,null];case 8:return[2]}})})});o.push(Promise.all(h).then(function(p){return p=p.filter(function(f){return f!=null}),p.length===0?"":u.replace(jS,"src: "+p.join(", ")+";")}))}}})];case 1:return a.sent(),[4,Promise.all(o)];case 2:return n=a.sent(),[2,{blobs:r,cssText:n.filter(function(l){return!!l}).join(`
`)}]}})})},t.prototype.getImage=function(e,r,o){return et(this,void 0,void 0,function(){var n,s,a,l,d,u,u;return $e(this,function(c){switch(c.label){case 0:return n=this._objectsAlreadyHidden,n||this.hideNonExportableSprites(),T(r)||(r=this.getFormatOptions(e)),[4,this.awaitValidSprites()];case 1:return c.sent(),[4,this.simplifiedImageExport()];case 2:if(!c.sent())return[3,10];s=void 0,c.label=3;case 3:return c.trys.push([3,7,,9]),[4,this.getCanvas(r)];case 4:return s=c.sent(),o===!1?[3,6]:[4,this.addExtras(s,r)];case 5:a=c.sent(),this.disposeCanvas(s),s=a,c.label=6;case 6:return l=s.toDataURL(this.getContentType(e),r.quality),this.disposeCanvas(s),n||this.restoreNonExportableSprites(),[2,l];case 7:return d=c.sent(),console.error(d.message+`
`+d.stack),Zl("Simple export failed, falling back to advanced export"),s&&this.disposeCanvas(s),[4,this.getImageAdvanced(e,r,o)];case 8:return u=c.sent(),n||this.restoreNonExportableSprites(),[2,u];case 9:return[3,12];case 10:return[4,this.getImageAdvanced(e,r,o)];case 11:return u=c.sent(),n||this.restoreNonExportableSprites(),[2,u];case 12:return[2]}})})},t.prototype.addExtras=function(e,r,o){return et(this,void 0,void 0,function(){var n,s,a,l,d,u,c,h,p,f,C,b,x,S,R=this;return $e(this,function(I){switch(I.label){case 0:return this.extraSprites.length?(n=0,s=0,a=e.width,l=e.height,d=0,u=0,[4,Promise.all(Hn(this.extraSprites,function(F){return et(R,void 0,void 0,function(){var L,V,k,G;return $e(this,function(ge){switch(ge.label){case 0:return F instanceof Se?L={sprite:F,position:"bottom"}:L=F,L.position=L.position||"bottom",L.marginTop=L.marginTop||0,L.marginRight=L.marginRight||0,L.marginBottom=L.marginBottom||0,L.marginLeft=L.marginLeft||0,o?[4,L.sprite.exporting.getCanvasAdvanced(r)]:[3,2];case 1:return V=ge.sent(),[3,4];case 2:return[4,L.sprite.exporting.getCanvas(r)];case 3:V=ge.sent(),ge.label=4;case 4:return k=V.width+L.marginLeft+L.marginRight,G=V.height+L.marginTop+L.marginBottom,L.position=="top"?(a=L.crop?l:ze(a,k),s+=G):L.position=="right"?(l=L.crop?l:ze(l,G),d+=k):L.position=="left"?(l=L.crop?l:ze(l,G),n+=k):L.position==="bottom"&&(a=L.crop?l:ze(a,k),u+=G),[2,{canvas:V,position:L.position,left:L.marginLeft,top:L.marginTop,width:k,height:G}]}})})}))]):[3,2];case 1:return c=I.sent(),h=this.getDisposableCanvas(),h.width=n+a+d,h.height=s+l+u,p=h.getContext("2d"),f=this.backgroundColor||this.findBackgroundColor(this.sprite.dom),f&&(p.fillStyle=f.toString(),p.fillRect(0,0,h.width,h.height)),C=n,b=s,x=C+a,S=b+l,Z(c,function(F){F.position=="top"?(b-=F.height,p.drawImage(F.canvas,n+F.left,b+F.top)):F.position=="right"?(p.drawImage(F.canvas,x+F.left,s+F.top),x+=F.width):F.position=="left"?(C-=F.width,p.drawImage(F.canvas,C+F.left,s+F.top)):F.position==="bottom"&&(p.drawImage(F.canvas,n+F.left,S+F.top),S+=F.height),R.disposeCanvas(F.canvas)}),p.drawImage(e,n,s),[2,h];case 2:return[2,e]}})})},t.prototype.getCanvas=function(e){return et(this,void 0,void 0,function(){var r,o,n,s,a,l,d,u,c,h,p,f,C,b,x,S,R;return $e(this,function(I){switch(I.label){case 0:T(e)||(e={}),r=this.backgroundColor||this.findBackgroundColor(this.sprite.dom),o=this.getDOMURL(),n=null,s=null,I.label=1;case 1:return I.trys.push([1,,4,5]),l=this.sprite.pixelWidth,d=this.sprite.pixelHeight,u=$u(this.sprite.dom),c=Wu(this.sprite.dom),h=e.scale||1,p=this.getPixelRatio(e),h=this.getAdjustedScale(l*p,d*p,h,e),a=this.getDisposableCanvas(),a.style.width=l*h+"px",a.style.height=d*h+"px",a.width=l*h,a.height=d*h,f=a.getContext("2d"),r&&(f.fillStyle=r.toString(),f.fillRect(0,0,l*h,d*h)),C=[],this.useWebFonts&&C.push(this.getFontFamilies().then(function(F){return s=F.blobs,F.cssText})),C.push(this.imagesToDataURI(this.sprite.dom,e)),C.push(this.prepForeignObjects(this.sprite.dom,e)),[4,Promise.all(C)];case 2:return b=I.sent(),x=this.normalizeSVG("<style>"+b[0]+"</style>"+this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),e,l,d,h,u,c),S=new Blob([x],{type:"image/svg+xml"}),n=o.createObjectURL(S),[4,this.loadNewImage(n,l*h*p,d*h*p,"anonymous")];case 3:return R=I.sent(),f.drawImage(R,0,0),[3,5];case 4:return n!==null&&o.revokeObjectURL(n),s!==null&&Z(s,function(F){o.revokeObjectURL(F)}),this.restoreRemovedObjects(),[7];case 5:return[2,a]}})})},t.prototype.getCanvasAdvanced=function(e){return et(this,void 0,void 0,function(){var r,o,n,s,a,l,d,u,c,h,p;return $e(this,function(f){switch(f.label){case 0:return T(e)||(e={}),[4,this.imagesToDataURI(this.sprite.dom,e)];case 1:return f.sent(),r=this.backgroundColor||this.findBackgroundColor(this.sprite.dom),[4,this.canvg];case 2:return o=f.sent(),n=this.sprite.pixelWidth,s=this.sprite.pixelHeight,a=$u(this.sprite.dom),l=Wu(this.sprite.dom),d=e.scale||1,u=this.getPixelRatio(e),d=this.getAdjustedScale(n*u,s*u,d,e),c=this.normalizeSVG(this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),e,n,s,d,a,l,r),h=this.getDisposableCanvas(),h.style.width=n*u*d+"px",h.style.height=s*u*d+"px",h.width=n*u*d,h.height=s*u*d,p={useCORS:!0},u!=1&&(p.ignoreDimensions=!0,p.scaleWidth=n*u*d,p.scaleHeight=s*u*d),[4,o.fromString(h.getContext("2d"),c,p).render()];case 3:return f.sent(),[2,h]}})})},t.prototype.getImageAdvanced=function(e,r,o){return et(this,void 0,void 0,function(){var n,s,a;return $e(this,function(l){switch(l.label){case 0:return n=this._objectsAlreadyHidden,n||this.hideNonExportableSprites(),T(r)||(r=this.getFormatOptions(e)),[4,this.getCanvasAdvanced(r)];case 1:return s=l.sent(),o===!1?[3,3]:[4,this.addExtras(s,r,!0)];case 2:s=l.sent(),l.label=3;case 3:return a=s.toDataURL(this.getContentType(e),r.quality),this.disposeCanvas(s),n||this.restoreNonExportableSprites(),[2,a]}})})},t.prototype.getDisposableCanvas=function(){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="-10000px",document.body.appendChild(e),e},t.prototype.disposeCanvas=function(e){document.body.contains(e)&&document.body.removeChild(e)},t.prototype.getPixelRatio=function(e){return this.useRetina?yS():1},t.prototype.getAdjustedScale=function(e,r,o,n){if(!n)return o;var s=e*o,a=e*o,l,d;return n.maxWidth&&s>n.maxWidth&&(l=n.maxWidth/e),n.maxHeight&&a>n.maxHeight&&(d=n.maxHeight/r),l||d?st(l,d):(n.minWidth&&s<n.minWidth&&(l=n.minWidth/e),n.minHeight&&a<n.minHeight&&(d=n.minHeight/r),l||d?ze(l,d):o)},t.prototype.imagesToDataURI=function(e,r){return et(this,void 0,void 0,function(){var o,n,s,a,l,d;return $e(this,function(u){switch(u.label){case 0:if(o=e.querySelectorAll("image"),!o.length)return[3,2];for(n=[],s=o.length,a=0;a<s;a++)l=o[a],d=l.getAttributeNS(t.XLINK,"href"),d&&(d.indexOf("data:image")!==-1||(d.indexOf(".svg")!==-1?n.push(this.svgToDataURI(l,r)):n.push(this.imageToDataURI(l,r))));return[4,Promise.all(n)];case 1:return u.sent(),[2];case 2:return[2]}})})},t.prototype.prepForeignObjects=function(e,r){return et(this,void 0,void 0,function(){var o,n,s;return $e(this,function(a){if(o=e.querySelectorAll("foreignObject"),o.length)for(n=o.length,s=0;s<n;s++)this.temporarilyRemoveObject(o[s]);return[2]})})},t.prototype.imageToDataURI=function(e,r){return et(this,void 0,void 0,function(){var o,n,s,a;return $e(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,this.loadNewImage(e.getAttributeNS(t.XLINK,"href"),null,null,"anonymous")];case 1:o=l.sent(),n=document.createElement("canvas"),n.width=o.width,n.height=o.height,n.getContext("2d").drawImage(o,0,0);try{return s=n.toDataURL(),e.setAttribute("href",s),[2,s]}catch{return r.keepTainted!==!1&&this.temporarilyRemoveObject(e),[2,void 0]}return[3,3];case 2:return a=l.sent(),(!r||r.keepTainted!==!1)&&this.temporarilyRemoveObject(e),[2,void 0];case 3:return[2]}})})},t.prototype.svgToDataURI=function(e,r){return et(this,void 0,void 0,function(){var o,n,s,a,l;return $e(this,function(d){switch(d.label){case 0:o=e.getAttributeNS(t.XLINK,"href"),d.label=1;case 1:return d.trys.push([1,3,,4]),[4,td(o)];case 2:return n=d.sent(),s=this.adapter.apply("charset",{charset:"base64",type:"svg",options:r}).charset,a=this.adapter.apply("svgToDataURI",{data:"data:"+this.getContentType("svg")+";"+s+","+btoa(n.response),options:r}).data,e.setAttributeNS(t.XLINK,"href",a),[2,a];case 3:return l=d.sent(),(!r||r.keepTainted!==!1)&&this.temporarilyRemoveObject(e),[2,void 0];case 4:return[2]}})})},t.prototype.temporarilyRemoveObject=function(e,r){var o=e.parentElement||e.parentNode;r||(r=this.sprite.paper.add("g").node),o.insertBefore(r,e),e.textContent,o.removeChild(e),this._removedObjects.push({element:e,placeholder:r})},t.prototype.restoreRemovedObjects=function(){for(var e;e=this._removedObjects.pop(),!!e;){var r=e.placeholder.parentElement||e.placeholder.parentNode;r.insertBefore(e.element,e.placeholder)}},t.prototype.simplifiedImageExport=function(){return et(this,void 0,void 0,function(){var e,r,o,n,s,a,l,d,u;return $e(this,function(c){switch(c.label){case 0:if(this.useSimplifiedExport===!1)return[2,!1];if(e=P.getCache("simplifiedImageExport"),e===!1||e===!0)return[2,e];c.label=1;case 1:c.trys.push([1,6,,7]),r=document.createElement("canvas"),r.width=1,r.height=1,o=r.getContext("2d"),n=this.getDOMURL(),s=new Blob([this.normalizeSVG("<g></g>",{},1,1)],{type:"image/svg+xml"}),a=n.createObjectURL(s),l=void 0,c.label=2;case 2:return c.trys.push([2,4,,5]),[4,this.loadNewImage(a,1,1)];case 3:return l=c.sent(),[3,5];case 4:return d=c.sent(),[2,!1];case 5:o.drawImage(l,0,0),n.revokeObjectURL(a);try{return P.setCache("simplifiedImageExport",!0),[2,!0]}catch{return P.setCache("simplifiedImageExport",!1),[2,!1]}return[3,7];case 6:return u=c.sent(),P.setCache("simplifiedImageExport",!1),[2,!1];case 7:return[2]}})})},t.prototype.loadNewImage=function(e,r,o,n){return new Promise(function(s,a){var l;r&&o?l=new Image(r,o):l=new Image,n&&l.setAttribute("crossOrigin",n),l.onload=function(){s(l)};function d(){if(n){var u=l.src;l.onerror=function(){a(new Error('Loading image "'+e+'" failed'))},l.removeAttribute("crossorigin"),l.src="",l.src=u}else a(new Error('Loading image "'+e+'" failed'))}l.onabort=d,l.onerror=d,l.src=e})},t.prototype.getDOMURL=function(){return self.URL||self.webkitURL||self},t.prototype.getSVG=function(e,r,o){return o===void 0&&(o=!0),et(this,void 0,void 0,function(){var n,s,a,l,d,u,c,h,p,f;return $e(this,function(C){switch(C.label){case 0:return n=this._objectsAlreadyHidden,n||this.hideNonExportableSprites(),T(r)||(r=this.getFormatOptions("svg")),[4,this.awaitValidSprites()];case 1:return C.sent(),s=this.sprite.pixelWidth,a=this.sprite.pixelHeight,l=$u(this.sprite.dom),d=Wu(this.sprite.dom),u=r.scale||1,c=this.getPixelRatio(r),u=this.getAdjustedScale(s*c,a*c,u,r),h=this.normalizeSVG(this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),r,s,a,u,l,d),p=this.adapter.apply("charset",{charset:"charset=utf-8",type:"svg",options:r}).charset,f=this.adapter.apply("getSVG",{data:o?"data:"+this.getContentType(e)+";"+p+","+encodeURIComponent(h):h,options:r}).data,n||this.restoreNonExportableSprites(),[2,f]}})})},t.prototype.normalizeSVG=function(e,r,o,n,s,a,l,d){var u="";o&&(u+='width="'+Math.round(o*(s||1))+'px" '),n&&(u+='height="'+Math.round(n*(s||1))+'px" ');var c="";a&&(c+="font-family: "+a.replace(/"/g,"")+";"),l&&(c+="font-size: "+l+";"),s&&(u+='viewBox="0 0 '+o+" "+n+'" ');var h=[],p=e.match(/<foreignObject[\s\S]*<\/foreignObject>/gi);if(p)for(var f=0;f<p.length;f++)e=e.replace(p[f],vi),h.push(p[f]);e.match(/<svg/)?u!==""&&(e=e.replace(/(<svg[^>]*)width="[^"]*"/,"$1"),e=e.replace(/(<svg[^>]*)height="[^"]*"/,"$1"),e=e.replace(/(<svg)/,"$1"+u)):e='<?xml version="1.0" encoding="utf-8"?><svg '+u+' style="'+c+'" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+e+"</svg>",d&&(e=e.replace(/(<svg[^>]*>)/,'$1<rect width="100%" height="100%" fill="'+d.rgba+'"/>')),hS()&&(e=e.replace(/<feColorMatrix [^\/>]*\/>/gi,""));var C=new RegExp("url\\("+zu(ya()),"g");if(e=e.replace(C,"url(#"),e=e.replace(/url\(&quot;([^)]*)&quot;\)/gm,"url($1)"),h.length)for(var f=0;f<h.length;f++)e=e.replace(vi,h[f]);return e=this.adapter.apply("normalizeSVG",{data:e,options:r}).data,e},t.prototype.serializeElement=function(e){return new XMLSerializer().serializeToString(e)},t.prototype.getPDF=function(e,r){return et(this,void 0,void 0,function(){function o(b){var x={};x.normal=b.normal.path,C[b.normal.path]=b.normal.bytes,b.bold?(x.bold=b.bold.path,C[b.bold.path]=b.bold.bytes):x.bold=b.normal.path,b.italics?(x.italics=b.italics.path,C[b.italics.path]=b.italics.bytes):x.italics=b.normal.path,b.bolditalics?(x.bolditalics=b.bolditalics.path,C[b.bolditalics.path]=b.bolditalics.bytes):x.bolditalics=b.normal.path,f[b.name]=x}var n,s,a,l,d,u,c,h,p,f,C;return $e(this,function(b){switch(b.label){case 0:return[4,this.getImage(r.imageFormat||"png",r)];case 1:return n=b.sent(),[4,this.pdfmake];case 2:return s=b.sent(),a=[30,30,30,30],l={pageSize:r.pageSize||"A4",pageOrientation:r.pageOrientation||"portrait",pageMargins:r.pageMargins||a,defaultStyle:{font:r.font?r.font.name:void 0},content:[]},d=this.adapter.apply("title",{title:this.title,options:r}).title,u=0,d&&(l.content.push({text:d,fontSize:r.fontSize||14,bold:!0,margin:[0,0,0,15]}),u+=50),r.addURL&&(l.content.push({text:this.language.translate("Saved from")+": "+document.location.href,fontSize:r.fontSize,margin:[0,0,0,15]}),u+=50),e!="pdfdata"&&l.content.push({image:n,alignment:r.align||"left",fit:this.getPageSizeFit(l.pageSize,l.pageMargins,u)}),e=="pdfdata"||r.addData?(h=(c=l.content).push,p={},[4,this.getPDFData("pdf",r)]):[3,4];case 3:h.apply(c,[(p.table=b.sent(),p.fontSize=r.fontSize||14,p)]),b.label=4;case 4:return l=this.adapter.apply("pdfmakeDocument",{doc:l,options:r}).doc,f=null,C=null,r.font&&(f={},C={},o(r.font),r.extraFonts&&Z(r.extraFonts,o)),[4,new Promise(function(x,S){s.createPdf(l,null,f,C).getDataUrl(function(R){x(R)})})];case 5:return[2,b.sent()]}})})},t.prototype.getPDFData=function(e,r){return et(this,void 0,void 0,function(){var o,n,s,a,l,d,u=this;return $e(this,function(c){if(o={body:[]},n=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"pdf"}).dataFields,s=this.data,r.pivot)a=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"pdfdata"}).dataFieldsOrder,Fo(n,function(h,p){var f=[];r.addColumnNames&&f.push(p);for(var C=s.length,b=0;b<C;b++){var x=s[b][h];f.push(u.convertToSpecialFormat(h,x,r,!0))}o.body.push(u.getPDFDataRow(f,r,void 0,!0))},function(h,p){var f=a.indexOf(h),C=a.indexOf(p);return f>C?1:f<C?-1:0});else for(r.addColumnNames&&(o.body.push(this.getPDFDataRow(n,r,void 0,!0)),o.headerRows=1),l=s.length,d=0;d<l;d++)o.body.push(this.getPDFDataRow(s[d],r,n));return[2,this.adapter.apply("pdfmakeTable",{table:o,options:r}).table]})})},t.prototype.getPDFDataRow=function(e,r,o,n){var s=this;n===void 0&&(n=!1);var a=[];o||(o=e);var l=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"pdfdata"}).dataFieldsOrder;return Fo(o,function(d,u){var c=s.convertEmptyValue(d,e[d],r),h=n?c:s.convertToSpecialFormat(d,c,r);h=""+h,a.push(h)},function(d,u){var c=l.indexOf(d),h=l.indexOf(u);return c>h?1:c<h?-1:0}),a},t.prototype.getPageSizeFit=function(e,r,o){o===void 0&&(o=0);var n=[0,0,0,0];typeof r=="number"?n=[r,r,r,r]:r.length==2?n=[r[0],r[1],r[0],r[1]]:r.length==4&&(n=r);var s={"4A0":[4767.87,6740.79],"2A0":[3370.39,4767.87],A0:[2383.94,3370.39],A1:[1683.78,2383.94],A2:[1190.55,1683.78],A3:[841.89,1190.55],A4:[595.28,841.89],A5:[419.53,595.28],A6:[297.64,419.53],A7:[209.76,297.64],A8:[147.4,209.76],A9:[104.88,147.4],A10:[73.7,104.88],B0:[2834.65,4008.19],B1:[2004.09,2834.65],B2:[1417.32,2004.09],B3:[1000.63,1417.32],B4:[708.66,1000.63],B5:[498.9,708.66],B6:[354.33,498.9],B7:[249.45,354.33],B8:[175.75,249.45],B9:[124.72,175.75],B10:[87.87,124.72],C0:[2599.37,3676.54],C1:[1836.85,2599.37],C2:[1298.27,1836.85],C3:[918.43,1298.27],C4:[649.13,918.43],C5:[459.21,649.13],C6:[323.15,459.21],C7:[229.61,323.15],C8:[161.57,229.61],C9:[113.39,161.57],C10:[79.37,113.39],RA0:[2437.8,3458.27],RA1:[1729.13,2437.8],RA2:[1218.9,1729.13],RA3:[864.57,1218.9],RA4:[609.45,864.57],SRA0:[2551.18,3628.35],SRA1:[1814.17,2551.18],SRA2:[1275.59,1814.17],SRA3:[907.09,1275.59],SRA4:[637.8,907.09],EXECUTIVE:[521.86,756],FOLIO:[612,936],LEGAL:[612,1008],LETTER:[612,792],TABLOID:[792,1224]},a=s[e];return a[0]-=n[0]+n[2],a[1]-=n[1]+n[3]+o,a},t.prototype.getExcel=function(e,r){return et(this,void 0,void 0,function(){var o,n,s,a,l,d,u,c,h,p,f=this;return $e(this,function(C){switch(C.label){case 0:return T(r)||(r=this.getFormatOptions("xlsx")),[4,this.xlsx];case 1:if(o=C.sent(),n=this.adapter.apply("xlsxWorkbookOptions",{xlsx:o,options:{bookType:"xlsx",bookSST:!1,type:"base64"}}).options,s=this.normalizeExcelSheetName(this.adapter.apply("xlsxSheetName",{xlsx:o,name:this.title||this.language.translate("Data")}).name),a={SheetNames:[s],Sheets:{}},l=[],d=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"xslx"}).dataFields,r.pivot)u=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"xlsx"}).dataFieldsOrder,Fo(d,function(b,x){var S=[];r.addColumnNames&&S.push(x);for(var R=f.data.length,I=0;I<R;I++){var F=f.data[I][b];S.push(f.convertToSpecialFormat(b,F,r,!0))}l.push(f.getExcelRow(S,r,void 0,!0))},function(b,x){var S=u.indexOf(b),R=u.indexOf(x);return S>R?1:S<R?-1:0});else for(r.addColumnNames&&l.push(this.getExcelRow(d,r,void 0,!0)),c=this.data.length,h=0;h<c;h++)l.push(this.getExcelRow(this.data[h],r,d));return a.Sheets[s]=o.utils.aoa_to_sheet(l),a=this.adapter.apply("xlsxWorkbook",{xlsx:o,workbook:a,options:r}).workbook,p=this.adapter.apply("getExcel",{data:"data:"+this.getContentType(e)+";base64,"+o.write(a,n),options:r}).data,[2,p]}})})},t.prototype.normalizeExcelSheetName=function(e){return e=e.replace(/([:\\\/?*\[\]]+)/g," "),Au(e,31,"...",!0)},t.prototype.getExcelRow=function(e,r,o,n){var s=this;n===void 0&&(n=!1);var a=[];o||(o=e);var l=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"xlsx"}).dataFieldsOrder;return Fo(o,function(d,u){var c=s.convertEmptyValue(d,e[d],r),h=n?c:s.convertToSpecialFormat(d,c,r,!0);a.push(h)},function(d,u){var c=l.indexOf(d),h=l.indexOf(u);return c>h?1:c<h?-1:0}),a},t.prototype.getCSV=function(e,r,o){return o===void 0&&(o=!0),et(this,void 0,void 0,function(){var n,s,a,l,d,u,c,h,p,f,C=this;return $e(this,function(b){if(T(r)||(r=this.getFormatOptions("csv")),n="",s=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"csv"}).dataFields,a="",l=this.data,r.pivot)d=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"csv"}).dataFieldsOrder,Fo(s,function(x,S){var R=[];r.addColumnNames&&R.push(S);for(var I=l.length,F=0;F<I;F++){var L=l[F][x];R.push(C.convertToSpecialFormat(x,L,r,!0))}n+=a+C.getCSVRow(R,r,void 0,!0),a=`
`},function(x,S){var R=d.indexOf(x),I=d.indexOf(S);return R>I?-1:R<I?1:0});else{for(u=l.length,c=0;c<u;c++)h=this.getCSVRow(l[c],r,s),r.reverse?n=h+a+n:n+=a+h,a=`
`;r.addColumnNames&&(n=this.getCSVRow(s,r,void 0,!0)+a+n)}return p=this.adapter.apply("charset",{charset:"charset=utf-8",type:e,options:r}).charset,f=this.adapter.apply("getCSV",{data:o?"data:"+this.getContentType(e)+";"+p+","+encodeURIComponent(n):n,options:r}).data,[2,f]})})},t.prototype.getCSVRow=function(e,r,o,n){var s=this;n===void 0&&(n=!1);var a=r.separator||",",l=[];o||(o=e);var d=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"csv"}).dataFieldsOrder;return Fo(o,function(u,c){var h=s.convertEmptyValue(u,e[u],r),p=n?h:s.convertToSpecialFormat(u,h,r);p=""+p,p=p.replace(/"/g,'""'),(r.forceQuotes||p.search(new RegExp(`"|
|`+a,"g"))>=0)&&(p='"'+p+'"'),l.push(p)},function(u,c){var h=d.indexOf(u),p=d.indexOf(c);return h>p?1:h<p?-1:0}),l.join(a)},t.prototype.getHTML=function(e,r,o){return o===void 0&&(o=!0),et(this,void 0,void 0,function(){var n,s,a,l,d,u,c,h,p=this;return $e(this,function(f){if(T(r)||(r=this.getFormatOptions("html")),n="<table>",r.tableClass&&(n='<table class="'+r.tableClass+'">'),s=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"html"}).dataFields,a=this.data,r.pivot)l=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"html"}).dataFieldsOrder,n+=`
<tbody>`,Fo(s,function(C,b){var x=[];r.addColumnNames&&x.push(b);for(var S=a.length,R=0;R<S;R++){var I=a[R][C];x.push(p.convertToSpecialFormat(C,I,r,!0))}n+=`
`+p.getHTMLRow(x,r,void 0,!0)},function(C,b){var x=l.indexOf(C),S=l.indexOf(b);return x>S?-1:x<S?1:0}),n+=`
</tbody>`;else{for(r.addColumnNames&&(n+=`
<thead>
`+this.getHTMLRow(s,r,void 0,!0,!0)+`
</thead>`),n+=`
<tbody>`,d=a.length,u=0;u<d;u++)n+=`
`+this.getHTMLRow(a[u],r,s);n+=`
</tbody>`}return n+=`
</table>`,c=this.adapter.apply("charset",{charset:"charset=utf-8",type:e,options:r}).charset,h=this.adapter.apply("getHTML",{data:o?"data:"+this.getContentType(e)+";"+c+","+encodeURIComponent(n):n,options:r}).data,[2,h]})})},t.prototype.getHTMLRow=function(e,r,o,n,s){var a=this;n===void 0&&(n=!1),s===void 0&&(s=!1);var l="	<tr>";r.rowClass&&(l='	<tr class="'+r.rowClass+'">'),o||(o=e);var d=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"html"}).dataFieldsOrder,u=s?"th":"td",c=!0;return Fo(o,function(h,p){var f=a.convertEmptyValue(h,e[h],r),C=n?f:a.convertToSpecialFormat(h,f,r);C=""+C,C=C.replace(/[\u00A0-\u9999<>\&]/gim,function(x){return"&#"+x.charCodeAt(0)+";"});var b=u;r.pivot&&c&&(b="th"),r.cellClass?l+=`
		<`+b+' class="'+r.cellClass+'">'+C+"</"+b+">":l+=`
		<`+b+">"+C+"</"+b+">",c=!1},function(h,p){var f=d.indexOf(h),C=d.indexOf(p);return f>C?1:f<C?-1:0}),l+=`
	</tr>`,l},t.prototype.getJSON=function(e,r,o){return o===void 0&&(o=!0),et(this,void 0,void 0,function(){var n,s,a,l,d,u,c,h,p,f=this;return $e(this,function(C){if(T(r)||(r=this.getFormatOptions("json")),s=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"json"}).dataFields,this._dynamicDataFields)n=this.data;else for(n=[],a=this.data,l=function(b,x){var S=a[x];if(typeof S=="object"){var R={};ne(S,function(I,F){T(s[I])&&(R[s[I]]=f.convertToSpecialFormat(I,F,r))}),n.push(R)}},d=a.length,u=0;u<d;u++)l(d,u);return c=JSON.stringify(n,function(b,x){return typeof x=="object"&&ne(x,function(S,R){x[S]=f.convertToSpecialFormat(S,R,r)}),x},r.indent),h=this.adapter.apply("charset",{charset:"charset=utf-8",type:e,options:r}).charset,p=this.adapter.apply("getJSON",{data:o?"data:"+this.getContentType(e)+";"+h+","+encodeURIComponent(c):c,options:r}).data,[2,p]})})},t.prototype.convertToSpecialFormat=function(e,r,o,n){if(typeof r=="number")if(this.isDateField(e))r=new Date(r);else{if(this.isDurationField(e))return this.durationFormatter.format(r,this.durationFormat);if(this.isNumberField(e)&&this.numberFormat)return this.numberFormatter.format(r,this.numberFormat)}return r instanceof Date?o.useTimestamps?r=r.getTime():o.useLocale?n||(r=r.toLocaleString()):r=this.dateFormatter.format(r,this.dateFormat):je(r)&&this.isDateField(e)&&this.dateFormat&&(r=this.dateFormatter.format(this.dateFormatter.parse(r),this.dateFormat)),r},t.prototype.convertEmptyValue=function(e,r,o){return T(r)?r:o.emptyAs},t.prototype.download=function(e,r,o){return o===void 0&&(o=!1),et(this,void 0,void 0,function(){var b,x,a,n,u,c,h,p,s,b,x,a,l,d,u,c,h,p,f,C,b,x,S,R;return $e(this,function(I){if(this.msBlobDownloadSupport()){if(b=e.split(";"),x=b.shift().replace(/data:/,""),e=decodeURIComponent(b.join(";").replace(/^[^,]*,/,"")),["image/svg+xml","application/json","text/csv"].indexOf(x)==-1)try{a=atob(e),e=a}catch{return[2,!1]}else return n=new Blob([e],{type:x}),window.navigator.msSaveBlob(n,r),[2,!0];for(u=new Array(e.length),c=0;c<e.length;++c)h=e.charCodeAt(c),u[c]=h;p=new Blob([new Uint8Array(u)],{type:x}),window.navigator.msSaveBlob(p,r)}else if(this.blobDownloadSupport()){if(s=document.createElement("a"),s.download=r,document.body.appendChild(s),b=e.split(";"),x=b.shift().replace(/data:/,""),e=decodeURIComponent(b.join(";").replace(/^[^,]*,/,"")),["image/svg+xml","application/json","text/csv","text/html"].indexOf(x)==-1)try{a=atob(e),e=a}catch{return[2,!1]}else return o&&(e="\uFEFF"+e),l=new Blob([e],{type:x}),d=window.URL.createObjectURL(l),s.href=d,s.download=r,s.click(),setTimeout(function(){document.body.removeChild(s),window.URL.revokeObjectURL(d)},100),[2,!0];for(u=new Array(e.length),c=0;c<e.length;++c)h=e.charCodeAt(c),u[c]=h;o&&(u=[239,187,191].concat(u)),p=new Blob([new Uint8Array(u)],{type:x}),f=window.URL.createObjectURL(p),s.href=f,s.download=r,document.body.appendChild(s),s.click(),document.body.removeChild(s),setTimeout(function(){window.URL.revokeObjectURL(f)},100)}else this.linkDownloadSupport()?(C=document.createElement("a"),C.download=r,C.href=e,document.body.appendChild(C),C.click(),document.body.removeChild(C)):this.legacyIE()?(b=e.match(/^data:(.*);[ ]*([^,]*),(.*)$/),b.length===4&&(b[2]=="base64"?b[1].match(/^image\//)&&this.showModal('<img src="'+e+'" style="float: left; max-width: 50%; max-height: 80%; margin: 0 1em 0.5em 0; border: 1px solid #eee;" /><p>'+this.language.translate('To save the image, right-click thumbnail on the left and choose "Save picture as..."')+'</p><p style="text-align: center;"><small>'+this.language.translate("(Press ESC to close this message)")+"</small></p>",this.language.translate("Image Export Complete")):(x=void 0,r.match(/\.svg$/)?x="image/svg+xml":(x="text/plain",r+=".txt"),S=document.createElement("iframe"),S.width="1px",S.height="1px",S.style.display="none",document.body.appendChild(S),R=S.contentDocument,R.open(x,"replace"),R.write(decodeURIComponent(b[3])),R.close(),R.execCommand("SaveAs",!0,r),document.body.removeChild(S)))):window.location.href=e;return[2,!0]})})},t.prototype.downloadSupport=function(){return this.linkDownloadSupport()||this.msBlobDownloadSupport()},t.prototype.linkDownloadSupport=function(){var e=P.getCache("linkDownloadSupport");if(e===!1||e===!0)return e;var r=document.createElement("a"),o=typeof r.download<"u";return P.setCache("linkDownloadSupport",o),o},t.prototype.blobDownloadSupport=function(){return T(window.Blob)},t.prototype.msBlobDownloadSupport=function(){return T(window.navigator.msSaveOrOpenBlob)},t.prototype.legacyIE=function(){var e=document.createElement("div");return e.innerHTML="<!--[if lt IE 10]><i></i><![endif]-->",e.getElementsByTagName("i").length==1},t.prototype.print=function(e,r,o){return et(this,void 0,void 0,function(){return $e(this,function(n){return r.printMethod=="css"?[2,this.printViaCSS(e,r,o)]:[2,this.printViaIframe(e,r,o)]})})},t.prototype.printViaCSS=function(e,r,o){return et(this,void 0,void 0,function(){var n,s,a,l,d;return $e(this,function(u){return n=document.documentElement.scrollTop||document.body.scrollTop,s=new Ye(Ql(this.container),"body > *",{display:"none",position:"fixed",visibility:"hidden",opacity:"0",clipPath:"polygon(0px 0px,0px 0px,0px 0px,0px 0px);"}),o&&document&&document.title&&(a=document.title,document.title=o),l=new Image,l.src=e,l.style.maxWidth="100%",l.style.display="block",l.style.position="relative",l.style.visibility="visible",l.style.opacity="1",l.style.clipPath="none",document.body.appendChild(l),this.setTimeout(function(){window.print()},50),d=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,d&&r.delay<1e3?r.delay=1e3:r.delay<100&&(r.delay=100),this.setTimeout(function(){document.body.removeChild(l),s.dispose(),a&&(document.title=document.title),document.documentElement.scrollTop=document.body.scrollTop=n},r.delay||500),[2,!0]})})},t.prototype.printViaIframe=function(e,r,o){return et(this,void 0,void 0,function(){var n,s,a;return $e(this,function(l){return n=document.createElement("iframe"),n.style.visibility="hidden",document.body.appendChild(n),n.contentWindow.document.open(),n.contentWindow.document.close(),s=new Image,s.src=e,s.style.maxWidth="100%",s.style.height="auto",o&&(n.contentWindow.document.title=o),n.contentWindow.document.body.appendChild(s),n.load=function(){n.contentWindow.document.body.appendChild(s)},this.setTimeout(function(){try{n.contentWindow.document.execCommand("print",!1,null)||n.contentWindow.print()}catch{n.contentWindow.print()}},r.delay||50),a=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,a&&r.delay<1e3?r.delay=1e3:r.delay<100&&(r.delay=100),this.setTimeout(function(){document.body.removeChild(n)},r.delay+50||100),[2,!0]})})},t.prototype.findBackgroundColor=function(e){var r=1,o=Up(e,"background-color");if((o.match(/[^,]*,[^,]*,[^,]*,[ ]?0/)||o=="transparent")&&(r=0),r==0){var n=e.parentElement;return n?this.findBackgroundColor(n):fe("#fff")}else return fe(o,r)},Object.defineProperty(t.prototype,"container",{get:function(){return this.adapter.apply("container",{container:this._container}).container},set:function(e){this._container=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sprite",{get:function(){return this.adapter.apply("sprite",{sprite:this._sprite}).sprite},set:function(e){this._sprite=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extraSprites",{get:function(){return this.adapter.apply("extraSprites",{extraSprites:this._extraSprites}).extraSprites},set:function(e){this._extraSprites=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validateSprites",{get:function(){return this.adapter.apply("validateSprites",{validateSprites:this._validateSprites}).validateSprites},set:function(e){this._validateSprites=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this.adapter.apply("data",{data:this._data}).data},set:function(e){this._data=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataFields",{get:function(){return this._dataFields||this.generateDataFields(),this.adapter.apply("dataFields",{dataFields:this._dataFields}).dataFields},set:function(e){this._dataFields=e,this._dynamicDataFields=!1},enumerable:!0,configurable:!0}),t.prototype.handleDataUpdated=function(){this._dynamicDataFields&&(this._dataFields=void 0);var e=this.data.length>0;this._prevHasData!=e&&(this._prevHasData=e,this.menu&&this.menu.invalidate())},Object.defineProperty(t.prototype,"dateFormatter",{get:function(){return this._dateFormatter||(this._dateFormatter=new _n,this._dateFormatter.language=this.language),this.adapter.apply("dateFormatter",{dateFormatter:this._dateFormatter}).dateFormatter},set:function(e){this._dateFormatter=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dateFormat",{get:function(){return this.adapter.apply("dateFormat",{dateFormat:this._dateFormat}).dateFormat},set:function(e){this._dateFormat=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dateFields",{get:function(){return this._dateFields||(this._dateFields=new Ie),this.adapter.apply("dateFields",{dateFields:this._dateFields}).dateFields},set:function(e){this._dateFields=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numberFormatter",{get:function(){return this._numberFormatter||(this._numberFormatter=new Jl,this._numberFormatter.language=this.language),this.adapter.apply("numberFormatter",{numberFormatter:this._numberFormatter}).numberFormatter},set:function(e){this._numberFormatter=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numberFormat",{get:function(){return this.adapter.apply("numberFormat",{numberFormat:this._numberFormat}).numberFormat},set:function(e){this._numberFormat=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numberFields",{get:function(){return this._numberFields||(this._numberFields=new Ie),this.adapter.apply("numberFields",{numberFields:this._numberFields}).numberFields},set:function(e){this._numberFields=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"durationFormatter",{get:function(){return this._durationFormatter||(this._durationFormatter=new ed,this._durationFormatter.language=this.language),this.adapter.apply("durationFormatter",{durationFormatter:this._durationFormatter}).durationFormatter},set:function(e){this._durationFormatter=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"durationFormat",{get:function(){return this.adapter.apply("durationFormat",{durationFormat:this._durationFormat}).durationFormat},set:function(e){this._durationFormat=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"durationFields",{get:function(){return this._durationFields||(this._durationFields=new Ie),this.adapter.apply("durationFields",{durationFields:this._durationFields}).durationFields},set:function(e){this._durationFields=e},enumerable:!0,configurable:!0}),t.prototype.generateDataFields=function(){var e=this;this._dataFields={},this.data.length&&Z(this.data,function(r){ne(r,function(o,n){T(e._dataFields[o])||(e._dataFields[o]=e.adapter.apply("dataFieldName",{name:o,field:o}).name)})})},t.prototype.isDateField=function(e){return this.adapter.apply("isDateField",{isDateField:this.dateFields.contains(e),field:e}).isDateField},t.prototype.isNumberField=function(e){return this.adapter.apply("isNumberField",{isNumberField:this.numberFields.contains(e),field:e}).isNumberField},t.prototype.isDurationField=function(e){return this.adapter.apply("isDurationField",{isDurationField:this.durationFields.contains(e),field:e}).isDurationField},t.prototype.getContentType=function(e){var r="";switch(e){case"png":case"gif":r="image/"+e;break;case"jpg":r="image/jpeg";break;case"svg":r="image/svg+xml";break;case"csv":r="text/csv";break;case"json":r="application/json";break;case"html":r="text/html";break;case"pdf":case"pdfdata":r="application/pdf";break;case"xlsx":r="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";break}return this.adapter.apply("contentType",{contentType:r,type:e}).contentType},Object.defineProperty(t.prototype,"filePrefix",{get:function(){return this.adapter.apply("filePrefix",{filePrefix:this._filePrefix}).filePrefix},set:function(e){this._filePrefix=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this.adapter.apply("backgroundColor",{backgroundColor:this._backgroundColor}).backgroundColor},set:function(e){this._backgroundColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.adapter.apply("title",{title:this._title}).title},set:function(e){this._title=e},enumerable:!0,configurable:!0}),t.prototype.showPreloader=function(){var e=this.preloader;e&&(e.progress=.5,e.label.text="...")},t.prototype.hidePreloader=function(){var e=this.preloader;e&&(e.progress=1)},Object.defineProperty(t.prototype,"preloader",{get:function(){return this._sprite&&this._sprite.parent&&this._sprite.parent.preloader?this._sprite.parent.preloader:void 0},enumerable:!0,configurable:!0}),t.prototype.showTimeout=function(){this.showModal(this.adapter.apply("timeoutMessage",{message:this.language.translate("Export operation took longer than expected. Something might have gone wrong.")}).message)},t.prototype.hideTimeout=function(){this._timeoutTimeout&&(this.removeDispose(this._timeoutTimeout),this._timeoutTimeout=null),this.hideModal()},Object.defineProperty(t.prototype,"language",{get:function(){return this._language||(this._language=new Yi),this._language},set:function(e){this._language=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modal",{get:function(){return this._modal||(this._modal=new Uu,this._modal.adapter.add("classPrefix",function(e){return e=we.classNamePrefix+e,e})),this._modal},enumerable:!0,configurable:!0}),t.prototype.showModal=function(e,r){this.hideModal(),this.hidePreloader();var o=this.modal;o.container=this.sprite.svgContainer.SVGContainer,o.content=e,o.readerTitle=r,o.open()},t.prototype.hideModal=function(){this._modal&&this.modal.close()},t.prototype._canvg=function(){return et(this,void 0,void 0,function(){var e;return $e(this,function(r){switch(r.label){case 0:return[4,import("./chunk-WKASOAZI.js")];case 1:return e=r.sent(),e.default!=null?[2,e.default]:[2,e]}})})},Object.defineProperty(t.prototype,"canvg",{get:function(){return this._canvg()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pdfmake",{get:function(){return _v==null&&(_v=sM()),_v},enumerable:!0,configurable:!0}),t.prototype._xlsx=function(){return et(this,void 0,void 0,function(){return $e(this,function(e){switch(e.label){case 0:return[4,import("./chunk-ACVMYLYW.js")];case 1:return[2,e.sent()]}})})},Object.defineProperty(t.prototype,"xlsx",{get:function(){return this._xlsx()},enumerable:!0,configurable:!0}),t.prototype.setFormatOptions=function(e,r){this._formatOptions.setKey(e,r)},t.prototype.getFormatOptions=function(e){return this._formatOptions.getKey(e)},Object.defineProperty(t.prototype,"formatOptions",{get:function(){return this._formatOptions},enumerable:!0,configurable:!0}),t.prototype._disablePointers=function(){T(this._spriteInteractionsEnabled)||(this._spriteInteractionsEnabled=this.sprite.interactionsEnabled),this.sprite.interactionsEnabled=!1},t.prototype._releasePointers=function(){T(this._spriteInteractionsEnabled)&&!this._exportRunning&&(this.sprite.interactionsEnabled=this._spriteInteractionsEnabled)},t.prototype.hideNonExportableSprites=function(){var e=this;if(!this._objectsAlreadyHidden){var r=this.sprite.svgContainer;r&&Z(r.nonExportableSprites,function(o){!o.isHidden&&!o.isHiding&&o.visible&&e._hiddenObjects.push(o),o.hide(0)}),this._objectsAlreadyHidden=!0}},t.prototype.restoreNonExportableSprites=function(){this._objectsAlreadyHidden&&(Z(this._hiddenObjects,function(e){e.show(0)}),this._hiddenObjects=[],this._objectsAlreadyHidden=!1)},t.prototype.awaitValidSprites=function(){return et(this,void 0,void 0,function(){var e;return $e(this,function(r){switch(r.label){case 0:return e=[],this.validateSprites.length&&Z(this.validateSprites,function(o,n){o.invalid&&e.push(new Promise(function(s,a){o.events.once("validated",function(l){s()})}))}),e.length?[4,Promise.all(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.processConfig=function(e){P.registeredClasses.ExportMenu=wv,e&&(T(e.menu)&&!T(e.menu.type)&&(e.menu.type="ExportMenu"),T(e.dataFields)&&Qe(e.dataFields)&&(this.dataFields=e.dataFields,delete e.dataFields)),i.prototype.processConfig.call(this,e)},t.XLINK="http://www.w3.org/1999/xlink",t}(Ku);var eg=["fill","fillOpacity","stroke","strokeOpacity","strokeWidth","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin"],Se=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.properties={},e._eventDispatcher=new tv(e),e._bindings={},e._isTemplate=!1,e._isPath=!1,e._inited=!1,e._ready=!1,e.isHiding=!1,e._isHidden=!1,e.isShowing=!1,e.isStandaloneInstance=!1,e._isActive=!1,e._mask=new $n,e._positionPrecision=3,e._language=new $n,e._exporting=new $n,e._exportable=!0,e._bbox={x:0,y:0,width:0,height:0},e.invalid=!1,e.positionInvalid=!1,e.propertyFields={},e.applyOnClones=!1,e._measuredWidthSelf=0,e._measuredHeightSelf=0,e.maxLeft=0,e.maxRight=0,e.maxTop=0,e.maxBottom=0,e.maxLeftSelf=0,e.maxRightSelf=0,e.maxTopSelf=0,e.maxBottomSelf=0,e._isDragged=!1,e._isResized=!1,e._disabled=!1,e._internalDisabled=!1,e._updateDisabled=!1,e._internalDefaultsApplied=!1,e.rollOutDelay=0,e.isBaseSprite=!1,e.shouldClone=!0,e.appeared=!1,e.ex=0,e.ey=0,e.dragWhileResize=!1,e.measureFailed=!1,e.preventShow=!1,e.cloneTooltip=!0,e.className="Sprite",e._disposers.push(e._eventDispatcher),e.uid,e.group=e.paper.addGroup("g"),e.setPropertyValue("scale",1),e.setPropertyValue("rotation",0),e.setPropertyValue("align","none"),e.setPropertyValue("valign","none"),e.setPropertyValue("pixelPerfect",!1),e.setPropertyValue("visible",!0),e.setPropertyValue("tooltipPosition","fixed"),e.setPropertyValue("verticalCenter","none"),e.setPropertyValue("horizontalCenter","none"),e.setPropertyValue("tooltipX",ae(50)),e.setPropertyValue("tooltipX",ae(50)),e.setPropertyValue("marginTop",0),e.setPropertyValue("marginBottom",0),e.setPropertyValue("marginLeft",0),e.setPropertyValue("marginRight",0),e.setPropertyValue("dx",0),e.setPropertyValue("dy",0),e.setPropertyValue("paddingTop",0),e.setPropertyValue("paddingBottom",0),e.setPropertyValue("paddingRight",0),e.setPropertyValue("paddingLeft",0),e.setPropertyValue("togglable",!1),e.setPropertyValue("hidden",!1),e.setPropertyValue("urlTarget","_self"),e.setPropertyValue("alwaysShowTooltip",!1),e.setPropertyValue("showTooltipOn","hover"),e._prevMeasuredWidth=0,e._prevMeasuredHeight=0,e._measuredWidth=0,e._measuredHeight=0,e._isMeasured=!0,e.invalidate(),e.applyTheme(),e._disposers.push(e.events),e._disposers.push(e.group),e._disposers.push(e._mask),e._disposers.push(e._language),e._disposers.push(e._exporting),e._disposers.push(new Ke(function(){ne(e._bindings,function(r,o){o.dispose()})})),e.setPropertyValue("interactionsEnabled",!0),e}return Object.defineProperty(t.prototype,"events",{get:function(){return this._eventDispatcher},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"adapter",{get:function(){return this._adapterO||(this._adapterO=new _t(this)),this._adapterO},enumerable:!0,configurable:!0}),t.prototype.applyTheme=function(){i.prototype.applyTheme.call(this),we.autoSetClassName&&this.setClassName()},t.prototype.getCurrentThemes=function(){var e=this._themes;if(e)return e;var r=this._parent;return r?r.getCurrentThemes():P.themes},t.prototype.applyInternalDefaults=function(){this._internalDefaultsApplied=!0},t.prototype.invalidate=function(){this.disabled||this._isTemplate||this.__disabled||this.invalid||(this.invalid=!0,P.addToInvalidSprites(this),Ee.requestFrame())},t.prototype.validate=function(){this.dispatchImmediately("beforevalidated"),this._internalDefaultsApplied||this.applyInternalDefaults(),this.beforeDraw(),this.draw(),this.invalid=!1,P.removeFromInvalidSprites(this),this.afterDraw()},t.prototype.invalidatePosition=function(){this.disabled||this._isTemplate||this.positionInvalid||(this.positionInvalid=!0,P.addToInvalidPositions(this),Ee.requestFrame())},t.prototype.validatePosition=function(){var e=this.pixelX,r=this.pixelY,o=this.dx,n=this.dy,s=e+o,a=r+n;this._updateDisabled&&(this._internalDisabled?this.group.attr({display:"none"}):this.disabled||this.removeSVGAttribute("display"),this._updateDisabled=!1);var l=this.measure(),d=this.group.transformString;this.group.moveTo({x:s,y:a}),this.group.rotation=this.rotation,this.nonScaling?this.group.scale=this.scale/this.globalScale:this.group.scale=this.scale,(d!=this.group.transformString||l)&&(d==null?this.dispatch("transformed"):this.dispatchImmediately("transformed"),this.dispatch("positionchanged"),(this.showTooltipOn=="hit"||this.showTooltipOn=="always")&&this.updateTooltipPosition()),e+o==s&&r+n==a&&(P.removeFromInvalidPositions(this),this.positionInvalid=!1);var u=this._maskRectangle;u&&this._clipElement.moveTo({x:u.x-e,y:u.y-r})},t.prototype.beforeDraw=function(){},t.prototype.draw=function(){},t.prototype.afterDraw=function(){var e,r;if((this.isMeasured||this.horizontalCenter!=="none"||this.verticalCenter!=="none")&&this.measureElement(),this._inited)this.dispatch("validated");else{if(this._adapterO)try{for(var o=Zv(this._adapterO.keys()),n=o.next();!n.done;n=o.next()){var s=n.value;switch(s){case"mask":case"fill":case"opacity":case"fillOpacity":case"stroke":case"strokeOpacity":case"strokeWidth":case"shapeRendering":case"strokeDasharray":case"strokeDashoffset":case"strokeLinecap":case"strokeLinejoin":case"textDecoration":case"fontSize":case"fontFamily":case"fontWeight":this[s]=this[s];break}}}catch(a){e={error:a}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}this.applyFilters(),this.visible=this.visible,this.interactionsEnabled=this.getPropertyValue("interactionsEnabled"),this._inited=!0,this.showOnInit||(this.appeared=!0),this.hidden&&this.hide(0),this.applyMask(),this.dispatch("validated"),this.dispatch("inited"),this.dispatchReady()}this.showTooltipOn=="always"&&(this.visible&&!this.disabled&&!this.__disabled?this.showTooltip():this.hideTooltip(0))},t.prototype.dispatchReady=function(){this.isReady()||(this._ready=!0,this.dispatch("ready"))},t.prototype.reinit=function(){this._inited=!1,this.setState(this.defaultState),this.invalidate()},t.prototype.handleGlobalScale=function(){this.dispatch("globalscalechanged"),this.nonScalingStroke&&(this.strokeWidth=this.strokeWidth),this.nonScaling&&this.validatePosition(),this.updateFilterScale()},t.prototype.updateFilterScale=function(){var e=this;de(this.filters.iterator(),function(r){r.scale=e.globalScale})},t.prototype.removeFromInvalids=function(){P.removeFromInvalidSprites(this),P.removeFromInvalidPositions(this)},t.prototype.copyFrom=function(e){var r=this;i.prototype.copyFrom.call(this,e),this.isMeasured=e.isMeasured,this.states.copyFrom(e.states),e.filters.length>0&&e.filters.each(function(o){r.filters.push(o.clone())}),e._adapterO&&this.adapter.copyFrom(e._adapterO),e._interaction&&this.interactions.copyFrom(e.interactions),e._plugins&&this.plugins.copyFrom(e.plugins),this.configField=e.configField,this.applyOnClones=e.applyOnClones,this.disabled=e.disabled,this.virtualParent=e.virtualParent,this.exportable=e.exportable,e._tooltip&&(this._tooltip?this._tooltip.copyFrom(e.tooltip):e.cloneTooltip?this.tooltip=e.tooltip.clone():this._tooltip=e.tooltip),this._showSystemTooltip=e.showSystemTooltip,bn(e.propertyFields,this.propertyFields),bn(e.properties,this),e.fillModifier&&(this.fillModifier=e.fillModifier.clone()),e.strokeModifier&&(this.strokeModifier=e.strokeModifier.clone()),e.focusFilter&&(this.focusFilter=e.focusFilter.clone())},t.prototype.dispose=function(){if(!this.isDisposed()){if(this.showTooltipOn=="always"&&this.tooltip&&this.tooltip.hide(),this.dispatchImmediately("beforedisposed"),this.isBaseSprite){if(this.htmlContainer)for(;this.htmlContainer.childNodes.length>0;)this.htmlContainer.removeChild(this.htmlContainer.firstChild);this.isBaseSprite=!1}if(i.prototype.dispose.call(this),this._adapterO&&this._adapterO.clear(),this.applyOnClones&&this._clones)for(var e=this._clones.length-1;e>=0;e--){var r=this._clones.getIndex(e);r.dispose()}this._svgContainer&&this._svgContainer.dispose(),this._interactionDisposer&&(this._interactionDisposer.dispose(),this._interactionDisposer=void 0),this._urlDisposer&&this._urlDisposer.dispose(),this.removeFromInvalids(),this.element&&this.element.dispose(),this.group&&this.group.dispose(),this._numberFormatter&&this._numberFormatter.dispose(),this._focusFilter&&this._focusFilter.dispose();var o=this.stroke;o&&!(o instanceof Ue)&&o.dispose&&(this.clonedFrom&&this.clonedFrom.stroke==o||o.dispose());var n=this.fill;if(n&&!(n instanceof Ue)&&n.dispose&&(this.clonedFrom&&this.clonedFrom.fill==n||n.dispose()),T(this.id)&&this.map.removeKey(this.id),this.parent=void 0,this._filters)for(;this._filters.length>0;){var s=this._filters.getIndex(0);s.dispose(),this._filters.removeValue(s)}this._alwaysShowDisposers=void 0}},Object.defineProperty(t.prototype,"isTemplate",{get:function(){return this._isTemplate},set:function(e){e=ot(e),this._isTemplate!=e&&(this._isTemplate=e,this instanceof _e&&de(this.children.iterator(),function(r){r.isTemplate=e}),e?(this.parent=this._parent,this.removeFromInvalids()):this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showSystemTooltip",{get:function(){return T(this._showSystemTooltip)?this._showSystemTooltip:this.virtualParent?this.virtualParent.showSystemTooltip:this._parent?this._parent.showSystemTooltip:!1},set:function(e){e=ot(e),this._showSystemTooltip!=e&&(this._showSystemTooltip=e,this.applyAccessibility())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topParent",{get:function(){if(this._topParent)return this._topParent;if(this._parent)return this._parent.topParent},set:function(e){this._topParent=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},set:function(e){if(!this._isTemplate){this.paper;var r=this._parent;r!=e&&(r&&r.children.removeValue(this),this._parent=e,e?(this.topParent=e.topParent,e.isTemplate&&(this.isTemplate=!0),this.baseId=e.baseId,e.children.push(this),this._tooltip&&!this._tooltipContainer&&(this._tooltip.parent=e.tooltipContainer),this._dataItem||(this.dataItem=e.dataItem),this.handleAlwaysShowTooltip(),this.dataItem&&this.applyAccessibility(),this.dispatchImmediately("parentset")):this.topParent=void 0)}},enumerable:!0,configurable:!0}),t.prototype.handleAlwaysShow=function(){this.showTooltip()},t.prototype.handleAlwaysShowTooltip=function(){var e=this,r=this._alwaysShowDisposers;if(r&&Z(r,function(n){n.dispose()}),this._alwaysShowDisposers=[],this.showTooltipOn=="always")for(;e!=null;){var o=e.events.on("visibilitychanged",this.handleAlwaysShow,this,!1);this.addDisposer(o),this._alwaysShowDisposers.push(o),e=e.parent}},Object.defineProperty(t.prototype,"virtualParent",{get:function(){return this._virtualParent},set:function(e){this._virtualParent=e,this.dataItem&&this.applyAccessibility()},enumerable:!0,configurable:!0}),t.prototype.appendDefs=function(){this.filterElement&&this.paper.appendDef(this.filterElement);var e=this.fill;e&&e.element&&this.paper.appendDef(e.element);var r=this.stroke;if(r&&r.element&&this.paper.appendDef(r.element),this.fillModifier&&this.fill instanceof Ue){var o=this.fillModifier.modify(this.fill);o&&o.element&&this.paper.appendDef(o.element)}if(this.strokeModifier&&this.stroke instanceof Ue){var n=this.strokeModifier.modify(this.stroke);n&&n.element&&this.paper.appendDef(n.element)}this._clipPath&&this.paper.appendDef(this._clipPath),this._exportable===!1&&(this.exportable=!1)},Object.defineProperty(t.prototype,"map",{get:function(){var e=this.topParent;return e?e.map:(this._map||(this._map=new Be),this._map)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delayedMap",{get:function(){var e=this.topParent;return e?e.delayedMap:(this._delayedMap||(this._delayedMap=new Be),this._delayedMap)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(e){if(this._id!=e){if(this._id=e,this.map.hasKey(e))throw Error("Duplicate id ("+e+") used on multiple objects.");this.map.setKey(e,this),we.autoSetClassName&&this.setClassName()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dom",{get:function(){return this.group.node},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paper",{get:function(){if(this._paper)return this._paper;var e=this._parent;return e?e.paper:Ao()},set:function(e){this.setPaper(e)},enumerable:!0,configurable:!0}),t.prototype.setPaper=function(e){var r=this._paper;return r!=e?(this._paper=e,this.appendDefs(),!0):!1},Object.defineProperty(t.prototype,"htmlContainer",{get:function(){if(this._htmlContainer)return this._htmlContainer;var e=this._parent;if(e)return e.htmlContainer},set:function(e){this._htmlContainer=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titleElement",{get:function(){return this._titleElement||(this._titleElement=this.paper.add("title"),this.group.add(this._titleElement)),this._titleElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"descriptionElement",{get:function(){return this._descriptionElement||(this._descriptionElement=this.paper.add("desc"),this.group.add(this._descriptionElement)),this._descriptionElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._filters||(this._filters=new Ie,this._disposers.push(this._filters.events.onAll(this.applyFilters,this)),this._disposers.push(new St(this._filters))),this._filters},enumerable:!0,configurable:!0}),t.prototype.setSVGAttributes=function(){this.fill=this.fill,this.opacity=this.opacity,this.fillOpacity=this.fillOpacity,this.stroke=this.stroke,this.strokeOpacity=this.strokeOpacity,this.shapeRendering=this.shapeRendering,this.strokeDasharray=this.strokeDasharray,this.strokeDashoffset=this.strokeDashoffset,this.strokeLinecap=this.strokeLinecap,this.strokeLinejoin=this.strokeLinejoin,this.focusable=this.focusable,this.tabindex=this.tabindex,this.role=this.role},t.prototype.setSVGAttribute=function(e){this.group.attr(e)},t.prototype.removeSVGAttribute=function(e){this.group.removeAttr(e)},t.prototype.setClassName=function(){var e=this.className,r=we.classNamePrefix;this.element&&this.element.addClass(r+e),this.group.addClass(r+e+"-group"),T(this.id)&&this.group.addClass(r+this.id),this.userClassName&&this.group.addClass(this.userClassName)},t.prototype.uidAttr=function(){return this.setSVGAttribute({id:this.uid}),this.uid},t.prototype.updateClipPath=function(){var e=this._clipElement;e&&e.moveTo({x:this.mask.pixelX,y:this.mask.pixelY})},t.prototype.createClipPath=function(){if(!this._clipPath){this._clipPath=this.paper.addGroup("clipPath"),this.paper.appendDef(this._clipPath),this._disposers.push(this._clipPath);var e=P.getUniqueId();this._clipPath.attr({id:e}),this.group.attr({"clip-path":'url("'+ya()+e+'")'})}},t.prototype.applyMask=function(){var e=this.mask;if(this._clipPath&&e)if(e instanceof _e){this._clipElement.attr({width:ze(0,e.pixelWidth),height:ze(0,e.pixelHeight)});var r=Gp({x:e.pixelX,y:e.pixelY},e.parent,this);this._clipPath.x=r.x,this._clipPath.y=r.y}else e.element&&e.element!=this._clipElement&&(this._clipElement=e.element,this._clipPath.add(this._clipElement)),this._clipPath.scale=e.scale,this._clipPath.x=e.pixelX,this._clipPath.y=e.pixelY,this._clipPath.rotation=e.rotation},t.prototype.applyFilters=function(){var e=this;if(this._filters&&this._filters.length>0){var r=100,o=100;this.filterElement?this.filterElement.removeChildNodes():(this.filterElement=this.paper.addGroup("filter"),this._disposers.push(this.filterElement)),this.paper.appendDef(this.filterElement);var n="filter-"+this.uid;this.filterElement.attr({id:n}),de(this.filters.iterator(),function(l){l.sprite=e,l.paper=e.paper,e.filterElement.attr({filterUnits:l.filterUnits}),l.appendPrimitives(e.filterElement),l.width>r&&(r=l.width),l.height>o&&(o=l.height),l.scale=e.globalScale});var s=r+"%",a=o+"%";this.filterElement.attr({width:s,height:a,x:-(r-100)/2+"%",y:-(o-100)/2+"%"}),this.group.attr({filter:'url("'+ya()+n+'")'})}else this.filterElement&&(this.group.removeAttr("filter"),this.filterElement.removeChildNodes())},t.prototype.removeClipPath=function(){this._clipPath&&(this.removeDispose(this._clipPath),this._clipPath=void 0)},t.prototype.setElement=function(e){this.element=e,this.setSVGAttributes(),this.applyAccessibility()},Object.defineProperty(t.prototype,"element",{get:function(){return this._element},set:function(e){this.removeElement(),this._element=e,this.group.add(e),e.node instanceof SVGPathElement&&(this._isPath=!0),this.invalid||this.validate(),we.autoSetClassName&&this.setClassName()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"svgContainer",{get:function(){if(this._svgContainer)return this._svgContainer;if(this._parent)return this._parent.svgContainer},set:function(e){this._svgContainer=e},enumerable:!0,configurable:!0}),t.prototype.measureElement=function(){if(this.element)if(this.definedBBox)this._bbox=this.definedBBox;else{var e=this.element.getBBox();this._bbox={x:e.x,y:e.y,width:e.width,height:e.height}}},t.prototype.updateCenter=function(){if(this.element){var e=this.element.transformString,r=this.bbox,o=0,n=0,s=r.x,a=r.y,l=r.width,d=r.height,u=this.pixelPaddingLeft,c=this.pixelPaddingRight,h=this.pixelPaddingTop,p=this.pixelPaddingBottom,f=ze(l+u+c,this.pixelWidth),C=ze(d+h+p,this.pixelHeight),b=r.x,x=r.x+f,S=r.y,R=r.y+C,I=this.horizontalCenter,F=this.verticalCenter;switch(I){case"none":o=s+u;break;case"left":o=u;break;case"middle":o=u-(l+c+u)/2;break;case"right":o=-c-l;break}switch(F){case"none":n=a+h;break;case"top":n=h;break;case"middle":n=h-(d+p+h)/2;break;case"bottom":n=-p-d;break}this._measuredHeight=C,this._measuredWidth=f;var L=oe(o-s,this._positionPrecision,!0),V=oe(n-a,this._positionPrecision,!0);this.ex=L-u,this.ey=V-h,this.maxLeft=b+L-u,this.maxRight=x+L-u,this.maxTop=S+V-h,this.maxBottom=R+V-h,this.pixelPerfect&&we.pixelPerfectPrecision==0&&(L-=.5,V-=.5),this.element.moveTo({x:L,y:V}),e!=this.element.transformString&&this.dispatchImmediately("transformed")}},t.prototype.measure=function(){this.updateCenter();var e=this._measuredWidth,r=this._measuredHeight,o=this.maxLeft,n=this.maxRight,s=this.maxTop,a=this.maxBottom;this._measuredWidthSelf=e,this._measuredHeightSelf=r;var l=this._positionPrecision;if(this.maxLeftSelf=this.maxLeft,this.maxRightSelf=this.maxRight,this.maxTopSelf=this.maxTop,this.maxBottomSelf=this.maxBottom,this.rotation!==0||this.scale!==1||this.nonScaling){this.nonScalingStroke&&(this.strokeWidth=this.strokeWidth);var d=this.paper.svg,u=d.createSVGMatrix(),c=this.rotation,h=this.scale;this.nonScaling&&(h=this.scale/this.globalScale),u.a=Ve(c)*h,u.c=-Ae(c)*h,u.e=0,u.b=Ae(c)*h,u.d=Ve(c)*h,u.f=0;var p=d.createSVGPoint();p.x=o,p.y=s;var f=d.createSVGPoint();f.x=n,f.y=s;var C=d.createSVGPoint();C.x=n,C.y=a;var b=d.createSVGPoint();b.x=o,b.y=a;var x=p.matrixTransform(u),S=f.matrixTransform(u),R=C.matrixTransform(u),I=b.matrixTransform(u);o=Math.min(x.x,S.x,R.x,I.x),n=Math.max(x.x,S.x,R.x,I.x),s=Math.min(x.y,S.y,R.y,I.y),a=Math.max(x.y,S.y,R.y,I.y),e=n-o,r=a-s,this.maxLeft=oe(o,l,!0),this.maxRight=oe(n,l,!0),this.maxTop=oe(s,l,!0),this.maxBottom=oe(a,l,!0)}return this._measuredWidth=oe(e,l,!0),this._measuredHeight=oe(r,l,!0),this._measuredWidth!=this._prevMeasuredWidth||this._measuredHeight!=this._prevMeasuredHeight?(this._prevMeasuredHeight=this._measuredHeight,this._prevMeasuredWidth=this._measuredWidth,this.dispatch("sizechanged"),(this.isHover||this.showTooltipOn=="hit"||this.showTooltipOn=="always")&&this.tooltip&&this.tooltip.visible&&(T(this.tooltipText)||T(this.tooltipHTML))&&this.updateTooltipPosition(),!0):!1},t.prototype.insertBefore=function(e){var r=this._parent;if(r){var o=r.children.indexOf(e);o!==-1&&(r.children.moveValue(this,o),r.sortChildren())}return this},t.prototype.insertAfter=function(e){var r=this._parent;if(r){var o=r.children.indexOf(e);o!==-1&&(r.children.moveValue(this,o+1),r.sortChildren())}return this},t.prototype.removeElement=function(){this._element&&(this.removeDispose(this._element),this._element=void 0)},t.prototype.getRelativeX=function(e){return e instanceof Me?e.value:this._parent?e/this._parent.innerWidth:0},t.prototype.getRelativeY=function(e){return e instanceof Me?e.value:this._parent?e/this._parent.innerHeight:0},t.prototype.getPixelX=function(e){var r=0;if(M(e))r=e;else if(e instanceof Me){var o=e.value;this._parent&&(r=oe(this._parent.innerWidth*o,this._positionPrecision,!0))}return r},t.prototype.getPixelY=function(e){var r=0;if(M(e))r=e;else if(e instanceof Me){var o=e.value;this._parent&&(r=oe(this._parent.innerHeight*o,this._positionPrecision,!0))}return r},t.prototype.moveTo=function(e,r,o,n){this.isDragged&&!n||(e&&(M(e.x)&&this.setPropertyValue("x",oe(e.x,this._positionPrecision,!0)),M(e.y)&&this.setPropertyValue("y",oe(e.y,this._positionPrecision,!0))),M(r)&&(this.rotation=r),M(o)&&(this.scale=o),this.invalidatePosition())},Object.defineProperty(t.prototype,"mask",{get:function(){return this._adapterO?this._adapterO.apply("mask",this._mask.get()):this._mask.get()},set:function(e){var r=this;this._mask.get()!==e&&(e?(this.createClipPath(),e instanceof _e?this._clipElement=this.paper.add("rect"):(e.isMeasured=!1,e.element&&(this._clipElement=e.element)),this._clipElement&&this._clipPath.add(this._clipElement),this._mask.set(e,new tt([e.events.on("maxsizechanged",function(){r.inited&&r.applyMask()},void 0,!1),e.events.on("validated",this.applyMask,this,!1),e.events.on("positionchanged",this.applyMask,this,!1)])),this.applyMask()):(this._mask.reset(),this.group.removeAttr("clip-path"),this.removeClipPath()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maskRectangle",{get:function(){return this._maskRectangle},set:function(e){e?(this.createClipPath(),this._clipElement||(this._clipElement=this.paper.add("rect"),this._clipPath.add(this._clipElement)),this._clipElement.attr({width:e.width,height:e.height})):(this.removeClipPath(),this._clipElement=void 0),this._maskRectangle=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isMeasured",{get:function(){return this._isMeasured},set:function(e){e=ot(e),e||(this._measuredWidth=0,this._measuredHeight=0),this._isMeasured!=e&&(this._isMeasured=e,this.invalidatePosition())},enumerable:!0,configurable:!0}),t.prototype.hitTest=function(e){this.invalid&&this.validate(),e.invalid&&e.validate();var r=this.pixelX+this.maxLeft,o=this.pixelY+this.maxTop,n=r+this.maxRight,s=o+this.maxBottom,a=e.pixelX+e.maxLeft,l=e.pixelY+e.maxTop,d=a+e.maxRight,u=l+e.maxBottom;return!(a>n||d<r||l>s||u<o)},Object.defineProperty(t.prototype,"inited",{get:function(){return this._inited},enumerable:!0,configurable:!0}),t.prototype.isReady=function(){return this._ready},Object.defineProperty(t.prototype,"states",{get:function(){if(!this._states){var e=new wa;this._states=new Wl(e),this._disposers.push(this._states.events.on("insertKey",this.processState,this,!1)),this._disposers.push(this._states.events.on("setKey",this.processState,this,!1)),this._disposers.push(new ao(this._states)),this._disposers.push(e)}return this._states},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hiddenState",{get:function(){if(!this.states.getKey("hidden")){var e=this.states.create("hidden");e.properties.opacity=0,e.properties.visible=!1}return this.states.getKey("hidden")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultState",{get:function(){if(!this.states.getKey("default")){var e=this.states.create("default");e.properties.opacity=1}return this.states.getKey("default")},enumerable:!0,configurable:!0}),t.prototype.processState=function(e){var r=e.newValue;if(r.sprite=this,r.name=e.key,(this.states.hasKey("hover")||this.showTooltipOn=="hover"&&(T(this.tooltipHTML)||T(this.tooltipText)))&&(this.hoverable=!0),(this.states.hasKey("down")||this.showTooltipOn=="hover"&&(T(this.tooltipHTML)||T(this.tooltipText)))&&(this.clickable=!0),this.states.hasKey("focus")&&(this.focusable=!0),this.applyOnClones)for(var o=this.clones.values,n=o.length,s=0;s<n;++s){var a=o[s];a.isDisposed()||a.states.setKey(r.name,r)}},Object.defineProperty(t.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new lo(this._animations))),this._animations},enumerable:!0,configurable:!0}),t.prototype.getSvgPoint=function(e){try{var r=this.htmlContainer.getBoundingClientRect();return{x:e.x-r.left,y:e.y-r.top}}catch{return e}},t.prototype.animate=function(e,r,o){return new Fi(this,e,r,o).start()},t.prototype.setState=function(e,r,o){var n;if(e instanceof wa)this.states.setKey(e.name,e),n=e;else if(n=this.states.getKey(e),!n)return;if(n.name=="hover"){if(this.isHidden)return;this.isHover=!0}return n.name=="hidden"?this.isHiding=!0:this.visible||this.setVisibility(n.properties.visible||this.defaultState.properties.visible),n.name=="active"&&(this.isActive=!0),M(r)||(r=n.transitionDuration),T(o)||(o=n.transitionEasing),this.transitTo(n,r,o)},t.prototype.applyCurrentState=function(e){var r=this.setState(this.defaultState,e);return this.isHover&&(r=this.setState("hover",e)),this.isDown&&this.interactions.downPointers.length&&(r=this.setState("down",e)),this.isFocused=this.isFocused,this.isActive&&(r=this.setState("active",e),this.isHover&&this.states.hasKey("hoverActive")&&(r=this.setState("hoverActive",e))),r},t.prototype.transitTo=function(e,r,o){var n=this,s=[],a=e.allValues,l;if(ne(a,function(u,c){var h=n[u];if(c!=h&&n.defaultState.properties[u]==null&&(n.defaultState.properties[u]=h),c!="__unset"){var p={from:h,to:c,property:u};s.push(p)}}),s.length>0&&(l=this.animate(s,r,o),l&&!l.isFinished()?this._disposers.push(l.events.on("animationended",function(){n.dispatchImmediately("transitionended")})):this.dispatchImmediately("transitionended")),e.filters.length>0){var d=[];de(e.filters.iterator(),function(u){var c=u.clone();d.push(c);var h=[];de(n.filters.iterator(),function(p){p.className==c.className&&(Pp(n.defaultState.filters.iterator(),function(f){return f.className===c.className})||n.defaultState.filters.push(p),ne(c.properties,function(f,C){var b=p.properties[f];b!=C&&h.push({property:f,from:b,to:C})}))}),c.animate(h,r,o)}),this.filters.clear(),this.filters.pushAll(d)}return l},t.prototype.isInTransition=function(){return this.animations.length>0},Object.defineProperty(t.prototype,"isHover",{get:function(){return this.isInteractive()?this.interactions.isHover:!1},set:function(e){e=ot(e),e!==this.isHover&&this.isInteractive()&&(this.interactions.isHover=e,e?this.handleOver():(this.interactions.isRealHover=!1,this.handleOut()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDragged",{get:function(){return this._isDragged},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isResized",{get:function(){return this._isResized},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDown",{get:function(){return this.isInteractive()?this.interactions.isDown:!1},set:function(e){e=ot(e),this.isInteractive()&&this.isDown!=e&&(this.interactions.isDown=e,e?this.handleDown():this.handleUp())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFocused",{get:function(){return this.isInteractive()?this.interactions.isFocused:!1},set:function(e){e=ot(e),this.focusable&&this.isFocused!=e&&this.isInteractive()&&(this.interactions.isFocused=e,e===!0?this.handleFocus():this.handleBlur())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},set:function(e){this.setActive(e)},enumerable:!0,configurable:!0}),t.prototype.setActive=function(e){e=ot(e),this._isActive!==e&&(this._isActive=e,e&&this.states.hasKey("active")?(this.setState("active"),this.isHover&&this.states.hasKey("hoverActive")&&this.setState("hoverActive")):this.applyCurrentState(),this.dispatchImmediately("toggled"))},Object.defineProperty(t.prototype,"disabled",{get:function(){var e=this.getPropertyValue("disabled");return T(e)?e:this.virtualParent?this.virtualParent.disabled:this._parent?this._parent.disabled:!1},set:function(e){this.setDisabled(e)},enumerable:!0,configurable:!0}),t.prototype.setDisabled=function(e){e=ot(e);var r=this.getPropertyValue("disabled");if(r!=e){if(this.setPropertyValue("disabled",e,!0),e)this.parent=this._parent,this.removeFromInvalids(),this.group.attr({display:"none"}),this.dispatch("disabled");else{if(this._parent){var o=this._parent.element;o.hasChild(this.group)||o.add(this.group)}this instanceof _e?(this.deepInvalidate(),this._background&&this._background.invalidate()):this.invalidate(),this.__disabled||this.removeSVGAttribute("display"),this.dispatch("enabled")}return this.dispatch("transformed"),Ee.requestFrame(),!0}return!1},Object.defineProperty(t.prototype,"__disabled",{get:function(){return this._internalDisabled},set:function(e){this._internalDisabled!=e&&(this._internalDisabled=e,this._updateDisabled=!0,this.invalidatePosition(),e||this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numberFormatter",{get:function(){return this._numberFormatter?this._numberFormatter:this.virtualParent?this.virtualParent.numberFormatter:this._parent?this._parent.numberFormatter:(this._numberFormatter=new Jl,this._numberFormatter.language=this.language,this.numberFormatter)},set:function(e){this._numberFormatter=e,this._numberFormatter.language=this.language},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dateFormatter",{get:function(){return this._dateFormatter?this._dateFormatter:this.virtualParent?this.virtualParent.dateFormatter:this._parent?this._parent.dateFormatter:(this._dateFormatter=new _n,this._dateFormatter.language=this.language,this.dateFormatter)},set:function(e){this._dateFormatter=e,this._dateFormatter.language=this.language},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"durationFormatter",{get:function(){return this._durationFormatter?this._durationFormatter:this.virtualParent?this.virtualParent.durationFormatter:this._parent?this._parent.durationFormatter:(this._durationFormatter=new ed,this._durationFormatter.language=this.language,this.durationFormatter)},set:function(e){this._durationFormatter=e,this._durationFormatter.language=this.language},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"language",{get:function(){var e=this._language.get();return e||(this.virtualParent?this.virtualParent.language:this._parent?this._parent.language:(e=new Yi,this.language=e,e))},set:function(e){var r=this;this._language.get()!==e&&this._language.set(e,e.events.on("localechanged",function(o){if(r._numberFormatter&&(r._numberFormatter.language=r.language),r._dateFormatter&&(r._dateFormatter.language=r.language),r._durationFormatter&&(r._durationFormatter.language=r.language),r._exporting.get()){var n=r._exporting.get();n.numberFormatter.language=r.language,n.dateFormatter.language=r.language,n.durationFormatter.language=r.language,n.language=r.language}r instanceof _e&&r.deepInvalidate()}))},enumerable:!0,configurable:!0}),t.prototype.populateString=function(e,r){if(T(e)){e=kl(e),e=sr().escape(e);var o=e.match(/\{([^}]+)\}/g),n=void 0;if(o)for(n=0;n<o.length;n++){var s=o[n].replace(/\{([^}]+)\}/,"$1"),a=this.getTagValue(s,"",r);T(a)||(a=""),e=e.split(o[n]).join(a)}e=sr().unescape(e)}else e="";return this._adapterO?this._adapterO.apply("populateString",e):e},t.prototype.getTagValue=function(e,r,o){var n;T(o)||(o=this.dataItem);for(var s=[],a=/([^.]+)\(([^)]*)\)|([^.]+)/g,l;l=a.exec(e),l!==null;)if(l[3])s.push({prop:l[3]});else{var d=[];if(Op(l[2])!="")for(var u=/'([^']*)'|"([^"]*)"|([0-9\-]+)/g,c=void 0;c=u.exec(l[2]),c!==null;)d.push(c[1]||c[2]||c[3]);s.push({method:l[1],params:d})}if(o){n=this.getTagValueFromObject(s,o.values),(!T(n)||Qe(n))&&(n=this.getTagValueFromObject(s,o));var h=o.dataContext;!T(n)&&h&&(n=this.getTagValueFromObject(s,o.dataContext),T(n)||(n=this.getTagValueFromObject([{prop:e}],h)),!T(n)&&h.dataContext&&(n=this.getTagValueFromObject(s,h.dataContext))),!T(n)&&o.component&&o.component.dataItem!==o&&(n=o.component.getTagValue(e,r))}return T(n)||(n=this.getTagValueFromObject(s,this.populateStringFrom||this)),!T(n)&&this._parent&&(n=this._parent.getTagValue(e,r)),n},t.prototype.getTagValueFromObject=function(e,r,o){for(var n=r,s=!1,a=0,l=e.length;a<l;a++){var d=e[a];if(d.prop){if(n=n[d.prop],!T(n))return}else switch(d.method){case"formatNumber":var u=Lu(n);T(u)&&(n=this.numberFormatter.format(u,o||d.params[0]||void 0),s=!0);break;case"formatDate":var c=void 0;if(je(n)?c=this.dateFormatter.parse(n):c=Lp(n),!fs(c)||Nl(c.getTime()))return;T(c)&&(n=this.dateFormatter.format(c,o||d.params[0]||void 0),s=!0);break;case"formatDuration":var h=Lu(n);T(h)&&(n=this.durationFormatter.format(h,o||d.params[0]||void 0,d.params[1]||void 0),s=!0);break;case"urlEncode":case"encodeURIComponent":n=encodeURIComponent(n);break;default:n[d.method]&&n[d.method].apply(this,d.params);break}}if(!s){var p=[{method:"",params:o}];if(!T(o))M(n)?(p[0].method="formatNumber",p[0].params=""):fs(n)&&(p[0].method="formatDate",p[0].params="");else{var f=wS(o);f===fa?p[0].method="formatNumber":f===ma?p[0].method="formatDate":f===Ul&&(p[0].method="formatDuration")}p[0].method&&(n=this.getTagValueFromObject(p,n))}return n},Object.defineProperty(t.prototype,"dataItem",{get:function(){if(!this._dataItem){if(this.virtualParent)return this.virtualParent.dataItem;if(this._parent)return this._parent.dataItem}return this._dataItem},set:function(e){this.setDataItem(e)},enumerable:!0,configurable:!0}),t.prototype.setDataItem=function(e){var r=this;if(this._dataItem!=e){if(this._dataItem=e,e){if(this.configField){var o=e.dataContext;o&&(this.config=o[this.configField],!this.config&&o.dataContext&&(this.config=o.dataContext[this.configField]))}var n=e.dataContext;if(n){var s=n.dataContext;ne(this.propertyFields,function(a,l){if(T(n[l])){var d=r;d[a]=n[l]}else if(s){var u=s[l];if(T(u)){var d=r;d[a]=u}}})}}this.invalidate()}},t.prototype.getPropertyValue=function(e){var r=this.properties[e];return this._isTemplate||(this._adapterO&&(r=this._adapterO.apply(e,r)),r=Ru.applyAll(this,e,r)),r},t.prototype.setColorProperty=function(e,r,o){var n=this.properties[e];return r instanceof Ue&&n instanceof Ue&&r.toString()==n.toString()?!1:this.setPropertyValue(e,r,o)},t.prototype.setPercentProperty=function(e,r,o,n,s,a){if(r=F0(r),M(r))return M(s)&&(r=oe(r,s,a)),this.setPropertyValue(e,r,o,n);var l=this.properties[e];return r instanceof Me&&l instanceof Me&&r.value==l.value?!1:this.setPropertyValue(e,r,o,n)},t.prototype.setPropertyValue=function(e,r,o,n){if(this.properties[e]!==r&&!this.isDisposed()){if(this.properties[e]=r,this.events.isEnabled("propertychanged")){var s={type:"propertychanged",target:this,property:e};this.events.dispatchImmediately("propertychanged",s)}if(o&&this.invalidate(),n&&this.invalidatePosition(),this.applyOnClones)for(var a=this.clones.values,l=a.length,d=0;d<l;++d){var u=a[d];u.isDisposed()||(u[e]=r)}return!0}return!1},t.prototype.bind=function(e,r,o,n){var s=this;o===void 0&&(o=e),T(this._bindings[e])&&this._bindings[e].dispose(),this[e]=r[o],this._bindings[e]=r.events.on("propertychanged",function(a){if(a.property===o){var l=r[o];n&&(l=n(l)),s[e]=l}})},t.prototype.observe=function(e,r,o,n){var s=this;return new tt(Hn(bp(e),function(a){return s.events.on("propertychanged",function(l){l.property===a&&r.call(o,l)},o,n)}))},t.prototype.applyAccessibility=function(){var e=this.readerTitle,r=this.readerDescription,o=this.role,n=this.readerHidden,s=this.readerChecked,a=this.readerControls,l=this.readerLive,d=this.readerOrientation,u=this.readerValueNow,c=this.readerValueText,h=[],p=[],f=this.readerLabelledBy;f&&h.push(f);var C=this.readerDescribedBy;if(C&&p.push(C),e)if(h.length||this.showSystemTooltip){var b=this.titleElement,x=this.uid+"-title";b.node.textContent!=e&&(b.node.textContent=e,b.attr({id:x})),h.push(x)}else this._titleElement&&(this.group.removeElement(this._titleElement),this._titleElement=void 0),this.setSVGAttribute({"aria-label":e});else this.removeSVGAttribute("aria-label"),this._titleElement&&(this.group.removeElement(this._titleElement),this._titleElement=void 0);if(r){var S=this.descriptionElement,R=this.uid+"-description";S.node.textContent!=r&&(S.node.textContent=r,S.attr({id:R})),p.push(R)}else this._descriptionElement&&(this.group.removeElement(this._descriptionElement),this._descriptionElement=void 0);h.length?this.setSVGAttribute({"aria-labelledby":h.join(" ")}):this.removeSVGAttribute("aria-labelledby"),p.length?this.setSVGAttribute({"aria-describedby":p.join(" ")}):this.removeSVGAttribute("aria-describedby"),o?this.setSVGAttribute({role:o}):this.removeSVGAttribute("role"),n?this.setSVGAttribute({"aria-hidden":"true"}):this.removeSVGAttribute("aria-hidden"),s?this.setSVGAttribute({"aria-checked":"true"}):s===!1?this.setSVGAttribute({"aria-checked":"false"}):this.removeSVGAttribute("aria-checked"),a?this.setSVGAttribute({"aria-controls":a}):this.removeSVGAttribute("aria-controls"),l?this.setSVGAttribute({"aria-live":l}):this.removeSVGAttribute("aria-live"),d?this.setSVGAttribute({"aria-orientation":d}):this.removeSVGAttribute("aria-orientation"),u?this.setSVGAttribute({"aria-valuenow":u}):this.removeSVGAttribute("aria-valuenow"),c?this.setSVGAttribute({"aria-valuetext":c}):this.removeSVGAttribute("aria-valuetext")},Object.defineProperty(t.prototype,"readerTitle",{get:function(){var e=this.getPropertyValue("readerTitle");return T(e)&&this.dataItem?this.populateString(e):e},set:function(e){e=ri(e),this.setPropertyValue("readerTitle",e)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readerDescription",{get:function(){var e=this.getPropertyValue("readerDescription");return T(e)&&this.dataItem?this.populateString(e):this.getPropertyValue("readerDescription")},set:function(e){e=ri(e),this.setPropertyValue("readerDescription",e)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"role",{get:function(){return this.getPropertyValue("role")},set:function(e){e=ri(e),this.setPropertyValue("role",e)&&(this.applyAccessibility(),e=="slider"&&(this.setSVGAttribute({"aria-valuemin":"0"}),this.setSVGAttribute({"aria-valuemax":"100"})))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readerHidden",{get:function(){return this.getPropertyValue("readerHidden")},set:function(e){e=ot(e),this.setPropertyValue("readerHidden",e)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readerChecked",{get:function(){return this.getPropertyValue("readerChecked")},set:function(e){e=ot(e),this.setPropertyValue("readerChecked",e)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readerControls",{get:function(){return this.getPropertyValue("readerControls")},set:function(e){e=ri(e),this.setPropertyValue("readerControls",e)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readerLive",{get:function(){return this.getPropertyValue("readerLive")},set:function(e){e=ri(e),this.setPropertyValue("readerLive",e)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readerLabelledBy",{get:function(){return this.getPropertyValue("readerLabelledBy")},set:function(e){e=ri(e),this.setPropertyValue("readerLabelledBy",e)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readerDescribedBy",{get:function(){return this.getPropertyValue("readerDescribedBy")},set:function(e){e=ri(e),this.setPropertyValue("readerDescribedBy",e)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readerOrientation",{get:function(){return this.getPropertyValue("readerOrientation")},set:function(e){e=ri(e),this.setPropertyValue("readerOrientation",e)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readerValueNow",{get:function(){return this.getPropertyValue("readerValueNow")},set:function(e){e=ri(e),this.setPropertyValue("readerValueNow",e)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readerValueText",{get:function(){return this.getPropertyValue("readerValueText")},set:function(e){e=ri(e),this.setPropertyValue("readerValueText",e)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyboardOptions",{get:function(){if(!this.interactions.keyboardOptions){if(this.virtualParent)return this.virtualParent.keyboardOptions;if(this._parent)return this._parent.keyboardOptions}return this.interactions.keyboardOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mouseOptions",{get:function(){if(!this.interactions.mouseOptions){if(this.virtualParent)return this.virtualParent.mouseOptions;if(this._parent)return this._parent.mouseOptions}return this.interactions.mouseOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"interactions",{get:function(){if(!this._interaction){var e=ye().getInteraction(this.dom);this._interaction=e,e.clickable=this.clickable,e.hoverable=this.hoverable,e.trackable=this.trackable,e.draggable=this.draggable,e.swipeable=this.swipeable,e.resizable=this.resizable,e.wheelable=this.wheelable,e.contextMenuDisabled=this.contextMenuDisabled,e.inert=this.inert,e.sprite=this,this._disposers.push(e)}return this._interaction},enumerable:!0,configurable:!0}),t.prototype.isInteractive=function(){return!!this._interaction},Object.defineProperty(t.prototype,"focusable",{get:function(){return this.getPropertyValue("focusable")},set:function(e){var r=this;e=ot(e),this.setPropertyValue("focusable",e)&&(!e&&!this.isInteractive()||(this.interactions.focusable=e,e?(this.setSVGAttribute({focusable:e}),T(this._tabindex)||(this.tabindex=0)):(this.removeSVGAttribute("focusable"),this.tabindex=void 0),this.interactions.setEventDisposer("sprite-focusable",e,function(){return new tt([r.events.on("blur",r.handleBlur,r,!1),r.events.on("focus",r.handleFocus,r,!1)])})))},enumerable:!0,configurable:!0}),t.prototype.handleFocus=function(e){this.focusable&&(this.topParent&&(this.topParent.hasFocused=!0,this.topParent.focusedElement=this),this.focusFilter&&this.filters.push(this.focusFilter),this.hoverOnFocus&&(this.isHover=!0,this.handleOver()))},t.prototype.handleBlur=function(e){this.focusable&&(this.topParent&&(this.topParent.hasFocused=!1,this.topParent.focusedElement=void 0),this.focusFilter&&this.filters.removeValue(this.focusFilter),this.hoverOnFocus&&(this.isHover=!1,this.handleOut()))},Object.defineProperty(t.prototype,"focusFilter",{get:function(){var e=this._focusFilter;if(e)return e;if(this.virtualParent)return this.virtualParent.focusFilter;if(this._parent)return this._parent.focusFilter},set:function(e){this._focusFilter=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hoverOnFocus",{get:function(){return this.getPropertyValue("hoverOnFocus")},set:function(e){e!==this.hoverOnFocus&&this.setPropertyValue("hoverOnFocus",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabindex",{get:function(){var e=this._tabindex;if(e!=null)return e;if(this.virtualParent)return this.virtualParent.tabindex;if(this._parent)return this._parent.tabindex},set:function(e){e=Xe(e),this.setPropertyValue("tabindex",e)&&M(e)&&(this.interactions.tabindex=e,this.setSVGAttribute({tabindex:e}),this._tabindex=e,this.focusable=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inertiaOptions",{get:function(){return!this.interactions.inertiaOptions&&this._parent?this._parent.inertiaOptions:this.interactions.inertiaOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"draggable",{get:function(){return this.getPropertyValue("draggable")},set:function(e){var r=this;e=ot(e),this.setPropertyValue("draggable",e)&&(!e&&!this.isInteractive()||(this.applyCursorStyle(),this.interactions.draggable=e,this.interactions.setEventDisposer("sprite-draggable",e,function(){return new tt([r.events.on("down",r.handleDown,r,!1),r.events.on("dragstart",r.handleDragStart,r,!1),r.events.on("drag",r.handleDragMove,r,!1),r.events.on("dragstop",r.handleDragStop,r,!1)])})))},enumerable:!0,configurable:!0}),t.prototype.handleDragStart=function(e){(!this.interactions.isTouchProtected||!e.touch)&&(this.interactions.originalPosition={x:this.pixelX,y:this.pixelY},this._isDragged=!0,this.hideTooltip(0))},t.prototype.dragStart=function(e){this._isDragged=!0,ye().dragStart(this.interactions,e)},t.prototype.handleDragStop=function(e){(!this.interactions.isTouchProtected||!e.touch)&&(this._isDragged=!1,this.showTooltip(),this.interactions.originalPosition=void 0)},t.prototype.dragStop=function(e,r){this._isDragged=!1,ye().dragStop(this.interactions,e,r)},t.prototype.handleDragMove=function(e){if(!this.interactions.isTouchProtected||!e.touch){var r=this.interactions.originalPosition;if(r&&this._isDragged){var o=this._parent.globalScale*this.svgContainer.cssScale;this.moveTo({x:r.x+e.shift.x/o,y:r.y+e.shift.y/o},void 0,void 0,!0)}this.dispatchImmediately("dragged",e)}},Object.defineProperty(t.prototype,"inert",{get:function(){return this.getPropertyValue("inert")},set:function(e){e=ot(e),this.setPropertyValue("inert",e)&&(!e&&!this.isInteractive()||(this.interactions.inert=e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hoverOptions",{get:function(){if(!this.interactions.hoverOptions){if(this.virtualParent)return this.virtualParent.hoverOptions;if(this._parent)return this._parent.hoverOptions}return this.interactions.hoverOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hoverable",{get:function(){return this.getPropertyValue("hoverable")},set:function(e){var r=this;e=ot(e),this.setPropertyValue("hoverable",e)&&(!e&&!this.isInteractive()||(this.applyCursorStyle(),this.interactions.hoverable=e,this.interactions.setEventDisposer("sprite-hoverable",e,function(){return new tt([r.events.on("over",r.handleOver,r,!1),r.events.on("out",r.handleOut,r,!1)])})))},enumerable:!0,configurable:!0}),t.prototype.handleOver=function(e){if(this._outTimeout&&this._outTimeout.dispose(),this.isHover){this.states.hasKey("hover")&&(this.isHidden||this.applyCurrentState());var r=void 0;e&&e.pointer&&(r=Un(e.pointer.point,this.svgContainer.SVGContainer,this.svgContainer.cssScale)),this.showTooltipOn=="hover"&&this.showTooltip(r)}else this.showTooltipOn=="hover"&&this.hideTooltip(),!this.isHidden&&this.states.hasKey("hover")&&this.applyCurrentState()},t.prototype.handleOut=function(e){var r=this;if(this.tooltip&&this.tooltip.targetSprite==this&&this.tooltip.keepTargetHover){this._outTimeout=this.setTimeout(function(){r.tooltip.isHover||(r.tooltip.targetSprite==r&&r.hideTooltip(),r._outTimeout=r.setTimeout(r.handleOutReal.bind(r),r.rollOutDelay))},10);return}this.showTooltipOn=="hover"&&this.hideTooltip(),this._outTimeout=this.setTimeout(this.handleOutReal.bind(this),this.rollOutDelay)},t.prototype.handleOutReal=function(){!this.isHidden&&!this.isHiding&&this.states.hasKey("hover")&&this.applyCurrentState()},Object.defineProperty(t.prototype,"hitOptions",{get:function(){if(!this.interactions.hitOptions){if(this.virtualParent)return this.virtualParent.hitOptions;if(this._parent)return this._parent.hitOptions}return this.interactions.hitOptions},enumerable:!0,configurable:!0}),t.prototype.handleDown=function(e){this.interactions.downPointers.length===1&&(this.interactions.originalPosition={x:this.pixelX,y:this.pixelY},this.interactions.originalAngle=this.rotation,this.interactions.originalScale=this.scale,this.states.hasKey("down")&&this.setState("down"))},t.prototype.handleUp=function(e){var r=this;this._isResized=!1,this.states.hasKey("down")&&this.applyCurrentState(),this.showTooltipOn=="hit"&&(this.updateTooltipPosition(e.pointer?e.pointer.point:void 0),this._disposers.push(P.events.once("exitframe",function(){r.showTooltip()})),this._disposers.push(ye().body.events.once("down",function(o){r.hideTooltip()})))},Object.defineProperty(t.prototype,"clickable",{get:function(){return this.getPropertyValue("clickable")},set:function(e){var r=this;e=ot(e),this.setPropertyValue("clickable",e)&&(!e&&!this.isInteractive()||(this.applyCursorStyle(),this.interactions.clickable=e,this.interactions.setEventDisposer("sprite-clickable",e,function(){return new tt([r.events.on("down",r.handleDown,r,!1),r.events.on("up",r.handleUp,r,!1)])})))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"togglable",{get:function(){return this.getPropertyValue("togglable")},set:function(e){var r=this;e=ot(e),this.setPropertyValue("togglable",e)&&(!e&&!this.isInteractive()||this.interactions.setEventDisposer("sprite-togglable",e,function(){return r.events.on("hit",r.handleToggle,r,!1)}))},enumerable:!0,configurable:!0}),t.prototype.handleToggle=function(e){this.isActive=!this.isActive},Object.defineProperty(t.prototype,"contextMenuDisabled",{get:function(){return this.getPropertyValue("contextMenuDisabled")},set:function(e){e=ot(e),this.setPropertyValue("contextMenuDisabled",e)&&(this.interactions.contextMenuDisabled=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this.getPropertyValue("url")},set:function(e){this.setPropertyValue("url",e)&&(this._urlDisposer&&this._urlDisposer.dispose(),ql(e)&&(this._urlDisposer=this.events.on("hit",this.urlHandler,this,!1),this.clickable=!0,this.cursorOverStyle=Ft.pointer))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baseId",{get:function(){return!this._baseId&&this._parent&&(this.baseId=this._parent.baseId),this._baseId},set:function(e){this.setBaseId(e)},enumerable:!0,configurable:!0}),t.prototype.setBaseId=function(e){e!=this._baseId&&(this.invalid&&(this.invalid=!1,P.removeFromInvalidSprites(this),this.invalidate()),this._baseId=e)},Object.defineProperty(t.prototype,"baseSprite",{get:function(){if(this.isBaseSprite)return this;if(this._parent)return this._parent.baseSprite},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"urlTarget",{get:function(){return this.getPropertyValue("urlTarget")},set:function(e){this.setPropertyValue("urlTarget",e)},enumerable:!0,configurable:!0}),t.prototype.urlHandler=function(e){if(ql(this.url)){var r=this.populateString(this.url);this.urlTarget==="_self"?window.location.href=r:window.open(r,this.urlTarget)}},Object.defineProperty(t.prototype,"swipeOptions",{get:function(){if(!this.interactions.swipeOptions){if(this.virtualParent)return this.virtualParent.swipeOptions;if(this._parent)return this._parent.swipeOptions}return this.interactions.swipeOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"swipeable",{get:function(){return this.getPropertyValue("swipeable")},set:function(e){e=ot(e),this.setPropertyValue("swipeable",e)&&(this.applyCursorStyle(),!e&&!this.isInteractive()||(this.interactions.swipeable=e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trackable",{get:function(){return this.getPropertyValue("trackable")},set:function(e){e=ot(e),this.setPropertyValue("trackable",e)&&(!e&&!this.isInteractive()||(this.applyCursorStyle(),this.interactions.trackable=e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wheelable",{get:function(){return this.getPropertyValue("wheelable")},set:function(e){this.setPropertyValue("wheelable",e)&&(!e&&!this.isInteractive()||(this.applyCursorStyle(),this.interactions.wheelable=e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resizable",{get:function(){return this.getPropertyValue("resizable")},set:function(e){var r=this;e=ot(e),this.setPropertyValue("resizable",e)&&(!e&&!this.isInteractive()||(this.applyCursorStyle(),this.interactions.resizable=e,this.interactions.setEventDisposer("sprite-resizable",e,function(){return new tt([r.events.on("down",r.handleDown,r,!1),r.events.on("resize",r.handleResize,r,!1)])})))},enumerable:!0,configurable:!0}),t.prototype.handleResize=function(e){if((!this.interactions.isTouchProtected||!e.touch)&&(this._isResized=!0,this.scale=this.interactions.originalScale*e.scale,this.validatePosition(),this.draggable||this.dragWhileResize)){this._isDragged=!1;var r=Un(e.point1,this.htmlContainer,this.svgContainer.cssScale),o=Un(e.point2,this.htmlContainer,this.svgContainer.cssScale),n=ha(r,o),s=ba(e.startPoint1,this._parent),a=ba(e.startPoint2,this._parent),l=this.interactions.originalPosition,d=this.interactions.originalScale;if(l){var u={x:(s.x-l.x)/d,y:(s.y-l.y)/d},c={x:(a.x-l.x)/d,y:(a.y-l.y)/d},h=ha(u,c),p=Vp(n,this._parent);this.moveTo({x:p.x-h.x*this.scale,y:p.y-h.y*this.scale},void 0,void 0,!0)}}},Object.defineProperty(t.prototype,"cursorOptions",{get:function(){if(!this.interactions.cursorOptions){if(this.virtualParent)return this.virtualParent.cursorOptions;if(this._parent)return this._parent.cursorOptions}return this.interactions.cursorOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursorOverStyle",{set:function(e){this.cursorOptions.overStyle||(this.interactions.cursorOptions={defaultStyle:this.cursorOptions.defaultStyle}),this.cursorOptions.overStyle=e,ye().applyCursorOverStyle(this.interactions)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursorDownStyle",{set:function(e){this.cursorOptions.downStyle=e},enumerable:!0,configurable:!0}),t.prototype.applyCursorStyle=function(){},Object.defineProperty(t.prototype,"interactionsEnabled",{get:function(){var e=this.getPropertyValue("interactionsEnabled");return e===!1?!1:this.virtualParent?this.virtualParent.interactionsEnabled:this._parent?this._parent.interactionsEnabled:!0},set:function(e){if(e=ot(e),this.setPropertyValue("interactionsEnabled",e)){var r=null;e?this.group.node.style.pointerEvents="":r="none",this.group.node.style.pointerEvents=r}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exporting",{get:function(){return this.getExporting()},set:function(e){this._exporting.set(e,e)},enumerable:!0,configurable:!0}),t.prototype.getExporting=function(){var e=this._exporting.get();if(e)return e;if(this.isStandaloneInstance||!this._parent)e=new xv(this.svgContainer.SVGContainer),e.sprite=this,e.language=this.language,e.numberFormatter=this.numberFormatter,e.dateFormatter=this.dateFormatter,e.durationFormatter=this.durationFormatter,this._exporting.set(e,e);else return this._parent.exporting;return e},Object.defineProperty(t.prototype,"exportable",{get:function(){return this._exportable},set:function(e){var r=this.svgContainer;this._exportable=e,r&&(e?ve(r.nonExportableSprites,this):Mi(r.nonExportableSprites,this)==-1&&r.nonExportableSprites.push(this))},enumerable:!0,configurable:!0}),t.prototype.modalPrefix=function(e){return e=we.classNamePrefix+e,e},Object.defineProperty(t.prototype,"modal",{get:function(){var e=this.svgContainer;if(e){var r=e.modal;return r.adapter.has("classPrefix",this.modalPrefix)||r.adapter.add("classPrefix",this.modalPrefix),r}},enumerable:!0,configurable:!0}),t.prototype.openModal=function(e,r){var o=this.svgContainer;if(o)return o.openModal(e,r)},t.prototype.closeModal=function(){var e=this.svgContainer;e&&e.closeModal()},Object.defineProperty(t.prototype,"popups",{get:function(){var e=this.svgContainer;if(e){var r=e.popups;return r.template.sprite=this,r.template.adapter.has("classPrefix",this.modalPrefix)||r.template.adapter.add("classPrefix",this.modalPrefix),r}},enumerable:!0,configurable:!0}),t.prototype.openPopup=function(e,r){var o=this.svgContainer;if(o)return o.openPopup(e,r)},t.prototype.closeAllPopups=function(){var e=this.svgContainer;e&&e.closeAllPopups()},Object.defineProperty(t.prototype,"x",{get:function(){return this.getPropertyValue("x")},set:function(e){this.isDragged||this.setPercentProperty("x",e,!1,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelX",{get:function(){var e=De(this.getPixelX(this.x),this.minX,this.maxX);return this._adapterO?this._adapterO.apply("pixelX",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeX",{get:function(){return this._adapterO?this._adapterO.apply("relativeX",this.getRelativeX(this.x)):this.getRelativeX(this.x)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minX",{get:function(){return this.getPropertyValue("minX")},set:function(e){M(e)&&(e=oe(e,this._positionPrecision,!0),this.setPropertyValue("minX",e,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxX",{get:function(){return this.getPropertyValue("maxX")},set:function(e){M(e)&&(e=oe(e,this._positionPrecision,!0),this.setPropertyValue("maxX",e,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.getPropertyValue("y")},set:function(e){this.isDragged||this.setPercentProperty("y",e,!1,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelY",{get:function(){var e=De(this.getPixelY(this.y),this.minY,this.maxY);return this._adapterO?this._adapterO.apply("pixelY",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeY",{get:function(){return this._adapterO?this._adapterO.apply("relativeY",this.getRelativeX(this.y)):this.getRelativeX(this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minY",{get:function(){return this.getPropertyValue("minY")},set:function(e){M(e)&&(e=oe(e,this._positionPrecision,!0),this.setPropertyValue("minY",e,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxY",{get:function(){return this.getPropertyValue("maxY")},set:function(e){M(e)&&(e=oe(e,this._positionPrecision,!0),this.setPropertyValue("maxY",e,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dx",{get:function(){return this.getPropertyValue("dx")},set:function(e){M(e)&&(e=oe(e,this._positionPrecision,!0),this.setPropertyValue("dx",e,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dy",{get:function(){return this.getPropertyValue("dy")},set:function(e){M(e)&&(e=oe(e,this._positionPrecision,!0),this.setPropertyValue("dy",e,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.getPropertyValue("rotation")},set:function(e){e=Xe(e),M(e)||(e=0),this.setPropertyValue("rotation",e,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this.getPropertyValue("align")},set:function(e){e=ri(e),this.setPropertyValue("align",e)&&this._parent&&this._parent.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valign",{get:function(){return this.getPropertyValue("valign")},set:function(e){e=ri(e),this.setPropertyValue("valign",e)&&this._parent&&this._parent.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalCenter",{get:function(){return this.getPropertyValue("horizontalCenter")},set:function(e){e=ri(e),this.setPropertyValue("horizontalCenter",e)&&this.updateCenter()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalCenter",{get:function(){return this.getPropertyValue("verticalCenter")},set:function(e){e=ri(e),this.setPropertyValue("verticalCenter",e)&&this.updateCenter()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){var e=this.getPropertyValue("maxWidth");if(!M(e)&&this._parent){var r=this._parent.maxWidth;return this._parent.layout!="absolute"&&this.align!="none"&&this.align!=null&&(r=r-this.pixelMarginLeft-this.pixelMarginRight),r}return e},set:function(e){this.setMaxWidth(e)},enumerable:!0,configurable:!0}),t.prototype.setMaxWidth=function(e){var r=this.maxWidth,o=this.maxHeight;if(this.setPropertyValue("maxWidth",e)){M(this.relativeWidth)&&this.invalidate();var n={type:"maxsizechanged",target:this,previousWidth:r,previousHeight:o};this.dispatchImmediately("maxsizechanged",n)}},Object.defineProperty(t.prototype,"maxHeight",{get:function(){var e=this.getPropertyValue("maxHeight");if(!M(e)&&this._parent){var r=this._parent.maxHeight;return this._parent.layout!="absolute"&&this.valign!="none"&&this.valign!=null&&(r=r-this.pixelMarginTop-this.pixelMarginBottom),r}return e},set:function(e){this.setMaxHeight(e)},enumerable:!0,configurable:!0}),t.prototype.setMaxHeight=function(e){var r=this.maxWidth,o=this.maxHeight;if(this.setPropertyValue("maxHeight",e)){M(this.relativeHeight)&&this.invalidate();var n={type:"maxsizechanged",target:this,previousWidth:r,previousHeight:o};this.dispatchImmediately("maxsizechanged",n)}},Object.defineProperty(t.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth")},set:function(e){this.setPropertyValue("minWidth",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minHeight",{get:function(){return this.getPropertyValue("minHeight")},set:function(e){this.setPropertyValue("minHeight",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.getPropertyValue("width")},set:function(e){var r=this.setPercentProperty("width",e,!0,!1,this._positionPrecision,!0);r&&(this.percentWidth=void 0,this.relativeWidth=void 0,e instanceof Me?(this.percentWidth=e.percent,M(this._pixelWidth)&&(this.maxWidth=void 0),this._pixelWidth=void 0):(this._pixelWidth=Number(e),this.maxWidth=this._pixelWidth),this.invalidatePosition())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.getPropertyValue("height")},set:function(e){var r=this.setPercentProperty("height",e,!0,!1,this._positionPrecision,!0);r&&(this.percentHeight=void 0,this._relativeHeight=void 0,e instanceof Me?(this.percentHeight=e.percent,M(this._pixelHeight)&&(this.maxHeight=void 0),this._pixelHeight=void 0):(this._pixelHeight=Number(e),this.maxHeight=this._pixelHeight),this.invalidatePosition())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelWidth",{get:function(){var e;M(this.percentWidth)?e=this.maxWidth:M(this._pixelWidth)?e=this._pixelWidth:e=0;var r=this.minWidth;r!=null&&e<r&&(e=r);var o=oe(e,this._positionPrecision,!0);return this._adapterO?this._adapterO.apply("pixelWidth",o):o},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelHeight",{get:function(){var e;M(this.percentHeight)?e=this.maxHeight:M(this._pixelHeight)?e=this._pixelHeight:e=0;var r=this.minHeight;r!=null&&e<r&&(e=r);var o=oe(e,this._positionPrecision,!0);return this._adapterO?this._adapterO.apply("pixelHeight",o):o},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeWidth",{get:function(){var e=this._relativeWidth;if(M(e))return this._adapterO?this._adapterO.apply("relativeWidth",e):e},set:function(e){this._relativeWidth!=e&&(this._relativeWidth=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeHeight",{get:function(){var e=this._relativeHeight;if(M(e))return this._adapterO?this._adapterO.apply("relativeHeight",e):e},set:function(e){this._relativeHeight!=e&&(this._relativeHeight=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"measuredWidth",{get:function(){return this.disabled||this.__disabled?0:this._adapterO?this._adapterO.apply("measuredWidth",this._measuredWidth):this._measuredWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"measuredHeight",{get:function(){return this.disabled||this.__disabled?0:this._adapterO?this._adapterO.apply("measuredHeight",this._measuredHeight):this._measuredHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outerWidth",{get:function(){var e=this.pixelWidth+this.pixelMarginRight+this.pixelMarginLeft;return this._adapterO?this._adapterO.apply("outerWidth",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outerHeight",{get:function(){var e=this.pixelHeight+this.pixelMarginTop+this.pixelMarginBottom;return this._adapterO?this._adapterO.apply("outerHeight",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerWidth",{get:function(){var e=Math.max(0,this.pixelWidth-this.pixelPaddingRight-this.pixelPaddingLeft);return this._adapterO?this._adapterO.apply("innerWidth",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerHeight",{get:function(){var e=Math.max(0,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom);return this._adapterO?this._adapterO.apply("innerHeight",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"globalScale",{get:function(){var e=this.scale;return this._parent&&(e=e*this._parent.globalScale),this._adapterO?this._adapterO.apply("globalScale",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.getPropertyValue("scale")},set:function(e){e=Xe(e),e<0&&(e=0),e!=this.getPropertyValue("scale")&&(this.setPropertyValue("scale",e,!1,!0),this.handleGlobalScale())},enumerable:!0,configurable:!0}),t.prototype.margin=function(e,r,o,n){return this.marginTop=e,this.marginRight=r,this.marginBottom=o,this.marginLeft=n,this},Object.defineProperty(t.prototype,"marginLeft",{get:function(){return this.getPropertyValue("marginLeft")},set:function(e){this.setPercentProperty("marginLeft",e,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"marginRight",{get:function(){return this.getPropertyValue("marginRight")},set:function(e){this.setPercentProperty("marginRight",e,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"marginTop",{get:function(){return this.getPropertyValue("marginTop")},set:function(e){this.setPercentProperty("marginTop",e,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"marginBottom",{get:function(){return this.getPropertyValue("marginBottom")},set:function(e){this.setPercentProperty("marginBottom",e,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelMarginRight",{get:function(){var e=this.getPixelX(this.marginRight);return this._adapterO?this._adapterO.apply("pixelMarginRight",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeMarginRight",{get:function(){var e=this.getRelativeX(this.marginRight);return this._adapterO?this._adapterO.apply("relativeMarginRight",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelMarginLeft",{get:function(){var e=this.getPixelX(this.marginLeft);return this._adapterO?this._adapterO.apply("pixelMarginLeft",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeMarginLeft",{get:function(){var e=this.getRelativeX(this.marginLeft);return this._adapterO?this._adapterO.apply("relativeMarginLeft",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelMarginTop",{get:function(){var e=this.getPixelY(this.marginTop);return this._adapterO?this._adapterO.apply("pixelMarginTop",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeMarginTop",{get:function(){var e=this.getRelativeY(this.marginTop);return this._adapterO?this._adapterO.apply("relativeMarginTop",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelMarginBottom",{get:function(){var e=this.getPixelY(this.marginBottom);return this._adapterO?this._adapterO.apply("pixelMarginBottom",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeMarginBottom",{get:function(){var e=this.getRelativeY(this.marginBottom);return this._adapterO?this._adapterO.apply("relativeMarginBottom",e):e},enumerable:!0,configurable:!0}),t.prototype.padding=function(e,r,o,n){return this.paddingTop=e,this.paddingRight=r,this.paddingBottom=o,this.paddingLeft=n,this},Object.defineProperty(t.prototype,"paddingLeft",{get:function(){return this.getPropertyValue("paddingLeft")},set:function(e){this.setPercentProperty("paddingLeft",e,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingRight",{get:function(){return this.getPropertyValue("paddingRight")},set:function(e){this.setPercentProperty("paddingRight",e,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingTop",{get:function(){return this.getPropertyValue("paddingTop")},set:function(e){this.setPercentProperty("paddingTop",e,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingBottom",{get:function(){return this.getPropertyValue("paddingBottom")},set:function(e){this.setPercentProperty("paddingBottom",e,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelPaddingRight",{get:function(){return this.getPixelX(this.paddingRight)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePaddingRight",{get:function(){return this.getRelativeX(this.paddingRight)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelPaddingLeft",{get:function(){return this.getPixelX(this.paddingLeft)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePaddingLeft",{get:function(){return this.getRelativeX(this.paddingLeft)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelPaddingTop",{get:function(){return this.getPixelY(this.paddingTop)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePaddingTop",{get:function(){return this.getRelativeY(this.paddingTop)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelPaddingBottom",{get:function(){return this.getPixelY(this.paddingBottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePaddingBottom",{get:function(){return this.getRelativeY(this.paddingBottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.getPropertyValue("path")},set:function(e){this.setPath(e)},enumerable:!0,configurable:!0}),t.prototype.setPath=function(e){return this.setPropertyValue("path",e)?(this._adapterO&&(e=this._adapterO.apply("path",e)),this._isPath||((!this.element||this.element.node&&!(this.element.node instanceof SVGPathElement))&&(this.element=this.paper.add("path")),this._isPath=!0),T(e)?this.element.attr({d:e}):this.element.removeAttr("d"),this.invalidatePosition(),this.inited||this.events.once("inited",this.validatePosition,this,!1),!0):!1},Object.defineProperty(t.prototype,"fillModifier",{get:function(){return this.getPropertyValue("fillModifier")},set:function(e){this.setPropertyValue("fillModifier",e)&&this.setFill(this.fill)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeModifier",{get:function(){return this.getPropertyValue("strokeModifier")},set:function(e){this.setPropertyValue("strokeModifier",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillOpacity",{get:function(){return this.getPropertyValue("fillOpacity")},set:function(e){e=fp(e,0,1),this.setPropertyValue("fillOpacity",e)&&this.setSVGAttribute({"fill-opacity":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this.getPropertyValue("fill")},set:function(e){this.setFill(e)},enumerable:!0,configurable:!0}),t.prototype.setFill=function(e){if((!Qe(e)||"r"in e)&&(e=ga(e)),this.setColorProperty("fill",e)||this.fillModifier){if(e instanceof Ue&&this.fillModifier&&(e=this.fillModifier.modify(e)),this.realFill=e,e instanceof Ue)this.setSVGAttribute({fill:e.toString()});else if(!T(e))this.removeSVGAttribute("fill");else if(e instanceof Oo||e instanceof Ki||e instanceof Fr){var r=e;r.paper=this.paper,this.setSVGAttribute({fill:'url("'+ya()+r.id+'")'})}}},Object.defineProperty(t.prototype,"opacity",{get:function(){return this.getPropertyValue("opacity")},set:function(e){e=fp(e,0,1),this.setPropertyValue("opacity",e)&&this.setSVGAttribute({opacity:e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this.getPropertyValue("stroke")},set:function(e){this.setStroke(e)},enumerable:!0,configurable:!0}),t.prototype.setStroke=function(e){if((!Qe(e)||"r"in e)&&(e=ga(e)),this.setColorProperty("stroke",e)||this.strokeModifier){if(e instanceof Ue&&this.strokeModifier&&(e=this.strokeModifier.modify(e)),this.realStroke=e,e instanceof Ue)e.hex=="none"?this.removeSVGAttribute("stroke"):this.setSVGAttribute({stroke:e.toString()});else if(!T(e))this.removeSVGAttribute("stroke");else if(e instanceof Oo||e instanceof Ki||e instanceof Fr){var r=e;r.paper=this.paper,this.setSVGAttribute({stroke:'url("'+ya()+r.id+'")'})}}},Object.defineProperty(t.prototype,"strokeOpacity",{get:function(){return this.getPropertyValue("strokeOpacity")},set:function(e){e=fp(e,0,1),this.setPropertyValue("strokeOpacity",e)&&this.setSVGAttribute({"stroke-opacity":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonScalingStroke",{get:function(){return this.getPropertyValue("nonScalingStroke")},set:function(e){e=ot(e),this.setPropertyValue("nonScalingStroke",e)&&(this.strokeWidth=this.strokeWidth)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonScaling",{get:function(){return this.getPropertyValue("nonScaling")},set:function(e){e=ot(e),this.setPropertyValue("nonScaling",e,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return this.getPropertyValue("strokeWidth")},set:function(e){e=Xe(e),this.setPropertyValue("strokeWidth",e,!0),this.nonScalingStroke&&(M(e)||(e=1),e=e/this.globalScale),this.setSVGAttribute({"stroke-width":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeDasharray",{get:function(){return this.getPropertyValue("strokeDasharray")},set:function(e){e=ri(e),this.setPropertyValue("strokeDasharray",e)&&this.setSVGAttribute({"stroke-dasharray":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeDashoffset",{get:function(){return this.getPropertyValue("strokeDashoffset")},set:function(e){e=Xe(e),this.setPropertyValue("strokeDashoffset",e)&&this.setSVGAttribute({"stroke-dashoffset":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeLinecap",{get:function(){return this.getPropertyValue("strokeLinecap")},set:function(e){this.setPropertyValue("strokeLinecap",e)&&this.setSVGAttribute({"stroke-linecap":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeLinejoin",{get:function(){return this.getPropertyValue("strokeLinejoin")},set:function(e){this.setPropertyValue("strokeLinejoin",e)&&this.setSVGAttribute({"stroke-linejoin":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shapeRendering",{get:function(){return this.getPropertyValue("shapeRendering")},set:function(e){e=ri(e),this.setPropertyValue("shapeRendering",e)&&this.setSVGAttribute({"shape-rendering":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelPerfect",{get:function(){return this.getPropertyValue("pixelPerfect")},set:function(e){e=ot(e),e?this._positionPrecision=we.pixelPerfectPrecision:this._positionPrecision=3,this.setPropertyValue("pixelPerfect",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rtl",{get:function(){return T(this._rtl)?this._rtl:this._topParent?this._topParent.rtl:!1},set:function(e){e=ot(e),this.isBaseSprite&&(this.topParent.rtl=e),this._rtl=e},enumerable:!0,configurable:!0}),t.prototype.show=function(e){return this.showReal(e)},t.prototype.showReal=function(e){var r=this;if(!this.preventShow){var o,n=this.defaultState.properties;if(!this.disabled&&(this.isHidden||!this.visible||this.isHiding||n.opacity!=null&&this.opacity<n.opacity&&!this.isShowing)&&!this.isDisposed()){this.invalid&&this.validate(),this.positionInvalid&&this.validatePosition(),M(e)||(e=this.defaultState.transitionDuration),this._hideAnimation&&(this._hideAnimation.kill(),this._hideAnimation=void 0),this._showHideDisposer&&this.removeDispose(this._showHideDisposer),this._isHidden=!1,this.isHiding=!1,this.isShowing=!0,o=this.applyCurrentState(e),o&&!o.isFinished()?(this._showHideDisposer=o.events.on("animationended",function(){r.isShowing=!1}),this._disposers.push(this._showHideDisposer)):this.isShowing=!1;var s=this.defaultState.properties.visible;T(s)||(s=!0),this.visible=s,this.readerHidden=!1,this.dispatchImmediately("shown")}return o}},t.prototype.hide=function(e){return this.hideReal(e)},t.prototype.hideReal=function(e){var r=this,o;if(!this.isHiding&&this.visible&&!this.isDisposed()){this.tooltip&&this.tooltip.currentSprite==this&&this.hideTooltip(0),this._hideAnimation&&(this._hideAnimation.kill(),this._hideAnimation=void 0),this.isShowing=!1,this._showHideDisposer&&this.removeDispose(this._showHideDisposer);var n=this.hiddenState;n?(o=this.setState(n,e,void 0),o&&!o.isFinished()?(this._hideAnimation=o,this._showHideDisposer=o.events.on("animationended",function(){r.isHiding=!1,r._isHidden=!0,n.properties.visible==!1&&(r.visible=!1)},this),this._disposers.push(this._showHideDisposer),this._disposers.push(o)):(this.isHiding=!1,this._isHidden=!0)):(this.visible=!1,this.isHiding=!1,this._isHidden=!0),this.readerHidden=!0,this.dispatchImmediately("hidden"),this.invalidate()}return M(e)||(e=this.hiddenState.transitionDuration),o},Object.defineProperty(t.prototype,"visible",{get:function(){return this.getVisibility()},set:function(e){e=ot(e),this.setVisibility(e)},enumerable:!0,configurable:!0}),t.prototype.getVisibility=function(){var e=this.getPropertyValue("visible");return T(e)||(e=!0),e},t.prototype.setVisibility=function(e){if(this.setPropertyValue("visible",e)&&(e?this.group.removeAttr("visibility"):this.group.attr({visibility:"hidden"}),this.events.isEnabled("visibilitychanged"))){var r={type:"visibilitychanged",target:this,visible:e};this.events.dispatchImmediately("visibilitychanged",r)}},Object.defineProperty(t.prototype,"zIndex",{get:function(){return this.getPropertyValue("zIndex")},set:function(e){e=Xe(e),this.setPropertyValue("zIndex",e)&&this.dispatch("zIndexChanged")},enumerable:!0,configurable:!0}),t.prototype.toFront=function(){var e=this._parent;e&&e.children.indexOf(this)!=e.children.length-1&&(e.children.moveValue(this,e.children.length-1),this.dispatch("zIndexChanged"))},t.prototype.toBack=function(){var e=this._parent;e&&e.children.indexOf(this)!=0&&(e.children.moveValue(this,0),this.dispatch("zIndexChanged"))},Object.defineProperty(t.prototype,"userClassName",{get:function(){return this.getPropertyValue("userClassName")},set:function(e){this.setPropertyValue("userClassName",e)&&(!e&&this.userClassName&&this.group.removeClass(this.userClassName),this.setClassName())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltip",{get:function(){if(this._tooltip)return this._tooltip;if(this.virtualParent)return this.virtualParent.tooltip;if(this._parent)return this._parent.tooltip},set:function(e){this._tooltip&&this.removeDispose(this._tooltip),this._tooltip=e,e&&(e.parent=this.tooltipContainer)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipDataItem",{get:function(){var e=this._tooltipDataItem;return e||this.dataItem},set:function(e){this._tooltipDataItem=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipColorSource",{get:function(){return this._tooltipColorSource},set:function(e){this._tooltipColorSource=e},enumerable:!0,configurable:!0}),t.prototype.showTooltip=function(e){this.showTooltipOn=="always"&&!this._tooltip&&this.tooltip&&(this._tooltip=this.tooltip.clone()),!e&&this.tooltipPosition=="pointer"&&this.isHover&&(e=Un(ye().lastPointer.point,this.svgContainer.SVGContainer,this.svgContainer.cssScale));for(var r=this;r!=null;){if(!r.visible||r.disabled||r.__disabled){this._tooltip&&this._tooltip.visible&&this._tooltip.hide(0);return}r=r.parent}if(T(this.tooltipText)||T(this.tooltipHTML)){var o=this.tooltip,n=this.tooltipDataItem;if(o){o.targetSprite=this;var s=this,a=this.tooltipColorSource;if((o.getStrokeFromObject||o.getFillFromObject)&&a&&(a.isTemplate?n&&Cp(n.sprites,function(p){return p.clonedFrom==a?(s=p,!1):!0}):s=a),o.getStrokeFromObject){for(var l=this.stroke,d=s;d.parent!=null&&(l=d.stroke,l==null&&(d=d.parent),l==null););l instanceof Ue?o.background.animate({property:"stroke",to:l},o.animationDuration):o.background.stroke=l}if(o.dataItem=n,o.label.populateStringFrom=this,o.getFillFromObject){for(var u=this.fill,d=s;d.parent!=null;)if(u=d.fill,u==null||u instanceof Ue&&u.rgb==null)d=d.parent;else if(u!=null)break;u==null&&(u=fe("#000000")),u instanceof Ue&&o.visible?o.background.animate({property:"fill",to:u},o.animationDuration):o.background.fill=u,o.autoTextColor&&u instanceof Ue&&(o.label.fill=u.alternative)}var c="";if(this.tooltipHTML&&(o.html=this.tooltipHTML,c=this.tooltipHTML),this.tooltipText&&(o.text=this.tooltipText,c=this.tooltipText),this.updateTooltipPosition(e))if(o.readerDescribedBy=this.uidAttr(),o.label.invalid&&o.label.validate(),c!=null&&c!=""&&o.label.currentText!=""){o&&!o.parent&&(o.parent=this.tooltipContainer);var h=o.defaultState.transitionDuration;return h<=0&&(h=1),o.show(h),o.currentSprite=this,!0}else this.hideTooltip(0);else this.hideTooltip(0)}}return!1},t.prototype.updateTooltipPosition=function(e){var r=this;if(this.tooltipPosition=="pointer"){if(this._interactionDisposer&&this._interactionDisposer.dispose(),this._interactionDisposer=ye().body.events.on("track",function(n){return r.pointTooltipTo(Un(n.point,r.svgContainer.SVGContainer,r.svgContainer.cssScale),!0)}),e)return this.pointTooltipTo(e,!0)}else{var o=Cs({x:this.getTooltipX(),y:this.getTooltipY()},this);return this.pointTooltipTo(o)}},t.prototype.pointTooltipTo=function(e,r){var o=this.tooltip;return o&&this.topParent&&(o.showInViewport||O0(e,{x:0,y:0,width:this.topParent.maxWidth,height:this.topParent.maxHeight}))?(o.pointTo(e,r),!0):!1},t.prototype.hideTooltip=function(e){if(this.showTooltipOn!="always"){var r=this.tooltip;r&&(r.targetSprite==this&&(r.targetSprite=void 0),r.hide(e),this._interactionDisposer&&(this._interactionDisposer.dispose(),this._interactionDisposer=void 0))}},Object.defineProperty(t.prototype,"tooltipHTML",{get:function(){return this.getPropertyValue("tooltipHTML")},set:function(e){e=ri(e),this.hoverable=!0,this.setPropertyValue("tooltipHTML",e)&&this.tooltip&&this.tooltip.visible&&this.showTooltip()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipText",{get:function(){return this.getPropertyValue("tooltipText")},set:function(e){e=ri(e),e&&(this.hoverable=!0),this.setPropertyValue("tooltipText",e)&&this.tooltip&&this.tooltip.visible&&this.showTooltip()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipContainer",{get:function(){if(this._tooltipContainer)return this._tooltipContainer;if(this._parent)return this._parent.tooltipContainer},set:function(e){this._tooltipContainer=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipX",{get:function(){return this.getTooltipX()},set:function(e){this.setPercentProperty("tooltipX",e)&&this.tooltip&&this.tooltip.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alwaysShowTooltip",{get:function(){return this.getPropertyValue("showTooltipOn")=="always"},set:function(e){e=ot(e),e&&(this.showTooltipOn="always")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showTooltipOn",{get:function(){return this.getPropertyValue("showTooltipOn")},set:function(e){this.setPropertyValue("showTooltipOn",e)&&(e=="hit"&&(this.clickable=!0),this.tooltip&&(e=="always"?this.showTooltip():this.handleAlwaysShowTooltip()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipPosition",{get:function(){return this.getPropertyValue("tooltipPosition")},set:function(e){this.setPropertyValue("tooltipPosition",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipY",{get:function(){return this.getTooltipY()},set:function(e){this.setPercentProperty("tooltipY",e)&&this.tooltip&&this.tooltip.invalidate()},enumerable:!0,configurable:!0}),t.prototype.getTooltipX=function(){var e=this.getPropertyValue("tooltipX");T(e)||(e=ae(50));var r;return M(e)&&(r=e),e instanceof Me&&(r=this.maxLeftSelf+this._measuredWidthSelf*e.value-this.pixelPaddingLeft-this.ex),M(r)||(r=0),r},t.prototype.getTooltipY=function(){var e=this.getPropertyValue("tooltipY");T(e)||(e=ae(50));var r;return M(e)&&(r=e),e instanceof Me&&(r=this.maxTopSelf+this._measuredHeightSelf*e.value-this.pixelPaddingTop-this.ey),M(r)||(r=0),r},t.prototype.raiseCriticalError=function(e,r){this.svgContainer&&(this._adapterO?this.modal.content=this._adapterO.apply("criticalError",e).message:this.modal.content=e.message,r?this.modal.closable=!0:this.disabled=!0,we.suppressErrors||this.modal.open()),we.verbose&&console.log(e)},t.prototype.processConfig=function(e){e&&(T(e.tooltipColorSource)&&je(e.tooltipColorSource)&&this.map.hasKey(e.tooltipColorSource)&&(e.tooltipColorSource=this.map.getKey(e.tooltipColorSource)),T(e.cursorOverStyle)&&je(e.cursorOverStyle)&&(e.cursorOverStyle=this.getCursorStyle(e.cursorOverStyle)),T(e.cursorDowntyle)&&je(e.cursorDowntyle)&&(e.cursorDowntyle=this.getCursorStyle(e.cursorDowntyle)),T(e.cursorOptions)&&(T(e.cursorOptions.overStyle)&&je(e.cursorOptions.overStyle)&&(e.cursorOptions.overStyle=this.getCursorStyle(e.cursorOptions.overStyle)),T(e.cursorOptions.downStyle)&&je(e.cursorOptions.downStyle)&&(e.cursorOptions.downStyle=this.getCursorStyle(e.cursorOptions.downStyle)))),i.prototype.processConfig.call(this,e),this.processDelayedMap()},t.prototype.getCursorStyle=function(e){switch(e){case"grab":return Ft.grab;case"grabbing":return Ft.grabbing;case"pointer":return Ft.pointer;case"horizontalResize":return Ft.horizontalResize;case"verticalResize":return Ft.verticalResize;default:return Ft.default}},t.prototype.configOrder=function(e,r){return e==r?0:e=="tooltipColorSource"?1:r=="tooltipColorSource"?-1:i.prototype.configOrder.call(this,e,r)},Object.defineProperty(t.prototype,"isHidden",{get:function(){return this._isHidden?this._isHidden:this._parent?this._parent.isHidden:!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showOnInit",{get:function(){return this.getPropertyValue("showOnInit")},set:function(e){e=ot(e),this.setShowOnInit(e)},enumerable:!0,configurable:!0}),t.prototype.setShowOnInit=function(e){this.setPropertyValue("showOnInit",e)&&(this.isTemplate||(e&&!this.inited&&!this.hidden?(this._showOnInitDisposer=new tt([P.events.once("enterframe",this.hideInitially,this),this.events.once("beforevalidated",this.hideInitially,this,!1),this.events.on("inited",this.appear,this,!1)]),this._disposers.push(this._showOnInitDisposer)):this._showOnInitDisposer&&this._showOnInitDisposer.dispose()))},t.prototype.hideInitially=function(){this.isDisposed()||(this.appeared=!1,this.inited||this.hide(0))},t.prototype.appear=function(){var e=this;if(this.appeared=!1,!this.hidden&&!this.isHidden&&this.hide(0),this.hidden)this.appeared=!0,this.dispatch("appeared");else{var r=this.show();r&&!r.isFinished()?this.addDisposer(r.events.on("animationended",function(){e.appeared=!0,e.dispatch("appeared")})):(this.appeared=!0,this.dispatch("appeared"))}},Object.defineProperty(t.prototype,"hidden",{get:function(){return this.getPropertyValue("hidden")},set:function(e){e=ot(e),this.setPropertyValue("hidden",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this._bbox},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"plugins",{get:function(){var e=this;return this._plugins||(this._plugins=new Ie,this._disposers.push(this._plugins.events.on("inserted",function(r){r.newValue.target=e,r.newValue.init()})),this._disposers.push(new St(this._plugins))),this._plugins},enumerable:!0,configurable:!0}),t.prototype._systemUpdate=function(e){this.validate()},t.prototype._systemCheckIfValidate=function(){return!0},t.prototype._systemValidatePositions=function(){this.validatePosition()},t.prototype._systemValidateLayouts=function(){},t}(ni);P.registeredClasses.Sprite=Se;var id=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="Rectangle",e.element=e.paper.add("rect"),e.applyTheme(),e}return t.prototype.draw=function(){i.prototype.draw.call(this);var e=this._positionPrecision;this.pixelPerfect&&(e=0);var r=oe(this.innerWidth,e),o=oe(this.innerHeight,e);this.element.attr({width:r,height:o})},t.prototype.measureElement=function(){},Object.defineProperty(t.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.isMeasured?{x:0,y:0,width:this.innerWidth,height:this.innerHeight}:{x:0,y:0,width:0,height:0}},enumerable:!0,configurable:!0}),t}(Se);P.registeredClasses.Rectangle=id;var _e=function(i){A(t,i);function t(){var e=i.call(this)||this;return e._childrenByLayout=[],e._childrenDisposers=new Be,e.hasFocused=!1,e.setStateOnSprites=[],e.layoutInvalid=!1,e._absoluteWidth=0,e._absoluteHeight=0,e._shouldBeReady=[],e._tapToActivate=!1,e.tapTimeout=3e3,e.className="Container",e._element=e.paper.addGroup("g"),e.group.add(e.element),e.setPropertyValue("pixelPerfect",!1),e.setPropertyValue("layout","absolute"),e.setPropertyValue("fixedWidthGrid",!1),e.setPropertyValue("verticalCenter","none"),e.setPropertyValue("horizontalCenter","none"),e._positionPrecision=4,e._disposers.push(new ao(e._childrenDisposers)),e.children.events.on("inserted",e.handleChildAdded,e),e.children.events.on("removed",e.handleChildRemoved,e),e.applyTheme(),e}return t.prototype.handleChildAdded=function(e){this.processChild(e.newValue)},t.prototype.processChild=function(e){try{this._childrenDisposers.insertKey(e.uid,new tt([e.events.on("transformed",this.handleChildTransform,this),e.events.on("zIndexChanged",this.sortAndAdd,this)]))}catch{}if(this.element){var r=this.element;r.add(e.group)}e.parent=this,e.paper=this.paper,this.dispatchImmediately("childadded",{type:"childadded",newValue:e}),this.invalidate()},t.prototype.sortAndAdd=function(){this.sortChildren(),this.addChildren()},t.prototype.handleChildRemoved=function(e){var r=e.oldValue;if(this._childrenDisposers.removeKey(r.uid),this.element){var o=this.element;o.removeElement(r.group)}r.isMeasured&&this.invalidateLayout(),this.dispatchImmediately("childremoved",{type:"childremoved",oldValue:r})},t.prototype.handleChildTransform=function(e){var r=e.target;r.isMeasured&&this.invalidateLayout()},t.prototype.invalidateLayout=function(){this.layoutInvalid||this.disabled||this.isTemplate||this.layout=="none"||this.__disabled||(this.layoutInvalid=!0,P.addToInvalidLayouts(this),Ee.requestFrame())},t.prototype.invalidate=function(){i.prototype.invalidate.call(this),this.invalidateLayout()},t.prototype.deepInvalidate=function(){i.prototype.invalidate.call(this),Z(this._childrenByLayout,function(e){e instanceof t?e.deepInvalidate():e.invalidate()}),this.invalidateLayout()},Object.defineProperty(t.prototype,"children",{get:function(){return this._children||(this._children=new Ie),this._children},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth")},set:function(e){this.setPropertyValue("minWidth",e)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minHeight",{get:function(){return this.getPropertyValue("minHeight")},set:function(e){this.setPropertyValue("minHeight",e)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),t.prototype.removeElement=function(){},t.prototype.sortChildren=function(){var e=this;if(this._childrenByLayout=[],this.layout=="none"||this.layout=="absolute"||!this.layout)this._childrenByLayout=this.children.values;else{var r=[],o=[];de(this.children.iterator(),function(n){e.layout=="horizontal"||e.layout=="grid"?M(n.percentWidth)?o.push(n):r.push(n):e.layout=="vertical"&&M(n.percentHeight)?o.push(n):r.push(n)}),this._childrenByLayout=r.concat(o)}this.calculateRelativeSize()},t.prototype.calculateRelativeSize=function(){var e=this,r=0,o=0;Z(this._childrenByLayout,function(n){n.isMeasured&&(M(n.percentWidth)&&(r+=n.percentWidth),M(n.percentHeight)&&(o+=n.percentHeight))}),Z(this._childrenByLayout,function(n){n.isMeasured&&(e.layout=="horizontal"&&(M(n.percentWidth)&&(n.relativeWidth=n.percentWidth/r),M(n.percentHeight)&&(n.relativeHeight=n.percentHeight/100)),e.layout=="vertical"&&(M(n.percentHeight)&&(n.relativeHeight=n.percentHeight/o),M(n.percentWidth)&&(n.relativeWidth=n.percentWidth/100)),e.layout=="grid"&&(M(n.percentHeight)&&(n.relativeHeight=n.percentHeight/100),M(n.percentWidth)&&(n.relativeWidth=n.percentWidth/100))),(e.layout=="absolute"||!n.isMeasured)&&(M(n.percentWidth)&&(n.relativeWidth=n.percentWidth/100),M(n.percentHeight)&&(n.relativeHeight=n.percentHeight/100))})},t.prototype.addChildren=function(){if(this.element){var e=Bn(this.children.values),r=e.map(function(l,d){return{idx:d,data:l}});r.sort(function(l,d){var u=l.data.zIndex||0,c=d.data.zIndex||0;return u<c?-1:u>c?1:l.idx-d.idx}),e=r.map(function(l){return l.data});var o=this.element,n=!0;if(o.node&&o.node.childNodes){for(var s=0,a=o.node.childNodes.length;s<a;s++)if(o.node.childNodes[s]!=e[s].group.node){n=!1;break}}n||(Z(e,function(l){l.group&&o.add(l.group)}),this._background&&this.group.addToBack(this._background.group),this.invalidateLayout())}},t.prototype.createChild=function(e){var r=new e;return r.parent=this,r},t.prototype.removeChildren=function(){for(;this.children.length>0;){var e=this.children.getIndex(0);e.parent=void 0,this.children.removeValue(e)}},t.prototype.disposeChildren=function(){for(;this.children.length>0;){var e=this.children.getIndex(0);e.dispose(),this.children.removeValue(e)}},Object.defineProperty(t.prototype,"background",{get:function(){return this._background||(this._background=this.createBackground(),this.processBackground()),this._background},set:function(e){this._background&&this.background!=e&&this.removeDispose(this._background),e&&(this._background=e,this._disposers.push(e),this.processBackground())},enumerable:!0,configurable:!0}),t.prototype.handleGlobalScale=function(){i.prototype.handleGlobalScale.call(this),this.children.each(function(e){e.handleGlobalScale()})},t.prototype.createBackground=function(){return new id},t.prototype.processBackground=function(){var e=this._background;e&&(e.isMeasured=!1,this._background.fill=new Le().getFor("background"),e.parent=this,e.isMeasured=!1,this.children.removeValue(e),this._disposers.push(e),this.group.addToBack(this._background.group))},t.prototype.validateLayout=function(){var e=this;P.removeFromInvalidLayouts(this),this.layoutInvalid=!1,this._availableWidth=this.innerWidth,this._availableHeight=this.innerHeight;var r=0,o=0,n=!0;this.children&&(this.sortChildren(),Z(this._childrenByLayout,function(s){var a,l;if(M(s.relativeWidth)?(a=oe(e._availableWidth*s.relativeWidth,2),e.layout=="horizontal"&&(a-=s.pixelMarginRight+s.pixelMarginLeft)):e.layout=="horizontal"&&s.invalid&&s.validate(),M(s.relativeHeight)?(l=oe(e._availableHeight*s.relativeHeight,2),e.layout=="vertical"&&(l-=s.pixelMarginTop+s.pixelMarginBottom)):e.layout=="vertical"&&s.invalid&&s.validate(),s.invalid==!1){if(M(s.relativeWidth)&&(s.maxWidth=a),M(s.relativeHeight)&&(s.maxHeight=l),s.isMeasured){e.layout=="horizontal"&&(M(s.percentWidth)||s.measuredWidth>0&&(e._availableWidth-=s.measuredWidth+s.pixelMarginLeft+s.pixelMarginRight)),e.layout=="vertical"&&(M(s.percentHeight)||s.measuredHeight>0&&(e._availableHeight-=s.measuredHeight+s.pixelMarginTop+s.pixelMarginBottom));var d=s.measuredWidth,u=s.measuredHeight;s.align!="none"&&(d+=s.pixelMarginLeft+s.pixelMarginRight),s.valign!="none"&&(u+=s.pixelMarginTop+s.pixelMarginBottom),r=Math.max(r,d),o=Math.max(o,u)}}else s.isMeasured&&(M(s.relativeWidth)&&s.maxWidth!=a&&(s.maxWidth=a,n=!1),M(s.relativeHeight)&&s.maxHeight!=l&&(s.maxHeight=l,n=!1))})),this._absoluteWidth=r,this._absoluteHeight=o,n&&this.arrange()},t.prototype.arrange=function(){var e=this,r=this.children,o=0,n=0,s=ze(this.innerWidth,this._absoluteWidth),a=ze(this.innerHeight,this._absoluteHeight),l,d,u,c,h=this.pixelPaddingLeft,p=this.pixelPaddingRight,f=this.pixelPaddingTop,C=this.pixelPaddingBottom,b=0,x=0,S=0,R=0,I=[],F=[],L,V,k,G=this.maxWidth,ge=this.maxHeight,le=this.minWidth,Je=this.minHeight,Ne=Bn(r.values);if(this.reverseOrder&&Ne.reverse(),this.layout=="grid"){V=G,L=1;for(var Ai=0,ko=Ne.length;Ai<ko;Ai++){var be=Ne[Ai];if(be.isMeasured&&!be.disabled&&!be.__disabled){var Dn=be.measuredWidth;Dn<V&&(V=Dn),Dn>L&&(L=Dn)}}V=De(V,1,G),L=De(L,1,G),this.fixedWidthGrid?k=G/L:k=G/V,k=ze(1,Math.floor(k)),k=st(this.maxColumns,k),I=this.getColumnWidth(Ne,k,L)}for(var Zi,Oi,Vo,ki,Ai=0,ko=Ne.length;Ai<ko;Ai++){var be=Ne[Ai];if(be.isMeasured&&!be.disabled&&!be.__disabled){var $t=void 0,Jt=void 0,co=be.pixelMarginLeft,Go=be.pixelMarginRight,Yn=be.pixelMarginTop,ho=be.pixelMarginBottom,Tn=be.measuredWidth,Xn=be.measuredHeight,Pn=void 0,dd=void 0,ud=void 0,pc=void 0;switch(this.layout){case"none":break;case"absolute":switch(be.align){case"left":$t=co-be.maxLeft;break;case"center":$t=(s-Tn)/2-be.maxLeft;break;case"right":$t=s-Go-be.maxRight;break;default:be.x instanceof Me||($t=be.pixelX);break}switch(be.valign){case"top":Jt=Yn-be.maxTop;break;case"middle":Jt=(a-Xn)/2-be.maxTop;break;case"bottom":Jt=a-ho-be.maxBottom;break;default:be.y instanceof Me||(Jt=be.pixelY);break}break;case"vertical":switch(be.align){case"left":$t=co-be.maxLeft;break;case"center":$t=(s-Tn)/2-be.maxLeft;break;case"right":$t=s-Go-be.maxRight;break;default:$t=be.pixelX;break}Jt=x+Yn-be.maxTop,x=Jt+be.maxBottom+ho;break;case"horizontal":switch(be.valign){case"top":Jt=Yn-be.maxTop;break;case"middle":Jt=(a-Xn)/2-be.maxTop;break;case"bottom":Jt=a-ho-be.maxBottom;break;default:Jt=be.pixelY;break}$t=b+co-be.maxLeft,b=$t+be.maxRight+Go;break;case"grid":switch($t=b+co-be.maxLeft,be.valign){case"top":Jt=x+Yn-be.maxTop;break;case"middle":Jt=x+(a-Xn)/2-be.maxTop;break;case"bottom":Jt=x+a-ho-be.maxBottom;break;default:Jt=x-be.maxTop;break}b+=I[R],F[S]=ze(F[S],Xn),R++;var Eg=I[R];if(M(Eg)||(Eg=L),b>st(this.innerWidth,G)-Eg+1&&R<k){k=R,b=0,x=0,S=0,R=0,I=this.getColumnWidth(Ne,k,L),F=[],Ai=-1;continue}R>=k&&(R=0,x+=F[S],S++,b=0);break}this.layout!=="none"&&(be.moveTo({x:$t,y:Jt}),Pn=$t+be.maxLeft-co,dd=$t+be.maxRight+Go,ud=Jt+be.maxTop-Yn,pc=Jt+be.maxBottom+ho,(dd>d||!M(d))&&(d=dd),(Pn<l||!M(l))&&(l=Pn),(ud<u||!M(u))&&(u=ud),(pc>c||!M(c))&&(c=pc),(dd>Oi||!M(Oi))&&(Oi=dd),(Pn<Zi||!M(Zi))&&(Zi=Pn),(ud<Vo||!M(Vo))&&(Vo=ud),(pc>ki||!M(ki))&&(ki=ki))}else be.validatePosition()}if(this.layout=="none"){var Ia=this.bbox;l=Ia.x,d=Ia.x+Ia.width,u=Ia.y,c=Ia.y+Ia.height}M(l)||(l=0,Zi=0),M(d)||(d=this._availableWidth,Oi=d),M(u)||(u=0,Vo=0),M(c)||(c=this._availableHeight,ki=c),M(Vo)||(Vo=0),M(ki)||(ki=Vo),M(Zi)||(Zi=0),M(Oi)||(Oi=Zi),o=d-l,n=c-u,M(this.relativeWidth)&&(o=G-h-p,l=0,d=o),M(this.relativeHeight)&&(n=ge-f-C,u=0,c=n),M(this._pixelWidth)&&(l=0,o=this._pixelWidth-h-p),M(le)&&o<le&&(l=0,o=this.minWidth-h-p),M(this._pixelHeight)&&(u=0,n=this._pixelHeight-f-C),M(Je)&&n<Je&&(u=0,n=Je-f-C);var gc=Oi-Zi,fc=ki-Vo;if(this.layout!="none"&&(this.contentAlign||this.contentValign)&&r.length>0){var mc,vc,yc=o,Cc=n;yc<gc&&(yc=gc),Cc<fc&&(Cc=fc),this.contentAlign=="center"&&(mc=(yc-gc)/2),this.contentAlign=="right"&&(mc=yc-gc),this.contentValign=="middle"&&(vc=(Cc-fc)/2),this.contentValign=="bottom"&&(vc=Cc-fc),M(mc)&&de(r.iterator(),function(Wt){var Fa=Wt.maxLeft,lr=mc;e.layout=="horizontal"&&(Wt.x=Wt.pixelX+lr),e.layout=="grid"&&(Wt.x=Wt.pixelX+lr),e.layout=="vertical"&&(lr+=Wt.pixelMarginLeft,Wt.align=="none"&&(Wt.x=lr-Fa)),e.layout=="absolute"&&(lr+=Wt.pixelMarginLeft,Wt.align=="none"&&(Wt.x=lr-Fa))}),M(vc)&&de(r.iterator(),function(Wt){var Fa=Wt.maxTop,lr=vc;e.layout=="horizontal"&&(lr+=Wt.pixelMarginTop,Wt.valign=="none"&&(Wt.y=lr-Fa)),e.layout=="grid"&&(lr+=Wt.pixelMarginTop,Wt.y=lr-Fa),e.layout=="vertical"&&(Wt.y=Wt.pixelY+lr),e.layout=="absolute"&&(lr+=Wt.pixelMarginTop,Wt.valign=="none"&&(Wt.y=lr-Fa))})}var Dg=this.bbox;o=ze(o,le),n=ze(n,Je),this.contentWidth=o,this.contentHeight=n,o=st(o,G),n=st(n,ge),this._bbox={x:l,y:u,width:o,height:n};var ax=this.maxLeft,lx=this.maxTop,dx=this.maxBottom,ux=this.maxRight;if(this.measure(),(ax!=this.maxLeft||ux!=this.maxRight||lx!=this.maxTop||dx!=this.maxBottom)&&this.events.isEnabled("transformed")){var Yv={type:"transformed",target:this};Dg&&(Yv.dummyData=Dg.width+" "+o+"  "+Dg.height+" "+n),this.events.dispatchImmediately("transformed",Yv)}this.dispatchImmediately("layoutvalidated")},t.prototype.updateCenter=function(){i.prototype.updateCenter.call(this),this.updateBackground()},t.prototype.updateBackground=function(){var e=this._background;e&&(e.x=this.maxLeft,e.y=this.maxTop,e.width=this.maxRight-this.maxLeft,e.height=this.maxBottom-this.maxTop)},t.prototype.getColumnWidth=function(e,r,o){var n=this,s=[],a=0;return Z(e,function(l){l.isMeasured&&!l.disabled&&!l.__disabled&&(n.fixedWidthGrid?s[a]=o:s[a]=ze(s[a],l.measuredWidth+l.pixelMarginRight+l.pixelMarginLeft),a++,a==r&&(a=0))}),s},Object.defineProperty(t.prototype,"layout",{get:function(){return this.getPropertyValue("layout")},set:function(e){this.setPropertyValue("layout",e)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentValign",{get:function(){return this.getPropertyValue("contentValign")},set:function(e){this.setPropertyValue("contentValign",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentAlign",{get:function(){return this.getPropertyValue("contentAlign")},set:function(e){this.setPropertyValue("contentAlign",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fixedWidthGrid",{get:function(){return this.getPropertyValue("fixedWidthGrid")},set:function(e){this.setPropertyValue("fixedWidthGrid",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxColumns",{get:function(){return this.getPropertyValue("maxColumns")},set:function(e){this.setPropertyValue("maxColumns",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reverseOrder",{get:function(){return this.getPropertyValue("reverseOrder")},set:function(e){this.setPropertyValue("reverseOrder",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setStateOnChildren",{get:function(){return this.getPropertyValue("setStateOnChildren")},set:function(e){this.setPropertyValue("setStateOnChildren",e,!0)},enumerable:!0,configurable:!0}),t.prototype.fitsToBounds=function(e){var r=e.x,o=e.y,n=.5;return r>=-n&&r<=this.pixelWidth+n&&o>=-n&&o<=this.pixelHeight+n},t.prototype.copyFrom=function(e){var r=this;i.prototype.copyFrom.call(this,e),this.layout=e.layout,this.setStateOnChildren=e.setStateOnChildren,e._background&&(this.background=e._background.clone(),this.background.copyFrom(e._background)),de(e.children.iterator(),function(o){if(o.shouldClone){var n=o.clone();n.parent=r}})},Object.defineProperty(t.prototype,"preloader",{get:function(){var e=this._preloader;if(e)return e;if(this.parent)return this.parent.preloader},set:function(e){this._preloader&&this.removeDispose(this._preloader),this._preloader=e,e&&(e.parent=this.tooltipContainer,this._disposers.push(e))},enumerable:!0,configurable:!0}),t.prototype.setPaper=function(e){var r=this,o=i.prototype.setPaper.call(this,e);return o&&(this._background&&(this._background.paper=e,this._background.topParent=this.topParent),this.children.each(function(n){n.setPaper(e),n.topParent=r.topParent})),o},t.prototype.removeFromInvalids=function(){i.prototype.removeFromInvalids.call(this),P.removeFromInvalidLayouts(this)},t.prototype.setDataItem=function(e){this._dataItem!=e&&(de(this.children.iterator(),function(r){r.dataItem=e}),this._background&&(this._background.dataItem=e)),i.prototype.setDataItem.call(this,e)},t.prototype.measureElement=function(){this.disabled||this.isTemplate||this.layout=="none"||this.__disabled||this.validateLayout()},Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this.getPropertyValue("fontFamily")},set:function(e){this.setPropertyValue("fontFamily",e,!0)&&(this.setSVGAttribute({"font-family":e}),this.invalidateLabels())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this.getPropertyValue("fontSize")},set:function(e){this.setPropertyValue("fontSize",e,!0)&&(this.setSVGAttribute({"font-size":e}),this.invalidateLabels())},enumerable:!0,configurable:!0}),t.prototype.invalidateLabels=function(){this.children.each(function(e){e.hardInvalidate?(e.hardInvalidate(),e.events.once("validated",e.handleValidate,e,!1)):e instanceof t&&e.invalidateLabels()})},Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this.getPropertyValue("fontWeight")},set:function(e){this.setPropertyValue("fontWeight",e),this.setSVGAttribute({"font-weight":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textDecoration",{get:function(){return this.getPropertyValue("textDecoration")},set:function(e){this.setPropertyValue("textDecoration",e),this.setSVGAttribute({"text-decoration":e})},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._background&&this._background.dispose(),this._shouldBeReady=[],this.disposeChildren(),i.prototype.dispose.call(this)},t.prototype.setState=function(e,r,o){var n=e;return e instanceof wa&&(n=e.name),this.setStateOnChildren&&de(this.children.iterator(),function(s){s.setState(n,r,o),n!="active"&&(s.isActive=!1)}),this._background&&this._background.setState(n),this.setStateOnSprites.length&&Z(this.setStateOnSprites,function(s){s.setState(n,r,o)}),i.prototype.setState.call(this,e,r,o)},t.prototype.setActive=function(e){i.prototype.setActive.call(this,e),this._background&&(this._background.isActive=e)},t.prototype.dispatchReady=function(){var e=this;if(!this.isReady()&&!this.isDisposed()){var r=!0;$l(this.children.iterator(),function(o){return!o.__disabled&&!o.disabled&&!o.isReady()?(r=!1,!1):!0}),Cp(this._shouldBeReady,function(o){return!o.__disabled&&!o.disabled&&!o.isReady()?(r=!1,!1):!0}),r?i.prototype.dispatchReady.call(this):P.events.once("exitframe",function(){e.dispatchReady(),Ee.requestFrame()},void 0,!1)}},t.prototype._systemUpdate=function(e){this.children.each(function(r){r.invalid&&(r._systemCheckIfValidate()?r.dataItem&&r.dataItem.component&&r.dataItem.component.dataInvalid?e.push(r):r.validate():e.push(r))}),i.prototype._systemUpdate.call(this,e)},t.prototype._systemValidatePositions=function(){this.children.each(function(e){e.positionInvalid&&e.validatePosition()}),i.prototype._systemValidatePositions.call(this)},t.prototype._systemValidateLayouts=function(){this.layoutInvalid&&!this.isDisposed()&&this.validateLayout()},Object.defineProperty(t.prototype,"tapToActivate",{get:function(){return this._tapToActivate},set:function(e){this._tapToActivate!=e&&this.setTapToActivate(e)},enumerable:!0,configurable:!0}),t.prototype.setTapToActivate=function(e){var r=this;this._tapToActivate=e,this.interactions.isTouchProtected=e,e&&this.interactions.setEventDisposer("container-tapToActivate",e,function(){return new tt([r.events.on("hit",r.handleTapToActivate,r,!1),r.events.on("down",r.initTapTimeout,r,!1),r.events.on("track",r.initTapTimeout,r,!1),ye().body.events.on("down",function(o){ye().isLocalElement(o.pointer,r.paper.svg,r.uid)||r.handleTapToActivateDeactivation()},r,!1)])}),ye()},t.prototype.handleTapToActivate=function(){this.interactions.isTouchProtected=!1,this.initTapTimeout()},t.prototype.handleTapToActivateDeactivation=function(){this.interactions.isTouchProtected=!0},t.prototype.initTapTimeout=function(){var e=this;this._tapToActivateTimeout&&this._tapToActivateTimeout.dispose(),this.tapToActivate&&!this.interactions.isTouchProtected&&this.tapTimeout&&(this._tapToActivateTimeout=this.setTimeout(function(){e.handleTapToActivateDeactivation()},this.tapTimeout))},t.prototype.moveHtmlContainer=function(e){var r=Hu(e);if(r){this.htmlContainer=r;var o=this.svgContainer;o.htmlElement=r,o.htmlElement.appendChild(o.SVGContainer),o.initSensor(),o.measure()}else je(e)&&e!=""&&Ee.log("html container '"+e+"' not found")},t.prototype.hasLicense=function(){if(we.commercialLicense)return!0;for(var e=0;e<we.licenses.length;e++)if(we.licenses[e].match(/^CH.{5,}/i))return!0;return!1},t}(Se);P.registeredClasses.Container=_e;var KS=function(){function i(){this._isPaused=!1,this.animations=[],this.uid=P.getUniqueId(),this.dummyCounter=0,this._frameRequested=!1,this.updateStepDuration=45,this.time=Date.now()}return i.prototype.reportTime=function(t,e){this.dummyCounter<6,e&&(this.time=Date.now())},i.prototype.update=function(){var t=this;if(!this._isPaused){this._frameRequested=!1;var e=Date.now();P.dispatchImmediately("enterframe");var r=[];for(var o in P.invalidDatas)if(so(P.invalidDatas,o)){for(var n=P.invalidDatas[o];n.length>0;){var s=n[0],a=s.dataProvider;if(s.isDisposed())ve(n,s);else if(a&&a.dataInvalid)try{if(a.validateData(),a.dataValidationProgress<1)break}catch(c){ve(n,a),a.raiseCriticalError(c)}else try{if(s.validateData(),s.dataValidationProgress<1)break}catch(c){ve(n,s),s.raiseCriticalError(c)}}if(Date.now()-e>this.updateStepDuration)break}for(;P.invalidRawDatas.length>0;){var s=P.invalidRawDatas[0];if(s.isDisposed())ve(P.invalidRawDatas,s);else try{s.validateRawData()}catch(h){ve(P.invalidRawDatas,s),s.raiseCriticalError(h)}}for(;P.invalidDataItems.length>0;){var s=P.invalidDataItems[0],a=s.dataProvider;if(!(s.isDisposed()||s.dataInvalid||a&&a.dataInvalid))try{s.validateDataItems()}catch(p){ve(P.invalidDataItems,s),s.raiseCriticalError(p)}ve(P.invalidDataItems,s)}for(;P.invalidDataRange.length>0;){var s=P.invalidDataRange[0],a=s.dataProvider;if(!(s.isDisposed()||s.dataInvalid||a&&a.dataInvalid))try{s.validateDataRange(),s.skipRangeEvent||s.dispatchImmediately("datarangechanged"),s.skipRangeEvent=!1}catch(p){ve(P.invalidDataRange,s),s.raiseCriticalError(p)}ve(P.invalidDataRange,s)}var l=[];ne(P.invalidLayouts,function(c){t.validateLayouts(c)}),ne(P.invalidPositions,function(c){t.validatePositions(c)});var d=!1;if(e=Date.now(),ne(P.invalidSprites,function(c,h){for(var p=0;h.length>0;){if(t.validateLayouts(c),t.validatePositions(c),p++,p==5){if(Date.now()-e>t.updateStepDuration)break;p=0}var f=h[h.length-1];if(f&&!f.isDisposed()){if(!f._systemCheckIfValidate())l.push(f);else if(!t.checkIfValidate2(f))l.push(f);else try{f._systemUpdate(l)}catch(C){f.invalid=!1,ve(h,f),f.raiseCriticalError(C)}f.invalid=!1}ve(h,f)}P.invalidSprites[c]=P.invalidSprites[c].concat(l)}),ne(P.invalidSprites,function(c,h){h.length>0&&(d=!0)}),ne(P.invalidDatas,function(c,h){h.length>0&&(d=!0)}),Z(Bn(this.animations),function(c){c.update()}),ne(P.invalidLayouts,function(c){t.validateLayouts(c)}),ne(P.invalidPositions,function(c){t.validatePositions(c)}),Vm(),ne(P.invalidLayouts,function(c){t.validateLayouts(c)}),ne(P.invalidPositions,function(c){t.validatePositions(c)}),P.dispatchImmediately("exitframe"),(d||this.animations.length>0||r.length>0)&&this.requestFrame(),this.updateStepDuration<200){var u=!0;ne(P.invalidDatas,function(c,h){h.length>0&&(u=!1)}),ne(P.invalidSprites,function(c,h){h.length>0&&(u=!1)}),u&&(this.updateStepDuration=200)}}},i.prototype.checkIfValidate2=function(t){return!(t.dataItem&&t.dataItem.component&&t.dataItem.component.dataInvalid&&!t.dataItem.component.isTemplate)},i.prototype.requestFrame=function(){var t=this;this._frameRequested||(xp(function(){t.update()}),this._frameRequested=!0)},i.prototype.softInvalidate=function(t){var e=this;t.children.each(function(r){r instanceof _e&&e.softInvalidate(r),r.measureFailed&&(Si(r,"Label")?r.hardInvalidate():r.invalidate(),r.measureFailed=!1)})},i.prototype.validatePositions=function(t){for(var e=P.invalidPositions[t];e.length>0;){var r=e[e.length-1];if(r.isDisposed())ve(e,r);else try{r._systemValidatePositions()}catch(o){r.positionInvalid=!1,ve(e,r),r.raiseCriticalError(o)}}},i.prototype.validateLayouts=function(t){for(var e=P.invalidLayouts[t];e.length>0;){var r=e[e.length-1];if(r.isDisposed())ve(e,r);else try{r.children.each(function(o){o._systemValidateLayouts()}),r.validateLayout()}catch(o){r.layoutInvalid=!1,ve(e,r),r.raiseCriticalError(o)}}},i.prototype.log=function(t){HS(t)},Object.defineProperty(i.prototype,"isPaused",{get:function(){return this._isPaused},set:function(t){this._isPaused=t,t||(this._frameRequested=!1,this.requestFrame())},enumerable:!0,configurable:!0}),i.VERSION="4.10.39",i}();var Ee=new KS;var Yu=function(){function i(){}return i.prototype.parse=function(t){return[]},Object.defineProperty(i.prototype,"parsableNumbers",{get:function(){return this.options.numberFields&&this.options.numberFields.length>0},enumerable:!0,configurable:!0}),i.prototype.maybeToNumber=function(t,e){return this.options.numberFields.indexOf(t)!==-1?Lu(e):e},Object.defineProperty(i.prototype,"parsableDates",{get:function(){return this.options.dateFields&&this.options.dateFields.length>0},enumerable:!0,configurable:!0}),i.prototype.maybeToDate=function(t,e){return this.options.dateFields.indexOf(t)!==-1?this.options.dateFormatter.parse(e,this.dateFormat):e},i.prototype.maybeToEmpty=function(t){return(!T(t)||t=="")&&T(this.options.emptyAs)?this.options.emptyAs:t},Object.defineProperty(i.prototype,"dateFormatter",{get:function(){return this.options.dateFormatter||(this.options.dateFormatter=new _n,this.options.dateFormat&&(this.options.dateFormat=this.options.dateFormat)),this.options.dateFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dateFormat",{get:function(){return this.options.dateFormat||this.dateFormatter.inputDateFormat},enumerable:!0,configurable:!0}),i}();var cM=[",",";","	"],Sa=function(i){A(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.contentType="text/csv",e.options={delimiter:"",reverse:!1,skipRows:0,skipEmpty:!0,useColumnNames:!1},e}return t.isCSV=function(e){return!!t.getDelimiterFromData(e)},t.getDelimiterFromData=function(e){var r=e.split(`
`),o=r.length,n;return Z(cM,function(s){for(var a=0,l=0,d=0;d<o;++d)if(a=r[d].split(s).length,a>1){if(l===0)l=a;else if(a!=l){l=0;break}}else{l=0;break}l&&(n=s)}),n},t.prototype.parse=function(e){this.options.delimiter||(this.options.delimiter=t.getDelimiterFromData(e));var r=this.CSVToArray(e,this.options.delimiter),o=T(this.options.emptyAs),n=this.parsableNumbers,s=this.parsableDates,a=[],l=[],d,u;for(u=0;u<this.options.skipRows;u++)r.shift();if(this.options.useColumnNames){l=r.shift();for(var c=0;c<l.length;c++)d=T(l[c])?l[c].replace(/^\s+|\s+$/gm,""):"",d===""&&(d="col"+c),l[c]=d}for(var h;h=this.options.reverse?r.pop():r.shift(),!!h;)if(!(this.options.skipEmpty&&h.length===1&&h[0]==="")){var p={};for(u=0;u<h.length;u++)d=l[u]===void 0?"col"+u:l[u],p[d]=h[u]===""?this.options.emptyAs:h[u],o&&(p[d]=this.maybeToEmpty(p[d])),n&&(p[d]=this.maybeToNumber(d,p[d])),s&&(p[d]=this.maybeToDate(d,p[d]));a.push(p)}return a},t.prototype.CSVToArray=function(e,r){r=r||",";for(var o=new RegExp("(\\"+r+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+r+"\\r\\n]*))","gi"),n=[[]],s=null;s=o.exec(e),!!s;){var a=s[1];a.length&&a!==r&&n.push([]);var l=void 0;s[2]?l=s[2].replace(new RegExp('""',"g"),'"'):l=s[3],n[n.length-1].push(l)}return n},t}(Yu);var Ss=function(i){A(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.contentType="application/json",e.options={},e}return t.isJSON=function(e){try{return JSON.parse(e),!0}catch{return!1}},t.prototype.parse=function(e){var r=this,o;try{T(JSON)&&(o=JSON.parse(e))}catch{return}var n=T(this.options.emptyAs),s=this.parsableNumbers,a=this.parsableDates;if(Array.isArray(o)&&(s||a||n))for(var l=function(c,h){var p=o[c];ne(p,function(f,C){n&&(p[f]=r.maybeToEmpty(p[f])),s&&(p[f]=r.maybeToNumber(f,p[f])),a&&(p[f]=r.maybeToDate(f,p[f]))})},d=0,u=o.length;d<u;d++)l(d,u);return o},t}(Yu);var YS=function(){function i(){this.adapter=new _t(this)}return i.prototype.load=function(t){var e=Array.isArray(t)?t:[t],r=Hn(e,function(o){return o.dispatchImmediately("started"),o.dispatchImmediately("loadstarted"),td(o.url,o,o.requestOptions)});Promise.all(r).then(function(o){Z(o,function(n){var s=n.target;s.dispatchImmediately("loadended"),n.error?s.events.isEnabled("error")&&s.events.dispatchImmediately("error",{type:"error",code:n.xhr.status,message:s.language.translate("Unable to load file: %1",null,s.url),target:s}):s.processData(n.response,n.type),s.dispatchImmediately("ended")})}).catch(function(o){o.target&&(o.target.dispatchImmediately("loadended"),o.target.events.isEnabled("error")&&o.target.events.dispatchImmediately("error",{type:"error",code:o.xhr.status,message:o.target.language.translate("Unable to load file: %1",null,o.target.url),target:o.target}),o.target.dispatchImmediately("ended"))})},i.prototype.getParserByType=function(t){var e=this.adapter.apply("getParserByType",{parser:null,type:t}).parser;if(e)return e;if(t=="csv"||t=="text/csv"||t=="application/vnd.ms-excel")return new Sa;if(t=="json"||t=="application/json")return new Ss},i.prototype.getParserByData=function(t,e){var r=this.adapter.apply("getParserByData",{parser:null,data:t,type:e}).parser;if(!r){if(r=this.getParserByType(e),r)return r;if(Ss.isJSON(t))return this.getParserByType("json");if(Sa.isCSV(t))return this.getParserByType("csv")}return r},i}();var Xu=new YS;var Ev=function(i){A(t,i);function t(e,r){var o=i.call(this)||this;return o.adapter=new _t(o),o._requestOptions={},o._incremental=!1,o._incrementalParams={},o._keepCount=!1,o._updateCurrentData=!1,o.showPreloader=!0,o.className="DataSource",e&&(o.url=e),r&&(typeof r=="string"?o.parser=Xu.getParserByType(r):o.parser=r),o}return t.prototype.processData=function(e,r){if(this.dispatchImmediately("parsestarted"),!this.parser&&(this.parser=Xu.getParserByData(e,r),!this.parser)){if(this.events.isEnabled("parseerror")){var o={type:"parseerror",message:this.language.translate("No parser available for file: %1",null,this.url),target:this};this.events.dispatchImmediately("parseerror",o)}this.dispatchImmediately("parseended");return}if(this.parser.options=this.adapter.apply("parserOptions",this.parser.options),this.parser.options.dateFields=this.adapter.apply("dateFields",this.parser.options.dateFields||[]),this.parser.options.numberFields=this.adapter.apply("numberFields",this.parser.options.numberFields||[]),this.parser.options.dateFields&&!this.parser.options.dateFormatter&&(this.parser.options.dateFormatter=this.dateFormatter),this.data=this.adapter.apply("parsedData",this.parser.parse(this.adapter.apply("unparsedData",e))),!T(this.data)&&this.events.isEnabled("parseerror")){var n={type:"parseerror",message:this.language.translate("Error parsing file: %1",null,this.url),target:this};this.events.dispatchImmediately("parseerror",n)}this.dispatchImmediately("parseended"),T(this.data)&&this.dispatchImmediately("done",{data:this.data}),this.lastLoad=new Date},Object.defineProperty(t.prototype,"url",{get:function(){var e=this.disableCache?this.timestampUrl(this._url):this._url;return this.incremental&&this.component.data.length&&(e=this.addUrlParams(e,this.incrementalParams)),this.adapter.apply("url",e)},set:function(e){this._url=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"requestOptions",{get:function(){return this.adapter.apply("requestOptions",this._requestOptions)},set:function(e){this._requestOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parser",{get:function(){return this._parser||(this._parser=new Ss),this.adapter.apply("parser",this._parser)},set:function(e){this._parser=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reloadFrequency",{get:function(){return this.adapter.apply("reloadTimeout",this._reloadFrequency)},set:function(e){var r=this;this._reloadFrequency!=e&&(this._reloadFrequency=e,e?T(this._reloadDisposer)||(this._reloadDisposer=this.events.on("ended",function(o){r._reloadTimeout=setTimeout(function(){r.load()},r.reloadFrequency)})):T(this._reloadDisposer)&&(this._reloadDisposer.dispose(),this._reloadDisposer=void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"incremental",{get:function(){return this.adapter.apply("incremental",this._incremental)},set:function(e){this._incremental=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"incrementalParams",{get:function(){return this.adapter.apply("incrementalParams",this._incrementalParams)},set:function(e){this._incrementalParams=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keepCount",{get:function(){return this.adapter.apply("keepCount",this._keepCount)},set:function(e){this._keepCount=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updateCurrentData",{get:function(){return this.adapter.apply("updateCurrentData",this._updateCurrentData)},set:function(e){this._updateCurrentData=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"language",{get:function(){return this._language?this._language:this.component?(this._language=this.component.language,this._language):(this.language=new Yi,this.language)},set:function(e){this._language=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dateFormatter",{get:function(){return this._dateFormatter?this._dateFormatter:this.component?(this._dateFormatter=this.component.dateFormatter,this._dateFormatter):(this.dateFormatter=new _n,this.dateFormatter)},set:function(e){this._dateFormatter=e},enumerable:!0,configurable:!0}),t.prototype.timestampUrl=function(e){var r=new Date().getTime().toString(),o={};return o[r]="",this.addUrlParams(e,o)},t.prototype.dispose=function(){i.prototype.dispose.call(this),this._reloadTimeout&&clearTimeout(this._reloadTimeout),T(this._reloadDisposer)&&(this._reloadDisposer.dispose(),this._reloadDisposer=void 0)},t.prototype.load=function(){this.url&&(this._reloadTimeout&&clearTimeout(this._reloadTimeout),Xu.load(this))},t.prototype.addUrlParams=function(e,r){var o=e.match(/\?/)?"&":"?",n=[];return ne(r,function(s,a){a!=""?n.push(s+"="+encodeURIComponent(a)):n.push(s)}),n.length?e+o+n.join("&"):e},t.prototype.processConfig=function(e){P.registeredClasses.json=Ss,P.registeredClasses.JSONParser=Ss,P.registeredClasses.csv=Sa,P.registeredClasses.CSVParser=Sa,i.prototype.processConfig.call(this,e)},t}(ni);var Dv=function(i){A(t,i);function t(){var e=i.call(this)||this;return e._rules=new Ie,e._appliedRules={},e._appliedTargets=[],e._useDefault=!0,e.adapter=new _t(e),e._enabled=!1,e._responsiveDisposers=[],e._noStates=[],e.className="Responsive",e.rules.events.on("inserted",function(){e.checkRules()},!0),e.rules.events.on("removed",function(){e.checkRules()},!0),e._disposers.push(e.rules.events),e.applyTheme(),e}return Object.defineProperty(t.prototype,"component",{get:function(){return this._component},set:function(e){var r=this;e!=this._component&&(this.disposeResponsiveHandlers(),this._component=e,this._responsiveDisposers.push(Ct(this.component).events.on("sizechanged",function(){r.checkRules()},this)),this._responsiveDisposers.push(Ct(this.component).events.once("datavalidated",function(){r._component.isReady()&&r.checkRules(!0)},this)),this.enabled=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this.adapter.apply("enabled",this._enabled)},set:function(e){this._enabled!=e&&(this._enabled=e,this.applyRules())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useDefault",{get:function(){return this.adapter.apply("useDefault",this._useDefault)},set:function(e){this._useDefault!=e&&(this._useDefault=e,this.applyRules())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rules",{get:function(){return this.adapter.apply("rules",this._rules)},set:function(e){this._rules=e,this._enabled=!0,this.applyRules()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultRules",{get:function(){return this.adapter.apply("defaultRules",Xi)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allRules",{get:function(){var e=new Ie;return this.useDefault&&e.copyFrom(this.defaultRules),e.copyFrom(this.rules),this.adapter.apply("allRules",e)},enumerable:!0,configurable:!0}),t.prototype.isApplied=function(e){var r=this._appliedRules[e];return T(r)?r:!1},t.prototype.checkRules=function(e){var r=this;e===void 0&&(e=!1);var o=this.allRules;if(!(!o||o.length==0)){var n=!1,s=Ct(this.component);if(!(s.pixelWidth==0||s.pixelHeight==0)&&(de(o.iterator(),function(a){a.id||(a.id=P.getUniqueId());var l=a.relevant(s);(l&&!r.isApplied(a.id)||!l&&r.isApplied(a.id))&&(n=!0),r._appliedRules[a.id]=l}),e&&(n=!0),n)){if(!this.component.isReady()){s.hidden=!0,s.events.once("ready",function(a){a.target.show(0),r._applyRules()});return}this.dispatchImmediately("ruleschanged"),this._applyRules()}}},t.prototype._applyRules=function(){var e=this;this._timeout&&this._timeout.dispose(),this._timeout=this.setTimeout(function(){e.applyRules()},10)},t.prototype.applyRules=function(e){var r=this,o=T(e)?e:Ct(this.component),n=!1;if(this.enabled){var s=!1;de(this.allRules.iterator(),function(a){var l=r.getState(a,o);l&&(n||(Mi(r._appliedTargets,o.uid)!==-1&&o.setState(r.getDefaultState(o),0),n=!0),r.isApplied(Ct(a.id))&&(l.transitionDuration=0,r.setTargetState(o,l),r.dispatchImmediately("ruleapplied",{rule:a}),s=!0))}),s?V0(this._appliedTargets,o.uid):ve(this._appliedTargets,o.uid)}o.children&&de(o.children.iterator(),function(a){r.applyRules(a)})},t.prototype.getState=function(e,r){var o="responsive-"+e.id,n=r.uid+"_"+o;if(Mi(this._noStates,n)===-1){if(r.states.hasKey(o))return r.states.getKey(o);var s=e.state(r,o);return s||this._noStates.push(n),s}},t.prototype.getDefaultState=function(e){return e.states.hasKey("responsive-default")?e.states.getKey("responsive-default"):e.states.create("responsive-default")},t.prototype.setTargetState=function(e,r){var o=this,n=this.getDefaultState(e);ne(r.properties,function(s,a){T(n.properties[s])||(n.properties[s]=o.getValue(e,s))}),e.setState(r)},t.prototype.getValue=function(e,r){var o=e.getPropertyValue(r);return!T(o)&&T(e[r])&&(o=e[r]),o},t.prototype.dispose=function(){this.disposeResponsiveHandlers(),i.prototype.dispose.call(this)},t.prototype.disposeResponsiveHandlers=function(){for(var e=this._responsiveDisposers.pop();e;)e.dispose(),e=this._responsiveDisposers.pop()},t}(ni);var Xi=new Ie;Xi.events.on("inserted",function(i){i.newValue.id=P.getUniqueId()});var zr=function(){function i(){}return i.widthXXS=function(t){return t.pixelWidth<=i.XXS},i.widthXS=function(t){return t.pixelWidth<=i.XS},i.widthS=function(t){return t.pixelWidth<=i.S},i.widthM=function(t){return t.pixelWidth<=i.M},i.widthL=function(t){return t.pixelWidth<=i.L},i.widthXL=function(t){return t.pixelWidth<=i.XL},i.widthXXL=function(t){return t.pixelWidth<=i.XXL},i.heightXXS=function(t){return t.pixelHeight<=i.XXS},i.heightXS=function(t){return t.pixelHeight<=i.XS},i.heightS=function(t){return t.pixelHeight<=i.S},i.heightM=function(t){return t.pixelHeight<=i.M},i.heightL=function(t){return t.pixelHeight<=i.L},i.heightXL=function(t){return t.pixelHeight<=i.XL},i.heightXXL=function(t){return t.pixelHeight<=i.XXL},i.isXXS=function(t){return t.pixelWidth<=i.XXS&&t.pixelHeight<=i.XXS},i.isXS=function(t){return t.pixelWidth<=i.XS&&t.pixelHeight<=i.XS},i.isS=function(t){return t.pixelWidth<=i.S&&t.pixelHeight<=i.S},i.isM=function(t){return t.pixelWidth<=i.M&&t.pixelHeight<=i.M},i.isL=function(t){return t.pixelWidth<=i.L&&t.pixelHeight<=i.L},i.isXL=function(t){return t.pixelWidth<=i.XL&&t.pixelHeight<=i.XL},i.isXXL=function(t){return t.pixelWidth<=i.XXL&&t.pixelHeight<=i.XXL},i.maybeXXS=function(t){return t.pixelWidth<=i.XXS||t.pixelHeight<=i.XXS},i.maybeXS=function(t){return t.pixelWidth<=i.XS||t.pixelHeight<=i.XS},i.maybeS=function(t){return t.pixelWidth<=i.S||t.pixelHeight<=i.S},i.maybeM=function(t){return t.pixelWidth<=i.M||t.pixelHeight<=i.M},i.maybeL=function(t){return t.pixelWidth<=i.L||t.pixelHeight<=i.L},i.maybeXL=function(t){return t.pixelWidth<=i.XL||t.pixelHeight<=i.XL},i.maybeXXL=function(t){return t.pixelWidth<=i.XXL||t.pixelHeight<=i.XXL},i.XXS=100,i.XS=200,i.S=300,i.M=400,i.L=600,i.XL=800,i.XXL=1e3,i}();var xn=function(i){A(t,i);function t(){var e=i.call(this)||this;return e._disabled=!1,e.hasProperties=!1,e.values={},e.categories={},e.dates={},e.locations={},e.workingLocations={},e.properties={},e.sprites=[],e.isTemplate=!1,e._index=null,e._visible=!0,e._hidden=!1,e._ignoreMinMax=!1,e.hasChildren={},e.isHiding=!1,e._valueAnimations={},e._locationAnimations={},e.className="DataItem",e.applyTheme(),e}return Object.defineProperty(t.prototype,"adapter",{get:function(){return this._adapterO||(this._adapterO=new _t(this)),this._adapterO},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.component&&this._index!=null?this._index:-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new lo(this._animations))),this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._hidden?!1:this._visible},set:function(e){e&&(this.hidden=!1),this._visible!=e&&this.setVisibility(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hidden",{get:function(){return this._hidden},set:function(e){this._hidden!=e&&(this._hidden=e,e?this.setVisibility(!1):this.setVisibility(!0,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"__disabled",{get:function(){return this._disabled},set:function(e){this._disabled=e,Z(this.sprites,function(r){r.__disabled=e})},enumerable:!0,configurable:!0}),t.prototype.setVisibility=function(e,r){if(Z(this.sprites,function(n){e?n.visible=n.defaultState.properties.visible:n.hiddenState?n.visible=n.hiddenState.properties.visible:n.visible=!1}),this._visible=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("visibilitychanged")){var o={type:"visibilitychanged",target:this,visible:e};this.events.dispatchImmediately("visibilitychanged",o)}},t.prototype.show=function(e,r,o){var n=this;if(!this.hidden){this.setVisibility(!0,!0),this.isHiding=!1,this._hideDisposer&&this.removeDispose(this._hideDisposer);var s;return o&&Z(o,function(a){s=n.setWorkingValue(a,n.values[a].value,e,r)}),Z(this.sprites,function(a){var l=a.show(e);l!=null&&!l.isFinished()&&(n._disposers.push(l),r!=null&&r>0&&l.delay(r))}),s}},t.prototype.dispose=function(){i.prototype.dispose.call(this),Z(this.sprites,function(e){e.dispose()}),this.sprites=[]},t.prototype.hide=function(e,r,o,n){var s=this;if(this.isHiding=!0,Z(this.sprites,function(l){var d=l.hide(e);d!=null&&!d.isFinished()&&(s._disposers.push(d),r!=null&&r>0&&d.delay(r))}),M(o)&&n){var a;if(Z(n,function(l){var d=s.setWorkingValue(l,o,e,r);d&&(a=d)}),a&&!a.isFinished())return this._hideDisposer=a.events.on("animationended",function(){s.setVisibility(!1,!0),s.isHiding=!1}),this._disposers.push(this._hideDisposer),a;this.isHiding=!1,this.setVisibility(!1,!0)}else this.isHiding=!1,this.setVisibility(!1)},t.prototype.getDuration=function(e){if(!M(e)){var r=this.component;r&&(e=r.interpolationDuration)}if(e!=null)return this._adapterO?this._adapterO.apply("duration",e):e},t.prototype.getValue=function(e,r){if(e&&this.component){r||(r=this.component.dataFields[e+"Show"],r||(r="value"));var o=this.values[e][r];return this._adapterO&&this._adapterO.isEnabled("value")?this._adapterO.apply("value",{value:o,field:e}).value:o}},t.prototype.getWorkingValue=function(e){if(e&&this.component){var r=this.component.dataFields[e+"Show"];return r||(r="workingValue"),this._adapterO?this._adapterO.apply("workingValue",{workingValue:this.values[e][r],field:e}).workingValue:this.values[e][r]}},t.prototype.getActualWorkingValue=function(e){return this.values[e].workingValue},t.prototype.setValue=function(e,r,o,n){var s=this.values[e].value,a=this.getDuration(o);if(r=Xe(r),s!==r){if(this.values[e].value=r,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("valuechanged")){var l={type:"valuechanged",target:this,property:e};this.events.dispatchImmediately("valuechanged",l)}this.component&&this.component.handleDataItemValueChange(this,e)}this.setWorkingValue(e,r,a,n)},t.prototype.setCalculatedValue=function(e,r,o){var n=this.values[e][o];if(n!==r&&M(r)){if(this.values[e][o]=r,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("calculatedvaluechanged")){var s={type:"calculatedvaluechanged",target:this,property:e};this.events.dispatchImmediately("calculatedvaluechanged",s)}this.component&&this.component.handleDataItemCalculatedValueChange(this,e)}},t.prototype.setWorkingValue=function(e,r,o,n){if(M(this.values[e].value)){var s=this.getDuration(o),a=this.values[e].workingValue;if(s!=null&&s>0&&M(a)&&this.component)if(a!=r){var l=this.animate({childObject:this.values[e],property:"workingValue",from:a,to:r,dummyData:e},s,this.component.interpolationEasing);return n!=null&&l.delay(n),l.events.on("animationstarted",this.handleInterpolationProgress,this),l.events.on("animationprogress",this.handleInterpolationProgress,this),l.events.on("animationended",this.handleInterpolationProgress,this),this._valueAnimations[e]=l,l}else{var d=this._valueAnimations[e];d&&d.stop(),this.values[e].workingValue=r}else{var d=this._valueAnimations[e];if(d&&d.stop(),this.values[e].workingValue=r,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("workingvaluechanged")){var u={type:"workingvaluechanged",target:this,property:e};this.events.dispatchImmediately("workingvaluechanged",u)}this.component&&this.component.handleDataItemWorkingValueChange(this,e)}}},t.prototype.setLocation=function(e,r,o,n){var s=this.locations[e];if(s!==r){if(this.locations[e]=r,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("locationchanged")){var a={type:"locationchanged",target:this,property:e};this.events.dispatchImmediately("locationchanged",a)}this.component&&this.component.handleDataItemValueChange(this,e),this.setWorkingLocation(e,r,o,n)}},t.prototype.setWorkingLocation=function(e,r,o,n){var s=this.getDuration(o),a=this.workingLocations[e];if(s!=null&&s>0&&M(a)&&this.component)if(a!=r){var l=this.animate({childObject:this.workingLocations,property:e,from:a,to:r,dummyData:e},s,this.component.interpolationEasing);return n!=null&&l.delay(n),l.events.on("animationstarted",this.handleInterpolationProgress,this),l.events.on("animationprogress",this.handleInterpolationProgress,this),l.events.on("animationended",this.handleInterpolationProgress,this),this._locationAnimations[e]=l,l}else{var d=this._locationAnimations[e];d&&d.stop(),this.workingLocations[e]=r}else{var d=this._locationAnimations[e];if(d&&d.stop(),this.workingLocations[e]=r,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("workinglocationchanged")){var u={type:"workinglocationchanged",target:this,property:e};this.events.dispatchImmediately("workinglocationchanged",u)}this.component&&this.component.handleDataItemWorkingLocationChange(this,e)}},t.prototype.setDate=function(e,r,o){!fs(r)&&this.component&&(r=this.component.dateFormatter.parse(r));var n=this.dates[e];n!==r&&(this.dates[e]=r,this.setValue(e,r.getTime(),o))},t.prototype.getDate=function(e){return this._adapterO?this._adapterO.apply("date",{date:this.dates[e],field:e}).date:this.dates[e]},t.prototype.setProperty=function(e,r){if(this.properties[e]!==r){if(this.hasProperties=!0,this.properties[e]=r,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("propertychanged")){var o={type:"propertychanged",target:this,property:e,value:r};this.events.dispatchImmediately("propertychanged",o)}this.component&&this.component.handleDataItemPropertyChange(this,e)}},t.prototype.setCategory=function(e,r){je(r)||(r=kl(r)),this.categories[e]!==r&&(this.categories[e]=r)},t.prototype.copyFrom=function(e){i.prototype.copyFrom.call(this,e),e.dataContext&&(this.dataContext=vS(e.dataContext,{})),bn(e.locations,this.locations),e._adapterO&&this.adapter.copyFrom(e._adapterO),this.component=e.component},Object.defineProperty(t.prototype,"opacity",{set:function(e){Z(this.sprites,function(r){r.opacity=e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ignoreMinMax",{get:function(){return this._ignoreMinMax},set:function(e){if(this._ignoreMinMax=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("propertychanged")){var r={type:"propertychanged",target:this,property:"ignoreMinMax",value:e};this.events.dispatchImmediately("propertychanged",r)}this.component&&this.component.handleDataItemPropertyChange(this,"ignoreMinMax")},enumerable:!0,configurable:!0}),t.prototype.animate=function(e,r,o){return new Fi(this,e,r,o).start()},t.prototype.handleInterpolationProgress=function(e){var r=e.target,o=r.animationOptions[0];if(o){if(this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("workingvaluechanged")){var n={type:"workingvaluechanged",target:this,property:o.dummyData};this.events.dispatchImmediately("workingvaluechanged",n)}this.component&&this.component.handleDataItemWorkingValueChange(this,o.dummyData)}},t.prototype.hasValue=function(e){for(var r=0,o=e.length;r<o;r++){var n=this.values[e[r]];if(!n||!T(n.value))return!1}return!0},Object.defineProperty(t.prototype,"depth",{get:function(){return this.parent?this.parent.depth+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataContext",{get:function(){return this._dataContext},set:function(e){this._dataContext=e},enumerable:!0,configurable:!0}),t.prototype.addSprite=function(e){e.dataItem&&e.dataItem!=this&&ve(e.dataItem.sprites,e),this.visible||e.hide(0),this.isHiding&&e.hide(),this.sprites.push(e),e.dataItem=this},t}(ni);var En=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.dataFields={},e._dataSources={},e._parseDataFrom=0,e._dataDisposers=[],e._currentDataSetId="",e._start=0,e._end=1,e.skipRangeEvent=!1,e.rangeChangeDuration=0,e.rangeChangeEasing=Ir,e.parsingStepDuration=50,e.dataInvalid=!1,e.rawDataInvalid=!1,e.dataRangeInvalid=!1,e.dataItemsInvalid=!1,e.interpolationDuration=0,e.interpolationEasing=Ir,e.sequencedInterpolation=!0,e.sequencedInterpolationDelay=0,e.dataValidationProgress=0,e._addAllDataItems=!0,e._usesData=!0,e.className="Component",e.minZoomCount=1,e.maxZoomCount=0,e._dataItems=new jl(e.createDataItem()),e._dataItems.events.on("inserted",e.handleDataItemAdded,e,!1),e._dataItems.events.on("removed",e.handleDataItemRemoved,e,!1),e._disposers.push(new St(e._dataItems)),e._disposers.push(e._dataItems.template),e.invalidateData(),e.dataUsers.events.on("inserted",e.handleDataUserAdded,e,!1),e._disposers.push(new tt(e._dataDisposers)),e._start=0,e._end=1,e.maxZoomDeclination=1,e.applyTheme(),e}return t.prototype.createDataItem=function(){return new xn},t.prototype.handleDataUserAdded=function(e){var r=e.newValue;r.dataProvider=this},t.prototype.handleDataItemValueChange=function(e,r){this.dataItemsInvalid||this.invalidateDataItems()},t.prototype.handleDataItemWorkingValueChange=function(e,r){},t.prototype.handleDataItemWorkingLocationChange=function(e,r){},t.prototype.handleDataItemCalculatedValueChange=function(e,r){},t.prototype.handleDataItemPropertyChange=function(e,r){},t.prototype.processDataItem=function(e,r){var o=this;if(e){r||(r={}),e.dataContext=r;var n=!1;ne(this.dataFields,function(s,a){var l=s,d=r[a];if(o._adapterO&&o._adapterO.isEnabled("dataContextValue")&&(d=o._adapterO.apply("dataContextValue",{field:l,value:d,dataItem:e}).value),T(d))if(n=!0,e.hasChildren[l]){var u=o.createDataItem();u.copyFrom(o.mainDataSet.template);var c=new jl(u);c.events.on("inserted",o.handleDataItemAdded,o,!1),c.events.on("removed",o.handleDataItemRemoved,o,!1),o._dataDisposers.push(new St(c));for(var h=d.length,p=0;p<h;p++){var f=d[p],C=c.create();C.parent=e,o.processDataItem(C,f)}var b=e;b[l]=c}else e[l]=d}),ne(this.propertyFields,function(s,a){var l=s,d=r[a];T(d)&&(n=!0,e.setProperty(l,d))}),!this._addAllDataItems&&!n&&this.mainDataSet.remove(e)}},t.prototype.updateDataItem=function(e){var r=this;if(e){var o=e.dataContext;ne(this.dataFields,function(n,s){var a=n,l=o[s];if(r._adapterO&&(l=r._adapterO.apply("dataContextValue",{field:a,value:l,dataItem:e}).value),T(l))if(e.hasChildren[a]){var d=e,u=d[a];u.each(function(c){r.updateDataItem(c)})}else e[a]=l}),ne(this.propertyFields,function(n,s){var a=n,l=o[s];T(l)&&e.setProperty(a,l)})}},t.prototype.validateDataElements=function(){for(var e=this.endIndex,r=this.startIndex;r<e;r++){var o=this.dataItems.getIndex(r);o&&this.validateDataElement(o)}},t.prototype.validate=function(){this.validateDataElements(),i.prototype.validate.call(this)},t.prototype.validateDataElement=function(e){},t.prototype.addData=function(e,r,o){var n=this;if(!this.dataInvalid&&this.inited&&(this._parseDataFrom=this.data.length),o||(e instanceof Array?Z(e,function(s){n.data.push(s)}):this.data.push(e)),this.inited)this.removeData(r,o);else if(M(r))for(;r>0;)this.data.shift(),r--;this.invalidateData()},t.prototype.removeData=function(e,r){if(M(e)&&e>0){for(;e>0;){var o=this.mainDataSet.getIndex(0);o&&this.mainDataSet.remove(o),this.dataUsers.each(function(n){if(!n.data||n.data.length==0){var s=n.mainDataSet.getIndex(0);s&&n.mainDataSet.remove(s)}}),r||this.data.shift(),this._parseDataFrom>0&&this._parseDataFrom--,e--}this.invalidateDataItems()}},t.prototype.invalidateData=function(){this.disabled||this.isTemplate||(P.addToInvalidComponents(this),Ee.requestFrame(),this.dataInvalid=!0,de(this.dataUsers.iterator(),function(e){e.invalidateDataItems()}))},t.prototype.invalidateDataUsers=function(){de(this.dataUsers.iterator(),function(e){e.invalidate()})},t.prototype.invalidateDataItems=function(){this.disabled||this.isTemplate||(Io(P.invalidDataItems,this),Ee.requestFrame(),this.dataItemsInvalid=!0,de(this.dataUsers.iterator(),function(e){e.invalidateDataItems()}))},t.prototype.invalidateDataRange=function(){this.disabled||this.isTemplate||(this.dataRangeInvalid=!0,Io(P.invalidDataRange,this),Ee.requestFrame())},t.prototype.validateDataRange=function(){ve(P.invalidDataRange,this),this.dataRangeInvalid=!1,(this.startIndex!=this._prevStartIndex||this.endIndex!=this._prevEndIndex)&&(this.rangeChangeUpdate(),this.appendDataItems(),this.invalidate(),this.dispatchImmediately("datarangechanged"))},t.prototype.sliceData=function(){this._workingStartIndex=this.startIndex,this._workingEndIndex=this.endIndex},t.prototype.rangeChangeUpdate=function(){this.sliceData(),this._prevStartIndex=this.startIndex,this._prevEndIndex=this.endIndex},t.prototype.appendDataItems=function(){for(var e=this.endIndex,r=this.startIndex;r<e;r++){var o=this.dataItems.getIndex(r);o&&(o.__disabled=!1)}for(var r=0;r<this.startIndex;r++){var o=this.dataItems.getIndex(r);o&&(o.__disabled=!0)}for(var r=this.endIndex;r<this.dataItems.length;r++){var o=this.dataItems.getIndex(r);o&&(o.__disabled=!0)}},t.prototype.invalidateRawData=function(){this.disabled||this.isTemplate||(Io(P.invalidRawDatas,this),Ee.requestFrame(),this.rawDataInvalid=!0,de(this.dataUsers.iterator(),function(e){e.invalidateRawData()}))},t.prototype.validateRawData=function(){var e=this;ve(P.invalidRawDatas,this),de(this.mainDataSet.iterator(),function(r){r&&e.updateDataItem(r)})},t.prototype.dispose=function(){var e=this;this.mainDataSet.template.clones.clear(),ne(this._dataSources,function(r,o){e.removeDispose(o)}),this.disposeData(),i.prototype.dispose.call(this)},t.prototype.disposeData=function(){this.mainDataSet.template.clones.clear(),Z(this._dataDisposers,function(e){e.dispose()}),de(this.dataUsers.iterator(),function(e){e.disposeData()}),this._dataDisposers.length=0,this._startIndex=void 0,this._endIndex=void 0,this.mainDataSet.clear(),this.mainDataSet.template.clones.clear(),this._dataSets&&this._dataSets.clear()},t.prototype.getDataItem=function(e){return this.mainDataSet.create()},t.prototype.validateData=function(){if(this.dispatchImmediately("beforedatavalidated"),this.dataInvalid=!1,P.removeFromInvalidComponents(this),!this.__disabled){if(this.dataValidationProgress=0,this._prevStartIndex=void 0,this._prevEndIndex=void 0,this._startIndex=void 0,this._endIndex=void 0,this.dataFields.data&&this.dataItem){var e=this.dataItem.dataContext;this._data=e[this.dataFields.data]}if(this._parseDataFrom===0&&this.data.length>0&&this.disposeData(),this.data.length>0){var r=this.preloader;de(this.dataUsers.iterator(),function(c){c._startIndex=void 0,c._endIndex=void 0});var o=0,n=Date.now(),s=this._parseDataFrom,a=this.data.length,l=function(){var c=d.data[s];if(d._usesData){var h=d.getDataItem(c);d.processDataItem(h,c)}if(d.dataUsers.each(function(f){if(f.data.length==0){var C=f.getDataItem(c);f.processDataItem(C,c)}}),o++,o==100){o=0;var p=Date.now()-n;if(p>d.parsingStepDuration&&s<d.data.length-10)return d._parseDataFrom=s+1,r&&(s/d.data.length>.5&&!r.visible||(r.progress=s/d.data.length)),d.dataValidationProgress=s/d.data.length,s=d.data.length,d.invalidateData(),{value:void 0}}},d=this;for(s;s<a;s++){var u=l();if(typeof u=="object")return u.value}r&&(r.progress=1),this.dataUsers.each(function(c){(c.hidden||c.appeared&&!c.visible&&c.stacked)&&c.hide(0)})}this.dataValidationProgress=1,this._parseDataFrom=0,this.invalidateDataItems(),this._internalDefaultsApplied||this.applyInternalDefaults(),this.dispatch("datavalidated")}},t.prototype.validateDataItems=function(){ve(P.invalidDataItems,this),this.dataItemsInvalid=!1,this.invalidateDataRange(),this.invalidate(),this.dispatch("dataitemsvalidated")},Object.defineProperty(t.prototype,"data",{get:function(){return this._data||(this._data=[]),this._adapterO?this._adapterO.apply("data",this._data):this._data},set:function(e){this.setData(e)},enumerable:!0,configurable:!0}),t.prototype.setData=function(e){this.isDisposed()||(this._parseDataFrom=0,this.disposeData(),this._data=e,e&&e.length>0?this.invalidateData():(this.dispatchImmediately("beforedatavalidated"),this.dispatch("datavalidated")))},t.prototype.getDataSource=function(e){var r=this;return T(this._dataSources[e])||(this._dataSources[e]=new Ev,this._dataSources[e].component=this,this.setDataSourceEvents(this._dataSources[e],e),this._dataSources[e].adapter.add("dateFields",function(o){return r.dataSourceDateFields(o)}),this._dataSources[e].adapter.add("numberFields",function(o){return r.dataSourceNumberFields(o)}),this.events.on("inited",function(){r.loadData(e)},this,!1)),this._dataSources[e]},Object.defineProperty(t.prototype,"dataSource",{get:function(){return this._dataSources.data||this.getDataSource("data"),this._dataSources.data},set:function(e){var r=this;this._dataSources.data&&this.removeDispose(this._dataSources.data),this._dataSources.data=e,this._dataSources.data.component=this,this.events.on("inited",function(){r.loadData("data")},this,!1),this.setDataSourceEvents(e,"data")},enumerable:!0,configurable:!0}),t.prototype.loadData=function(e){this._dataSources[e].load()},t.prototype.dataSourceDateFields=function(e){return e},t.prototype.dataSourceNumberFields=function(e){return e},t.prototype.populateDataSourceFields=function(e,r,o){return Z(o,function(n){r[n]&&Mi(e,r[n])===-1&&e.push(r[n])}),e},t.prototype.setDataSourceEvents=function(e,r){var o=this;e.events.on("started",function(n){var s=o.preloader;s&&(s.progress=0)},void 0,!1),e.events.on("loadstarted",function(n){var s=o.preloader;s&&(s.progress=.25)},void 0,!1),e.events.on("loadended",function(n){var s=o.preloader;s&&(s.progress=.5)},void 0,!1),e.events.on("parseended",function(n){var s=o.preloader;s&&(s.progress=.75)},void 0,!1),e.events.on("ended",function(n){var s=o.preloader;s&&(s.progress=1)},void 0,!1),e.events.on("error",function(n){var s=o.preloader;s&&(s.progress=1),o.openModal(n.message)},void 0,!1),r&&e.events.on("done",function(n){var s=o.preloader;s&&(s.progress=1),r=="data"&&!jt(n.data)&&(n.data=[n.data]),e.incremental&&r=="data"&&o.data.length?o.addData(n.data,e.keepCount?n.data.length:0):e.updateCurrentData&&r=="data"&&o.data.length?(Z(o.data,function(a,l){T(n.data[l])&&ne(a,function(d,u){T(n.data[l][d])&&(a[d]=n.data[l][d])})}),o.invalidateRawData()):o[r]=n.data})},Object.defineProperty(t.prototype,"responsive",{get:function(){return this._responsive||(this._responsive=new Dv,this._responsive.component=this),this._responsive},set:function(e){this._responsive=e,this._responsive.component=this},enumerable:!0,configurable:!0}),t.prototype.zoom=function(e,r,o,n){var s=this;r===void 0&&(r=!1),o===void 0&&(o=!1);var a=e.start,l=e.end,d=e.priority;if(e.start==e.end&&(e.start=e.start-.5/this.maxZoomFactor,e.end=e.end+.5/this.maxZoomFactor),d=="end"&&l==1&&a!=0&&a<this.start&&(d="start"),d=="start"&&a==0&&l>this.end&&(d="end"),M(n)||(n=this.maxZoomDeclination),!M(a)||!M(l))return{start:this.start,end:this.end};if(this._finalStart!=a||this._finalEnd!=l){var u=this.maxZoomFactor/this.minZoomCount,c=this.maxZoomFactor/this.maxZoomCount;if(d=="start"?(this.maxZoomCount>0&&1/(l-a)<c&&(l=a+1/c),1/(l-a)>u&&(l=a+1/u),l>1&&l-a<1/u&&(a=l-1/u)):(this.maxZoomCount>0&&1/(l-a)<c&&(a=l-1/c),1/(l-a)>u&&(a<=0?l=a+1/u:a=l-1/u),a<0&&l-a<1/u&&(l=a+1/u)),a<-n&&(a=-n),1/(l-a)>u&&(l=a+1/u),l>1+n&&(l=1+n),1/(l-a)>u&&(a=l-1/u),this._finalEnd=l,this._finalStart=a,this.skipRangeEvent=r,this.dispatchImmediately("rangechangestarted"),this.rangeChangeDuration>0&&!o){var h=this.rangeChangeAnimation;if(h&&h.progress<1){var p=h.animationOptions;if(p.length>1){if(p[0].to==a&&p[1].to==l)return{start:a,end:l};h.isDisposed()||h.stop()}}this.rangeChangeAnimation&&this.rangeChangeAnimation.kill(),h=this.animate([{property:"start",to:a},{property:"end",to:l}],this.rangeChangeDuration,this.rangeChangeEasing),this.rangeChangeAnimation=h,h&&!h.isFinished()?h.events.on("animationended",function(){s.dispatchImmediately("rangechangeended")}):this.dispatchImmediately("rangechangeended")}else this.start=a,this.end=l,this.dispatch("rangechangeended")}return{start:a,end:l}},t.prototype.zoomToIndexes=function(e,r,o,n){if(!(!M(e)||!M(r))){var s=e/this.dataItems.length,a=r/this.dataItems.length;this.zoom({start:s,end:a},o,n)}},Object.defineProperty(t.prototype,"zoomFactor",{get:function(){return De(1/(this.end-this.start),1,this.maxZoomFactor)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxZoomFactor",{get:function(){return this.getPropertyValue("maxZoomFactor")},set:function(e){this.setPropertyValue("maxZoomFactor",e)&&(e==1&&(this.maxZoomDeclination=0),this.invalidateDataRange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxZoomDeclination",{get:function(){return this.getPropertyValue("maxZoomDeclination")},set:function(e){this.setPropertyValue("maxZoomDeclination",e)&&this.invalidateDataRange()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startIndex",{get:function(){return M(this._startIndex)||(this._startIndex=0),this._startIndex},set:function(e){this._startIndex=De(Math.round(e),0,this.dataItems.length),this.start=this.indexToPosition(this._startIndex)},enumerable:!0,configurable:!0}),t.prototype.indexToPosition=function(e){return e/this.dataItems.length},Object.defineProperty(t.prototype,"endIndex",{get:function(){var e=this.dataItems.length;return(!M(this._endIndex)||this._endIndex>e)&&(this._endIndex=e),this._endIndex},set:function(e){this._endIndex=De(Math.round(e),0,this.dataItems.length),this.end=this.indexToPosition(this._endIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return this._adapterO?this._adapterO.apply("start",this._start):this._start},set:function(e){if(this._start!=e){this._start=e;var r=Math.max(0,Math.floor(this.dataItems.length*e)||0);this._startIndex=Math.min(r,this.dataItems.length),this.invalidateDataRange(),this.invalidate(),this.dispatchImmediately("startchanged"),this.dispatch("startendchanged")}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this._adapterO?this._adapterO.apply("end",this._end):this._end},set:function(e){this._end!=e&&(this._end=e,this._endIndex=Math.min(this.dataItems.length,Math.ceil(this.dataItems.length*e)||0),this.invalidateDataRange(),this.invalidate(),this.dispatchImmediately("endchanged"),this.dispatch("startendchanged"))},enumerable:!0,configurable:!0}),t.prototype.removeFromInvalids=function(){i.prototype.removeFromInvalids.call(this),P.removeFromInvalidComponents(this),ve(P.invalidDataItems,this),ve(P.invalidDataRange,this),ve(P.invalidRawDatas,this)},Object.defineProperty(t.prototype,"dataItems",{get:function(){if(this._currentDataSetId!=""){var e=this.dataSets.getKey(this._currentDataSetId);if(e)return e}return this._dataItems},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataSets",{get:function(){return this._dataSets||(this._dataSets=new Be),this._dataSets},enumerable:!0,configurable:!0}),t.prototype.setDataSet=function(e){if(this._currentDataSetId!=e){var r=this.dataSets.getKey(e);if(r)return this.dataItems.each(function(o){o.__disabled=!0}),this._currentDataSetId=e,this.invalidateDataRange(),this._prevStartIndex=void 0,this.dataItems.each(function(o){o.__disabled=!1}),!0;if(this._currentDataSetId!="")return this.dataItems.each(function(o){o.__disabled=!0}),this._currentDataSetId="",this.invalidateDataRange(),this._prevStartIndex=void 0,this.dataItems.each(function(o){o.__disabled=!1}),!0}return!1},Object.defineProperty(t.prototype,"currentDataSetId",{get:function(){return this._currentDataSetId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mainDataSet",{get:function(){return this._dataItems},enumerable:!0,configurable:!0}),t.prototype._updateDataItemIndexes=function(e){for(var r=this.mainDataSet.values,o=r.length,n=e;n<o;++n)r[n]._index=n},t.prototype.handleDataItemAdded=function(e){e.newValue.component=this,this._updateDataItemIndexes(e.index),this.dataItemsInvalid||this.invalidateDataItems()},t.prototype.handleDataItemRemoved=function(e){this._updateDataItemIndexes(e.index),this.dataItemsInvalid||this.invalidateDataItems()},t.prototype.bindDataField=function(e,r){this.dataFields[e]=r,this.invalidateDataRange()},t.prototype.invalidateProcessedData=function(){this.resetProcessedRange(),this.invalidateDataRange()},t.prototype.resetProcessedRange=function(){this._prevEndIndex=null,this._prevStartIndex=null},Object.defineProperty(t.prototype,"dataUsers",{get:function(){var e=this;return this._dataUsers||(this._dataUsers=new Ie,this._disposers.push(new Ke(function(){de(e._dataUsers.iterator(),function(r){r.dispose()})}))),this._dataUsers},enumerable:!0,configurable:!0}),t.prototype.clone=function(){var e=i.prototype.clone.call(this);return e.dataFields=bn(this.dataFields,{}),e},t.prototype.copyFrom=function(e){i.prototype.copyFrom.call(this,e),this.data=e.data,this.sequencedInterpolation=e.sequencedInterpolation,this.sequencedInterpolationDelay=e.sequencedInterpolationDelay,this.interpolationDuration=e.interpolationDuration,this.interpolationEasing=e.interpolationEasing},t.prototype.reinit=function(){this._inited=!1,this.deepInvalidate()},t.prototype.getExporting=function(){var e=i.prototype.getExporting.call(this);return e.adapter.has("data",this._exportData,-1,this)||(e.adapter.add("data",this._exportData,-1,this),this.events.on("datavalidated",function(r){e.handleDataUpdated()})),e},t.prototype._exportData=function(e){return e.data=this.data,e},t.prototype.setDisabled=function(e){var r=i.prototype.setDisabled.call(this,e);return r&&this.invalidateData(),r},t.prototype.setShowOnInit=function(e){e!=this.getPropertyValue("showOnInit")&&(e&&!this.inited&&!this.hidden?(this._showOnInitDisposer2=this.events.once("dataitemsvalidated",this.hideInitially,this,!1),this._disposers.push(this._showOnInitDisposer2)):this._showOnInitDisposer2&&this.removeDispose(this._showOnInitDisposer2)),i.prototype.setShowOnInit.call(this,e)},t.prototype.setBaseId=function(e){e!=this._baseId&&this.dataInvalid&&(this.dataInvalid=!1,P.removeFromInvalidComponents(this),this._baseId=e,this.invalidateData()),i.prototype.setBaseId.call(this,e)},Object.defineProperty(t.prototype,"minZoomCount",{get:function(){return this.getPropertyValue("minZoomCount")},set:function(e){this.setPropertyValue("minZoomCount",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxZoomCount",{get:function(){return this.getPropertyValue("maxZoomCount")},set:function(e){this.setPropertyValue("maxZoomCount",e)},enumerable:!0,configurable:!0}),t.prototype._systemCheckIfValidate=function(){return!(this.dataInvalid||this.dataProvider&&this.dataProvider.dataInvalid)},t.prototype.asFunction=function(e){return e=="interpolationEasing"||e=="rangeChangeEasing"||i.prototype.asIs.call(this,e)},t}(_e);P.registeredClasses.Component=En;var si=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.isOversized=!1,e.className="Label",e.fill=new Le().getFor("text"),e.wrap=!1,e.truncate=!1,e.fullWords=!0,e.ellipsis="\u2026",e.textAlign="start",e.textValign="top",e.layout="absolute",e.baseLineRatio=-.27,e._positionPrecision=1,e.events.on("maxsizechanged",function(){e.inited&&e.handleMaxSize()},e,!1),e.events.once("validated",e.handleValidate,e,!1),e.applyTheme(),e}return t.prototype.afterDraw=function(){i.prototype.afterDraw.call(this),this.validatePosition()},t.prototype.setPaper=function(e){var r=i.prototype.setPaper.call(this,e);return r&&this.hardInvalidate(),r},t.prototype.handleValidate=function(){(this.currentText||this.text)&&(this.bbox.width==0||this.bbox.height==0)&&P.events.once("exitframe",this.hardInvalidate,this)},t.prototype.handleMaxSize=function(){(this.bbox.width>this.availableWidth||this.bbox.width<this.availableWidth&&(this.isOversized||this.truncate)||this.bbox.height>this.availableHeight||this.bbox.height<this.availableHeight&&this.isOversized)&&this.invalidate()},t.prototype.arrange=function(){},t.prototype.updateCurrentText=function(){var e,r;ql(this.html)&&this.paper.supportsForeignObject()?(e="html",r=this.html):(e="svg",r=this.text),Qe(r)&&(r=r.toString()),T(r)&&r!==""&&(r=this.populateString(r,this.dataItem)),e=="html"?this._adapterO&&(r=this._adapterO.apply("htmlOutput",r)):this._adapterO&&(r=this._adapterO.apply("textOutput",r));var o=r!=this.currentText||e!=this._currentFormat;return this.currentText=r,this._currentFormat=e,o},t.prototype.hardInvalidate=function(){this._prevStatus="",this.invalidate()},t.prototype.getLineBBox=function(e){var r=e&&e.element,o=r&&r.node;o&&o.parentNode&&(e.bbox=r.getBBox())},t.prototype.draw=function(){i.prototype.draw.call(this);var e=this.bbox.width,r=this.bbox.height,o=this.topParent;if(o&&(!o.maxWidth||!o.maxHeight)){o.events.once("maxsizechanged",this.hardInvalidate,this,!1);return}var n=ze(this.availableWidth-this.pixelPaddingLeft-this.pixelPaddingRight,0),s=ze(this.availableHeight-this.pixelPaddingTop-this.pixelPaddingBottom,0),a=s+","+n+this.wrap+this.truncate+this.fullWords+this.rtl+this.ellipsis;if(!(!this.updateCurrentText()&&this.inited&&this._prevStatus==a)){this._measuredWidth=0,this._measuredHeight=0,this.isOversized=!1;var l=this._currentFormat,d=this.currentText;if(!T(d)||d==""){this.element.attr({display:"none"});return}var u=d.split(`
`);this._prevStatus=a,this.textAlign=this.textAlign;var c=this.group.getAttr("display");if(c=="none"&&this.group.removeAttr("display"),this.textPathElement&&this.textPathElement.removeChildren(),l==="svg"){this.element.removeAttr("display");var h=this.element;this.resetBBox();for(var p=0,f="",C=0;C<u.length;C++){var b=u[C];if(b==""){var x=this.getSVGLineElement("",0);x.add(this.getSvgElement(".",sr().translateStyleShortcuts(f))),h.add(x);var S=Math.ceil(x.getBBox().height);S>0&&(p+=S),h.removeElement(x);var R=this.getLineInfo(C);R&&(R.text="",R.element.textContent="");continue}var I=sr().chunk(b,null,this.ignoreFormatting),F=0,L=!0,V=!1,k=this.getLineInfo(C);k?(k.text="",k.element.textContent=""):(k={text:"",element:this.getSVGLineElement("",0),complex:!1},h.add(k.element)),k.element.removeAttr("display"),k.element.removeChildren(),this.textPathElement&&k.element.add(this.textPathElement);for(var G=0;G<I.length;G++){G&&(k.complex=!0);var ge=I[G];if(ge.type==="format")f=ge.text;else{if(V)continue;if(k.text=ge.text,k.style=sr().translateStyleShortcuts(f),this.textPathElement?this.getSvgElement(k.text,k.style,this.textPathElement):this.getSvgElement(k.text,k.style,k.element),this.getLineBBox(k),k.bbox.width=Math.ceil(k.bbox.width),F<k.bbox.height&&(F=k.bbox.height),(this.wrap||this.truncate)&&k.bbox.width>n){this.isOversized=!0;var le=k.element.textContent,Je=k.bbox.width/le.length,Ne=st(Math.ceil((k.bbox.width-n)/Je),le.length);if(this.truncate){var Ai=!1,ko=k.element.node;if(ko&&ko.childNodes)for(var be=k.element.node.childNodes.length-1;be>=0;be--){var Dn=k.element.node.childNodes[be];if(Ai&&k.bbox.width<=n&&(Dn.textContent+=" "+this.ellipsis,k.bbox=k.element.getBBox(),k.bbox.width=Math.floor(k.bbox.width),k.bbox.width<=n))break;Ai=!1;var Zi=Dn.textContent;for(le=k.element.textContent,Ne=st(Math.ceil((k.bbox.width-n)/Je),le.length);k.bbox.width>n&&Ne<=le.length&&Ne>0;){var Oi=ze(le.length-Ne-this.ellipsis.length,1);Oi<=1&&(Ne=0,be>0&&(Ai=!0,k.element.node.removeChild(Dn))),Zi=Au(Zi,Oi,this.ellipsis,this.fullWords,this.rtl),Zi.length>Oi&&this.fullWords&&(Zi=Au(Zi,Oi,this.ellipsis,!1,this.rtl)),Dn.textContent=Zi,k.bbox=k.element.getBBox(),k.bbox.width=Math.floor(k.bbox.width),Ne=Math.ceil(Ne*1.1)}V=!0}}else{var Vo=k.element.node;if(Vo){for(var ki=k.element.node.lastChild,$t=void 0;k.bbox.width>n&&Ne<=le.length&&Ne>0;){var Oi=ze(ge.text.length-Ne,1);if(L?$t=Ap(ge.text,Oi,!0,this.rtl):($t=Ap(ge.text,Oi,!0,this.rtl,!1),($t[0].length>Oi||Oi===1)&&(k.element.node.removeChild(ki),Ne=0)),Ne>0){var Jt=$t.shift();L&&(Jt=Op(Jt)),ki.textContent=sr().cleanUp(Jt)}k.bbox=k.element.getBBox(),k.bbox.width=Math.floor(k.bbox.width),Ne++}if($t.length>0){var co="";T($t)&&(this.rtl?co+=$t.join("")+f:co+=f+$t.join("").replace(/([\[\]]{1})/g,"$1$1"));for(var Go=G+1;Go<I.length;Go++)I[Go].type=="value"?co+=I[Go].text.replace(/([\[\]]{1})/g,"$1$1"):co+=I[Go].text;u.splice(C+1,0,co)}V=!0}}}this.bbox.width<k.bbox.width&&(this.bbox.width=k.bbox.width),this.bbox.height=p+F,this.textPathElement?k.element.attr({dy:-this.paddingBottom.toString()}):k.element.attr({x:"0",y:p+F,dy:oe(this.baseLineRatio*F,3).toString()}),L=!1}}var Yn=k.element.node;if(Yn){var ki=Yn.lastChild;ki&&(ki.textContent=this.rtl?bS(ki.textContent):CS(ki.textContent))}p+=F,this.addLineInfo(k,C)}this.maybeHideOversized(),this.measureFailed=!1,(this.bbox.width==0||this.bbox.height==0)&&(this.measureFailed=!0),this._measuredWidth=oe(ze(this.bbox.width,this.pixelWidth-this.pixelPaddingLeft-this.pixelPaddingRight)),this._measuredHeight=oe(ze(this.bbox.height,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom)),this.alignSVGText(),this.bbox.width=this._measuredWidth,this.bbox.height=this._measuredHeight,(r!=this._measuredHeight||e!=this._measuredWidth)&&this.dispatch("transformed"),this.hideUnused(u.length)}else{this.element.removeAttr("display"),this.resetBBox();var h=this.element;h.removeChildren(),this.setCache("lineInfo",[],0);var ho=this.paper.foreignObject();h.add(ho),this.maxWidth&&ho.attr({width:this.maxWidth-this.pixelPaddingLeft-this.pixelPaddingRight}),this.maxHeight&&ho.attr({height:this.maxHeight-this.pixelPaddingTop-this.pixelPaddingBottom});var Tn=this.getHTMLLineElement(d);ho.node.appendChild(Tn),Tn.style.display="inline-block";var Xn=Tn.clientWidth,Pn=Tn.clientHeight;Tn.style.display="block",this._bbox={x:0,y:0,width:Xn,height:Pn},ho.attr({width:Xn+1,height:Pn}),this.maybeHideOversized(),this._measuredWidth=ze(this.bbox.width,this.pixelWidth-this.pixelPaddingLeft-this.pixelPaddingRight),this._measuredHeight=ze(this.bbox.height,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom),this.bbox.width=this._measuredWidth,this.bbox.height=this._measuredHeight,this.truncate&&(Tn.style.overflow="hidden"),(Xn>n||Pn>s)&&(this.isOversized=!0)}this.setStyles(),this.updateCenter(),this.updateBackground(),c=="none"&&this.group.attr({display:"none"}),this.pathElement&&this.paper.appendDef(this.pathElement)}},t.prototype.maybeHideOversized=function(){this.hideOversized&&(this.availableWidth<this.bbox.width||this.availableHeight<this.bbox.height?(this.element.attr({display:"none"}),this.isOversized=!0):(this.element.removeAttr("display"),this.isOversized=!1))},t.prototype.alignSVGText=function(){var e=this.element,r=e.node.children||e.node.childNodes;if(!(!r||r&&r.length==0)){var o=this._measuredWidth,n=this._measuredHeight;this.pixelPaddingLeft,this.pixelPaddingRight,this.pixelPaddingTop,this.pixelPaddingBottom,this.rtl?e.attr({direction:"rtl"}):e.removeAttr("direction");for(var s=r.length-1;s>=0;s--){var a=r[s];if(a.setAttribute("text-anchor",this.textAlign),this.textPathElement)a.removeAttribute("x"),a.removeAttribute("y");else{switch(this.textAlign){case"middle":a.setAttribute("x",(o/2).toString()+"px");break;case"end":this.rtl||a.setAttribute("x",o.toString());break;default:this.rtl?a.setAttribute("x",o.toString()):a.removeAttribute("text-anchor");break}var l=Xe(a.getAttribute("y"));switch(this.textValign){case"middle":a.setAttribute("y",((l||0)+(n-this.bbox.height)/2).toString());break;case"bottom":a.setAttribute("y",((l||0)+n-this.bbox.height).toString());break;default:a.setAttribute("y",(l||0).toString());break}}}}},t.prototype.getSVGLineElement=function(e,r){var o=this.paper.addGroup("text");return o.textContent=e,o.attr({x:"0"}),T(r)&&o.attr({y:r.toString()}),(this.truncate||this.wrap)&&o.attr({overflow:"hidden"}),o},Object.defineProperty(t.prototype,"rtl",{get:function(){return T(this._rtl)?this._rtl:this._topParent?this._topParent.rtl:!1},set:function(e){e=ot(e),this._rtl=e,this.element&&this.alignSVGText()},enumerable:!0,configurable:!0}),t.prototype.resetBBox=function(){this._bbox={x:0,y:0,width:0,height:0}},t.prototype.getHTMLLineElement=function(e){var r=document.createElement("div");switch(r.innerHTML=e,this.textAlign){case"middle":r.style.textAlign="center";break;case"end":r.style.textAlign="right";break}return this.wrap?r.style.wordWrap="break-word":r.style.whiteSpace="nowrap",this.rtl&&(r.style.direction="rtl"),T(this.fill)&&(r.style.color=this.fill.toString()),r},t.prototype.setStyles=function(){var e=this.element;!this.selectable||this.draggable||this.resizable||this.swipeable?e.addStyle({webkitUserSelect:"none",msUserSelect:"none"}):this.selectable&&(e.removeStyle("webkitUserSelect"),e.removeStyle("msUserSelect"))},t.prototype.hideUnused=function(e){this.initLineCache();var r=this.getCache("lineInfo");if(r.length>=e)for(var o=e;o<r.length;o++){var n=r[o];n&&n.element&&n.element.attr({display:"none"})}},Object.defineProperty(t.prototype,"text",{get:function(){return this.getPropertyValue("text")},set:function(e){this.setPropertyValue("text",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.getPropertyValue("path")},set:function(e){this.setPropertyValue("path",e,!0)&&(this.pathElement&&this.pathElement.dispose(),this.textPathElement&&this.textPathElement.dispose(),this.pathElement=this.paper.add("path"),this.pathElement.attr({d:e}),this.pathElement.attr({id:"text-path-"+this.uid}),this._disposers.push(this.pathElement),this.textPathElement=this.paper.addGroup("textPath"),this.textPathElement.attrNS(Kl,"xlink:href","#text-path-"+this.uid),this.textPathElement.attr({path:e}),this._disposers.push(this.textPathElement),this.hardInvalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locationOnPath",{get:function(){return this.getPropertyValue("locationOnPath")},set:function(e){this.setPropertyValue("locationOnPath",e),this.textPathElement&&this.textPathElement.attr({startOffset:e*100+"%"})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baseLineRatio",{get:function(){return this.getPropertyValue("baseLineRatio")},set:function(e){this.setPropertyValue("baseLineRatio",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrap",{get:function(){return this.getPropertyValue("wrap")},set:function(e){this.resetBBox(),this.setPropertyValue("wrap",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"truncate",{get:function(){return this.getPropertyValue("truncate")},set:function(e){this.resetBBox(),this.setPropertyValue("truncate",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullWords",{get:function(){return this.getPropertyValue("fullWords")},set:function(e){this.setPropertyValue("fullWords",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ellipsis",{get:function(){return this.getPropertyValue("ellipsis")},set:function(e){this.setPropertyValue("ellipsis",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectable",{get:function(){return this.getPropertyValue("selectable")},set:function(e){this.setPropertyValue("selectable",e,!0),this.setStyles()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textAlign",{get:function(){return this.getPropertyValue("textAlign")},set:function(e){this.setPropertyValue("textAlign",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textValign",{get:function(){return this.getPropertyValue("textValign")},set:function(e){this.setPropertyValue("textValign",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"html",{get:function(){return this.getPropertyValue("html")},set:function(e){if(this.setPropertyValue("html",e,!0),!T(e)){var r=this.element;r.removeChildrenByTag("foreignObject")}},enumerable:!0,configurable:!0}),t.prototype.setFill=function(e){if(i.prototype.setFill.call(this,e),this.html)for(var r=this.element,o=r.node.getElementsByTagName("div"),n=0;n<o.length;n++){var s=o[n];T(this.fill)&&(s.style.color=this.fill.toString())}},Object.defineProperty(t.prototype,"hideOversized",{get:function(){return this.getPropertyValue("hideOversized")},set:function(e){this.setPropertyValue("hideOversized",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ignoreFormatting",{get:function(){return this.getPropertyValue("ignoreFormatting")},set:function(e){this.setPropertyValue("ignoreFormatting",e,!0)},enumerable:!0,configurable:!0}),t.prototype.measureElement=function(){},t.prototype.getLineInfo=function(e){this.initLineCache();var r=this.getCache("lineInfo");return r.length>e?r[e]:void 0},t.prototype.addLineInfo=function(e,r){this.initLineCache(),this.getCache("lineInfo")[r]=e},t.prototype.initLineCache=function(){T(this.getCache("lineInfo"))||this.setCache("lineInfo",[],0)},t.prototype.setDataItem=function(e){this._sourceDataItemEvents&&this._sourceDataItemEvents.dispose(),e&&(this._sourceDataItemEvents=new tt([e.events.on("valuechanged",this.invalidate,this,!1),e.events.on("workingvaluechanged",this.invalidate,this,!1),e.events.on("calculatedvaluechanged",this.invalidate,this,!1),e.events.on("propertychanged",this.invalidate,this,!1)])),i.prototype.setDataItem.call(this,e)},Object.defineProperty(t.prototype,"availableWidth",{get:function(){return T(this.maxWidth)?this.maxWidth:this.pixelWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"availableHeight",{get:function(){return T(this.maxHeight)?this.maxHeight:this.pixelHeight},enumerable:!0,configurable:!0}),t.prototype.getSvgElement=function(e,r,o){var n=this.paper.add("tspan");if(n.textContent=e,r)if(we.nonce&&o){var s="amcharts_element_style_"+btoa(r).replace(/[^\w]*/g,"");n.node.setAttribute("class",s);var a=document.createElementNS(bs,"defs");o.node.appendChild(a);var l=document.createElement("style");l.type="text/css",l.innerHTML="."+s+" { "+r+"}",l.setAttribute("nonce",we.nonce),a.appendChild(l)}else n.node.setAttribute("style",r);return o&&o.add(n),n},t.prototype.deepInvalidate=function(){i.prototype.deepInvalidate.call(this),this.hardInvalidate()},Object.defineProperty(t.prototype,"readerTitle",{get:function(){var e=this.getPropertyValue("readerTitle");return e?this.dataItem&&(e=this.populateString(e)):e=this.populateString(Ou(ql(this.html)?this.html:this.text)),e},set:function(e){e=ri(e),this.setPropertyValue("readerTitle",e)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),t}(_e);P.registeredClasses.Label=si;Xi.push({relevant:zr.heightXS,state:function(i,t){if(i instanceof si&&i.parent&&i.parent.isBaseSprite){var e=i.states.create(t);return e.properties.disabled=!0,e}return null}});var uo=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="RoundedRectangle",e.element=e.paper.add("path"),e.cornerRadius(3,3,3,3),e.applyTheme(),e}return t.prototype.draw=function(){i.prototype.draw.call(this);var e=this.innerWidth,r=this.innerHeight;if(M(e)&&M(r)){var o=st(e,r)/2,n=qt(this.cornerRadiusTopLeft,o),s=qt(this.cornerRadiusTopRight,o),a=qt(this.cornerRadiusBottomRight,o),l=qt(this.cornerRadiusBottomLeft,o),d=st(Math.abs(e/2),Math.abs(r/2)),u=De(n,0,d),c=De(s,0,d),h=De(a,0,d),p=De(l,0,d),f="M"+u+",0 L"+(e-c)+",0",C=" L"+p+","+r,b=" L0,"+u,x=" L"+e+","+(r-h),S=" a"+c+","+c+" 0 0 1 "+c+","+c,R=" a"+h+","+h+" 0 0 1 -"+h+","+h,I=" a"+p+","+p+" 0 0 1 -"+p+",-"+p,F=" a"+u+","+u+" 0 0 1 "+u+",-"+u,L=f+S+x+R+C+I+b+F+" Z";this.path=L}},t.prototype.cornerRadius=function(e,r,o,n){this.cornerRadiusTopLeft=e,this.cornerRadiusTopRight=r,this.cornerRadiusBottomLeft=o,this.cornerRadiusBottomRight=n},Object.defineProperty(t.prototype,"cornerRadiusTopLeft",{get:function(){return this.getPropertyValue("cornerRadiusTopLeft")},set:function(e){this.setPercentProperty("cornerRadiusTopLeft",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cornerRadiusTopRight",{get:function(){return this.getPropertyValue("cornerRadiusTopRight")},set:function(e){this.setPercentProperty("cornerRadiusTopRight",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cornerRadiusBottomRight",{get:function(){return this.getPropertyValue("cornerRadiusBottomRight")},set:function(e){this.setPercentProperty("cornerRadiusBottomRight",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cornerRadiusBottomLeft",{get:function(){return this.getPropertyValue("cornerRadiusBottomLeft")},set:function(e){this.setPercentProperty("cornerRadiusBottomLeft",e,!0)},enumerable:!0,configurable:!0}),t.prototype.measureElement=function(){},Object.defineProperty(t.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.isMeasured?{x:0,y:0,width:this.innerWidth,height:this.innerHeight}:{x:0,y:0,width:0,height:0}},enumerable:!0,configurable:!0}),t}(Se);P.registeredClasses.RoundedRectangle=uo;var Qi=function(i){A(t,i);function t(){var e=i.call(this)||this;e.className="Button",e.tooltipY=0,e.iconPosition="left",e.layout="horizontal",e.contentAlign="center",e.contentValign="middle",e.padding(8,16,8,16),e.setStateOnChildren=!0;var r=new Le,o=e.background;o.fill=r.getFor("secondaryButton"),o.stroke=r.getFor("secondaryButtonStroke"),o.fillOpacity=1,o.strokeOpacity=1,o.cornerRadius(3,3,3,3),e.label=new si,e.label.fill=r.getFor("secondaryButtonText"),e.label.shouldClone=!1;var n=o.states.create("hover");n.properties.fillOpacity=1,n.properties.fill=r.getFor("secondaryButtonHover");var s=o.states.create("down");return s.transitionDuration=100,s.properties.fill=r.getFor("secondaryButtonDown"),s.properties.fillOpacity=1,e.role="button",e.focusable=!0,e.applyTheme(),e}return Object.defineProperty(t.prototype,"icon",{get:function(){return this._icon},set:function(e){var r=this._icon;r&&(r.parent=void 0),e&&(this._icon=e,e.parent=this,e.interactionsEnabled=!1,e.shouldClone=!1,this.iconPosition=this.iconPosition,this._disposers.push(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iconPosition",{get:function(){return this.getPropertyValue("iconPosition")},set:function(e){this.setPropertyValue("iconPosition",e),this.icon&&(e=="left"?this.icon.toBack():this.icon.toFront())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this._label},set:function(e){this._label&&this.removeDispose(this._label),this._label=e,e&&(e.parent=this,e.interactionsEnabled=!1,this._disposers.push(this._label))},enumerable:!0,configurable:!0}),t.prototype.createBackground=function(){return new uo},t.prototype.copyFrom=function(e){i.prototype.copyFrom.call(this,e),e.label&&this.label.copyFrom(e.label),e.icon&&(this.icon=e.icon.clone())},t}(_e);P.registeredClasses.Button=Qi;var Lo=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="Circle",e.element=e.paper.add("circle"),e.setPercentProperty("radius",ae(100)),e.setPropertyValue("horizontalCenter","middle"),e.setPropertyValue("verticalCenter","middle"),e.applyTheme(),e}return t.prototype.draw=function(){i.prototype.draw.call(this),this.element.attr({r:this.pixelRadius})},Object.defineProperty(t.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(e){this.setPercentProperty("radius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelRadius",{get:function(){return qt(this.radius,st(this.innerWidth/2,this.innerHeight/2))},enumerable:!0,configurable:!0}),t.prototype.measureElement=function(){var e=this.pixelRadius;this._bbox={x:-e,y:-e,width:e*2,height:e*2}},t}(Se);P.registeredClasses.Circle=Lo;var Qu=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="Ellipse",e.element=e.paper.add("ellipse"),e.applyTheme(),e}return t.prototype.draw=function(){i.prototype.draw.call(this),this.element.attr({rx:this.radius}),this.element.attr({ry:this.radiusY})},Object.defineProperty(t.prototype,"radiusY",{get:function(){return this.innerHeight/2},set:function(e){this.height=e*2,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.innerWidth/2},set:function(e){this.width=e*2,this.invalidate()},enumerable:!0,configurable:!0}),t}(Lo);P.registeredClasses.Ellipse=Qu;var XS=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="Image",e.element=e.paper.add("image"),e.applyTheme(),e.width=50,e.height=50,e}return t.prototype.draw=function(){if(i.prototype.draw.call(this),this.href){var e=this.innerWidth,r=this.innerHeight;M(this.widthRatio)&&(e=r*this.widthRatio,this.width=e),M(this.heightRatio)&&(r=e*this.heightRatio,this.height=r),this.element.attr({width:e,height:r}),this.element.attrNS(Kl,"xlink:href",this.href)}},Object.defineProperty(t.prototype,"href",{get:function(){return this.getPropertyValue("href")},set:function(e){this.setPropertyValue("href",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"widthRatio",{get:function(){return this.getPropertyValue("widthRatio")},set:function(e){this.setPropertyValue("widthRatio",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"heightRatio",{get:function(){return this.getPropertyValue("heightRatio")},set:function(e){this.setPropertyValue("heightRatio",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bbox",{get:function(){return{x:0,y:0,width:this.pixelWidth,height:this.pixelHeight}},enumerable:!0,configurable:!0}),t}(Se);P.registeredClasses.Image=XS;var tg=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="Line",e.element=e.paper.add("line"),e.fill=fe(),e.x1=0,e.y1=0,e.applyTheme(),e}return t.prototype.draw=function(){i.prototype.draw.call(this),this.x1==this.x2||this.y1==this.y2?this.pixelPerfect=!0:this.pixelPerfect=!1,this.x1=this.x1,this.x2=this.x2,this.y1=this.y1,this.y2=this.y2},Object.defineProperty(t.prototype,"x1",{get:function(){return this.getPropertyValue("x1")},set:function(e){M(e)||(e=0);var r=0;this.pixelPerfect&&this.stroke instanceof Ki&&(r=1e-5),this.setPropertyValue("x1",e,!0),this.element.attr({x1:e+r})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x2",{get:function(){var e=this.getPropertyValue("x2");return M(e)||(e=this.pixelWidth),e},set:function(e){M(e)||(e=0),this.setPropertyValue("x2",e,!0),this.element.attr({x2:e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y1",{get:function(){return this.getPropertyValue("y1")},set:function(e){M(e)||(e=0);var r=0;this.pixelPerfect&&this.stroke instanceof Ki&&(r=1e-5),this.setPropertyValue("y1",e,!0),this.element.attr({y1:e+r})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y2",{get:function(){var e=this.getPropertyValue("y2");return M(e)||(e=this.pixelHeight),e},set:function(e){M(e)||(e=0),this.setPropertyValue("y2",e,!0),this.element.attr({y2:e})},enumerable:!0,configurable:!0}),t.prototype.positionToPoint=function(e){var r={x:this.x1,y:this.y1},o={x:this.x2,y:this.y2},n=ha(r,o,e),s=no(r,o);return{x:n.x,y:n.y,angle:s}},t}(Se);P.registeredClasses.Line=tg;var Tv=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="PointedShape",e.pointerBaseWidth=15,e.pointerLength=10,e.pointerY=0,e.pointerX=0,e.applyTheme(),e}return t.prototype.draw=function(){i.prototype.draw.call(this),M(this.pointerX)||(this.pointerX=this.pixelWidth/2),M(this.pointerY)||(this.pointerY=this.pixelHeight+10)},Object.defineProperty(t.prototype,"pointerBaseWidth",{get:function(){return this.getPropertyValue("pointerBaseWidth")},set:function(e){this.setPropertyValue("pointerBaseWidth",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointerLength",{get:function(){return this.getPropertyValue("pointerLength")},set:function(e){this.setPropertyValue("pointerLength",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointerX",{get:function(){return this.getPropertyValue("pointerX")},set:function(e){this.setPropertyValue("pointerX",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointerY",{get:function(){return this.getPropertyValue("pointerY")},set:function(e){this.setPropertyValue("pointerY",e,!0)},enumerable:!0,configurable:!0}),t}(Se);var Pv=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="PointedRectangle",e.element=e.paper.add("path"),e.cornerRadius=6,e.applyTheme(),e}return t.prototype.draw=function(){i.prototype.draw.call(this);var e=this.cornerRadius,r=this.innerWidth,o=this.innerHeight;if(r>0&&o>0){var n=this.pointerX,s=this.pointerY,a=this.pointerBaseWidth/2,l=st(r/2,o/2),d=De(e,0,l),u=De(e,0,l),c=De(e,0,l),h=De(e,0,l),p=0,f=0,C=r,b=0,x=r,S=o,R=0,I=o,F=void 0,L=void 0,V=void 0,k=void 0,G=(n-p)*(S-f)-(s-f)*(x-p),ge=(n-R)*(b-I)-(s-I)*(C-R);if(G>0&&ge>0){var le=De(n,d+a,r-a-u);s=De(s,-1/0,0),F="M"+d+",0 L"+(le-a)+",0 L"+n+","+s+" L"+(le+a)+",0 L"+(r-u)+",0"}else F="M"+d+",0 L"+(r-u)+",0";if(G<0&&ge<0){var le=De(n,h+a,r-a-c);s=De(s,o,1/0),V=" L"+(r-c)+","+o+" L"+(le+a)+","+o+" L"+n+","+s+" L"+(le-a)+","+o+" L"+h+","+o}else V=" L"+h+","+o;if(G<0&&ge>0){var Je=De(s,d+a,o-h-a);n=De(n,-1/0,0),k=" L0,"+(o-h)+" L0,"+(Je+a)+" L"+n+","+s+" L0,"+(Je-a)+" L0,"+d}else k=" L0,"+d;if(G>0&&ge<0){var Je=De(s,u+a,o-a-c);n=De(n,r,1/0),L=" L"+r+","+u+" L"+r+","+(Je-a)+" L"+n+","+s+" L"+r+","+(Je+a)+" L"+r+","+(o-c)}else L=" L"+r+","+(o-c);var Ne=" a"+u+","+u+" 0 0 1 "+u+","+u,Ai=" a"+c+","+c+" 0 0 1 -"+c+","+c,ko=" a"+h+","+h+" 0 0 1 -"+h+",-"+h,be=" a"+d+","+d+" 0 0 1 "+d+",-"+d;this.path=F+Ne+L+Ai+V+ko+k+be}},Object.defineProperty(t.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(e){this.setPropertyValue("cornerRadius",e,!0)},enumerable:!0,configurable:!0}),t}(Tv);function QS(i){var t=X(i[0]),e={x:0,y:0},r=we.minPolylineStep;M(r)||(r=.5);for(var o=0,n=i.length;o<n;o++){var s=i[o];Ri(s,e)>r&&(t+=X(s),e=s)}return t}function pe(i){return" M"+oe(i.x,4)+","+oe(i.y,4)+" "}function X(i){return" L"+oe(i.x,4)+","+oe(i.y,4)+" "}function qn(i,t,e){return" C"+oe(t.x,4)+","+oe(t.y,4)+" "+oe(e.x,4)+","+oe(e.y,4)+" "+oe(i.x,4)+","+oe(i.y,4)}function zt(){return" Z"}function _a(i,t,e,r){if(t==0)return"";M(r)||(r=e);var o="",n=",",s=Math.ceil(Math.abs(t)/180),a=1;t<0&&(a=0);var l=0,d=0,u=-Ve(i)*e,c=-Ae(i)*r;if(t<.5&&e>3e3){var h=i+t,p=oe(Ve(h)*e,4),f=oe(Ae(h)*r,4);return X({x:p,y:f})}for(var C=0;C<s;C++){var h=i+t/s*(C+1),p=oe(Ve(h)*e+u-l,4),f=oe(Ae(h)*r+c-d,4);o+=" a"+e+n+r+n+0+n+0+n+a+n+p+n+f,l=p,d=f}return o}function ZS(i,t,e,r,o,n,s){if(t==0||(M(r)||(r=0),e==0&&r<=0))return"";if(e<r){var a=e;e=r,r=a,M(o)&&(o=o/r*e)}t=st(t,360),t==360&&(n=0,s=0);var l=i+t,d=Ae(st(t,45)/2);o=M(o)?o:e,n=n||0,s=M(s)?s:n;var u=o/e*r,c=o/e*n,h=o/e*s;n=De(n,0,(e-r)/2),c=De(c,0,(o-u)/2),s=De(s,0,(e-r)/2),h=De(h,0,(o-u)/2),n=oe(De(n,0,e*d),4),c=oe(De(c,0,o*d),4),s=oe(De(s,0,r*d),4),h=oe(De(h,0,u*d),4);var p=Math.asin(n/e/2)*Vl*2,f=Math.asin(c/o/2)*Vl*2;r<s&&(r=s),u<h&&(u=h);var C=Math.asin(s/r/2)*Vl*2,b=Math.asin(h/u/2)*Vl*2;M(C)||(C=0),M(b)||(b=0);var x=i+t/2,S={x:oe(Ve(x)*r,4),y:Ae(x)*u},R={x:Ve(i)*(r+s),y:Ae(i)*(u+h)},I={x:Ve(i)*(e-n),y:Ae(i)*(o-c)},F={x:Ve(l)*(e-n),y:Ae(l)*(o-c)},L={x:Ve(l)*(r+s),y:Ae(l)*(u+h)},V={x:Ve(i+p)*e,y:Ae(i+f)*o},k={x:Ve(l-C)*r,y:Ae(l-b)*u};s+=s*Ae(C/2),h+=h*Ae(b/2),C>(l-i)/2&&(k=S);var G="";return t==360?G=pe(I):(G=pe(R),G+=X(I),G+=Ar(V,n,c,!0)),G+=_a(i+p,t-2*p,e,o),M(r)&&r!=0?(t==360&&n==0?G+=pe(L):(G+=Ar(F,n,c,!0),G+=X(L),G+=Ar(k,s,h,!0)),G+=_a(l-C,-(t-2*C),r,u),(t<360||n>0)&&(G+=Ar(R,s,h,!0)),G+=X(R)):(G+=Ar(F,n,c,!0),t<360&&(G+=X(R))),G}function Ar(i,t,e,r,o,n){if(t==0)return"";n=n||0,o=!!o,r=!!r;var s=",",a=+r,l=+o;return" A"+t+s+e+s+n+s+l+s+a+s+oe(i.x,4)+s+oe(i.y,4)}var rd=function(i){A(t,i);function t(){var e=i.call(this)||this;return e._distance=0,e.className="Polyline",e.element=e.paper.add("path"),e.shapeRendering="auto",e.fill=fe(),e.strokeOpacity=1,e.applyTheme(),e}return t.prototype.makePath=function(){this._distance=0;var e=this.segments;if(e&&e.length>0){for(var r="",o=0,n=e.length;o<n;o++){var s=e[o];if(s.length>0){r+=pe(s[0]);for(var a=1;a<s.length;a++){var l=s[a];r+=X(l),this._distance+=Ri(s[a-1],l)}}}this.path=r}this._realSegments=e},Object.defineProperty(t.prototype,"segments",{get:function(){return this.getPropertyValue("segments")},set:function(e){this.setPropertyValue("segments",e),this.makePath()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),t.prototype.positionToPoint=function(e){var r=0;e<0&&(e=Math.abs(e),r=180);var o=this._realSegments;if(o){for(var n=this.distance,s=0,a=void 0,l=0,d=0,u=void 0,c=void 0,h=0;h<o.length;h++){var p=o[h];if(p.length>1){for(var f=1;f<p.length;f++)if(u=p[f-1],c=p[f],l=s/n,a=Ri(u,c),s+=a,d=s/n,l<=e&&d>e){h=o.length;break}}else p.length==1&&(u=p[0],c=p[0],l=0,d=1)}if(u&&c){var C=(e-l)/(d-l),b=ha(u,c,C);return{x:b.x,y:b.y,angle:r+no(u,c)}}}return{x:0,y:0,angle:0}},Object.defineProperty(t.prototype,"realSegments",{get:function(){return this._realSegments},enumerable:!0,configurable:!0}),t}(Se);P.registeredClasses.Polyline=rd;var JS=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="Polyarc",e.controlPointDistance=.5,e.controlPointPosition=.5,e.applyTheme(),e}return t.prototype.makePath=function(){this._distance=0;var e=this.segments;if(e&&e.length>0){var r="";this._realSegments=[];for(var o=0,n=e.length;o<n;o++){var s=e[o],a=[];if(this._realSegments.push(a),s.length>0){r+=pe(s[0]);for(var l=1;l<s.length;l++){var d=s[l-1],u=s[l],c=Ri(u,d),h=c*this.controlPointDistance,p=this.controlPointPosition,f=-no(d,u),C=d.x+(u.x-d.x)*p*.5-h*Ae(f),b=d.y+(u.y-d.y)*p*.5-h*Ve(f),x={x:C,y:b},S=d.x+(u.x-d.x)*p*1.5-h*Ae(f),R=d.y+(u.y-d.y)*p*1.5-h*Ve(f),I={x:S,y:R};r+=qn(u,x,I);var F=Math.ceil(c),L=d;if(F>0)for(var V=0;V<=F;V++){var k=Cu(d,u,x,I,V/F);a.push(k),this._distance+=Ri(L,k),L=k}else a.push(d)}}}this.path=r}},Object.defineProperty(t.prototype,"controlPointPosition",{get:function(){return this.getPropertyValue("controlPointPosition")},set:function(e){this.setPropertyValue("controlPointPosition",e),this.makePath()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"controlPointDistance",{get:function(){return this.getPropertyValue("controlPointDistance")},set:function(e){this.setPropertyValue("controlPointDistance",e),this.makePath()},enumerable:!0,configurable:!0}),t}(rd);P.registeredClasses.Polyarc=JS;var Rv=function(i){A(t,i);function t(e){var r=i.call(this)||this;return r._bboxes=[],r.morphDuration=800,r.morphEasing=Ir,r.morphToSingle=!0,r.scaleRatio=1,r.className="Morpher",r.morphable=e,r.applyTheme(),r}return t.prototype.morphToPolygon=function(e,r,o){var n=this.morphable.currentPoints;if(n&&e){this.sortPoints(n),this.sortPoints(e),this._morphFromPointsReal=[],this._morphToPointsReal=[],T(r)||(r=this.morphDuration),T(o)||(o=this.morphEasing),this._morphFromPointsReal=this.normalizePoints(e,n),this._morphToPointsReal=this.normalizePoints(n,e),this.morphable.currentPoints=this._morphFromPointsReal;var s=new Fi(this,{property:"morphProgress",from:0,to:1},r,o);return this._disposers.push(s),s.start(),s}},t.prototype.normalizePoints=function(e,r){for(var o=0,n=e.length;o<n;o++){var s=e[o][0],a=e[o][1],l=Ct(Gl(s)),d=l.x+l.width,u=l.y+l.height;if(r[o]||(r[o]=[]),s&&!r[o][0]&&(r[o][0]=[{x:d,y:u},{x:d,y:u}]),r[o][0]){r[o][0]=this.addPoints(r[o][0],s.length);for(var c=1/0,h=0,p=0;p<r[o][0].length;p++){var f=Ri(r[o][0][p],s[0]);f<c&&(h=p,c=f)}var C=r[o][0].slice(0,h),b=r[o][0].slice(h);r[o][0]=b.concat(C)}a&&(r[o][1]||(r[o][1]=[{x:d,y:u},{x:d,y:u}]),r[o][1]=this.addPoints(r[o][1],a.length))}return r},t.prototype.sortPoints=function(e){e.sort(function(a,l){var d=Ct(Gl(a[0])),u=Ct(Gl(l[0]));return d.width*d.height>u.width*u.height?-1:1});for(var r=[],o=0,n=e.length;o<n;o++){var s=e[o][0];s&&r.push(Ct(Gl(s)))}return mp(r)},t.prototype.morphToCircle=function(e,r,o){var n=this.morphable.points,s=this.sortPoints(n);this._morphFromPointsReal=[],this._morphToPointsReal=[],T(r)||(r=this.morphDuration),T(o)||(o=this.morphEasing);for(var a=0,l=n.length;a<l;a++){var d=n[a][0],u=n[a][1];if(this._morphFromPointsReal[a]=[],this._morphToPointsReal[a]=[],d){var c=d,h=d,p=Ct(Gl(h));this.morphToSingle&&(p=Ct(s));var f=p.x+p.width/2,C=p.y+p.height/2,b=e;M(b)||(b=Math.min(p.width/2,p.height/2)),c=[];var x=no({x:f,y:C},d[0]),S=100;d.length>S&&(S=d.length),h=this.addPoints(d,S),S=h.length;for(var R=360/(S-1),I=0;I<S;I++){var F=R*I+x,L={x:f+b*Ve(F),y:C+b*Ae(F)};c[I]=L}if(u&&u.length>0)for(var V=0,k=u.length;V<k;V++)c.push({x:f,y:C});this._morphFromPointsReal[a][0]=h,this._morphToPointsReal[a][0]=c}}this.morphable.currentPoints=this._morphFromPointsReal;var G=new Fi(this,{property:"morphProgress",from:0,to:1},r,o);return this._disposers.push(G),G.start(),G},t.prototype.addPoints=function(e,r){for(var o=Math.round(r/e.length),n=[],s=0,a=e.length;s<a;s++){var l=e[s],d=void 0;s==e.length-1?d=e[0]:d=e[s+1],n.push(l);for(var u=1;u<o;u++){var c=u/o,h={x:l.x+(d.x-l.x)*c,y:l.y+(d.y-l.y)*c};n.push(h)}n.length+e.length-s==r&&(o=0)}if(n.length<r&&e.length>0)for(var p=e[e.length-1],u=n.length;u<r;u++)n.push({x:p.x,y:p.y});return n},t.prototype.morphToRectangle=function(e,r,o,n){var s=this.morphable.points;this.sortPoints(s),this._morphFromPointsReal=[],this._morphToPointsReal=[],T(o)||(o=this.morphDuration),T(n)||(n=this.morphEasing);for(var a=0,l=s.length;a<l;a++){var d=s[a][0],u=s[a][1];if(this._morphFromPointsReal[a]=[],this._morphToPointsReal[a]=[],d){var c=d,h=d,p=this._bboxes[a];this.morphToSingle;var f=p.x,C=p.y,b=e,x=r;if(M(b)||(b=p.width),M(x)||(x=p.height),c=[{x:f,y:C},{x:f+b,y:C},{x:f+b,y:C+x},{x:f,y:C+x}],c=this.addPoints(c,d.length),d.length<4)for(var S=d.length;S<4;S++)c.push({x:d[S].x,y:d[S].y});if(u&&u.length>0)for(var R=p.x+p.width/2,I=p.y+p.height/2,F=0,L=u.length;F<L;F++)c.push({x:R,y:I});this._morphFromPointsReal[a][0]=h,this._morphToPointsReal[a][0]=c}}this.morphable.currentPoints=this._morphFromPointsReal;var V=new Fi(this,{property:"morphProgress",from:0,to:1},o,n);return this._disposers.push(V),V.start(),V},Object.defineProperty(t.prototype,"morphProgress",{get:function(){return this._morphProgress},set:function(e){this._morphProgress=e;var r=[];if(e!=null){var o=this._morphFromPointsReal,n=this._morphToPointsReal;if(o!=null&&n!=null)for(var s=0,a=o.length;s<a;s++){var l=[];r.push(l);var d=o[s][0],u=o[s][1],c=n[s][0],h=n[s][1];if(d&&d.length>0&&c&&c.length>0){for(var p=[],f=0,C=d.length;f<C;f++){var b=d[f],x=c[f],S={x:b.x+(x.x*this.scaleRatio-b.x)*e,y:b.y+(x.y*this.scaleRatio-b.y)*e};p.push(S)}l[0]=p}if(u&&u.length>0&&h&&h.length>0){for(var R=[],I=0,F=u.length;I<F;I++){var b=u[I],x=h[I],S={x:b.x+(x.x*this.scaleRatio-b.x)*e,y:b.y+(x.y*this.scaleRatio-b.y)*e};R.push(S)}l[1]=R}}}this.morphable.currentPoints=r},enumerable:!0,configurable:!0}),t.prototype.morphBack=function(e,r){this._morphToPointsReal=this._morphFromPointsReal,this._morphFromPointsReal=this.morphable.currentPoints,T(e)||(e=this.morphDuration),T(r)||(r=this.morphEasing);var o=new Fi(this,{property:"morphProgress",from:0,to:1},e,r);return this._disposers.push(o),o.start(),o},Object.defineProperty(t.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new lo(this._animations))),this._animations},enumerable:!0,configurable:!0}),t}(lt);var e_=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="Polygon",e.element=e.paper.add("path"),e.shapeRendering="auto",e._currentPoints=[],e.applyTheme(),e}return Object.defineProperty(t.prototype,"points",{get:function(){var e=this.getPropertyValue("points"),r=this.path;if(r&&(!e||e.length==0)){for(var o=r.slice(1,r.length-1),n=o.split("ZM"),s=0;s<n.length;s++){var a=n[s];if(a.length>0){var l=a.split("M"),d=l[0],u=l[1];if(d&&d.length>0){var c=d.split("L");if(c.length>0){var h=[],p=[h];e.push(p);for(var f=0;f<c.length;f++){var C=c[f].split(",");h.push({x:+C[0],y:+C[1]})}if(u&&u.length>0){var b=u.split("L");if(b.length>0){var x=[];p.push(x);for(var f=b.length-1;f>=0;f--){var C=b[f].split(",");x.push({x:+C[0],y:+C[1]})}}}}}}}this.setPropertyValue("points",e),this._currentPoints=e}return e},set:function(e){this.setPropertyValue("points",e,!0),this._currentPoints=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentPoints",{get:function(){return(!this._currentPoints||this._currentPoints.length==0)&&this.path&&(this._currentPoints=this.points),this._currentPoints},set:function(e){this._currentPoints!=e&&(this._currentPoints=e,this.draw())},enumerable:!0,configurable:!0}),t.prototype.draw=function(){var e="",r=this._currentPoints,o,n,s,a;if(r.length>0){for(var l=0,d=r.length;l<d;l++){var u=r[l][0],c=r[l][1];if(u&&u.length>0){var h=u[0];e+=pe(h);for(var p=0;p<u.length;p++)h=u[p],e+=X(h),(!M(n)||n<h.x)&&(n=h.x),(!M(o)||o>h.x)&&(o=h.x),(!M(s)||s>h.y)&&(s=h.y),(!M(a)||a<h.y)&&(a=h.y)}if(c&&c.length>0){var h=c[0];e+=pe(h);for(var f=0,C=c.length;f<C;f++)h=c[f],e+=X(h)}}e&&(e+=zt()),this.bbox.x=o,this.bbox.y=s,this.bbox.width=n-o,this.bbox.height=a-s,i.prototype.setPath.call(this,e)}},t.prototype.setPath=function(e){return i.prototype.setPath.call(this,e)?(this.points=[],this._bbox=this.group.getBBox(),!0):!1},t.prototype.measureElement=function(){},Object.defineProperty(t.prototype,"centerPoint",{get:function(){return{x:this.bbox.x+this.bbox.width/2,y:this.bbox.y+this.bbox.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"morpher",{get:function(){return this._morpher||(this._morpher=new Rv(this),this._disposers.push(this._morpher)),this._morpher},enumerable:!0,configurable:!0}),t}(Se);P.registeredClasses.Polygon=e_;var Zu=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="Polyspline",e.tensionX=.5,e.tensionY=.5,e.applyTheme(),e}return t.prototype.makePath=function(){this._distance=0;var e=this.segments,r=this.tensionX,o=this.tensionY;if(this.allPoints=[],e&&e.length>0){var n="";this._realSegments=[];for(var s=0,a=e.length;s<a;s++){var l=e[s],d=[];if(this._realSegments.push(d),l.length>0){var u=l[0],c=l[l.length-1],h=!1;oe(u.x,3)==oe(c.x)&&oe(u.y)==oe(c.y)&&(h=!0),n+=pe(l[0]);for(var p=0;p<l.length-1;p++){var f=l[p-1],C=l[p],b=l[p+1],x=l[p+2];p===0?f=l[p]:p==l.length-2&&(x=l[p+1]),x||(x=b),p===0?h?f=l[l.length-2]:f=l[s]:p==l.length-2&&(h?x=l[1]:x=l[p+1]);var S=vp(f,C,b,x,r,o),R=yp(f,C,b,x,r,o);n+=qn(b,S,R);var I=Math.ceil(z0(C,b,S,R,20))*1.2,F=C;if(I>0)for(var L=0;L<=I;L++){var V=Cu(C,b,S,R,L/I);if(!(V.x==F.x&&V.y==F.y)){d.push(V);var k=oe(no(F,V),5);this._distance+=Ri(F,V),this.allPoints[Math.floor(this._distance)]={x:V.x,y:V.y,angle:k},F=V}}else d.push(f)}}var G=this.allPoints;if(G.length>1){for(var ge=0;ge<G.length;ge++)if(!G[ge]){if(ge>1)G[ge]=G[ge-1];else for(var le=1;le<G.length;le++)if(G[le]){G[ge]=G[le];break}}}}this.path=n}},t.prototype.getClosestPointIndex=function(e){var r=this.allPoints,o,n=1/0;if(r.length>1)for(var s=1;s<r.length;s++){var a=Ri(e,r[s]);a<n&&(o=s,n=a)}return o},Object.defineProperty(t.prototype,"tensionX",{get:function(){return this.getPropertyValue("tensionX")},set:function(e){this.setPropertyValue("tensionX",e),this.makePath()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tensionY",{get:function(){return this.getPropertyValue("tensionY")},set:function(e){this.setPropertyValue("tensionY",e,!0),this.makePath()},enumerable:!0,configurable:!0}),t.prototype.positionToPoint=function(e,r){var o=0,n=this.allPoints,s=n.length;if(M(e)||(e=0),s>1){if(r&&s>3){if(e<0){e<-.01&&(e=-.01);var a=n[0],l=n[1],d=a.x-(a.x-l.x)*s*e,u=a.y-(a.y-l.y)*s*e;return{x:d,y:u,angle:no(a,l)}}else if(e>1){e>1.01&&(e=1.01);var a=n[n.length-2],l=n[n.length-3],d=a.x+(a.x-l.x)*s*(e-1),u=a.y+(a.y-l.y)*s*(e-1);return{x:d,y:u,angle:no(a,{x:d,y:u})}}else if(e==1){var c=n[n.length-1];return{x:c.x,y:c.y,angle:c.angle}}}else e<0&&(e=Math.abs(e),o=180),e>=1&&(e=.9999999999999);var h=n[Math.floor(e*s)];return{x:h.x,y:h.y,angle:h.angle+o}}else if(s==1){var h=n[0];return{x:h.x,y:h.y,angle:h.angle}}else return{x:0,y:0,angle:0}},t}(rd);P.registeredClasses.Polyspline=Zu;var xa=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="Slice",e.setPropertyValue("cornerRadius",0),e.setPropertyValue("startAngle",0),e.setPercentProperty("innerRadius",0),e.setPercentProperty("radius",0),e.setPropertyValue("arc",0),e.setPropertyValue("shiftRadius",0),e.strokeOpacity=1,e.setPropertyValue("layout","none"),e.slice=e.createChild(Se),e.slice.isMeasured=!1,e._disposers.push(e.slice),e.applyTheme(),e}return t.prototype.draw=function(){i.prototype.draw.call(this);var e=this.radiusY;this.radius>0&&e==0&&(e=.01),this.slice.path=ZS(this.startAngle,this.arc,this.radius,this.pixelInnerRadius,e,this.cornerRadius,this.innerCornerRadius),this.slice.invalidate(),this.shiftRadius=this.shiftRadius,this.realFill instanceof Fr&&this.updateGradient(this.realFill),this.realStroke instanceof Fr&&this.updateGradient(this.realStroke)},t.prototype.updateGradient=function(e){e.element.attr({gradientUnits:"userSpaceOnUse"}),e.element.attr({r:this.radius}),e.cx=0,e.cy=0,e.element.attr({radius:this.radius})},Object.defineProperty(t.prototype,"bbox",{get:function(){if(this.definedBBox)return this.definedBBox;if(this.isMeasured){var e=zm(this.startAngle,this.startAngle+this.arc,this.pixelInnerRadius),r=zm(this.startAngle,this.startAngle+this.arc,this.radius);return mp([e,r])}else return{x:0,y:0,width:0,height:0}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(e){this.setPropertyValue("startAngle",Fm(e),!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"arc",{get:function(){return this.getPropertyValue("arc")},set:function(e){M(e)||(e=0),this.setPropertyValue("arc",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){var e=this.getPropertyValue("radius");return M(e)||(e=0),e},set:function(e){this.setPropertyValue("radius",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radiusY",{get:function(){var e=this.getPropertyValue("radiusY");return M(e)||(e=this.radius),e},set:function(e){this.setPropertyValue("radiusY",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(e){this.setPercentProperty("innerRadius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelInnerRadius",{get:function(){return qt(this.innerRadius,this.radius)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(e){this.setPropertyValue("cornerRadius",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerCornerRadius",{get:function(){return this.getPropertyValue("innerCornerRadius")},set:function(e){this.setPropertyValue("innerCornerRadius",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shiftRadius",{get:function(){return this.getPropertyValue("shiftRadius")},set:function(e){this.setPropertyValue("shiftRadius",e),e=this.getPropertyValue("shiftRadius"),this.dx=e*this.radius*this.ix,this.dy=e*this.radiusY*this.iy},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ix",{get:function(){return Ve(this.middleAngle)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iy",{get:function(){return Ae(this.middleAngle)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"middleAngle",{get:function(){return this.startAngle+this.arc/2},enumerable:!0,configurable:!0}),t.prototype.getTooltipX=function(){var e=this.getPropertyValue("tooltipX");if(M(e))return e;var r=.5;e instanceof Me&&(r=e.value);var o=qt(this.innerRadius,this.radius);return this.ix*(o+(this.radius-o)*r)},t.prototype.getTooltipY=function(){var e=this.getPropertyValue("tooltipY");if(M(e))return e;var r=.5;e instanceof Me&&(r=e.value);var o=qt(this.innerRadius,this.radius);return this.iy*(o+(this.radius-o)*r)+this.slice.dy},t}(_e);P.registeredClasses.Slice=xa;var ig=function(i){A(t,i);function t(){var e=i.call(this)||this;e.className="Preloader",e.width=ae(100),e.height=ae(100);var r=new Le,o=e.createChild(_e);o.shouldClone=!1;var n=o.createChild(xa);n.shouldClone=!1,n.radius=53,n.arc=360,n.fill=r.getFor("fill"),n.fillOpacity=.8,n.innerRadius=42,n.isMeasured=!1,e.backgroundSlice=n;var s=o.createChild(xa);s.shouldClone=!1,s.radius=50,s.innerRadius=45,s.fill=r.getFor("alternativeBackground"),s.fillOpacity=.2,s.isMeasured=!1,e.progressSlice=s;var a=o.createChild(si);a.shouldClone=!1,a.horizontalCenter="middle",a.verticalCenter="middle",a.isMeasured=!1,a.fill=r.getFor("text"),a.align="center",a.valign="middle",a.textAlign="middle",a.fillOpacity=.4,e.label=a,e.background.opacity=1,e.background.fill=r.getFor("background"),e.contentAlign="center",e.contentValign="middle",e.delay=300;var l=e.states.create("hidden");return l.properties.opacity=0,e.visible=!1,e.hide(0),e.__disabled=!0,e._disposers.push(e.backgroundSlice),e._disposers.push(e.progressSlice),e._disposers.push(e.label),e._disposers.push(o),e}return Object.defineProperty(t.prototype,"progress",{get:function(){return this.getPropertyValue("progress")},set:function(e){var r=this;this.__disabled=!1,this.validateLayout(),this.setPropertyValue("progress",e),this.progressSlice.arc=360*e,this.label&&(this.label.text=Math.round(e*100)+"%"),e>=1?(this._started&&(this._started=void 0),P.events.once("enterframe",function(){var o=r.hide();o&&!o.isFinished()?o.events.once("animationended",function(){r.__disabled=!0}):r.__disabled=!0}),this.interactionsEnabled=!1,this.setPropertyValue("progress",0)):e>0&&(this.delay?this._started?this._started+this.delay<=new Date().getTime()&&(this.__disabled=!1,this.show(),this.interactionsEnabled=!0):this._started=new Date().getTime():(this.__disabled=!1,this.show(),this.interactionsEnabled=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delay",{get:function(){return this.getPropertyValue("delay")},set:function(e){this.setPropertyValue("delay",e)},enumerable:!0,configurable:!0}),t}(_e);P.registeredClasses.Preloader=ig;var Ju=function(i){A(t,i);function t(){var e=i.call(this)||this;e.className="ResizeButton",e.orientation="horizontal",e.layout="absolute",e.horizontalCenter="middle",e.verticalCenter="middle",e.draggable=!0,e.padding(8,8,8,8),e.background.cornerRadius(20,20,20,20);var r=new Se;r.element=e.paper.add("path");var o=pe({x:-2,y:-6});return o+=X({x:-2,y:6}),o+=pe({x:2,y:-6}),o+=X({x:2,y:6}),r.path=o,r.pixelPerfect=!0,r.padding(0,4,0,4),r.stroke=new Le().getFor("alternativeText"),r.strokeOpacity=.7,e.icon=r,e.label.dispose(),e.label=void 0,e.applyTheme(),e}return Object.defineProperty(t.prototype,"orientation",{set:function(e){var r=this.icon;r&&(e=="horizontal"?r.rotation=0:r.rotation=-90)},enumerable:!0,configurable:!0}),t}(Qi);P.registeredClasses.ResizeButton=Ju;var t_=function(i){A(t,i);function t(){var e=i.call(this)||this;e.className="CloseButton",e.padding(8,8,8,8),e.showSystemTooltip=!0,e.width=30,e.height=30;var r=new Le;e.cursorOverStyle=Ft.pointer;var o=e.background;o.cornerRadius(20,20,20,20);var n=r.getFor("background");o.fill=n,o.stroke=r.getFor("primaryButton"),o.strokeOpacity=1,o.strokeWidth=1;var s=r.getFor("primaryButtonActive"),a=o.states.getKey("hover");a.properties.strokeWidth=3,a.properties.fill=n;var l=o.states.getKey("down");l.properties.stroke=s,l.properties.fill=n;var d=new Se;return d.element=e.paper.add("path"),d.stroke=o.stroke,e.icon=d,e.applyTheme(),e}return t.prototype.validate=function(){i.prototype.validate.call(this);var e=this.pixelWidth/3,r=this.pixelHeight/3,o=pe({x:-e/2,y:-r/2});o+=X({x:e/2,y:r/2}),o+=pe({x:e/2,y:-r/2}),o+=X({x:-e/2,y:r/2}),this.icon.path=o,this.invalidateLayout()},t.prototype.applyInternalDefaults=function(){i.prototype.applyInternalDefaults.call(this),T(this.readerTitle)||(this.readerTitle=this.language.translate("Close"))},t}(Qi);P.registeredClasses.CloseButton=t_;var i_=function(i){A(t,i);function t(){var e=i.call(this)||this;e.className="SwitchButton",e.tooltipY=0,e.layout="horizontal",e.contentAlign="center",e.contentValign="middle",e.padding(8,16,8,16),e.setStateOnChildren=!0,e.states.create("active");var r=new Le,o=new si;o.fillOpacity=.3;var n=o.states.create("active");n.properties.fillOpacity=1,o.isActive=!0,e.leftLabel=o;var s=new Qi,a=new Lo;s.contentValign="none",s.padding(0,0,0,0),a.radius=10,s.icon=a,s.icon.valign="middle",s.label=void 0;var l=ae(100);s.background.cornerRadius(l,l,l,l),s.width=a.radius*3.5,s.height=a.radius*2.1,s.marginLeft=8,s.marginRight=8,s.togglable=!0,a.dx=-a.radius*.7,a.fill=r.getFor("primaryButton");var d=a.states.create("hover");d.properties.fill=r.getFor("primaryButtonHover");var u=a.states.create("active");u.properties.fill=r.getFor("primaryButtonActive"),u.properties.dx=a.radius*.7,e.switchButton=s,e.events.on("toggled",function(){e.leftLabel.isActive=!e.isActive,e.rightLabel.isActive=e.isActive});var c=new si;c.fillOpacity=.3;var h=c.states.create("active");return h.properties.fillOpacity=1,e.rightLabel=c,e.role="button",e.focusable=!0,c.valign="middle",o.valign="middle",s.valign="middle",e.applyTheme(),e}return Object.defineProperty(t.prototype,"leftLabel",{get:function(){return this._leftLabel},set:function(e){this._leftLabel&&this.removeDispose(this._leftLabel),this._leftLabel=e,e&&(e.parent=this,e.interactionsEnabled=!1,e.shouldClone=!1,this._disposers.push(this._leftLabel))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightLabel",{get:function(){return this._rightLabel},set:function(e){this._rightLabel&&this.removeDispose(this._rightLabel),this._rightLabel=e,e&&(e.parent=this,e.interactionsEnabled=!1,e.shouldClone=!1,this._disposers.push(this._rightLabel))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"switch",{get:function(){return this._switchButton},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"switchButton",{get:function(){return this._switchButton},set:function(e){this._switchButton&&this.removeDispose(this._switchButton),this._switchButton=e,e&&(e.parent=this,e.shouldClone=!1,this._disposers.push(this._switchButton))},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(e){i.prototype.copyFrom.call(this,e),e.leftLabel&&this.leftLabel.copyFrom(e.leftLabel),e.rightLabel&&this.rightLabel.copyFrom(e.rightLabel),e.switchButton&&this.switchButton.copyFrom(e.switchButton)},t}(_e);P.registeredClasses.SwitchButton=i_;var od=function(i){A(t,i);function t(){var e=i.call(this)||this;e._previousStart=0,e._previousEnd=1,e._prevStart=0,e._prevEnd=1,e._isBusy=!1,e._skipRangeEvents=!1,e.updateWhileMoving=!0,e.className="Scrollbar",e.minHeight=12,e.minWidth=12,e.animationDuration=0,e.animationEasing=Ir,e.margin(10,10,10,10);var r=new Le,o=e.background;return o.cornerRadius(10,10,10,10),o.fill=r.getFor("fill"),o.fillOpacity=.5,e.showSystemTooltip=!0,e.startGrip=new Ju,e.endGrip=new Ju,e.events.on("transformed",function(){e.updateThumb()},e,!1),e.start=0,e.end=1,e.role="scrollbar",e.thumb.role="slider",e.thumb.readerLive="polite",e.startGrip.role="slider",e.endGrip.role="slider",e.events.once("inited",function(){e._previousStart=void 0,e.dispatchRangeChange()},void 0,!1),e.hideGrips=!1,e.orientation="horizontal",e.setSVGAttribute({"aria-valuemin":"0"}),e.setSVGAttribute({"aria-valuemax":"100"}),e.applyTheme(),e}return t.prototype.applyInternalDefaults=function(){i.prototype.applyInternalDefaults.call(this),this.orientation==="horizontal"?(T(this.readerTitle)||(this.readerTitle=this.language.translate("Use TAB to select grip buttons or left and right arrows to change selection")),T(this.thumb.readerDescription)||(this.thumb.readerDescription=this.language.translate("Use left and right arrows to move selection")),T(this.startGrip.readerDescription)||(this.startGrip.readerDescription=this.language.translate("Use left and right arrows to move left selection")),T(this.endGrip.readerDescription)||(this.endGrip.readerDescription=this.language.translate("Use left and right arrows to move right selection")),this.readerOrientation="horizontal"):(T(this.readerTitle)||(this.readerTitle=this.language.translate("Use TAB select grip buttons or up and down arrows to change selection")),T(this.thumb.readerDescription)||(this.thumb.readerDescription=this.language.translate("Use up and down arrows to move selection")),T(this.startGrip.readerDescription)||(this.startGrip.readerDescription=this.language.translate("Use up and down arrows to move upper selection")),T(this.endGrip.readerDescription)||(this.endGrip.readerDescription=this.language.translate("Use up and down arrows to move lower selection")),this.readerOrientation="vertical"),this.readerControls=this.baseSprite.uidAttr()},t.prototype.validateLayout=function(){this.updateSize(),i.prototype.validateLayout.call(this),this.updateExtremes()},t.prototype.processBackground=function(){i.prototype.processBackground.call(this);var e=this.background;e.clickable=!0,e.events.on("hit",this.handleBgHit,this,void 0)},t.prototype.handleBgHit=function(e){this.makeBusy();var r=e.spritePoint;r=Gp(r,this.background,this);var o=this.thumb;if(this.orientation=="horizontal"){var n=r.x-o.pixelWidth/2;n=De(n,0,this.innerWidth-o.pixelWidth),this._thumbAnimation=o.animate({property:"x",to:n},this.animationDuration,this.animationEasing)}else{var s=r.y-o.pixelHeight/2;s=De(s,0,this.innerHeight-o.pixelHeight),this._thumbAnimation=o.animate({property:"y",to:s},this.animationDuration,this.animationEasing)}this.animationDuration>0?this._thumbAnimation.events.on("animationended",this.makeUnbusy,this,!1):(this._thumb.validate(),this.makeUnbusy())},t.prototype.makeBusy=function(){this._isBusy=!0,this._skipRangeEvents=!1,this._unbusyTimeout&&this.removeDispose(this._unbusyTimeout),this._unbusyTimeout=void 0,this.stopAnimations()},t.prototype.stopAnimations=function(){this._thumbAnimation&&this._thumbAnimation.stop(!0),this._zoomAnimation&&this._zoomAnimation.stop(!0)},t.prototype.makeUnbusy=function(){this._unbusyTimeout=this.setTimeout(this.makeUnbusyReal.bind(this),this.animationDuration*1.1)},t.prototype.makeUnbusyReal=function(){this._usingGrip=void 0,this._isBusy=!1,this.updateWhileMoving||this.dispatchRangeChange()},t.prototype.dispatchRangeChange=function(){(this._previousEnd!=this.end||this._previousStart!=this.start)&&(this._previousStart=this.start,this._previousEnd=this.end,this.dispatch("rangechanged"))},t.prototype.updateThumb=function(e){if(e===void 0&&(e=!0),!!this.parent){var r=this.thumb,o=this.start,n=this.end,s=this.startGrip,a=this.endGrip,l=this.adapter.apply("positionValueDirection",{flipped:!1}).flipped,d=l?"To %1":"From %1",u=l?"From %1":"To %1",c,h;if(this.orientation=="horizontal"){var p=this.innerWidth;r.width=p*(n-o),r.maxX=p-r.pixelWidth,r.x=o*p,s.moveTo({x:r.pixelX,y:0},void 0,void 0,!0),a.moveTo({x:r.pixelX+r.pixelWidth,y:0},void 0,void 0,!0),c=this.adapter.apply("positionValue",{value:Math.round(o*100)+"%",position:o}).value,h=this.adapter.apply("positionValue",{value:Math.round(n*100)+"%",position:n}).value,s.readerTitle=this.language.translate(d,void 0,c),s.readerValueNow=""+Math.round(o*100),s.readerValueText=s.readerTitle,a.readerTitle=this.language.translate(u,void 0,h),a.readerValueNow=""+Math.round(n*100),a.readerValueText=a.readerTitle}else{var f=this.innerHeight;r.height=f*(n-o),r.maxY=f-r.pixelHeight,r.y=(1-n)*f,s.moveTo({x:0,y:r.pixelY+r.pixelHeight},void 0,void 0,!0),a.moveTo({x:0,y:r.pixelY},void 0,void 0,!0),c=this.adapter.apply("positionValue",{value:Math.round((1-o)*100)+"%",position:1-o}).value,h=this.adapter.apply("positionValue",{value:Math.round((1-n)*100)+"%",position:1-n}).value,s.readerTitle=this.language.translate(u,void 0,c),s.readerValueNow=""+Math.round(o*100),s.readerValueText=s.readerTitle,a.readerTitle=this.language.translate(d,void 0,h),a.readerValueNow=""+Math.round(n*100),a.readerValueText=a.readerTitle}r.readerTitle=this.language.translate("From %1 to %2",void 0,c,h),r.readerValueNow=""+Math.round(o*100),r.readerValueText=r.readerTitle,this.readerValueNow=""+Math.round(o*100),this.readerValueText=r.readerTitle,!this._skipRangeEvents&&this.updateWhileMoving&&e&&this.dispatchRangeChange()}},t.prototype.updateExtremes=function(){var e=this.orientation,r=0,o=0,n=0,s=0;e=="horizontal"?(n=this.innerWidth,o=s=this.innerHeight/2):(s=this.innerHeight,r=n=this.innerWidth/2);var a=this.startGrip;a.minX=r,a.maxX=n,a.minY=o,a.maxY=s;var l=this.endGrip;l.minX=r,l.maxX=n,l.minY=o,l.maxY=s;var d=this.thumb;d.minX=r,d.maxX=n,d.minY=o,d.maxY=s},t.prototype.updateSize=function(){var e=this.orientation,r=this.startGrip;r&&(r.orientation=e),this.endGrip&&(this.endGrip.orientation=e);var o=this.thumb;o&&(e=="horizontal"?(M(this._pixelWidth)||this.width instanceof Me||(this.width=ae(100)),T(this.percentHeight)&&(this.height=this.minHeight),o.height=this.innerHeight,o.verticalCenter="middle",o.horizontalCenter="left"):(M(this._pixelHeight)||this.height instanceof Me||(this.height=ae(100)),T(this.percentWidth)&&(this.width=this.minWidth),o.width=this.innerWidth,o.verticalCenter="top",o.horizontalCenter="middle"))},Object.defineProperty(t.prototype,"isBusy",{get:function(){return this._isBusy},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return Math.min(this.getPosition(this._start),this.getPosition(this._end))},set:function(e){this._isBusy||(this.__start=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"__start",{get:function(){return this._start},set:function(e){this._start=this.getPosition(e),this.updateThumb()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return Math.max(this.getPosition(this._start),this.getPosition(this._end))},set:function(e){this._isBusy||(this.__end=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"__end",{get:function(){return this._end},set:function(e){this._end=this.getPosition(e),this.updateThumb()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"range",{get:function(){return{start:this.start,end:this.end,priority:this._usingGrip}},enumerable:!0,configurable:!0}),t.prototype.skipRangeEvents=function(){this._isBusy||(this._skipRangeEvents=!0)},t.prototype.fixRange=function(e){(e.start!=oe(this._start,2)||e.end!=oe(this._end,2))&&(this._start=e.start,this._end=e.end,this._skipRangeEvents=!0,this.updateThumb(),this._skipRangeEvents=!1,this.thumb.validate(),this.thumb.background.validate())},t.prototype.getPosition=function(e){return De(oe(e,4),0,1)},Object.defineProperty(t.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(e){this.setPropertyValue("orientation",e)&&(e==="horizontal"?(this.startGrip.cursorOverStyle=Ft.horizontalResize,this.endGrip.cursorOverStyle=Ft.horizontalResize):(this.startGrip.cursorOverStyle=Ft.verticalResize,this.endGrip.cursorOverStyle=Ft.verticalResize),this.updateByOrientation(),this.invalidate())},enumerable:!0,configurable:!0}),t.prototype.updateByOrientation=function(){},Object.defineProperty(t.prototype,"startGrip",{get:function(){return this._startGrip},set:function(e){this._startGrip&&this.removeDispose(this._startGrip),this._startGrip=e,this.processGrip(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endGrip",{get:function(){return this._endGrip},set:function(e){this._endGrip&&this.removeDispose(this._endGrip),this._endGrip=e,this.processGrip(e)},enumerable:!0,configurable:!0}),t.prototype.processGrip=function(e){e.parent=this,e.isMeasured=!1,e.focusable=!0,e.shouldClone=!1,e.zIndex=100,e.events.on("drag",this.handleGripDrag,this,!1),e.events.on("dragstop",this.makeUnbusy,this,!1),e.events.on("down",this.makeBusy,this,!1),e.events.on("up",this.makeUnbusy,this,!1),this._disposers.push(e)},t.prototype.handleGripDrag=function(e){this.makeBusy(),e.target===this._startGrip?this._usingGrip="start":this._usingGrip="end",this.orientation=="horizontal"?(this._start=this.startGrip.pixelX/this.innerWidth,this._end=this.endGrip.pixelX/this.innerWidth):(this._start=1-this.startGrip.pixelY/this.innerHeight,this._end=1-this.endGrip.pixelY/this.innerHeight),this.updateThumb()},Object.defineProperty(t.prototype,"thumb",{get:function(){if(!this._thumb){var e=new Qi;e.background.cornerRadius(10,10,10,10),e.padding(0,0,0,0),this.thumb=e}return this._thumb},set:function(e){var r=this;e&&(this._thumb&&this.removeDispose(this._thumb),this._thumb=e,e.parent=this,e.isMeasured=!1,e.inert=!0,e.draggable=!0,e.clickable=!0,e.hoverable=!0,e.focusable=!0,e.shouldClone=!1,e.zIndex=0,e.cursorOverStyle=Ft.grab,e.cursorDownStyle=Ft.grabbing,e.events.on("dragstart",this.makeBusy,this,!1),e.events.on("dragstop",this.makeUnbusy,this,!1),e.events.on("positionchanged",this.handleThumbPosition,this,!1),e.events.on("sizechanged",this.handleThumbPosition,this,!1),e.events.on("doublehit",this.handleDoubleClick,this,!1),this._disposers.push(ye().body.events.on("keyup",function(o){qi.isKey(o.event,["space","enter"])&&r.thumb.isFocused&&(o.event.preventDefault(),r.handleDoubleClick())})),this._disposers.push(this._thumb))},enumerable:!0,configurable:!0}),t.prototype.handleDoubleClick=function(){this.makeBusy();var e=0,r=1;this.start!=0||this.end!=1?(this._prevStart=this.start,this._prevEnd=this.end):(e=this._prevStart,r=this._prevEnd);var o=this.animate([{property:"__start",to:e},{property:"__end",to:r}],this.animationDuration,this.animationEasing);o&&!o.isFinished()?(o.events.on("animationended",this.makeUnbusy,this,!1),this._zoomAnimation=o):this.makeUnbusy()},t.prototype.handleThumbPosition=function(){var e=this.thumb;if(this.orientation=="horizontal"){var r=this.innerWidth,o=e.innerWidth,n=e.pixelX;this._start=n/r,this._end=(n+o)/r,this.updateThumb()}else{var s=this.innerHeight,a=e.innerHeight,l=e.pixelY;l+a>s&&(l=s-a,e.y=l),this._start=1-(l+a)/s,this._end=1-l/s,this.updateThumb()}},t.prototype.createBackground=function(){return new uo},Object.defineProperty(t.prototype,"hideGrips",{get:function(){return this._hideGrips},set:function(e){var r=this;this._hideGrips=e,this._overDisposer&&this.removeDispose(this._overDisposer),this._outDisposer&&this.removeDispose(this._outDisposer),e?(this._overDisposer=this.events.on("over",function(){r.startGrip.show(),r.endGrip.show()},void 0,!1),this._outDisposer=this.events.on("out",function(){r.startGrip.hide(),r.endGrip.hide()},void 0,!1),this.startGrip.hide(),this.endGrip.hide()):(this.startGrip.show(),this.endGrip.show())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animationDuration",{get:function(){return this.getPropertyValue("animationDuration")},set:function(e){this.setPropertyValue("animationDuration",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animationEasing",{get:function(){return this.getPropertyValue("animationEasing")},set:function(e){this.setPropertyValue("animationEasing",e)},enumerable:!0,configurable:!0}),t.prototype.asFunction=function(e){return e=="animationEasing"||i.prototype.asIs.call(this,e)},t}(_e);P.registeredClasses.Scrollbar=od;var r_=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="Slider",e.thumb.opacity=0,e.thumb.interactionsEnabled=!1,e.endGrip.opacity=0,e.endGrip.interactionsEnabled=!1,e.startGrip.events.on("drag",function(){e.endGrip.x=e.startGrip.x,e.endGrip.y=e.startGrip.y}),e.applyTheme(),e}return Object.defineProperty(t.prototype,"__end",{get:function(){return this._start},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this._start},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return this._start},set:function(e){this._isBusy||(this.__start=e)},enumerable:!0,configurable:!0}),t}(od);P.registeredClasses.Slider=r_;var o_=function(i){A(t,i);function t(){var e=i.call(this)||this;e.className="TextLink",e.selectable=!0;var r=new Le;e.fill=r.getFor("primaryButton").brighten(.3);var o=e.states.create("hover");o.properties.fill=r.getFor("primaryButtonHover").brighten(.3);var n=e.states.create("down");return n.properties.fill=r.getFor("primaryButtonDown").brighten(.3),e.cursorOverStyle=Ft.pointer,e.applyTheme(),e}return t}(si);P.registeredClasses.TextLink=o_;var Br=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.properties={},e.isTemplate=!1,e._scale=1,e._nonScaling=!0,e.className="Filter",e.filterPrimitives=new Ie,e.properties.filterUnits="objectBoundingBox",e.filterPrimitives.events.on("inserted",function(r){e._disposers.push(r.newValue)}),e.width=120,e.height=120,e.applyTheme(),e}return t.prototype.appendPrimitives=function(e){de(this.filterPrimitives.iterator(),function(r){e.add(r)})},t.prototype.animate=function(e,r,o){var n=new Fi(this,e,r,o).start();return n},Object.defineProperty(t.prototype,"width",{get:function(){return this.properties.width},set:function(e){this.properties.width=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.properties.height},set:function(e){this.properties.height=e},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(e){var r=this;i.prototype.copyFrom.call(this,e),ne(e.properties,function(o,n){r[o]=n})},Object.defineProperty(t.prototype,"paper",{get:function(){return this._paper?this._paper:Ao()},set:function(e){this._paper!=e&&(this._paper=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new lo(this._animations))),this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},set:function(e){this._scale=e,this.updateScale()},enumerable:!0,configurable:!0}),t.prototype.updateScale=function(){},Object.defineProperty(t.prototype,"filterUnits",{get:function(){return this.properties.filterUnits},set:function(e){this.properties.filterUnits=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonScaling",{get:function(){return this._nonScaling},set:function(e){this._nonScaling=e,e||(this._scale=1),this.updateScale()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sprite",{set:function(e){this.setSprite(e)},enumerable:!0,configurable:!0}),t.prototype.setSprite=function(e){this._sprite&&this._sprite!=e&&this._sprite.filters.removeValue(this),this._sprite=e},t}(lt);var rg=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="DropShadowFilter",e.color=fe("#000"),e.feGaussianBlur=e.paper.add("feGaussianBlur"),e.feGaussianBlur.attr({result:"blurOut",in:"SourceGraphic"}),e.filterPrimitives.push(e.feGaussianBlur),e.feOffset=e.paper.add("feOffset"),e.feOffset.attr({result:"offsetBlur"}),e.filterPrimitives.push(e.feOffset),e.feFlood=e.paper.add("feFlood"),e.feFlood.attr({"flood-color":e.color}),e.filterPrimitives.push(e.feFlood),e.feComposite=e.paper.add("feComposite"),e.feComposite.attr({in2:"offsetBlur",operator:"in"}),e.filterPrimitives.push(e.feComposite),e.feMerge=e.paper.addGroup("feMerge"),e.feMerge.add(e.paper.add("feMergeNode")),e.feMerge.add(e.paper.add("feMergeNode").attr({in:"SourceGraphic"})),e.filterPrimitives.push(e.feMerge),e.width=200,e.height=200,e.blur=1.5,e.dx=3,e.dy=3,e.opacity=.5,e.applyTheme(),e}return Object.defineProperty(t.prototype,"color",{get:function(){return this.properties.color},set:function(e){this.properties.color=e,this.feFlood&&this.feFlood.attr({"flood-color":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this.properties.opacity},set:function(e){this.properties.opacity=e,this.feFlood.attr({"flood-opacity":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dx",{get:function(){return this.properties.dx},set:function(e){this.properties.dx=e,this.feOffset.attr({dx:e/this.scale})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dy",{get:function(){return this.properties.dy},set:function(e){this.properties.dy=e,this.feOffset.attr({dy:e/this.scale})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blur",{get:function(){return this.properties.blur},set:function(e){this.properties.blur=e,this.feGaussianBlur.attr({stdDeviation:e/this.scale})},enumerable:!0,configurable:!0}),t.prototype.updateScale=function(){this.dx=this.dx,this.dy=this.dy,this.blur=this.blur},t}(Br);P.registeredClasses.DropShadowFilter=rg;var nd=function(i){A(t,i);function t(){var e=i.call(this)||this;e._boundingRect={x:-4e4,y:-4e4,width:8e4,height:8e4},e._pointTo={x:0,y:0},e.fitPointerToBounds=!1,e._verticalOrientation="up",e.fixDoc=!0,e.className="Tooltip",e.isMeasured=!1,e.getFillFromObject=!0,e.margin(5,5,5,5),e.defaultState.transitionDuration=1,e.hiddenState.transitionDuration=1;var r=e.background;r.interactionsEnabled=!1,r.fillOpacity=.9,r.strokeWidth=1,r.strokeOpacity=1,r.stroke=fe("#ffffff"),r.cornerRadius=3,r.pointerLength=6,r.pointerBaseWidth=10;var o=new rg;o.dy=1,o.dx=1,o.opacity=.5,r.filters.push(o),e.autoTextColor=!0;var n=e.createChild(si);return n.shouldClone=!1,e.label=n,n.padding(7,12,4,12),n.interactionsEnabled=!1,n.horizontalCenter="middle",n.fill=fe("#ffffff"),e._disposers.push(n),e.label.events.on("sizechanged",e.drawBackground,e),e.label.zIndex=1,e.pointerOrientation="vertical",e.animationDuration=0,e.animationEasing=Ir,e.setPropertyValue("showInViewport",!1),e.role="tooltip",e.visible=!1,e.opacity=0,e.x=0,e.y=0,e.events.on("visibilitychanged",e.handleVisibility,e),e.applyTheme(),e}return t.prototype.handleVisibility=function(){this.visible&&this.label.invalidate()},Object.defineProperty(t.prototype,"getStrokeFromObject",{get:function(){return this.getPropertyValue("getStrokeFromObject")},set:function(e){this.setPropertyValue("getStrokeFromObject",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoTextColor",{get:function(){return this.getPropertyValue("autoTextColor")},set:function(e){this.setPropertyValue("autoTextColor",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keepTargetHover",{get:function(){return this.getPropertyValue("keepTargetHover")},set:function(e){var r=this;this.setPropertyValue("keepTargetHover",e,!0)&&e&&(this.hoverable=!0,this.background.interactionsEnabled=!0,this._disposers.push(this.events.on("over",function(o){r.targetSprite&&r.targetSprite.hoverable&&(r.targetSprite.isHover=!0)})),this._disposers.push(this.events.on("out",function(o){r.targetSprite&&r.targetSprite.hoverable&&(r.targetSprite.isHover=!1)})))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showInViewport",{get:function(){return this.getPropertyValue("showInViewport")},set:function(e){this.setPropertyValue("showInViewport",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getFillFromObject",{get:function(){return this.getPropertyValue("getFillFromObject")},set:function(e){this.setPropertyValue("getFillFromObject",e,!0)},enumerable:!0,configurable:!0}),t.prototype.createBackground=function(){return new Pv},Object.defineProperty(t.prototype,"pointerOrientation",{get:function(){return this.getPropertyValue("pointerOrientation")},set:function(e){this.setPropertyValue("pointerOrientation",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animationDuration",{get:function(){return this.getPropertyValue("animationDuration")},set:function(e){this.setPropertyValue("animationDuration",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animationEasing",{get:function(){return this.getPropertyValue("animationEasing")},set:function(e){this.setPropertyValue("animationEasing",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"html",{get:function(){return this.label.html},set:function(e){this.label.html!=e&&(this.label.html=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.label.text},set:function(e){this.label.text!=e&&(this.label.text=e,this.invalidate())},enumerable:!0,configurable:!0}),t.prototype.draw=function(){i.prototype.draw.call(this);var e=this.label;e.invalid&&e.validate();var r=this._pointTo.x,o=this._pointTo.y,n=this._boundingRect,s=e.measuredWidth,a=e.measuredHeight,l=this.background.pointerLength,d,u;if(this.ignoreBounds&&(n=void 0),n&&this.fixDoc&&s>n.width){Qm({x:n.x,y:n.y},this.parent);var c=Qm({x:n.x+n.width,y:n.y+n.height},this.parent),h=document.body.offsetWidth;document.body.offsetHeight,c.x>h/2?n.x=n.width-s:n.width=n.x+s}var p=this.pointerOrientation;p=="horizontal"||p=="left"||p=="right"?(u=-a/2,p=="horizontal"?n&&r>n.x+n.width/2?d=-s/2-l:d=s/2+l:p=="left"?d=s/2+l:d=-s/2-l):(n&&(d=De(0,n.x-r+s/2,n.x-r+n.width-s/2)),p=="vertical"?n&&o>n.y+a+l?(u=-a-l,this._verticalOrientation="up"):(u=l,this._verticalOrientation="down"):p=="down"?(u=-a-l,this._verticalOrientation="up"):(u=l,this._verticalOrientation="down")),n&&(u=De(u,n.y-o,n.y+n.height-a-o)),e.x=d,e.y=u,this.drawBackground()},t.prototype.updateBackground=function(){this.group.addToBack(this.background.group)},t.prototype.drawBackground=function(){var e=this.label,r=this.background,o=e.measuredWidth,n=e.measuredHeight,s=this._boundingRect,a=o,l=e.pixelX-o/2,d=n,u=e.pixelY,c=this._pointTo.x,h=this._pointTo.y,p=s.x-c,f=p+s.width,C=s.y-h,b=C+s.height;r.x=l,r.y=u,r.width=a,r.height=d,this.fitPointerToBounds?(r.pointerX=De(-r.x,p-r.x,f-r.x),r.pointerY=De(-r.y,C-r.y,b-r.y)):(r.pointerX=-r.x,r.pointerY=-r.y),r.validate()},t.prototype.delayedPointTo=function(e,r){var o=this;this._pointToDisposer&&this._pointToDisposer.dispose(),this._pointToDisposer=P.events.once("exitframe",function(){o.pointTo(e,r)}),this.addDisposer(this._pointToDisposer)},t.prototype.pointTo=function(e,r){(this._pointTo.x!=e.x||this._pointTo.y!=e.y)&&(this._pointTo=e,this.invalidate(),!this.visible||r?(this.moveTo(this._pointTo),this._animation&&this._animation.kill()):this.pixelX==0&&this.pixelY==0?this.moveTo(this._pointTo):(this._animation&&this._animation.kill(),this._animation=new Fi(this,[{property:"x",to:e.x,from:this.pixelX},{property:"y",to:e.y,from:this.pixelY}],this.animationDuration,this.animationEasing).start()))},t.prototype.setBounds=function(e){var r=this._boundingRect;(r.x!=e.x||r.y!=e.y||r.width!=e.width||r.height!=e.height)&&(this._boundingRect=e,this.invalidate())},Object.defineProperty(t.prototype,"boundingContainer",{set:function(e){this._boundingContainer=e,e.events.on("sizechanged",this.updateBounds,this),e.events.on("positionchanged",this.updateBounds,this)},enumerable:!0,configurable:!0}),t.prototype.updateBounds=function(){var e=this._boundingContainer,r=DS({x:e.pixelX,y:e.pixelY,width:e.maxWidth,height:e.maxHeight},e);this.setBounds(r)},Object.defineProperty(t.prototype,"ignoreBounds",{get:function(){return this.getPropertyValue("ignoreBounds")},set:function(e){this.setPropertyValue("ignoreBounds",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalOrientation",{get:function(){return this._verticalOrientation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltip",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(e){i.prototype.copyFrom.call(this,e),this.label.copyFrom(e.label),e._boundingRect&&(this._boundingRect=e._boundingRect)},t.prototype.asFunction=function(e){return e=="animationEasing"||i.prototype.asIs.call(this,e)},t}(_e);P.registeredClasses.Tooltip=nd;var n_=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="Trapezoid",e.element=e.paper.add("path"),e.topSide=ae(100),e.bottomSide=ae(100),e.leftSide=ae(100),e.rightSide=ae(100),e.isMeasured=!1,e.applyTheme(),e}return t.prototype.draw=function(){i.prototype.draw.call(this);var e=this.pixelWidth,r=this.pixelHeight,o=qt(this.topSide,e),n=qt(this.bottomSide,e),s=qt(this.leftSide,r),a=qt(this.rightSide,r),l=(e-o)/2,d=(r-s)/2,u=e-(e-o)/2,c=(r-a)/2,h=e-(e-n)/2,p=r-(r-a)/2,f=(e-n)/2,C=r-(r-s)/2,b="",x="",S="",R="";if(T(this.horizontalNeck)){var I=this.horizontalNeck.value;b=X({x:e*I,y:Math.max(d,c)}),S=X({x:e*I,y:Math.min(p,C)})}if(T(this.verticalNeck)){var F=this.verticalNeck.value;x=X({x:Math.min(u,h),y:r*F}),R=X({x:Math.max(l,f),y:r*F})}var L=pe({x:l,y:d})+b+X({x:u,y:c})+x+X({x:h,y:p})+S+X({x:f,y:C})+R;this.path=L},Object.defineProperty(t.prototype,"topSide",{get:function(){return this.getPropertyValue("topSide")},set:function(e){this.setPercentProperty("topSide",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomSide",{get:function(){return this.getPropertyValue("bottomSide")},set:function(e){this.setPercentProperty("bottomSide",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftSide",{get:function(){return this.getPropertyValue("leftSide")},set:function(e){this.setPercentProperty("leftSide",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightSide",{get:function(){return this.getPropertyValue("rightSide")},set:function(e){this.setPercentProperty("rightSide",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalNeck",{get:function(){return this.getPropertyValue("horizontalNeck")},set:function(e){this.setPropertyValue("horizontalNeck",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalNeck",{get:function(){return this.getPropertyValue("verticalNeck")},set:function(e){this.setPropertyValue("verticalNeck",e,!0)},enumerable:!0,configurable:!0}),t}(Se);P.registeredClasses.Trapezoid=n_;var og=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="Triangle",e.element=e.paper.add("path"),e.direction="top",e.applyTheme(),e}return t.prototype.draw=function(){i.prototype.draw.call(this);var e=this.pixelWidth,r=this.pixelHeight,o;switch(this.direction){case"right":o=pe({x:0,y:0})+X({x:e,y:r/2})+X({x:0,y:r})+zt();break;case"left":o=pe({x:e,y:0})+X({x:0,y:r/2})+X({x:e,y:r})+zt();break;case"bottom":o=pe({x:0,y:0})+X({x:e,y:0})+X({x:e/2,y:r})+zt();break;case"top":o=pe({x:e/2,y:0})+X({x:e,y:r})+X({x:0,y:r})+zt();break}this.path=o},Object.defineProperty(t.prototype,"direction",{get:function(){return this.getPropertyValue("direction")},set:function(e){this.setPropertyValue("direction",e,!0)},enumerable:!0,configurable:!0}),t}(Se);P.registeredClasses.Triangle=og;var ec=function(){function i(t,e){this._tensionX=t,this._tensionY=e}return i.prototype.smooth=function(t){for(var e=t.length-1;e>0;e--){var r=t[e],o=t[e-1];Math.abs(r.x-o.x)<.1&&Math.abs(r.y-o.y)<.1&&t.splice(e-1,1)}var n=this._tensionX,s=this._tensionY;if(t.length<3||n>=1&&s>=1)return QS(t);var a=t[0],l=t[t.length-1],d=!1;oe(a.x,3)==oe(l.x)&&oe(a.y)==oe(l.y)&&(d=!0);for(var u="",e=0,c=t.length-1;e<c;e++){var r=t[e-1],o=t[e],h=t[e+1],p=t[e+2];e===0?d?r=t[t.length-2]:r=t[e]:e==t.length-2&&(d?p=t[1]:p=t[e+1]);var f=vp(r,o,h,p,n,s),C=yp(r,o,h,p,n,s);u+=qn(h,f,C)}return u},i}();function Ea(i,t,e,r,o,n){var s=i.x,a=i.y,l=t.x,d=t.y,u=Ri(i,t);n&&(e=u/Math.round(u/e));var c=P.getCache(Km(["wavedLine",i.x,t.x,i.y,t.y,e,r]));if(!c){if(u>0){var h=Math.atan2(d-a,l-s),p=Math.cos(h),f=Math.sin(h),C=e*p,b=e*f;if(e<=1||r<=1)c=X(t);else{var x=Math.round(2*u/e),S=[],R=1;l<s&&(R*=-1),d<a&&(R*=-1);for(var I=0;I<=x;I++){R*=-1;var F=s+I*C/2+R*r/2*f,L=a+I*b/2-R*r/2*p;S.push({x:F,y:L})}c=new ec(o,o).smooth(S)}}else c="";P.setCache(Km(["wavedLine",i.x,t.x,i.y,t.y,e,r]),c)}return c}var d_=function(){function i(t,e){this._reversed=t,this._closed=e.closed}return i.prototype._curve=function(t,e,r,o,n,s){var a=(e-t)/3;return this._reversed?qn({x:o,y:e},{x:r+a*n,y:t+a},{x:o-a*s,y:e-a}):qn({x:e,y:o},{x:t+a,y:r+a*n},{x:e-a,y:o-a*s})},i.prototype.smooth=function(t){var e=this,r=NaN,o=NaN,n=NaN,s=NaN,a=NaN,l=0,d="";switch(Z(t,function(u){var c=u.x,h=u.y;if(e._reversed){var p=c;c=h,h=p}var f=NaN;if(!(c===o&&h===s)){switch(l){case 0:l=1,e._reversed?d+=X({x:h,y:c}):d+=X({x:c,y:h});break;case 1:l=2;break;case 2:l=3,d+=e._curve(r,o,n,s,a_(r,o,n,s,f=l_(r,o,n,s,c,h)),f);break;default:d+=e._curve(r,o,n,s,a,f=l_(r,o,n,s,c,h));break}r=o,o=c,n=s,s=h,a=f}}),l){case 2:this._reversed?d+=X({x:s,y:o}):d+=X({x:o,y:s});break;case 3:d+=this._curve(r,o,n,s,a,a_(r,o,n,s,a));break}return this._closed&&(d+=zt()),d},i}();function s_(i){return i<0?-1:1}function a_(i,t,e,r,o){var n=t-i;return n?(3*(r-e)/n-o)/2:o}function l_(i,t,e,r,o,n){var s=t-i,a=o-t,l=(r-e)/(s||a<0&&-0),d=(n-r)/(a||s<0&&-0),u=(l*a+d*s)/(s+a);return(s_(l)+s_(d))*Math.min(Math.abs(l),Math.abs(d),.5*Math.abs(u))||0}var p4=function(i){A(t,i);function t(e){return i.call(this,!1,e)||this}return t}(d_);var g4=function(i){A(t,i);function t(e){return i.call(this,!0,e)||this}return t}(d_);var hM=function(){function i(t){this._closed=t.closed}return i.prototype.smooth=function(t){var e=this,r=NaN,o=NaN,n=NaN,s=NaN,a=NaN,l=NaN,d=NaN,u=NaN,c=NaN,h=NaN,p=0,f="",C=function(x,S){f+=qn({x:(r+4*o+x)/6,y:(l+4*d+S)/6},{x:(2*r+o)/3,y:(2*l+d)/3},{x:(r+2*o)/3,y:(l+2*d)/3})},b=function(x){var S=x.x,R=x.y;switch(p){case 0:p=1,e._closed?(n=S,u=R):f+=X({x:S,y:R});break;case 1:p=2,e._closed&&(s=S,c=R);break;case 2:if(p=3,e._closed){a=S,h=R,f+=pe({x:(r+4*o+S)/6,y:(l+4*d+R)/6});break}else f+=X({x:(5*r+o)/6,y:(5*l+d)/6});default:C(S,R);break}r=o,o=S,l=d,d=R};if(Z(t,b),this._closed)switch(p){case 1:f+=pe({x:n,y:u}),f+=zt();break;case 2:f+=pe({x:(n+2*s)/3,y:(u+2*c)/3}),f+=X({x:(s+2*n)/3,y:(c+2*u)/3}),f+=zt();break;case 3:b({x:n,y:u}),b({x:s,y:c}),b({x:a,y:h});break}else{switch(p){case 3:C(o,d);case 2:f+=X({x:o,y:d});break}f+=zt()}return f},i}();var u_=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="WavedCircle",e.element=e.paper.add("path"),e.waveLength=16,e.waveHeight=4,e.fill=void 0,e.fillOpacity=0,e.tension=.8,e.applyTheme(),e}return t.prototype.draw=function(){var e="",r=this.pixelRadius;if(r>0){var o=this.getPoints(r);e=pe(o[0])+new ec(this.tension,this.tension).smooth(o)}var n=this.pixelInnerRadius;if(n>0){var o=this.getPoints(n);o.reverse(),e+=pe(o[0])+new ec(this.tension,this.tension).smooth(o)}this.path=e},t.prototype.getPoints=function(e){for(var r=e*Math.PI*2,o=this.waveHeight/2,n=r/Math.round(r/this.waveLength),s=n/2,a=[],l=r/n,d=0;d<=l;d++){var u=d*n/r*360,c=(d*n+s)/r*360;a.push({x:(e-o)*Ve(u),y:(e-o)*Ae(u)}),a.push({x:(e+o)*Ve(c),y:(e+o)*Ae(c)})}return a.pop(),a},Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(e){this.setPercentProperty("innerRadius",e,!0,!1,10,!1),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelInnerRadius",{get:function(){return qt(this.innerRadius,st(this.innerWidth/2,this.innerHeight/2))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(e){this.setPropertyValue("waveLength",e),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(e){this.setPropertyValue("waveHeight",e),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(e){this.setPropertyValue("tension",e),this.invalidate()},enumerable:!0,configurable:!0}),t}(Lo);P.registeredClasses.WavedCircle=u_;var gM=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="WavedLine",e.element=e.paper.add("path"),e.waveLength=16,e.waveHeight=4,e.tension=.8,e.pixelPerfect=!1,e.fill=fe(),e.applyTheme(),e}return t.prototype.draw=function(){var e={x:this.x1,y:this.y1},r={x:this.x2,y:this.y2};this.path=pe(e)+Ea(e,r,this.waveLength,this.waveHeight,this.tension,!0)},Object.defineProperty(t.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(e){this.setPropertyValue("waveLength",e),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(e){this.setPropertyValue("waveHeight",e),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(e){this.setPropertyValue("tension",e),this.invalidate()},enumerable:!0,configurable:!0}),t}(tg);var fM=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="WavedRectangle",e.element=e.paper.add("path"),e.waveLength=16,e.waveHeight=4,e.tension=.8,e.setPropertyValue("wavedLeft",!0),e.setPropertyValue("wavedRight",!0),e.setPropertyValue("wavedTop",!0),e.setPropertyValue("wavedBottom",!0),e.applyTheme(),e}return t.prototype.draw=function(){i.prototype.draw.call(this);var e=this.pixelWidth,r=this.pixelHeight;if(e>0&&r>0){var o={x:0,y:0},n={x:e,y:0},s={x:e,y:r},a={x:0,y:r},l=Math.min(e,this.waveLength),d=Math.min(r,this.waveHeight),u=Math.min(r,this.waveLength),c=Math.min(e,this.waveHeight),h="",p="",f="",C="";this.wavedTop&&(h=Ea(o,n,l,d,this.tension,!0)),this.wavedRight&&(p=Ea(n,s,u,c,this.tension,!0)),this.wavedBottom&&(f=Ea(s,a,l,d,this.tension,!0)),this.wavedLeft&&(C=Ea(a,o,u,c,this.tension,!0)),this.path=pe(o)+h+X(n)+p+X(s)+f+X(a)+C+"z"}},Object.defineProperty(t.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(e){this.setPropertyValue("waveLength",e),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(e){this.setPropertyValue("waveHeight",e),this.invalidate()},enumerable:!0,configurable:!0}),t.prototype.setWavedSides=function(e,r,o,n){this.wavedTop=e,this.wavedRight=r,this.wavedBottom=o,this.wavedLeft=n},Object.defineProperty(t.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(e){this.setPropertyValue("tension",e),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wavedRight",{get:function(){return this.getPropertyValue("wavedRight")},set:function(e){this.setPropertyValue("wavedRight",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wavedLeft",{get:function(){return this.getPropertyValue("wavedLeft")},set:function(e){this.setPropertyValue("wavedLeft",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wavedTop",{get:function(){return this.getPropertyValue("wavedTop")},set:function(e){this.setPropertyValue("wavedTop",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wavedBottom",{get:function(){return this.getPropertyValue("wavedBottom")},set:function(e){this.setPropertyValue("wavedBottom",e,!0)},enumerable:!0,configurable:!0}),t}(id);var ng=function(i){A(t,i);function t(){var e=i.call(this)||this;e.className="ZoomOutButton",e.padding(9,9,9,9),e.showSystemTooltip=!0;var r=new Le,o=e.background;o.cornerRadius(20,20,20,20),o.fill=r.getFor("primaryButton"),o.stroke=r.getFor("primaryButtonStroke"),o.strokeOpacity=0,o.states.getKey("hover").properties.fill=r.getFor("primaryButtonHover"),o.states.getKey("down").properties.fill=r.getFor("primaryButtonActive");var n=new Se;n.element=e.paper.add("path");var s=pe({x:0,y:0});return s+=X({x:11,y:0}),n.path=s,n.pixelPerfect=!0,n.padding(8,3,8,3),n.stroke=r.getFor("primaryButtonText"),e.icon=n,e.applyTheme(),e}return t.prototype.applyInternalDefaults=function(){i.prototype.applyInternalDefaults.call(this),T(this.readerTitle)||(this.readerTitle=this.language.translate("Zoom Out"))},t}(Qi);P.registeredClasses.ZoomOutButton=ng;var c_=function(i){A(t,i);function t(){var e=i.call(this)||this;e.className="PlayButton",e.padding(12,12,12,12),e.showSystemTooltip=!0;var r=new Le,o=e.background;o.cornerRadius(25,25,25,25),o.fill=r.getFor("primaryButton"),o.stroke=r.getFor("primaryButtonStroke"),o.strokeOpacity=0,o.states.getKey("hover").properties.fill=r.getFor("primaryButtonHover"),o.states.getKey("down").properties.fill=r.getFor("primaryButtonActive");var n=new og;n.direction="right",n.width=9,n.height=11,n.marginLeft=1,n.marginRight=1,n.horizontalCenter="middle",n.verticalCenter="middle",n.stroke=r.getFor("primaryButtonText"),n.fill=n.stroke,e.icon=n;var s=new uo;s.width=11,s.height=11,s.horizontalCenter="middle",s.verticalCenter="middle",s.cornerRadius(0,0,0,0),s.stroke=r.getFor("primaryButtonText"),s.fill=n.stroke,e.togglable=!0;var a=e.states.create("active");return a.transitionDuration=0,a.properties.icon=s,e.defaultState.transitionDuration=0,e.applyTheme(),e}return t.prototype.applyInternalDefaults=function(){i.prototype.applyInternalDefaults.call(this),T(this.readerTitle)||(this.readerTitle=this.language.translate("Play"))},t}(Qi);P.registeredClasses.PlayButton=c_;var sg=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="ColorModifier",e.applyTheme(),e}return t.prototype.modify=function(e){return e},t}(lt);P.registeredClasses.ColorModifier=sg;var tc=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.lightnesses=[],e.brightnesses=[],e.opacities=[],e.offsets=[],e.className="GradientModifier",e.applyTheme(),e}return Object.defineProperty(t.prototype,"lightnesses",{get:function(){return this._lightnesses},set:function(e){this._lightnesses=e,this._brightnesses=[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"brightnesses",{get:function(){return this._brightnesses},set:function(e){this._brightnesses=e,this._lightnesses=[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacities",{get:function(){return this._opacities},set:function(e){this._opacities=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return this._offsets},set:function(e){this._offsets=e},enumerable:!0,configurable:!0}),t.prototype.modify=function(e){this.gradient.clear();var r=0;this.opacities&&(r=ze(r,this.opacities.length)),this.lightnesses&&(r=ze(r,this.lightnesses.length)),this.brightnesses&&(r=ze(r,this.brightnesses.length));for(var o=1,n,s,a=0;a<r;a++){var l=e;this.opacities&&M(this.opacities[a])&&(o=this.opacities[a]),this.lightnesses&&M(this.lightnesses[a])&&(n=this.lightnesses[a],s=void 0),this.brightnesses&&M(this.brightnesses[a])&&(s=this.brightnesses[a],n=void 0),M(s)?l=e.brighten(this.brightnesses[a]):M(n)&&(l=e.lighten(this.lightnesses[a]));var d=this.offsets[a];this.gradient.addColor(l,o,d)}return this.gradient},t.prototype.copyFrom=function(e){i.prototype.copyFrom.call(this,e),this._offsets=e.offsets,this._brightnesses=e.brightnesses,this._lightnesses=e.lightnesses,this._opacities=e.opacities},t}(sg);P.registeredClasses.GradientModifier=tc;var ag=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="LinearGradientModifier",e.gradient=new Ki,e.applyTheme(),e}return t.prototype.copyFrom=function(e){i.prototype.copyFrom.call(this,e),this.gradient=e.gradient.clone()},t}(tc);P.registeredClasses.LinearGradientModifier=ag;var mM=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="Cone",e.angle=30,e.radius=ae(100),e.topRadius=ae(100),e.top=e.createChild(Qu),e.top.shouldClone=!1,e.bottom=e.createChild(Qu),e.bottom.shouldClone=!1,e.body=e.createChild(Se),e.body.shouldClone=!1,e.body.setElement(e.paper.add("path")),e.layout="none",e.bodyFillModifier=new ag,e.bodyFillModifier.lightnesses=[0,-.25,0],e.body.fillModifier=e.bodyFillModifier,e.applyTheme(),e}return t.prototype.draw=function(){i.prototype.draw.call(this),xu(this,this.top,eg),xu(this,this.bottom,eg),xu(this,this.body,eg);var e=this.innerWidth,r=this.innerHeight,o=this.bottom,n=this.top,s=this.angle,a,l,d;this.orientation=="horizontal"?(a=r/2,o.y=r/2,o.x=0,n.y=r/2,n.x=e,l=(90-s)/90,d=0,this.bodyFillModifier.gradient.rotation=90):(l=0,d=(90-s)/90,a=e/2,o.y=r,o.x=e/2,n.x=e/2,this.bodyFillModifier.gradient.rotation=0);var u=this.radius.value*a,c=this.topRadius.value*a;o.radius=u-u*l,o.radiusY=u-u*d,n.radius=c-c*l,n.radiusY=c-c*d;var h;this.orientation=="horizontal"?h=pe({x:0,y:r/2-o.radiusY})+_a(-90,-180,o.radius,o.radiusY)+X({x:e,y:r/2+n.radiusY})+_a(90,180,n.radius,n.radiusY)+zt():h=pe({x:e/2-n.radius,y:0})+_a(180,-180,n.radius,n.radiusY)+X({x:e/2+o.radius,y:r})+_a(0,180,o.radius,o.radiusY)+zt(),this.body.path=h},Object.defineProperty(t.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(e){this.setPropertyValue("angle",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(e){this.setPropertyValue("radius",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRadius",{get:function(){return this.getPropertyValue("topRadius")},set:function(e){this.setPropertyValue("topRadius",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(e){this.setPropertyValue("orientation",e,!0)},enumerable:!0,configurable:!0}),t}(_e);var sd=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="LightenFilter",e.feColorMatrix=e.paper.add("feColorMatrix"),e.feColorMatrix.attr({type:"matrix"}),e.filterPrimitives.push(e.feColorMatrix),e.lightness=0,e.applyTheme(),e}return Object.defineProperty(t.prototype,"lightness",{get:function(){return this.properties.lightness},set:function(e){this.properties.lightness=e;var r=e+1;this.feColorMatrix.attr({values:r+" 0 0 0 0 0 "+r+" 0 0 0 0 0 "+r+" 0 0 0 0 0 1 0"})},enumerable:!0,configurable:!0}),t}(Br);P.registeredClasses.LightenFilter=sd;var vM=function(i){A(t,i);function t(){var e=i.call(this)||this;e.angle=30,e.depth=30,e.className="Rectangle3D",e.layout="none";var r=e.createChild(Se);r.shouldClone=!1,r.setElement(e.paper.add("path")),r.isMeasured=!1,e.sideBack=r,e._disposers.push(e.sideBack);var o=e.createChild(Se);o.shouldClone=!1,o.setElement(e.paper.add("path")),o.isMeasured=!1,e.sideBottom=o,e._disposers.push(e.sideBottom);var n=e.createChild(Se);n.shouldClone=!1,n.setElement(e.paper.add("path")),n.isMeasured=!1,e.sideLeft=n,e._disposers.push(e.sideLeft);var s=e.createChild(Se);s.shouldClone=!1,s.setElement(e.paper.add("path")),s.isMeasured=!1,e.sideRight=s,e._disposers.push(e.sideRight);var a=e.createChild(Se);a.shouldClone=!1,a.setElement(e.paper.add("path")),a.isMeasured=!1,e.sideTop=a,e._disposers.push(e.sideTop);var l=e.createChild(Se);return l.shouldClone=!1,l.setElement(e.paper.add("path")),l.isMeasured=!1,e.sideFront=l,e._disposers.push(e.sideFront),e.applyTheme(),e}return t.prototype.draw=function(){i.prototype.draw.call(this);var e=this.innerWidth,r=this.innerHeight,o=this.depth,n=this.angle,s=Ae(n),a=Ve(n),l={x:0,y:0},d={x:e,y:0},u={x:e,y:r},c={x:0,y:r},h={x:o*a,y:-o*s},p={x:o*a+e,y:-o*s},f={x:o*a+e,y:-o*s+r},C={x:o*a,y:-o*s+r};this.sideFront.path=pe(l)+X(d)+X(u)+X(c)+zt(),this.sideBack.path=pe(h)+X(p)+X(f)+X(C)+zt(),this.sideLeft.path=pe(l)+X(h)+X(C)+X(c)+zt(),this.sideRight.path=pe(d)+X(p)+X(f)+X(u)+zt(),this.sideBottom.path=pe(c)+X(C)+X(f)+X(u)+zt(),this.sideTop.path=pe(l)+X(h)+X(p)+X(d)+zt()},Object.defineProperty(t.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(e){this.setPropertyValue("depth",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(e){this.setPropertyValue("angle",e,!0)},enumerable:!0,configurable:!0}),t.prototype.setFill=function(e){i.prototype.setFill.call(this,e),(!Qe(e)||"r"in e)&&(e=ga(e));var r;if(e instanceof Ue)r=e.hex;else if(e instanceof Ki||e instanceof Fr)r=e.stops.getIndex(0).color.hex;else{var o=new sd;o.lightness=-.2,this.sideBack.filters.push(o);var n=o.clone();n.lightness=-.4,this.sideLeft.filters.push(n);var s=o.clone();s.lightness=-.2,this.sideRight.filters.push(s);var a=o.clone();a.lightness=-.1,this.sideTop.filters.push(a);var l=o.clone();l.lightness=-.5,this.sideBottom.filters.push(l)}r&&(this.sideBack.fill=fe(r).lighten(-.2),this.sideLeft.fill=fe(r).lighten(-.4),this.sideRight.fill=fe(r).lighten(-.2),this.sideTop.fill=fe(r).lighten(-.1),this.sideBottom.fill=fe(r).lighten(-.5))},t.prototype.copyFrom=function(e){i.prototype.copyFrom.call(this,e),this.sideBack.copyFrom(e.sideBack),this.sideLeft.copyFrom(e.sideLeft),this.sideRight.copyFrom(e.sideRight),this.sideTop.copyFrom(e.sideTop),this.sideBottom.copyFrom(e.sideBottom)},t}(_e);var yM=function(i){A(t,i);function t(){var e=i.call(this)||this;e.className="Slice3D",e.layout="none";var r=e.createChild(Se);e.edge=r,r.shouldClone=!1,r.isMeasured=!1,r.toBack(),e.angle=30,e.depth=20;var o=e.createChild(Se);e.sideA=o,o.shouldClone=!1,o.isMeasured=!1;var n=e.createChild(Se);return e.sideB=n,n.shouldClone=!1,n.isMeasured=!1,e.applyTheme(),e}return t.prototype.setFill=function(e){i.prototype.setFill.call(this,e);var r;if(e instanceof Ue)r=e.hex;else if(e instanceof Ki||e instanceof Fr)r=e.stops.getIndex(0).color.hex;else{var o=new sd;o.lightness=-.25,this.edge.filters.push(o),this.sideA.filters.push(o.clone()),this.sideB.filters.push(o.clone())}if(r){var n=fe(r).lighten(-.25);this.edge.fill=n,this.sideA.fill=n,this.sideB.fill=n,this.edge.stroke=n,this.sideA.stroke=n,this.sideB.stroke=n}},t.prototype.draw=function(){if(this.cornerRadius=0,this.innerCornerRadius=0,i.prototype.draw.call(this),this.arc!==0&&this.radius>0&&this.depth>0){this.sideB.show(0),this.sideA.show(0),this.edge.show(0);for(var e=this.startAngle,r=this.arc,o=this.pixelInnerRadius||0,n=this.radiusY||0,s=this.radius,a=e+r,l=n/s*o,d={x:Ve(e)*o,y:Ae(e)*l},u={x:Ve(e)*s,y:Ae(e)*n},c={x:Ve(a)*s,y:Ae(a)*n},h={x:Ve(a)*o,y:Ae(a)*l},p=this.depth,f={x:d.x,y:d.y-p},C={x:u.x,y:u.y-p},b={x:c.x,y:c.y-p},x={x:h.x,y:h.y-p},S="",R=Math.ceil(r/5),I=r/R,F=e,L=C,V=0;V<R;V++)if(F+=I,F>0&&F<180){S+=pe(L);var k={x:Ve(F)*s,y:Ae(F)*n-p};S+=X({x:L.x,y:L.y+p}),S+=Ar({x:k.x,y:k.y+p},s,n,!0),S+=X(k),S+=Ar(L,s,n),S+="z",L=k}else{S+=pe(L);var k={x:Ve(F)*s,y:Ae(F)*n-p};S+=Ar(k,s,n,!0),S+=X({x:k.x,y:k.y+p}),S+=Ar({x:L.x,y:L.y+p},s,n),S+=X(L),S+="z",L=k}L=f,F=e;for(var V=0;V<R;V++)if(F+=I,F>0&&F<180){S+=pe(L);var k={x:Ve(F)*o,y:Ae(F)*l-p};S+=X({x:L.x,y:L.y+p}),S+=Ar({x:k.x,y:k.y+p},o,l,!0),S+=X(k),S+=Ar(L,o,l),S+="z",L=k}else{S+=pe(L);var k={x:Ve(F)*o,y:Ae(F)*l-p};S+=Ar(k,o,l,!0),S+=X({x:k.x,y:k.y+p}),S+=Ar({x:L.x,y:L.y+p},o,l),S+=X(L),S+="z",L=k}this.edge.path=S,this.sideA.path=pe(d)+X(u)+X(C)+X(f)+zt(),this.sideB.path=pe(c)+X(h)+X(x)+X(b)+zt(),this.startAngle<90?this.sideA.toBack():this.sideA.toFront(),this.startAngle+this.arc>90?this.sideB.toBack():this.sideB.toFront(),this.slice.dy=-p}else this.sideA.hide(0),this.sideB.hide(0),this.edge.hide(0)},Object.defineProperty(t.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(e){this.setPropertyValue("depth",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){var e=this.getPropertyValue("angle");return M(e)||(e=0),e},set:function(e){this.setPropertyValue("angle",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radiusY",{get:function(){var e=this.getPropertyValue("radiusY");return M(e)||(e=this.radius-this.radius*this.angle/90),e},set:function(e){this.setPropertyValue("radiusY",e,!0)},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(e){i.prototype.copyFrom.call(this,e),this.edge.copyFrom(e.edge),this.sideA.copyFrom(e.sideA),this.sideB.copyFrom(e.sideB)},t}(xa);var h_=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="RadialGradientModifier",e.gradient=new Fr,e.applyTheme(),e}return t.prototype.copyFrom=function(e){i.prototype.copyFrom.call(this,e),this.gradient=e.gradient.clone()},t}(tc);P.registeredClasses.RadialGradientModifier=h_;var lg=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.properties.gap=0,e._line=e.paper.add("path"),e.addElement(e._line),e}return t.prototype.draw=function(){if(i.prototype.draw.call(this),Math.round(this.rotation/90)!=this.rotation/90&&(this.properties.shapeRendering="auto"),this._line){var e=this.width,r=this.height,o="";if(!this.gap)Math.round(this.rotation/90)!=this.rotation/90?(o=pe({x:-e,y:r/2})+X({x:e*2,y:r/2}),this.properties.rotationX=this.width/2,this.properties.rotationY=this.height/2):o=pe({x:0,y:0})+X({x:e,y:0});else for(var n=this.gap+this.strokeWidth,s=this.height/n,a=-s/2;a<s*1.5;a++)Math.round(this.rotation/90)!=this.rotation/90?(o+=pe({x:-e,y:(a+.5)*n})+X({x:e*2,y:(a+.5)*n}),this.properties.rotationX=this.width/2,this.properties.rotationY=this.height/2):o+=pe({x:-e,y:a*n})+X({x:e*2,y:a*n});this._line.attr({d:o})}},Object.defineProperty(t.prototype,"gap",{get:function(){return this.properties.gap},set:function(e){this.properties.gap=e,this.draw()},enumerable:!0,configurable:!0}),t}(Oo);P.registeredClasses.LinePattern=lg;var dg=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.properties.radius=2,e._circle=e.paper.add("circle"),e.addElement(e._circle),e.shapeRendering="auto",e}return t.prototype.draw=function(){i.prototype.draw.call(this),this._circle&&this._circle.attr({r:this.radius,cx:this.width/2,cy:this.height/2})},Object.defineProperty(t.prototype,"radius",{get:function(){return this.properties.radius},set:function(e){this.properties.radius=e,this.draw()},enumerable:!0,configurable:!0}),t}(Oo);P.registeredClasses.CirclePattern=dg;var ug=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.rectHeight=1,e.rectWidth=1,e._rect=e.paper.add("rect"),e.addElement(e._rect),e}return t.prototype.draw=function(){i.prototype.draw.call(this),this.properties.rotationX=this.width/2,this.properties.rotationY=this.height/2,this._rect&&this._rect.attr({width:this.rectWidth,height:this.rectHeight,x:(this.width-this.rectWidth)/2,y:(this.height-this.rectHeight)/2})},Object.defineProperty(t.prototype,"rectWidth",{get:function(){return this.properties.rectWidth},set:function(e){this.properties.rectWidth=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rectHeight",{get:function(){return this.properties.rectHeight},set:function(e){this.properties.rectHeight=e,this.draw()},enumerable:!0,configurable:!0}),t}(Oo);P.registeredClasses.RectPattern=ug;var p_=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="ColorizeFilter",e.feColorMatrix=e.paper.add("feColorMatrix"),e.feColorMatrix.attr({type:"matrix"}),e.filterPrimitives.push(e.feColorMatrix),e.intensity=1,e.applyTheme(),e}return t.prototype.applyFilter=function(){var e=this.intensity,r=1-e,o,n,s,a=this.color;a&&a.rgb?(o=a.rgb.r/255*e,n=a.rgb.g/255*e,s=a.rgb.b/255*e):(o=0,n=0,s=0),this.feColorMatrix.attr({values:r+" 0 0 0 "+o+" 0 "+r+" 0 0 "+n+" 0 0 "+r+" 0 "+s+" 0 0 0 1 0"})},Object.defineProperty(t.prototype,"color",{get:function(){return this.properties.color},set:function(e){this.properties.color=e,this.applyFilter()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"intensity",{get:function(){return this.properties.intensity},set:function(e){this.properties.intensity=e,this.applyFilter()},enumerable:!0,configurable:!0}),t}(Br);P.registeredClasses.ColorizeFilter=p_;var ic=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="DesaturateFilter",e.feColorMatrix=e.paper.add("feColorMatrix"),e.feColorMatrix.attr({type:"saturate"}),e.filterPrimitives.push(e.feColorMatrix),e.width=120,e.height=120,e.saturation=0,e.applyTheme(),e}return Object.defineProperty(t.prototype,"saturation",{get:function(){return this.properties.saturation},set:function(e){this.properties.saturation=e,this.feColorMatrix.attr({values:e.toString()})},enumerable:!0,configurable:!0}),t}(Br);P.registeredClasses.DesaturateFilter=ic;var g_=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="BlurFilter",e.feGaussianBlur=e.paper.add("feGaussianBlur"),e.feGaussianBlur.attr({result:"blurOut",in:"SourceGraphic"}),e.filterPrimitives.push(e.feGaussianBlur),e.width=200,e.height=200,e.blur=1.5,e.applyTheme(),e}return Object.defineProperty(t.prototype,"blur",{get:function(){return this.properties.blur},set:function(e){this.properties.blur=e,this.feGaussianBlur.attr({stdDeviation:e/this.scale})},enumerable:!0,configurable:!0}),t}(Br);P.registeredClasses.BlurFilter=g_;var Mv=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="FocusFilter",e.feFlood=e.paper.add("feFlood"),e.feFlood.attr({"flood-color":new Le().getFor("primaryButtonHover"),result:"base"}),e.filterPrimitives.push(e.feFlood),e.feMorphology=e.paper.add("feMorphology"),e.feMorphology.attr({result:"bigger",in:"SourceGraphic",operator:"dilate",radius:"2"}),e.filterPrimitives.push(e.feMorphology),e.feColorMatrix=e.paper.add("feColorMatrix"),e.feColorMatrix.attr({result:"mask",in:"bigger",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0"}),e.filterPrimitives.push(e.feColorMatrix),e.feComposite=e.paper.add("feComposite"),e.feComposite.attr({result:"drop",in:"base",in2:"mask",operator:"in"}),e.filterPrimitives.push(e.feComposite),e.feBlend=e.paper.add("feBlend"),e.feBlend.attr({in:"SourceGraphic",in2:"drop",mode:"normal"}),e.filterPrimitives.push(e.feBlend),e.width=130,e.height=130,e.applyTheme(),e}return Object.defineProperty(t.prototype,"stroke",{get:function(){return this.properties.stroke},set:function(e){this.properties.stroke=e,this.feFlood.attr({"flood-color":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return this.properties.strokeWidth},set:function(e){this.properties.strokeWidth=e,this.feMorphology.attr({radius:e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this.properties.opacity},set:function(e){this.properties.opacity=e,this.feColorMatrix.attr({values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 "+e+" 0"})},enumerable:!0,configurable:!0}),t.prototype.setSprite=function(e){this._sprite&&this._sprite!=e&&this._sprite.group.removeStyle("outline"),e.group.addStyle({outline:"none"}),i.prototype.setSprite.call(this,e)},t}(Br);var ad=function(i){A(t,i);function t(){var e=i.call(this)||this;return e._list=[],e._currentStep=0,e._startIndex=0,e._currentPass=0,e.baseColor=new Ue({r:103,g:183,b:220}),e.stepOptions={},e.passOptions={brighten:-.2},e.step=1,e.minColors=20,e.minLightness=.2,e.maxLightness=.9,e.shuffle=!1,e.wrap=!0,e.reuse=!1,e.saturation=1,e.className="ColorSet",e.applyTheme(),e}return Object.defineProperty(t.prototype,"list",{get:function(){return this._list||this.generate(this.minColors),this._list},set:function(e){this._list=e,this.reset()},enumerable:!0,configurable:!0}),t.prototype.getReusableColor=function(e){if(this._list.length==0)return this.generate(1),this.list[0];var r=e-Math.floor(e/this._list.length)*this.list.length;return this.list[r]},t.prototype.next=function(){var e;return this.list.length<=this._currentStep?this.reuse?e=this.getReusableColor(this._currentStep):(this.generate(ze(this.minColors,this._currentStep+1)),e=this.list[this._currentStep]):e=this.list[this._currentStep],this._currentStep+=this.step,e.saturate(this.saturation)},t.prototype.getIndex=function(e){var r;return this.list.length<=e?this.reuse?r=this.getReusableColor(e):(this.generate(this.minColors),r=this.getIndex(e)):r=this.list[e],r.saturate(this.saturation)},t.prototype.reset=function(){this._currentStep=this._startIndex},Object.defineProperty(t.prototype,"currentStep",{get:function(){return this._currentStep},set:function(e){this._currentStep=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startIndex",{get:function(){return this._startIndex},set:function(e){this._startIndex=e,this.reset()},enumerable:!0,configurable:!0}),t.prototype.generate=function(e){var r=this.currentColor,o=Mu(Ct(r.rgb)),n=T(this.stepOptions.hue)?this.stepOptions.hue:1/e,s={brighten:0,lighten:0,hue:o.h,lightness:o.l,saturation:o.s},a=[],l=this.list.length==0?0:1;if(this.reuse)for(var d=l;d<=e;d++)a.push(Mu(Ct(this._list[d].rgb)).h);else for(var d=l;d<=e;d++){var u=o.h+n*d;this.wrap&&u>1&&(u-=1),a.push(u)}this.shuffle&&a.sort(function(f,C){return Math.random()-.5});for(var d=0;d<e;d++){this.reuse?o=Mu(Ct(this._list[d].rgb)):o.h=a.shift(),this.applyStepOptions(o,s,d,this._currentPass);var c=fe(Um(o)),h=(this.stepOptions.brighten||0)*d+(this.passOptions.brighten||0)*this._currentPass;h!=0&&(this.wrap?h=kp(h,this.minLightness,this.maxLightness):h=Np(h,this.minLightness,this.maxLightness),c=c.brighten(h));var p=(this.stepOptions.lighten||0)*d+(this.passOptions.lighten||0)*this._currentPass;p!=0&&(this.wrap?p=kp(p,this.minLightness,this.maxLightness):p=Np(p,this.minLightness,this.maxLightness),c=c.lighten(p)),this._list.push(c)}this._currentPass++},Object.defineProperty(t.prototype,"currentColor",{get:function(){return this._list.length==0?this.baseColor.saturate(this.saturation):this._list[this._list.length-1].saturate(this.saturation)},enumerable:!0,configurable:!0}),t.prototype.applyStepOptions=function(e,r,o,n){e.l=r.lightness+(this.stepOptions.lightness||0)*o+(this.passOptions.lightness||0)*n,this.wrap?(e.l>1?e.l=e.l-Math.floor(e.l):e.l<0&&(e.l=-(e.l-Math.floor(e.l))),e.l=kp(e.l,this.minLightness,this.maxLightness)):(e.l>1?e.l=1:e.l<0&&(e.l=0),e.l=Np(e.l,this.minLightness,this.maxLightness))},t.prototype.processConfig=function(e){if(e){if(T(e.list)&&jt(e.list))for(var r=0,o=e.list.length;r<o;r++)e.list[r]instanceof Ue||(e.list[r]=fe(e.list[r]));T(e.baseColor)&&!(e.baseColor instanceof Ue)&&(e.baseColor=fe(e.baseColor))}i.prototype.processConfig.call(this,e)},t}(lt);P.registeredClasses.ColorSet=ad;var f_=function(i){A(t,i);function t(){var e=i.call(this)||this;e._list=[],e._currentStep=0,e._startIndex=0,e._currentPass=0,e.baseColor=new Ue({r:103,g:183,b:220}),e.className="PatternSet";var r=new Le;return e.list=[e.getLinePattern(1e3,45,1,6),e.getRectPattern(10,0,4),e.getLinePattern(1e3,-45,1,6),e.getCirclePattern(11,2,!0),e.getLinePattern(6,90,1),e.getRectPattern(12,45,6,!0),e.getLinePattern(6,0,1),e.getRectPattern(7,0,4),e.getLinePattern(1e3,45,2,3,"4,2"),e.getCirclePattern(9,3,!1),e.getLinePattern(1e3,-45,2,3,"4,2"),e.getRectPattern(10,45,Math.sqrt(50)),e.getLinePattern(1e3,-45,2,1),e.getRectPattern(10,0,9),e.getLinePattern(1e3,45,2,1),e.getLinePattern(1e3,0,3,1),e.getRectPattern(10,45,10),e.getLinePattern(1e3,90,3,1)],e.baseColor=r.getFor("stroke"),e.applyTheme(),e}return t.prototype.getLinePattern=function(e,r,o,n,s){var a=new lg;return a.width=e,a.height=e,a.stroke=this.baseColor,a.gap=n,a.strokeDasharray=s,a.strokeWidth=o,a.rotation=r,a},t.prototype.getRectPattern=function(e,r,o,n){var s=new ug;return s.width=e,s.height=e,s.rectWidth=o,s.rectHeight=o,n?(s.stroke=this.baseColor,s.strokeWidth=1,s.fillOpacity=0):(s.fill=this.baseColor,s.strokeWidth=0),r!=0&&(s.shapeRendering="auto"),s.rotation=r,s},t.prototype.getCirclePattern=function(e,r,o){var n=new dg;return n.width=e,n.height=e,n.shapeRendering="auto",n.radius=r,o?(n.stroke=this.baseColor,n.strokeWidth=1,n.fillOpacity=0):(n.fill=this.baseColor,n.strokeWidth=0),n},Object.defineProperty(t.prototype,"list",{get:function(){return this._list},set:function(e){this._list=e,this.reset()},enumerable:!0,configurable:!0}),t.prototype.next=function(){var e=this.getIndex(this.currentStep);return this._currentStep++,e},t.prototype.getIndex=function(e){for(var r;this.list.length<=e;)this.generatePatterns();return r=this.list[e],r.clone()},t.prototype.generatePatterns=function(){var e=this.list.length/(this._currentPass+1);this._currentPass++;for(var r=0;r<e;r++)this.list.push(this.list[r].clone())},t.prototype.reset=function(){this._currentStep=this._startIndex},Object.defineProperty(t.prototype,"currentStep",{get:function(){return this._currentStep},set:function(e){this._currentStep=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startIndex",{get:function(){return this._startIndex},set:function(e){this._startIndex=e,this.reset()},enumerable:!0,configurable:!0}),t.prototype.processConfig=function(e){i.prototype.processConfig.call(this,e)},t}(lt);P.registeredClasses.PatternSet=f_;var CM=function(){function i(){this._disposed=!1,this._disposers=[]}return i.prototype.init=function(){},i.prototype.isDisposed=function(){return this._disposed},i.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var t=this._disposers;for(this._disposers=null;t.length!==0;){var e=t.shift();e.dispose()}}},i}();var m_=function(i){A(t,i);function t(){var e=i.call(this)||this;e.className="AmChartsLogo",e.valign="bottom";var r=.3;e.opacity=.3,e.defaultState.properties.opacity=.4,e.url="https://www.amcharts.com/",e.urlTarget="_blank",e.showSystemTooltip=!0,e.readerTitle="Chart created using amCharts library",e.width=220*r,e.height=70*r,e.background.opacity=0;var o=fe("#474758");new Le().getFor("background").alternative.hex=="#ffffff"&&(o=fe("#ffffff"));var n=new Ki;n.addColor(o),n.addColor(o,1,.75),n.addColor(fe("#3cabff"),1,.755),n.rotation=-10;var s=n,a=e.createChild(Zu);a.shouldClone=!1,a.isMeasured=!1,a.segments=[[{x:50*r,y:50*r},{x:90*r,y:50*r},{x:120*r,y:20*r},{x:135*r,y:35*r},{x:150*r,y:20*r},{x:180*r,y:50*r},{x:200*r,y:50*r}]],a.strokeWidth=6*r,a.tensionX=.8,a.tensionY=1,a.stroke=fe("#3cabff");var l=e.createChild(Zu);l.shouldClone=!1,l.isMeasured=!1,l.segments=[[{x:20*r,y:50*r},{x:50*r,y:50*r},{x:90*r,y:12*r},{x:133*r,y:50*r},{x:170*r,y:50*r},{x:200*r,y:50*r}]],l.strokeWidth=6*r,l.tensionX=.75,l.tensionY=1,l.stroke=s,e._disposers.push(l);var d=new ic;e.filters.push(d);var u=new ic;u.saturation=1;var c=e.states.create("hover");return c.properties.opacity=1,c.filters.push(u),e.applyTheme(),e}return t}(_e);function bM(i,t){var e=Hu(i),r=!1;if(e||(e=document.createElement("div"),e.style.width="200px",e.style.height="200px",e.style.top="0",e.style.left="0",e.style.visibility="hidden",e.style.position="absolute",document.body.appendChild(e),r=!0),e){e.innerHTML="";var o=new qu(e),n=new Zp(o.SVGContainer,"svg-"+(Qp.length-1)),s=new _e;s.htmlContainer=e,s.svgContainer=o,s.width=ae(100),s.height=ae(100),s.background.fillOpacity=0,s.paper=n,n.append(s.group),r&&lv(function(){s.moveHtmlContainer(i)}),s.relativeWidth=1,s.relativeHeight=1,o.container=s;var a=s.createChild(t);a.topParent=s;var l=a.uid;P.invalidSprites[l]=[],P.invalidDatas[l]=[],P.invalidPositions[l]=[],P.invalidLayouts[l]=[],s.baseId=l,a.isBaseSprite=!0,a.focusFilter=new Mv,P.baseSprites.push(a),P.baseSpritesByUid[l]=a,a.maskRectangle={x:0,y:0,width:Math.max(o.width||0,0),height:Math.max(o.height||0,0)},s.events.on("maxsizechanged",function(R){(R.previousWidth==0||R.previousHeight==0)&&s.deepInvalidate(),a.maskRectangle&&(a.maskRectangle={x:0,y:0,width:Math.max(o.width||0,0),height:Math.max(o.height||0,0)})});var d=null,u=function(){a.isDisposed()?d=null:qp(a.dom)==null?(we.autoDispose?(s.htmlContainer=void 0,o.htmlElement=void 0,a.dispose()):Zl("Chart was not disposed",a.uid),d=null):d=window.setTimeout(u,1e3)};u(),a.addDisposer(new Ke(function(){d!==null&&clearTimeout(d),ve(P.baseSprites,a),P.baseSpritesByUid[a.uid]=void 0})),a.addDisposer(s);var c=s.createChild(_e);c.topParent=s,c.width=ae(100),c.height=ae(100),c.isMeasured=!1,s.tooltipContainer=c,a.tooltip=new nd,a.tooltip.hide(0),a.tooltip.setBounds({x:0,y:0,width:c.maxWidth,height:c.maxHeight}),c.events.on("maxsizechanged",function(){Ct(a.tooltip).setBounds({x:0,y:0,width:c.maxWidth,height:c.maxHeight})},void 0,!1);var h=new ig;if(h.events.on("inited",function(){h.__disabled=!0},void 0,!1),s.preloader=h,a instanceof _e&&!a.hasLicense()){var p=c.createChild(m_);c.events.on("maxsizechanged",function(R){c.maxWidth<=100||c.maxHeight<=50?p.hide():(p.isHidden||p.isHiding)&&p.show()},void 0,!1),a.logo=p,p.align="left",p.valign="bottom"}if(a.numberFormatter,s.isStandaloneInstance=!0,we.onlyShowOnViewport)if(Kp(e,we.viewportTarget))we.queue&&Iv(a);else{a.__disabled=!0,a.tooltipContainer.__disabled=!0;var f=[dt(window,"DOMContentLoaded",function(){Da(a)}),dt(window,"load",function(){Da(a)}),dt(window,"resize",function(){Da(a)}),dt(window,"scroll",function(){Da(a)})];if(we.viewportTarget)for(var C=jt(we.viewportTarget)?we.viewportTarget:we.viewportTarget?[we.viewportTarget]:[],b=0;b<C.length;b++){var x=C[b];f.push(dt(x,"resize",function(){Da(a)})),f.push(dt(x,"scroll",function(){Da(a)}))}var S=new tt(f);a.addDisposer(S),a.vpDisposer=S}else we.queue&&Iv(a);return a}else throw Ee.log("html container not found"),new Error("html container not found")}function Iv(i){P.queue.indexOf(i)==-1&&(i.__disabled=!0,i.tooltipContainer.__disabled=!0,i.events.disableType("appeared"),P.queue.length==0&&(P.events.once("exitframe",function(){v_(i)}),Ee.requestFrame()),i.addDisposer(new Ke(function(){cg(i)})),P.queue.push(i))}function cg(i){var t=P.queue.indexOf(i);if(t>=0){P.queue.splice(P.queue.indexOf(i),1);var e=P.queue[t];e&&v_(e)}}function Da(i){i.__disabled&&Kp(i.htmlContainer,we.viewportTarget)&&(i.vpDisposer&&i.vpDisposer.dispose(),Iv(i))}function v_(i){i&&i.tooltipContainer&&(i.__disabled=!1,i.tooltipContainer.__disabled=!1,i.events.enableType("appeared"),i.dispatch("removedfromqueue"),i.showOnInit&&i.events.on("appeared",function(){cg(i)}),i.vpDisposer&&i.vpDisposer.dispose(),i instanceof _e&&i.invalidateLabels(),i.tooltipContainer&&i.tooltipContainer.invalidateLayout(),i instanceof En?(i.invalidateData(),i.reinit(),i.events.once("datavalidated",function(){i.showOnInit?i.appear():cg(i)})):(i.reinit(),i.events.once("inited",function(){cg(i)}),i.showOnInit&&i.appear()))}function Fv(i,t){var e;je(t)&&(T(P.registeredClasses[t])?t=P.registeredClasses[t]:(t=P.registeredClasses.Container,e=new Error("Class ["+t+"] is not loaded.")));var r=bM(i,t);return e&&r.raiseCriticalError(e),r}function rc(i){P.themes.indexOf(i)===-1&&P.themes.push(i)}var wM=function(i){Si(i,"SpriteState")&&(i.transitionDuration=400),Si(i,"Component")&&(i.rangeChangeDuration=500,i.interpolationDuration=500,i.sequencedInterpolation=!1,Si(i,"SankeyDiagram")&&(i.sequencedInterpolation=!0),Si(i,"FunnelSeries")&&(i.sequencedInterpolation=!0)),Si(i,"Chart")&&(i.defaultState.transitionDuration=2e3,i.hiddenState.transitionDuration=1e3),Si(i,"Tooltip")&&(i.animationDuration=400,i.defaultState.transitionDuration=400,i.hiddenState.transitionDuration=400),Si(i,"Scrollbar")&&(i.animationDuration=500),Si(i,"Series")&&(i.defaultState.transitionDuration=1e3,i.hiddenState.transitionDuration=700,i.hiddenState.properties.opacity=1,i.showOnInit=!0),Si(i,"MapSeries")&&(i.hiddenState.properties.opacity=0),Si(i,"PercentSeries")&&(i.hiddenState.properties.opacity=0),Si(i,"FunnelSlice")&&(i.defaultState.transitionDuration=800,i.hiddenState.transitionDuration=1e3,i.hiddenState.properties.opacity=1),Si(i,"Slice")&&(i.defaultState.transitionDuration=700,i.hiddenState.transitionDuration=1e3,i.hiddenState.properties.opacity=1),Si(i,"Preloader")&&(i.hiddenState.transitionDuration=2e3),Si(i,"Column")&&(i.defaultState.transitionDuration=700,i.hiddenState.transitionDuration=1e3,i.hiddenState.properties.opacity=1),Si(i,"Column3D")&&(i.hiddenState.properties.opacity=0)},oc=wM;var C_=[{headerName:"--",width:90,cellStyle:{color:"blue"},field:"editMode",pinned:"left",enableCellChangeFlash:!0,valueGetter:i=>i&&i.node?"Editar":""},{headerName:"Inicia",width:115,field:"time",valueGetter:i=>i&&i.node&&i.node.data.time?Yt(Li(i.node.data.time.seconds),"HH:mm a",{locale:Qt}):""},{headerName:"Empresa",width:170,field:"customerName",enableCellChangeFlash:!0},{headerName:"Operaci\xF3n",width:130,field:"routeName",enableCellChangeFlash:!0},{headerName:"Programa / Turno",width:175,field:"round",valueGetter:i=>i&&i.node?i.node.data.round+" / "+i.node.data.program:""},{headerName:"PR",width:210,field:"driver",enableCellChangeFlash:!0},{headerName:"Veh\xEDculo",width:120,field:"vehicleName",enableCellChangeFlash:!0},{headerName:"Inici\xF3",width:115,field:"startedAt",valueGetter:i=>i&&i.node&&i.node.data.startAt?i.node.data.started?Yt(Li(i.node.data.startedAt.seconds),"HH:mm a",{locale:Qt}):"No":""},{headerName:"Finaliz\xF3",width:115,field:"endedAt",valueGetter:i=>i&&i.node?i.node.data.hasEnded?Yt(Li(i.node.data.endedAt.seconds),"HH:mm a",{locale:Qt}):"No":""}],b_=[{headerName:"PR",field:"driver",sortable:!0,enableCellChangeFlash:!0},{headerName:"Veh\xEDculo",field:"vehicleName",sortable:!0,enableCellChangeFlash:!0},{headerName:"Empresa",field:"customerName",sortable:!0,enableRowGroup:!0},{headerName:"Fecha Inicio",field:"startAt",valueGetter:i=>i&&i.node&&i.node.data.startAt?Yt(Li(i.node.data.startAt.seconds),"MM/dd/yyyy HH:mm",{locale:Qt}):""},{headerName:"Fecha Fin",field:"endAt",valueGetter:i=>i&&i.node&&i.node.data.endAt?Yt(Li(i.node.data.endAt.seconds),"MM/dd/yyyy HH:mm",{locale:Qt}):""},{headerName:"\xBFInici\xF3?",field:"started",enableRowGroup:!0,enableCellChangeFlash:!0,cellRenderer:i=>i&&i.value?i.value?"Si":"No":""},{headerName:"Inici\xF3 el",field:"startedAt",enableCellChangeFlash:!0,valueGetter:i=>i&&i.node&&i.node.data.startedAt?Yt(Li(i.node.data.startedAt.seconds),"MM/dd/yyyy HH:mm",{locale:Qt}):""},{headerName:"\xBFFinaliz\xF3?",field:"hasEnded",enableCellChangeFlash:!0,enableRowGroup:!0,cellRenderer:i=>i&&i.value?i.value?"Si":"No":""},{headerName:"Finaliz\xF3 el",field:"endedAt",enableCellChangeFlash:!0,valueGetter:i=>i&&i.node&&i.node.data.endedAt?Yt(Li(i.node.data.endedAt.seconds),"MM/dd/yyyy HH:mm",{locale:Qt}):""},{headerName:"Problemas?",field:"isWithTrouble",enableCellChangeFlash:!0,enableRowGroup:!0,cellRenderer:i=>i&&i.value?i.value?"Si":"No":""},{headerName:"Problema",field:"troubleMessage",sortable:!0,enableValue:!0,enableCellChangeFlash:!0},{headerName:"Tipo de problema",field:"troubleType",sortable:!0,enableValue:!0,enableCellChangeFlash:!0},{headerName:"Programa",field:"program",sortable:!0,enableValue:!0,enableCellChangeFlash:!0},{headerName:"Turno",field:"round",sortable:!0,enableRowGroup:!0,enableCellChangeFlash:!0},{headerName:"Operaci\xF3n",field:"routeName",sortable:!0,enableRowGroup:!0,enableCellChangeFlash:!0},{headerName:"Tipo",field:"type",enableRowGroup:!0,enableCellChangeFlash:!0},{headerName:"Capacidad",field:"capacity",enableRowGroup:!0},{headerName:"Usuarios",field:"count",enableRowGroup:!0,enableCellChangeFlash:!0}];var hg=(()=>{class i{constructor(e){this.afs=e}getAssignment(e,r){return this.afs.collection("vendors").doc(e).collection("assignments").doc(r).snapshotChanges()}getAssignments(e){return this.afs.collection("vendors").doc(e).collection("assignments").snapshotChanges()}getActiveAssignments(e){return this.afs.collection("vendors").doc(e).collection("assignments",o=>o.where("active","==",!0)).snapshotChanges()}getActiveAssignmentsRoute(e){return this.afs.collectionGroup("assignments",o=>o.where("routeId","==",e).where("active","==",!0)).snapshotChanges()}createAssigment(e,r){return this.afs.collection("vendors").doc(e).collection("assignments").add(r)}updateAssignment(e,r,o){return this.afs.collection("vendors").doc(e).collection("assignments").doc(r).update(o)}deleteAssignment(e,r,o){return this.afs.collection("vendors").doc(e).collection("assignments").doc(r).delete()}batchCreateAssignment(e){let r=this.afs.firestore.batch();return e.forEach(o=>{r.set(o,{merge:!0})}),r.commit()}static{this.\u0275fac=function(r){return new(r||i)(Or(ur))}}static{this.\u0275prov=$r({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var _M=["map"],xM=()=>({padding:"0px"});function EM(i,t){if(i&1){let e=re();v(0,"button",29),q("click",function(){H(e);let o=O();return B(o.getAssignments())}),D(1),Lr(2,"date"),y()}if(i&2){let e=O();_(),Et(" ( Ver ",Rn(2,1,e.date,"mediumDate")," ) ")}}function DM(i,t){if(i&1){let e=re();v(0,"tr")(1,"td"),D(2),y(),v(3,"td"),D(4),y(),v(5,"td"),D(6),y(),v(7,"td"),D(8),y(),v(9,"td"),D(10),y(),v(11,"td"),D(12),y(),v(13,"td"),D(14),y(),v(15,"td"),D(16),y(),v(17,"td")(18,"a",30),q("click",function(){let o=H(e).$implicit,n=O();return B(n.showModalIn(o))}),D(19,"Editar"),y(),D(20,"/ "),v(21,"a",31),q("nzOnConfirm",function(){let o=H(e).$implicit,n=O();return B(n.okDeleteAssign(o))})("nzOnCancel",function(){H(e);let o=O();return B(o.handleCancelDel())}),D(22,"Borrar "),y()()()}if(i&2){let e=t.$implicit,r=O();_(2),J(r.formatTime(e.time)),_(2),J(e.customerName),_(2),J(e.routeName),_(2),gd("",e.program," // ",e.round," "),_(2),J(e.driver),_(2),J(e.vehicleName),_(2),J(r.formatStartedAt(e.startedAt)),_(2),J(r.formatEndedAt(e.endedAt))}}function TM(i,t){if(i&1){let e=re();v(0,"li",44),q("click",function(){let o=H(e).$implicit,n=O(2);return B(n.onSelect(o))}),D(1),y()}if(i&2){let e=t.$implicit;_(),J(e.customerName)}}function PM(i,t){if(i&1){let e=re();v(0,"li",44),q("click",function(){let o=H(e).$implicit,n=O(2);return B(n.onSelectRoute(o))}),D(1),y()}if(i&2){let e=t.$implicit;_(),J(e.routeName)}}function RM(i,t){if(i&1){let e=re();v(0,"tr")(1,"td",45),q("nzCheckedChange",function(o){let n=H(e).$implicit,s=O(2);return B(s.onItemChecked(n,o))}),y(),v(2,"td"),D(3),y(),v(4,"td"),D(5),y(),v(6,"td"),D(7),y(),v(8,"td"),D(9),y(),v(10,"td"),D(11),y(),v(12,"td"),D(13),y(),v(14,"td"),D(15),y()()}if(i&2){let e=t.$implicit,r=O(2);_(),E("nzChecked",r.setOfCheckedId.has(e.id)),_(2),J(e.customerName),_(2),J(e.routeName),_(2),J(e.driverName),_(2),J(e.vehicleName),_(2),J(r.formatStartedAt(e.time)),_(2),gd("",e.program," // ",e.round," "),_(2),J(e.type)}}function MM(i,t){if(i&1){let e=re();v(0,"div")(1,"div",32)(2,"div",33),D(3),y(),v(4,"div",34)(5,"a",35),D(6," Empresa "),N(7,"i",36),y(),v(8,"a",35),D(9," Operaci\xF3n "),N(10,"i",36),y(),v(11,"nz-dropdown-menu",null,6)(13,"ul",37),$(14,TM,2,1,"li",38),y()(),v(15,"nz-dropdown-menu",null,7)(17,"ul",37),$(18,PM,2,1,"li",38),y()()(),v(19,"div",39),D(20),y(),v(21,"div",39)(22,"button",40),q("click",function(){H(e);let o=O();return B(o.handleSearch())}),N(23,"i",41),D(24," Buscar"),y()()(),v(25,"div"),D(26),y(),v(27,"div"),D(28),y(),v(29,"div")(30,"nz-table",42,1),q("nzCurrentPageDataChange",function(o){H(e);let n=O();return B(n.onCurrentPageDataChange(o))}),v(32,"thead")(33,"tr")(34,"th",43),ht("nzCheckedChange",function(o){H(e);let n=O();return ct(n.checked,o)||(n.checked=o),B(o)}),q("nzCheckedChange",function(o){H(e);let n=O();return B(n.onAllChecked(o))}),y(),v(35,"th"),D(36,"Empresa"),y(),v(37,"th"),D(38,"Operaci\xF3n"),y(),v(39,"th"),D(40,"PR"),y(),v(41,"th"),D(42,"Veh\xEDculo"),y(),v(43,"th"),D(44,"Inici\xF3"),y(),v(45,"th"),D(46,"Programa / Turno"),y(),v(47,"th"),D(48,"Tipo"),y()()(),v(49,"tbody"),$(50,RM,16,9,"tr",26),y()()()()}if(i&2){let e=ue(12),r=ue(16),o=ue(31),n=O();_(3),Et(" Asignaciones pendientes ",n.numAssing," "),_(2),E("nzDropdownMenu",e),_(3),E("nzDropdownMenu",r),_(6),E("ngForOf",n.filterCustomer),_(4),E("ngForOf",n.filterRoute),_(2),Et(" Operaci\xF3n: ",n.routePath," "),_(6),Et(" Registros seleccionados ",n.regSelected," "),_(2),Et(" ",n.regFound," "),_(2),E("nzData",n.rowDataAsignModal),_(4),E("nzSelections",n.listOfSelection),ut("nzChecked",n.checked),E("nzIndeterminate",n.indeterminate),_(16),E("ngForOf",o.data)}}function IM(i,t){if(i&1){let e=re();v(0,"button",40),q("click",function(){H(e);let o=O();return B(o.handleOk())}),D(1,"Programar"),y(),v(2,"button",40),q("click",function(){H(e);let o=O();return B(o.handleCancel())}),D(3,"Cancelar"),y()}}function FM(i,t){if(i&1){let e=re();v(0,"li",44),q("click",function(){let o=H(e).$implicit,n=O(2);return B(n.driverSet(o))}),D(1),y()}if(i&2){let e=t.$implicit;_(),J(e.displayName)}}function zM(i,t){if(i&1){let e=re();v(0,"li",44),q("click",function(){let o=H(e).$implicit,n=O(2);return B(n.vehicleSet(o))}),D(1),y()}if(i&2){let e=t.$implicit;_(),J(e.name)}}function AM(i,t){if(i&1&&(v(0,"div")(1,"form",46)(2,"nz-form-item")(3,"nz-form-label",47),D(4,"Empresa"),y(),v(5,"nz-form-control",48),N(6,"input",49),y()(),v(7,"nz-form-item")(8,"nz-form-label",50),D(9,"Operaci\xF3n"),y(),v(10,"nz-form-control",48),N(11,"input",51),y()(),v(12,"nz-form-item")(13,"nz-form-label",52),D(14,"PR"),y(),v(15,"nz-form-control",48)(16,"button",53),D(17," - Seleccionar - "),N(18,"i",36),y(),v(19,"nz-dropdown-menu",null,8)(21,"ul",37),$(22,FM,2,1,"li",38),y()(),N(23,"input",54),y()(),v(24,"nz-form-item")(25,"nz-form-label",55),D(26,"Veh\xEDculo"),y(),v(27,"nz-form-control",48)(28,"button",53),D(29," - Seleccionar - "),N(30,"i",36),y(),v(31,"nz-dropdown-menu",null,9)(33,"ul",37),$(34,zM,2,1,"li",38),y()(),N(35,"input",56),y()()()()),i&2){let e=ue(20),r=ue(32),o=O();_(),E("formGroup",o.signupForm),_(2),E("nzSm",8)("nzXs",24),_(2),E("nzSm",16)("nzXs",24),_(3),E("nzSm",8)("nzXs",24),_(2),E("nzSm",16)("nzXs",24),_(3),E("nzSm",8)("nzXs",24),_(2),E("nzSm",16)("nzXs",24),_(),E("nzDropdownMenu",e),_(6),E("ngForOf",o.arrDriversEdit),_(3),E("nzSm",8)("nzXs",24),_(2),E("nzSm",16)("nzXs",24),_(),E("nzDropdownMenu",r),_(6),E("ngForOf",o.arrVehicleEdit)}}function OM(i,t){if(i&1){let e=re();v(0,"button",40),q("click",function(){H(e);let o=O();return B(o.handleOKEdit())}),D(1,"Aceptar"),y(),v(2,"button",40),q("click",function(){H(e);let o=O();return B(o.handleCancelEdit())}),D(3,"Cancelar"),y()}}rc(oc);var B9=(()=>{class i{constructor(e,r,o,n){this.zone=e,this.fb=r,this.messageService=o,this.nzMessageService=n,this.liveService=ie(Xc),this.driversService=ie(nn),this.assignmentsService=ie(hg),this.vehicleService=ie(Ll),this.authService=ie(bt),this.usersService=ie(Jn),this.date=mo(),this.mode="month",this.columnDefs=C_,this.rowSelection="multiple",this.visible=!1,this.lat=37.75,this.lng=-122.41,this.loading=!1,this.columnFleetDefs=b_,this.stopSubscription$=new it,this.numAssing="(0)",this.numAssingPro="(0)",this.regSelected="(0)",this.isSpinning=!0,this.isAssignmentsModalVisible=!1,this.isEditModalVisible=!1,this.stopSubscriptions$=new it,this.arrDrivers=[],this.arrDriversEdit=[],this.arrVehicle=[],this.arrVehicleEdit=[],this.pageIndex=1,this.pageSize=50,this.total=1,this.sortValue=null,this.sortKey=null,this.searchGenderList=[],this.filterCustomer=[],this.filterRoute=[],this.customerPath="",this.routePath="",this.routeNameSelected="",this.routeSelectedRecord=[],this.filterCustomerRoute=[],this.rowSelectionEdit="single",this.vehicleEditInput="",this.driverEditInput="",this.logisticsService=ie(Yc),this.programService=ie(Zc),this.routesService=ie(Kr),this.infoSegment=[],this.accountsService=ie(gr),this.size="large",this.checked=!1,this.indeterminate=!1,this.listOfCurrentPageData=[],this.setOfCheckedId=new Set,this.listOfSelection=[{text:"Selecciona todos los Registros",onSelect:()=>{this.onAllChecked(!0)}}],this.authService.user.subscribe(s=>{s&&(this.user=s,this.vendorID=s.vendorId||"",this.user!==null&&this.user!==void 0&&this.user.idSegment!==void 0&&this.accountsService.getSegmentLevel(this.user.idSegment).pipe(xe(this.stopSubscription$),ce(a=>{let l=a.payload.id,d=a.payload.data();return me({id:l},d)}),ft(a=>(this.infoSegment=a,a))).subscribe())}),this.markers=[],this.startDate=mo(),this.endDate=Mn()}panelChange(e){}showModalIn(e){let r=e;this.isEditModalVisible=!0,this.signupForm.controls.customerId.setValue(e.customerId),this.signupForm.controls.customerName.setValue(e.customerName),this.signupForm.controls.id.setValue(e.id),this.signupForm.controls.driver.setValue(e.driver),this.signupForm.controls.driverId.setValue(e.driverId),this.signupForm.controls.vehicleId.setValue(e.vehicleId),this.signupForm.controls.vehicleName.setValue(e.vehicleName),this.getInfoAssigments(),this.isEditModalVisible=!0}onValueChange(e){this.date!=Rg(new Date(e))&&(this.rowDataAsignModal=[],this.numAssing="(0)"),this.date=Rg(new Date(e)),this.searchData(!0)}onSelectDrivers(e){this.vehiclesSubscription=this.vehicleService.getVendorVehicles(e).pipe(xe(this.stopSubscription$),ce(r=>r.map(o=>{let n=o.payload.doc.id,s=o.payload.doc.data();return me({id:n},s)}))).subscribe(r=>{for(var o=0;o<r.length;o++)this.arrVehicle.indexOf(r[o].name)===-1&&r[o].name!=null&&r[o].name!=""&&(this.arrVehicle.push(r[o].name),this.arrVehicleEdit.push({name:r[o].name,id:r[o].id}))}),this.driversSubscription=this.driversService.getDriversByCustomergetDrivers(e).pipe(xe(this.stopSubscription$),ce(r=>r.map(o=>{let n=o.payload.doc.id,s=o.payload.doc.data();return me({id:n},s)}))).subscribe(r=>{for(var o=0;o<r.length;o++)this.arrDrivers.indexOf(r[o].displayName)===-1&&r[o].displayName!=null&&r[o].displayName!=""&&(this.arrDrivers.push(r[o].displayName),this.arrDriversEdit.push({displayName:r[o].displayName,id:r[o].id}))})}getMonthData(e){return e.getMonth()===8?1394:null}ngOnInit(){this.infoSegment.nivelNum!==void 0&&this.infoSegment.nivelNum==1?(this.markers=this.logisticsService.getMarkersByCustomer(this.startDate,this.endDate,this.user.customerId),setTimeout(()=>{this.searchData(),this.isSpinning=!1},500),this.createForm()):(this.markers=this.logisticsService.getMarkers(this.startDate,this.endDate),setTimeout(()=>{this.searchData(),this.isSpinning=!1},500),this.createForm())}getSubscriptions(e){this.infoSegment.nivelNum!==void 0&&this.infoSegment.nivelNum==1?this.vendorRoutesSubscription=this.usersService.getBoardingPassesByRoutebyCustomerId(e,this.user.customerId).pipe(xe(this.stopSubscriptions$)).subscribe(r=>{var o=[];this.filterCustomerRoute=[];for(var n=0;n<r.length;n++)this.filterCustomerRoute.push({customerId:r[n].customerId,customerName:r[n].customerName,routeId:r[n].passes[0].routeId,routeName:r[n].passes[0].routeName,type:r[n].passes[0].operation_type,round:r[n].passes[0].round,status:r[n].passes[0].status,program:r[n].passes[0].category});this.filterCustomerRoute.forEach(s=>{var a=o.find(l=>l.customerName==s.customerName);a==null&&o.push({customerId:s.customerId,customerName:s.customerName})}),this.filterCustomer=o}):this.vendorRoutesSubscription=this.usersService.getBoardingPassesByRoute().pipe(xe(this.stopSubscriptions$)).subscribe(r=>{var o=[];this.filterCustomerRoute=[];for(var n=0;n<r.length;n++)this.filterCustomerRoute.push({customerId:r[n].customerId,customerName:r[n].customerName,routeId:r[n].passes[0].routeId,routeName:r[n].passes[0].routeName,type:r[n].passes[0].operation_type,round:r[n].passes[0].round,status:r[n].passes[0].status,program:r[n].passes[0].category});this.filterCustomerRoute.forEach(s=>{var a=o.find(l=>l.customerName==s.customerName);a==null&&o.push({customerId:s.customerId,customerName:s.customerName})}),this.filterCustomer=o})}open(){this.visible=!0}close(){this.visible=!1}onPanelChange(){}sort(e){this.sortKey=e.key,this.sortValue=e.value,this.searchData()}searchData(e=!1){e&&(this.pageIndex=1),this.loading=!0,this.infoSegment.nivelNum!==void 0&&this.infoSegment.nivelNum==1?this.programService.getProgramsByDaybyCustomer(this.date,this.user.customerId).pipe(Bo(1),ce(r=>r.map(o=>{let n=o.payload.doc.id,s=o.payload.doc.data();return me({id:n},s)})),ft(r=>{this.loading=!1,this.total=r.length,this.rowData=r,this.numAssingPro=" ( "+r.length+" ) ",this.rowDataAsignPostProg=r})).subscribe():this.programService.getProgramsByDay(this.date).pipe(Bo(1),ce(r=>r.map(o=>{let n=o.payload.doc.id,s=o.payload.doc.data();return me({id:n},s)})),ft(r=>{this.loading=!1,this.total=r.length,this.rowData=r,this.numAssingPro=" ( "+r.length+" ) ",this.rowDataAsignPostProg=r})).subscribe()}updateFilter(e){this.searchGenderList=e,this.searchData(!0)}ngOnDestroy(){this.stopSubscription$.next(!1),this.stopSubscription$.complete()}getInfoAssigments(){this.user&&(this.getSubscriptions(this.user.vendorId),this.user.vendorId&&this.onSelectDrivers(this.user.vendorId))}getAssignments(){this.getInfoAssigments(),this.isAssignmentsModalVisible=!0}deleteAssignment(e,r){this.routesService.deleteCustomerVendorAssignment(e,r)}cancelDeleteAssignment(){}handleCancel(){this.isAssignmentsModalVisible=!1,this.stopSubscriptions$.next(!1),this.stopSubscriptions$.complete(),this.regSelected="(0)",this.regFound="",this.rowDataAsignModal=[],this.rowDataAsignPostProg=[],this.routePath="",this.customerPath="",this.routeNameSelected="",this.searchData(!0)}handleOk(){var e=this.setOfCheckedId;this.rowDataAsignPostProg=[];var r=e.size;e.forEach(o=>{let n=o;n.vendorId=o.vendorId,n.customerId=o.customerId,n.assignmentId=o.assignmentId,n.routeId=o.routeId,n.customerName=o.customerName,n.routeName=o.routeName,this.programService.setProgram(n)}),this.searchData(!0),r=r-e.size,this.regSelected="(0)",this.rowDataAsignModal=[],this.rowDataAsignPostProg=[],this.regFound="",this.setOfCheckedId.clear(),this.routePath="",this.customerPath="",this.routeNameSelected="",this.isAssignmentsModalVisible=!1,this.nzMessageService.success("Se Programo con \xE9xito, favor de actualizar la tabla.")}formatDate(e){return Yt(Li(e.seconds),"HH:mm",{locale:Qt})}onSelect(e){this.customerPath=e.customerName,this.routePath=this.customerPath;var r=[];this.filterCustomerRoute.forEach(o=>{if(o.customerId===e.customerId){var n=r.find(a=>a.routeId===o.routeId&&a.customerId===o.customerId);if(!n){var s=o.routeName;o.routeName==""?this.routesService.getRouteByCustomerUnique(o.customerId,o.routeId).pipe(Bo(1),ce(a=>{let l=a.payload.id,d=a.payload.data();return dr(me({},d),{id:l})})).subscribe(a=>{s=a.description,r.push({routeId:o.routeId,routeName:s,customerId:o.customerId})}):r.push({routeId:o.routeId,routeName:s,customerId:o.customerId})}}}),this.filterRoute=r}onSelectRoute(e){this.routePath=this.customerPath+" / "+e.routeName,this.routeNameSelected!=e.routeName&&(this.rowDataAsignModal=[]),this.routeNameSelected=e.routeName,this.assignmentSubscription=this.assignmentsService.getActiveAssignmentsRoute(e.routeId).pipe(xe(this.stopSubscription$),ce(r=>r.map(o=>{let n=o.payload.doc.id,s=o.payload.doc.data();return me({id:n},s)}))).subscribe(r=>{this.routeSelectedRecord=r})}handleSearch(){if(this.routeSelectedRecord.length>0){this.rowDataAsignModal=[];let e=[];this.regFound="";let r=0;this.routeSelectedRecord.forEach(o=>{o.id.length>0&&(this.vehicleAssignmentSubscription=this.routesService.getRouteVehicleAssignments(o.customerId,o.routeId,o.id,o.vendorId).pipe(xe(this.stopSubscription$),ce(n=>n.map(s=>{let a=s.payload.doc.id,l=s.payload.doc.data();return me({id:a},l)}))).subscribe(n=>{r++,n.forEach(s=>{if(o.active){var a=this.rowDataAsignPostProg.find(l=>l.customerId==o.customerId&&l.routeName==this.routeNameSelected&&l.driver==s.driverName&&l.vehicleName==s.vehicleName&&l.type==o.type);a==null&&this.rowDataAsignModal.indexOf(s.assignmentId)===-1&&e.push({assignmentId:s.assignmentId,program:o.program,customerId:o.customerId,customerName:this.customerPath,routeId:o.routeId,routeName:this.routeNameSelected,vendorId:o.vendorId,round:o.round,date:this.date,vehicleCapacity:s.vehicleCapacity,vehicleId:s.vehicleId,vehicleName:s.vehicleName,id:s.id,beginhour:o.beginhour,time:o.time,stopEndName:o.stopEndName,type:o.type,vendorName:o.vendorName,vendorid:this.vendorID,driverId:s.driverId,driverName:s.driverName})}}),r===this.routeSelectedRecord.length&&(this.rowDataAsignModal=e),this.rowDataAsignModal!=null&&(this.rowDataAsignModal.length==0&&(this.regFound="No se encontraron operaciones para programar."),this.numAssing=" ("+this.rowDataAsignModal.length+") ")}))})}}handleOKEdit(){let e=this.signupForm;this.programService.editProgram(this.vendorID,e),this.isEditModalVisible=!1}handleCancelEdit(){this.isEditModalVisible=!1}createForm(){this.signupForm=this.fb.group({id:[""],customerName:new Pg({value:"",disabled:!0}),routeName:new Pg({value:"",disabled:!0}),driver:[""],vehicleName:[""],vehicleId:[""],routeId:[""],driverId:[""],customerId:[""],idProgram:[""]})}vehicleSet(e){this.signupForm.controls.vehicleName.setValue(e.name),this.signupForm.controls.vehicleId.setValue(e.id)}driverSet(e){this.signupForm.controls.driver.setValue(e.displayName),this.signupForm.controls.driverId.setValue(e.id)}refreshTable(){this.searchData(!0)}formatStartedAt(e){return e?Yt(Li(e.seconds),"HH:mm a",{locale:Qt}):"No"}formatEndedAt(e){return e&&e.hasEnded?Yt(Li(e.seconds),"HH:mm a",{locale:Qt}):"No"}formatTime(e){return e?Yt(Li(e.seconds),"HH:mm a",{locale:Qt}):""}updateCheckedSet(e,r){r?this.setOfCheckedId.add(e):this.setOfCheckedId.delete(e)}onItemChecked(e,r){this.updateCheckedSet(e,r),this.refreshCheckedStatus()}onAllChecked(e){this.listOfCurrentPageData.forEach(r=>this.updateCheckedSet(r.id,e)),this.refreshCheckedStatus()}onCurrentPageDataChange(e){this.listOfCurrentPageData=e,this.refreshCheckedStatus()}refreshCheckedStatus(){this.checked=this.listOfCurrentPageData.every(e=>this.setOfCheckedId.has(e.id)),this.indeterminate=this.listOfCurrentPageData.some(e=>this.setOfCheckedId.has(e.id))&&!this.checked}okDeleteAssign(e){this.programService.deleteProgram(e.id,e.customerId),this.searchData(!0)}handleCancelDel(){}sendMessage(e,r){this.messageService.create(e,r)}static{this.\u0275fac=function(r){return new(r||i)(ee(_i),ee(hi),ee(Mt),ee(Mt))}}static{this.\u0275cmp=ke({type:i,selectors:[["app-program"]],viewQuery:function(r,o){if(r&1&&Tc(_M,7),r&2){let n;hd(n=pd())&&(o.mapElement=n.first)}},decls:61,vars:31,consts:[["extraTemplate",""],["basicTable",""],["modalContent",""],["modalFooter",""],["modalContent2",""],["modalFooterEdit",""],["menuClient","nzDropdownMenu"],["menuRoute","nzDropdownMenu"],["menuDriverEdit","nzDropdownMenu"],["menuVehicleEdit","nzDropdownMenu"],[2,"margin","buttom 15px","margin-right","15px","margin-left","15px"],[1,"site-page-header-ghost-wrapper"],[2,"background-color","#f9fbfd",3,"nzGhost"],[2,"margin-left","350px"],["nz-row",""],["nz-col","","nzSpan","9"],[2,"width","100%",3,"nzTitle","nzExtra"],[3,"nzSelectChange","nzPanelChange","nzFullscreen"],["nz-col",""],[2,"width","100%",3,"nzBodyStyle","nzTitle"],[1,"container"],[1,"row"],[1,"col",2,"margin-top","5px"],[1,"col"],["nz-button","",2,"background-color","#4F6F57","color","#f6f3ea","margin-top","5px","display","block","margin-left","auto","margin-right","0",3,"click"],["ngSkipHydration","",3,"nzData"],[4,"ngFor","ngForOf"],["nzWidth","1000px",3,"nzVisibleChange","nzOnCancel","nzVisible","nzTitle","nzFooter","nzContent"],["nzWidth","500px",3,"nzVisibleChange","nzOnCancel","nzVisible","nzTitle","nzFooter","nzContent"],["nz-button","",2,"color","#4F6F57","border","none","padding","0",3,"click"],["nz-button","","nzType","link",2,"color","#4F6F57","border","none",3,"click"],["nz-popconfirm","","nzType","link","nzPopconfirmTitle","\xBFEst\xE1s seguro de borrar la asignaci\xF3n?","nzCancelText","Cancelar","nzOkText","Si","nzPopconfirmPlacement","bottom","nzIcon","edit",2,"color","#4F6F57","border","none",3,"nzOnConfirm","nzOnCancel"],[1,"row",2,"margin-bottom","5px"],[1,"col-"],[1,"col-",2,"margin-left","26px"],["nz-dropdown","",3,"nzDropdownMenu"],["nz-icon","","nzType","down"],["nz-menu",""],["nz-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"col-",2,"margin-left","33px"],["nz-button","",2,"background-color","#4F6F57","color","#f6f3ea",3,"click"],["nz-icon",""],["nzShowSizeChanger","","ngSkipHydration","",3,"nzCurrentPageDataChange","nzData"],[3,"nzCheckedChange","nzSelections","nzChecked","nzIndeterminate"],["nz-menu-item","",3,"click"],[3,"nzCheckedChange","nzChecked"],["nz-form","",3,"formGroup"],["nzFor","customerName",3,"nzSm","nzXs"],[3,"nzSm","nzXs"],["type","text","nz-input","","formControlName","customerName","id","customerName"],["nzFor","routeName",3,"nzSm","nzXs"],["type","text","nz-input","","formControlName","routeName","id","routeName"],["nzFor","driver",3,"nzSm","nzXs"],["nz-button","","nz-dropdown","",3,"nzDropdownMenu"],["type","text","nz-input","","formControlName","driver","id","driverEditInput"],["nzFor","vehicleEdit",3,"nzSm","nzXs"],["type","text","nz-input","","formControlName","vehicleName","id","vehicleEditInput"]],template:function(r,o){if(r&1){let n=re();v(0,"div",10)(1,"div",11)(2,"nz-page-header",12)(3,"nz-page-header-title",13),D(4,"Programaci\xF3n"),y(),v(5,"nz-page-header-subtitle"),D(6,"Programaci\xF3n de operaciones del Sistema "),y()()(),v(7,"div",14)(8,"div",15)(9,"nz-card",16),Lr(10,"date"),v(11,"nz-calendar",17),q("nzSelectChange",function(a){return H(n),B(o.onValueChange(a))})("nzPanelChange",function(){return H(n),B(o.onPanelChange())}),y()(),$(12,EM,3,4,"ng-template",null,0,Re),y()(),v(14,"div",14)(15,"div",18)(16,"nz-card",19)(17,"div",20)(18,"div",21),N(19,"div",22)(20,"div",23),v(21,"div",23)(22,"button",24),q("click",function(){return H(n),B(o.refreshTable())}),D(23,"Actualizar"),y()()(),v(24,"div",21)(25,"nz-table",25,1)(27,"thead")(28,"tr")(29,"th"),D(30,"Inicia"),y(),v(31,"th"),D(32,"Empresa"),y(),v(33,"th"),D(34,"Operaci\xF3n"),y(),v(35,"th"),D(36,"Programa / Turno"),y(),v(37,"th"),D(38,"PR"),y(),v(39,"th"),D(40,"Veh\xEDculo"),y(),v(41,"th"),D(42,"Inici\xF3"),y(),v(43,"th"),D(44,"Finaliz\xF3"),y(),v(45,"th"),D(46,"Action"),y()()(),v(47,"tbody"),$(48,DM,23,9,"tr",26),y()()()()()()()(),v(49,"nz-modal",27),Lr(50,"date"),ht("nzVisibleChange",function(a){return H(n),ct(o.isAssignmentsModalVisible,a)||(o.isAssignmentsModalVisible=a),B(a)}),q("nzOnCancel",function(){return H(n),B(o.handleCancel())}),$(51,MM,51,13,"ng-template",null,2,Re)(53,IM,4,0,"ng-template",null,3,Re),y(),v(55,"nz-modal",28),Lr(56,"date"),ht("nzVisibleChange",function(a){return H(n),ct(o.isEditModalVisible,a)||(o.isEditModalVisible=a),B(a)}),q("nzOnCancel",function(){return H(n),B(o.handleCancelEdit())}),$(57,AM,36,21,"ng-template",null,4,Re)(59,OM,4,0,"ng-template",null,5,Re),y()}if(r&2){let n=ue(13),s=ue(26),a=ue(52),l=ue(54),d=ue(58),u=ue(60);_(2),E("nzGhost",!1),_(7),cd("nzTitle","Programaci\xF3n (",Rn(10,21,o.date,"mediumDate")," )"),E("nzExtra",n),_(2),E("nzFullscreen",!1)("nzFullscreen",!1),_(5),cd("nzTitle","Programaci\xF3n ",o.numAssingPro,""),E("nzBodyStyle",Na(30,xM)),_(9),E("nzData",o.rowData),_(23),E("ngForOf",s.data),_(),cd("nzTitle","Asignaciones ",Rn(50,24,o.date,"mediumDate"),""),ut("nzVisible",o.isAssignmentsModalVisible),E("nzFooter",l)("nzContent",a),_(6),cd("nzTitle","Editar Programacion ( ",Rn(56,27,o.date,"mediumDate")," )"),ut("nzVisible",o.isEditModalVisible),E("nzFooter",u)("nzContent",d)}},dependencies:[At,lC,Tt,Lt,Kt,xi,pi,Ei,gi,Gi,en,Qo,Zo,Qy,rn,Jo,tn,Zy,pr,hr,cr,Bi,Ko,fr,$a,Vt,Nt,kt,Xt,vr,mr,qr,di,Vi,Ot,li,ui,ci,Wc,Oc],styles:[".match-parent[_ngcontent-%COMP%]{width:100%!important;height:600px!important;background-color:#f6f6f4}"]})}}return i})();var Kn=Qn(Ts());var zv=["*"];function LM(i,t){}function NM(i,t){if(i&1&&(v(0,"span",1),$(1,LM,0,0,"ng-template",2),N(2,"span",3),y()),i&2){let e=O(),r=ue(4);E("nzDropdownMenu",e.nzOverlay),_(),E("ngTemplateOutlet",r)}}function kM(i,t){}function VM(i,t){if(i&1&&$(0,kM,0,0,"ng-template",2),i&2){O();let e=ue(4);E("ngTemplateOutlet",e)}}function GM(i,t){if(i&1&&(go(0),D(1),fo()),i&2){let e=O(2);_(),Et(" ",e.nzBreadCrumbComponent.nzSeparator," ")}}function HM(i,t){if(i&1&&(v(0,"nz-breadcrumb-separator"),$(1,GM,2,1,"ng-container",4),y()),i&2){let e=O();_(),E("nzStringTemplateOutlet",e.nzBreadCrumbComponent.nzSeparator)}}function BM(i,t){i&1&&(v(0,"span",5),La(1),y())}var $M=(i,t)=>t.url;function WM(i,t){if(i&1){let e=re();v(0,"nz-breadcrumb-item")(1,"a",0),q("click",function(o){let n=H(e).$implicit,s=O(2);return B(s.navigate(n.url,o))}),D(2),y()()}if(i&2){let e=t.$implicit;_(),py("href",e.url,dy),_(),J(e.label)}}function jM(i,t){if(i&1&&Ec(0,WM,3,2,"nz-breadcrumb-item",null,$M),i&2){let e=O();Dc(e.breadcrumbs)}}var UM=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=ke({type:i,selectors:[["nz-breadcrumb-separator"]],hostAttrs:[1,"ant-breadcrumb-separator"],exportAs:["nzBreadcrumbSeparator"],standalone:!0,features:[Wr],ngContentSelectors:zv,decls:1,vars:0,template:function(r,o){r&1&&(Oa(),La(0))},encapsulation:2})}}return i})(),pg=class{},gg=(()=>{class i{constructor(e){this.nzBreadCrumbComponent=e}static{this.\u0275fac=function(r){return new(r||i)(ee(pg))}}static{this.\u0275cmp=ke({type:i,selectors:[["nz-breadcrumb-item"]],inputs:{nzOverlay:"nzOverlay"},exportAs:["nzBreadcrumbItem"],standalone:!0,features:[Wr],ngContentSelectors:zv,decls:5,vars:2,consts:[["noMenuTpl",""],["nz-dropdown","",1,"ant-breadcrumb-overlay-link",3,"nzDropdownMenu"],[3,"ngTemplateOutlet"],["nz-icon","","nzType","down"],[4,"nzStringTemplateOutlet"],[1,"ant-breadcrumb-link"]],template:function(r,o){r&1&&(Oa(),$(0,NM,3,2,"span",1)(1,VM,1,1)(2,HM,2,1,"nz-breadcrumb-separator")(3,BM,2,0,"ng-template",null,0,Re)),r&2&&(po(0,o.nzOverlay?0:1),_(2),po(2,o.nzBreadCrumbComponent.nzSeparator?2:-1))},dependencies:[Ac,UM,Hy,Bi,zy,Tt,kc,Nc],encapsulation:2,changeDetection:0})}}return i})(),Av=(()=>{class i{constructor(e,r,o,n,s){this.injector=e,this.cdr=r,this.elementRef=o,this.renderer=n,this.directionality=s,this.nzAutoGenerate=!1,this.nzSeparator="/",this.nzRouteLabel="breadcrumb",this.nzRouteLabelFn=a=>a,this.nzRouteFn=a=>a,this.breadcrumbs=[],this.dir="ltr",this.destroy$=new it}ngOnInit(){this.nzAutoGenerate&&this.registerRouterChange(),this.directionality.change?.pipe(xe(this.destroy$)).subscribe(e=>{this.dir=e,this.prepareComponentForRtl(),this.cdr.detectChanges()}),this.dir=this.directionality.value,this.prepareComponentForRtl()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}navigate(e,r){r.preventDefault(),this.injector.get(Ds).navigateByUrl(e)}registerRouterChange(){try{let e=this.injector.get(Ds),r=this.injector.get(ka);e.events.pipe(ty(o=>o instanceof Ty),xe(this.destroy$),ry(!0)).subscribe(()=>{this.breadcrumbs=this.getBreadcrumbs(r.root),this.cdr.markForCheck()})}catch{throw new Error(`${My} You should import RouterModule if you want to use 'NzAutoGenerate'.`)}}getBreadcrumbs(e,r="",o=[]){let n=e.children;if(n.length===0)return o;for(let s of n)if(s.outlet===Dy){let a=s.snapshot.url.map(c=>c.path).filter(c=>c).join("/"),l=a?`${r}/${a}`:r,d=this.nzRouteLabelFn(s.snapshot.data[this.nzRouteLabel]),u=this.nzRouteFn(l);if(a&&d){let c={label:d,params:s.snapshot.params,url:u};o.push(c)}return this.getBreadcrumbs(s,l,o)}return o}prepareComponentForRtl(){this.dir==="rtl"?this.renderer.addClass(this.elementRef.nativeElement,"ant-breadcrumb-rtl"):this.renderer.removeClass(this.elementRef.nativeElement,"ant-breadcrumb-rtl")}static{this.\u0275fac=function(r){return new(r||i)(ee(ly),ee(Ic),ee(Aa),ee(uy),ee(Vc))}}static{this.\u0275cmp=ke({type:i,selectors:[["nz-breadcrumb"]],hostAttrs:[1,"ant-breadcrumb"],inputs:{nzAutoGenerate:[Sc.HasDecoratorInputTransform,"nzAutoGenerate","nzAutoGenerate",Fc],nzSeparator:"nzSeparator",nzRouteLabel:"nzRouteLabel",nzRouteLabelFn:"nzRouteLabelFn",nzRouteFn:"nzRouteFn"},exportAs:["nzBreadcrumb"],standalone:!0,features:[Pc([{provide:pg,useExisting:i}]),xc,Wr],ngContentSelectors:zv,decls:2,vars:1,consts:[[3,"click"]],template:function(r,o){r&1&&(Oa(),La(0),$(1,jM,2,0)),r&2&&(_(),po(1,o.nzAutoGenerate&&o.breadcrumbs.length?1:-1))},dependencies:[gg],encapsulation:2,changeDetection:0})}}return i})(),sq=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=jo({type:i})}static{this.\u0275inj=Wo({imports:[Av,gg]})}}return i})();var Ov=Qn(Ts());var KM=()=>[],YM=i=>[i];function XM(i,t){if(i&1){let e=re();v(0,"div"),D(1," Asignaciones "),v(2,"button",11),q("click",function(){H(e);let o=O();return B(o.showModal())}),D(3,"Agregar"),y()()}}function QM(i,t){if(i&1&&(v(0,"a",14),D(1),y()),i&2){let e=O().$implicit;_(),J(e.title)}}function ZM(i,t){if(i&1){let e=re();v(0,"li",20),q("click",function(){H(e);let o=O(2).$implicit,n=O();return B(n.toggleActive(o))}),N(1,"i",23),v(2,"span",22),D(3,"Activar"),y()()}}function JM(i,t){if(i&1){let e=re();v(0,"li",20),q("click",function(){H(e);let o=O(2).$implicit,n=O();return B(n.toggleActive(o))}),N(1,"i",23),v(2,"span",22),D(3,"Desactivar"),y()()}}function eI(i,t){if(i&1){let e=re();v(0,"li",20),q("click",function(){H(e);let o=O(2).$implicit,n=O();return B(n.selectProgramDay(o))}),N(1,"i",23),v(2,"span",22),D(3,"Programar"),y()()}}function tI(i,t){if(i&1){let e=re();v(0,"button",15),N(1,"i",16),y(),v(2,"nz-dropdown-menu",null,6)(4,"ul",17),$(5,ZM,4,0,"li",18)(6,JM,4,0,"li",18)(7,eI,4,0,"li",18),N(8,"li",19),v(9,"li",20),q("click",function(){H(e);let o=O().$implicit,n=O();return B(n.deleteAssignment(o))}),N(10,"i",21),v(11,"span",22),D(12,"Eliminar"),y()()()()}if(i&2){let e=ue(3),r=O().$implicit;E("nzDropdownMenu",e),_(5),E("ngIf",!r.active),_(),E("ngIf",r.active),_(),E("ngIf",r.active)}}function iI(i,t){if(i&1&&(v(0,"nz-list-item",12)(1,"nz-list-item-meta",13),$(2,QM,2,1,"ng-template",null,4,Re)(4,tI,13,4,"ng-template",null,5,Re),y()()),i&2){let e=t.$implicit,r=ue(5);E("nzActions",e.loading?Na(3,KM):Es(4,YM,r)),_(),E("nzTitle",e.driverName)("nzDescription","Unidad "+e.vehicleName)}}function rI(i,t){if(i&1){let e=re();v(0,"button",24),q("click",function(){H(e);let o=O();return B(o.showModal())}),D(1,"Asignar"),y()}}function oI(i,t){if(i&1&&(v(0,"nz-option",29),N(1,"i",30),D(2),y()),i&2){let e=t.$implicit;E("nzLabel",e.name)("nzValue",e.id),_(2),Et(" ",e.name,"")}}function nI(i,t){if(i&1&&(v(0,"nz-option",29),N(1,"i",30),D(2),y()),i&2){let e=t.$implicit;E("nzLabel",e.displayName)("nzValue",e.id),_(2),Et(" ",e.displayName,"")}}function sI(i,t){if(i&1){let e=re();v(0,"form",25),q("ngSubmit",function(){H(e);let o=O();return B(o.handleOk())}),v(1,"nz-form-item")(2,"nz-form-label"),D(3,"Veh\xEDculo"),y(),v(4,"nz-form-control")(5,"nz-select",26),q("ngModelChange",function(o){H(e);let n=O();return B(n.onVehicleSelected(o,"vehicleName"))}),$(6,oI,3,3,"nz-option",27),y()()(),v(7,"nz-form-item")(8,"nz-form-label"),D(9,"Operador"),y(),v(10,"nz-form-control")(11,"nz-select",28),q("ngModelChange",function(o){H(e);let n=O();return B(n.onDriverSelected(o,"driverName"))}),$(12,nI,3,3,"nz-option",27),y()()()()}if(i&2){let e=O();E("formGroup",e.assignmentForm),_(6),E("ngForOf",e.vehiclesList),_(6),E("ngForOf",e.driversList)}}function aI(i,t){if(i&1){let e=re();v(0,"nz-date-picker",31),ht("ngModelChange",function(o){H(e);let n=O();return ct(n.programSelectedDate,o)||(n.programSelectedDate=o),B(o)}),q("ngModelChange",function(o){H(e);let n=O();return B(n.onSelectedDayChange(o))}),y()}if(i&2){let e=O();ut("ngModel",e.programSelectedDate)}}var w_=(()=>{class i{constructor(e,r,o,n,s,a){this.driversService=e,this.programService=r,this.vehiclesService=o,this.routesService=n,this.messageService=s,this.fb=a,this.vendorId="",this.rolService=ie(Hi),this.authService=ie(bt),this.stopSubscription$=new it,this.loading=!0,this.isModalVisible=!1,this.isSelectDayVisible=!1,this.programSelectedDate=new Date,this.vehicleAssignmentsList=[],this.vehiclesList=[],this.driversList=[],this.infoLoad=[],this.authService.user.subscribe(l=>{l&&(this.user=l,this.user!==null&&this.user!==void 0&&this.user.rolId!==void 0&&this.rolService.getRol(this.user.rolId).valueChanges().subscribe(d=>{this.infoLoad=d,this.userlevelAccess=this.infoLoad.optionAccessLavel}))})}ngOnInit(){this.getSubscriptions(),this.createForm()}ngOnDestroy(){this.stopSubscription$.next(!1),this.stopSubscription$.complete()}createForm(){this.assignmentForm=this.fb.group({active:[!0,[K.required]],customerId:[this.customerId,[K.required]],vendorId:[this.vendorId,[K.required]],routeId:[this.routeId,[K.required]],assignmentId:[this.assignmentId,[K.required]],vehicleId:["",[K.required]],vehicleName:["",[K.required]],vehicleCapacity:[0],driverId:["",[K.required]],driverName:["",[K.required]]})}sendMessage(e,r){this.messageService.create(e,r)}getSubscriptions(){this.vendorId!=""?(this.vehicleAssignmentSubscription=this.routesService.getRouteVehicleAssignments(this.customerId,this.routeId,this.assignmentId,this.vendorId).pipe(xe(this.stopSubscription$),ce(e=>e.map(r=>{let o=r.payload.doc.id,n=r.payload.doc.data();return me({id:o},n)}))).subscribe(e=>{this.vehicleAssignmentsList=e,this.loading=!1}),this.vehiclesSubscription=this.vehiclesService.getVendorVehicles(this.vendorId).pipe(xe(this.stopSubscription$),ce(e=>e.map(r=>{let o=r.payload.doc.id,n=r.payload.doc.data();return me({id:o},n)}))).subscribe(e=>{this.vehiclesList=e,this.loading=!1}),this.driversSubscription=this.driversService.getDriversByCustomergetDrivers(this.vendorId).pipe(xe(this.stopSubscription$),ce(e=>e.map(r=>{let o=r.payload.doc.id,n=r.payload.doc.data();return me({id:o},n)}))).subscribe(e=>{this.driversList=e,this.loading=!1})):this.sendMessage("error","VendorId no esta asignado, favor de validar con soporte t\xE9cnico")}showModal(){this.isModalVisible=!0}handleCancel(){this.isModalVisible=!1,this.isSelectDayVisible=!1}handleOk(){this.userlevelAccess!="3"?this.assignmentForm.valid?(this.routesService.setRouteVehicleAssignments(this.customerId,this.routeId,this.assignmentForm.value),this.isModalVisible=!1):this.sendMessage("error","La forma es inv\xE1lida"):this.sendMessage("error","El usuario no tiene permisos para actualizar datos, favor de contactar al administrador.")}toggleActive(e){this.loading=!0,this.routesService.toggleRouteVehicleAssignment(this.customerId,this.routeId,e.id,e).then(()=>{this.loading=!1}).catch(r=>this.sendMessage("error",r))}selectProgramDay(e){this.selectedAssignment=e,this.isSelectDayVisible=!0,this.selectedAssignment.date=new Date}onSelectedDayChange(e){this.selectedAssignment.date=e}makeProgram(){let e=this.selectedAssignment;e.vendorId=this.vendorId,e.customerId=this.customerId,e.assignmentId=this.assignmentId,e.routeId=this.routeId,e.customerName=this.customerName,e.routeName=this.routeName,this.programService.setProgram(e),this.selectedAssignment=null,this.isSelectDayVisible=!1}deleteAssignment(e){this.loading=!0,this.userlevelAccess=="1"?this.routesService.deleteRouteVehicleAssignments(this.customerId,this.routeId,e.id).then(()=>{this.loading=!1}).catch(r=>this.sendMessage("error",r)):this.sendMessage("error","El usuario no tiene permisos para borrar datos, favor de contactar al administrador.")}onDriverSelected(e,r){if(e){let n=Ov.filter(this.driversList,s=>s.id==e)[0];this.assignmentForm.controls[r].setValue(n.displayName)}}onVehicleSelected(e,r){if(e){let n=Ov.filter(this.vehiclesList,s=>s.id==e)[0];this.assignmentForm.controls[r].setValue(n.name),this.assignmentForm.controls.vehicleCapacity.setValue(n.seats)}}static{this.\u0275fac=function(r){return new(r||i)(ee(nn),ee(Zc),ee(Ll),ee(Kr),ee(Mt),ee(hi))}}static{this.\u0275cmp=ke({type:i,selectors:[["app-shared-vehicle-assignments"]],inputs:{vendorId:"vendorId",customerId:"customerId",customerName:"customerName",assignmentId:"assignmentId",routeId:"routeId",routeName:"routeName"},decls:12,vars:9,consts:[["header",""],["item",""],["modalContent",""],["modalContent2",""],["nzTitle",""],["ellipsisAction",""],["menu","nzDropdownMenu"],["nz-list","","nzSize","small",3,"nzDataSource","nzLoading","nzHeader","nzRenderItem"],["nz-button","","style"," background-color: #4F6F57; color: #f6f3ea;",3,"click",4,"ngIf"],["nzTitle","Asignaci\xF3n",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible","nzContent"],["nzTitle","Programar para el d\xEDa",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible","nzContent"],["nz-button","","nzType","link",3,"click"],[3,"nzActions"],[3,"nzTitle","nzDescription"],["href","https://ng.ant.design"],["nz-button","","nzNoAnimation","","nz-dropdown","",2,"border","none","padding","0","background-color","#4F6F57","color","#f6f3ea",3,"nzDropdownMenu"],["nz-icon","","nzType","ellipsis","nzTheme","outline",2,"font-size","20px","vertical-align","top"],["nz-menu",""],["nz-menu-item","",3,"click",4,"ngIf"],["nz-menu-divider",""],["nz-menu-item","",3,"click"],["nz-icon","","nzType","delete","theme","outline"],[1,"m-l-10"],["nz-icon","","nzType","eye","theme","outline"],["nz-button","",2,"background-color","#4F6F57","color","#f6f3ea",3,"click"],["nz-form","",3,"ngSubmit","formGroup"],["formControlName","vehicleId","nzAllowClear","","nzPlaceHolder","Selecciona la unidad",3,"ngModelChange"],["nzCustomContent","",3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["formControlName","driverId","nzAllowClear","","nzPlaceHolder","Selecciona el PR",3,"ngModelChange"],["nzCustomContent","",3,"nzLabel","nzValue"],["nz-icon",""],[3,"ngModelChange","ngModel"]],template:function(r,o){if(r&1){let n=re();v(0,"ul",7),$(1,XM,4,0,"ng-template",null,0,Re)(3,iI,6,6,"ng-template",null,1,Re),y(),$(5,rI,2,0,"button",8),v(6,"nz-modal",9),ht("nzVisibleChange",function(a){return H(n),ct(o.isModalVisible,a)||(o.isModalVisible=a),B(a)}),q("nzOnCancel",function(){return H(n),B(o.handleCancel())})("nzOnOk",function(){return H(n),B(o.handleOk())}),$(7,sI,13,3,"ng-template",null,2,Re),y(),v(9,"nz-modal",10),ht("nzVisibleChange",function(a){return H(n),ct(o.isSelectDayVisible,a)||(o.isSelectDayVisible=a),B(a)}),q("nzOnCancel",function(){return H(n),B(o.handleCancel())})("nzOnOk",function(){return H(n),B(o.makeProgram())}),$(10,aI,1,1,"ng-template",null,3,Re),y()}if(r&2){let n=ue(2),s=ue(4),a=ue(8),l=ue(11);E("nzDataSource",o.vehicleAssignmentsList)("nzLoading",o.loading)("nzHeader",n)("nzRenderItem",s),_(5),E("ngIf",o.vehicleAssignmentsList.length==0&&!o.loading),_(),ut("nzVisible",o.isModalVisible),E("nzContent",a),_(3),ut("nzVisible",o.isSelectDayVisible),E("nzContent",l)}},dependencies:[At,Dt,sC,aC,nC,Tt,Lt,Kt,xi,pi,Ei,gi,Uc,pr,hr,cr,qo,Bi,fr,$a,Vt,Nt,kt,yr,Cr,di,Ot,li,ui,ci,jr]})}}return i})();function dI(i,t){i&1&&(v(0,"nz-tag",16),D(1,"Activa"),y()),i&2&&E("nzColor","blue")}function uI(i,t){i&1&&(v(0,"li",17),D(1,"Desactivar"),y())}function cI(i,t){i&1&&(v(0,"li",17),D(1,"Activar"),y())}function hI(i,t){if(i&1&&(v(0,"nz-tag",16),D(1,"Dom"),y()),i&2){let e=O().$implicit;E("nzColor",e.isSunday?"blue":void 0)}}function pI(i,t){if(i&1&&(v(0,"nz-tag",16),D(1,"Lun"),y()),i&2){let e=O().$implicit;E("nzColor",e.isMonday?"blue":void 0)}}function gI(i,t){if(i&1&&(v(0,"nz-tag",16),D(1,"Mar"),y()),i&2){let e=O().$implicit;E("nzColor",e.isTuesday?"blue":void 0)}}function fI(i,t){if(i&1&&(v(0,"nz-tag",16),D(1,"Mi\xE9"),y()),i&2){let e=O().$implicit;E("nzColor",e.isWednesday?"blue":void 0)}}function mI(i,t){if(i&1&&(v(0,"nz-tag",16),D(1,"Jue"),y()),i&2){let e=O().$implicit;E("nzColor",e.isThursday?"blue":void 0)}}function vI(i,t){if(i&1&&(v(0,"nz-tag",16),D(1,"Vie"),y()),i&2){let e=O().$implicit;E("nzColor",e.isFriday?"blue":void 0)}}function yI(i,t){if(i&1&&(v(0,"nz-tag",16),D(1,"S\xE1b"),y()),i&2){let e=O().$implicit;E("nzColor",e.isSaturday?"blue":void 0)}}function CI(i,t){}function bI(i,t){if(i&1&&(v(0,"div",4)(1,"nz-card")(2,"nz-page-header")(3,"nz-breadcrumb",5)(4,"nz-breadcrumb-item"),D(5),y(),v(6,"nz-breadcrumb-item"),D(7),y(),v(8,"nz-breadcrumb-item"),D(9),y()(),v(10,"nz-page-header-title"),D(11),Lr(12,"date"),y(),v(13,"nz-page-header-tags"),$(14,dI,2,1,"nz-tag",6),y(),v(15,"nz-page-header-extra")(16,"button",7),N(17,"i",8),y(),v(18,"nz-dropdown-menu",null,0)(20,"ul",9),$(21,uI,2,0,"li",10)(22,cI,2,0,"li",10),y()()(),v(23,"nz-page-header-content")(24,"div",11)(25,"div",12)(26,"div",12)(27,"p",13),$(28,hI,2,1,"nz-tag",6)(29,pI,2,1,"nz-tag",6)(30,gI,2,1,"nz-tag",6)(31,fI,2,1,"nz-tag",6)(32,mI,2,1,"nz-tag",6)(33,vI,2,1,"nz-tag",6)(34,yI,2,1,"nz-tag",6),y()()(),N(35,"div",14),y()()(),N(36,"app-shared-vehicle-assignments",15),y(),$(37,CI,0,0,"ng-template",null,1,Re),y()),i&2){let e=t.$implicit,r=ue(19),o=O();_(5),J(e.program=="M"?"Mete":"Saca"),_(2),Et(" ",e.round," "),_(2),J(e.type),_(2),J(Rn(12,21,e.time.toDate(),"shortTime")),_(3),E("ngIf",e.active),_(2),E("nzDropdownMenu",r),_(5),E("ngIf",e.active),_(),E("ngIf",!e.active),_(6),E("ngIf",e.isSunday),_(),E("ngIf",e.isMonday),_(),E("ngIf",e.isTuesday),_(),E("ngIf",e.isWednesday),_(),E("ngIf",e.isThursday),_(),E("ngIf",e.isFriday),_(),E("ngIf",e.isSaturday),_(2),E("customerId",e.customerId)("customerName",o.customerName)("routeId",e.routeId)("routeName",o.routeName)("vendorId",e.vendorId)("assignmentId",e.id)}}var S_=(()=>{class i{constructor(){this.assignmentsService=ie(hg),this.vendorId="",this.routeId="",this.routeName="",this.customerName="",this.loading=!0,this.stopSubscription$=new it,this.assignmentList=[]}ngOnInit(){this.getSubscriptions()}ngOnDestroy(){this.stopSubscription$.next(!1),this.stopSubscription$.complete()}getSubscriptions(){this.assignmentSubscription=this.assignmentsService.getActiveAssignmentsRoute(this.routeId).pipe(xe(this.stopSubscription$),ce(e=>e.map(r=>{let o=r.payload.doc.id,n=r.payload.doc.data();return me({id:o},n)}))).subscribe(e=>{this.assignmentList=e,this.loading=!1})}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=ke({type:i,selectors:[["app-shared-vendor-assignments"]],inputs:{vendorId:"vendorId",routeId:"routeId",routeName:"routeName",customerName:"customerName"},decls:2,vars:1,consts:[["menu","nzDropdownMenu"],["extraTemplate",""],[1,"row"],["class","col-md-4 col-sm-6 col-xs-12",4,"ngFor","ngForOf"],[1,"col-md-4","col-sm-6","col-xs-12"],["nz-page-header-breadcrumb",""],[3,"nzColor",4,"ngIf"],["nz-button","","nzNoAnimation","","nz-dropdown","",2,"border","none","padding","0",3,"nzDropdownMenu"],["nz-icon","","nzTheme","outline",2,"font-size","20px","vertical-align","top"],["nz-menu",""],["nz-menu-item","",4,"ngIf"],[1,"wrap"],[1,"content"],[1,"content-link"],[1,"extra-content"],[3,"customerId","customerName","routeId","routeName","vendorId","assignmentId"],[3,"nzColor"],["nz-menu-item",""]],template:function(r,o){r&1&&(v(0,"div",2),$(1,bI,39,24,"div",3),y()),r&2&&(_(),E("ngForOf",o.assignmentList))},dependencies:[At,Dt,Tt,hr,cr,Bi,fr,$a,Av,gg,Vt,Nt,kt,Xt,vr,mr,Wa,By,$y,Wy,on,w_,Oc]})}}return i})();function SI(i,t){if(i&1&&(v(0,"form",8)(1,"div",9)(2,"div",10)(3,"nz-form-item")(4,"nz-form-label",11),D(5,"Operaci\xF3n"),y(),v(6,"nz-form-control")(7,"nz-select",12),N(8,"nz-option",13)(9,"nz-option",14)(10,"nz-option",15),y()()()(),v(11,"div",16)(12,"nz-form-item")(13,"nz-form-label",17),D(14,"Programa"),y(),v(15,"nz-form-control")(16,"nz-select",18),N(17,"nz-option",13)(18,"nz-option",14)(19,"nz-option",15),y()()()(),v(20,"div",16)(21,"nz-form-item")(22,"nz-form-label",19),D(23,"Turno"),y(),v(24,"nz-form-control")(25,"nz-select",18),N(26,"nz-option",13)(27,"nz-option",14)(28,"nz-option",15),y()()()(),v(29,"div",16)(30,"nz-form-item")(31,"nz-form-label",20),D(32,"Veh\xEDculo"),y(),v(33,"nz-form-control")(34,"nz-select",18),N(35,"nz-option",13)(36,"nz-option",14)(37,"nz-option",15),y()()()(),v(38,"div",16)(39,"nz-form-item")(40,"nz-form-label",19),D(41,"PR"),y(),v(42,"nz-form-control")(43,"nz-select",18),N(44,"nz-option",13)(45,"nz-option",14)(46,"nz-option",15),y()()()()(),v(47,"nz-form-item")(48,"nz-form-label"),D(49,"Se repite los d\xEDas"),y(),v(50,"nz-form-control")(51,"label",21),D(52,"Dom"),y(),v(53,"label",22),D(54,"Lun"),y(),v(55,"label",23),D(56,"Mar"),y(),v(57,"label",24),D(58,"Mi\xE9"),y(),v(59,"label",25),D(60,"Jue"),y(),v(61,"label",26),D(62,"Vie"),y(),v(63,"label",27),D(64,"S\xE1b"),y()()()()),i&2){let e=O();E("formGroup",e.objectForm)}}function _I(i,t){if(i&1&&(v(0,"nz-collapse-panel",31),N(1,"app-shared-vendor-assignments",32),y()),i&2){let e=O().$implicit,r=O().$implicit,o=O();E("nzHeader",e.routeName+" "+e.passes.length)("nzActive",e.active)("nzDisabled",!e.permission),_(),E("vendorId",o.user.vendorId)("customerName",r)("routeId",e.routeId)("routeName",e.routeName)}}function xI(i,t){if(i&1&&(v(0,"div")(1,"nz-collapse"),$(2,_I,2,7,"nz-collapse-panel",30),y()()),i&2){let e=t.$implicit,r=O().$implicit;_(2),E("ngIf",e.customerName==r)}}function EI(i,t){if(i&1&&(v(0,"nz-tab",28),$(1,xI,3,1,"div",29),y()),i&2){let e=t.$implicit,r=O();E("nzTitle",e),_(),E("ngForOf",r.vendorRoutesList)}}var Nq=(()=>{class i{constructor(e){this.fb=e,this.authService=ie(bt),this.usersService=ie(Jn),this.allChecked=!1,this.indeterminate=!1,this.displayData=[],this.recordId="bKLBasJLckghzlqhbjIx",this.user=[],this.stopSubscriptions$=new it,this.vendorRoutesList=[],this.customersList=[],this.customersActiveList=[],this.loading=!0,this.isVisible=!1,this.isOkLoading=!1,this.infoSegment=[],this.accountsService=ie(gr),this.stopSubscription$=new it,this.authService.user.subscribe(r=>{r&&(this.user=r,this.user!==null&&this.user!==void 0&&this.user.idSegment!==void 0&&this.accountsService.getSegmentLevel(this.user.idSegment).pipe(xe(this.stopSubscription$),ce(o=>{let n=o.payload.id,s=o.payload.data();return me({id:n},s)}),ft(o=>(this.infoSegment=o,this.getSubscriptions(),o))).subscribe())}),this.createForm()}ngOnInit(){}ngOnDestroy(){this.stopSubscriptions$.next(!1),this.stopSubscriptions$.complete()}createForm(){this.objectForm=this.fb.group({customerName:["",K.required],customerId:["",K.required],routeName:["",K.required],routeId:["",K.required],vehicleName:["",K.required],vehicleId:["",K.required],driverName:["",K.required],driverId:["",K.required],active:[!0,K.required],deleted:["",K.required],round:["",K.required],program:["",K.required],type:["",K.required],vehicleType:["",K.required],isSunday:[!1,K.required],isMonday:[!1,K.required],isTuesday:[!1,K.required],isWednesday:[!1,K.required],isThursday:[!1,K.required],isFriday:[!1,K.required],isSaturday:[!1,K.required]})}showModal(){this.isVisible=!0}handleOk(){this.isOkLoading=!0,setTimeout(()=>{this.isVisible=!1,this.isOkLoading=!1},3e3)}handleCancel(){this.isVisible=!1}getSubscriptions(){this.vendorRoutesSubscription=this.usersService.getBoardingPassesByRoute().pipe(xe(this.stopSubscriptions$)).subscribe(e=>{this.createNestedTableData(e)})}createNestedTableData(e){this.vendorRoutesList=[],this.usersService.getActiveCustomers().pipe(xe(this.stopSubscription$),ce(r=>r.map(o=>{let n=o.payload.doc.id,s=o.payload.doc.data();return me({id:n},s)}))).subscribe(r=>{if(this.customersActiveList=r,this.infoSegment.nivelNum!==void 0&&this.infoSegment.nivelNum==1){let o=e.filter(n=>n.customerId===this.user.customerId);this.customersList=Kn.chain(o).map("customerName").uniq().filter(n=>Kn.includes(Kn.map(this.customersActiveList,"name"),n)).value();for(let n=0;n<e.length;++n)e[n].passes[0].routeName!=""&&(e[n].routeName=e[n].passes[0].routeName),e[n].passes[0].routeId!=""&&(e[n].routeId=e[n].passes[0].routeId);this.vendorRoutesList=e}else{this.customersList=Kn.chain(e).map("customerName").uniq().filter(o=>Kn.includes(Kn.map(this.customersActiveList,"name"),o)).value();for(let o=0;o<e.length;++o)e[o].passes[0].routeName!=""&&(e[o].routeName=e[o].passes[0].routeName),e[o].passes[0].routeId!=""&&(e[o].routeId=e[o].passes[0].routeId);this.vendorRoutesList=e}})}sort(e){}currentPageDataChange(e){this.displayData=e,this.refreshStatus()}refreshStatus(){let e=this.displayData.every(o=>o.checked===!0),r=this.displayData.every(o=>!o.checked);this.allChecked=e,this.indeterminate=!e&&!r}checkAll(e){this.displayData.forEach(r=>{r.checked=e}),this.refreshStatus()}static{this.\u0275fac=function(r){return new(r||i)(ee(hi))}}static{this.\u0275cmp=ke({type:i,selectors:[["app-assignment"]],decls:13,vars:5,consts:[["modalContent",""],[2,"margin","buttom 15px","margin-right","15px","margin-left","15px"],[1,"site-page-header-ghost-wrapper"],[2,"background-color","#f9fbfd",3,"nzGhost"],[2,"margin-left","350px"],["nzTitle","Crear asignaci\xF3n",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible","nzOkLoading","nzContent"],["nzTabPosition","left"],[3,"nzTitle",4,"ngFor","ngForOf"],["nz-form","",3,"formGroup"],[1,"row"],[1,"col-md-12"],["nzFor","routeId"],["formControlName","routeId","nzAllowClear","","nzPlaceHolder","Seleccionar"],["nzValue","jack","nzLabel","Jack"],["nzValue","lucy","nzLabel","Lucy"],["nzValue","disabled","nzLabel","Disabled","nzDisabled",""],[1,"col-md-6","col-sm-12"],["nzFor","program"],["formControlName","program","nzAllowClear","","nzPlaceHolder","Seleccionar"],["nzFor","round"],["nzFor","vehicle"],["nz-checkbox","","formControlName","isSunday"],["nz-checkbox","","formControlName","isMonday"],["nz-checkbox","","formControlName","isTuesday"],["nz-checkbox","","formControlName","isWednesday"],["nz-checkbox","","formControlName","isThursday"],["nz-checkbox","","formControlName","isFriday"],["nz-checkbox","","formControlName","isSaturday"],[3,"nzTitle"],[4,"ngFor","ngForOf"],[3,"nzHeader","nzActive","nzDisabled",4,"ngIf"],[3,"nzHeader","nzActive","nzDisabled"],[3,"vendorId","customerName","routeId","routeName"]],template:function(r,o){if(r&1){let n=re();v(0,"div",1)(1,"div",2)(2,"nz-page-header",3)(3,"nz-page-header-title",4),D(4,"Asignaci\xF3n"),y(),v(5,"nz-page-header-subtitle"),D(6,"Asignaciones del Sistema "),y()()(),v(7,"nz-card")(8,"nz-modal",5),ht("nzVisibleChange",function(a){return H(n),ct(o.isVisible,a)||(o.isVisible=a),B(a)}),q("nzOnCancel",function(){return H(n),B(o.handleCancel())})("nzOnOk",function(){return H(n),B(o.handleOk())}),$(9,SI,65,1,"ng-template",null,0,Re),y(),v(11,"nz-tabset",6),$(12,EI,2,2,"nz-tab",7),y()()()}if(r&2){let n=ue(10);_(2),E("nzGhost",!1),_(6),ut("nzVisible",o.isVisible),E("nzOkLoading",o.isOkLoading)("nzContent",n),_(4),E("ngForOf",o.customersList)}},dependencies:[At,Dt,Lt,Kt,xi,pi,Ei,gi,qy,pr,oC,rC,Xt,vr,mr,qr,yr,Cr,di,Ot,li,ui,ci,Xo,Yo,S_]})}}return i})();var Lv=function(i){A(t,i);function t(){var e=i.call(this)||this;e.className="ForceDirectedLink";var r=new Le;return e.fillOpacity=0,e.strokeOpacity=.5,e.stroke=r.getFor("grid"),e.isMeasured=!1,e.nonScalingStroke=!0,e.interactionsEnabled=!1,e.distance=1.5,e.strength=1,e.applyTheme(),e}return t.prototype.validate=function(){i.prototype.validate.call(this);var e=this.source,r=this.target;e&&r&&(this.path=pe({x:e.pixelX,y:e.pixelY})+X({x:r.pixelX,y:r.pixelY}),e.isHidden||r.isHidden||e.isHiding||r.isHiding?this.hide():this.show())},Object.defineProperty(t.prototype,"source",{get:function(){return this._source},set:function(e){e&&(this._source=e,this._disposers.push(e.events.on("positionchanged",this.invalidate,this,!1)),this._disposers.push(e.events.on("validated",this.invalidate,this,!1)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this._target},set:function(e){e&&(this._target=e,this._disposers.push(e.events.on("positionchanged",this.invalidate,this,!1)),this._disposers.push(e.events.on("validated",this.invalidate,this,!1)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._adapterO&&this._adapterO.isEnabled("distance")?this._adapterO.apply("distance",this.properties.distance):this.properties.distance},set:function(e){this.setPropertyValue("distance",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strength",{get:function(){return this._adapterO&&this._adapterO.isEnabled("strength")?this._adapterO.apply("strength",this.properties.strength):this.properties.strength},set:function(e){this.setPropertyValue("strength",e)},enumerable:!0,configurable:!0}),t.prototype.getTooltipX=function(){var e=this.getPropertyValue("tooltipX");if(e instanceof Me||(e=ae(50)),e instanceof Me){var r=this.source,o=this.target;if(r&&o){var n=r.pixelX,s=o.pixelX;return n+(s-n)*e.value}}return 0},t.prototype.getTooltipY=function(){var e=this.getPropertyValue("tooltipY");if(e instanceof Me||(e=ae(50)),e instanceof Me){var r=this.source,o=this.target;if(r&&o){var n=r.pixelY,s=o.pixelY;return n+(s-n)*e.value}}return 0},t}(Se);P.registeredClasses.ForceDirectedLink=Lv;var Nv=function(i){A(t,i);function t(){var e=i.call(this)||this;e.className="Grip";var r=new Le;e.layout="absolute",e.padding(10,10,10,10),e.margin(3,3,3,3),e.background.fillOpacity=.3,e.background.cornerRadius(10,10,10,10);var o=new Se;o.element=e.paper.add("path");var n=pe({x:-6,y:0});return n+=X({x:6,y:0}),n+=pe({x:-8,y:-6}),n+=X({x:0,y:-12}),n+=X({x:8,y:-6}),n+=pe({x:-8,y:6}),n+=X({x:0,y:12}),n+=X({x:8,y:6}),o.path=n,o.strokeWidth=2,o.fillOpacity=0,o.pixelPerfect=!0,o.padding(0,4,0,4),o.stroke=r.getFor("text"),o.strokeOpacity=.7,o.align="center",o.valign="middle",e.icon=o,e.label.dispose(),e.label=void 0,e.position="right",e.autoHideDelay=3e3,e.events.on("shown",function(s){e._autoHideTimeout&&e._autoHideTimeout.dispose(),e.autoHideDelay&&(e._autoHideTimeout=e.setTimeout(function(){e.hide()},e.autoHideDelay))}),e.events.on("down",function(s){e._autoHideTimeout&&e._autoHideTimeout.dispose()}),e.events.on("out",function(s){e.autoHideDelay&&(e._autoHideTimeout=e.setTimeout(function(){e.hide()},e.autoHideDelay))}),e.applyTheme(),e}return Object.defineProperty(t.prototype,"position",{get:function(){return this.getPropertyValue("position")},set:function(e){if(this.setPropertyValue("position",e))switch(e){case"left":this.align="left",this.valign="middle",this.horizontalCenter="left",this.verticalCenter="middle",this.icon.rotation=0,this.width=void 0,this.height=ae(30);break;case"right":this.align="right",this.valign="middle",this.horizontalCenter="right",this.verticalCenter="middle",this.icon.rotation=0,this.width=void 0,this.height=ae(30);break;case"top":this.align="center",this.valign="top",this.horizontalCenter="middle",this.verticalCenter="top",this.icon.rotation=90,this.width=ae(30),this.height=void 0;break;case"bottom":this.align="center",this.valign="bottom",this.horizontalCenter="middle",this.verticalCenter="bottom",this.icon.rotation=90,this.width=ae(30),this.height=void 0;break;default:this.align="center",this.valign="middle",this.horizontalCenter="middle",this.verticalCenter="middle",this.icon.rotation=90,this.width=ae(30),this.height=void 0}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoHideDelay",{get:function(){return this.getPropertyValue("autoHideDelay")},set:function(e){this.setPropertyValue("autoHideDelay",e)},enumerable:!0,configurable:!0}),t}(Qi);P.registeredClasses.Grip=Nv;var __=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="ChartDataItem",e.applyTheme(),e}return t}(xn);var Ta=function(i){A(t,i);function t(){var e=i.call(this)||this;if(e._legend=new $n,e.constructor===t)throw new Error("'Chart' cannot be instantiated directly. Please use a specific chart type.");e.className="Chart";var r=new si;e.titles=new oi(r),e._disposers.push(new St(e.titles)),e._disposers.push(r),e.width=ae(100),e.height=ae(100),e.layout="vertical";var o=e.createChild(_e);o.shouldClone=!1,o.layout="vertical",o.width=ae(100),o.height=ae(100),e.chartAndLegendContainer=o;var n=o.createChild(_e);return n.shouldClone=!1,n.width=ae(100),n.height=ae(100),e.chartContainer=n,e.showOnInit=!0,e._disposers.push(e._legend),e.titles.events.on("inserted",function(s){e.processTitle(s),e.updateReaderTitleReferences()},e,!1),e.titles.events.on("removed",function(s){e.updateReaderTitleReferences()},e,!1),e.role="region",e.defaultState.transitionDuration=1,e.applyTheme(),e}return t.prototype.applyInternalDefaults=function(){i.prototype.applyInternalDefaults.call(this),T(this.readerTitle)||(this.readerTitle=this.language.translate("Chart"))},t.prototype.draw=function(){this.fixLayout(),i.prototype.draw.call(this)},t.prototype.fixLayout=function(){var e=this.legend;if(e){var r=this.chartAndLegendContainer,o=this.chartContainer;switch(o.x=void 0,o.y=void 0,e.position!="absolute"&&(e.x=void 0,e.y=void 0),e.position){case"left":r.layout="horizontal",e.toBack();break;case"right":r.layout="horizontal",e.toFront();break;case"top":r.layout="vertical",e.toBack();break;case"bottom":r.layout="vertical",e.toFront();break;case"absolute":e.isMeasured=!1;break}}},t.prototype.feedLegend=function(){},t.prototype.processTitle=function(e){var r=e.newValue;return r.parent=this,r.toBack(),r.shouldClone=!1,r.align="center",r.uidAttr(),r},t.prototype.updateReaderTitleReferences=function(){if(this.titles.length){var e=[];de(this.titles.iterator(),function(r){e.push(r.uid)}),this.setSVGAttribute({"aria-labelledby":e.join(" ")})}else this.removeSVGAttribute("aria-labelledby")},Object.defineProperty(t.prototype,"legend",{get:function(){return this._legend.get()},set:function(e){this.setLegend(e)},enumerable:!0,configurable:!0}),t.prototype.setLegend=function(e){var r=this;this._legend.get()!==e&&(e?(e.parent=this.chartAndLegendContainer,this._legend.set(e,e.events.on("propertychanged",function(o){o.property=="position"&&r.fixLayout()},void 0,!1)),e.addDisposer(new Ke(function(){r.legend=void 0}))):this._legend.reset(),this.feedLegend())},t.prototype.dispose=function(){this.legend&&this.legend.dispose(),i.prototype.dispose.call(this)},t.prototype.processConfig=function(e){e&&T(e.legend)&&!T(e.legend.type)&&(e.legend.type="Legend"),i.prototype.processConfig.call(this,e)},t.prototype.copyFrom=function(e){this.titles.copyFrom(e.titles),this.chartContainer.copyFrom(e.chartContainer),e.legend&&(this.legend=e.legend.clone(),this.legend.removeChildren()),i.prototype.copyFrom.call(this,e)},Object.defineProperty(t.prototype,"dragGrip",{get:function(){var e=this;if(!this._dragGrip){var r=this.tooltipContainer.createChild(Nv);r.align="right",r.valign="middle",r.hide(0),r.events.on("down",function(o){o.touch&&(e.interactionsEnabled=!1)}),r.events.on("up",function(o){e.interactionsEnabled=!0}),this.events.on("down",function(o){o.touch&&r.show()}),this._dragGrip=r}return this._dragGrip},set:function(e){this._dragGrip=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusable",{get:function(){return this.parent.focusable},set:function(e){this.parent.focusable=e},enumerable:!0,configurable:!0}),t}(En);P.registeredClasses.Chart=Ta;Xi.push({relevant:zr.widthXS,state:function(i,t){if(i instanceof Ta){var e=i.states.create(t);return i.pixelPaddingLeft>10&&(e.properties.paddingLeft=10),i.pixelPaddingRight>10&&(e.properties.paddingRight=10),e}return null}});Xi.push({relevant:zr.heightXS,state:function(i,t){if(i instanceof Ta){var e=i.states.create(t);return i.pixelPaddingTop>10&&(e.properties.paddingTop=10),i.pixelPaddingBottom>10&&(e.properties.paddingBottom=10),e}return null}});Xi.push({relevant:zr.widthXXS,state:function(i,t){if(i instanceof Ta){var e=i.states.create(t);return e.properties.paddingLeft=0,e.properties.paddingRight=0,e}return null}});Xi.push({relevant:zr.heightXXS,state:function(i,t){if(i instanceof Ta){var e=i.states.create(t);return e.properties.paddingTop=0,e.properties.paddingBottom=0,e}return null}});var nc=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="Bullet",e.isMeasured=!1,e.tooltipX=0,e.tooltipY=0,e.layout="none",e.applyOnClones=!0,e.copyToLegendMarker=!0,e.applyTheme(),e}return Object.defineProperty(t.prototype,"locationX",{get:function(){return this.getPropertyValue("locationX")},set:function(e){if(this.setPropertyValue("locationX",e)){var r=this.dataItem;r&&r.component&&r.component.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locationY",{get:function(){return this.getPropertyValue("locationY")},set:function(e){if(this.setPropertyValue("locationY",e)){var r=this.dataItem;r&&r.component&&r.component.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xField",{get:function(){return this.getPropertyValue("xField")},set:function(e){this.setPropertyValue("xField",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yField",{get:function(){return this.getPropertyValue("yField")},set:function(e){this.setPropertyValue("yField",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDynamic",{get:function(){return this.getPropertyValue("isDynamic")},set:function(e){this.setPropertyValue("isDynamic",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"copyToLegendMarker",{get:function(){return this.getPropertyValue("copyToLegendMarker")},set:function(e){this.setPropertyValue("copyToLegendMarker",e)},enumerable:!0,configurable:!0}),t}(_e);P.registeredClasses.Bullet=nc;Xi.push({relevant:zr.isXS,state:function(i,t){if(i instanceof nc){var e=i.states.create(t);return e.properties.disabled=!0,e}return null}});var DI=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.childrenCreated=!1,e.className="LegendDataItem",e.applyTheme(),e}return Object.defineProperty(t.prototype,"label",{get:function(){var e=this;if(!this._label){var r=this.component.labels.create();this._label=r,this.addSprite(r),this._disposers.push(r),r.parent=this.itemContainer,this._disposers.push(new Ke(function(){T(e.component)&&e.component.labels.removeValue(r)}))}return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.properties.color},set:function(e){this.setProperty("color",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valueLabel",{get:function(){var e=this;if(!this._valueLabel){var r=this.component.valueLabels.create();this._valueLabel=r,this.addSprite(r),this._disposers.push(r),r.parent=this.itemContainer,this._disposers.push(new Ke(function(){T(e.component)&&e.component.valueLabels.removeValue(r)}))}return this._valueLabel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemContainer",{get:function(){var e=this;if(!this._itemContainer){var r=this.component,o=r.itemContainers.create();o.parent=r,this._itemContainer=o,this.addSprite(o),this._disposers.push(o),o.togglable&&o.events.on("toggled",function(a){r.toggleDataItem(a.target.dataItem)},void 0,!1),o.focusable&&(o.events.on("hit",function(a){r.focusedItem=void 0},void 0,!1),o.events.on("focus",function(a){r.focusedItem=a.target.dataItem},void 0,!1),o.events.on("blur",function(a){r.focusedItem=void 0},void 0,!1)),this._disposers.push(new Ke(function(){T(e.component)&&e.component.itemContainers.removeValue(o)})),this.dataContext.uidAttr&&(o.readerControls=this.dataContext.uidAttr(),o.readerLabelledBy=this.dataContext.uidAttr());var n=this.dataContext;if((n instanceof xn||n instanceof Se)&&!n.isDisposed()){var s=function(a){o.readerChecked=a.visible,o.events.disableType("toggled"),o.isActive=!a.visible,o.events.enableType("toggled")};n.addDisposer(new Ke(function(){e.component&&e.component.dataItems.remove(e)})),n instanceof Se?(o.addDisposer(n.events.on("visibilitychanged",s,void 0,!1)),o.addDisposer(n.events.on("hidden",function(a){o.readerChecked=!1,o.events.disableType("toggled"),o.isActive=!0,o.events.enableType("toggled")},void 0,!1)),o.addDisposer(n.events.on("shown",function(a){o.readerChecked=!0,o.events.disableType("toggled"),o.isActive=!1,o.events.enableType("toggled")},void 0,!1))):o.addDisposer(n.events.on("visibilitychanged",s,void 0,!1))}}return this._itemContainer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"marker",{get:function(){var e=this;if(!this._marker){var r=this.component.markers.create();this._marker=r,r.parent=this.itemContainer,this.addSprite(r),this._disposers.push(r),this._disposers.push(new Ke(function(){T(e.component)&&e.component.markers.removeValue(r)}))}return this._marker},enumerable:!0,configurable:!0}),t}(xn);var x_=function(){function i(){this.createMarker=!0}return i}();var fg=function(i){A(t,i);function t(){var e=i.call(this)||this;e.className="Legend",e.layout="grid",e.setPropertyValue("useDefaultMarker",!1),e.setPropertyValue("scrollable",!1),e.setPropertyValue("contentAlign","center");var r=new _e;r.applyOnClones=!0,r.padding(8,0,8,0),r.margin(0,10,0,10),r.layout="horizontal",r.clickable=!0,r.focusable=!0,r.role="switch",r.togglable=!0,r.cursorOverStyle=Ft.pointer,r.background.fillOpacity=0,e.itemContainers=new oi(r),e._disposers.push(new St(e.itemContainers)),e._disposers.push(e.itemContainers.template),e._disposers.push(ye().body.events.on("keyup",function(u){if(qi.isKey(u.event,"enter")&&e.focusedItem){var c=e.focusedItem,h=c.itemContainer;h.togglable?e.toggleDataItem(c):h.clickable&&h.events.isEnabled("hit")&&(h.dispatchImmediately("hit",{event:u}),e.focusedItem=c)}},e));var o=new Le,n=new _e;n.width=23,n.height=23,n.interactionsEnabled=!1,n.applyOnClones=!0,n.setStateOnChildren=!0,n.background.fillOpacity=0,n.background.strokeOpacity=0,n.propertyFields.fill="fill",n.valign="middle";var s=o.getFor("disabledBackground");n.events.on("childadded",function(u){var c=u.newValue,h=c.states.create("active");h.properties.stroke=s,h.properties.fill=s}),e.markers=new oi(n),e._disposers.push(new St(e.markers)),e._disposers.push(e.markers.template);var a=n.createChild(uo);a.width=ae(100),a.height=ae(100),a.applyOnClones=!0,a.propertyFields.fill="fill",a.strokeOpacity=0;var l=new si;l.text="{name}",l.margin(0,5,0,5),l.valign="middle",l.applyOnClones=!0,l.states.create("active").properties.fill=o.getFor("disabledBackground"),e.labels=new oi(l),e._disposers.push(new St(e.labels)),e._disposers.push(e.labels.template),l.interactionsEnabled=!1,l.truncate=!0,l.fullWords=!1;var d=new si;return d.margin(0,5,0,0),d.valign="middle",d.width=50,d.align="right",d.textAlign="end",d.applyOnClones=!0,d.states.create("active").properties.fill=o.getFor("disabledBackground"),d.interactionsEnabled=!1,e.valueLabels=new oi(d),e._disposers.push(new St(e.valueLabels)),e._disposers.push(e.valueLabels.template),e.position="bottom",r.states.create("active"),r.setStateOnChildren=!0,e.role="group",e.events.on("layoutvalidated",e.handleScrollbar,e,!1),e.events.on("parentset",function(){var u=e.parent;u&&e._disposers.push(u.events.on("maxsizechanged",function(){e.scrollable&&e.setTimeout(function(){e.updateMasks(),e.handleScrollbar(),e._handleWheelReal(1)},100)}))}),e.applyTheme(),e}return t.prototype.applyInternalDefaults=function(){i.prototype.applyInternalDefaults.call(this),T(this.readerTitle)||(this.readerTitle=this.language.translate("Legend"))},t.prototype.createDataItem=function(){return new DI},t.prototype.validateDataElements=function(){this.scrollbar&&(this.scrollbar.start=0,this.scrollbar.end=1),i.prototype.validateDataElements.call(this)},t.prototype.validateDataElement=function(e){i.prototype.validateDataElement.call(this,e);var r=e.itemContainer,o=e.marker;e.label;var n=e.valueLabel;r.readerChecked=e.dataContext.visible,e.dataContext.legendDataItem=e;var s=e.label.maxWidth;e.label.width instanceof Me||(e.label.width=void 0),s>0&&(e.label.maxWidth=s),n.align=="right"&&(n.width=void 0);var a=e.dataContext.legendSettings,l=e.dataContext;l.createLegendMarker&&(!this.useDefaultMarker||!(l instanceof Se))?e.childrenCreated||(l.createLegendMarker(o),e.childrenCreated=!0):this.markers.template.propertyFields.fill=void 0,l.updateLegendValue&&l.updateLegendValue(),l.component&&l.component.updateLegendValue&&l.component.updateLegendValue(l),n.invalid&&n.validate(),n.text==""||n.text==null?n.__disabled=!0:n.__disabled=!1,a&&(a.itemValueText!=null||a.valueText!=null)&&(n.__disabled=!1);var d=e.dataContext.visible;d===void 0&&(d=!0),d=ot(d),e.dataContext.visible=d,r.events.disableType("toggled"),r.isActive=!d,r.isActive?r.setState("active",0):r.setState("default",0),r.events.enableType("toggled")},t.prototype.afterDraw=function(){var e=this,r=this.getPropertyValue("maxWidth"),o=0;this.labels.each(function(c){c.invalid&&(c.maxWidth=void 0,c.validate()),c.measuredWidth+c.pixelMarginLeft+c.pixelMarginRight>o&&(o=c.measuredWidth+c.pixelMarginLeft+c.pixelMarginRight)});var n=0;this.valueLabels.each(function(c){c.invalid&&c.validate(),c.measuredWidth+c.pixelMarginLeft+c.pixelMarginRight>n&&(n=c.measuredWidth+c.pixelMarginLeft+c.pixelMarginRight)});var s=0;this.markers.each(function(c){c.invalid&&c.validate(),c.measuredWidth+c.pixelMarginLeft+c.pixelMarginRight>s&&(s=c.measuredWidth+c.pixelMarginLeft+c.pixelMarginRight)});var a=this.itemContainers.template,l=a.pixelMarginRight+a.pixelMarginLeft,d,u=o+n+s;M(r)?(r=r-l,r>u&&(r=u),d=r-s-n):d=o,this.labels.each(function(c){(e.valueLabels.template.align=="right"||c.measuredWidth>d)&&(c.width instanceof Me||(c.width=Math.min(c.maxWidth,d-c.pixelMarginLeft-c.pixelMarginRight),c.maxWidth=c.width))}),this.valueLabels.template.align=="right"&&this.valueLabels.each(function(c){c.width=n-c.pixelMarginRight-c.pixelMarginLeft}),i.prototype.afterDraw.call(this)},t.prototype.handleScrollbar=function(){var e=this.scrollbar;if(this.scrollable&&e){var r=this.maxHeight;e.height=r,e.x=this.measuredWidth-e.pixelWidth-e.pixelMarginLeft,this.contentHeight>r?(e.visible=!0,e.thumb.height=e.height*r/this.contentHeight,this.paddingRight=e.pixelWidth+e.pixelMarginLeft+e.pixelMarginRight):(e.thumb.height=e.height*r/this.contentHeight,this.paddingRight=e.pixelWidth+e.pixelMarginLeft+e.pixelMarginRight,e.visible=!1,e.start=0,e.end=1),e.handleThumbPosition(),this.updateMasks()}},Object.defineProperty(t.prototype,"position",{get:function(){return this.getPropertyValue("position")},set:function(e){this.setPropertyValue("position",e)&&(e=="left"||e=="right"?(this.margin(10,5,10,10),this.valign="middle",this.contentAlign="none",this.valueLabels.template.align="right",M(this.maxColumns)||(this.maxColumns=1),this.width=void 0,this.maxWidth=220):(this.maxColumns=void 0,this.width=ae(100),this.valueLabels.template.align="left"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useDefaultMarker",{get:function(){return this.getPropertyValue("useDefaultMarker")},set:function(e){this.setPropertyValue("useDefaultMarker",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollable",{get:function(){return this.getPropertyValue("scrollable")},set:function(e){if(this.setPropertyValue("scrollable",e,!0))if(e){var r=this.createChild(od);this.scrollbar=r,r.isMeasured=!1,r.orientation="vertical",r.endGrip.__disabled=!0,r.startGrip.__disabled=!0,r.visible=!1,r.marginLeft=5,this._mouseWheelDisposer=this.events.on("wheel",this.handleWheel,this,!1),this._disposers.push(this._mouseWheelDisposer),this._disposers.push(r.events.on("rangechanged",this.updateMasks,this,!1))}else this._mouseWheelDisposer&&(this._mouseWheelDisposer.dispose(),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=void 0))},enumerable:!0,configurable:!0}),t.prototype.handleWheel=function(e){this._handleWheelReal(e.shift.y)},t.prototype._handleWheelReal=function(e){var r=this.scrollbar;if(r){var o=e/1e3*this.measuredHeight/this.contentHeight,n=r.end-r.start;e>0?(r.start=ze(0,r.start-o),r.end=r.start+n):(r.end=st(1,r.end-o),r.start=r.end-n)}},t.prototype.updateMasks=function(){var e=this;this.scrollbar&&this.itemContainers.each(function(r){r.dy=-e.scrollbar.thumb.pixelY*e.contentHeight/e.maxHeight,r.maskRectangle={x:0,y:-r.dy,width:e.measuredWidth,height:e.maxHeight}}),this.invalidatePosition()},t.prototype.toggleDataItem=function(e){var r=e.dataContext;!r.visible||r.isHiding||r instanceof Se&&r.isHidden?(e.color=e.colorOrig,r.appeared=!0,e.itemContainer.isActive=!1,r.hidden===!0&&(r.hidden=!1),r.show?r.show():r.visible=!0,this.svgContainer.readerAlert(this.language.translate("%1 shown",this.language.locale,e.label.readerTitle))):(e.itemContainer.isActive=!0,r.appeared=!0,r.hide?r.hide():r.visible=!1,this.svgContainer.readerAlert(this.language.translate("%1 hidden",this.language.locale,e.label.readerTitle)),e.color=new Le().getFor("disabledBackground"))},Object.defineProperty(t.prototype,"preloader",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.handleDataItemPropertyChange=function(e,r){e.valueLabel.invalidate(),e.label.invalidate()},t}(En);P.registeredClasses.Legend=fg;Xi.push({relevant:zr.widthXS,state:function(i,t){if(i instanceof fg&&(i.position=="left"||i.position=="right")){var e=i.states.create(t);return e.properties.position="bottom",e}return null}});Xi.push({relevant:zr.heightXS,state:function(i,t){if(i instanceof fg&&(i.position=="top"||i.position=="bottom")){var e=i.states.create(t);return e.properties.position="right",e}return null}});Xi.push({relevant:zr.isXS,state:function(i,t){if(i instanceof fg){var e=i.states.create(t);return e.properties.disabled=!0,e}return null}});var mg=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="SeriesDataItem",e.values.value={},e.values.value={},e.applyTheme(),e}return Object.defineProperty(t.prototype,"bullets",{get:function(){return this._bullets||(this._bullets=new Be,this._disposers.push(new ao(this._bullets))),this._bullets},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.bullets.clear(),i.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"value",{get:function(){return this.values.value.value},set:function(e){this.setValue("value",e)},enumerable:!0,configurable:!0}),t}(xn);var sc=function(i){A(t,i);function t(){var e=i.call(this)||this;if(e._ignoreMinMax=!1,e._showBullets=!0,e.legendSettings=new x_,e._tmin=new Be,e._tmax=new Be,e._smin=new Be,e._smax=new Be,e.dataItemsByAxis=new Be,e.skipFocusThreshold=20,e._itemReaderTextChanged=!1,e.calculatePercent=!1,e.usePercentHack=!0,e.autoDispose=!0,e.simplifiedProcessing=!1,e.constructor===t)throw new Error("'Series' cannot be instantiated directly. Please use a specific series type.");e.className="Series",e.isMeasured=!1,e.layout="none",e.shouldClone=!1,e.setPropertyValue("hidden",!1),e.axisRanges=new Ie,e.axisRanges.events.on("inserted",e.processAxisRange,e,!1),e.minBulletDistance=0,e.mainContainer=e.createChild(_e),e.mainContainer.shouldClone=!1,e.mainContainer.mask=e.createChild(Se),e._disposers.push(e.mainContainer);var r=e.mainContainer.createChild(_e);return e._shouldBeReady.push(r),r.shouldClone=!1,r.layout="none",r.virtualParent=e,e._disposers.push(r),e.bulletsContainer=r,e.tooltip=new nd,e.tooltip.virtualParent=e,e._disposers.push(e.tooltip),e.hiddenState.transitionEasing=ev,e.dataItem=e.createDataItem(),e._disposers.push(e.dataItem),e.dataItem.component=e,e.role="group",e.applyTheme(),e}return t.prototype.applyTheme=function(){i.prototype.applyTheme.call(this),we.autoSetClassName&&this.bulletsContainer&&(this.bulletsContainer.className=this.className+"-bullets",this.bulletsContainer.setClassName())},t.prototype.applyInternalDefaults=function(){i.prototype.applyInternalDefaults.call(this),T(this.readerTitle)||(this.readerTitle=this.language.translate("Series"))},t.prototype.createDataItem=function(){return new mg},Object.defineProperty(t.prototype,"chart",{get:function(){return this._chart},set:function(e){this._chart=e},enumerable:!0,configurable:!0}),t.prototype.positionBullet=function(e){},t.prototype.processBullet=function(e){var r=this,o=e.newValue;o.isTemplate=!0,this.events.once("datavalidated",function(n){r.itemsFocusable()&&(o.focusable=!0)}),this.invalidate()},t.prototype.removeBullet=function(e){var r=e.oldValue;this.dataItems.each(function(o){var n=o.bullets.getKey(r.uid);n&&n.dispose()}),this.invalidate()},t.prototype.validateDataItems=function(){i.prototype.validateDataItems.call(this),this.processValues(!1)},t.prototype.getFirstValue=function(e,r){for(var o=r;o>=0;o--){var n=this.dataItems.getIndex(o),s=n.getActualWorkingValue(e);if(M(s))return s}return null},t.prototype.getAbsoluteFirstValue=function(e){for(var r=0;r<this.dataItems.length;r++){var o=this.dataItems.getIndex(r),n=o.values[e].value;if(M(n))return n}return null},t.prototype.rangeChangeUpdate=function(){i.prototype.rangeChangeUpdate.call(this),this.processValues(!0)},t.prototype.processValues=function(e){var r=this;if(!this.simplifiedProcessing){var o=this.dataItems,n={},s={},a={},l={},d={},u={},c={},h={},p={},f={},C=ze(0,this.startIndex);C=st(C,this.dataItems.length);var b=st(this.endIndex,this.dataItems.length);if(M(C)||(C=0),M(b)||(b=this.dataItems.length),C>0){var x=o.getIndex(C-1);ne(x.values,function(V,k){var G=x.getActualWorkingValue(V);M(G)&&(h[V]=G)})}for(var S=function(V){var k=o.getIndex(V);ne(k.values,function(G,ge){var le=k.getActualWorkingValue(G);if(M(le)){M(n[G])||(n[G]=0),n[G]++,M(s[G])||(s[G]=0),s[G]+=le,M(a[G])||(a[G]=0),a[G]+=Math.abs(le),M(u[G])||(u[G]=le),c[G]=le,M(l[G])?l[G]>le&&(l[G]=le):l[G]=le,M(d[G])?d[G]<le&&(d[G]=le):d[G]=le,M(p[G])||(p[G]=r.getFirstValue(G,C)),M(f[G])||(f[G]=r.getAbsoluteFirstValue(G)),k.setCalculatedValue(G,le-p[G],"change"),k.setCalculatedValue(G,(le-p[G])/p[G]*100,"changePercent"),k.setCalculatedValue(G,le-f[G],"startChange"),k.setCalculatedValue(G,(le-f[G])/f[G]*100,"startChangePercent");var Je=h[G];M(Je)||(Je=le),k.setCalculatedValue(G,le-Je,"previousChange"),k.setCalculatedValue(G,(le-Je)/Je*100,"previousChangePercent"),h[G]=le}})},R=C;R<b;R++)S(R);if(this.calculatePercent)for(var I=function(V){var k=o.getIndex(V);ne(k.values,function(G){var ge=a[G],le=k.getActualWorkingValue(G);if(M(le))if(ge>0){r.usePercentHack&&le==ge&&(ge=k.values[G].value);var Je=le/ge*100;k.setCalculatedValue(G,Je,"percent")}else k.setCalculatedValue(G,0,"percent")})},R=C;R<b;R++)I(R);if(C>0){var F=o.getIndex(C-1);ne(F.values,function(V){var k=F.values[V].value;F.setCalculatedValue(V,k-u[V],"change"),F.setCalculatedValue(V,(k-u[V])/u[V]*100,"changePercent")})}var L=this.dataItem;ne(L.values,function(V){L.setCalculatedValue(V,s[V],"sum"),L.setCalculatedValue(V,a[V],"absoluteSum"),L.setCalculatedValue(V,s[V]/n[V],"average"),L.setCalculatedValue(V,u[V],"open"),L.setCalculatedValue(V,c[V],"close"),L.setCalculatedValue(V,l[V],"low"),L.setCalculatedValue(V,d[V],"high"),L.setCalculatedValue(V,n[V],"count")})}},t.prototype.validate=function(){RS()&&this.filters.clear(),de(this.axisRanges.iterator(),function(n){n.validate()}),i.prototype.validate.call(this);var e=this.bulletsContainer;if(e.fill=this.fill,e.stroke=this.stroke,e.x=this.pixelX,e.y=this.pixelY,this.bulletsContainer.children.length>0)if(this._showBullets){for(var r=0;r<this.startIndex;r++){var o=this.dataItems.getIndex(r);o&&o.bullets.each(function(n,s){s.__disabled=!0})}for(var r=this.dataItems.length-1;r>this.endIndex;r--){var o=this.dataItems.getIndex(r);o&&o.bullets.each(function(a,l){l.__disabled=!0})}}else this.bulletsContainer.children.each(function(n){n.__disabled=!0});this.updateTooltipBounds()},t.prototype.updateTooltipBounds=function(){if(this.topParent){var e=0,r=0,o=this.topParent.maxWidth,n=this.topParent.maxHeight,s={x:e,y:r,width:o,height:n};this.tooltip.setBounds(s)}},t.prototype.shouldCreateBullet=function(e,r){return!0},t.prototype.validateDataElement=function(e){var r=this;i.prototype.validateDataElement.call(this,e),this._showBullets?(this.isHidden||(this.bulletsContainer.visible=!0),this.bullets.each(function(o){var n=e.bullets.getKey(o.uid);if(r.shouldCreateBullet(e,o)){if(!n){var s=o.propertyFields.disabled,a=e.dataContext;s&&a&&a[s]===!1?(o.applyOnClones=!1,o.disabled=!1,n=o.clone(),o.disabled=!0,o.applyOnClones=!0):n=o.clone(),n.shouldClone=!1,e.addSprite(n),(!r.visible||r.isHiding)&&n.hide(0)}var l=n.dataItem;if(l!=e){l&&l.bullets.setKey(o.uid,void 0);var d=r.itemReaderText;n instanceof nc&&(d||(d="{"+n.xField+"}: {"+n.yField+"}"),n.isDynamic&&(e.events.on("workingvaluechanged",n.deepInvalidate,n,!1),r.dataItem.events.on("workingvaluechanged",n.deepInvalidate,n,!1)),n.deepInvalidate()),n.focusable&&(n.events.on("focus",function(u){n.readerTitle=r.populateString(d,n.dataItem)},void 0,!1),n.events.on("blur",function(u){n.readerTitle=""},void 0,!1)),n.hoverable&&(n.events.on("over",function(u){n.readerTitle=r.populateString(d,n.dataItem)},void 0,!1),n.events.on("out",function(u){n.readerTitle=""},void 0,!1))}n.parent=r.bulletsContainer,e.bullets.setKey(o.uid,n),n.maxWidth=e.itemWidth,n.maxHeight=e.itemHeight,n.__disabled=!1,r.positionBullet(n)}else n&&(n.__disabled=!0)})):this.bulletsContainer.visible=!1},t.prototype.handleDataItemWorkingValueChange=function(e,r){this.dataRangeInvalid||this.invalidateProcessedData()},Object.defineProperty(t.prototype,"ignoreMinMax",{get:function(){return this._ignoreMinMax},set:function(e){this._ignoreMinMax=e,this.invalidateDataItems()},enumerable:!0,configurable:!0}),t.prototype.createMask=function(){},t.prototype.processAxisRange=function(e){this.rangesContainer||(this.rangesContainer=this.createChild(_e),this.rangesContainer.shouldClone=!1,this.rangesContainer.isMeasured=!1);var r=e.newValue;r&&(r.contents.parent=this.rangesContainer,r.isRange=!0,r.events.on("valuechanged",this.invalidateDataItems,this,!1))},t.prototype.getAxisField=function(e){},t.prototype.showTooltipAtPosition=function(e,r){},Object.defineProperty(t.prototype,"minBulletDistance",{get:function(){return this.getPropertyValue("minBulletDistance")},set:function(e){this.setPropertyValue("minBulletDistance",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bullets",{get:function(){return this._bullets||(this._bullets=new oi(new nc),this._bullets.template.virtualParent=this,this._bullets.events.on("inserted",this.processBullet,this,!1),this._bullets.events.on("removed",this.removeBullet,this,!1),this._disposers.push(new St(this._bullets)),this._disposers.push(this._bullets.template)),this._bullets},enumerable:!0,configurable:!0}),t.prototype.createLegendMarker=function(e){},Object.defineProperty(t.prototype,"hiddenInLegend",{get:function(){return this.getPropertyValue("hiddenInLegend")},set:function(e){this.setPropertyValue("hiddenInLegend",e)&&this.chart&&this.chart.feedLegend()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.getPropertyValue("name")},set:function(e){this.setPropertyValue("name",e);var r=this.legendDataItem;r&&(r.component.invalidate(),r.component.invalidateRawData()),this.readerTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemReaderText",{get:function(){var e=this._itemReaderText;return e||(this.tooltipText?e=Ou(this.tooltipText):this.tooltipHTML&&(e=Ou(this.tooltipHTML))),this._adapterO?this._adapterO.apply("itemReaderText",e):e},set:function(e){this._itemReaderText=e,this._itemReaderTextChanged=!0},enumerable:!0,configurable:!0}),t.prototype.itemsFocusable=function(){return!(this.dataItems.length>=this.skipFocusThreshold)},Object.defineProperty(t.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(e){this._legendDataItem=e,this._legendDataItem.itemContainer.deepInvalidate()},enumerable:!0,configurable:!0}),t.prototype.updateLegendValue=function(e,r){if(this.legendDataItem){var o=this.legendSettings,n=this.legendDataItem,s=n.label,a=n.valueLabel;e&&!e.isDisposed()||r?(a&&(o.itemValueText&&(a.text=o.itemValueText),a.dataItem=e),s&&(o.itemLabelText&&(s.text=o.itemLabelText),s.dataItem=e)):(s&&((o.labelText||o.itemLabelText!=null)&&(s.text=o.labelText),s.dataItem=this.dataItem),a&&((o.valueText||o.itemValueText!=null)&&(a.text=o.valueText),a.dataItem=this.dataItem))}},t.prototype.copyFrom=function(e){this.bullets.copyFrom(e.bullets),this.bulletsContainer.copyFrom(e.bulletsContainer),this.calculatePercent=e.calculatePercent,this.usePercentHack=e.usePercentHack,this.simplifiedProcessing=e.simplifiedProcessing,i.prototype.copyFrom.call(this,e)},t.prototype.raiseCriticalError=function(e){this._chart&&this._chart.modal&&(this._chart.modal.content=this._chart.adapter.apply("criticalError",e).message,this._chart.modal.closable=!1,we.suppressErrors||this._chart.modal.open(),this._chart.disabled=!0),we.verbose&&console.log(e)},t.prototype.applyFilters=function(){var e=this;i.prototype.applyFilters.call(this),this.bulletsContainer.filters.clear(),de(this.filters.iterator(),function(r){e.bulletsContainer.filters.push(r.clone())})},Object.defineProperty(t.prototype,"heatRules",{get:function(){var e=this;return this._heatRules||(this._heatRules=new Ie,this._heatRules.events.on("inserted",function(r){var o=r.newValue,n=o.target;if(n){var s=o.dataField;T(s)||(s="value");var a=e.dataItem,l=o.property,d=Xe(o.minValue),u=Xe(o.maxValue);!M(d)&&!M(u)&&e.dataItem.events.on("calculatedvaluechanged",function(c){c.property==s&&de(e.dataItems.iterator(),function(h){var p=!1;Z(h.sprites,function(f){if(f.clonedFrom==n){var C=f;C[l]=C[l],p=!0}}),p||Z(h.sprites,function(f){f instanceof _e&&de(f.children.iterator(),function(C){if(C.className==n.className){var b=C;b[l]=b[l]}else C instanceof _e&&C.deepInvalidate()})})})}),e.dataItems.template.events.on("workingvaluechanged",function(c){if(c.property==s){var h=c.target,p=!1;Z(h.sprites,function(f){if(f.clonedFrom==n){var C=f;C[l]=C[l],p=!0}}),p||Z(h.sprites,function(f){f instanceof _e&&de(f.children.iterator(),function(C){if(C.className==n.className){var b=C;b[l]=b[l]}else C instanceof _e&&C.deepInvalidate()})})}}),n.adapter.add(l,function(c,h,p){var f=Xe(o.minValue),C=Xe(o.maxValue),b=o.min,x=o.max;if(h instanceof Se){var S=h,R=S.propertyFields[p];if(R&&h.dataItem){var I=h.dataItem.dataContext;if(I&&T(I[R]))return c}}var F=h.dataItem;if(M(f)||(f=a.values[s].low),M(C)||(C=a.values[s].high),F){var L=F.values[s];if(L){var V=F.getActualWorkingValue(s);if(T(b)&&T(x)&&M(f)&&M(C)&&M(V)){var k=void 0;if(o.logarithmic?k=(Math.log(V)*Math.LOG10E-Math.log(f)*Math.LOG10E)/(Math.log(C)*Math.LOG10E-Math.log(f)*Math.LOG10E):k=(V-f)/(C-f),M(V)&&(!M(k)||Math.abs(k)==1/0)&&(k=.5),M(b))return b+(x-b)*k;if(b instanceof Ue)return new Ue(Fp(b.rgb,x.rgb,k))}}}return c})}})),this._heatRules},enumerable:!0,configurable:!0}),t.prototype.processConfig=function(e){var r;if(e){if(T(e.bullets)&&jt(e.bullets))for(var o=0,n=e.bullets.length;o<n;o++){var s=e.bullets[o];T(s.type)||(s.type="Bullet")}T(e.heatRules)&&jt(e.heatRules)&&(r=e.heatRules,delete e.heatRules)}if(i.prototype.processConfig.call(this,e),r){for(var o=0,n=r.length;o<n;o++){var a=r[o],l=this;if(T(a.target)&&je(a.target))if(this.map.hasKey(a.target))l=this.map.getKey(a.target);else for(var d=a.target.split("."),u=0;u<d.length;u++)if(l instanceof Ie){var c=l.getIndex(Xe(d[u]));c?l=c:l=l[d[u]]}else{var h=d[u].match(/^(.*)\[([0-9]+)\]/);h?l[h[1]]instanceof Ie?l=l[h[1]].getIndex(Xe(h[2])):l=l[h[1]][Xe(h[2])]:l=l[d[u]]}a.target=l,T(a.min)&&(a.min=this.maybeColorOrPercent(a.min)),T(a.max)&&(a.max=this.maybeColorOrPercent(a.max))}i.prototype.processConfig.call(this,{heatRules:r})}},t.prototype.configOrder=function(e,r){return e==r?0:e=="heatRules"?1:r=="heatRules"?-1:i.prototype.configOrder.call(this,e,r)},t.prototype.setVisibility=function(e){i.prototype.setVisibility.call(this,e),this.bulletsContainer.visible=e},t}(En);P.registeredClasses.Series=sc;P.registeredClasses.SeriesDataItem=mg;var E_=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.className="SerialChartDataItem",e.applyTheme(),e}return t}(__);var kv=function(i){A(t,i);function t(){var e=i.call(this)||this;e._exitDP={},e.className="SerialChart",e.colors=new ad,e._usesData=!1;var r=e.chartContainer.createChild(_e);r.shouldClone=!1,r.width=ae(100),r.height=ae(100),r.isMeasured=!1,r.layout="none",r.zIndex=2,e.seriesContainer=r;var o=e.chartContainer.createChild(_e);return o.shouldClone=!1,o.width=ae(100),o.height=ae(100),o.isMeasured=!1,o.zIndex=3,o.layout="none",e.bulletsContainer=o,e.applyTheme(),e}return t.prototype.dispose=function(){i.prototype.dispose.call(this),this.colors&&this.colors.dispose(),this.patterns&&this.patterns.dispose()},t.prototype.applyInternalDefaults=function(){i.prototype.applyInternalDefaults.call(this),T(this.readerTitle)||(this.readerTitle=this.language.translate("Serial chart"))},Object.defineProperty(t.prototype,"series",{get:function(){return this._series||(this._series=new oi(this.createSeries()),this._series.events.on("inserted",this.handleSeriesAdded,this,!1),this._series.events.on("removed",this.handleSeriesRemoved,this,!1),this._disposers.push(new St(this._series,!1)),this._disposers.push(this._series.template)),this._series},enumerable:!0,configurable:!0}),t.prototype.handleSeriesRemoved=function(e){var r=e.oldValue;this.dataUsers.removeValue(r),this.dataUsers.each(function(d){d.invalidateDataItems()}),this._exitDP[r.uid]&&(this._exitDP[r.uid].dispose(),delete this._exitDP[r.uid]),r.autoDispose?r.dispose():(r.parent=void 0,r.bulletsContainer.parent=void 0);var o=this.legend;if(o){for(var n=this.legend.dataItems,s=n.length-1;s>=0;s--){var a=n.getIndex(s);a&&a.dataContext==r&&o.dataItems.remove(a)}for(var s=o.data.length-1;s>=0;s--){var l=o.data[s];l&&l==r&&ve(o.data,l)}}},t.prototype.handleSeriesAdded=function(e){var r=this,o=e.newValue;o.isDisposed()||(o.chart=this,o.parent=this.seriesContainer,o.bulletsContainer.parent=this.bulletsContainer,this._dataUsers.moveValue(o),o.addDisposer(new Ke(function(){r.dataUsers.removeValue(o)})),this.handleSeriesAdded2(o),this.handleLegendSeriesAdded(o))},t.prototype.handleLegendSeriesAdded=function(e){e.hiddenInLegend||this.legend&&this.legend.addData(e)},t.prototype.handleSeriesAdded2=function(e){var r=this;this.dataInvalid||(this._exitDP[e.uid]=P.events.once("exitframe",function(){(!e.data||e.data.length==0)&&(e.data=r.data,e.showOnInit&&(e.reinit(),e.setPropertyValue("showOnInit",!1),e.showOnInit=!0),e.isDisposed()||e.events.once("datavalidated",function(){e.data==r.data&&(e._data=[])}))}),this._disposers.push(this._exitDP[e.uid]))},t.prototype.feedLegend=function(){var e=this.legend;if(e){var r=[];de(this.series.iterator(),function(o){o.hiddenInLegend||r.push(o)}),e.dataFields.name="name",e.data=r}},t.prototype.createSeries=function(){return new sc},Object.defineProperty(t.prototype,"colors",{get:function(){return this.getPropertyValue("colors")},set:function(e){this.setPropertyValue("colors",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"patterns",{get:function(){return this.getPropertyValue("patterns")},set:function(e){this.setPropertyValue("patterns",e,!0)},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(e){i.prototype.copyFrom.call(this,e),this.series.copyFrom(e.series)},t.prototype.appear=function(){i.prototype.appear.call(this),this.series.each(function(e){e.showOnInit&&e.inited&&e.appear()})},t}(Ta);P.registeredClasses.SerialChart=kv;var ac=function(i){A(t,i);function t(){var e=i.call(this)||this;e.className="ForceDirectedNode",e.applyOnClones=!0,e.togglable=!0,e.draggable=!0,e.setStateOnChildren=!0,e.isActive=!1,e.expandAll=!0,e.paddingRadius=0,e.linksWith=new Be,e._disposers.push(new ao(e.linksWith)),e.events.on("dragstart",function(){e.dataItem.component&&e.dataItem.component.nodeDragStarted()},e,!1),e.events.on("drag",function(){e.updateSimulation()},e,!1);var r=e.createChild(Lo);r.shouldClone=!1,r.strokeWidth=2,r.nonScalingStroke=!0;var o=new Le().getFor("background");r.fill=o,e.outerCircle=r;var n=r.states.create("hover");n.properties.scale=1.1;var s=r.states.create("active");s.properties.scale=1.1,s.properties.visible=!0;var a=r.states.create("hoverActive");a.properties.scale=1;var l=e.createChild(Lo),d=l.states.create("active");d.properties.visible=!0,l.shouldClone=!1,l.interactionsEnabled=!1,l.hiddenState.properties.radius=.01,l.events.on("validated",e.updateSimulation,e,!1),l.hiddenState.properties.visible=!0,e.circle=l,e.addDisposer(l.events.on("validated",e.updateLabelSize,e,!1)),e._disposers.push(e.circle);var u=e.createChild(si);return u.shouldClone=!1,u.horizontalCenter="middle",u.verticalCenter="middle",u.fill=o,u.strokeOpacity=0,u.interactionsEnabled=!1,u.textAlign="middle",u.textValign="middle",u.nonScaling=!0,e.label=u,e.adapter.add("tooltipY",function(c,h){return-h.circle.pixelRadius}),e}return t.prototype.updateLabelSize=function(){if(this.label.text){var e=this.circle,r=e.pixelRadius,o=e.defaultState,n=o.properties.radius;M(n)&&(r=n);var s=1;this.parent&&this.parent.parent&&(s=this.parent.parent.scale),this.label.width=2*r*s,this.label.height=2*r*s}},t.prototype.copyFrom=function(e){i.prototype.copyFrom.call(this,e),this.circle&&this.circle.copyFrom(e.circle),this.label&&this.label.copyFrom(e.label),this.outerCircle&&this.outerCircle.copyFrom(e.outerCircle)},t.prototype.setActive=function(e){var r=this;i.prototype.setActive.call(this,e);var o=this.dataItem;if(o){var n=o.children,s=o.component;s.dataItemsInvalid||(e&&n&&!o.childrenInited&&(s.initNode(o),s.updateNodeList()),e?(this.show(),n&&n.each(function(a){a.node.show(),a.node.interactionsEnabled=!0,a.parentLink&&a.parentLink.show(),r.expandAll?a.node.isActive=!0:a.node.isActive=!1}),o.dispatchVisibility(!0)):(n&&n.each(function(a){a.parentLink&&a.parentLink.hide(),a.node.isActive=!1,a.node.interactionsEnabled=!1,a.node.hide()}),o.dispatchVisibility(!1)))}this.updateSimulation()},t.prototype.updateSimulation=function(){var e=this.dataItem;e&&e.component&&e.component.restartSimulation()},Object.defineProperty(t.prototype,"expandAll",{get:function(){return this.getPropertyValue("expandAll")},set:function(e){this.setPropertyValue("expandAll",e)},enumerable:!0,configurable:!0}),t.prototype.linkWith=function(e,r){var o=this.linksWith.getKey(e.uid);if(o||(o=e.linksWith.getKey(this.uid)),!o){var n=this.dataItem,s=n.component;o=s.links.create(),o.parent=s,o.zIndex=-1,o.source=this,o.target=e,o.stroke=n.node.fill,o.dataItem=e.dataItem,M(r)&&(o.strength=r);var a=s.nodes.indexOf(n.node),l=s.nodes.indexOf(e);e.dataItem.childLinks.push(o),e.linksWith.setKey(this.uid,o),s.forceLinks.push({source:a,target:l}),s.updateNodeList(),n.childLinks.push(o),this.linksWith.setKey(e.uid,o)}return o},t.prototype.unlinkWith=function(e){this.linksWith.removeKey(e.uid)},Object.defineProperty(t.prototype,"paddingRadius",{get:function(){return this.getPropertyValue("paddingRadius")},set:function(e){this.setPropertyValue("paddingRadius",e)},enumerable:!0,configurable:!0}),t}(_e);P.registeredClasses.ForceDirectedNode=ac;function D_(i){let t=+this._x.call(null,i),e=+this._y.call(null,i);return T_(this.cover(t,e),t,e,i)}function T_(i,t,e,r){if(isNaN(t)||isNaN(e))return i;var o,n=i._root,s={data:r},a=i._x0,l=i._y0,d=i._x1,u=i._y1,c,h,p,f,C,b,x,S;if(!n)return i._root=s,i;for(;n.length;)if((C=t>=(c=(a+d)/2))?a=c:d=c,(b=e>=(h=(l+u)/2))?l=h:u=h,o=n,!(n=n[x=b<<1|C]))return o[x]=s,i;if(p=+i._x.call(null,n.data),f=+i._y.call(null,n.data),t===p&&e===f)return s.next=n,o?o[x]=s:i._root=s,i;do o=o?o[x]=new Array(4):i._root=new Array(4),(C=t>=(c=(a+d)/2))?a=c:d=c,(b=e>=(h=(l+u)/2))?l=h:u=h;while((x=b<<1|C)===(S=(f>=h)<<1|p>=c));return o[S]=n,o[x]=s,i}function P_(i){var t,e,r=i.length,o,n,s=new Array(r),a=new Array(r),l=1/0,d=1/0,u=-1/0,c=-1/0;for(e=0;e<r;++e)isNaN(o=+this._x.call(null,t=i[e]))||isNaN(n=+this._y.call(null,t))||(s[e]=o,a[e]=n,o<l&&(l=o),o>u&&(u=o),n<d&&(d=n),n>c&&(c=n));if(l>u||d>c)return this;for(this.cover(l,d).cover(u,c),e=0;e<r;++e)T_(this,s[e],a[e],i[e]);return this}function R_(i,t){if(isNaN(i=+i)||isNaN(t=+t))return this;var e=this._x0,r=this._y0,o=this._x1,n=this._y1;if(isNaN(e))o=(e=Math.floor(i))+1,n=(r=Math.floor(t))+1;else{for(var s=o-e||1,a=this._root,l,d;e>i||i>=o||r>t||t>=n;)switch(d=(t<r)<<1|i<e,l=new Array(4),l[d]=a,a=l,s*=2,d){case 0:o=e+s,n=r+s;break;case 1:e=o-s,n=r+s;break;case 2:o=e+s,r=n-s;break;case 3:e=o-s,r=n-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=e,this._y0=r,this._x1=o,this._y1=n,this}function M_(){var i=[];return this.visit(function(t){if(!t.length)do i.push(t.data);while(t=t.next)}),i}function I_(i){return arguments.length?this.cover(+i[0][0],+i[0][1]).cover(+i[1][0],+i[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function zi(i,t,e,r,o){this.node=i,this.x0=t,this.y0=e,this.x1=r,this.y1=o}function F_(i,t,e){var r,o=this._x0,n=this._y0,s,a,l,d,u=this._x1,c=this._y1,h=[],p=this._root,f,C;for(p&&h.push(new zi(p,o,n,u,c)),e==null?e=1/0:(o=i-e,n=t-e,u=i+e,c=t+e,e*=e);f=h.pop();)if(!(!(p=f.node)||(s=f.x0)>u||(a=f.y0)>c||(l=f.x1)<o||(d=f.y1)<n))if(p.length){var b=(s+l)/2,x=(a+d)/2;h.push(new zi(p[3],b,x,l,d),new zi(p[2],s,x,b,d),new zi(p[1],b,a,l,x),new zi(p[0],s,a,b,x)),(C=(t>=x)<<1|i>=b)&&(f=h[h.length-1],h[h.length-1]=h[h.length-1-C],h[h.length-1-C]=f)}else{var S=i-+this._x.call(null,p.data),R=t-+this._y.call(null,p.data),I=S*S+R*R;if(I<e){var F=Math.sqrt(e=I);o=i-F,n=t-F,u=i+F,c=t+F,r=p.data}}return r}function z_(i){if(isNaN(u=+this._x.call(null,i))||isNaN(c=+this._y.call(null,i)))return this;var t,e=this._root,r,o,n,s=this._x0,a=this._y0,l=this._x1,d=this._y1,u,c,h,p,f,C,b,x;if(!e)return this;if(e.length)for(;;){if((f=u>=(h=(s+l)/2))?s=h:l=h,(C=c>=(p=(a+d)/2))?a=p:d=p,t=e,!(e=e[b=C<<1|f]))return this;if(!e.length)break;(t[b+1&3]||t[b+2&3]||t[b+3&3])&&(r=t,x=b)}for(;e.data!==i;)if(o=e,!(e=e.next))return this;return(n=e.next)&&delete e.next,o?(n?o.next=n:delete o.next,this):t?(n?t[b]=n:delete t[b],(e=t[0]||t[1]||t[2]||t[3])&&e===(t[3]||t[2]||t[1]||t[0])&&!e.length&&(r?r[x]=e:this._root=e),this):(this._root=n,this)}function A_(i){for(var t=0,e=i.length;t<e;++t)this.remove(i[t]);return this}function O_(){return this._root}function L_(){var i=0;return this.visit(function(t){if(!t.length)do++i;while(t=t.next)}),i}function N_(i){var t=[],e,r=this._root,o,n,s,a,l;for(r&&t.push(new zi(r,this._x0,this._y0,this._x1,this._y1));e=t.pop();)if(!i(r=e.node,n=e.x0,s=e.y0,a=e.x1,l=e.y1)&&r.length){var d=(n+a)/2,u=(s+l)/2;(o=r[3])&&t.push(new zi(o,d,u,a,l)),(o=r[2])&&t.push(new zi(o,n,u,d,l)),(o=r[1])&&t.push(new zi(o,d,s,a,u)),(o=r[0])&&t.push(new zi(o,n,s,d,u))}return this}function k_(i){var t=[],e=[],r;for(this._root&&t.push(new zi(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var o=r.node;if(o.length){var n,s=r.x0,a=r.y0,l=r.x1,d=r.y1,u=(s+l)/2,c=(a+d)/2;(n=o[0])&&t.push(new zi(n,s,a,u,c)),(n=o[1])&&t.push(new zi(n,u,a,l,c)),(n=o[2])&&t.push(new zi(n,s,c,u,d)),(n=o[3])&&t.push(new zi(n,u,c,l,d))}e.push(r)}for(;r=e.pop();)i(r.node,r.x0,r.y0,r.x1,r.y1);return this}function V_(i){return i[0]}function G_(i){return arguments.length?(this._x=i,this):this._x}function H_(i){return i[1]}function B_(i){return arguments.length?(this._y=i,this):this._y}function Pa(i,t,e){var r=new Vv(t??V_,e??H_,NaN,NaN,NaN,NaN);return i==null?r:r.addAll(i)}function Vv(i,t,e,r,o,n){this._x=i,this._y=t,this._x0=e,this._y0=r,this._x1=o,this._y1=n,this._root=void 0}function $_(i){for(var t={data:i.data},e=t;i=i.next;)e=e.next={data:i.data};return t}var ar=Pa.prototype=Vv.prototype;ar.copy=function(){var i=new Vv(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,e,r;if(!t)return i;if(!t.length)return i._root=$_(t),i;for(e=[{source:t,target:i._root=new Array(4)}];t=e.pop();)for(var o=0;o<4;++o)(r=t.source[o])&&(r.length?e.push({source:r,target:t.target[o]=new Array(4)}):t.target[o]=$_(r));return i};ar.add=D_;ar.addAll=P_;ar.cover=R_;ar.data=M_;ar.extent=I_;ar.find=F_;ar.remove=z_;ar.removeAll=A_;ar.root=O_;ar.size=L_;ar.visit=N_;ar.visitAfter=k_;ar.x=G_;ar.y=B_;function Ci(i){return function(){return i}}function No(i){return(i()-.5)*1e-6}function TI(i){return i.x+i.vx}function PI(i){return i.y+i.vy}function Gv(i){var t,e,r,o=1,n=1;typeof i!="function"&&(i=Ci(i==null?1:+i));function s(){for(var d,u=t.length,c,h,p,f,C,b,x=0;x<n;++x)for(c=Pa(t,TI,PI).visitAfter(a),d=0;d<u;++d)h=t[d],C=e[h.index],b=C*C,p=h.x+h.vx,f=h.y+h.vy,c.visit(S);function S(R,I,F,L,V){var k=R.data,G=R.r,ge=C+G;if(k){if(k.index>h.index){var le=p-k.x-k.vx,Je=f-k.y-k.vy,Ne=le*le+Je*Je;Ne<ge*ge&&(le===0&&(le=No(r),Ne+=le*le),Je===0&&(Je=No(r),Ne+=Je*Je),Ne=(ge-(Ne=Math.sqrt(Ne)))/Ne*o,h.vx+=(le*=Ne)*(ge=(G*=G)/(b+G)),h.vy+=(Je*=Ne)*ge,k.vx-=le*(ge=1-ge),k.vy-=Je*ge)}return}return I>p+ge||L<p-ge||F>f+ge||V<f-ge}}function a(d){if(d.data)return d.r=e[d.data.index];for(var u=d.r=0;u<4;++u)d[u]&&d[u].r>d.r&&(d.r=d[u].r)}function l(){if(t){var d,u=t.length,c;for(e=new Array(u),d=0;d<u;++d)c=t[d],e[c.index]=+i(c,d,t)}}return s.initialize=function(d,u){t=d,r=u,l()},s.iterations=function(d){return arguments.length?(n=+d,s):n},s.strength=function(d){return arguments.length?(o=+d,s):o},s.radius=function(d){return arguments.length?(i=typeof d=="function"?d:Ci(+d),l(),s):i},s}function RI(i){return i.index}function W_(i,t){var e=i.get(t);if(!e)throw new Error("node not found: "+t);return e}function Hv(i){var t=RI,e=c,r,o=Ci(30),n,s,a,l,d,u=1;i==null&&(i=[]);function c(b){return 1/Math.min(a[b.source.index],a[b.target.index])}function h(b){for(var x=0,S=i.length;x<u;++x)for(var R=0,I,F,L,V,k,G,ge;R<S;++R)I=i[R],F=I.source,L=I.target,V=L.x+L.vx-F.x-F.vx||No(d),k=L.y+L.vy-F.y-F.vy||No(d),G=Math.sqrt(V*V+k*k),G=(G-n[R])/G*b*r[R],V*=G,k*=G,L.vx-=V*(ge=l[R]),L.vy-=k*ge,F.vx+=V*(ge=1-ge),F.vy+=k*ge}function p(){if(s){var b,x=s.length,S=i.length,R=new Map(s.map((F,L)=>[t(F,L,s),F])),I;for(b=0,a=new Array(x);b<S;++b)I=i[b],I.index=b,typeof I.source!="object"&&(I.source=W_(R,I.source)),typeof I.target!="object"&&(I.target=W_(R,I.target)),a[I.source.index]=(a[I.source.index]||0)+1,a[I.target.index]=(a[I.target.index]||0)+1;for(b=0,l=new Array(S);b<S;++b)I=i[b],l[b]=a[I.source.index]/(a[I.source.index]+a[I.target.index]);r=new Array(S),f(),n=new Array(S),C()}}function f(){if(s)for(var b=0,x=i.length;b<x;++b)r[b]=+e(i[b],b,i)}function C(){if(s)for(var b=0,x=i.length;b<x;++b)n[b]=+o(i[b],b,i)}return h.initialize=function(b,x){s=b,d=x,p()},h.links=function(b){return arguments.length?(i=b,p(),h):i},h.id=function(b){return arguments.length?(t=b,h):t},h.iterations=function(b){return arguments.length?(u=+b,h):u},h.strength=function(b){return arguments.length?(e=typeof b=="function"?b:Ci(+b),f(),h):e},h.distance=function(b){return arguments.length?(o=typeof b=="function"?b:Ci(+b),C(),h):o},h}var MI={value:()=>{}};function U_(){for(var i=0,t=arguments.length,e={},r;i<t;++i){if(!(r=arguments[i]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new vg(e)}function vg(i){this._=i}function II(i,t){return i.trim().split(/^|\s+/).map(function(e){var r="",o=e.indexOf(".");if(o>=0&&(r=e.slice(o+1),e=e.slice(0,o)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}vg.prototype=U_.prototype={constructor:vg,on:function(i,t){var e=this._,r=II(i+"",e),o,n=-1,s=r.length;if(arguments.length<2){for(;++n<s;)if((o=(i=r[n]).type)&&(o=FI(e[o],i.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++n<s;)if(o=(i=r[n]).type)e[o]=j_(e[o],i.name,t);else if(t==null)for(o in e)e[o]=j_(e[o],i.name,null);return this},copy:function(){var i={},t=this._;for(var e in t)i[e]=t[e].slice();return new vg(i)},call:function(i,t){if((o=arguments.length-2)>0)for(var e=new Array(o),r=0,o,n;r<o;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(n=this._[i],r=0,o=n.length;r<o;++r)n[r].value.apply(t,e)},apply:function(i,t,e){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var r=this._[i],o=0,n=r.length;o<n;++o)r[o].value.apply(t,e)}};function FI(i,t){for(var e=0,r=i.length,o;e<r;++e)if((o=i[e]).name===t)return o.value}function j_(i,t,e){for(var r=0,o=i.length;r<o;++r)if(i[r].name===t){i[r]=MI,i=i.slice(0,r).concat(i.slice(r+1));break}return e!=null&&i.push({name:t,value:e}),i}var Bv=U_;var ld=0,dc=0,lc=0,K_=1e3,yg,uc,Cg=0,Ra=0,bg=0,cc=typeof performance=="object"&&performance.now?performance:Date,Y_=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function jv(){return Ra||(Y_(zI),Ra=cc.now()+bg)}function zI(){Ra=0}function $v(){this._call=this._time=this._next=null}$v.prototype=wg.prototype={constructor:$v,restart:function(i,t,e){if(typeof i!="function")throw new TypeError("callback is not a function");e=(e==null?jv():+e)+(t==null?0:+t),!this._next&&uc!==this&&(uc?uc._next=this:yg=this,uc=this),this._call=i,this._time=e,Wv()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wv())}};function wg(i,t,e){var r=new $v;return r.restart(i,t,e),r}function X_(){jv(),++ld;for(var i=yg,t;i;)(t=Ra-i._time)>=0&&i._call.call(void 0,t),i=i._next;--ld}function q_(){Ra=(Cg=cc.now())+bg,ld=dc=0;try{X_()}finally{ld=0,OI(),Ra=0}}function AI(){var i=cc.now(),t=i-Cg;t>K_&&(bg-=t,Cg=i)}function OI(){for(var i,t=yg,e,r=1/0;t;)t._call?(r>t._time&&(r=t._time),i=t,t=t._next):(e=t._next,t._next=null,t=i?i._next=e:yg=e);uc=i,Wv(r)}function Wv(i){if(!ld){dc&&(dc=clearTimeout(dc));var t=i-Ra;t>24?(i<1/0&&(dc=setTimeout(q_,i-cc.now()-bg)),lc&&(lc=clearInterval(lc))):(lc||(Cg=cc.now(),lc=setInterval(AI,K_)),ld=1,Y_(q_))}}function Q_(){let i=1;return()=>(i=(1664525*i+1013904223)%4294967296)/4294967296}function Z_(i){return i.x}function J_(i){return i.y}var LI=10,NI=Math.PI*(3-Math.sqrt(5));function Uv(i){var t,e=1,r=.001,o=1-Math.pow(r,1/300),n=0,s=.6,a=new Map,l=wg(c),d=Bv("tick","end"),u=Q_();i==null&&(i=[]);function c(){h(),d.call("tick",t),e<r&&(l.stop(),d.call("end",t))}function h(C){var b,x=i.length,S;C===void 0&&(C=1);for(var R=0;R<C;++R)for(e+=(n-e)*o,a.forEach(function(I){I(e)}),b=0;b<x;++b)S=i[b],S.fx==null?S.x+=S.vx*=s:(S.x=S.fx,S.vx=0),S.fy==null?S.y+=S.vy*=s:(S.y=S.fy,S.vy=0);return t}function p(){for(var C=0,b=i.length,x;C<b;++C){if(x=i[C],x.index=C,x.fx!=null&&(x.x=x.fx),x.fy!=null&&(x.y=x.fy),isNaN(x.x)||isNaN(x.y)){var S=LI*Math.sqrt(.5+C),R=C*NI;x.x=S*Math.cos(R),x.y=S*Math.sin(R)}(isNaN(x.vx)||isNaN(x.vy))&&(x.vx=x.vy=0)}}function f(C){return C.initialize&&C.initialize(i,u),C}return p(),t={tick:h,restart:function(){return l.restart(c),t},stop:function(){return l.stop(),t},nodes:function(C){return arguments.length?(i=C,p(),a.forEach(f),t):i},alpha:function(C){return arguments.length?(e=+C,t):e},alphaMin:function(C){return arguments.length?(r=+C,t):r},alphaDecay:function(C){return arguments.length?(o=+C,t):+o},alphaTarget:function(C){return arguments.length?(n=+C,t):n},velocityDecay:function(C){return arguments.length?(s=1-C,t):1-s},randomSource:function(C){return arguments.length?(u=C,a.forEach(f),t):u},force:function(C,b){return arguments.length>1?(b==null?a.delete(C):a.set(C,f(b)),t):a.get(C)},find:function(C,b,x){var S=0,R=i.length,I,F,L,V,k;for(x==null?x=1/0:x*=x,S=0;S<R;++S)V=i[S],I=C-V.x,F=b-V.y,L=I*I+F*F,L<x&&(k=V,x=L);return k},on:function(C,b){return arguments.length>1?(d.on(C,b),t):d.on(C)}}}function qv(){var i,t,e,r,o=Ci(-30),n,s=1,a=1/0,l=.81;function d(p){var f,C=i.length,b=Pa(i,Z_,J_).visitAfter(c);for(r=p,f=0;f<C;++f)t=i[f],b.visit(h)}function u(){if(i){var p,f=i.length,C;for(n=new Array(f),p=0;p<f;++p)C=i[p],n[C.index]=+o(C,p,i)}}function c(p){var f=0,C,b,x=0,S,R,I;if(p.length){for(S=R=I=0;I<4;++I)(C=p[I])&&(b=Math.abs(C.value))&&(f+=C.value,x+=b,S+=b*C.x,R+=b*C.y);p.x=S/x,p.y=R/x}else{C=p,C.x=C.data.x,C.y=C.data.y;do f+=n[C.data.index];while(C=C.next)}p.value=f}function h(p,f,C,b){if(!p.value)return!0;var x=p.x-t.x,S=p.y-t.y,R=b-f,I=x*x+S*S;if(R*R/l<I)return I<a&&(x===0&&(x=No(e),I+=x*x),S===0&&(S=No(e),I+=S*S),I<s&&(I=Math.sqrt(s*I)),t.vx+=x*p.value*r/I,t.vy+=S*p.value*r/I),!0;if(p.length||I>=a)return;(p.data!==t||p.next)&&(x===0&&(x=No(e),I+=x*x),S===0&&(S=No(e),I+=S*S),I<s&&(I=Math.sqrt(s*I)));do p.data!==t&&(R=n[p.data.index]*r/I,t.vx+=x*R,t.vy+=S*R);while(p=p.next)}return d.initialize=function(p,f){i=p,e=f,u()},d.strength=function(p){return arguments.length?(o=typeof p=="function"?p:Ci(+p),u(),d):o},d.distanceMin=function(p){return arguments.length?(s=p*p,d):Math.sqrt(s)},d.distanceMax=function(p){return arguments.length?(a=p*p,d):Math.sqrt(a)},d.theta=function(p){return arguments.length?(l=p*p,d):Math.sqrt(l)},d}function Sg(i){var t=Ci(.1),e,r,o;typeof i!="function"&&(i=Ci(i==null?0:+i));function n(a){for(var l=0,d=e.length,u;l<d;++l)u=e[l],u.vx+=(o[l]-u.x)*r[l]*a}function s(){if(e){var a,l=e.length;for(r=new Array(l),o=new Array(l),a=0;a<l;++a)r[a]=isNaN(o[a]=+i(e[a],a,e))?0:+t(e[a],a,e)}}return n.initialize=function(a){e=a,s()},n.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ci(+a),s(),n):t},n.x=function(a){return arguments.length?(i=typeof a=="function"?a:Ci(+a),s(),n):i},n}function _g(i){var t=Ci(.1),e,r,o;typeof i!="function"&&(i=Ci(i==null?0:+i));function n(a){for(var l=0,d=e.length,u;l<d;++l)u=e[l],u.vy+=(o[l]-u.y)*r[l]*a}function s(){if(e){var a,l=e.length;for(r=new Array(l),o=new Array(l),a=0;a<l;++a)r[a]=isNaN(o[a]=+i(e[a],a,e))?0:+t(e[a],a,e)}}return n.initialize=function(a){e=a,s()},n.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ci(+a),s(),n):t},n.y=function(a){return arguments.length?(i=typeof a=="function"?a:Ci(+a),s(),n):i},n}var ex=function(i){A(t,i);function t(){var e=i.call(this)||this;return e.childrenInited=!1,e.className="ForceDirectedSeriesDataItem",e.hasChildren.children=!0,e.childLinks=new Ie,e.applyTheme(),e}return t.prototype.show=function(e,r,o){this._visible=!0,this.node&&(this.node.isActive=!0)},t.prototype.dispatchVisibility=function(e){if(this.events.isEnabled("visibilitychanged")){var r={type:"visibilitychanged",target:this,visible:e};this.events.dispatchImmediately("visibilitychanged",r)}},t.prototype.hide=function(e,r,o,n){if(this._visible=!1,this.events.isEnabled("visibilitychanged")){var s={type:"visibilitychanged",target:this,visible:!1};this.events.dispatchImmediately("visibilitychanged",s)}this.node&&(this.node.isActive=!1)},Object.defineProperty(t.prototype,"value",{get:function(){var e=this.values.value.value;return M(e)||this.children&&(e=0,this.children.each(function(r){e+=r.value})),e},set:function(e){this.setValue("value",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"node",{get:function(){var e=this;if(!this._node){var r=this.component,o=r.nodes.create();o.draggable=!0,this._node=o,this._disposers.push(o),this._disposers.push(new Ke(function(){r.nodes.removeValue(o)})),this.addSprite(o),o.visible=this.visible,o.hiddenState.properties.visible=!0,r.itemsFocusable()?(this.component.role="menu",o.role="menuitem",o.focusable=!0):(this.component.role="list",o.role="listitem",o.focusable=!1),o.focusable&&(o.events.once("focus",function(n){o.readerTitle=r.populateString(r.itemReaderText,e)},void 0,!1),o.events.once("blur",function(n){o.readerTitle=""},void 0,!1)),o.hoverable&&(o.events.once("over",function(n){o.readerTitle=r.populateString(r.itemReaderText,e)},void 0,!1),o.events.once("out",function(n){o.readerTitle=""},void 0,!1))}return this._node},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this.parent?this.parent.level+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"percent",{get:function(){return this.parent?this.value/this.parent.value*100:100},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){var e=this.properties.color;return e==null&&this.parent&&(e=this.parent.color),e==null&&this.component&&(e=this.component.colors.getIndex(this.component.colors.step*this.index)),e},set:function(e){this.setProperty("color",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"linkWith",{get:function(){return this.properties.linkWith},set:function(e){this.setProperty("linkWith",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hiddenInLegend",{get:function(){return this.properties.hiddenInLegend},set:function(e){this.setProperty("hiddenInLegend",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collapsed",{get:function(){return this.properties.collapsed},set:function(e){this.setProperty("collapsed",e),this.node.isActive=!e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fixed",{get:function(){return this.properties.fixed},set:function(e){this.setProperty("fixed",e),this.component&&this.component.handleFixed(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this.properties.children},set:function(e){this.setProperty("children",e)},enumerable:!0,configurable:!0}),t.prototype.createLegendMarker=function(e){this.component.createLegendMarker(e,this),this.node.isActive||this.hide()},Object.defineProperty(t.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(e){this._legendDataItem=e,e.label&&(e.label.dataItem=this),e.valueLabel&&(e.valueLabel.dataItem=this)},enumerable:!0,configurable:!0}),t}(mg);var hc=function(i){A(t,i);function t(){var e=i.call(this)||this;return e._tick=0,e.className="ForceDirectedSeries",e.d3forceSimulation=Uv(),e.maxRadius=ae(8),e.minRadius=ae(1),e.width=ae(100),e.height=ae(100),e.colors=new ad,e.colors.step=2,e.width=ae(100),e.height=ae(100),e.manyBodyStrength=-15,e.centerStrength=.8,e.showOnTick=10,e.baseValue=0,e.setPropertyValue("dragFixedNodes",!1),e.setPropertyValue("velocityDecay",.4),e.events.on("maxsizechanged",function(){e.updateRadiuses(e.dataItems),e.updateLinksAndNodes(),e.dataItems.each(function(s){e.handleFixed(s)});var r=e.d3forceSimulation,o=ze(ze(50,e.innerWidth),e.innerWidth),n=ze(ze(50,e.innerHeight),e.innerHeight);r&&(r.force("x",Sg().x(o/2).strength(e.centerStrength*100/o)),r.force("y",_g().y(n/2).strength(e.centerStrength*100/n)),r.alpha()<.4&&(r.alpha(.4),r.restart()))}),e.applyTheme(),e}return t.prototype.getMaxValue=function(e,r){var o=this;return e.each(function(n){if(n.value>r&&(r=n.value),n.children){var s=o.getMaxValue(n.children,r);s>r&&(r=s)}}),r},t.prototype.getMinValue=function(e,r){var o=this;return e.each(function(n){if(n.value<r&&(r=n.value),n.children){var s=o.getMaxValue(n.children,r);s<r&&(r=s)}}),r},t.prototype.validateDataItems=function(){var e=this;if(this.chart.__disabled){i.prototype.validateDataItems.call(this);return}this._dataDisposers.push(new St(this.links)),this._maxValue=this.getMaxValue(this.dataItems,0),this._minValue=this.getMinValue(this.dataItems,this._maxValue),this.forceLinks=[],this.colors.reset();var r=0,o=Math.min(this.innerHeight/3,this.innerWidth/3);this.dataItems.length<=1&&(o=0),this.dataItems.each(function(a){var l=r/e.dataItems.length*360,d=a.node,u=d.propertyFields.x,c=d.propertyFields.y;u&&T(a.dataContext[u])?d.x=a.dataContext[u]:d.x=e.innerWidth/2+o*Ve(l),c&&T(a.dataContext[c])?d.y=a.dataContext[c]:d.y=e.innerHeight/2+o*Ae(l),a.node.fill=a.color,a.node.stroke=a.color,r++,e.initNode(a)}),this.dataFields.linkWith&&this.dataItems.each(function(a){e.processLinkWith(a)});var n=this.d3forceSimulation;n.on("tick",function(){e.updateLinksAndNodes()});for(var s=0;s<10;s++);n.alphaDecay(1-Math.pow(.001,1/600)),this.chart.feedLegend(),i.prototype.validateDataItems.call(this)},t.prototype.handleFixed=function(e){var r=this,o=e.node,n=o.propertyFields.x,s=o.propertyFields.y;n&&T(e.dataContext[n])&&(o.x=e.dataContext[n]),s&&T(e.dataContext[s])&&(o.y=e.dataContext[s]),e.fixed?(o.x instanceof Me?o.fx=qt(o.x,this.innerWidth):o.fx=o.x,o.y instanceof Me?o.fy=qt(o.y,this.innerHeight):o.fy=o.y,o.draggable=this.dragFixedNodes,o.validate()):(o.fx=void 0,o.fy=void 0,o.draggable=!0),e&&e.children&&e.children.each(function(a){r.handleFixed(a)})},t.prototype.updateNodeList=function(){var e=this.d3forceSimulation;e.nodes(this.nodes.values),this._linkForce=Hv(this.forceLinks),e.force("link",this._linkForce),this._collisionForce=Gv(),e.force("collision",this._collisionForce);var r=ze(50,this.innerWidth),o=ze(50,this.innerHeight);e.force("x",Sg().x(r/2).strength(this.centerStrength*100/r)),e.force("y",_g().y(o/2).strength(this.centerStrength*100/o))},t.prototype.updateLinksAndNodes=function(){var e=this;this._tick<this.showOnTick?(this._tick++,this.opacity=0):this._tick==this.showOnTick&&(this.opacity=1,this._tick++),this._linkForce&&(this._linkForce.distance(function(r){return e.getDistance(r)}),this._linkForce.strength(function(r){return e.getStrength(r)})),this._collisionForce&&this._collisionForce.radius(function(r){if(r instanceof ac){var o=r.circle.pixelRadius;return!r.outerCircle.__disabled&&!r.outerCircle.disabled&&r.outerCircle.visible&&(o=(o+3)*r.outerCircle.scale),o+r.paddingRadius}return 1}),this.d3forceSimulation.force("manybody",qv().strength(function(r){return r instanceof ac?r.circle.pixelRadius*e.manyBodyStrength:e.manyBodyStrength}))},t.prototype.getDistance=function(e){var r=e.source,o=e.target,n=0;if(o.dataItem&&r.dataItem){var s=r.linksWith.getKey(o.uid);return s&&(n=s.distance),r.isActive||(n=1),o.isHidden?0:n*(r.circle.pixelRadius+o.circle.pixelRadius)}return n},t.prototype.getStrength=function(e){var r=e.source,o=e.target,n=0,s=r.linksWith.getKey(o.uid);return s&&(n=s.strength),o.isHidden?0:n},t.prototype.nodeDragEnded=function(){this.d3forceSimulation.alphaTarget(0)},t.prototype.nodeDragStarted=function(){this.d3forceSimulation.alpha(.1),this.d3forceSimulation.restart()},t.prototype.restartSimulation=function(){this.d3forceSimulation.alpha()<=.3&&(this.d3forceSimulation.alpha(.3),this.d3forceSimulation.restart())},t.prototype.updateRadiuses=function(e){var r=this;e.each(function(o){r.updateRadius(o),o.childrenInited&&r.updateRadiuses(o.children)})},t.prototype.updateRadius=function(e){var r=e.node,o=(this.innerWidth+this.innerHeight)/2,n=qt(this.minRadius,o),s=qt(this.maxRadius,o),a=this.baseValue;a==null&&(a=this._minValue);var l=n+(e.value-a)/(this._maxValue-a)*(s-n);M(l)||(l=n),r.circle.radius=l,r.outerCircle.radius=l+3,r.circle.states.getKey("active").properties.radius=l,r.circle.defaultState.properties.radius=l},t.prototype.initNode=function(e){var r=this,o=e.node;if(o.parent=this,this.updateRadius(e),!e.children||e.children.length==0?(o.outerCircle.disabled=!0,o.circle.interactionsEnabled=!0,o.cursorOverStyle=Ft.default):o.cursorOverStyle=Ft.pointer,this.dataItemsInvalid&&(e.level>=this.maxLevels-1||e.collapsed)){o.isActive=!1,this.updateNodeList();return}if(o.isActive||o.hide(0),this.handleFixed(e),e.children){var n=0;e.childrenInited=!0,this.dataItems.length==1&&e.level==0&&this.colors.next(),e.children.each(function(s){var a=o.linkWith(s.node);s.parentLink=a;var l=2*o.circle.pixelRadius+s.node.circle.pixelRadius,d=n/e.children.length*360;s.node.x=o.pixelX+l*Ve(d),s.node.y=o.pixelY+l*Ae(d),s.node.circle.radius=0;var u,c=s.properties.color;T(c)?u=c:r.dataItems.length==1&&e.level==0?u=r.colors.next():u=e.color,s.color=u,s.node.fill=u,s.node.stroke=u,s.parentLink.stroke=u,s.node.fill=s.node.fill,s.node.stroke=s.node.stroke,r.initNode(s),n++})}o.isActive=!0,o.show(0),this.updateNodeList()},t.prototype.processLinkWith=function(e){var r=this;e.linkWith&&Z(e.linkWith,function(o,n){var s=r.getDataItemById(r.dataItems,o);s&&e.node.linkWith(s.node,r.linkWithStrength)}),e.children&&e.children.each(function(o){r.processLinkWith(o)})},t.prototype.getDataItemById=function(e,r){for(var o=e.length-1;o>=0;o--){var n=e.getIndex(o);if(n.id==r)return n;if(n.children){var s=this.getDataItemById(n.children,r);if(s)return s}}},t.prototype.createDataItem=function(){return new ex},Object.defineProperty(t.prototype,"nodes",{get:function(){if(!this._nodes){var e=this.createNode();e.applyOnClones=!0,this._disposers.push(e),this._nodes=new oi(e),this._disposers.push(new St(this._nodes))}return this._nodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"links",{get:function(){if(!this._links){var e=this.createLink();e.applyOnClones=!0,this._disposers.push(e),this._links=new oi(e),this._disposers.push(new St(this._links))}return this._links},enumerable:!0,configurable:!0}),t.prototype.createNode=function(){return new ac},t.prototype.createLink=function(){return new Lv},Object.defineProperty(t.prototype,"minRadius",{get:function(){return this.getPropertyValue("minRadius")},set:function(e){this.setPropertyValue("minRadius",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baseValue",{get:function(){return this.getPropertyValue("baseValue")},set:function(e){this.setPropertyValue("baseValue",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxRadius",{get:function(){return this.getPropertyValue("maxRadius")},set:function(e){this.setPropertyValue("maxRadius",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colors",{get:function(){return this.getPropertyValue("colors")},set:function(e){this.setPropertyValue("colors",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxLevels",{get:function(){return this.getPropertyValue("maxLevels")},set:function(e){this.setPropertyValue("maxLevels",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"manyBodyStrength",{get:function(){return this.getPropertyValue("manyBodyStrength")},set:function(e){this.setPropertyValue("manyBodyStrength",e)&&this.restartSimulation()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerStrength",{get:function(){return this.getPropertyValue("centerStrength")},set:function(e){this.setPropertyValue("centerStrength",e)&&this.restartSimulation()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"linkWithStrength",{get:function(){return this.getPropertyValue("linkWithStrength")},set:function(e){this.setPropertyValue("linkWithStrength",e)&&this.restartSimulation()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"velocityDecay",{get:function(){return this.getPropertyValue("velocityDecay")},set:function(e){this.setPropertyValue("velocityDecay",e)&&this.d3forceSimulation.velocityDecay(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dragFixedNodes",{get:function(){return this.getPropertyValue("dragFixedNodes")},set:function(e){var r=this;this.setPropertyValue("dragFixedNodes",e)&&this.dataItems.each(function(o){r.handleFixed(o)})},enumerable:!0,configurable:!0}),t.prototype.createLegendMarker=function(e,r){e.children.each(function(o){var n=r.node;o instanceof uo&&o.cornerRadius(40,40,40,40),o.defaultState.properties.fill=n.fill,o.defaultState.properties.stroke=n.stroke,o.defaultState.properties.fillOpacity=n.fillOpacity,o.defaultState.properties.strokeOpacity=n.strokeOpacity,o.fill=n.fill,o.stroke=n.stroke,o.fillOpacity=n.fillOpacity,o.strokeOpacity=n.strokeOpacity,o.fill==null&&(o.__disabled=!0);var s=e.dataItem;s.color=n.fill,s.colorOrig=n.fill,n.events.on("propertychanged",function(a){a.property=="fill"&&(o.__disabled=!1,o.isActive||(o.fill=n.fill),o.defaultState.properties.fill=n.fill,s.color=n.fill,s.colorOrig=n.fill),a.property=="stroke"&&(o.isActive||(o.stroke=n.stroke),o.defaultState.properties.stroke=n.stroke)},void 0,!1)})},Object.defineProperty(t.prototype,"showOnTick",{get:function(){return this.getPropertyValue("showOnTick")},set:function(e){this.setPropertyValue("showOnTick",e)},enumerable:!0,configurable:!0}),t}(sc);P.registeredClasses.ForceDirectedSeries=hc;P.registeredClasses.ForceDirectedSeriesDataItem=ex;var tx=function(i){A(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t}(E_);var Kv=function(i){A(t,i);function t(){var e=i.call(this)||this;e.zoomDuration=1e3,e.zoomEasing=Ir,e.minZoomLevel=1,e.maxZoomLevel=16,e.className="ForceDirectedTree",e.seriesContainer.isMeasured=!0,e.seriesContainer.layout="absolute",e.mouseWheelBehavior="none",e.zoomStep=2,e.seriesContainer.background.fillOpacity=0,e.seriesContainer.background.fill=fe("#ffffff");var r=e.createChild(ng);r.shouldClone=!1,r.x=ae(100),r.horizontalCenter="right",r.valign="top",r.zIndex=Number.MAX_SAFE_INTEGER,r.marginTop=5,r.marginRight=5,r.isMeasured=!1,r.adapter.add("dx",function(n,s){return-r.marginRight}),r.hide(0),e.zoomOutButton=r,e.addDisposer(e.seriesContainer.events.on("sizechanged",function(){e.seriesContainer.scale!=1?e.zoomOutButton.show():e.zoomOutButton.hide()}));var o=ye();return e._disposers.push(o.body.events.on("down",function(n){if(e.zoomable){var s=Un(n.pointer.point,e.htmlContainer);s.x>0&&s.y>0&&s.x<e.svgContainer.width&&s.y<e.svgContainer.height&&e.seriesContainer.dragStart(n.pointer)}},e)),e._disposers.push(o.body.events.on("up",function(n){e.zoomable&&e.seriesContainer.dragStop(n.pointer,!0)},e)),e.applyTheme(),e}return t.prototype.createSeries=function(){return new hc},t.prototype.createDataItem=function(){return new tx},t.prototype.feedLegend=function(){var e=this.legend;if(e){var r=[];this.series.each(function(o){if(!o.hiddenInLegend){var n=o.dataItems;if(n.length==1){var s=o.dataItems.getIndex(0).children;s&&s.length>0&&(n=s)}n.each(function(a){if(!a.hiddenInLegend){r.push(a);var l=o.legendSettings;l&&(l.labelText&&(e.labels.template.text=l.labelText),l.itemLabelText&&(e.labels.template.text=l.itemLabelText),l.valueText&&(e.valueLabels.template.text=l.valueText),l.itemValueText&&(e.valueLabels.template.text=l.itemValueText))}})}}),e.data=r,e.dataFields.name="name"}},t.prototype.applyInternalDefaults=function(){i.prototype.applyInternalDefaults.call(this),T(this.readerTitle)||(this.readerTitle=this.language.translate("Force directed tree"))},t.prototype.getExporting=function(){var e=this,r=i.prototype.getExporting.call(this);return r.adapter.add("formatDataFields",function(o){return(o.format=="csv"||o.format=="xlsx")&&e.series.each(function(n){T(n.dataFields.children)&&delete o.dataFields[n.dataFields.children]}),o}),r},t.prototype.handleWheel=function(e){var r=ba(e.point,this.seriesContainer),o=this.seriesContainer.scale;e.shift.y<0?o*=this.zoomStep:o/=this.zoomStep,o=De(o,this.minZoomLevel,this.maxZoomLevel),this.zoomToPoint(r,o)},t.prototype.zoomToPoint=function(e,r,o){var n=this.seriesContainer,s;o?s={x:this.maxWidth/2,y:this.maxHeight/2}:s=Cs(e,n);var a=s.x-e.x*r,l=s.y-e.y*r;n.animate([{property:"scale",to:r},{property:"x",to:a},{property:"y",to:l}],this.zoomDuration,this.zoomEasing)},t.prototype.zoomToDataItem=function(e,r,o){var n=e.node.pixelX,s=e.node.pixelY;M(r)||(r=this.seriesContainer.scale*this.zoomStep),this.zoomToPoint({x:n,y:s},r,o)},t.prototype.zoomOut=function(){var e=this.seriesContainer;this.zoomToPoint({x:e.pixelWidth/2,y:e.pixelHeight/2},1,!0)},Object.defineProperty(t.prototype,"zoomable",{get:function(){return this.getPropertyValue("zoomable")},set:function(e){var r=this;this.setPropertyValue("zoomable",e)&&(e?(this.seriesContainer.resizable=!0,this.seriesContainer.draggable=!0,this.seriesContainer.dragWhileResize=!0,this.mouseWheelBehavior="zoom",this._backgroundZoomoutDisposer=this.seriesContainer.background.events.on("hit",function(){r.zoomOut()},this,!1),this._disposers.push(this._backgroundZoomoutDisposer),this._disposers.push(this.seriesContainer.events.on("sizechanged",function(){r.series.each(function(o){o.nodes.each(function(n){n.updateLabelSize()})})}))):(this.seriesContainer.resizable=!1,this.seriesContainer.draggable=!1,this.seriesContainer.dragWhileResize=!1,this.mouseWheelBehavior="none",this._backgroundZoomoutDisposer&&this._backgroundZoomoutDisposer.dispose()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mouseWheelBehavior",{get:function(){return this.getPropertyValue("mouseWheelBehavior")},set:function(e){this.setPropertyValue("mouseWheelBehavior",e)&&(e!="none"?(this._mouseWheelDisposer=this.chartContainer.events.on("wheel",this.handleWheel,this,!1),this._disposers.push(this._mouseWheelDisposer)):(this._mouseWheelDisposer&&this._mouseWheelDisposer.dispose(),this.chartContainer.wheelable=!1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoomStep",{get:function(){return this.getPropertyValue("zoomStep")},set:function(e){this.setPropertyValue("zoomStep",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoomOutButton",{get:function(){return this._zoomOutButton},set:function(e){var r=this;this._zoomOutButton=e,e&&e.events.on("hit",function(){r.zoomOut()},void 0,!1)},enumerable:!0,configurable:!0}),t}(kv);P.registeredClasses.ForceDirectedTree=Kv;P.registeredClasses.ForceDirectedTreeDataItem=tx;var Ma=Qn(Ts());we.autoSetClassName=!0;rc(oc);var oY=(()=>{class i{constructor(e,r){this.messageService=e,this.zone=r,this.authService=ie(bt),this.usersService=ie(Jn),this.stopSubscription$=new it,this.usersList=[],this.routesList=[],this.rowData=[],this.columnDefs=[{headerName:"Empresa",field:"customerName",cellRenderer:"agGroupCellRenderer",sortable:!0},{headerName:"Operaci\xF3n",sortable:!0,field:"routeName"},{headerName:"Usuarios Mete",field:"customerName",cellRenderer:o=>{let n=o.data.passes;return Ma.default.filter(n,a=>!!a.isTaskIn).length}},{headerName:"Usuarios Saca",field:"customerName",cellRenderer:o=>{let n=o.data.passes;return Ma.default.filter(n,a=>!!a.isTaskOut).length}},{headerName:"Activa",field:"permission",cellRenderer:o=>o.value?"Si":"No"}],this.columnProgram=[{headerName:"Inicia",field:"time",cellRenderer:"agGroupCellRenderer",sortable:!0},{headerName:"Empresa",sortable:!0,field:"customerName"},{headerName:"Operaci\xF3n",sortable:!0,field:"routeName"},{headerName:"Programa / Turno",Field:"round"},{headerName:"PR",sortable:!0,field:"driver"},{headerName:"Veh\xEDculo",sortable:!0,field:"vehicleName"},{headerName:"Inici\xF3",sortable:!0,field:"startedAt"},{headerName:"Finaliz\xF3",sortable:!0,field:"endedAt"}],this.usersColumnDefs=[{headerName:"Empresa",field:"customerName",enableRowGroup:!0},{headerName:"Operaci\xF3n",field:"routeName",enableRowGroup:!0},{headerName:"Turno",field:"round",enableRowGroup:!0},{headerName:"Estaci\xF3n",field:"stopName",enableRowGroup:!0},{headerName:"Pase",field:"name"},{headerName:"Mete",field:"isTaskIn",cellRenderer:o=>o.value?"Si":"No"},{headerName:"Saca",field:"isTaskOut",cellRenderer:o=>o.value?"Si":"No"},{headerName:"Pase Cortes\xEDa",field:"is_courtesy",cellRenderer:o=>o.value?"Si":"No"},{headerName:"V\xE1lido desde",field:"validFrom",cellRenderer:o=>{let n=o.value.toDate();return Yt(n,"MMMM dd yyyy",{locale:Qt})}},{headerName:"V\xE1lido hasta",field:"validTo",cellRenderer:o=>{let n=o.value.toDate();return Yt(n,"MMMM dd yyyy",{locale:Qt})}}],this.defaultColDef={flex:1,minWidth:100,filter:!0,sortable:!0,resizable:!0},this.detailCellRendererParams={detailGridOptions:{columnDefs:[{headerName:"Pase",field:"name"},{headerName:"Mete",field:"isTaskIn",cellRenderer:o=>o.value?"Si":"No"},{headerName:"Saca",field:"isTaskOut",cellRenderer:o=>o.value?"Si":"No"},{headerName:"Pase Cortes\xEDa",field:"is_courtesy",cellRenderer:o=>o.value?"Si":"No"},{headerName:"Estaci\xF3n",field:"stopName"},{headerName:"V\xE1lido desde",field:"validFrom",cellRenderer:o=>{let n=o.value.toDate();return Yt(n,"MMMM dd yyyy",{locale:Qt})}},{headerName:"V\xE1lido hasta",field:"validTo",cellRenderer:o=>{let n=o.value.toDate();return Yt(n,"MMMM dd yyyy",{locale:Qt})}}],defaultColDef:{flex:1}},getDetailRowData:function(o){o.successCallback(o.data.passes)}}}onFirstDataRendered(e){setTimeout(function(){e.api.getDisplayedRowAtIndex(1).setExpanded(!1)},0)}onGridReady(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.rowData=this.routesList}ngOnInit(){this.authService.user.subscribe(e=>{e&&(this.user=e,this.getSubscriptions())})}sendMessage(e,r){this.messageService.create(e,r)}ngOnDestroy(){this.stopSubscription$.next(void 0),this.stopSubscription$.complete(),this.zone.runOutsideAngular(()=>{this.chart&&this.chart.dispose()})}getSubscriptions(){this.usersService.getBoardingPassesByRoute().pipe(xe(this.stopSubscription$)).subscribe(e=>{this.rowData=e,this.createNestedTableData(e),this.createChart(e)})}createNestedTableData(e){this.routesList=[],this.usersList=[];for(let r=0;r<e.length;++r){e[r].key=r,e[r].expand=!1,e[r].routeName=e[r].passes[0].routeName;for(let o=0;o<e[r].passes.length;++o)e[r].passes[o].key=r,e[r].passes[o].customerName=e[r].customerName,this.usersList.push(e[r].passes[o])}this.routesList=e}createChart(e){this.zone.runOutsideAngular(()=>{let r=Fv("chartdiv",Kv),o=r.series.push(new hc);o.maxLevels=2,o.minRadius=20,o.maxRadius=90;let n=[];n=[{name:"Usuarios",children:[]}],e.forEach(a=>{let l={},d=a.passes,u=Ma.default.filter(d,f=>f.round=="D\xEDa"),c=Ma.default.filter(d,f=>f.round=="Tarde"),h=(0,Ma.default)(u).groupBy("stopName").map((f,C)=>({name:C,value:f.length})).value(),p=(0,Ma.default)(c).groupBy("stopName").map((f,C)=>({name:C,value:f.length})).value();l={name:`${a.customerName} ${d[0].routeName}`,children:[{name:"D\xEDa",children:[...h]},{name:"Tarde",children:[...p]}]},n[0].children.push(l)}),r.data=n,o.dataFields.value="value",o.dataFields.name="name",o.dataFields.children="children",o.nodes.template.tooltipText="{name}:{value}",o.nodes.template.fillOpacity=1,o.nodes.template.label.text="{name}",o.fontSize=10,o.links.template.strokeWidth=1;let s=o.links.template.states.create("hover");s.properties.strokeWidth=3,s.properties.strokeOpacity=1,o.nodes.template.events.on("over",function(a){a.target.dataItem.childLinks.each(function(l){l.isHover=!0}),a.target.dataItem.parentLink&&(a.target.dataItem.parentLink.isHover=!0)}),o.nodes.template.events.on("out",function(a){a.target.dataItem.childLinks.each(function(l){l.isHover=!1}),a.target.dataItem.parentLink&&(a.target.dataItem.parentLink.isHover=!1)}),this.chart=r})}static{this.\u0275fac=function(r){return new(r||i)(ee(Mt),ee(_i))}}static{this.\u0275cmp=ke({type:i,selectors:[["app-list"]],decls:3,vars:0,consts:[["id","chartdiv"]],template:function(r,o){r&1&&(v(0,"nz-card"),N(1,"div",0),y(),N(2,"nz-card"))},dependencies:[Xt],styles:['#chartdiv[_ngcontent-%COMP%]{width:100%;height:350px;font-family:"system-ui"!important;font-size:.875 em!important;color:#000!important;text-shadow:-1px 0 black,0 1px black,1px 0 black,0 -1px black}']})}}return i})();var sY=(()=>{class i{constructor(){}ngOnInit(){}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=ke({type:i,selectors:[["app-new"]],decls:2,vars:0,template:function(r,o){r&1&&(v(0,"p"),D(1,"new works!"),y())}})}}return i})();function GI(i,t){if(i&1){let e=re();v(0,"li",18),q("click",function(){H(e);let o=O(2).$implicit,n=O();return B(n.toggleActive(o))}),N(1,"i",20),D(2," Habilitar "),y()}}function HI(i,t){if(i&1){let e=re();v(0,"li",18),q("click",function(){H(e);let o=O(2).$implicit,n=O();return B(n.toggleActive(o))}),N(1,"i",21),D(2," Deshabilitar "),y()}}function BI(i,t){if(i&1){let e=re();v(0,"td")(1,"a",13),N(2,"i",14),y(),v(3,"nz-dropdown-menu",null,3)(5,"ul",15),$(6,GI,3,0,"li",16)(7,HI,3,0,"li",16),N(8,"li",17),v(9,"li",18),q("click",function(){H(e);let o=O().$implicit,n=O();return B(n.deletePermission(o))}),N(10,"i",19),D(11," Eliminar "),y()()()()}if(i&2){let e=ue(4),r=O().$implicit;xs(r.permission?"text-dark":"text-muted font-italic"),_(),E("nzDropdownMenu",e),_(5),E("ngIf",!r.permission),_(),E("ngIf",r.permission)}}function $I(i,t){if(i&1&&(v(0,"tr")(1,"td"),D(2),y(),v(3,"td"),D(4),y(),v(5,"td"),D(6),y(),v(7,"td"),D(8),y(),v(9,"td"),D(10),y(),$(11,BI,12,5,"td",12),y()),i&2){let e=t.$implicit,r=O();_(),xs(e.permission?"text-dark":"text-muted font-italic"),_(),J(e.customerName),_(),xs(e.permission?"text-dark":"text-muted font-italic"),_(),J(e.name),_(),xs(e.permission?"text-dark":"text-muted font-italic"),_(),J(e.description),_(),xs(e.permission?"text-dark":"text-muted font-italic"),_(),J(e.active?"Si":"No"),_(),xs(e.permission?"text-dark":"text-muted font-italic"),_(),J(e.permission?"Si":"No"),_(),E("ngIf",r.userCanUpdate)}}function WI(i,t){if(i&1&&(v(0,"nz-tab",23),N(1,"app-shared-stoppoints-list",24),y()),i&2){let e=O().$implicit,r=O();E("nzTitle",e.customerName+" "+e.name),_(),E("accountId",e.customerId)("userCanUpdate",r.userCanUpdate)("routeId",e.routeId)}}function jI(i,t){if(i&1&&(v(0,"div"),$(1,WI,2,4,"nz-tab",22),y()),i&2){let e=t.$implicit;_(),E("ngIf",e.permission)}}function UI(i,t){if(i&1&&N(0,"nz-option",32),i&2){let e=t.$implicit,r=O().$implicit;E("nzValue",r.customerId+","+r.customerName+","+e.id+","+e.name)("nzLabel",e.name)}}function qI(i,t){if(i&1&&(v(0,"nz-option-group",30),$(1,UI,1,2,"nz-option",31),y()),i&2){let e=t.$implicit;E("nzLabel",e.customerName),_(),E("ngForOf",e.routes)}}function KI(i,t){if(i&1){let e=re();v(0,"nz-select",28),ht("ngModelChange",function(o){H(e);let n=O(2);return ct(n.selectedRoute,o)||(n.selectedRoute=o),B(o)}),$(1,qI,2,2,"nz-option-group",29),y()}if(i&2){let e=O(2);ut("ngModel",e.selectedRoute),_(),E("ngForOf",e.allRoutesList)}}function YI(i,t){if(i&1&&(v(0,"div")(1,"nz-form-item")(2,"nz-form-label",25),D(3,"Operaci\xF3n "),y(),v(4,"nz-form-control",26),$(5,KI,2,2,"nz-select",27),y()()()),i&2){let e=O();_(2),E("nzSpan",6),_(2),E("nzSpan",14),_(),E("ngIf",e.allRoutesList.length>0)}}function XI(i,t){if(i&1){let e=re();v(0,"button",33),q("click",function(){H(e);let o=O();return B(o.handleCancel())}),D(1,"Cancelar"),y(),v(2,"button",33),q("click",function(){H(e);let o=O();return B(o.handleOk())}),D(3,"Habilitar Operaci\xF3n"),y()}}var xg=(()=>{class i{constructor(e,r){this.modalService=e,this.message=r,this.vendorId="",this.userCanUpdate=!1,this.rolService=ie(Hi),this.routesService=ie(Kr),this.authService=ie(bt),this.allRoutesList=[],this.vendorRoutesList=[],this.permissionsList=[],this.loading=!0,this.time=new Date,this.isModalVisible=!1,this.isConfirmLoading=!1,this.selectedRoute=null,this.infoLoad=[],this.accountsService=ie(gr),this.infoSegment=[],this.stopSubscription$=new it,this.authService.user.subscribe(o=>{o&&(this.user=o,this.user!==null&&this.user!==void 0&&this.user.rolId!==void 0&&(this.rolService.getRol(this.user.rolId).valueChanges().subscribe(n=>{this.infoLoad=n,this.userlevelAccess=this.infoLoad.optionAccessLavel}),this.accountsService.getSegmentLevel(this.user.idSegment).pipe(xe(this.stopSubscription$),ce(n=>{let s=n.payload.id,a=n.payload.data();return me({id:s},a)}),ft(n=>(this.infoSegment=n,n))).subscribe()))})}sendMessage(e,r){this.message.create(e,r)}ngOnInit(){this.getSubscriptions()}ngOnDestroy(){this.allRoutesSubscription&&this.allRoutesSubscription.unsubscribe(),this.vendorRoutesSubscription&&this.vendorRoutesSubscription.unsubscribe(),this.permissionsSubscription&&this.permissionsSubscription.unsubscribe()}toggleActive(e){this.vendorId!=""&&this.routesService.toggleActiveVendorRouteAccess(this.vendorId,e.permissionId,e)}deletePermission(e){this.userlevelAccess=="1"?this.vendorId!=""&&this.routesService.deleteVendorRouteAccess(this.vendorId,e.permissionId):this.sendMessage("error","El usuario no tiene permisos para borrar datos, favor de contactar al administrador.")}getSubscriptions(){this.infoSegment.nivelNum!==void 0&&this.infoSegment.nivelNum==1?this.allRoutesSubscription=this.routesService.getAllCustomersRoutesbyCustomer(this.user.customerId).subscribe({next:e=>{this.allRoutesList=e},error:e=>{this.sendMessage("error",e),this.loading=!1}}):this.allRoutesSubscription=this.routesService.getRoutesByCustomer().subscribe({next:e=>{this.allRoutesList=e},error:e=>{this.sendMessage("error",e),this.loading=!1}}),this.vendorId!=""?this.vendorRoutesSubscription=this.routesService.getAuthorizedRoutes(this.vendorId).subscribe({next:e=>{this.vendorRoutesList=e&&e.length>0?e:[]},error:e=>{this.vendorRoutesList=[],this.loading=!1}}):(this.vendorRoutesList=[],this.loading=!1)}showModal(){this.isModalVisible=!0}handleOk(){if(this.selectedRoute){let e=this.selectedRoute.split(","),r=e[0],o=e[1],n=e[2],s=e[3],a=`customers/${r}/routes/${n}`,l=this.vendorId,d={active:!0,routeId:n,routeName:s,routePath:a,customerId:r,customerName:o,vendorId:l};this.vendorId!=""&&this.routesService.setAuthorizedRoutes(this.vendorId,d).then(()=>{this.isModalVisible=!1,this.isConfirmLoading=!1})}}handleCancel(){this.isModalVisible=!1}static{this.\u0275fac=function(r){return new(r||i)(ee(Ba),ee(Mt))}}static{this.\u0275cmp=ke({type:i,selectors:[["app-shared-vendor-settings"]],inputs:{vendorId:"vendorId",userCanUpdate:"userCanUpdate"},decls:27,vars:8,consts:[["basicTable",""],["modalContent",""],["modalFooter",""],["menu","nzDropdownMenu"],["nz-button","",1,"media","align-items-right","m-t-10","m-r-10",2,"background-color","#4F6F57","color","#f6f3ea",3,"click"],["nz-icon",""],[3,"nzData"],[2,"color","#4F6F57"],["nzShowExpand",""],[4,"ngFor","ngForOf"],[3,"nzTabPosition","nzType"],["nzTitle","Agregar Operaci\xF3n",3,"nzVisibleChange","nzOnCancel","nzVisible","nzContent","nzFooter"],[3,"class",4,"ngIf"],["nz-dropdown","","nzPlacement","bottomRight",3,"nzDropdownMenu"],["nz-icon","","nzType","ellipsis","nzTooltipTitle","M\xE1s informaci\xF3n","nzTooltipPlacement","topLeft","nz-tooltip",""],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click",4,"ngIf"],["nz-menu-divider",""],["nz-menu-item","",3,"click"],["nz-icon","","nzTheme","twotone","nzTwotoneColor","#de4436","nzType","delete"],["nz-icon","","nzType","check-circle"],["nz-icon","","nzType","pause-circle"],[3,"nzTitle",4,"ngIf"],[3,"nzTitle"],[3,"accountId","userCanUpdate","routeId"],["nzFor","route",3,"nzSpan"],[3,"nzSpan"],["nzAllowClear","","nzPlaceHolder","Selecciona una Operaci\xF3n",3,"ngModel","ngModelChange",4,"ngIf"],["nzAllowClear","","nzPlaceHolder","Selecciona una Operaci\xF3n",3,"ngModelChange","ngModel"],[3,"nzLabel",4,"ngFor","ngForOf"],[3,"nzLabel"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],["nz-button","",2,"background-color","#4F6F57","color","#f6f3ea",3,"click"]],template:function(r,o){if(r&1){let n=re();v(0,"button",4),q("click",function(){return H(n),B(o.showModal())}),N(1,"i",5),D(2,"Asignar Operaci\xF3n"),y(),v(3,"nz-table",6,0)(5,"thead")(6,"tr")(7,"th",7),D(8,"Empresa"),y(),v(9,"th",8),D(10,"Nombre"),y(),v(11,"th",7),D(12,"Descripci\xF3n"),y(),v(13,"th",7),D(14,"Activa"),y(),v(15,"th",7),D(16,"Habilitada"),y(),N(17,"th"),y()(),v(18,"tbody"),$(19,$I,12,16,"tr",9),y()(),v(20,"nz-tabset",10),$(21,jI,2,1,"div",9),y(),v(22,"nz-modal",11),ht("nzVisibleChange",function(a){return H(n),ct(o.isModalVisible,a)||(o.isModalVisible=a),B(a)}),q("nzOnCancel",function(){return H(n),B(o.handleCancel())}),y(),$(23,YI,6,3,"ng-template",null,1,Re)(25,XI,4,0,"ng-template",null,2,Re)}if(r&2){let n=ue(4),s=ue(24),a=ue(26);_(3),E("nzData",o.vendorRoutesList),_(16),E("ngForOf",n.data),_(),E("nzTabPosition","top")("nzType","line"),_(),E("ngForOf",o.vendorRoutesList),_(),ut("nzVisible",o.isModalVisible),E("nzContent",s)("nzFooter",a)}},dependencies:[At,Dt,Tt,Lt,Kt,pi,Ei,gi,en,Qo,Zo,rn,Jo,tn,pr,hr,cr,qo,Bi,Ko,fr,Uo,Vt,Nt,kt,yr,Cr,jy,Ot,jr,Xo,Yo,Jy],encapsulation:2})}}return i})();function QI(i,t){if(i&1&&N(0,"app-shared-vendor-settings",1),i&2){let e=O();E("vendorId",e.user.vendorId)("userCanUpdate",!1)}}var EY=(()=>{class i{constructor(){this.recordSelected=!1,this.rowGroupPanelShow="always",this.authService=ie(bt),this.routesService=ie(Kr),this.columnDefs=[{headerName:"#",checkboxSelection:!0,suppressSizeToFit:!0,suppressSorting:!0},{headerName:"Id",field:"id",hide:!0},{headerName:"Nombre",field:"name",enableRowGroup:!0},{headerName:"Recorrido",field:"description",enableRowGroup:!0,filter:"text"},{headerName:"Tipo",field:"routeType",enableRowGroup:!0,filter:"text"},{headerName:"Clima",field:"has_ac",enableRowGroup:!0,filter:"text",cellRenderer:function(e){let r=e.value===!0?"color--behance":"ag-faded",o="";return o=`<i class="material-icons ${r}">ac_unit</i>`,o}},{headerName:"Control de operaci\xF3n",headerClass:"centered",children:[{headerName:"Kmz",field:"kmzUrl",cellRenderer:function(e){let r=typeof e.value<"u"&&e.value!="no route designated"?"check_circle":"cancel",o=typeof e.value<"u"&&e.value!="no route designated"?"color--success":"color--dark",n="";return n=`<i class="material-icons ${o}">${r}</i>`,n}},{headerName:"Geocerca partida",field:"geofenceBegin",cellRenderer:function(e){let r=typeof e.value<"u"&&e.value.length>0?"check_circle":"cancel",o=typeof e.value<"u"&&e.value.length>0?"color--success":"color--dark",n="";return n=`<i class="material-icons ${o}">${r}</i>`,n}},{headerName:"Geocerca destino",field:"geofenceEnd",cellRenderer:function(e){let r=typeof e.value<"u"&&e.value.length>0?"check_circle":"close-circle",o=typeof e.value<"u"&&e.value.length>0?"color--success":"color--dark",n="";return n=`<i nz-icon nzType="${r}" nzTheme="outline"></i>`,n}},{headerName:"Activa",field:"active",cellEditor:"popupSelect",editable:!0,cellRenderer:function(e){let r=typeof e.value>"u"?"cancel":e.value?"check_circle":"cancel",o=typeof e.value>"u"?"color-dark":e.value?"color--success":"color--dark",n="";return n=`<i class="material-icons ${o}">${r}</i>`,n},cellEditorParams:{values:["Si","No"]}}]}],this.authService.user.subscribe(e=>{e&&(this.user=e,this.getRoutes(),this.initializeGrid())})}ngOnInit(){}initializeGrid(){this.rowGroupPanelShow=this.rowGroupPanelShow,this.initializeGridOptions()}initializeGridOptions(){this.gridOptions={columnDefs:this.columnDefs,rowData:null,rowSelection:"single",pagination:!0,enableFilter:!0,enableStatusBar:!0,alwaysShowStatusBar:!1,enableRangeSelection:!0,paginationPageSize:50,localeText:{page:"p\xE1gina",more:"m\xE1s",to:"a",of:"de",next:"siguiente",last:"\xFAltimo",first:"primero",previous:"anterior",loadingOoo:"Cargando ...",selectAll:"Seleccionar todo",searchOoo:"Buscar ...",blanks:"Blanco",filterOoo:"Filtrar ...",applyFilter:"Aplicar filtro ...",equals:"igual",notEqual:"no es igual",lessThanOrEqual:"menor que o igual",greaterThanOrEqual:"mayor que o igual",inRange:"en un rango",lessThan:"menor que",greaterThan:"mayor que",contains:"contiene",notContains:"no contiene",startsWith:"inicia con",endsWith:"termina con",group:"grupo",columns:"columnas",rowGroupColumns:"Columnas pivote",rowGroupColumnsEmptyMessage:"por favor arrastre las columnas al grupo",valueColumns:"Columnas valor",pivotMode:"Modo pivote",groups:"grupos",values:"valores",pivots:"pivotes",valueColumnsEmptyMessage:"arrastre columnas para agregar",pivotColumnsEmptyMessage:"arrastre aqu\xED para pivotes",noRowsToShow:"no hay informaci\xF3n",pinColumn:"anclar columna",valueAggregation:"valor agregaci\xF3n",autosizeThiscolumn:"autojustar columna",autosizeAllColumns:"autoajustar todas las columnas",groupBy:"agrupar por",ungroupBy:"desagrupar por",resetColumns:"resetear columnas",expandAll:"expandir todo",collapseAll:"colapsar todo",toolPanel:"panel de herramientas",pinLeft:"anclar <<",pinRight:"anclar >>",noPin:"desanclar <>",sum:"sum",min:"min",max:"max",none:"nada",count:"conteo",average:"promedio",copy:"copiar",copyWithHeaders:"copiar con encabezados",ctrlC:"ctrl-C",paste:"pegar",ctrlV:"ctrl-V",export:"Exportar",csvExport:"Exportar a CSV",excelExport:"Exportar a Excel"}}}onSelectionChanged(){this.selectedRows=this.gridOptions.api.getSelectedRows().length}onGridReady(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.autoSizeAll()}autoSizeAll(){var e=[];this.gridColumnApi.getAllColumns().forEach(function(r){e.push(r.colId)}),this.gridColumnApi.autoSizeColumns(e)}getRoutes(){this.routesService.getRoutes(this.user.customerId).pipe(ce(e=>e.map(r=>{let o=r.payload.doc.id,n=r.payload.doc.data();return me({id:o},n)}))).subscribe(e=>{this.routesList=e})}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=ke({type:i,selectors:[["app-routes"]],decls:2,vars:1,consts:[[3,"vendorId","userCanUpdate",4,"ngIf"],[3,"vendorId","userCanUpdate"]],template:function(r,o){r&1&&(v(0,"nz-content"),$(1,QI,1,2,"app-shared-vendor-settings",0),y()),r&2&&(_(),E("ngIf",o.user))},dependencies:[Dt,Gy,xg]})}}return i})();var rx=Qn(Ts());var ZI=(i,t,e)=>[i,t,e],JI=(i,t)=>["/vendor/vehicle/edit",i,t];function eF(i,t){i&1&&N(0,"i",21)}function tF(i,t){if(i&1){let e=re();v(0,"i",23),q("click",function(){H(e);let o=O(3);return o.searchValue="",B(o.searchByValue())}),y()}}function iF(i,t){if(i&1&&$(0,tF,1,0,"i",22),i&2){let e=O(2);E("ngIf",e.searchValue)}}function rF(i,t){if(i&1){let e=re();v(0,"form",24),q("ngSubmit",function(){H(e);let o=O(2);return B(o.submitForm())}),v(1,"nz-form-item")(2,"nz-form-control",25)(3,"nz-input-group",26),N(4,"input",27),y()()(),v(5,"div",14)(6,"div",28)(7,"nz-form-item")(8,"nz-form-control",29)(9,"nz-input-group",30),N(10,"input",31),y()()()(),v(11,"div",28)(12,"nz-form-item")(13,"nz-form-control",32)(14,"nz-input-group",30),N(15,"input",33),y()()()()()()}if(i&2){let e=O(2);E("formGroup",e.vehicleForm)}}function oF(i,t){if(i&1){let e=re();v(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14)(4,"div",15)(5,"nz-input-group",16)(6,"input",17),ht("ngModelChange",function(o){H(e);let n=O();return ct(n.searchValue,o)||(n.searchValue=o),B(o)}),q("ngModelChange",function(){H(e);let o=O();return B(o.searchByValue())}),y()(),$(7,eF,1,0,"ng-template",null,0,Re)(9,iF,1,1,"ng-template",null,1,Re),y()()(),v(11,"div",13)(12,"div",18)(13,"button",19),q("click",function(){H(e);let o=O();return B(o.showModal())}),v(14,"span"),D(15,"Nuevo Veh\xEDculo"),y()(),v(16,"nz-modal",20),q("nzOnCancel",function(){H(e);let o=O();return B(o.handleCancel())})("nzOnOk",function(){H(e);let o=O();return B(o.submitForm())}),y(),$(17,rF,16,1,"ng-template",null,2,Re),y()()()()}if(i&2){let e=ue(8),r=ue(10),o=ue(18),n=O();_(5),E("nzPrefix",e)("nzSuffix",r),_(),ut("ngModel",n.searchValue),_(10),E("nzVisible",n.isVisible)("nzOkDisabled",!n.vehicleForm.valid)("nzContent",o)}}function nF(i,t){if(i&1&&N(0,"nz-avatar",38),i&2){let e=O().$implicit;E("nzText",e.name)("nzSrc",e.avatar)}}function sF(i,t){i&1&&(v(0,"nz-tag",40),D(1,"Deshabilitado "),y()),i&2&&E("nzColor","red")}function aF(i,t){i&1&&(v(0,"nz-tag",40),D(1,"Habilitado "),y()),i&2&&E("nzColor","cyan")}function lF(i,t){if(i&1&&$(0,sF,2,1,"nz-tag",39)(1,aF,2,1,"nz-tag",39),i&2){let e=O().$implicit;E("ngIf",e.disabled),_(),E("ngIf",!e.disabled)}}function dF(i,t){if(i&1&&(v(0,"a",41),N(1,"i",42),y()),i&2){let e=O().$implicit,r=O(2);E("routerLink",Rc(1,JI,r.vendorId,e.id))}}function uF(i,t){if(i&1){let e=re();v(0,"a",43),q("click",function(){H(e);let o=O().$implicit,n=O(2);return B(n.deletePermission(o))}),N(1,"i",44),y()}}function cF(i,t){if(i&1&&(v(0,"div",35)(1,"nz-card",36),N(2,"nz-card-meta",37),y(),$(3,nF,1,2,"ng-template",null,3,Re)(5,lF,2,2,"ng-template",null,4,Re)(7,dF,2,4,"ng-template",null,5,Re)(9,uF,2,0,"ng-template",null,6,Re),y()),i&2){let e=t.$implicit,r=ue(4),o=ue(6),n=ue(8),s=ue(10);_(),E("nzActions",Mc(3,ZI,o,n,s)),_(),E("nzAvatar",r)("nzTitle",e.name)}}function hF(i,t){if(i&1&&(v(0,"div",14),$(1,cF,11,7,"div",34),y()),i&2){let e=O();_(),E("ngForOf",e.devicesList)}}function pF(i,t){i&1&&(v(0,"nz-card")(1,"div",14)(2,"div",45)(3,"nz-card")(4,"div",46)(5,"h5"),D(6,"Veh\xEDculos"),y()(),N(7,"div",47),y()()()())}var ox=(()=>{class i{constructor(e,r,o,n,s){this.rolService=e,this.authService=r,this.fb=o,this.messageService=n,this.router=s,this.devicesService=ie(Jc),this.vendorId="",this.loadedDevicesList=[],this.view="cardView",this.loading=!0,this.stopSubscriptions$=new it,this.searchValue="",this.isVisible=!1,this.isOkLoading=!1,this.infoLoad=[],this.popupParent=document.querySelector("body")}ngOnInit(){this.authService.user.pipe(xe(this.stopSubscriptions$),ft(e=>{this.getSubscriptions(this.vendorId),this.createForm()}),$o(e=>(this.user=e,this.user&&this.user.rolId?this.rolService.getRol(this.user.rolId).valueChanges():[])),ft(e=>{this.infoLoad=e,this.userlevelAccess=this.infoLoad?.optionAccessLevel}),bc(e=>(this.sendMessage("error",e),Ho(null)))).subscribe()}ngOnDestroy(){this.stopSubscriptions$.next(!1),this.stopSubscriptions$.complete()}getSubscriptions(e){this.vendorId!=""?this.devicesService.getDevices(e).pipe(xe(this.stopSubscriptions$),ce(r=>r.map(o=>{let n=o.payload.doc.data(),s=o.payload.doc.id;return dr(me({},n),{id:s})}))).subscribe(r=>{this.devicesList=r,this.loadedDevicesList=rx.sortBy(r,["name","asc"])}):this.sendMessage("error","VendorId no encontrado , favor de validar")}sendMessage(e,r){this.messageService.create(e,r)}searchByValue(){this.initializeList();let e=this.searchValue;e&&(this.devicesList=this.devicesList.filter(r=>r.name&&e?r.name.toLowerCase().indexOf(e.toLowerCase())>-1:!1))}initializeList(){this.devicesList=this.loadedDevicesList}showModal(){this.isVisible=!0}handleCancel(){this.isVisible=!1}createForm(){this.vehicleForm=this.fb.group({name:["",[K.required,K.minLength(3),K.maxLength(10)]],licensePlates:["",[K.required,K.minLength(6),K.maxLength(10)]],federalLicencePlates:[null],seats:[0,[K.required]],active:[!0],disabled:[!1],model:[0]})}submitForm(){this.isOkLoading=!0,this.userlevelAccess!="3"?this.vendorId!=""?this.devicesService.addDevice(this.vendorId,this.vehicleForm.value).then(()=>{this.isOkLoading=!1,this.isVisible=!1}).catch(e=>{this.isOkLoading=!1,this.sendMessage("error",e)}):this.sendMessage("error","VendorId no establecido, favor de validar con administraci\xF3n"):this.sendMessage("error","El usuario no tiene permisos para agregar datos, favor de contactar al administrador.")}deletePermission(e){this.userlevelAccess=="1"?this.vendorId!=""?this.devicesService.deleteDevice(this.vendorId,e.id):this.sendMessage("error","VendorId no establecido, favor de validar con administraci\xF3n"):this.sendMessage("error","El usuario no tiene permisos para borrar datos, favor de contactar al administrador.")}cancelDelete(){}getContextMenuItems(e){e.context=this;var r=[{name:"Editar "+e.node.data.name,action:()=>{},cssClasses:["redFont","bold"]},"separator",{name:"Eliminar "+e.node.data.name,action:function(){window.alert("Alerting about "+e.value)},cssClasses:["redFont","bold"]},{name:"Desactivar",checked:!0,action:function(){},icon:'<img src="../images/skills/mac.png"/>'},"copy","separator","chartRange"];return r}static{this.\u0275fac=function(r){return new(r||i)(ee(Hi),ee(bt),ee(hi),ee(Mt),ee(Ds))}}static{this.\u0275cmp=ke({type:i,selectors:[["app-shared-vendor-vehicles"]],inputs:{vendorId:"vendorId"},decls:4,vars:3,consts:[["searchPrefix",""],["clearIconSuffix",""],["modalContent",""],["avatarTemplate",""],["actionSetting",""],["actionEdit",""],["actionEllipsis",""],["class","page-header",4,"ngIf"],[1,"container-fluid"],["class","row",4,"ngIf"],[4,"ngIf"],[1,"page-header"],[1,"row","align-items-md-center"],[1,"col-md-6"],[1,"row"],[1,"col-md-5"],[3,"nzPrefix","nzSuffix"],["type","text","nz-input","","placeholder","Buscar por nombre",3,"ngModelChange","ngModel"],[1,"text-md-right","m-v-10"],["nz-button","",2,"background-color","#4F6F57","color","#f6f3ea",3,"click"],["nzTitle","Nuevo Veh\xEDculo","nzCancelText","Cancelar","nzOkText","Guardar",3,"nzOnCancel","nzOnOk","nzVisible","nzOkDisabled","nzContent"],["nz-icon","",1,"opacity-04"],["nz-icon","","nz-tooltip","","class","ant-input-clear-icon","nzTheme","fill",3,"click",4,"ngIf"],["nz-icon","","nz-tooltip","","nzTheme","fill",1,"ant-input-clear-icon",3,"click"],["nz-form","",1,"login-form",3,"ngSubmit","formGroup"],["nzErrorTip","Por favor escriba el nombre del veh\xEDculo"],["nzPrefixIcon","user"],["type","text","nz-input","","formControlName","name","placeholder","Identificaci\xF3n del veh\xEDculo"],[1,"col-md-6","col-sm-12"],["nzErrorTip","Por favor escriba las placas del veh\xEDculo"],["nzPrefixIcon","lock"],["type","text","nz-input","","formControlName","licensePlates","placeholder","Placas"],["nzErrorTip","Por favor escriba la cantidad de asientos de este veh\xEDculo"],["type","number","nz-input","","formControlName","seats","placeholder","N\xFAmero de asientos"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"col-md-3"],[3,"nzActions"],[3,"nzAvatar","nzTitle"],["nzSize","large",2,"vertical-align","middle",3,"nzText","nzSrc"],["class","m-b-0",3,"nzColor",4,"ngIf"],[1,"m-b-0",3,"nzColor"],["routerLinkActive","router-link-active",3,"routerLink"],["nz-icon","","nzType","edit","theme","outline"],[3,"click"],["nz-icon","","nzTooltipTitle","Eliminar","nzType","delete","theme","outline"],[1,"col-md-12"],[1,"d-flex","justify-content-between","align-items-center"],[1,"m-t-30"]],template:function(r,o){r&1&&($(0,oF,19,6,"div",7),v(1,"div",8),$(2,hF,2,1,"div",9)(3,pF,8,0,"nz-card",10),y()),r&2&&(E("ngIf",o.devicesList),_(2),E("ngIf",o.view=="cardView"),_(),E("ngIf",o.view=="listView"))},dependencies:[At,Dt,Tt,Lt,Kt,xi,pi,gi,Gi,Hc,Gc,pr,Ur,Uo,Vt,Nt,kt,Xt,Bc,on,Va,Ga,di,Vi,Ha,Ot,li,ui,ci,jr]})}}return i})();function fF(i,t){if(i&1){let e=re();v(0,"li",45),q("click",function(){H(e);let o=O().$implicit,n=O(2);return B(n.toggleActive(o))}),N(1,"i",46),D(2," Habilitar "),y()}}function mF(i,t){if(i&1){let e=re();v(0,"li",45),q("click",function(){H(e);let o=O().$implicit,n=O(2);return B(n.toggleActive(o))}),N(1,"i",47),D(2," Deshabilitar "),y()}}function vF(i,t){if(i&1){let e=re();v(0,"li",45),q("click",function(){H(e);let o=O().$implicit,n=O(2);return B(n.editRecord(o))}),N(1,"i",48),D(2," Editar "),y()}}function yF(i,t){if(i&1){let e=re();v(0,"li",45),q("click",function(){H(e);let o=O().$implicit,n=O(2);return B(n.editRecordPassword(o))}),N(1,"i",48),D(2," Restablecer Contrase\xF1a "),y()}}function CF(i,t){if(i&1&&(v(0,"nz-tag",49),D(1),y()),i&2){let e=O().$implicit;E("nzColor","blue"),_(),J(e.status)}}function bF(i,t){if(i&1&&(v(0,"nz-tag",49),D(1),y()),i&2){let e=O().$implicit;E("nzColor","cyan"),_(),J(e.status)}}function wF(i,t){if(i&1&&(v(0,"nz-tag",49),D(1),y()),i&2){let e=O().$implicit;E("nzColor","red"),_(),J(e.status)}}function SF(i,t){if(i&1){let e=re();v(0,"div",26)(1,"nz-card")(2,"div",27)(3,"div",28),N(4,"nz-avatar",29),v(5,"div",30)(6,"h5",31),D(7),y(),v(8,"span",32),D(9),y()()(),v(10,"div")(11,"a",33),N(12,"i",34),y(),v(13,"nz-dropdown-menu",null,2)(15,"ul",35),$(16,fF,3,0,"li",36)(17,mF,3,0,"li",36)(18,vF,3,0,"li",36)(19,yF,3,0,"li",36),N(20,"li",37),v(21,"li",38),q("nzOnConfirm",function(){let o=H(e).$implicit,n=O(2);return B(n.deletePermission(o))})("nzOnCancel",function(){H(e);let o=O(2);return B(o.cancelDelete())}),N(22,"i",39),D(23," Eliminar "),y()()()()(),v(24,"p",40),D(25),y(),v(26,"p",41),D(27),y(),v(28,"p",41),D(29),y(),v(30,"div",42)(31,"div",43)(32,"div"),$(33,CF,2,2,"nz-tag",44)(34,bF,2,2,"nz-tag",44)(35,wF,2,2,"nz-tag",44),y(),N(36,"div"),y()()()()}if(i&2){let e=t.$implicit,r=ue(14);_(4),E("nzSize",40)("nzSrc",e.photoURL),_(3),J(e.displayName),_(2),J(e.employeeId),_(2),E("nzDropdownMenu",r),_(5),E("ngIf",!e.active),_(),E("ngIf",e.active),_(),E("ngIf",e.active),_(),E("ngIf",e.active),_(6),J(e.legalName),_(2),J(e.primaryContact),_(2),J(e.primaryEmail),_(4),E("ngIf",e.status=="In Progress"),_(),E("ngIf",e.status=="Ready"),_(),E("ngIf",e.status=="Behind")}}function _F(i,t){if(i&1&&(v(0,"div",10),$(1,SF,37,15,"div",25),y()),i&2){let e=O();_(),E("ngForOf",e.driversList)}}function xF(i,t){if(i&1){let e=re();v(0,"li",45),q("click",function(){H(e);let o=O().$implicit,n=O(2);return B(n.toggleActive(o))}),N(1,"i",46),D(2," Habilitar "),y()}}function EF(i,t){if(i&1){let e=re();v(0,"li",45),q("click",function(){H(e);let o=O().$implicit,n=O(2);return B(n.toggleActive(o))}),N(1,"i",47),D(2," Deshabilitar "),y()}}function DF(i,t){if(i&1){let e=re();v(0,"li",45),q("click",function(){H(e);let o=O().$implicit,n=O(2);return B(n.editRecord(o))}),N(1,"i",48),D(2," Editar "),y()}}function TF(i,t){if(i&1){let e=re();v(0,"tr")(1,"td"),D(2),y(),v(3,"td"),D(4),y(),v(5,"td"),D(6),y(),v(7,"td"),D(8),y(),v(9,"td",52)(10,"div")(11,"a",33),N(12,"i",34),y(),v(13,"nz-dropdown-menu",null,4)(15,"ul",35),$(16,xF,3,0,"li",36)(17,EF,3,0,"li",36)(18,DF,3,0,"li",36),N(19,"li",37),v(20,"li",45),q("click",function(){let o=H(e).$implicit,n=O(2);return B(n.deletePermission(o))}),N(21,"i",39),D(22," Eliminar "),y()()()()()()}if(i&2){let e=t.$implicit,r=ue(14);_(2),J(e.firstName),_(2),J(e.lastName),_(2),J(e.email),_(2),J(e.active?"Si":"No"),_(3),E("nzDropdownMenu",r),_(5),E("ngIf",!e.active),_(),E("ngIf",e.active),_(),E("ngIf",e.active)}}function PF(i,t){if(i&1&&(v(0,"nz-card")(1,"nz-table",50,3)(3,"thead")(4,"tr")(5,"th"),D(6,"Nombre(s)"),y(),v(7,"th"),D(8,"Apellido(s)"),y(),v(9,"th"),D(10,"Usuario"),y(),v(11,"th"),D(12,"Activo"),y(),N(13,"th"),y()(),v(14,"tbody"),$(15,TF,23,8,"tr",51),y()()()),i&2){let e=ue(2),r=O();_(),E("nzData",r.driversList),_(14),E("ngForOf",e.data)}}function RF(i,t){i&1&&(go(0),D(1,"Por favor confirmar contrase\xF1a!"),fo())}function MF(i,t){i&1&&(go(0),D(1,"La contrase\xF1a es inconsistente!"),fo())}function IF(i,t){if(i&1&&$(0,RF,2,0,"ng-container",23)(1,MF,2,0,"ng-container",23),i&2){let e=t.$implicit;E("ngIf",e.hasError("required")),_(),E("ngIf",e.hasError("verifyPassword1"))}}function FF(i,t){if(i&1){let e=re();v(0,"form",54),q("ngSubmit",function(){H(e);let o=O(2);return B(o.createDriver())}),v(1,"nz-form-item")(2,"nz-form-label",55),D(3,"Nombre"),y(),v(4,"nz-form-control",56),N(5,"input",57),y()(),v(6,"nz-form-item")(7,"nz-form-label",58),D(8,"Apellido(s)"),y(),v(9,"nz-form-control",56),N(10,"input",59),y()(),v(11,"nz-form-item")(12,"nz-form-label",60),D(13,"Id Empleado"),y(),v(14,"nz-form-control",61),N(15,"input",62),y()(),v(16,"nz-form-item")(17,"nz-form-label",63),D(18,"Correo electr\xF3nico"),y(),v(19,"nz-form-control",64),N(20,"input",65),y()(),v(21,"nz-form-item")(22,"nz-form-label",66),D(23,"Contrase\xF1a"),y(),v(24,"nz-form-control",67)(25,"input",68),q("ngModelChange",function(){H(e);let o=O(2);return B(o.validateConfirmPassword1())}),y()()(),v(26,"nz-form-item")(27,"nz-form-label",69),D(28,"Repetir Contrase\xF1a"),y(),v(29,"nz-form-control",70),N(30,"input",71),$(31,IF,2,2,"ng-template",null,5,Re),y()()()}if(i&2){let e=ue(32),r=O(2);E("formGroup",r.signupForm),_(2),E("nzSm",8)("nzXs",24),_(2),E("nzSm",14)("nzXs",24),_(3),E("nzSm",8)("nzXs",24),_(2),E("nzSm",14)("nzXs",24),_(3),E("nzSm",8)("nzXs",24),_(2),E("nzSm",14)("nzXs",24),_(3),E("nzSm",8)("nzXs",24),_(2),E("nzSm",14)("nzXs",24),_(3),E("nzSm",8)("nzXs",24),_(2),E("nzSm",14)("nzXs",24),_(3),E("nzSm",8)("nzXs",24),_(2),E("nzSm",14)("nzXs",24)("nzErrorTip",e)}}function zF(i,t){if(i&1&&N(0,"nz-option",76),i&2){let e=t.$implicit;E("nzValue",e.id)("nzLabel",e.name)}}function AF(i,t){if(i&1){let e=re();v(0,"form",54),q("ngSubmit",function(){H(e);let o=O(2);return B(o.createDriver())}),v(1,"nz-form-item")(2,"nz-form-label",55),D(3,"Nombre"),y(),v(4,"nz-form-control",56),N(5,"input",57),y()(),v(6,"nz-form-item")(7,"nz-form-label",58),D(8,"Apellido(s)"),y(),v(9,"nz-form-control",56),N(10,"input",59),y()(),v(11,"nz-form-item")(12,"nz-form-label",63),D(13,"Correo electr\xF3nico"),y(),v(14,"nz-form-control",64),N(15,"input",72),y()(),v(16,"nz-form-item")(17,"nz-form-label",60),D(18,"Id Empleado "),y(),v(19,"nz-form-control",61),N(20,"input",62),y()(),v(21,"nz-form-item")(22,"nz-form-label",73),D(23,"Empresa"),y(),v(24,"nz-select",74),$(25,zF,1,2,"nz-option",75),y()()()}if(i&2){let e=O(2);E("formGroup",e.signupFormEdit),_(2),E("nzSm",8)("nzXs",24),_(2),E("nzSm",14)("nzXs",24),_(3),E("nzSm",8)("nzXs",24),_(2),E("nzSm",14)("nzXs",24),_(3),E("nzSm",8)("nzXs",24),_(2),E("nzSm",14)("nzXs",24),_(3),E("nzSm",8)("nzXs",24),_(2),E("nzSm",14)("nzXs",24),_(3),E("nzSm",8)("nzXs",24),_(3),E("ngForOf",e.customerList)}}function OF(i,t){i&1&&(go(0),D(1,"Por favor confirmar contrase\xF1a!"),fo())}function LF(i,t){i&1&&(go(0),D(1,"La contrase\xF1a es inconsistente!"),fo())}function NF(i,t){if(i&1&&$(0,OF,2,0,"ng-container",23)(1,LF,2,0,"ng-container",23),i&2){let e=t.$implicit;E("ngIf",e.hasError("required")),_(),E("ngIf",e.hasError("verifyPasswordSec"))}}function kF(i,t){if(i&1){let e=re();v(0,"form",54),q("ngSubmit",function(){H(e);let o=O(2);return B(o.createDriver())}),v(1,"nz-form-item")(2,"nz-form-label",66),D(3,"Contrase\xF1a"),y(),v(4,"nz-form-control",67)(5,"input",68),q("ngModelChange",function(){H(e);let o=O(2);return B(o.validateConfirmPassword())}),y()()(),v(6,"nz-form-item")(7,"nz-form-label",77),D(8,"Repetir Contrase\xF1a"),y(),v(9,"nz-form-control",70),N(10,"input",78),$(11,NF,2,2,"ng-template",null,6,Re),y()()()}if(i&2){let e=ue(12),r=O(2);E("formGroup",r.signupFormPassword),_(2),E("nzSm",8)("nzXs",24),_(2),E("nzSm",14)("nzXs",24),_(3),E("nzSm",8)("nzXs",24),_(2),E("nzSm",14)("nzXs",24)("nzErrorTip",e)}}function VF(i,t){if(i&1&&$(0,FF,33,26,"form",53)(1,AF,26,20,"form",53)(2,kF,13,10,"form",53),i&2){let e=O();E("ngIf",!e.isEditMode&&!e.isEditPassword),_(),E("ngIf",e.isEditMode&&!e.isEditPassword),_(),E("ngIf",e.isEditMode&&e.isEditPassword)}}var nx=(()=>{class i{constructor(e,r,o){this.afs=e,this.nzMessageService=r,this.fb=o,this.vendorId="",this.driversService=ie(nn),this.driversList=[],this.driversListLoaded=[],this.rolService=ie(Hi),this.authService=ie(bt),this.view="listView",this.isVisibleNewDriver=!1,this.isCreatingDriver=!1,this.isEditMode=!1,this.isEditPassword=!1,this.responseUpdate="",this.modalName="Agregar PR",this.infoLoad=[],this.customerList=[],this.accountsService=ie(gr),this.stopSubscription$=new it,this.infoSegment=[],this.confirmValidatorPass=n=>{if(n.value){if(n.value!==this.signupFormPassword.controls.password.value)return{verifyPasswordSec:!0,error:!0}}else return{error:!0,required:!0};return{}},this.confirmValidator=n=>{if(n.value){if(n.value!==this.signupForm.controls.password.value)return{verifyPassword1:!0,error:!0}}else return{error:!0,required:!0};return{}},this.authService.user.subscribe(n=>{n&&(this.user=n,this.user!==null&&this.user!==void 0&&this.user.rolId!==void 0&&(this.rolService.getRol(this.user.rolId).valueChanges().subscribe(s=>{this.infoLoad=s,this.userlevelAccess=this.infoLoad.optionAccessLavel}),this.accountsService.getSegmentLevel(this.user.idSegment).pipe(xe(this.stopSubscription$),ce(s=>{let a=s.payload.id,l=s.payload.data();return me({id:a},l)}),ft(s=>(this.infoSegment=s,s))).subscribe()))})}ngOnInit(){this.getSubscriptions(),this.createForm()}sendMessage(e,r){this.nzMessageService.create(e,r)}createForm(){this.signupForm=this.fb.group({id:[],firstName:["",K.compose([K.required,K.maxLength(30),K.minLength(5)])],lastName:["",K.compose([K.required,K.maxLength(30),K.minLength(5)])],email:["",K.compose([K.required,K.email])],employeeId:["",K.compose([K.minLength(7),K.maxLength(7),K.required])],vendorId:[this.vendorId,K.compose([K.required])],vendorName:[""],displayName:[""],password:["",K.compose([K.required])],verifyPassword1:["",[this.confirmValidator]],customerId:[""]}),this.signupFormEdit=this.fb.group({id:[],firstName:["",K.compose([K.required,K.maxLength(30),K.minLength(5)])],lastName:["",K.compose([K.required,K.maxLength(30),K.minLength(5)])],email:["",K.compose([K.required,K.email])],employeeId:["",K.compose([K.minLength(7),K.maxLength(7),K.required])],vendorId:[this.vendorId,K.compose([K.required])],vendorName:[""],displayName:[""],customerId:[""]}),this.signupFormPassword=this.fb.group({id:[],password:["",K.compose([K.required])],verifyPasswordSec:["",[this.confirmValidatorPass]]})}ngOnDestroy(){this.driversSubscription&&this.driversSubscription.unsubscribe(),this.customerSubscription&&this.customerSubscription.unsubscribe()}getSubscriptions(){this.vendorId!=""&&this.driversService.getDriversByCustomergetDrivers(this.vendorId).pipe(ce(e=>e.map(r=>{let o=r.payload.doc.id,n=r.payload.doc.data();return me({id:o},n)}))).subscribe(e=>{this.driversList=e,this.driversListLoaded=e})}toggleActive(e){this.driversService.toggleActiveDriver(e.uid,e.active)}deletePermission(e){this.userlevelAccess=="1"?this.driversService.deleteDriver(e.uid):this.sendMessage("error","El usuario no tiene permisos para borrar datos, favor de contactar al administrador.")}cancelDelete(){}editRecord(e){this.isEditMode=!0,this.infoSegment.nivelNum!==void 0&&this.infoSegment.nivelNum==1?(this.cDocument=this.afs.collection("customers").doc(this.user.customerId),this.customerSubscription=this.cDocument.snapshotChanges().pipe(ce(r=>{let o=r.payload.id,n=r.payload.data();return me({id:o},n)})).subscribe(r=>{this.customerList=[r]})):(this.cCollection=this.afs.collection("customers",r=>r.where("active","==",!0)),this.customerSubscription=this.cCollection.snapshotChanges().pipe(ce(r=>r.map(o=>{let n=o.payload.doc.id,s=o.payload.doc.data();return me({id:n},s)}))).subscribe(r=>{this.customerList=r})),this.isEditPassword=!1,this.modalName="Editar PR",this.patchForm(e)}editRecordPassword(e){this.isEditMode=!0,this.isEditPassword=!0,this.modalName="Restablecer Contrase\xF1a",this.patchFormPassword(e)}patchForm(e){this.signupFormEdit.patchValue(me({},e)),this.openCreateDriverModal()}patchFormPassword(e){this.signupFormPassword.patchValue(me({},e)),this.openCreateDriverModal()}createDriver(){if(this.userlevelAccess!="3")if(this.isEditMode&&!this.isEditPassword)if(this.signupFormEdit.valid){let r=this.signupFormEdit.value;r.displayName=r.firstName+" "+r.lastName,this.driversService.updateDriver(r.id,r).then(()=>{this.isVisibleNewDriver=!1,this.isCreatingDriver=!1,this.isEditMode=!1,this.modalName="Agregar PR"}),this.nzMessageService.success("Se edit\xF3 el contacto con \xE9xito")}else Object.values(this.signupFormEdit.controls).forEach(r=>{r.invalid&&(r.markAsDirty(),r.updateValueAndValidity({onlySelf:!0}))});else!this.isEditMode&&!this.isEditPassword?this.signupForm.valid?(this.driversService.createDriver(this.signupForm.value).then(r=>{this.isVisibleNewDriver=!1,this.isCreatingDriver=!1,this.isEditMode=!1}),this.nzMessageService.success("Se agreg\xF3 con exito el PR")):Object.values(this.signupForm.controls).forEach(r=>{r.invalid&&(r.markAsDirty(),r.updateValueAndValidity({onlySelf:!0}))}):this.signupFormPassword.valid?(this.driversService.resetPassword(this.signupFormPassword.controls.id.value,this.signupFormPassword.controls.password.value).then(r=>{this.isEditPassword=!1,this.isEditMode=!1,this.isVisibleNewDriver=!1}),this.nzMessageService.success("Se actualiz\xF3 la contrase\xF1a con \xE9xito")):Object.values(this.signupFormPassword.controls).forEach(r=>{r.invalid&&(r.markAsDirty(),r.updateValueAndValidity({onlySelf:!0}))});else this.sendMessage("error","El usuario no tiene permisos para actualizar datos, favor de contactar al administrador.")}createDriverModal(){this.isEditMode=!1,this.isEditPassword=!1,this.signupForm.pristine,this.modalName="Agregar PR",this.openCreateDriverModal()}openCreateDriverModal(){this.isVisibleNewDriver=!0}closeNewDriverModal(){this.isVisibleNewDriver=!1}validateConfirmPassword(){setTimeout(()=>this.isEditPassword?this.signupFormPassword.controls.verifyPasswordSec.updateValueAndValidity():this.signupForm.controls.verifyPassword1.updateValueAndValidity())}validateConfirmPassword1(){setTimeout(()=>this.signupForm.controls.verifyPassword1.updateValueAndValidity())}getItems(e){let r=e;if(!r){this.driversList=this.driversListLoaded.slice();return}let o=r.toLowerCase();this.driversList=this.driversListLoaded.filter(n=>Object.values(n).some(s=>String(s).toLowerCase().includes(o)))}static{this.\u0275fac=function(r){return new(r||i)(ee(ur),ee(Mt),ee(hi))}}static{this.\u0275cmp=ke({type:i,selectors:[["app-shared-vendor-drivers"]],inputs:{vendorId:"vendorId"},decls:23,vars:7,consts:[["searchBar",""],["modalContent",""],["projectListSetting","nzDropdownMenu"],["listViewTable",""],["projectListSetting2","nzDropdownMenu"],["passwordErrorTpl1",""],["passwordErrorTplContra",""],[1,"page-header"],[1,"row","align-items-md-center"],[1,"col-md-6"],[1,"row"],["nz-icon","","nzTheme","outline",1,"search-icon"],["placeholder","Buscar",3,"keyup"],[1,"text-md-right","m-v-10"],[1,"m-r-10",3,"ngModelChange","ngModel"],["nz-radio-button","","nzValue","cardView","nzTitle","Vista tarjetas","nzPlacement","bottom","nz-tooltip",""],["nz-icon","","nzType","appstore","theme","outline",1,"font-size-16"],["nz-radio-button","","nzValue","listView","nzTitle","Vista tabla","nzPlacement","bottom","nz-tooltip",""],["nz-icon","","nzType","ordered-list","theme","outline",1,"font-size-16"],["nz-button","",2,"background-color","#4F6F57","color","#f6f3ea",3,"click"],["nz-icon","","nzType","plus"],[1,"container-fluid"],["class","row",4,"ngIf"],[4,"ngIf"],[3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible","nzTitle","nzOkLoading","nzContent"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"col-md-3"],[1,"d-flex","justify-content-between"],[1,"media"],["nzShape","square",2,"background-color","white","color","#4F6F57",3,"nzSize","nzSrc"],[1,"m-l-10"],[1,"m-b-0"],[1,"text-muted","font-size-13"],["nz-dropdown","","nzPlacement","bottomRight","nzTrigger","click",1,"text-gray","font-size-18",3,"nzDropdownMenu"],["nz-icon","","nzType","ellipsis","theme","outline"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click",4,"ngIf"],["nz-menu-divider",""],["nz-menu-item","","nz-popconfirm","","nzPopconfirmTitle","Est\xE1 seguro de eliminar este registro?","nzPopconfirmPlacement","bottom",3,"nzOnConfirm","nzOnCancel"],["nz-icon","","nzTheme","twotone","nzTwotoneColor","#de4436","nzType","delete"],[1,"m-t-25"],[1,"m-t-0","m-b-0"],[1,"m-t-20"],[1,"d-flex","justify-content-between","align-items-center"],["class","m-b-0",3,"nzColor",4,"ngIf"],["nz-menu-item","",3,"click"],["nz-icon","","nzType","check-circle"],["nz-icon","","nzType","pause-circle"],["nz-icon","","nzType","edit"],[1,"m-b-0",3,"nzColor"],[3,"nzData"],[4,"ngFor","ngForOf"],[1,"text-right"],["nz-form","",3,"formGroup","ngSubmit",4,"ngIf"],["nz-form","",3,"ngSubmit","formGroup"],["nzRequired","","nzFor","firstName",3,"nzSm","nzXs"],["nzErrorTip","Debe contener entre 5 y 30 caracteres.",3,"nzSm","nzXs"],["type","text","nz-input","","formControlName","firstName","id","firstName","placeholder","Nombre"],["nzRequired","","nzFor","lastName",3,"nzSm","nzXs"],["type","text","nz-input","","formControlName","lastName","id","lastName","placeholder","Apellido(s)"],["nzRequired","","nzFor","employeeId",3,"nzSm","nzXs"],["nzErrorTip","Debe contener entre 7 caracteres.",3,"nzSm","nzXs"],["type","text","nz-input","","formControlName","employeeId","id","employeeId","placeholder","Id Empleado"],["nzRequired","","nzFor","email",3,"nzSm","nzXs"],["nzErrorTip","No es un correo v\xE1lido!",3,"nzSm","nzXs"],["type","email","nz-input","","autocomplete","off","formControlName","email","id","email","placeholder","Correo electr\xF3nico"],["nzRequired","","id","password","nzFor","password",3,"nzSm","nzXs"],["nzHasFeedback","","nzErrorTip","Ingresar m\xEDnimo 7 caracteres",3,"nzSm","nzXs"],["type","password","nz-input","","formControlName","password","minlength","7","placeholder","Contrase\xF1a",3,"ngModelChange"],["nzRequired","","id","repPassword","nzFor","verifyPassword1",3,"nzSm","nzXs"],["nzHasFeedback","",3,"nzSm","nzXs","nzErrorTip"],["type","password","nz-input","","formControlName","verifyPassword1","placeholder","Repetir Contrase\xF1a"],["type","email","nz-input","","formControlName","email","id","email","placeholder","Correo electr\xF3nico"],[3,"nzSm","nzXs"],["formControlName","customerId","nzAllowClear","","nzPlaceHolder","Seleccione una Empresa"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],["nzRequired","","id","repPassword1","nzFor","verifyPasswordSec",3,"nzSm","nzXs"],["type","password","nz-input","","formControlName","verifyPasswordSec","placeholder","Repetir Contrase\xF1a"]],template:function(r,o){if(r&1){let n=re();v(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10),N(4,"i",11),v(5,"input",12,0),q("keyup",function(){H(n);let a=ue(6);return B(o.getItems(a.value))}),y()()(),v(7,"div",9)(8,"div",13)(9,"nz-radio-group",14),ht("ngModelChange",function(a){return H(n),ct(o.view,a)||(o.view=a),B(a)}),v(10,"label",15),N(11,"i",16),y(),v(12,"label",17),N(13,"i",18),y()(),v(14,"button",19),q("click",function(){return H(n),B(o.createDriverModal())}),N(15,"i",20),D(16,"Agregar"),y()()()()(),v(17,"div",21),$(18,_F,2,1,"div",22)(19,PF,16,2,"nz-card",23),y(),v(20,"nz-modal",24),ht("nzVisibleChange",function(a){return H(n),ct(o.isVisibleNewDriver,a)||(o.isVisibleNewDriver=a),B(a)}),q("nzOnCancel",function(){return H(n),B(o.closeNewDriverModal())})("nzOnOk",function(){return H(n),B(o.createDriver())}),y(),$(21,VF,3,3,"ng-template",null,1,Re)}if(r&2){let n=ue(22);_(9),ut("ngModel",o.view),_(9),E("ngIf",o.view=="cardView"),_(),E("ngIf",o.view=="listView"),_(),vy("nzTitle",o.modalName),ut("nzVisible",o.isVisibleNewDriver),E("nzOkLoading",o.isCreatingDriver)("nzContent",n)}},dependencies:[At,Dt,Tt,Lt,Kt,xi,pi,Ei,gi,Gi,Yy,Ky,en,Qo,Zo,rn,Jo,tn,pr,Ur,hr,cr,qo,Bi,Ko,fr,Uo,Vt,Nt,kt,Xt,on,yr,Cr,di,Vi,Ot,li,Ry,ui,ci,jr,Wc]})}}return i})();function HF(i,t){if(i&1){let e=re();v(0,"nz-card",35)(1,"div",36),N(2,"nz-avatar",37),v(3,"div",38)(4,"h5",39),D(5),y(),v(6,"p",40),D(7),y()(),v(8,"nz-upload",41),q("nzChange",function(o){H(e);let n=O(2);return B(n.handleChange(o))}),v(9,"button",42)(10,"span"),D(11,"Cambiar im\xE1gen"),y()()()(),N(12,"hr",43),v(13,"div",27)(14,"div",44)(15,"nz-form-item")(16,"nz-form-label"),D(17,"Nombre Comercial"),y(),v(18,"nz-form-control"),N(19,"input",45),y()()(),v(20,"div",46)(21,"nz-form-item")(22,"nz-form-label"),D(23,"RFC"),y(),v(24,"nz-form-control"),N(25,"input",47),y()()()(),v(26,"div",27)(27,"div",48)(28,"nz-form-item")(29,"nz-form-label"),D(30,"Raz\xF3n Social"),y(),v(31,"nz-form-control"),N(32,"input",49),y()()()()()}if(i&2){O();let e=ue(4),r=O();E("nzExtra",e),_(2),E("nzSize",80)("nzSrc",r.record.avatar),_(3),J(r.record.name),_(2),Et(" ",r.record.website," "),_(),E("nzBeforeUpload",r.beforeUpload)("nzShowUploadList",!1)}}function BF(i,t){i&1&&N(0,"nz-switch",50)}function $F(i,t){if(i&1){let e=re();v(0,"form",9),q("ngSubmit",function(){H(e);let o=O();return B(o.submitForm())}),v(1,"div",10),$(2,HF,33,7,"nz-card",11)(3,BF,1,0,"ng-template",null,0,Re),v(5,"nz-card",12)(6,"div",13)(7,"div",14)(8,"nz-form-item")(9,"nz-form-label",15),D(10,"Calle"),y(),v(11,"nz-form-control"),N(12,"input",16),y()()(),v(13,"div",17)(14,"nz-form-item")(15,"nz-form-label",15),D(16,"N\xFAmero"),y(),v(17,"nz-form-control"),N(18,"input",18),y()()(),v(19,"div",19)(20,"nz-form-item")(21,"nz-form-label",15),D(22,"Entre calles"),y(),v(23,"nz-form-control"),N(24,"input",20),y()()(),v(25,"div",19)(26,"nz-form-item")(27,"nz-form-label",15),D(28,"Colonia"),y(),v(29,"nz-form-control"),N(30,"input",21),y()()(),v(31,"div",22)(32,"nz-form-item")(33,"nz-form-label",15),D(34,"C\xF3digo Postal"),y(),v(35,"nz-form-control"),N(36,"input",23),y()()(),v(37,"div",22)(38,"nz-form-item")(39,"nz-form-label",15),D(40,"Municipio / Ciudad"),y(),v(41,"nz-form-control"),N(42,"input",24),y()()(),v(43,"div",22)(44,"nz-form-item")(45,"nz-form-label",15),D(46,"Estado"),y(),v(47,"nz-form-control"),N(48,"input",25),y()()()()(),v(49,"nz-card",26)(50,"div",27)(51,"div",19)(52,"nz-form-item")(53,"nz-form-label"),D(54,"Nombre"),y(),v(55,"nz-form-control"),N(56,"input",28),y()()(),v(57,"div",29)(58,"nz-form-item")(59,"nz-form-label"),D(60,"Tel\xE9fono"),y(),v(61,"nz-form-control"),N(62,"input",30),y()()(),v(63,"div",22)(64,"nz-form-item")(65,"nz-form-label"),D(66,"Email"),y(),v(67,"nz-form-control"),N(68,"input",31),y()()()()()(),v(69,"div",32)(70,"button",33),N(71,"i",34),v(72,"span"),D(73,"Actualizar"),y()()()()}if(i&2){let e=O();E("formGroup",e.objectForm),_(2),E("ngIf",!!e.record),_(68),E("disabled",!e.objectForm.valid)}}function WF(i,t){if(i&1&&N(0,"app-shared-vendor-settings",51),i&2){let e=O();E("vendorId",e.recordId)("userCanUpdate",!1)}}function jF(i,t){if(i&1&&N(0,"app-shared-vendor-drivers",52),i&2){let e=O();E("vendorId",e.recordId)}}function UF(i,t){if(i&1&&N(0,"app-shared-vendor-vehicles",52),i&2){let e=O();E("vendorId",e.recordId)}}var oX=(()=>{class i{constructor(e,r,o,n,s){this.fb=e,this.route=r,this.modalService=o,this.message=n,this.bucketStorage=s,this.authService=ie(bt),this.selectedIndex=0,this.record={},this.avatarUrl="http://themenate.com/applicator/dist/assets/images/avatars/thumb-13.jpg",this.autosave=!0,this.uploading=!1,this.bucketPath="vendors/",this.rolService=ie(Hi),this.uploadvalue=0,this.infoLoad=[],this.vendorService=ie($c),this.authService.user.subscribe(a=>{a&&(this.user=a,this.user!==null&&this.user!==void 0&&this.user.rolId!==void 0&&this.rolService.getRol(this.user.rolId).valueChanges().subscribe(l=>{this.infoLoad=l,this.userlevelAccess=this.infoLoad.optionAccessLavel}))})}sendMessage(e,r){this.message.create(e,r)}ngOnInit(){this.objectSubscription=this.route.params.subscribe(e=>{this.recordId=e.id,this.selectedIndex=e.index,this.bucketPath+=this.recordId,this.getSubscriptions()}),this.createForm(),this.autoSave()}ngOnDestroy(){this.objectSubscription.unsubscribe(),this.autosave=!1}autoSave(){}createForm(){this.objectForm=this.fb.group({active:["",[K.required]],address:this.fb.group({street:[""],number:[""],address2:[""],address3:[""],city:[""],state:[""],zipcode:[""]}),name:["",[K.required]],avatar:[""],deleted:[""],legalName:[""],primaryContact:[""],rfc:[""],status:[""],website:[""],primaryEmail:["",[K.required]],primaryPhone:["",[K.required]]})}patchForm(e){this.objectForm.patchValue(me({},e))}getSubscriptions(){this.vendorService.getVendor(this.recordId).pipe(ce(e=>{let r=e.payload.id,o=e.payload.data();return me({id:r},o)})).subscribe(e=>{this.record=e,this.patchForm(e)})}submitForm(){for(let e in this.objectForm.controls)this.objectForm.controls[e].markAsDirty(),this.objectForm.controls[e].updateValueAndValidity();this.objectForm.valid&&(this.userlevelAccess!="3"?this.vendorService.updateVendor(this.recordId,this.objectForm.value):this.sendMessage("error","El usuario no tiene permisos para actualizar datos, favor de contactar al administrador."))}getBase64(e,r){let o=new FileReader;o.addEventListener("load",()=>{o.result!==null&&typeof o.result=="string"?r(o.result):console.error("Invalid result from FileReader")}),o.readAsDataURL(e)}beforeUpload(){return Ho(!0)}handleChange(e){e.file.originFileObj&&this.getBase64(e.file.originFileObj,r=>{this.avatarUrl=r;let o=e.file.name,n=`${this.bucketPath}/${o}`,s=this.bucketStorage.ref(n);this.task=this.bucketStorage.ref(n).putString(r,"data_url"),this.uploadPercent=this.task.percentageChanges(),this.uploadPercent.pipe(ce(a=>Number((a/100).toFixed(2)))).subscribe(a=>{this.uploading=a!=0,this.uploadvalue=a}),this.task.snapshotChanges().pipe(wc(()=>{this.uploading=!1,this.downloadURL=s.getDownloadURL(),this.downloadURL.subscribe(a=>za(this,null,function*(){this.updatePhotoURL(a)}))})).subscribe()})}updatePhotoURL(e){return za(this,null,function*(){this.objectForm.controls.avatar.patchValue(e),this.userlevelAccess!="3"?this.vendorService.updateVendorAvatar(this.recordId,e):this.sendMessage("error","El usuario no tiene permisos para actualizar datos, favor de contactar al administrador.")})}static{this.\u0275fac=function(r){return new(r||i)(ee(hi),ee(ka),ee(Ba),ee(Mt),ee(jc))}}static{this.\u0275cmp=ke({type:i,selectors:[["app-edit"]],decls:15,vars:3,consts:[["basicTpl",""],["nzBackIcon","",1,"page-header",2,"background-color","#f9fbfd"],[1,"page-header-tab",3,"nzSelectedIndex"],["nzTitle","General"],["nz-form","",3,"formGroup","ngSubmit",4,"ngIf"],["nzTitle","Operaci\xF3n"],["nz-tab",""],["nzTitle","PR"],["nzTitle","Recursos"],["nz-form","",3,"ngSubmit","formGroup"],[1,"container"],["nzType","inner","nzTitle","Informaci\xF3n B\xE1sica 2",3,"nzExtra",4,"ngIf"],["nzType","inner","nzTitle","Direcci\xF3n"],["formGroupName","address",1,"row"],[1,"col-md-9","col-sm-12"],["nzFor","street"],["formControlName","street","nz-input","","type","text","placeholder","Calle"],[1,"col-md-3","col-sm-12"],["formControlName","number","nz-input","","type","text","placeholder","N\xFAmero"],[1,"col-md-6","col-sm-12"],["formControlName","address2","nz-input","","type","text","placeholder","Entre calles"],["formControlName","address3","nz-input","","type","text","placeholder","Colonia"],[1,"col-md-4","col-sm-12"],["formControlName","zipcode","nz-input","","type","text","placeholder","C\xF3digo postal"],["formControlName","city","nz-input","","type","text","placeholder","Municipio / Ciudad"],["formControlName","state","nz-input","","type","text","placeholder","Estado"],["nzType","inner","nzTitle","Contacto Primario"],[1,"row"],["nz-input","","formControlName","primaryContact","placeholder","Nombre"],[1,"col-md-2","col-sm-12"],["nz-input","","formControlName","primaryPhone","placeholder","Tel\xE9fono"],["nz-input","","formControlName","primaryEmail","placeholder","Email"],[1,"media","justify-content-end","m-r-15","m-b-15"],["nz-button","","type","submit",2,"background-color","#4F6F57","color","#f6f3ea",3,"disabled"],["nz-icon","","nzType","edit","theme","outline"],["nzType","inner","nzTitle","Informaci\xF3n B\xE1sica 2",3,"nzExtra"],[1,"media","align-items-center"],["nzIcon","user","nzShape","square",2,"background-color","white","color","#4F6F57",3,"nzSize","nzSrc"],[1,"m-l-20","m-r-20"],[1,"m-b-5","font-size-18"],[1,"opacity-07","font-size-13","m-b-0"],["nzName","avatar","nzAction","action",3,"nzChange","nzBeforeUpload","nzShowUploadList"],["nz-button","","nzGhost","",2,"background-color","#4F6F57","color","#f6f3ea"],[1,"m-v-25"],[1,"col-md-8"],["type","text","nz-input","","formControlName","name","placeholder","Nombre comercial (alias)"],[1,"col-md-4"],["nz-input","","formControlName","rfc","placeholder","RFC"],[1,"col-md-12"],["nz-input","","formControlName","legalName","placeholder","Raz\xF3n Social","type","text"],["formControlName","active","nzCheckedChildren","Activo","nzUnCheckedChildren","Inactivo"],[3,"vendorId","userCanUpdate"],[3,"vendorId"]],template:function(r,o){r&1&&(v(0,"nz-page-header",1)(1,"nz-page-header-title"),D(2),y(),v(3,"nz-page-header-subtitle"),D(4,"Detalles de los Divisi\xF3n"),y(),v(5,"nz-page-header-content")(6,"nz-tabset",2)(7,"nz-tab",3),$(8,$F,74,3,"form",4),y(),v(9,"nz-tab",5),$(10,WF,1,2,"ng-template",6),y(),v(11,"nz-tab",7),$(12,jF,1,1,"ng-template",6),y(),v(13,"nz-tab",8),$(14,UF,1,1,"ng-template",6),y()()()()),r&2&&(_(2),J(o.record.name),_(4),E("nzSelectedIndex",o.selectedIndex),_(2),E("ngIf",o.objectForm))},dependencies:[Dt,Tt,Lt,Kt,xi,pi,Ei,gi,Gi,Ur,Kc,qc,Vt,Nt,kt,Xt,vr,mr,qr,Wa,di,Vi,Ot,li,ui,ci,Py,Xo,Yo,Uy,ox,xg,nx]})}}return i})();var qF=(i,t,e)=>[i,t,e],sx=i=>["/vendor/edit",i];function KF(i,t){if(i&1&&(v(0,"form",25)(1,"nz-form-item")(2,"nz-form-label"),D(3,"Nombre"),y(),v(4,"nz-form-control"),N(5,"input",26),y()(),v(6,"nz-form-item")(7,"nz-form-label"),D(8,"Raz\xF3n Social"),y(),v(9,"nz-form-control"),N(10,"input",27),y()(),v(11,"div",15)(12,"div",28)(13,"nz-form-item")(14,"nz-form-label"),D(15,"Contacto Principal"),y(),v(16,"nz-form-control"),N(17,"input",29),y()()(),v(18,"div",28)(19,"nz-form-item")(20,"nz-form-label"),D(21,"Tel\xE9fono"),y(),v(22,"nz-form-control"),N(23,"input",30),y()()(),v(24,"div",28)(25,"nz-form-item")(26,"nz-form-label"),D(27,"Correo"),y(),v(28,"nz-form-control"),N(29,"input",31),y()()()(),v(30,"nz-form-item")(31,"nz-form-label"),D(32,"Sitio Web"),y(),v(33,"nz-form-control"),N(34,"input",32),y()()()),i&2){let e=O();E("formGroup",e.objectForm)}}function YF(i,t){if(i&1&&N(0,"nz-avatar",37),i&2){let e=O().$implicit;E("nzText",e.name)("nzSrc",e.avatar)}}function XF(i,t){if(i&1){let e=re();v(0,"i",40),q("click",function(){H(e);let o=O(2).$implicit,n=O(2);return B(n.toggleAccountActive(o.id,!0))}),y()}i&2&&E("nzType","check-circle")("nzTheme","twotone")("nzTwotoneColor","#52c41a")}function QF(i,t){if(i&1){let e=re();v(0,"i",41),q("click",function(){H(e);let o=O(2).$implicit,n=O(2);return B(n.toggleAccountActive(o.id,!1))}),y()}i&2&&E("nzType","pause-circle")("nzTheme","twotone")("nzTwotoneColor","#de4436")}function ZF(i,t){if(i&1&&$(0,XF,1,3,"i",38)(1,QF,1,3,"i",39),i&2){let e=O().$implicit;E("ngIf",e.active),_(),E("ngIf",!e.active)}}function JF(i,t){if(i&1&&N(0,"i",42),i&2){let e=O().$implicit;E("routerLink",Es(1,sx,e.id))}}function ez(i,t){if(i&1){let e=re();v(0,"a",43),q("click",function(){H(e);let o=O().$implicit,n=O(2);return B(n.modalConfirmDelete(o.id))}),N(1,"i",44),y()}}function tz(i,t){if(i&1&&(v(0,"div",34)(1,"nz-card",35),N(2,"nz-card-meta",36),y(),$(3,YF,1,2,"ng-template",null,2,Re)(5,ZF,2,2,"ng-template",null,3,Re)(7,JF,1,3,"ng-template",null,4,Re)(9,ez,2,0,"ng-template",null,5,Re),y()),i&2){let e=t.$implicit,r=ue(4),o=ue(6),n=ue(8),s=ue(10);_(),E("nzActions",Mc(3,qF,o,n,s)),_(),E("nzAvatar",r)("nzTitle",e.name)}}function iz(i,t){if(i&1&&(v(0,"div",15),$(1,tz,11,7,"div",33),y()),i&2){let e=O();_(),E("ngForOf",e.vendorList)}}function rz(i,t){if(i&1&&(v(0,"nz-tag",63),D(1),y()),i&2){let e=O().$implicit;E("nzColor","blue"),_(),J(e.status)}}function oz(i,t){if(i&1&&(v(0,"nz-tag",63),D(1),y()),i&2){let e=O().$implicit;E("nzColor","cyan"),_(),J(e.status)}}function nz(i,t){if(i&1&&(v(0,"nz-tag",63),D(1),y()),i&2){let e=O().$implicit;E("nzColor","red"),_(),J(e.status)}}function sz(i,t){if(i&1&&(v(0,"tr")(1,"td")(2,"div",49),N(3,"nz-avatar",50),v(4,"div",51)(5,"h5",52),D(6),y()()()(),v(7,"td"),D(8),y(),v(9,"td"),D(10),y(),v(11,"td"),D(12),y(),v(13,"td"),D(14),y(),v(15,"td"),D(16),y(),v(17,"td",47),$(18,rz,2,2,"nz-tag",53)(19,oz,2,2,"nz-tag",53)(20,nz,2,2,"nz-tag",53),y(),v(21,"td",54)(22,"div")(23,"a",55),N(24,"i",56),y(),v(25,"nz-dropdown-menu",null,7)(27,"ul",57)(28,"li",58)(29,"a",59),N(30,"i",60),v(31,"span",51),D(32,"Editar"),y()()(),N(33,"li",61),v(34,"li",58)(35,"a"),N(36,"i",62),v(37,"span",51),D(38,"Eliminar"),y()()()()()()()()),i&2){let e=t.$implicit,r=ue(26);_(3),E("nzSrc",e.avatar),_(3),J(e.name),_(2),J(e.legalName),_(2),Et(" ",e.website," "),_(2),J(e.primaryContact),_(2),J(e.primaryEmail),_(2),J(e.primaryPhone),_(2),E("ngIf",e.status=="In Progress"),_(),E("ngIf",e.status=="Ready"),_(),E("ngIf",e.status=="Behind"),_(3),E("nzDropdownMenu",r),_(6),E("routerLink",Es(12,sx,e.id))}}function az(i,t){if(i&1&&(v(0,"nz-card")(1,"nz-table",45,6)(3,"thead")(4,"tr")(5,"th",46),D(6,"Nombre"),y(),v(7,"th",46),D(8,"Raz\xF3n Social"),y(),v(9,"th",46),D(10,"Sitio web"),y(),v(11,"th",46),D(12,"Contacto"),y(),v(13,"th",46),D(14,"Correo"),y(),v(15,"th",46),D(16,"Tel\xE9fono"),y(),v(17,"th",47),D(18,"Status"),y(),N(19,"th",46),y()(),v(20,"tbody"),$(21,sz,39,14,"tr",48),y()()()),i&2){let e=ue(2),r=O();_(),E("nzData",r.vendorList),_(20),E("ngForOf",e.data)}}var mX=(()=>{class i{constructor(e,r,o){this.modalService=e,this.messageService=r,this.fb=o,this.vendorService=ie($c),this.accountsService=ie(gr),this.view="cardView",this.newProject=!1,this.vendorList=[],this.vendorListLoad=[],this.infoLoad=[],this.rolService=ie(Hi),this.authService=ie(bt),this.infoSegment=[],this.stopSubscription$=new it,this.authService.user.subscribe(n=>{n&&(this.user=n,this.user!==null&&this.user!==void 0&&this.user.rolId!==void 0&&this.user.idSegment!==void 0&&this.rolService.getRol(this.user.rolId).valueChanges().subscribe(s=>{this.infoLoad=s,this.userlevelAccess=this.infoLoad.optionAccessLavel,this.accountsService.getSegmentLevel(this.user.idSegment).pipe(xe(this.stopSubscription$),ce(a=>{let l=a.payload.id,d=a.payload.data();return me({id:l},d)}),ft(a=>(this.infoSegment=a,this.getSubscriptions(),this.createForm(),a))).subscribe()}))})}ngOnInit(){}sendMessage(e,r){this.messageService.create(e,r)}createForm(){this.objectForm=this.fb.group({name:["",[K.required,K.minLength(5)]],legalName:["",[K.required,K.minLength(10)]],primaryContact:["",[K.required]],primaryEmail:["",[K.email,K.required]],primaryPhone:["",[K.required]],active:[!1],deleted:[!1],status:["In Progress"],customerId:this.user.customerId,website:["",[K.required]]})}ngOnDestroy(){this.stopSubscription$.next(!1),this.stopSubscription$.complete()}getSubscriptions(){this.infoSegment.nivelNum!==void 0&&this.infoSegment.nivelNum==1?this.vendorService.getVendorByCustomer(this.user.customerId).pipe(xe(this.stopSubscription$),ce(e=>e.map(r=>{let o=r.payload.doc.id,n=r.payload.doc.data();return me({id:o},n)}))).subscribe(e=>{e&&e.length>0&&(this.vendorList=e,this.vendorListLoad=this.vendorList)}):this.vendorService.getVendors().pipe(ce(e=>e.map(r=>{let o=r.payload.doc.id,n=r.payload.doc.data();return me({id:o},n)}))).subscribe(e=>{this.vendorList=e,this.vendorListLoad=this.vendorList})}showNewProject(e){let r=this.modalService.create({nzTitle:"Nueva Divisi\xF3n",nzContent:e,nzFooter:[{label:"Crear Divisi\xF3n",type:"primary",disabled:()=>!this.objectForm.valid,onClick:()=>this.modalService.confirm({nzTitle:"\xBFEst\xE1 seguro de crearlo?",nzOnOk:()=>{this.modalService.closeAll(),this.submitForm()}})}],nzWidth:800})}modalConfirmDelete(e){this.modalService.confirm({nzTitle:"\xBFEst\xE1 seguro de eliminarlo?",nzOnOk:()=>{this.modalService.closeAll(),this.vendorService.deleteVendor(e)}})}submitForm(){this.objectForm.valid&&(this.userlevelAccess!="3"?this.vendorService.createVendor(this.objectForm.value):this.sendMessage("error","El usuario no tiene permisos para crear datos, favor de contactar al administrador."))}toggleAccountActive(e,r){this.vendorService.toggleVendorActive(e,r)}getItems(e){let r=e;if(!r){this.vendorList=this.vendorListLoad.slice();return}let o=r.toLowerCase();this.vendorList=this.vendorListLoad.filter(n=>Object.values(n).some(s=>String(s).toLowerCase().includes(o)))}static{this.\u0275fac=function(r){return new(r||i)(ee(Ba),ee(Mt),ee(hi))}}static{this.\u0275cmp=ke({type:i,selectors:[["app-list"]],decls:26,vars:3,consts:[["searchBar",""],["newProjectContent",""],["avatarTemplate",""],["actionSetting",""],["actionEdit",""],["actionEllipsis",""],["listViewTable",""],["projectListSetting2","nzDropdownMenu"],[2,"margin","buttom 15px","margin-right","15px","margin-left","15px"],[1,"site-page-header-ghost-wrapper"],[2,"background-color","#f9fbfd",3,"nzGhost"],[2,"margin-left","350px"],[1,"body"],[1,"row","align-items-md-center"],[1,"col-md-6"],[1,"row"],[1,"col-md-5"],["nz-icon","","nzTheme","outline",1,"search-icon"],["placeholder","Buscar",3,"keyup"],[1,"text-md-right","m-v-10"],["nz-button","",2,"background-color","#4F6F57","color","#f6f3ea",3,"click"],["nz-icon","","nzType","plus"],[1,"container-fluid"],["class","row",4,"ngIf"],[4,"ngIf"],["nz-form","","nzLayout","vertical",3,"formGroup"],["type","text","formControlName","name","nz-input","","placeholder","Nombre con el que identifica al Cliente"],["type","text","formControlName","legalName","nz-input","","placeholder","Raz\xF3n social"],[1,"col-sm-12","col-md-6","col-lg-4"],["type","text","formControlName","primaryContact","nz-input","","placeholder","Nombre completo"],["type","text","formControlName","primaryPhone","nz-input","","placeholder","Tel\xE9fono"],["type","text","formControlName","primaryEmail","nz-input","","placeholder","Correo"],["type","text","formControlName","website","nz-input","","placeholder","Sitio web"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"col-md-3"],[3,"nzActions"],[3,"nzAvatar","nzTitle"],["nzSize","large",2,"vertical-align","middle",3,"ngStyle","nzText","nzSrc"],["nz-icon","","nzTooltipTitle","Activo","nzTooltipPlacement","topLeft","nz-tooltip","",3,"nzType","nzTheme","nzTwotoneColor","click",4,"ngIf"],["nz-icon","","nzTooltipTitle","Inactivo","nzTooltipPlacement","topLeft","nz-tooltip","",3,"nzType","nzTheme","nzTwotoneColor","click",4,"ngIf"],["nz-icon","","nzTooltipTitle","Activo","nzTooltipPlacement","topLeft","nz-tooltip","",3,"click","nzType","nzTheme","nzTwotoneColor"],["nz-icon","","nzTooltipTitle","Inactivo","nzTooltipPlacement","topLeft","nz-tooltip","",3,"click","nzType","nzTheme","nzTwotoneColor"],["nz-icon","","nzType","edit","routerLinkActive","router-link-active","nzTooltipTitle","Editar","nzTooltipPlacement","topLeft","nz-tooltip","",3,"routerLink"],[3,"click"],["nz-icon","","nzType","delete","nzTooltipTitle","Eliminar","theme","outline"],[3,"nzData"],[2,"color","#4F6F57"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"media","align-items-center"],["nzShape","square",2,"background-color","white","color","#4F6F57",3,"nzSrc"],[1,"m-l-10"],[1,"m-b-0"],["class","m-b-0",3,"nzColor",4,"ngIf"],[1,"text-right"],["nz-dropdown","","nzPlacement","bottomRight","nzTrigger","click",1,"text-gray","font-size-18",3,"nzDropdownMenu"],["nz-icon","","nzType","ellipsis","theme","outline"],["nz-menu","","nzSelectable",""],["nz-menu-item",""],["routerLinkActive","router-link-active",3,"routerLink"],["nz-icon","","nzType","edit","theme","outline"],["nz-menu-divider",""],["nz-icon","","nzType","delete","theme","outline"],[1,"m-b-0",3,"nzColor"]],template:function(r,o){if(r&1){let n=re();v(0,"div",8)(1,"div",9)(2,"nz-page-header",10)(3,"nz-page-header-title",11),D(4,"Divisi\xF3n"),y(),v(5,"nz-page-header-subtitle"),D(6,"Divisiones del Sistema "),y()()(),v(7,"div",12)(8,"div",13)(9,"div",14)(10,"div",15)(11,"div",16),N(12,"i",17),v(13,"input",18,0),q("keyup",function(){H(n);let a=ue(14);return B(o.getItems(a.value))}),y()()()(),v(15,"div",14)(16,"div",19)(17,"button",20),q("click",function(){H(n);let a=ue(22);return B(o.showNewProject(a))}),N(18,"i",21),v(19,"span"),D(20,"Nueva Divisi\xF3n"),y()(),$(21,KF,35,1,"ng-template",null,1,Re),y()()()(),v(23,"div",22),$(24,iz,2,1,"div",23)(25,az,22,2,"nz-card",24),y()()}r&2&&(_(2),E("nzGhost",!1),_(22),E("ngIf",o.view=="cardView"),_(),E("ngIf",o.view=="listView"))},dependencies:[At,Dt,zc,Tt,Lt,Kt,xi,pi,Ei,gi,Gi,en,Qo,Zo,rn,Jo,tn,Ur,hr,cr,qo,Bi,Ko,fr,Uo,Vt,Nt,kt,Xt,Bc,vr,mr,qr,on,Va,Ga,di,Vi,Ot,li,ui,ci]})}}return i})();export{vz as a,Mg as b,Gz as c,sA as d,gk as e,Kk as f,n1 as g,B9 as h,sq as i,Nq as j,oY as k,sY as l,EY as m,oX as n,mX as o};
