import './polyfills.server.mjs';
import{a as qt,c as $t,d as Wt,e as Xt,g as pi,h as hi}from"./chunk-PBLUV7H4.mjs";import{a as ot}from"./chunk-NT7C7XWK.mjs";import{a as dt}from"./chunk-E34BSU3O.mjs";import{a as li,b as di,d as fi}from"./chunk-VO45EQJJ.mjs";import{a as si}from"./chunk-C3RMQAJG.mjs";import{a as Re,b as Kt,d as ii}from"./chunk-6JFP3CIT.mjs";import{a as ci,c as mi,d as ui}from"./chunk-NVQLRS3L.mjs";import{c as st}from"./chunk-NKZGWD6T.mjs";import{a as Ut}from"./chunk-73JGAGPZ.mjs";import{a as oi}from"./chunk-ST4LCCQ5.mjs";import{a as lt,b as ri}from"./chunk-SA5BCQAB.mjs";import{a as ti,h as ni}from"./chunk-6YCV6NVA.mjs";import{A as ei,B as it,C as nt,D as at,E as rt,G as ai,a as Qe,c as Ee,d as Ve,e as Jt,k as Pe,n as Ke,o as Ye,w as et,x as Zt,z as tt}from"./chunk-CNFWRPVW.mjs";import{$ as kt,P as ve,Q as Ce,R as Xe,S as be,_ as je,aa as Mt,b as $e,c as y,ca as Ot,d as le,da as Ge,e as de,ea as Fi,f as It,fa as He,g as We,h as Nt,ha as jt,i as ce,ja as De,k as me,m as ue,pa as Te,q as pe,qa as we,sa as Ze,t as ge,ta as Yt,u as ze}from"./chunk-H6J2Q3GY.mjs";import{c as Rt,d as Lt}from"./chunk-AKAZ7SU5.mjs";import{a as At,c as Bt,f as Je,g as Gt,h as Ht,j as Qt}from"./chunk-54DGYUU5.mjs";import{Va as Z,Vb as xe,Wb as Se,Ya as _e,Yb as ye,la as fe,m as vt,p as he,vb as Ct}from"./chunk-NJWSL4FI.mjs";import{$ as Et,Ab as oe,Ad as Ft,C as Dt,Cb as Vt,Db as Pt,Fb as ft,G as pt,Gb as _t,Hb as gt,Ia as Me,Ib as S,Ja as r,Jb as o,Jc as Tt,K as ne,Ka as O,Kb as g,Kc as se,Lb as C,Lc as Be,Mb as R,Nb as Ae,Ob as P,Pb as T,Pc as wt,Qb as w,Rc as qe,T as J,Tb as zt,Ub as A,V as N,X as K,Ya as z,Yb as k,Zb as Ue,_a as d,_b as B,ac as E,ca as ht,d as te,da as F,ha as Y,mb as t,nb as i,o as St,ob as v,pa as p,pb as ae,q as V,qa as h,qb as re,sb as x,v as yt,vb as _,xb as u}from"./chunk-6PZZNLED.mjs";import{a as bt}from"./chunk-UYFIRDFP.mjs";import{a as U,b as Oe,h as wi,j}from"./chunk-H6KHSOBK.mjs";var ie=wi(Fi());var Ri=["download"],Li=["searchBar"],Oi=s=>({open:s}),Ai=()=>({y:"calc(100vh - 120px)"}),Bi=()=>[];function qi(s,c){if(s&1&&(t(0,"nz-option",62),o(1),i()),s&2){let e=c.$implicit;d("nzLabel",e.name)("nzValue",e.id),r(),C(" ",e.name," ")}}function $i(s,c){s&1&&v(0,"span",63)}function Wi(s,c){s&1&&v(0,"span",63)}function Xi(s,c){s&1&&v(0,"i",70)}function ji(s,c){if(s&1){let e=x();t(0,"tr",66),_("click",function(){let n=p(e).$implicit,l=u(2);return h(l.userSelected(n))}),t(1,"td")(2,"div",67)(3,"div"),v(4,"nz-avatar",68),i(),t(5,"div")(6,"h6"),z(7,Xi,1,0,"i",69),o(8),i(),ae(9),t(10,"p"),o(11),v(12,"br"),o(13),i(),re(),i()()()()}if(s&2){let e=c.$implicit;r(4),d("nzSize",30)("nzSrc",e.photoURL),r(3),d("ngIf",e.disabled),r(),C(" ",e.displayName," "),r(3),C(" ",e.email," "),r(2),C(" ",e.customerName," ")}}function Gi(s,c){if(s&1&&(t(0,"nz-table",64,26)(2,"tbody"),z(3,ji,14,6,"tr",65),i()()),s&2){let e=S(1),a=u();d("nzData",a.devicesList)("nzShowPagination",!0)("nzPageSize",30)("nzScroll",zt(5,Ai)),r(3),d("ngForOf",e.data)}}function Hi(s,c){s&1&&v(0,"i",83)}function Qi(s,c){if(s&1){let e=x();t(0,"li",84),_("click",function(){p(e);let n=u(2);return h(n.setUserDisabled(!0))}),o(1,"Suspender Usuario "),i()}}function Ji(s,c){if(s&1){let e=x();t(0,"li",84),_("click",function(){p(e);let n=u(2);return h(n.setUserDisabled(!1))}),o(1,"Reactivar Usuario "),i()}}function Ki(s,c){if(s&1&&(t(0,"div",71),ae(1),t(2,"div",72)(3,"a",73),v(4,"i",74),i(),t(5,"div"),v(6,"nz-avatar",75),i(),t(7,"div",76)(8,"h6"),z(9,Hi,1,0,"i",77),o(10),i(),t(11,"p"),v(12,"nz-badge",78),t(13,"span"),o(14),i()()()(),re(),t(15,"div")(16,"a",79),v(17,"i",80),i(),t(18,"nz-dropdown-menu",null,27)(20,"ul",81),z(21,Qi,2,0,"li",82)(22,Ji,2,0,"li",82),i()()()()),s&2){let e=S(19),a=u();r(3),d("routerLink",zt(10,Bi)),r(3),d("nzSrc",a.currentUserSelected.photoURL),r(3),d("ngIf",a.currentUserSelected.disabled),r(),C(" ",a.currentUserSelected.displayName," "),r(2),d("nzStatus",a.currentUserSelected.emailVerified?"success":"error"),r(2),C(" ",a.currentUserSelected.email," "),r(2),d("nzDropdownMenu",e)("nzTrigger","click"),r(5),d("ngIf",!a.currentUserSelected.disabled),r(),d("ngIf",a.currentUserSelected.disabled)}}function Yi(s,c){s&1&&(t(0,"nz-tag",114),o(1,"Cortes\xEDa "),i()),s&2&&d("nzColor","yellow")}function Zi(s,c){s&1&&(t(0,"nz-tag",114),o(1,"Pagado "),i()),s&2&&d("nzColor","cyan")}function en(s,c){s&1&&(t(0,"nz-tag",114),o(1,"Pagado Parcial"),i()),s&2&&d("nzColor","red")}function tn(s,c){s&1&&(t(0,"nz-tag",114),o(1,"Baja"),i()),s&2&&d("nzColor","magenta")}function nn(s,c){if(s&1&&(t(0,"nz-tag",114),o(1),i()),s&2){let e=u().$implicit;d("nzColor","blue"),r(),g(e.payment)}}function an(s,c){s&1&&(t(0,"nz-tag",114),o(1,"Activo"),i()),s&2&&d("nzColor","cyan")}function rn(s,c){if(s&1&&(t(0,"span"),o(1),k(2,"currency"),i()),s&2){let e=u().$implicit;r(),g(Ue(2,1,e.amountPayment))}}function on(s,c){if(s&1){let e=x();t(0,"tr",66),_("click",function(){let n=p(e).$implicit,l=u(3);return h(l.boardingPassSelected(n))}),t(1,"td")(2,"nz-tag",114),o(3),i(),t(4,"span",115),o(5),k(6,"date"),i()(),t(7,"td"),o(8),i(),t(9,"td"),z(10,Yi,2,1,"nz-tag",116)(11,Zi,2,1,"nz-tag",116)(12,en,2,1,"nz-tag",116)(13,tn,2,1,"nz-tag",116)(14,nn,2,2,"nz-tag",116)(15,an,2,1,"nz-tag",116),i(),t(16,"td"),o(17),k(18,"currency"),i(),t(19,"td"),z(20,rn,3,3,"span",112),i(),t(21,"td")(22,"a",117),v(23,"i",118),i(),t(24,"nz-dropdown-menu",null,27)(26,"ul",81)(27,"li",84),_("click",function(){let n=p(e).$implicit,l=u(3);return h(l.deletePurchase(n.id))}),o(28,"Eliminar Boleto"),i(),t(29,"li",84),_("click",function(){let n=p(e).$implicit,l=u(3);return h(l.activatePurchase(n.id,!1))}),o(30,"Suspender Boleto"),i(),t(31,"li",84),_("click",function(){let n=p(e).$implicit,l=u(3);return h(l.activatePurchase(n.id,!0))}),o(32,"Activar Boleto"),i()()()()()}if(s&2){let e=c.$implicit,a=S(25);r(2),d("nzColor","blue"),r(),g(e.name),r(2),C(" ",B(6,15,e.creation_date,"medium")," "),r(3),Ae("",e.routeName," / ",e.stopName," / ",e.round,""),r(2),d("ngIf",e.status==="completed"&&!!e.is_courtesy),r(),d("ngIf",e.status==="completed"&&!e.is_courtesy),r(),d("ngIf",e.status!=="completed"),r(),d("ngIf",e.status!=="completed"&&e.baja===!0),r(),d("ngIf",e.status!=="completed"),r(),d("ngIf",e.active),r(2),C(" ",Ue(18,18,e.amount)," "),r(3),d("ngIf",e.payment=="Anticipo"),r(2),d("nzDropdownMenu",a)}}function sn(s,c){if(s&1&&(t(0,"nz-table",113,26)(2,"thead")(3,"tr")(4,"th"),o(5,"Pase"),i(),t(6,"th"),o(7,"Operaci\xF3n"),i(),t(8,"th"),o(9,"Estatus "),i(),t(10,"th"),o(11,"Precio"),i(),t(12,"th"),o(13,"Abono"),i()()(),t(14,"tbody"),z(15,on,33,20,"tr",65),i()()),s&2){let e=S(1),a=u(2);d("nzData",a.latestPurchases)("nzPageSize",3)("nzLoading",a.loadingLatestPurchases)("nzLoadingDelay",500),r(15),d("ngForOf",e.data)}}function ln(s,c){s&1&&(t(0,"nz-tag",114),o(1,"OpenPay "),i()),s&2&&d("nzColor","blue")}function dn(s,c){s&1&&(t(0,"nz-tag",114),o(1,"Pago Portal "),i()),s&2&&d("nzColor","blue")}function cn(s,c){if(s&1&&(t(0,"span"),o(1),k(2,"currency"),i()),s&2){let e=u().$implicit;r(),g(Ue(2,1,e.amountPayment))}}function mn(s,c){if(s&1){let e=x();t(0,"tr")(1,"td")(2,"nz-tag",114),o(3),i(),t(4,"span",115),o(5),k(6,"date"),i()(),t(7,"td"),o(8),i(),t(9,"td"),z(10,ln,2,1,"nz-tag",116)(11,dn,2,1,"nz-tag",116),t(12,"nz-tag",114),o(13),i()(),t(14,"td"),o(15),k(16,"currency"),i(),t(17,"td"),z(18,cn,3,3,"span",112),i(),t(19,"td")(20,"a",117),v(21,"i",119),i(),t(22,"nz-dropdown-menu",null,27)(24,"ul",81)(25,"li",84),_("click",function(){let n=p(e).$implicit,l=u(3);return h(l.generatePurchasePDF(n))}),o(26,"Generar Pdf"),i()()()()()}if(s&2){let e=c.$implicit,a=S(23);r(2),d("nzColor","blue"),r(),g(e.name),r(2),C(" ",B(6,13,e.creation_date,"medium")," "),r(3),Ae("",e.routeName," / ",e.stopName," / ",e.round,""),r(2),d("ngIf",e.isOpenpay==="true"),r(),d("ngIf",e.authorization==="portalAuth"),r(),d("nzColor","green"),r(),C("",e.typePayment," "),r(2),C(" ",Ue(16,16,e.amount)," "),r(3),d("ngIf",e.payment=="Anticipo"),r(2),d("nzDropdownMenu",a)}}function un(s,c){if(s&1&&(t(0,"nz-table",113,31)(2,"thead")(3,"tr")(4,"th"),o(5,"Pase"),i(),t(6,"th"),o(7,"Operaci\xF3n"),i(),t(8,"th"),o(9,"Datos "),i(),t(10,"th"),o(11,"Precio"),i(),t(12,"th"),o(13,"Abono"),i()()(),t(14,"tbody"),z(15,mn,27,18,"tr",109),i()()),s&2){let e=S(1),a=u(2);d("nzData",a.latestPurRequest)("nzPageSize",3)("nzLoading",a.loadinglatestPurRequest)("nzLoadingDelay",500),r(15),d("ngForOf",e.data)}}function pn(s,c){if(s&1&&(t(0,"tr")(1,"td"),o(2),k(3,"date"),i(),t(4,"td"),o(5),i()()),s&2){let e=c.$implicit;r(2),g(B(3,2,e.createdAt.toDate(),"dd/MM/yyyy")),r(3),g(e.msg)}}function hn(s,c){if(s&1){let e=x();t(0,"div"),v(1,"nz-divider",120),t(2,"textarea",121),w("ngModelChange",function(n){p(e);let l=u(2);return T(l.newMessage,n)||(l.newMessage=n),h(n)}),i()(),t(3,"button",87),_("click",function(){p(e);let n=u(2);return h(n.showModalMessageCenter())}),v(4,"i",70),o(5,"Enviar Mensaje"),i()}if(s&2){let e=u(2);r(2),P("ngModel",e.newMessage)}}function fn(s,c){if(s&1&&(t(0,"nz-tag",114),o(1),i()),s&2){let e=u().$implicit;d("nzColor","red"),r(),C("",e.status," ")}}function _n(s,c){if(s&1&&(t(0,"nz-tag",114),o(1),i()),s&2){let e=u().$implicit;d("nzColor","green"),r(),C("",e.status," ")}}function gn(s,c){if(s&1&&(t(0,"nz-tag",114),o(1),i()),s&2){let e=u().$implicit;d("nzColor","blue"),r(),C("",e.status," ")}}function zn(s,c){if(s&1&&(t(0,"nz-tag",114),o(1),i()),s&2){let e=u().$implicit;d("nzColor","gray"),r(),C("",e.status," ")}}function vn(s,c){if(s&1&&(t(0,"a",123),o(1,"Ver Comprobante"),i()),s&2){let e=u().$implicit;oe("href",e.url,Me)}}function Cn(s,c){if(s&1&&(t(0,"tr")(1,"td"),o(2),i(),t(3,"td"),o(4),i(),t(5,"td"),z(6,fn,2,2,"nz-tag",116)(7,_n,2,2,"nz-tag",116)(8,gn,2,2,"nz-tag",116)(9,zn,2,2,"nz-tag",116),i(),t(10,"td"),z(11,vn,2,1,"a",122),i()()),s&2){let e=c.$implicit;r(2),g(e.date),r(2),g(e.product.description),r(2),d("ngIf",e.status==="rejected"),r(),d("ngIf",e.status==="complete"),r(),d("ngIf",e.status==="accepted"),r(),d("ngIf",e.status==="pending"),r(2),d("ngIf",e.url)}}function bn(s,c){s&1&&(t(0,"tr")(1,"td",124),o(2,"No hay transferencias encontradas"),i()())}function xn(s,c){if(s&1){let e=x();t(0,"nz-tabset",85)(1,"nz-tab",86),_("nzClick",function(){p(e);let n=u();return h(n.nzClicOptionInformacion())}),t(2,"div")(3,"button",87),_("click",function(){p(e);let n=u();return h(n.showModalEditUser(n.currentUserSelected))}),v(4,"i",70),o(5,"Editar Usuario"),i()(),t(6,"div")(7,"nz-descriptions",88)(8,"nz-descriptions-item",89)(9,"div",90),o(10),i()(),t(11,"nz-descriptions-item",91),o(12),i(),t(13,"nz-descriptions-item",92),o(14),i(),t(15,"nz-descriptions-item",93),o(16),i(),t(17,"nz-descriptions-item",94),o(18),i(),t(19,"nz-descriptions-item",95),o(20),i(),t(21,"nz-descriptions-item",96),o(22),i(),t(23,"nz-descriptions-item",97),o(24),i(),o(25),t(26,"nz-descriptions-item",98),o(27),i(),t(28,"nz-descriptions-item",99),o(29),i(),t(30,"nz-descriptions-item",100),o(31),i(),t(32,"nz-descriptions-item",101),o(33),i(),t(34,"nz-descriptions-item",102),o(35),i(),t(36,"nz-descriptions-item",103),o(37),i()()()(),t(38,"nz-tab",104)(39,"button",87),_("click",function(){p(e);let n=u();return h(n.showModal())}),v(40,"i",70),o(41,"Nuevo Pase"),i(),z(42,sn,16,5,"nz-table",105),i(),t(43,"nz-tab",106),z(44,un,16,5,"nz-table",105),i(),t(45,"nz-tab",107),_("nzClick",function(){p(e);let n=u();return h(n.nzClicOption())}),t(46,"nz-table",108,28)(48,"thead")(49,"tr")(50,"th"),o(51,"Fecha"),i(),t(52,"th"),o(53,"Mensaje"),i()()(),t(54,"tbody"),z(55,pn,6,5,"tr",109),i()(),z(56,hn,6,1,"ng-template",null,29,E),i(),t(58,"nz-tab",110),_("nzClick",function(){p(e);let n=u();return h(n.nzClicTransfer())}),t(59,"nz-table",111,30)(61,"thead")(62,"tr")(63,"th"),o(64,"Fecha"),i(),t(65,"th"),o(66,"Producto"),i(),t(67,"th"),o(68,"Estatus"),i(),t(69,"th"),o(70,"Comprobante"),i()()(),t(71,"tbody"),z(72,Cn,12,7,"tr",109)(73,bn,3,0,"tr",112),i()()()()}if(s&2){let e=S(47),a=S(57),n=u();r(10),C(" ",n.currentUserSelected.firstName,""),r(2),g(n.currentUserSelected.lastName),r(2),g(n.currentUserSelected.email),r(2),g(n.currentUserSelected.emailVerified),r(2),g(n.currentUserSelected.displayName),r(2),g(n.currentUserSelected.customerName),r(2),C(" ",n.currentUserSelected.defaultRouteName,""),r(2),g(n.currentUserSelected.defaultStopName),r(),C(" ",n.currentUserSelected.turno," "),r(2),C(" ",n.currentUserSelected.turno==="1"?"Sencillo":n.currentUserSelected.turno==="2"?"Redondo":n.currentUserSelected.turno===""?"No definido":""," "),r(2),g(n.currentUserSelected.phoneNumber),r(2),g(n.currentUserSelected.studentId),r(2),g(n.currentUserSelected.userName),r(2),g(n.currentUserSelected.status),r(2),g(n.currentUserSelected.roundTrip),r(5),d("ngIf",n.latestPurchases),r(2),d("ngIf",n.latestPurRequest),r(2),d("nzData",n.userChatMessageData)("nzPageSize",3)("nzFooter",a)("nzLoadingDelay",500),r(9),d("ngForOf",e.data),r(4),d("nzData",n.dataTransfer)("nzPageSize",3)("nzShowPagination",!0),r(13),d("ngForOf",n.dataTransfer),r(),d("ngIf",!n.loadinglatestTransfer&&n.dataTransfer.length===0)}}function Sn(s,c){s&1&&o(0," Nuevo pase ")}function yn(s,c){if(s&1&&(ae(0),o(1),re()),s&2){let e=u().$implicit;r(),C("(",e.frequencies,")")}}function Dn(s,c){if(s&1&&(t(0,"div")(1,"nz-option",62),v(2,"i",70),o(3),z(4,yn,2,1,"ng-container",112),o(5),i()()),s&2){let e=c.$implicit;r(),d("nzLabel",e.name)("nzValue",e.productId),r(2),C(" ",e.name," "),r(),d("ngIf",e.frequencies),r(),C(" $",e.price," ")}}function En(s,c){if(s&1&&(t(0,"nz-option",62),v(1,"i",70),o(2),i()),s&2){let e=c.$implicit;d("nzLabel",e.name)("nzValue",e.routeId),r(2),C(" ",e.name,"")}}function Vn(s,c){if(s&1&&(t(0,"nz-option",62),v(1,"i",70),o(2),v(3,"br"),o(4),i()),s&2){let e=c.$implicit;d("nzLabel",e.name)("nzValue",e.stopPointId),r(2),C(" ",e.name," "),r(2),C(" ",e.description," ")}}function Pn(s,c){s&1&&(t(0,"div",138)(1,"nz-form-item")(2,"nz-form-label"),o(3,"Fecha Compromiso "),i(),v(4,"nz-date-picker",150),i()())}function Tn(s,c){if(s&1){let e=x();t(0,"nz-form-item")(1,"nz-upload",151),_("nzChange",function(n){p(e);let l=u(2);return h(l.handleChange2(n))}),t(2,"p",152)(3,"span",70),o(4,"Cargar"),i()(),t(5,"p",153),o(6,"Arrastra el documento a subir"),i(),t(7,"p",154),o(8," Soporte para un solo archivo. Prohibido subir datos corruptos o archivos maliciosos. "),i()()()}s&2&&(r(),d("nzMultiple",!1)("nzLimit",1)("nzSize",50)("nzFileType","image/png,image/jpeg,image/gif,image/bmp"))}function wn(s,c){if(s&1){let e=x();t(0,"form",125),_("ngSubmit",function(){p(e);let n=u();return h(n.submitForm())}),t(1,"nz-form-item")(2,"nz-form-label"),o(3,"Servicio"),i(),t(4,"nz-select",126),_("ngModelChange",function(n){p(e);let l=u();return h(l.onProductSelected(n,l.products))}),z(5,Dn,6,5,"div",109),i()(),t(6,"nz-form-item")(7,"nz-form-label"),o(8,"Operaci\xF3n"),i(),t(9,"nz-select",127),_("ngModelChange",function(n){p(e);let l=u();return h(l.onRouteSelected(n,l.routes))}),z(10,En,3,3,"nz-option",43),i()(),t(11,"nz-form-item")(12,"nz-form-label"),o(13,"Estaciones"),i(),t(14,"nz-select",128),_("ngModelChange",function(n){p(e);let l=u();return h(l.onStopPointSelected(n,l.stopPoints))}),z(15,Vn,5,4,"nz-option",43),i()(),t(16,"nz-form-item")(17,"nz-form-label"),o(18,"Turno"),i(),t(19,"nz-select",129),v(20,"nz-option",130)(21,"nz-option",131)(22,"nz-option",132),i()(),t(23,"nz-form-item")(24,"nz-form-label"),o(25,"Tipo de Pago"),i(),t(26,"nz-select",133),_("ngModelChange",function(n){p(e);let l=u();return h(l.changePayment(n))}),v(27,"nz-option",134)(28,"nz-option",135)(29,"nz-option",136),i()(),t(30,"nz-form-item")(31,"div",137)(32,"div",138)(33,"nz-form-label"),o(34,"Cantidad a pagar "),i(),t(35,"nz-input-number",139),_("ngModelChange",function(n){p(e);let l=u();return h(l.onAmountChange(n))}),i()(),z(36,Pn,5,0,"div",140),i()(),t(37,"div",137)(38,"div",138)(39,"nz-form-item")(40,"nz-form-label"),o(41,"Total a pagar"),i(),t(42,"nz-input-number",141),_("ngModelChange",function(n){p(e);let l=u();return h(l.onAmountChange(n))}),i()()(),t(43,"div",138)(44,"nz-form-item")(45,"nz-form-label"),o(46,"\xBFEs cortes\xEDa?"),i(),t(47,"nz-switch",142),_("ngModelChange",function(n){p(e);let l=u();return h(l.onCourtesyChange(n))}),i()()()(),t(48,"nz-form-item")(49,"nz-form-label"),o(50,"Tipo de Referencia"),i(),t(51,"nz-select",143),_("ngModelChange",function(n){p(e);let l=u();return h(l.changePaymentType(n))}),v(52,"nz-option",144)(53,"nz-option",145)(54,"nz-option",146),i()(),z(55,Tn,9,4,"nz-form-item",112),t(56,"nz-form-item")(57,"nz-form-control")(58,"label",147),o(59,"Activar pase"),i()()(),t(60,"div",137)(61,"div",138)(62,"nz-form-item")(63,"nz-form-label"),o(64,"V\xE1lido desde"),i(),v(65,"nz-date-picker",148),i()(),t(66,"div",138)(67,"nz-form-item")(68,"nz-form-label"),o(69,"V\xE1lido hasta"),i(),t(70,"nz-date-picker",149),_("ngModelChange",function(n){p(e);let l=u();return h(l.onChangeValidTo(n))}),i()()()()()}if(s&2){let e=u();d("formGroup",e.validateForm),r(5),d("ngForOf",e.products),r(5),d("ngForOf",e.routes),r(5),d("ngForOf",e.stopPoints),r(20),d("nzMin",50)("nzMax",5e3)("nzStep",1)("nzFormatter",e.formatterDollar)("nzParser",e.parserDollar),r(),d("ngIf",e.isAnticipo),r(6),d("disabled",!1)("nzMin",50)("nzMax",5e3)("nzStep",1)("nzFormatter",e.formatterDollar)("nzParser",e.parserDollar),r(13),d("ngIf",e.ifValidPayment),r(15),d("nzDisabledDate",e.disabledDate)}}function Fn(s,c){if(s&1){let e=x();t(0,"button",155),_("click",function(){p(e);let n=u();return h(n.handleCancel())}),o(1,"Cancelar"),i(),t(2,"button",156),_("click",function(){p(e);let n=u();return h(n.submitForm())}),o(3,"Generar Pase"),i()}if(s&2){let e=u();r(2),d("nzLoading",e.isConfirmLoading)}}function In(s,c){s&1&&o(0," Productos ")}function Nn(s,c){if(s&1&&(ae(0),o(1),re()),s&2){let e=u(2).$implicit;r(),C("(",e.frequencies,")")}}function kn(s,c){if(s&1&&(t(0,"nz-option",62),v(1,"i",70),o(2),z(3,Nn,2,1,"ng-container",112),o(4),i()),s&2){let e=u().$implicit;d("nzLabel",e.name)("nzValue",e.productId),r(2),C(" ",e.name," "),r(),d("ngIf",e.frequencies),r(),C(" $",e.price," ")}}function Mn(s,c){if(s&1&&(t(0,"div"),z(1,kn,5,5,"nz-option",159),i()),s&2){let e=c.$implicit;r(),d("ngIf",e.type=="Producto")}}function Un(s,c){if(s&1){let e=x();t(0,"form",125),_("ngSubmit",function(){p(e);let n=u();return h(n.submitForm())}),t(1,"nz-form-item")(2,"nz-form-label"),o(3,"Producto"),i(),t(4,"nz-select",126),_("ngModelChange",function(n){p(e);let l=u();return h(l.onProductSelected(n,l.products))}),z(5,Mn,2,1,"div",109),i()(),t(6,"div",137)(7,"div",138)(8,"nz-form-item")(9,"nz-form-label"),o(10,"Cantidad a pagar"),i(),t(11,"nz-input-number",157),_("ngModelChange",function(n){p(e);let l=u();return h(l.onAmountChange(n))}),i()()(),t(12,"div",138)(13,"nz-form-item")(14,"nz-form-label"),o(15,"\xBFEs cortes\xEDa?"),i(),t(16,"nz-switch",142),_("ngModelChange",function(n){p(e);let l=u();return h(l.onCourtesyChange(n))}),i()()()(),t(17,"div",137)(18,"div",138)(19,"nz-form-item")(20,"nz-form-label"),o(21,"V\xE1lido desde"),i(),v(22,"nz-date-picker",148),i()(),t(23,"div",138)(24,"nz-form-item")(25,"nz-form-label"),o(26,"V\xE1lido hasta"),i(),v(27,"nz-date-picker",158),i()()()()}if(s&2){let e=u();d("formGroup",e.validateForm),r(5),d("ngForOf",e.products),r(6),d("nzMin",50)("nzMax",5e3)("nzStep",1)("nzFormatter",e.formatterDollar)("nzParser",e.parserDollar)}}function Rn(s,c){if(s&1){let e=x();t(0,"button",155),_("click",function(){p(e);let n=u();return h(n.handleCancelProduct())}),o(1,"Cancelar"),i(),t(2,"button",156),_("click",function(){p(e);let n=u();return h(n.submitFormProduct())}),o(3,"Guardar"),i()}if(s&2){let e=u();r(2),d("nzLoading",e.isConfirmLoading)}}function Ln(s,c){s&1&&o(0," Editar Usuario ")}function On(s,c){if(s&1&&(t(0,"nz-option",62),v(1,"i",70),o(2),i()),s&2){let e=c.$implicit;d("nzLabel",e.name)("nzValue",e.uid),r(2),C(" ",e.name,"")}}function An(s,c){if(s&1&&(t(0,"nz-option",62),v(1,"i",70),o(2),i()),s&2){let e=c.$implicit;d("nzLabel",e.name)("nzValue",e.routeId),r(2),C(" ",e.name,"")}}function Bn(s,c){if(s&1&&(t(0,"nz-option",62),v(1,"i",70),o(2),i()),s&2){let e=c.$implicit;d("nzLabel",e.name)("nzValue",e.id),r(2),C(" ",e.name," ")}}function qn(s,c){if(s&1){let e=x();t(0,"form",125),_("ngSubmit",function(){p(e);let n=u();return h(n.submitForm())}),t(1,"nz-form-item")(2,"nz-form-label",160),o(3,"Nombre"),i(),t(4,"nz-form-control",160),v(5,"input",161),i()(),t(6,"nz-form-item")(7,"nz-form-label",160),o(8,"Apellidos"),i(),t(9,"nz-form-control",160),v(10,"input",162),i()(),t(11,"nz-form-item")(12,"nz-form-label",160),o(13,"Display Name"),i(),t(14,"nz-form-control",160),v(15,"input",163),i()(),t(16,"nz-form-item")(17,"nz-form-label",160),o(18,"Usuario"),i(),t(19,"nz-form-control",160),v(20,"input",164),i()(),t(21,"nz-form-item")(22,"nz-form-label",160),o(23,"Tel\xE9fono"),i(),t(24,"nz-form-control",160),v(25,"input",165),i()(),t(26,"nz-form-item")(27,"nz-form-label",160),o(28,"Identificaci\xF3n"),i(),t(29,"nz-form-control",160),v(30,"input",166),i()(),t(31,"nz-form-item")(32,"nz-form-label",160),o(33,"Email"),i(),t(34,"nz-form-control",160),v(35,"input",167),i()(),t(36,"nz-form-item")(37,"nz-form-label",160),o(38,"Empresa"),i(),t(39,"nz-form-control",160)(40,"nz-select",168),_("ngModelChange",function(n){p(e);let l=u();return h(l.onCustomerSelected(n,l.customers))}),z(41,On,3,3,"nz-option",43),i()()(),t(42,"nz-form-item")(43,"nz-form-label",160),o(44,"Operaci\xF3n"),i(),t(45,"nz-form-control",160)(46,"nz-select",169),_("ngModelChange",function(n){p(e);let l=u();return h(l.onRouteEditUserSelected(n,l.userRoutes))}),z(47,An,3,3,"nz-option",43),i()()(),t(48,"nz-form-item")(49,"nz-form-label",160),o(50,"Estaci\xF3n"),i(),t(51,"nz-form-control",160)(52,"nz-select",170),_("ngModelChange",function(n){p(e);let l=u();return h(l.onStopPointEditUserSelected(n,l.stopPointsList))}),z(53,Bn,3,3,"nz-option",43),i()()(),t(54,"nz-form-item")(55,"nz-form-label",160),o(56,"Turno"),i(),t(57,"nz-select",171),v(58,"nz-option",130)(59,"nz-option",131)(60,"nz-option",132),i()()()}if(s&2){let e=u();d("formGroup",e.validateEditForm),r(2),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(3),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(3),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(3),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(3),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(3),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(3),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(3),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(2),d("ngForOf",e.customers),r(2),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(2),d("ngForOf",e.userRoutes),r(2),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(2),d("ngForOf",e.stopPointsList),r(2),d("nzSm",6)("nzXs",24)}}function $n(s,c){if(s&1){let e=x();t(0,"button",155),_("click",function(){p(e);let n=u();return h(n.handleCancel())}),o(1,"Cancelar"),i(),t(2,"button",155),_("click",function(){p(e);let n=u();return h(n.submitEditForm())}),o(3,"Guardar"),i()}}function Wn(s,c){s&1&&v(0,"nz-badge",216)}function Xn(s,c){s&1&&v(0,"nz-badge",217)}function jn(s,c){s&1&&v(0,"nz-badge",218)}function Gn(s,c){s&1&&v(0,"nz-badge",219)}function Hn(s,c){s&1&&v(0,"nz-badge",218)}function Qn(s,c){if(s&1){let e=x();t(0,"a",222),_("nzOnConfirm",function(){p(e);let n=u(3);return h(n.onCanUpdatePayment())})("nzOnCancel",function(){p(e);let n=u(3);return h(n.handleCancel())}),t(1,"small"),o(2,"Editar"),i()()}}function Jn(s,c){if(s&1){let e=x();t(0,"nz-input-number",223),_("ngModelChange",function(n){p(e);let l=u(3);return h(l.onPaymentUpdated(n))}),i()}if(s&2){let e=u(3);d("ngModel",e.lastPurchase==null?null:e.lastPurchase.amount)("nzMin",1)("nzMax",1e4)("nzStep",1)("nzFormatter",e.formatterDollar)("nzParser",e.parserDollar)}}function Kn(s,c){if(s&1&&(t(0,"nz-descriptions-item",175),o(1),z(2,Qn,3,0,"a",220)(3,Jn,1,6,"nz-input-number",221),i()),s&2){let e=u(2);r(),R(" ",e.canUpdatePayment||e.lastPurchase==null?null:e.lastPurchase.currency," ",e.canUpdatePayment||e.lastPurchase==null?null:e.lastPurchase.amountPayment," "),r(),d("ngIf",!e.canUpdatePayment&&(e.lastPurchase==null?null:e.lastPurchase.status)!="completed"&&(e.lastPurchase==null?null:e.lastPurchase.baja)===!1),r(),d("ngIf",e.canUpdatePayment)}}function Yn(s,c){if(s&1&&(t(0,"nz-descriptions-item",175),o(1),i()),s&2){let e=u(2);r(),R(" ",e.canUpdatePayment||e.lastPurchase==null?null:e.lastPurchase.currency," ",e.canUpdatePayment||e.lastPurchase==null?null:e.lastPurchase.amount," ")}}function Zn(s,c){if(s&1&&(t(0,"div")(1,"a",123),o(2,"Ver Comprobante"),i()()),s&2){let e=u().$implicit;r(),oe("href",e.fileURL,Me)}}function ea(s,c){if(s&1&&(t(0,"tr")(1,"td"),o(2),k(3,"date"),i(),t(4,"td"),o(5),i(),t(6,"td"),o(7),i(),t(8,"td"),o(9),i(),t(10,"td"),o(11),i(),t(12,"td"),z(13,Zn,3,1,"div",112),i()()),s&2){let e=c.$implicit;r(2),C(" ",B(3,6,e.creation_date,"medium"),""),r(3),g(e.name),r(2),g(e.payment),r(2),g(e.typePayment),r(2),C(" $ ",e.amountPayment,""),r(2),d("ngIf",e.typePayment=="Transferencia")}}function ta(s,c){if(s&1){let e=x();t(0,"div"),v(1,"nz-qrcode",224)(2,"a",null,34),o(4),t(5,"button",225),_("click",function(){p(e);let n=u(2);return h(n.downloadImg())}),o(6,"Descargar"),i()()}if(s&2){let e=u(2);r(),Pt("nzValue","",e.currentUserSelected==null?null:e.currentUserSelected.uid,"-",e.lastPurchase==null?null:e.lastPurchase.idBoardingPass,"-",e.lastPurchase==null?null:e.lastPurchase.stopId,""),r(3),Ae(" ",e.currentUserSelected==null?null:e.currentUserSelected.uid,"-",e.lastPurchase==null?null:e.lastPurchase.idBoardingPass,"-",e.lastPurchase==null?null:e.lastPurchase.stopId," ")}}function ia(s,c){if(s&1){let e=x();t(0,"div"),v(1,"nz-qrcode",224)(2,"a",null,34),o(4),t(5,"button",225),_("click",function(){p(e);let n=u(2);return h(n.downloadImg())}),o(6,"Descargar"),i()()}if(s&2){let e=u(2);r(),Vt("nzValue","",e.currentUserSelected==null?null:e.currentUserSelected.uid,"-",e.lastPurchase==null?null:e.lastPurchase.idBoardingPass,""),r(3),R(" ",e.currentUserSelected==null?null:e.currentUserSelected.uid,"-",e.lastPurchase==null?null:e.lastPurchase.idBoardingPass," ")}}function na(s,c){if(s&1&&v(0,"nz-avatar",226),s&2){let e=u(2);d("nzSrc",e.currentUserSelected.photoURL)}}function aa(s,c){if(s&1){let e=x();t(0,"div",172)(1,"nz-tabset",85)(2,"nz-tab",173)(3,"div")(4,"nz-descriptions",88)(5,"nz-descriptions-item",174),o(6),i(),t(7,"nz-descriptions-item",175),z(8,Wn,1,0,"nz-badge",176)(9,Xn,1,0,"nz-badge",177)(10,jn,1,0,"nz-badge",178),i(),t(11,"nz-descriptions-item",179),z(12,Gn,1,0,"nz-badge",180)(13,Hn,1,0,"nz-badge",178),i(),t(14,"nz-descriptions-item",181),o(15),k(16,"date"),i(),t(17,"nz-descriptions-item",182),o(18),i(),t(19,"nz-descriptions-item",183),o(20),k(21,"date"),i(),t(22,"nz-descriptions-item",184),o(23),k(24,"date"),i(),t(25,"nz-descriptions-item",185),o(26),i(),z(27,Kn,4,4,"nz-descriptions-item",186)(28,Yn,2,2,"nz-descriptions-item",186),t(29,"nz-descriptions-item",187),o(30),i(),t(31,"nz-descriptions-item",96),o(32),i(),t(33,"nz-descriptions-item",188),o(34),i(),t(35,"nz-descriptions-item",98),o(36),i(),t(37,"nz-descriptions-item",189),o(38),i(),t(39,"nz-descriptions-item",190),o(40),i(),t(41,"nz-descriptions-item",191),o(42),k(43,"date"),i(),t(44,"nz-descriptions-item",192),o(45),i(),t(46,"nz-descriptions-item",193),o(47),i()(),v(48,"br"),i()(),t(49,"nz-tab",194),_("nzClick",function(){p(e);let n=u();return h(n.nzClicOption())}),t(50,"nz-table",195,32)(52,"thead")(53,"tr")(54,"th"),o(55,"Fecha"),i(),t(56,"th"),o(57,"Nombre"),i(),t(58,"th"),o(59,"Tipo de Referencia"),i(),t(60,"th"),o(61,"Tipo de Pago"),i(),t(62,"th"),o(63,"Monto"),i(),t(64,"th"),o(65,"Comprobante"),i()()(),t(66,"tbody"),z(67,ea,14,9,"tr",109),i()()(),t(68,"nz-tab",196),v(69,"app-shared-usage-history",197),i(),t(70,"nz-tab",198),z(71,ta,7,7,"div",112)(72,ia,7,5,"div",112),i(),t(73,"nz-tab",199)(74,"div",200)(75,"div",201)(76,"div",202)(77,"nz-card",199)(78,"button",155),_("click",function(){p(e);let n=u();return h(n.downloadPdf())}),o(79,"Imprimir"),i()()()(),t(80,"div",203)(81,"div",204)(82,"nz-card",205),v(83,"nz-card-meta",206),t(84,"div")(85,"div")(86,"B",207),o(87,"Credencial And 2024 "),i()(),t(88,"div")(89,"a",207),o(90),i(),o(91," / "),t(92,"a",207),o(93),i()(),t(94,"div",208)(95,"a",207),o(96),i()()(),t(97,"div",209),v(98,"nz-qrcode",210),i()(),z(99,na,1,1,"ng-template",null,33,E),i(),t(101,"div",202)(102,"nz-card",205)(103,"div",211)(104,"div",212)(105,"div",213),v(106,"nz-card",214),i()(),t(107,"div",212)(108,"div",213),v(109,"nz-card",214),i()(),t(110,"div",212)(111,"div",213),v(112,"nz-card",214),i()(),t(113,"div",212)(114,"div",213),v(115,"nz-card",214),i()(),t(116,"div",212)(117,"div",213),v(118,"nz-card",214),i()(),t(119,"div",212)(120,"div",213),v(121,"nz-card",214),i()()(),t(122,"div",211)(123,"a",215),o(124," Derechos reservados Apps And. Esta credencial es intransferible"),i()()()()()()()()()}if(s&2){let e,a=S(51),n=S(100),l=u();r(6),g(l.lastPurchase==null?null:l.lastPurchase.name),r(2),d("ngIf",l.lastPurchase.status=="completed"),r(),d("ngIf",l.lastPurchase.status=="partial"),r(),d("ngIf",l.lastPurchase.status=="in_progress"),r(2),d("ngIf",l.lastPurchase.active),r(),d("ngIf",!l.lastPurchase.active),r(2),C(" ",B(16,51,l.lastPurchase==null?null:l.lastPurchase.operation_date,"medium")," "),r(3),C("",l.lastPurchase!=null&&l.lastPurchase.is_courtesy?"Si":"No"," "),r(2),C(" ",l.lastPurchase!=null&&l.lastPurchase.validFrom?B(21,54,l.lastPurchase==null||l.lastPurchase.validFrom==null?null:l.lastPurchase.validFrom.toDate(),"medium"):"",""),r(3),C(" ",l.canUpdateValidTo?null:B(24,57,l.lastPurchase==null||l.lastPurchase.validTo==null?null:l.lastPurchase.validTo.toDate(),"medium")," "),r(3),R("",l.lastPurchase==null?null:l.lastPurchase.currency," ",l.lastPurchase==null?null:l.lastPurchase.price," "),r(),d("ngIf",(l.lastPurchase==null?null:l.lastPurchase.status)=="partial"),r(),d("ngIf",(l.lastPurchase==null?null:l.lastPurchase.status)!=="partial"),r(2),g(l.lastPurchase==null?null:l.lastPurchase.authorization),r(2),C("",l.lastPurchase==null?null:l.lastPurchase.routeName," "),r(2),R("",l.lastPurchase==null?null:l.lastPurchase.stopName," ",l.lastPurchase==null?null:l.lastPurchase.stopDescription,""),r(2),g(l.lastPurchase==null?null:l.lastPurchase.round),r(2),R(" ",l.lastPurchase==null?null:l.lastPurchase.currency," ",l.lastPurchase==null?null:l.lastPurchase.amountPayment," "),r(2),C(" ",l.lastPurchase==null?null:l.lastPurchase.payment," "),r(2),C(" ",B(43,60,l.lastPurchase==null?null:l.lastPurchase.promiseDate,"mediumDate")," "),r(3),C(" ",l.lastPurchase==null?null:l.lastPurchase.typePayment," "),r(2),C(" ",l.lastPurchase==null?null:l.lastPurchase.description," "),r(3),d("nzData",l.lastestPurchaseDetail)("nzPageSize",3)("nzLoadingDelay",500),r(17),d("ngForOf",a.data),r(2),d("userId",l.currentUserSelected.uid)("boardingPassId",(e=l.lastPurchase.id)!==null&&e!==void 0?e:""),r(2),d("ngIf",l.requiredFields),r(),d("ngIf",!l.requiredFields),r(3),d("nzGutter",8),r(),d("nzSpan",8),r(4),d("nzGutter",8),r(),d("nzSpan",8),r(),d("nzBordered",!0),r(),oe("nzTitle",l.currentUserSelected.displayName),d("nzAvatar",n),r(7),C("Operaci\xF3n: ",l.currentUserSelected.defaultRouteName," "),r(3),C(" Turno :",l.currentUserSelected.defaultRound,""),r(3),C(" Identificaci\xF3n: ",l.currentUserSelected.studentId,""),r(5),d("nzSpan",8),r(),d("nzBordered",!0),r(4),d("nzBordered",!0),r(3),d("nzBordered",!0),r(3),d("nzBordered",!0),r(3),d("nzBordered",!0),r(3),d("nzBordered",!0),r(3),d("nzBordered",!0)}}function ra(s,c){s&1&&o(0," Comprobante de Pago ")}function oa(s,c){if(s&1&&(t(0,"div",229)(1,"nz-card"),v(2,"nz-card-meta",230),t(3,"div",229)(4,"p")(5,"strong"),o(6,"Producto:"),i(),o(7),i(),t(8,"p")(9,"strong"),o(10,"Descripci\xF3n:"),i(),o(11),i(),t(12,"p")(13,"strong"),o(14,"Pago:"),i(),o(15),i(),t(16,"p")(17,"strong"),o(18,"Tipo:"),i(),o(19),i(),t(20,"p")(21,"strong"),o(22,"Tipo de Pago:"),i(),o(23),i(),t(24,"p")(25,"strong"),o(26,"Costo Total:"),i(),o(27),i(),t(28,"p")(29,"strong"),o(30,"Costo:"),i(),o(31),i(),t(32,"p")(33,"strong"),o(34,"Autorizaci\xF3n:"),i(),o(35),i(),t(36,"p")(37,"strong"),o(38,"Fecha de Creaci\xF3n :"),i(),o(39),i(),t(40,"p")(41,"strong"),o(42,"Cantidad de Viajes:"),i(),o(43),i(),t(44,"p")(45,"strong"),o(46,"Viajes Actuales:"),i(),o(47),i(),t(48,"p")(49,"strong"),o(50,"Nombre de la Operaci\xF3n:"),i(),o(51),i(),t(52,"p")(53,"strong"),o(54,"Turno:"),i(),o(55),i(),t(56,"p")(57,"strong"),o(58,"Parada:"),i(),o(59),i(),t(60,"p")(61,"strong"),o(62,"Fecha Valida inicial:"),i(),o(63),i(),t(64,"p")(65,"strong"),o(66,"Fecha Valida final:"),i(),o(67),i()()()()),s&2){let e=c.$implicit;r(7),C(" ",e.name,""),r(4),C(" ",e.description,""),r(4),C(" ",e.typePayment,""),r(4),C(" ",e.type,""),r(4),C(" ",e.method,""),r(4),C(" ",e.price,""),r(4),C(" ",e.amount,""),r(4),C(" ",e.authorization,""),r(4),C(" ",e.creation_date,""),r(4),C(" ",e.amountTrips,""),r(4),C(" ",e.currentTrips,""),r(4),C(" ",e.routeName,""),r(4),C(" ",e.round,""),r(4),C(" ",e.stopName,""),r(4),C(" ",e.validFrom,""),r(4),C(" ",e.validTo,"")}}function sa(s,c){if(s&1&&(t(0,"div",227),z(1,oa,68,16,"div",228),i()),s&2){let e=u();r(),d("ngForOf",e.reciboPago)}}function la(s,c){if(s&1){let e=x();t(0,"button",155),_("click",function(){p(e);let n=u();return h(n.handleCancel())}),o(1,"Cancelar"),i(),t(2,"button",156),_("click",function(){p(e);let n=u();return h(n.generatePDFInfo())}),o(3,"Generar PDF"),i()}if(s&2){let e=u();r(2),d("nzLoading",e.isConfirmLoading)}}function da(s,c){s&1&&(t(0,"div"),o(1," Nuevo pase "),i())}function ca(s,c){if(s&1&&(ae(0),o(1),re()),s&2){let e=u().$implicit;r(),C("(",e.frequencies,")")}}function ma(s,c){if(s&1&&(t(0,"div")(1,"nz-option",62),v(2,"i",70),o(3),z(4,ca,2,1,"ng-container",112),o(5),i()()),s&2){let e=c.$implicit;r(),d("nzLabel",e.name)("nzValue",e.productId),r(2),C(" ",e.name," "),r(),d("ngIf",e.frequencies),r(),C(" $",e.price," ")}}function ua(s,c){if(s&1&&(t(0,"nz-option",62),v(1,"i",70),o(2),i()),s&2){let e=c.$implicit;d("nzLabel",e.name)("nzValue",e.routeId),r(2),C(" ",e.name,"")}}function pa(s,c){if(s&1&&(t(0,"nz-option",62),v(1,"i",70),o(2),v(3,"br"),o(4),i()),s&2){let e=c.$implicit;d("nzLabel",e.name)("nzValue",e.stopPointId),r(2),C(" ",e.name," "),r(2),C(" ",e.description,"")}}function ha(s,c){if(s&1){let e=x();t(0,"div")(1,"form",125),_("ngSubmit",function(){p(e);let n=u(2);return h(n.submitForm())}),t(2,"nz-form-item")(3,"nz-form-label"),o(4,"Servicio"),i(),t(5,"nz-select",126),_("ngModelChange",function(n){p(e);let l=u(2);return h(l.onProductSelected(n,l.products))}),z(6,ma,6,5,"div",109),i()(),t(7,"nz-form-item")(8,"nz-form-label"),o(9,"Operaci\xF3n"),i(),t(10,"nz-select",127),_("ngModelChange",function(n){p(e);let l=u(2);return h(l.onRouteSelected(n,l.routes))}),z(11,ua,3,3,"nz-option",43),i()(),t(12,"nz-form-item")(13,"nz-form-label"),o(14,"Estaci\xF3n"),i(),t(15,"nz-select",128),_("ngModelChange",function(n){p(e);let l=u(2);return h(l.onStopPointSelected(n,l.stopPoints))}),z(16,pa,5,4,"nz-option",43),i()(),t(17,"nz-form-item")(18,"nz-form-label"),o(19,"Turno"),i(),t(20,"nz-select",129),v(21,"nz-option",130)(22,"nz-option",131)(23,"nz-option",132),i()(),t(24,"div",137)(25,"div",138)(26,"nz-form-item")(27,"nz-form-label"),o(28,"Cantidad a pagar"),i(),t(29,"nz-input-number",157),_("ngModelChange",function(n){p(e);let l=u(2);return h(l.onAmountChange(n))}),i()()(),t(30,"div",138)(31,"nz-form-item")(32,"nz-form-label"),o(33,"\xBFEs cortes\xEDa?"),i(),t(34,"nz-switch",142),_("ngModelChange",function(n){p(e);let l=u(2);return h(l.onCourtesyChange(n))}),i()()()(),t(35,"nz-form-item")(36,"nz-form-control")(37,"label",147),o(38,"Activar pase"),i()()(),t(39,"div",137)(40,"div",138)(41,"nz-form-item")(42,"nz-form-label"),o(43,"V\xE1lido desde"),i(),v(44,"nz-date-picker",148),i()(),t(45,"div",138)(46,"nz-form-item")(47,"nz-form-label"),o(48,"V\xE1lido hasta"),i(),v(49,"nz-date-picker",158),i()()()()()}if(s&2){let e=u(2);r(),d("formGroup",e.validateForm),r(5),d("ngForOf",e.products),r(5),d("ngForOf",e.routes),r(5),d("ngForOf",e.stopPoints),r(13),d("nzMin",50)("nzMax",5e3)("nzStep",1)("nzFormatter",e.formatterDollar)("nzParser",e.parserDollar)}}function fa(s,c){if(s&1){let e=x();t(0,"tr")(1,"td",237),w("nzCheckedChange",function(n){let l=p(e).$implicit,m=u(3);return T(m.mapOfCheckedId[l.id],n)||(m.mapOfCheckedId[l.id]=n),h(n)}),_("nzCheckedChange",function(){p(e);let n=u(3);return h(n.refreshStatus())}),i(),t(2,"td"),o(3),i(),t(4,"td"),o(5),i(),t(6,"td"),o(7),i()()}if(s&2){let e=c.$implicit,a=u(3);r(),P("nzChecked",a.mapOfCheckedId[e.id]),r(2),g(e.studentId),r(2),g(e.displayName),r(2),g(e.email)}}function _a(s,c){if(s&1){let e=x();t(0,"div")(1,"nz-table",235,35),_("nzCurrentPageDataChange",function(n){p(e);let l=u(2);return h(l.currentPageDataChange(n))}),t(3,"thead")(4,"tr")(5,"th",236),w("nzCheckedChange",function(n){p(e);let l=u(2);return T(l.isAllDisplayDataChecked,n)||(l.isAllDisplayDataChecked=n),h(n)}),_("nzCheckedChange",function(n){p(e);let l=u(2);return h(l.checkAllData(n))}),i(),t(6,"th"),o(7,"Id"),i(),t(8,"th"),o(9,"Nombre"),i(),t(10,"th"),o(11,"Email / Tel\xE9fono"),i()()(),t(12,"tbody"),z(13,fa,8,4,"tr",109),i()()()}if(s&2){let e=S(2),a=u(2);r(),d("nzData",a.devicesList)("nzSize","middle"),r(4),d("nzSelections",a.listOfSelection),P("nzChecked",a.isAllDisplayDataChecked),d("nzIndeterminate",a.isIndeterminate),r(8),d("ngForOf",e.data)}}function ga(s,c){if(s&1){let e=x();t(0,"nz-date-picker",241),_("ngModelChange",function(n){p(e);let l=u(3);return h(l.onValidToUpdated(n))}),i()}if(s&2){let e=u(3);d("ngModel",e.lastPurchase==null?null:e.lastPurchase.due_date)}}function za(s,c){if(s&1){let e=x();t(0,"a",242),_("nzOnConfirm",function(){p(e);let n=u(3);return h(n.onCanUpdateValidTo())})("nzOnCancel",function(){p(e);let n=u(3);return h(n.handleCancel())}),t(1,"small"),o(2,"Editar"),i()()}}function va(s,c){if(s&1){let e=x();t(0,"a",243),_("nzOnConfirm",function(){p(e);let n=u(3);return h(n.onCanUpdatePayment())})("nzOnCancel",function(){p(e);let n=u(3);return h(n.handleCancel())}),t(1,"small"),o(2,"Editar"),i()()}}function Ca(s,c){if(s&1){let e=x();t(0,"nz-input-number",223),_("ngModelChange",function(n){p(e);let l=u(3);return h(l.onPaymentUpdated(n))}),i()}if(s&2){let e=u(3);d("ngModel",e.lastPurchase==null?null:e.lastPurchase.amount)("nzMin",1)("nzMax",12e3)("nzStep",1)("nzFormatter",e.formatterDollar)("nzParser",e.parserDollar)}}function ba(s,c){if(s&1&&(t(0,"div")(1,"div")(2,"nz-descriptions",88)(3,"nz-descriptions-item",174),o(4),i(),t(5,"nz-descriptions-item",182),o(6),i(),t(7,"nz-descriptions-item",183),o(8),k(9,"date"),i(),t(10,"nz-descriptions-item",184),o(11),k(12,"date"),z(13,ga,1,1,"nz-date-picker",238)(14,za,3,0,"a",239),i(),t(15,"nz-descriptions-item",185),o(16),i(),t(17,"nz-descriptions-item",175),o(18),z(19,va,3,0,"a",240)(20,Ca,1,6,"nz-input-number",221),i(),t(21,"nz-descriptions-item",187),o(22),i(),t(23,"nz-descriptions-item",96),o(24),i(),t(25,"nz-descriptions-item",188),o(26),i(),t(27,"nz-descriptions-item",98),o(28),i(),t(29,"nz-descriptions-item",193),o(30),i()(),v(31,"br"),i(),o(32),i()),s&2){let e=u(2);r(4),g(e.validateForm.controls.product_description.value),r(2),C("",e.validateForm.controls.is_courtesy.value?"Si":"No"," "),r(2),C(" ",B(9,19,e.lastPurchase==null||e.lastPurchase.validFrom==null?null:e.lastPurchase.validFrom.toDate(),e.lastPurchase!=null&&e.lastPurchase.validFrom?"medium":"")," "),r(3),C(" ",B(12,22,e.lastPurchase==null||e.lastPurchase.validTo==null?null:e.lastPurchase.validTo.toDate(),e.canUpdateValidTo?"mediumDate":"")," "),r(2),d("ngIf",e.canUpdateValidTo),r(),d("ngIf",!e.canUpdateValidTo&&(e.lastPurchase==null?null:e.lastPurchase.status)!="completed"),r(2),R("",e.lastPurchase==null?null:e.lastPurchase.currency," ",e.lastPurchase==null?null:e.lastPurchase.price," "),r(2),R(" ",e.canUpdatePayment||e.lastPurchase==null?null:e.lastPurchase.currency," ",e.canUpdatePayment||e.lastPurchase==null?null:e.lastPurchase.amount," "),r(),d("ngIf",!e.canUpdatePayment&&(e.lastPurchase==null?null:e.lastPurchase.status)!="completed"),r(),d("ngIf",e.canUpdatePayment),r(2),g(e.lastPurchase==null?null:e.lastPurchase.authorization),r(2),C("",e.lastPurchase==null?null:e.lastPurchase.routeName," "),r(2),R("",e.lastPurchase==null?null:e.lastPurchase.stopName," ",e.lastPurchase==null?null:e.lastPurchase.stopDescription,""),r(2),g(e.lastPurchase==null?null:e.lastPurchase.round),r(2),C(" ",e.lastPurchase==null?null:e.lastPurchase.description," "),r(2),C(" ",e.actualSelectedRows," ")}}function xa(s,c){if(s&1&&(t(0,"div")(1,"nz-steps",231),v(2,"nz-step",232)(3,"nz-step",233)(4,"nz-step",234),i(),v(5,"br"),t(6,"div"),z(7,ha,50,9,"div",112)(8,_a,14,6,"div",112)(9,ba,33,25,"div",112),i()()),s&2){let e=u();r(),d("nzCurrent",e.current),r(6),d("ngIf",e.current==0),r(),d("ngIf",e.current==1),r(),d("ngIf",e.current==2)}}function Sa(s,c){if(s&1){let e=x();t(0,"button",248),_("click",function(){p(e);let n=u(2);return h(n.pre())}),t(1,"span"),o(2,"Anterior"),i()()}if(s&2){let e=u(2);d("disabled",e.isCreatingBoardingPasses)}}function ya(s,c){if(s&1){let e=x();t(0,"button",248),_("click",function(){p(e);let n=u(2);return h(n.next())}),t(1,"span"),o(2,"Siguiente"),i()()}if(s&2){let e=u(2);d("disabled",e.isCreatingBoardingPasses)}}function Da(s,c){if(s&1){let e=x();t(0,"button",156),_("click",function(){p(e);let n=u(2);return h(n.createMultipleBoardingPasses())}),t(1,"span"),o(2,"Crear Pases"),i()()}if(s&2){let e=u(2);d("nzLoading",e.isCreatingBoardingPasses)}}function Ea(s,c){if(s&1){let e=x();t(0,"button",155),_("click",function(){p(e);let n=u(2);return h(n.done())}),t(1,"span"),o(2,"Terminar"),i()()}}function Va(s,c){if(s&1&&(t(0,"div",244),z(1,Sa,3,1,"button",245)(2,ya,3,1,"button",245)(3,Da,3,1,"button",246)(4,Ea,3,0,"button",247),i()),s&2){let e=u();r(),d("ngIf",e.current>0&&!e.isDone),r(),d("ngIf",e.current<2),r(),d("ngIf",e.current===2&&!e.isDone),r(),d("ngIf",e.current===2&&e.isDone)}}function Pa(s,c){s&1&&o(0," Liquidaci\xF3n de Pase ")}function Ta(s,c){if(s&1){let e=x();t(0,"nz-form-item")(1,"nz-upload",151),_("nzChange",function(n){p(e);let l=u(2);return h(l.handleChange2(n))}),t(2,"p",152)(3,"span",70),o(4,"Cargar"),i()(),t(5,"p",153),o(6,"Arrastra el documento a subir"),i(),t(7,"p",154),o(8," Soporte para un solo archivo. Prohibido subir datos corruptos o archivos maliciosos. "),i()()()}s&2&&(r(),d("nzMultiple",!1)("nzLimit",1)("nzSize",50)("nzFileType","image/png,image/jpeg,image/gif,image/bmp"))}function wa(s,c){if(s&1){let e=x();t(0,"form",125),_("ngSubmit",function(){p(e);let n=u();return h(n.createLiquidacion())}),t(1,"nz-form-item")(2,"nz-form-label"),o(3,"Producto Seleccionado"),i(),v(4,"input",249),i(),t(5,"nz-form-item")(6,"nz-form-label"),o(7,"Costo Total del Producto"),i(),v(8,"nz-input-number",250),i(),t(9,"nz-form-item")(10,"nz-form-label"),o(11,"Total abonado"),i(),v(12,"nz-input-number",251),i(),t(13,"nz-form-item")(14,"nz-form-label"),o(15,"Cantidad a liquidar"),i(),v(16,"nz-input-number",252),i(),t(17,"nz-form-item")(18,"label",253),_("ngModelChange",function(){p(e);let n=u();return h(n.bajaCheck())}),t(19,"span"),o(20,"Baja"),i()()(),t(21,"nz-form-item")(22,"div",137)(23,"div",138)(24,"nz-form-item")(25,"nz-form-label"),o(26,"V\xE1lido desde"),i(),v(27,"nz-date-picker",148),i()(),t(28,"div",138)(29,"nz-form-item")(30,"nz-form-label"),o(31,"V\xE1lido hasta"),i(),v(32,"nz-date-picker",158),i()()()(),t(33,"nz-form-item")(34,"nz-form-label"),o(35,"Tipo de Referencia"),i(),t(36,"nz-select",143),_("ngModelChange",function(n){p(e);let l=u();return h(l.changeLiqPaymentType(n))}),v(37,"nz-option",144)(38,"nz-option",145)(39,"nz-option",146),i()(),z(40,Ta,9,4,"nz-form-item",112),i()}if(s&2){let e=u();d("formGroup",e.validateLiqForm),r(40),d("ngIf",e.ifValidLiqPayment)}}function Fa(s,c){if(s&1){let e=x();t(0,"button",254),_("click",function(){p(e);let n=u();return h(n.createLiquidacion())}),t(1,"span"),o(2,"Submit"),i()(),t(3,"button",254),_("click",function(){p(e);let n=u();return h(n.handleCancel())}),t(4,"span"),o(5,"Cancel"),i()()}}function Ia(s,c){s&1&&o(0," Nuevas credenciales ")}function Na(s,c){if(s&1){let e=x();t(0,"div")(1,"form",125),_("ngSubmit",function(){p(e);let n=u(2);return h(n.createMultipleCredentials())}),t(2,"div",137)(3,"div",138)(4,"nz-form-item")(5,"nz-form-label"),o(6,"V\xE1lido desde"),i(),v(7,"nz-date-picker",148),i()(),t(8,"div",138)(9,"nz-form-item")(10,"nz-form-label"),o(11,"V\xE1lido hasta"),i(),v(12,"nz-date-picker",158),i()(),t(13,"div",138)(14,"nz-form-item")(15,"nz-form-control")(16,"label",147),o(17,"Activar credencial"),i()()()()()()()}if(s&2){let e=u(2);r(),d("formGroup",e.credentialForm)}}function ka(s,c){if(s&1){let e=x();t(0,"tr")(1,"td",237),w("nzCheckedChange",function(n){let l=p(e).$implicit,m=u(3);return T(m.mapOfCredentialsCheckedId[l.uid],n)||(m.mapOfCredentialsCheckedId[l.uid]=n),h(n)}),_("nzCheckedChange",function(){p(e);let n=u(3);return h(n.refreshCredentialsStatus())}),i(),t(2,"td"),o(3),i(),t(4,"td"),o(5),i(),t(6,"td"),o(7),i(),t(8,"td"),o(9),i()()}if(s&2){let e=c.$implicit,a=u(3);r(),P("nzChecked",a.mapOfCredentialsCheckedId[e.uid]),r(2),g(e.customerName),r(2),g(e.studentId),r(2),g(e.displayName),r(2),g(e.email)}}function Ma(s,c){if(s&1){let e=x();t(0,"div")(1,"nz-table",235,35),_("nzCurrentPageDataChange",function(n){p(e);let l=u(2);return h(l.currentCredentialsPageDataChange(n))}),t(3,"thead")(4,"tr")(5,"th",236),w("nzCheckedChange",function(n){p(e);let l=u(2);return T(l.isCredentialsAllDisplayDataChecked,n)||(l.isCredentialsAllDisplayDataChecked=n),h(n)}),_("nzCheckedChange",function(n){p(e);let l=u(2);return h(l.checkCredentialsAllData(n))}),i(),t(6,"th",258),o(7,"Empresa"),i(),t(8,"th",258),o(9,"Id"),i(),t(10,"th",258),o(11,"Nombre"),i(),t(12,"th",258),o(13,"Email / Tel\xE9fono"),i()()(),t(14,"tbody"),z(15,ka,10,5,"tr",109),i()()()}if(s&2){let e=S(2),a=u(2);r(),d("nzData",a.usersByAccount)("nzSize","middle"),r(4),d("nzSelections",a.listOfCredentialsSelection),P("nzChecked",a.isCredentialsAllDisplayDataChecked),d("nzIndeterminate",a.isCredentialsIndeterminate),r(10),d("ngForOf",e.data)}}function Ua(s,c){if(s&1&&(t(0,"div"),o(1),i()),s&2){let e=u(3);r(),C(" Se crear\xE1n ",e.actualSelectedRows," credenciales para los usuarios seleccionados. ")}}function Ra(s,c){s&1&&(t(0,"div"),o(1," No has seleccionado ning\xFAn usuario para crear una credencial. "),i())}function La(s,c){if(s&1&&(t(0,"div"),z(1,Ua,2,1,"div",112)(2,Ra,2,0,"div",112),i()),s&2){let e=u(2);r(),d("ngIf",e.actualSelectedRows>0),r(),d("ngIf",e.actualSelectedRows===0)}}function Oa(s,c){if(s&1&&(t(0,"div")(1,"div"),o(2),i()()),s&2){let e=u(2);r(2),C(" Se crearon ",e.actualSelectedRows,". ")}}function Aa(s,c){if(s&1&&(t(0,"nz-steps",231),v(1,"nz-step",255)(2,"nz-step",256)(3,"nz-step",234),i(),v(4,"br"),t(5,"div",257),z(6,Na,18,1,"div",112)(7,Ma,16,6,"div",112)(8,La,3,2,"div",112)(9,Oa,3,1,"div",112),i()),s&2){let e=u();d("nzCurrent",e.current),r(6),d("ngIf",e.current==0),r(),d("ngIf",e.current==1),r(),d("ngIf",e.current==2),r(),d("ngIf",e.current==3)}}function Ba(s,c){if(s&1){let e=x();t(0,"button",254),_("click",function(){p(e);let n=u(2);return h(n.pre())}),t(1,"span"),o(2,"Anterior"),i()()}}function qa(s,c){if(s&1){let e=x();t(0,"button",262),_("click",function(){p(e);let n=u(2);return h(n.next())}),t(1,"span"),o(2,"Siguiente"),i()()}if(s&2){let e=u(2);d("disabled",e.credentialForm.invalid)}}function $a(s,c){if(s&1){let e=x();t(0,"button",263),_("click",function(){p(e);let n=u(2);return h(n.createMultipleCredentials())}),t(1,"span"),o(2,"Crear Credenciales"),i()()}if(s&2){let e=u(2);d("disabled",e.actualSelectedRows===0)("nzLoading",e.isCreatingCredentials)}}function Wa(s,c){if(s&1){let e=x();t(0,"button",254),_("click",function(){p(e);let n=u(2);return h(n.done())}),t(1,"span"),o(2,"Terminar"),i()()}}function Xa(s,c){if(s&1&&(t(0,"div",244),z(1,Ba,3,0,"button",259)(2,qa,3,1,"button",260)(3,$a,3,2,"button",261)(4,Wa,3,0,"button",259),i()),s&2){let e=u();r(),d("ngIf",e.current>0&&!e.isDone),r(),d("ngIf",e.current<2),r(),d("ngIf",e.current===2&&!e.isDone),r(),d("ngIf",e.current===3&&e.isDone)}}function ja(s,c){s&1&&o(0," Nueva credencial ")}function Ga(s,c){if(s&1){let e=x();t(0,"div",257)(1,"form",125),_("ngSubmit",function(){p(e);let n=u();return h(n.createCredential())}),t(2,"div",137)(3,"div",138)(4,"nz-form-item")(5,"nz-form-label"),o(6,"V\xE1lido desde"),i(),v(7,"nz-date-picker",148),i()(),t(8,"div",138)(9,"nz-form-item")(10,"nz-form-label"),o(11,"V\xE1lido hasta"),i(),v(12,"nz-date-picker",158),i()(),t(13,"div",138)(14,"nz-form-item")(15,"nz-form-control")(16,"label",147),o(17,"Activar credencial"),i()()()()()()()}if(s&2){let e=u();r(),d("formGroup",e.credentialForm)}}function Ha(s,c){if(s&1){let e=x();t(0,"button",263),_("click",function(){p(e);let n=u();return h(n.createCredential())}),t(1,"span"),o(2,"Crear Credencial"),i()()}if(s&2){let e=u();d("disabled",e.credentialForm.invalid)("nzLoading",e.isCreatingCredentials)}}var uo=(()=>{class s{constructor(e,a,n,l,m,f){this.afs=e,this.modalService=a,this.fb=n,this.aff=l,this.bucketStorage=m,this.msg=f,this.authService=F(_e),this.userService=F(He),this.routesService=F(Ze),this.dashboardService=F(oi),this.productsService=F(lt),this.customersService=F(Ge),this.size=40,this.rolService=F(Qe),this.hasBeenFiltered=!1,this.loadedDevicesList=[],this.reciboPago=[],this.newMessage="",this.loadingChatMessages=!1,this.current=0,this.isDone=!1,this.isCreatingBoardingPasses=!1,this.isCreatingCredentials=!1,this.isCollapsed=!0,this.dataTransfer=[],this.listOfSelection=[{text:"Seleccionar todas las p\xE1ginas",onSelect:()=>{this.checkAllData(!0)}},{text:"Deseleccionar todas las p\xE1ginas",onSelect:()=>{this.checkAllData(!1),this.refreshStatus()}}],this.listOfCredentialsSelection=[{text:"Seleccionar todas las p\xE1ginas",onSelect:()=>{this.checkCredentialsAllData(!0)}},{text:"Deseleccionar todas las p\xE1ginas",onSelect:()=>{this.checkCredentialsAllData(!1),this.refreshCredentialsStatus()}}],this.isAllDisplayDataChecked=!1,this.isIndeterminate=!1,this.listOfDisplayData=[],this.mapOfCheckedId={},this.isCredentialsAllDisplayDataChecked=!1,this.isCredentialsIndeterminate=!1,this.listOfCredentialsDisplayData=[],this.listOfCredentialsAllData=[],this.mapOfCredentialsCheckedId={},this.isContentOpen=!1,this.isUserSelected=!1,this.isLoadingUsers=!1,this.loadingLastPurchase=!1,this.isBoardingPassSelected=!1,this.isCredentialSelected=!1,this.isLoadingPayments=!1,this.hasBeenLoaded=!1,this.loadingUserCredentials=!1,this.loadingLatestPurchases=!1,this.loadinglatestPurRequest=!1,this.loadinglatestTransfer=!1,this.isVisible=!1,this.isProductVisible=!1,this.isEditUserVisible=!1,this.isModalCredentialVisible=!1,this.isConfirmLoading=!1,this.productSelectedValue="",this.checked=!1,this.routes=[],this.userRoutes=[],this.products=[],this.stopPoints=[],this.stopPointsList=[],this.usersByAccount=[],this.productsReference=[],this.newCustomerIdEditMode="",this.resetClientEditInfo=!1,this.newRouteIdEditeMode="",this.newStepIdEditeMode="",this.accountId$=new te,this.routeId$=new te,this.canUpdatePayment=!1,this.canUpdateValidTo=!1,this.jobTypeIdCustomerSelected="",this.elementType="url",this.customersList=[],this.stopSubscription$=new te,this.isVisibleBulk=!1,this.isLoadingBulk=!1,this.isConfirmLoadingBulk=!1,this.isVisibleBulkCredentials=!1,this.isLoadingBulkCredentials=!1,this.isConfirmLoadingBulkCredentials=!1,this.isConfirmPagoLoading=!1,this.formatterPercent=b=>`${b} %`,this.parserPercent=b=>b.replace(" %",""),this.formatterDollar=b=>`$ ${b}`,this.parserDollar=b=>b.replace("$ ",""),this.selectedUsersForCredentials=[],this.ifValidPayment=!1,this.ifValidLiqPayment=!1,this.isValidDescriptionPaymentType=!1,this.paymentSelected="",this.isAnticipo=!1,this.fileListInfo=[],this.disabledDate=b=>!1,this.fileUrl="http://themenate.com/applicator/dist/assets/images/avatars/thumb-13.jpg",this.autosave=!0,this.uploading=!1,this.bucketPath="dashboard/",this.uploadvalue=0,this.infoLoad=[],this.purchaseActive=!1,this.isVisiblePurchasePay=!1,this.accountsService=F(Je),this.infoSegment=[],this.requiredFields=!1,this.productSelected=[],this.switchValueUsers=!0,this.checkOptionsOne=[],this.selectedOption="",this.userCustomerId="",this.beforeUpload=b=>!1,this.authService.user.subscribe(b=>{b&&(this.user=b,this.userCustomerId=this.user.customerId,this.accountsService.getSegmentLevel(this.user.idSegment).pipe(V(D=>{if(D&&D.payload){let I=D.payload.id,M=D.payload.data?D.payload.data():{};return U({id:I},M)}else return this.sendMessage("error",D),{}})).subscribe(D=>{this.infoSegment=D,this.filldata()}))})}filldata(){this.infoSegment.nivelNum!==void 0&&this.infoSegment.nivelNum==1?this.accountId$.pipe(J(b=>j(this,null,function*(){return this.afs.collection("customers").doc(b)}))).subscribe(b=>{this.customers=b}):this.accountId$.pipe(J(b=>this.afs.collection("customers",D=>D.where("active","==",!0)).valueChanges({idField:"uid"}))).subscribe(b=>{this.customers=b}),this.accountId$.pipe(J(f=>this.afs.collection("customers").doc(f).collection("routes",b=>b.where("active","==",!0)).valueChanges({idField:"routeId"}))).subscribe(f=>{this.routes=f});let a=this.accountId$.pipe(J(f=>this.afs.collection("customers").doc(f).collection("products",b=>b.where("active","==",!0)).valueChanges({idField:"productId"}))),n=this.accountId$.pipe(J(f=>this.afs.collection("customers").doc(f).collection("products",b=>b.where("active","==",!0)).valueChanges({idField:"productId"}))),l=this.accountId$.pipe(J(f=>this.afs.collection("users",b=>b.where("customerId","==",f).where("active","==",!0).orderBy("studentId")).valueChanges({idField:"uid"}))),m=this.routeId$.pipe(J(f=>this.afs.collection("customers").doc(this.currentSelectedCustomerId).collection("routes").doc(f).collection("stops",b=>b.orderBy("order","asc").where("active","==",!0)).valueChanges({idField:"stopPointId"})));n.subscribe(f=>{this.products=f}),m.subscribe(f=>{this.stopPoints=f}),l.subscribe(f=>{this.usersByAccount=f}),this.getCustomersList()}log(e){this.devicesList=[]}ngOnInit(){this.credentialForm=this.fb.group({active:[!0,[y.required]],validFrom:[new Date,[y.required]],validTo:[new Date,[y.required]]}),this.validateForm=this.fb.group({active:[!0,[y.required]],amount:[0,[y.required]],authorization:[""],category:["",[y.required]],conciliated:[!1,[y.required]],creation_date:[new Date().toISOString(),[y.required]],currency:["MXN",[y.required]],customer_id:["",[y.required]],customerId:[""],date_created:[new Date,[y.required]],due_date:[new Date,[y.required]],description:["",[y.required]],error_message:[""],fee:this.fb.group({amount:[0],currency:["MXN"],tax:[0]}),is_courtesy:[!1],method:["cash",[y.required]],name:["",[y.required]],operation_date:[new Date().toISOString(),[y.required]],operation_type:["in",[y.required]],order_id:[""],payment_method:this.fb.group({barcode_url:[""],reference:[""],type:["cash"]}),price:[0,[y.required]],product_description:["",[y.required]],product_id:["",[y.required]],round:["",[y.required]],routeId:["",[y.required]],routeName:["",[y.required]],status:["completed",[y.required]],stopDescription:["",[y.required]],stopId:["",[y.required]],stopName:["",[y.required]],transaction_type:["charge",[y.required]],validFrom:[new Date,[y.required]],validTo:[new Date,[y.required]],isTaskIn:[!1,[y.required]],isTaskOut:[!1,[y.required]],isOpenpay:[!1,[y.required]],paidApp:["web",[y.required]],realValidTo:[],payment:["",[y.required]],amountPayment:[0,[y.required]],typePayment:[""],promiseDate:[new Date],baja:[""],fileURL:[""],frequencies:[""]});let e=new Date;this.validateForm.controls.promiseDate.setValue(e),this.validateForm.controls.validTo.setValue(""),this.validateForm.controls.validFrom.setValue(e),this.validateEditForm=this.fb.group({firstName:[""],lastName:[""],displayName:[""],userName:["",[y.required]],studenId:["",[y.required]],email:["",[y.required]],customerName:["",[y.required]],defaultRoute:["",[y.required]],defaultRouteName:[""],defaultRound:[""],routeId:["",[y.required]],customerId:[""],phoneNumber:[""],defaultStopId:[""],defaultStopName:[""]}),this.validateLiqForm=this.fb.group({customerId:[""],amount:new We({value:"",disabled:!0}),productSelected:[""],alreadyPayment:new We({value:"",disabled:!0}),completeAmount:new We({value:"",disabled:!0}),validFrom:[""],validTo:[""],typePayment:[""],fileURL:[""]})}sendMessage(e,a){this.msg.create(e,a)}ngOnDestroy(){this.hasBeenLoaded=!1,this.loadedDevicesList=[],this.users&&this.users.unsubscribe(),this.routesSubscription&&this.routesSubscription.unsubscribe(),this.productsSubscription&&this.productsSubscription.unsubscribe(),this.stopSubscription$.next(void 0),this.stopSubscription$.complete(),this.customerSuscription&&this.customerSuscription.unsubscribe(),this.usersSubscription&&this.usersSubscription.unsubscribe(),this.userChatMessagesSubscription&&this.userChatMessagesSubscription.unsubscribe()}showModalCredential(){this.isModalCredentialVisible=!0}onBulkCredentialsSelected(e){this.accountId$.next(e),this.currentSelectedCustomerId=e,this.isVisibleBulkCredentials=!0}createCredential(){if(this.credentialForm.valid){let e=this.credentialForm.controls.validFrom.value||new Date,a=this.credentialForm.controls.validTo.value||new Date,n=this.credentialForm.controls.active.value||!1;this.userlevelAccess!="3"?this.currentUserSelected&&this.currentUserSelected.uid?(this.isCreatingCredentials=!0,this.customersService.createCredential(this.currentUserSelected.uid,this.currentUserSelected.studentId,e,a,n).then(l=>{this.isModalCredentialVisible=!1}),this.isCreatingCredentials=!1,this.isDone=!0):this.sendMessage("error","currentUserSelected or uid is null or undefined"):this.sendMessage("error","El usuario no tiene permisos para actualizar datos, favor de contactar al administrador.")}}activateCredential(e,a){this.userlevelAccess!="3"?this.currentUserSelected&&this.currentUserSelected.uid?(this.customersService.activateCredential(this.currentUserSelected.uid,e,a),this.currentUserSelected.paymentId=e):this.sendMessage("error","currentUserSelected or uid is null or undefined"):this.sendMessage("error","El usuario no tiene permisos para actualizar datos, favor de contactar al administrador.")}deleteCredential(e){this.userlevelAccess=="1"?this.currentUserSelected&&this.currentUserSelected.uid?(this.customersService.deleteCredential(this.currentUserSelected.uid,e),this.isBoardingPassSelected=!1):this.sendMessage("error","currentUserSelected or uid is null or undefined"):this.sendMessage("error","El usuario no tiene permisos para borrar datos, favor de contactar al administrador.")}getUserCredentials(e){this.loadingUserCredentials=!0,this.customersService.getUserCredentials(e).pipe(K(a=>{this.userCredentials=a}),Dt(a=>(this.sendMessage("error",a),this.userCredentials=null,St(null))),ne(()=>{this.loadingUserCredentials=!1})).subscribe()}currentCredentialsPageDataChange(e){this.listOfCredentialsDisplayData=e,this.refreshCredentialsStatus()}refreshCredentialsStatus(){let e=this.usersByAccount.length>0&&this.usersByAccount.every(n=>this.mapOfCredentialsCheckedId[n.uid]),a=this.usersByAccount.some(n=>this.mapOfCredentialsCheckedId[n.uid]);this.isCredentialsAllDisplayDataChecked=e,this.isCredentialsIndeterminate=a&&!e}checkCredentialsAllData(e){this.usersByAccount.forEach(a=>this.mapOfCredentialsCheckedId[a.uid]=e)}checkCredentialsValidBoardingPass(e){let a=this.usersByAccount.map(n=>this.customersService.getLatestValidUserPurchases(n.uid).pipe(pt(1),V(l=>l.map(m=>{let f=m.payload.doc.id,b=m.payload.doc.data();return U({id:f},b)})),K(l=>{this.mapOfCredentialsCheckedId[n.uid]=l.length>0})));yt(a).subscribe()}createMultipleCredentials(){this.current++;let e=this.credentialForm.controls.validFrom.value||new Date,a=this.credentialForm.controls.validTo.value||new Date,n=this.credentialForm.controls.active.value||!1;this.userlevelAccess!="3"?(this.isCreatingCredentials=!0,this.selectedUsersForCredentials.forEach(l=>{this.customersService.createCredential(l.uid,l.studentId,e,a,n).then(m=>{})}),this.isCreatingCredentials=!1,this.isDone=!0):this.sendMessage("error","El usuario no tiene permisos para actualizar datos, favor de contactar al administrador.")}showModalProduct(){this.isProductVisible=!0}onProductSelected(e,a){this.productSelected=[];let l=ie.filter(a,m=>m.productId==e)[0];this.productSelected=l,this.validateForm.controls.name.setValue(l.name),this.validateForm.controls.description.setValue(l.description),this.validateForm.controls.product_description.setValue(l.description),this.validateForm.controls.amount.setValue(l.price),this.validateForm.controls.is_courtesy.setValue(!1),this.validateForm.controls.price.setValue(l.price),this.validateForm.controls.category.setValue(l.category),this.validateForm.controls.validFrom.setValue(l.validFrom.toDate()),this.validateForm.controls.validTo.setValue(l.validTo.toDate()),this.validateForm.controls.realValidTo.setValue(l.validTo.toDate().toISOString()),this.validateForm.controls.isTaskIn.setValue(l.isTaskIn),this.validateForm.controls.isTaskOut.setValue(l.isTaskOut),this.validateForm.controls.frequencies.setValue(l.frequencies)}searchloadUsers(){this.getUsersList()}getUsersList(){if(!this.selectedOption){console.error("Error: selectedOption es null o undefined");return}this.isLoadingUsers=!0,this.afs.collection("users",e=>e.where("customerId","==",this.selectedOption)).get().subscribe({next:e=>{let a=[];e.forEach(n=>{a.push(n.data())}),this.loadUsers(a),this.isCollapsed=!1,this.isLoadingUsers=!1},error:e=>{console.error("Error al obtener usuarios:",e),this.isLoadingUsers=!1}})}setUserDisabled(e){this.userlevelAccess!="3"?this.currentUserSelected&&this.currentUserSelected.uid?(this.customersService.setUserDisabled(this.currentUserSelected.uid,e),this.currentUserSelected.disabled=e):this.sendMessage("error","currentUserSelected or uid is null or undefined"):this.sendMessage("error","El usuario no tiene permisos para actualizar datos, favor de contactar al administrador.")}loadUsers(e){let a=new Map,n=[];for(let l of e)l.displayName!==null&&l.displayName!==void 0&&!a.has(l.displayName)&&(a.set(l.displayName,!0),n.push(l));n.sort((l,m)=>l.displayName.localeCompare(m.displayName)),this.devicesList=n,this.loadedDevicesList=n,this.displayData=n}userSelected(e){this.currentUserSelected=e,this.currentSelectedCustomerId=this.currentUserSelected.customerId,this.accountId$.next(this.currentUserSelected.customerId),this.isUserSelected=!0,this.isBoardingPassSelected=!1,this.requiredFields=!1,this.getJobType(e.customerId),this.getLatestPurchases(e.uid),this.getLastestPurchaseRequest(e.uid),this.getUserCredentials(e.uid),this.getUserChatMessages(e.uid),this.lastPurchase=void 0,this.productsReference=null}copyDataToUserCollection(){this.userlevelAccess!="3"?this.currentUserSelected&&this.currentUserSelected.uid?this.customersService.saveOldBoardingPassToUserCollection(this.currentUserSelected.paymentId):this.sendMessage("error","currentUserSelected or uid is null or undefined"):this.sendMessage("error","El usuario no tiene permisos para actualizar datos, favor de contactar al administrador.")}getUserChatMessages(e){this.loadingChatMessages=!0,this.userChatMessagesSubscription&&this.userChatMessagesSubscription.unsubscribe(),this.userChatMessagesSubscription=this.dashboardService.getUserChatMessages(e,10).subscribe(a=>{this.userChatMessageData=a,this.loadingChatMessages=!1})}getJobType(e){this.dashboardService.getJobType(e).pipe(N(this.stopSubscription$),V(a=>a.jobTypeID)).subscribe({next:a=>{a!==void 0&&a.length>0&&this.dashboardService.getJobTypeInfo(a).pipe(N(this.stopSubscription$),V(n=>n.requiredFields)).subscribe({next:n=>{this.requiredFields=n},error:n=>{this.sendMessage("error",n)}})},error:a=>{this.sendMessage("error",a)}})}onBulkBoardingPassSelected(e){this.accountId$.next(e),this.currentSelectedCustomerId=e,this.isVisibleBulk=!0}onCourtesyChange(e){e&&this.validateForm.controls.amount.setValue(0)}onAmountChange(e){e>0&&this.validateForm.controls.is_courtesy.setValue(!1)}onCanUpdatePayment(){if(this.canUpdatePayment=!0,this.lastPurchase!==void 0){var e=Number(this.lastPurchase.amountPayment),a=Number(this.lastPurchase.amount);this.validateLiqForm.controls.productSelected.setValue(this.lastPurchase.name),this.validateLiqForm.controls.alreadyPayment.setValue(e),this.validateLiqForm.controls.amount.setValue(a),this.validateLiqForm.controls.completeAmount.setValue(a-e),this.validateLiqForm.controls.validFrom.setValue(this.lastPurchase.validFrom.toDate()),this.productSelectedValue=this.lastPurchase.name}else this.sendMessage("error","lastPurchase is undefined")}createLiquidacion(){let e=this.validateLiqForm.controls.validTo.value||new Date,a=this.validateLiqForm.controls.typePayment.value;if(this.lastPurchase!==void 0){let m=this.lastPurchase?String(this.lastPurchase.id):void 0;if(e=="")this.msg.error("Se requiere  seleccionar una fecha de terminaci\xF3n de pase.");else if(a=="")this.msg.error("Se requiere  seleccionar un tipo de referencia.");else if(this.currentUserSelected&&this.currentUserSelected.uid){var n,l=this.validateLiqForm.controls.fileURL.value||"";let f=this.productSelected?.amountTrips||0,b=this.productSelected?.frequencies||0,D=this.productSelected?.weeks||0,I=this.productSelected?.rangeWeeks||{},M={authorization:"portalAuth",operation_type:"in",method:this.validateLiqForm.controls.payment.value,transaction_type:"charge",card:{type:"",brand:"",address:"",card_number:"",holder_name:"",expiration_year:"",expiration_month:"",allows_charges:"",allows_payouts:"",bank_name:"",bank_code:"",points_card:"",points_type:""},status:"completed",conciliated:!1,creation_date:new Date().toISOString(),operation_date:new Date().toISOString(),description:"Liquidaci\xF3n a traves del portal",error_message:"",order_id:"portalOrder",currency:"MXN",amount:this.validateLiqForm.controls.amountPayment.value,customer:{name:this.currentUserSelected.firstName,last_name:this.currentUserSelected.lastName,email:this.currentUserSelected.email,phone_number:this.currentUserSelected.phoneNumber,address:"",creation_date:"",external_id:"",clabe:""},product:{product_id:this.validateLiqForm.controls.product_id.value,amountTrips:f,frequencies:b,rangeWeeks:I,weeks:D,name:this.productSelected.name},customerId:this.currentUserSelected.customerId,active:!0,category:"permanente",date_created:new Date().toISOString(),product_description:"Liquidaci\xF3n a traves del portal",product_id:this.validateLiqForm.controls.product_id.value,name:this.validateLiqForm.controls.name.value,isTaskIn:"false",isTaskOut:"false",type:"Servicio",isOpenpay:!1,paidApp:"portal",price:this.lastPurchase.price,round:this.validateLiqForm.controls.round.value,routeId:this.validateLiqForm.controls.routeId.value,routeName:this.validateLiqForm.controls.routeName.value,stopDescription:"",stopId:this.validateLiqForm.controls.stopId.value,stopName:this.validateLiqForm.controls.stopDescription.value,validFrom:this.validateLiqForm.controls.validFrom.value,validTo:e,idBoardingPass:this.currentUserSelected.uid,idPurchasteRequest:"",is_courtesy:!1,typePayment:a};n={active:!0,amountPayment:this.validateLiqForm.controls.completeAmount.value,payment:"Liquidacion",status:this.validateForm.controls.status.value,customer_id:this.currentUserSelected.customerId,creation_date:this.validateForm.controls.creation_date.value,name:this.lastPurchase.name,price:this.lastPurchase.price,operation_date:this.validateForm.controls.operation_date.value,routeId:this.lastPurchase.routeId,routeName:this.lastPurchase.routeName,round:this.lastPurchase.round,stopName:this.validateForm.controls.stopDescription.value,stopId:this.validateForm.controls.stopId.value,typePayment:a,validFrom:this.validateForm.controls.validFrom.value,idBoardingPass:this.currentUserSelected.uid,idPurchasteRequest:"",baja:!1,validTo:e,type:"Servicio",fileURL:l},this.userlevelAccess!="3"?m!==void 0?this.customersService.saveBoardingPassDetailToUserPurchaseCollection(this.currentUserSelected.uid,m,M).then(L=>{if(this.msg.success("El registro se genero correctamente"),this.lastPurchase&&this.lastPurchase.realValidTo!==void 0){let W=new Date(this.lastPurchase.realValidTo);this.lastPurchase.validTo=vt.fromDate(W),this.lastPurchase.status="completed",this.lastPurchase.active=!0,this.lastPurchase.typePayment=this.validateLiqForm.controls.typePayment.value,this.lastPurchase.status="completed",this.lastPurchase.price=this.validateLiqForm.controls.amount.value,this.lastPurchase.amountPayment=this.validateLiqForm.controls.amount.value,this.lastPurchase.payment="Liquidacion";let $=this.currentUserSelected.status;$=="preRegister"&&this.userService.updateUserPreRegister(this.currentUserSelected.uid,$),this.customersService.createPurchaseCloud(M,this.currentUserSelected,m),this.customersService.updateBoardingPassToUserPurchaseCollection(this.currentUserSelected.uid,this.lastPurchase).then(G=>{this.msg.success("Se actualizo el pase"),this.canUpdatePayment=!1}).catch(G=>{this.isConfirmLoading=!1})}}).catch(L=>{this.sendMessage("error",L)}):this.sendMessage("error","lastPurchase is undefined"):this.sendMessage("error","El usuario no tiene permisos para actualizar datos, favor de contactar al administrador.")}else this.sendMessage("error","currentUserSelected or uid is null or undefined")}else this.sendMessage("error","lastPurchase is undefined")}onPaymentUpdated(e){if(this.lastPurchase!==void 0){if(+this.lastPurchase.price===e){if(this.lastPurchase.status="completed",this.lastPurchase.amount=e,this.lastPurchase.active=!0,this.lastPurchase?.realValidTo!==void 0){let a=new Date(this.lastPurchase.realValidTo);this.lastPurchase.validTo=vt.fromDate(a)}}else this.lastPurchase.amount=e;this.userlevelAccess!="3"?this.currentUserSelected&&this.currentUserSelected.uid?(this.customersService.updateBoardingPassToUserPurchaseCollection(this.currentUserSelected.uid,this.lastPurchase).then(a=>{this.isVisible=!1,this.isConfirmLoading=!1}).catch(a=>{this.isConfirmLoading=!1}),this.canUpdatePayment=!1):this.sendMessage("error","currentUserSelected or uid is null or undefined"):this.sendMessage("error","El usuario no tiene permisos para actualizar datos, favor de contactar al administrador.")}}getLastPurchase(e){this.loadingLastPurchase=!0,this.lastPurchase=void 0,this.customersService.getLastPurchase(e).valueChanges().subscribe(a=>{this.lastPurchase=a,this.productsReference=a,this.loadingLastPurchase=!1},a=>{this.loadingLastPurchase=!1,this.lastPurchase=void 0,this.productsReference=null})}activatePurchase(e,a){this.currentUserSelected&&this.currentUserSelected.uid?(this.customersService.activatePurchase(this.currentUserSelected.uid,e,a),this.currentUserSelected.paymentId=e):this.sendMessage("error","currentUserSelected or uid is null or undefined")}deletePurchase(e){this.currentUserSelected&&this.currentUserSelected.uid?(this.customersService.deletePurchase(this.currentUserSelected.uid,e),this.isBoardingPassSelected=!1,this.userService.updateUserPreRegister(this.currentUserSelected.uid,this.currentUserSelected.status)):this.sendMessage("error","currentUserSelected or uid is null or undefined")}getLatestPurchases(e){this.loadingLatestPurchases=!0,this.customersService.getLatestUserPurchases(e,10).pipe(V(a=>a.map(n=>{let l=n.payload.doc.id,m=n.payload.doc.data();return U({id:l},m)}))).subscribe({next:a=>{this.latestPurchases=a,this.loadingLatestPurchases=!1},error:a=>{this.latestPurchases=null,this.loadingLatestPurchases=!1}})}getLastestPurchaseRequest(e){this.loadinglatestPurRequest=!0,this.customersService.getLatestUserPurchasesRequest(e,10).pipe(V(a=>a.map(n=>{let l=n.payload.doc.id,m=n.payload.doc.data();return U({id:l},m)}))).subscribe({next:a=>{this.latestPurRequest=a,this.loadinglatestPurRequest=!1},error:a=>{this.latestPurRequest=null,this.loadinglatestPurRequest=!1}})}getLatestPurchaseDetail(e,a){this.customersService.getLatestUserPurchaseDetail(e,10,a).pipe(V(n=>n.map(l=>{let m=l.payload.doc.id,f=l.payload.doc.data();return U({id:m},f)}))).subscribe({next:n=>{this.lastestPurchaseDetail=n},error:n=>{this.lastestPurchaseDetail=null}})}reassingBoardingPass(e,a){if(this.userlevelAccess!="3")if(this.currentUserSelected&&this.currentUserSelected.uid){if(this.lastPurchase!==void 0){let n=this.lastPurchase.id,l=this.currentUserSelected.uid;this.afs.collection("users").doc(this.currentUserSelected.id).collection("boardingPasses").doc(this.lastPurchase.id).set(this.lastPurchase).then(f=>{this.afs.collection("users").doc(l).collection("boardingPasses").doc(n).delete()})}}else this.sendMessage("error","currentUserSelected or uid is null or undefined");else this.sendMessage("error","El usuario no tiene permisos para borrar datos, favor de contactar al administrador.")}bajaBoardingPass(e,a){if(this.currentUserSelected&&this.currentUserSelected.uid){let n=this.afs.collection("users").doc(this.currentUserSelected.id).collection("boardingPasses").doc(e),l={baja:!0};n.update(l).then(m=>{}).catch(m=>{this.sendMessage("error: ",m)})}else this.sendMessage("error","currentUserSelected or uid is null or undefined")}boardingPassSelected(e){this.currentUserSelected&&(this.isBoardingPassSelected=!0,this.lastPurchase=e,this.productsReference=e)}createMultipleBoardingPasses(){this.isCreatingBoardingPasses=!0,setTimeout(()=>{this.isCreatingBoardingPasses=!1,this.isDone=!0},2e3)}showModal(){this.isVisible=!0}showModalEditUser(e){this.isEditUserVisible=!0,this.validateEditForm.controls.firstName.setValue(e.firstName),this.validateEditForm.controls.lastName.setValue(e.lastName),this.validateEditForm.controls.displayName.setValue(e.displayName),this.validateEditForm.controls.userName.setValue(e.userName),this.validateEditForm.controls.studenId.setValue(e.studentId),this.validateEditForm.controls.email.setValue(e.email),this.validateEditForm.controls.customerId.setValue(e.customerId),this.validateEditForm.controls.customerName.setValue(e.customerName),this.validateEditForm.controls.phoneNumber.setValue(e.phoneNumber),this.validateEditForm.controls.defaultRound.setValue(e.defaultRound),this.fillCustomerRouteEditUser(e.customerId),this.fillStopsEditUser(e.customerId,e.defaultRoute),this.validateEditForm.controls.routeId.setValue(e.defaultRoute),this.validateEditForm.controls.defaultRoute.setValue(e.defaultRoute),this.validateEditForm.controls.defaultRouteName.setValue(e.defaultRouteName),this.validateEditForm.controls.defaultStopId.setValue(e.defaultStopId),this.validateEditForm.controls.defaultStopName.setValue(e.defaultStopName)}fillCustomerRouteEditUser(e){this.routesService.getRoutes(e).pipe(N(this.stopSubscription$),V(a=>a.map(n=>{let l=n.payload.doc.id,m=n.payload.doc.data();return U({id:l},m)}))).subscribe(a=>{this.userRoutes=a})}fillStopsEditUser(e,a){this.routesService.getRouteStopPoints(e,a).pipe(N(this.stopSubscription$),V(n=>n.map(l=>{let m=l.payload.doc.id,f=l.payload.doc.data();return Oe(U({},f),{id:m})}))).subscribe(n=>{this.stopPointsList=n})}showModalMessageCenter(){return j(this,null,function*(){if(this.currentUserSelected&&this.currentUserSelected.uid){let e={createdAt:new Date,from:"FyXKSXsUbYNtAbWL7zZ66o2f1M92",fromName:"Apps And Informa",msg:this.newMessage,requestId:"suhB7YFAh6PYXCRuJhfD",token:this.currentUserSelected.token,uid:this.currentUserSelected.uid,result:""},a={timestamp:new Date,title:"Apps And Informa General",from:"FyXKSXsUbYNtAbWL7zZ66o2f1M92",requestId:"suhB7YFAh6PYXCRuJhfD",body:this.newMessage,token:this.currentUserSelected.token,uid:this.currentUserSelected.uid};this.dashboardService.setMessage(a,this.currentUserSelected.uid),this.dashboardService.setChatMessage(e).then(()=>{this.newMessage=""})}else this.sendMessage("error","currentUserSelected or uid is null or undefined")})}onRouteEditUserSelected(e,a){if(e!=null&&e!=""){let l=ie.filter(a,m=>m.routeId==e)[0];if(this.currentUserSelected&&this.currentUserSelected.uid){this.validateEditForm.controls.defaultRouteName.setValue(l.name);let m=this.currentUserSelected.customerId,f=this.currentUserSelected.defaultRoute;m!=this.newCustomerIdEditMode&&f!=l.routeId?(this.newRouteIdEditeMode=l.routeId,this.fillStopsEditUser(this.newCustomerIdEditMode,l.routeId)):this.newRouteIdEditeMode=f}else this.sendMessage("error","currentUserSelected or uid is null or undefined")}}onRouteSelected(e,a){this.routeId$.next(e);let l=ie.filter(a,m=>m.routeId==e)[0];this.validateForm.controls.routeName.setValue(l.name)}onStopPointEditUserSelected(e,a){if(e!=null&&e!=""){let l=ie.filter(a,m=>m.id==e)[0];this.validateEditForm.controls.defaultStopName.setValue(l.name),this.newCustomerIdEditMode!=""&&(this.resetClientEditInfo=!0)}}onStopPointSelected(e,a){let l=ie.filter(a,m=>m.stopPointId==e)[0];this.validateForm.controls.stopName.setValue(l.name),this.validateForm.controls.stopDescription.setValue(l.description)}onCustomerSelected(e,a){if(this.resetClientEditInfo=!1,e!=null){let l=ie.filter(a,m=>m.uid==e)[0];this.currentUserSelected&&this.currentUserSelected.uid?(this.validateEditForm.controls.customerName.setValue(l.name),this.currentUserSelected.customerId!=l.uid?(this.newCustomerIdEditMode=l.uid,this.fillCustomerRouteEditUser(l.uid)):this.newCustomerIdEditMode=""):this.sendMessage("error","currentUserSelected or uid is null or undefined")}}onCanUpdateValidTo(){this.canUpdateValidTo=!0}onValidToUpdated(e){this.canUpdateValidTo=!1}handleOk(){this.isConfirmLoading=!0,setTimeout(()=>{this.isVisible=!1,this.isConfirmLoading=!1},3e3)}handleCancel(){this.isVisible=!1,this.isVisibleBulk=!1,this.isVisibleBulkCredentials=!1,this.isModalCredentialVisible=!1,this.isEditUserVisible=!1,this.isVisiblePurchasePay=!1,this.canUpdatePayment=!1}handleCancelProduct(){this.isProductVisible=!1}refreshList(){this.hasBeenLoaded=!1,this.getUsersList()}getItems(e){let a=e;if(!a){this.devicesList=this.loadedDevicesList.slice();return}let n=a.toLowerCase();this.devicesList=this.loadedDevicesList.filter(l=>Object.values(l).some(m=>String(m).toLowerCase().includes(n)))}getItemsByEmail(e){this.isLoadingUsers=!0,this.afs.collection("users",a=>a.where("email","==",e)).snapshotChanges().pipe(V(a=>a.map(n=>{let l=n.payload.doc.id,m=n.payload.doc.data();return U({id:l},m)}))).subscribe(a=>{this.loadUsers(a),this.isCollapsed=!1})}initializeItems(){this.devicesList=this.loadedDevicesList}showDeleteConfirm(){if(this.currentUserSelected&&this.currentUserSelected.uid){let e=this.currentUserSelected.uid;this.modalService.confirm({nzTitle:"\xBFEst\xE1 seguro de eliminar esta cuenta?",nzContent:'<b style="color: red;">Toda la informaci\xF3n relacionada a esta cuenta ser\xE1 eliminada permanentemente.</b>',nzOkText:"Eliminar",nzOnOk:()=>{this.customersService.deleteUser(e),this.currentUserSelected={uid:"",studentId:"",emailVerified:"",paymentId:"",turno:"",roundTrip:"",disabled:null,customerId:"",firstName:"",lastName:"",email:"",photoURL:"",phoneNumber:"",status:"",id:"",token:"",defaultRoute:"",displayName:"",userName:"",customerName:"",defaultRound:"",defaultRouteName:"",defaultStopName:"",defaultStopId:""},this.isUserSelected=!1},nzCancelText:"No"})}else this.sendMessage("error","currentUserSelected or uid is null or undefined")}getCustomersList(){this.infoSegment.nivelNum!==void 0&&this.infoSegment.nivelNum==1?this.afs.collection("customers").doc(this.userCustomerId).snapshotChanges().pipe(N(this.stopSubscription$),V(a=>{let n=a.payload.id,l=a.payload.data();return U({id:n},l)}),K(a=>(this.customersList=[a],this.checkOptionsOne=[{value:a.id,label:a.name}],a))).subscribe():this.afs.collection("customers",a=>a.orderBy("name")).snapshotChanges().pipe(N(this.stopSubscription$),V(a=>a.map(n=>{let l=n.payload.doc.id,m=n.payload.doc.data();return U({id:l},m)})),K(a=>(this.customersList=a,this.checkOptionsOne=a.map(n=>({value:n.id,label:n.name})),a))).subscribe()}currentPageDataChange(e){this.listOfDisplayData=e,this.refreshStatus()}refreshStatus(){this.isAllDisplayDataChecked=this.devicesList.every(e=>this.mapOfCheckedId[e.id]),this.isIndeterminate=this.devicesList.some(e=>this.mapOfCheckedId[e.id])&&!this.devicesList}checkAllData(e){this.devicesList.forEach(a=>this.mapOfCheckedId[a.id]=e)}submitForm(){if(this.validateSubmit()){var a,n,l=0;if(this.currentUserSelected&&this.currentUserSelected.uid){let D=this.currentUserSelected.uid;this.validateForm.controls.customer_id.setValue(this.currentUserSelected.customerId),this.validateForm.controls.customerId.setValue(this.currentUserSelected.customerId);let I=this.validateForm.controls.amount.value,M=this.validateForm.controls.payment.value;M=="Anticipo"&&(I=this.validateForm.controls.amountPayment.value);let L=this.validateForm.controls.frequencies.value||0;L>0&&(l=Number(L)*80);let W=this.productSelected?.weeks||0,$=this.fb.group({}),G=this.productSelected?.rangeWeeks||{};for(let[X,ke]of Object.entries(G))$.addControl(X,this.fb.control(ke));let H=this.validateForm.controls.price.value,q=this.validateForm.controls.validTo.value||new Date,Ne=this.validateForm.controls.is_courtesy.value||!1;this.validateForm.controls.due_date.setValue(q.toISOString()),I!=H&&!Ne&&this.validateForm.controls.status.setValue("partial");var m=this.validateForm.controls.promiseDate.value||"",f=this.validateForm.controls.creation_date.value.toString();let Le=this.validateForm.controls.typePayment.value;M=="Mensualidad"&&(m=this.validateForm.controls.validTo.value||new Date);for(let X in this.validateForm.controls)this.validateForm.controls[X].markAsDirty(),this.validateForm.controls[X].updateValueAndValidity();if(this.validateForm.valid){this.isConfirmLoading=!0;var b=this.validateForm.controls.fileURL.value||"";let X={authorization:"portalAuth",operation_type:"in",method:this.validateForm.controls.payment.value,transaction_type:"charge",card:{type:"",brand:"",address:"",card_number:"",holder_name:"",expiration_year:"",expiration_month:"",allows_charges:"",allows_payouts:"",bank_name:"",bank_code:"",points_card:"",points_type:""},status:this.validateForm.controls.status.value,conciliated:!1,creation_date:f,operation_date:new Date().toISOString(),description:"Pago a traves de portal",error_message:"",order_id:"portalOrder",currency:"MXN",amount:this.validateForm.controls.amountPayment.value,customer:{name:this.currentUserSelected.firstName,last_name:this.currentUserSelected.lastName,email:this.currentUserSelected.email,phone_number:this.currentUserSelected.phoneNumber,address:"",creation_date:"",external_id:"",clabe:""},product:{product_id:this.validateForm.controls.product_id.value,amountTrips:l,frequencies:L,rangeWeeks:$.value,weeks:W,name:this.productSelected.name},customerId:this.currentUserSelected.customerId,active:!0,category:"permanente",date_created:new Date().toISOString(),product_description:"Pago a traves de portal",product_id:this.validateForm.controls.product_id.value,name:this.validateForm.controls.name.value,isTaskIn:"false",isTaskOut:"false",type:"Servicio",isOpenpay:!1,paidApp:"portal",price:H,round:this.validateForm.controls.round.value,routeId:this.validateForm.controls.routeId.value,routeName:this.validateForm.controls.routeName.value,stopDescription:"",stopId:this.validateForm.controls.stopId.value,stopName:this.validateForm.controls.stopDescription.value,validFrom:this.validateForm.controls.validFrom.value,validTo:q,idBoardingPass:this.currentUserSelected.uid,idPurchasteRequest:"",is_courtesy:!1,typePayment:M,amountTrips:l,currentTrips:0};this.userlevelAccess!="3"?(a={active:!0,amountPayment:I,payment:M,status:this.validateForm.controls.status.value,customer_id:this.currentUserSelected.customerId,customerId:this.currentUserSelected.customerId,creation_date:f,name:this.validateForm.controls.name.value,price:H,operation_date:this.validateForm.controls.operation_date.value,routeId:this.validateForm.controls.routeId.value,routeName:this.validateForm.controls.routeName.value,round:this.validateForm.controls.round.value,stopName:this.validateForm.controls.stopDescription.value,stopId:this.validateForm.controls.stopId.value,typePayment:Le,validFrom:this.validateForm.controls.validFrom.value,validTo:q,idBoardingPass:this.currentUserSelected.uid,idPurchaseRequest:"",baja:!1,type:"Servicio",fileURL:b},this.customersService.saveBoardingPassToUserPurchaseCollection(this.currentUserSelected.uid,X).then(ke=>{this.isVisible=!1,this.isConfirmLoading=!1,this.customersService.getLatestValidUserPurchasesAdvance(D,2,m,M,f).pipe(pt(1),V(Q=>Q.map(ee=>{let mt=ee.payload.doc.data(),ut=ee.payload.doc.id;return U({id:ut},mt)}))).subscribe({next:Q=>{this.customersService.saveBoardingPassDetailToUserPurchaseCollection(D,Q[0].id,X).then(ee=>{this.sendUser=X,this.idBoardingPass=Q[0].id,this.purchaseActive=!0,this.customersService.createPurchaseCloud(this.sendUser,this.currentUserSelected,this.idBoardingPass)}).catch(ee=>{this.sendMessage("error",ee)})},error:Q=>{this.sendMessage("error",Q)}})}).catch(ke=>{this.isConfirmLoading=!1})):this.sendMessage("error","El usuario no tiene permisos para actualizar datos, favor de contactar al administrador.")}}else this.sendMessage("error","currentUserSelected or uid is null or undefined")}}submitReceipt(){}createPurchaseRequest(e,a){return j(this,null,function*(){let n=this.afs.createId(),l=this.afs.collection("users").doc(e).collection("purchaseRequests").doc(n).set(a).then(()=>(this.sendMessage("error","Recibo de compra correctamente generado!"),n)).catch(m=>(this.sendMessage("error",m),""))})}validateSubmit(){if(this.validateForm.controls.product_id.value=="")return this.msg.error("Es necesario seleccionar un producto, favor de validar."),!1;if(this.validateForm.controls.round.value=="")return this.msg.error("Es necesario seleccionar un turno, favor de validar."),!1;let n=this.validateForm.controls.payment.value;if(n=="")return this.msg.error("Es necesario seleccionar un Tipo de Pago, favor de validar."),!1;let l=this.validateForm.controls.promiseDate.value,m=this.validateForm.controls.validTo.value,f=this.validateForm.controls.validFrom.value;if(n=="Anticipo"&&l=="")return this.msg.error("Al seleccionar anticipo es necesario proporcionar una fecha compromiso, favor de validar."),!1;let b=this.validateForm.controls.amountPayment.value,D=this.validateForm.controls.amount.value;if(b=="0")return this.msg.error("Es necesario porporcionar una cantidad a pagar, favor de validar."),!1;if(D<b)return this.msg.error("La cantidad a pagar es mayor al total a pagar, favor de validar."),!1;if(n=="Mensualidad"&&D!=b)return this.msg.error("La cantidad a pagar debe ser igual al total a pagar ya se que selecciono el tipo de pago Mensualidad, favor de validar."),!1;let I=this.validateForm.controls.typePayment.value;return I==""?(this.msg.error("Es necesario seleccionar un tipo de Referencia, favor de validar."),!1):I=="Sistema"&&n=="Anticipo"?(this.msg.error("No puedes seleccionar el tipo de referencia Sistema,si estas generando un anticipo, favor de validar."),!1):I=="Transferencia"&&this.fileListInfo.name==null?(this.msg.error("Es necesario tener un comprobante anexado al pago, favor de agregar uno."),!1):!0}calculateDiff(e,a){let n=new Date(e),l=new Date(a);return Math.floor((l.getTime()-n.getTime())/1e3/60/60/24)}submitEditForm(){if(this.currentUserSelected&&this.currentUserSelected.uid){let e=this.validateEditForm.controls.customerId.value==null?"":this.validateEditForm.controls.customerId.value,a=this.validateEditForm.controls.customerName.value==null?"":this.validateEditForm.controls.customerName.value,n=this.validateEditForm.controls.defaultRound.value==null?"":this.validateEditForm.controls.defaultRound.value,l=this.validateEditForm.controls.defaultRoute.value==null?"":this.validateEditForm.controls.defaultRoute.value,m=this.validateEditForm.controls.defaultRouteName.value==null?"":this.validateEditForm.controls.defaultRouteName.value,f=this.validateEditForm.controls.displayName.value==null?"":this.validateEditForm.controls.displayName.value,b=this.validateEditForm.controls.email.value==null?"":this.validateEditForm.controls.email.value,D=this.validateEditForm.controls.firstName.value==null?"":this.validateEditForm.controls.firstName.value,I=this.validateEditForm.controls.lastName.value==null?"":this.validateEditForm.controls.lastName.value,M=this.validateEditForm.controls.phoneNumber.value==null?"":this.validateEditForm.controls.phoneNumber.value,L=this.validateEditForm.controls.studenId.value==null?"":this.validateEditForm.controls.studenId.value,W=this.validateEditForm.controls.userName.value==null?"":this.validateEditForm.controls.userName.value,$=this.validateEditForm.controls.defaultStopId.value==null?"":this.validateEditForm.controls.defaultStopId.value,G=this.validateEditForm.controls.defaultStopName.value==null?"":this.validateEditForm.controls.defaultStopName.value,H=this.currentUserSelected.uid,q=!0;this.newCustomerIdEditMode!=""&&!this.resetClientEditInfo&&(this.msg.error("Al cambiar de  Empresa es necesario asignar una operaci\xF3n y estaci\xF3n acorde a la empresa."),q=!1),W==""&&(this.msg.error("El Usuario es un valor requerido, favor de validar."),q=!1),L==""&&(this.msg.error("La Identificaci\xF3n es un valor requerido, favor de validar, si no se tiene un valor poner 0"),q=!1),b==""&&(this.msg.error("El Email es un valor requerido, favor de validar."),q=!1),e==""&&(this.msg.error("La Empresa es un valor requerido, favor de validar"),q=!1),l==""&&(this.msg.error(" La operaci\xF3n es un valor requerido, favor de validar"),q=!1);let Ne={uid:H,customerId:e,customerName:a,defaultRound:n,defaultRoute:l,defaultRouteName:m,displayName:f,email:b,firstName:D,lastName:I,phoneNumber:M,studentId:L,userName:W,defaultStopId:$,defaultStopName:G};q&&this.customersService.updateUser(H,Ne).then(Le=>{this.isEditUserVisible=!1,this.currentUserSelected.firstName=D,this.currentUserSelected.lastName=I,this.currentUserSelected.displayName=f,this.currentUserSelected.userName=W,this.currentUserSelected.studentId=L,this.currentUserSelected.email=b,this.currentUserSelected.customerId=e,this.currentUserSelected.customerName=a,this.currentUserSelected.phoneNumber=M,this.currentUserSelected.defaultRound=n,this.currentUserSelected.defaultRoute=l,this.currentUserSelected.defaultRouteName=m,this.currentUserSelected.defaultStopName=G,this.currentUserSelected.defaultStopId=$})}else this.sendMessage("error","currentUserSelected or uid is null or undefined")}submitFormProduct(){this.validateForm.controls.customer_id.setValue(this.currentUserSelected.customerId),this.validateForm.controls.customerId.setValue(this.currentUserSelected.customerId);let e=this.validateForm.controls.amount.value,a=this.validateForm.controls.price.value,n=this.validateForm.controls.validTo.value,l=this.validateForm.controls.is_courtesy.value||!1;this.validateForm.controls.due_date.setValue(n.toISOString()),e!=a&&!l&&this.validateForm.controls.status.setValue("partial");for(let m in this.validateForm.controls)this.validateForm.controls[m].markAsDirty(),this.validateForm.controls[m].updateValueAndValidity();this.validateForm.valid&&(this.isConfirmLoading=!0,this.userlevelAccess!="3"?this.customersService.saveBoardingPassToUserPurchaseCollection(this.currentUserSelected.uid,this.validateForm.value).then(m=>{this.isVisible=!1,this.isConfirmLoading=!1}).catch(m=>{this.isConfirmLoading=!1}):this.sendMessage("error","El usuario no tiene permisos para actualizar datos, favor de contactar al administrador."))}pre(){this.current-=1}next(){if(this.current+=1,this.current===2){let e=[];this.usersByAccount.forEach(a=>{this.mapOfCredentialsCheckedId[a.uid]===!0&&e.push(a)}),this.actualSelectedRows=e.length,this.selectedUsersForCredentials=e}}done(){this.isVisibleBulk=!1,this.isVisibleBulkCredentials=!1,setTimeout(()=>{this.current=0,this.isDone=!0},500)}nzClicOption(){this.productsReference!==null&&this.getLatestPurchaseDetail(this.currentUserSelected.uid,this.productsReference.id)}nzClicTransfer(){console.log("this.currentUserSelected",this.currentUserSelected),this.loadinglatestTransfer=!0,this.customersService.getUserTransferInfo(this.currentUserSelected.uid).subscribe(e=>{this.dataTransfer=e.length?e:[],this.loadinglatestTransfer=!1},e=>{console.error("Error al obtener transferencias",e),this.dataTransfer=[],this.loadinglatestTransfer=!1})}nzClicOptionInformacion(){this.isBoardingPassSelected=!1}getBase64(e,a){let n=new FileReader;n.readAsDataURL(e),n.onload=()=>a(n.result)}handleChange2(e){if(e.file.status!=="uploading"){let n=e.file.status;this.fileListInfo=e.fileList,e.file.originFileObj&&this.getBase64(e.file.originFileObj,l=>{this.fileUrl=l;let m=e.file.name,f=`${this.bucketPath}/${m}`,b=this.bucketStorage.ref(f);this.task=this.bucketStorage.ref(f).putString(l,"data_url"),this.uploadPercent=this.task.percentageChanges(),this.uploadPercent.pipe(V(D=>Number((D/100).toFixed(2)))).subscribe(D=>{this.uploading=D!=0,this.uploadvalue=D}),this.task.snapshotChanges().pipe(ne(()=>{this.uploading=!1,this.downloadURL=b.getDownloadURL(),this.downloadURL.subscribe(D=>j(this,null,function*(){this.updateAdvanceURL(D),D.length>0?this.sendMessage("success",`${e.file.name} Archivo cargado satisfactoriamente.`):n==="error"&&this.sendMessage("error",`${e.file.name} archivo fallido, favor de validar.`)}))})).subscribe()})}}changePayment(e){this.validateForm.controls.amountPayment.setValue(0),this.paymentSelected=e,e=="Mensualidad"?(this.isValidDescriptionPaymentType=!1,this.isAnticipo=!1,this.validateForm.controls.amountPayment.setValue(this.validateForm.controls.amount.value)):e=="Anticipo"?(this.isValidDescriptionPaymentType=!0,this.isAnticipo=!0,this.validateForm.controls.amountPayment.setValue(0)):(this.isAnticipo=!1,this.isValidDescriptionPaymentType=!0,this.validateForm.controls.amountPayment.setValue(0))}onChangeValidTo(e){let a=this.validateForm.controls.validFrom.value;if(this.paymentSelected=="Anticipo"){let n=this.credentialForm.controls.validTo.value||new Date}}changePaymentType(e){e=="Sistema"||e=="Efectivo"?this.ifValidPayment=!1:this.ifValidPayment=!0}changeLiqPaymentType(e){e=="Sistema"||e=="Efectivo"?this.ifValidLiqPayment=!1:this.ifValidLiqPayment=!0}updateAdvanceURL(e){return j(this,null,function*(){this.validateForm.controls.fileURL.patchValue(e)})}updateAdvanceLURL(e){return j(this,null,function*(){this.validateLiqForm.controls.fileURL.patchValue(e)})}downloadPdf(){try{var e=new Re;bt(document.getElementById("credencial")).then(a=>{let n=a.toDataURL("image/png"),l=new Re("p","pt","a4");var m=l.internal.pageSize.getWidth(),f=a.height*m/a.width;l.addImage(n,"PNG",10,10,m,f),l.save("credencial.pdf")})}catch(a){this.sendMessage("error",a)}}generatePDFInfo(){try{var e=new Re;bt(document.getElementById("recibo")).then(a=>{let n=a.toDataURL("image/png"),l=new Re("p","pt","a4");var m=l.internal.pageSize.getWidth(),f=a.height*m/a.width;l.addImage(n,"PNG",10,10,m,f),l.save("recibo.pdf")})}catch(a){this.sendMessage("error",a)}}generatePurchasePDF(e){this.reciboPago.push({amount:e.amount,amountTrips:e.amountTrips,authorization:e.authorization,creation_date:e.creation_date,currentTrips:e.currentTrips,description:e.description,method:e.method,name:e.name,price:e.price,routeName:e.routeName,round:e.round,stopName:e.stopName,type:e.type,typePayment:e.typePayment,validFrom:e.validFrom,validTo:e.validTo}),this.isVisiblePurchasePay=!0}bajaCheck(){}downloadImg(){let e=document.getElementById("download")?.querySelector("canvas");if(e){this.download.nativeElement.href=e.toDataURL("image/png"),this.download.nativeElement.download="ng-zorro-antd";let a=new MouseEvent("click");this.download.nativeElement.dispatchEvent(a)}}static{this.\u0275fac=function(a){return new(a||s)(O(he),O(jt),O(pe),O(Ot),O(ot),O(Z))}}static{this.\u0275cmp=Y({type:s,selectors:[["ng-component"]],viewQuery:function(a,n){if(a&1&&(ft(Ri,5),ft(Li,5)),a&2){let l;_t(l=gt())&&(n.download=l.first),_t(l=gt())&&(n.searchbar=l.first)}},decls:97,vars:53,consts:[["searchInput",""],["suffixIconSearch",""],["searchInputEmail",""],["modalTitle",""],["modalContent",""],["modalPassFooter",""],["modalTitleProduct",""],["modalContentProduct",""],["modalFooter",""],["modalUserTitle",""],["modalUserContent",""],["modalUserFooter",""],["modalTitlePay",""],["modalContentPay",""],["modalPassFooterPay",""],["modalContentBulk",""],["modalFooterBulk",""],["modalTitleLiq",""],["modalContentLiquidacion",""],["modalFooterLiquidacion",""],["modalTitleBulkCredentials",""],["modalContentBulkCredentials",""],["modalFooterBulkCredentials",""],["modalTitleUserCredential",""],["modalContentCredential",""],["modalFooterCredential",""],["basicTable",""],["chatSetting","nzDropdownMenu"],["basicChatData",""],["messageCenterFooterTemplate",""],["basicTable23",""],["basicTablePurchase",""],["tableReference",""],["avatarTemplate",""],["download",""],["rowSelectionTable",""],[2,"margin-right","15px","margin-left","15px","background-color","#f9fbfd !important"],[2,"background-color","#f9fbfd",3,"nzGhost"],[2,"margin-left","350px"],[1,"chat-header",2,"background-color","#f9f9f9"],[3,"nzHeader","nzActive"],[2,"display","flex","align-items","center","gap","15px"],["nzPlaceHolder","Selecciona un cliente",2,"width","450px",3,"ngModelChange","ngModel"],["nzCustomContent","",3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[2,"flex-grow","1",3,"nzSuffix"],["type","text","nz-input","","placeholder","Buscar",3,"keyup"],["type","text","nz-input","","placeholder","Buscar por Correo",3,"keyup.enter"],["nz-button","","nzType","primary",1,"m-r-10",3,"click"],["nzCollapsible","",2,"background-color","white","border","1px solid #ccc !important","height","100vh","overflow-y","auto",3,"nzCollapsedChange","nzCollapsed","nzWidth","nzTrigger"],[1,"chat-input"],["style","height: 100%;",3,"nzData","nzShowPagination","nzPageSize","nzScroll",4,"ngIf"],[2,"background-color","white","border","1px solid #ccc !important"],["nz-icon","",1,"trigger",3,"click","nzType"],[2,"background-color","white !important","border","1px solid #ccc !important","padding","20px",3,"ngClass"],[1,"conversation"],[1,"conversation-wrapper"],["class","conversation-header justify-content-between",4,"ngIf"],["style","width: 100% !important; overflow-y: scroll !important; height: 100% !important; ",4,"ngIf"],[3,"nzVisibleChange","nzOnCancel","nzVisible","nzTitle","nzContent","nzFooter"],[3,"nzVisibleChange","nzOnCancel","nzVisible","nzTitle","nzContent","nzFooter","nzWidth"],["class","footer",4,"ngIf"],[3,"nzVisibleChange","nzOnCancel","nzVisible","nzWidth","nzTitle","nzContent","nzFooter"],["nzCustomContent","",3,"nzLabel","nzValue"],["nz-icon","","nzType","search"],[2,"height","100%",3,"nzData","nzShowPagination","nzPageSize","nzScroll"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"media","align-items-center",2,"height","60px"],["nzShape","square","nzIcon","user",1,"shadow",3,"nzSize","nzSrc"],["nz-icon","",4,"ngIf"],["nz-icon",""],[1,"conversation-header","justify-content-between"],[1,"media","align-items-center"],[1,"m-r-20","d-md-none","d-block","text-dark","font-size-18","m-t-5",3,"routerLink"],["nz-icon","","type","left-circle","theme","outline"],["nzShape","square","nzIcon","user",1,"shadow",3,"nzSrc"],[1,"p-l-15"],["nz-icon","","nzTheme","twotone","nzTwotoneColor","#de4436",4,"ngIf"],[3,"nzStatus"],["nz-dropdown","","nzPlacement","bottomRight",1,"text-dark","font-size-18",3,"nzDropdownMenu","nzTrigger"],["nz-icon","","theme","outline"],["nz-menu",""],["nz-menu-item","",3,"click",4,"ngIf"],["nz-icon","","nzTheme","twotone","nzTwotoneColor","#de4436"],["nz-menu-item","",3,"click"],[2,"width","100% !important","overflow-y","scroll !important","height","100% !important"],["nzTitle","Informacion General",3,"nzClick"],["nz-button","",1,"m-r-10",3,"click"],["nzBordered","","nzSize","small"],["nzTitle","Nombre"],[1,"custom-label-style"],["nzTitle","Apellidos"],["nzTitle","Email"],["nzTitle","Correo Valido"],["nzTitle","Display Name"],["nzTitle","Empresa"],["nzTitle","Operaci\xF3n"],["nzTitle","Estaciones"],["nzTitle","Turno"],["nzTitle","Telefono"],["nzTitle","Identificaci\xF3n"],["nzTitle","Usuario"],["nzTitle","Estatus"],["nzTitle","Tipo de Viaje"],["nzTitle","Pases"],[3,"nzData","nzPageSize","nzLoading","nzLoadingDelay",4,"ngIf"],["nzTitle","Comprobante de Pago"],["nzTitle","Mensajes",3,"nzClick"],[3,"nzData","nzPageSize","nzFooter","nzLoadingDelay"],[4,"ngFor","ngForOf"],["nzTitle","Transferencias",3,"nzClick"],[3,"nzData","nzPageSize","nzShowPagination"],[4,"ngIf"],[3,"nzData","nzPageSize","nzLoading","nzLoadingDelay"],[3,"nzColor"],["nz-text","","nzType","secondary"],[3,"nzColor",4,"ngIf"],["nz-dropdown","",3,"nzDropdownMenu"],["nz-icon","","nzType","ellipsis","nzTheme","outline"],["nz-icon","","nzType","ellipsis","theme","outline"],["nzPlain","","nzText","Mensaje"],["rows","4","nz-input","","placeholder","Mensaje",3,"ngModelChange","ngModel"],["target","_blank",3,"href",4,"ngIf"],["target","_blank",3,"href"],["colspan","6",1,"text-center"],["nz-form","","nzLayout","horizontal",3,"ngSubmit","formGroup"],["formControlName","product_id","nzAllowClear","","nzPlaceHolder","Seleccionar producto / servicio",2,"width","320px",3,"ngModelChange"],["formControlName","routeId","nzAllowClear","","nzPlaceHolder","Selecciona la Operaci\xF3n",2,"width","320px",3,"ngModelChange"],["formControlName","stopId","nzAllowClear","","nzPlaceHolder","Selecciona la estaci\xF3n",2,"width","320px",3,"ngModelChange"],["formControlName","round","nzAllowClear","","nzPlaceHolder","Selecciona Turno",2,"width","200px"],["nzValue","D\xEDa","nzLabel","D\xEDa"],["nzValue","Tarde","nzLabel","Tarde"],["nzValue","Noche","nzLabel","Noche"],["formControlName","payment","nzAllowClear","","nzPlaceHolder","Selecciona un tipo de Pago",2,"width","200px",3,"ngModelChange"],["nzValue","Mensualidad","nzLabel","Mensualidad"],["nzValue","Anticipo","nzLabel","Anticipo"],["nzValue","Liquidacion","nzLabel","Liquidaci\xF3n"],[1,"row"],[1,"col-md-6"],["formControlName","amountPayment",3,"ngModelChange","nzMin","nzMax","nzStep","nzFormatter","nzParser"],["class","col-md-6",4,"ngIf"],["formControlName","amount",3,"ngModelChange","disabled","nzMin","nzMax","nzStep","nzFormatter","nzParser"],["formControlName","is_courtesy","nzCheckedChildren","Si","nzUnCheckedChildren","No",3,"ngModelChange"],["formControlName","typePayment","nzAllowClear","","nzPlaceHolder","Selecciona una Referencia",2,"width","200px",3,"ngModelChange"],["nzValue","Transferencia","nzLabel","Transferencia"],["nzValue","Efectivo","nzLabel","Efectivo"],["nzValue","Sistema","nzLabel","Pago por Sistema"],["nz-checkbox","","formControlName","active"],["formControlName","validFrom"],["formControlName","validTo",3,"ngModelChange","nzDisabledDate"],["formControlName","promiseDate"],["nzName","comprobante","nzType","drag","zAction","/api/posts/",3,"nzChange","nzMultiple","nzLimit","nzSize","nzFileType"],[1,"ant-upload-drag-icon"],[1,"ant-upload-text"],[1,"ant-upload-hint"],["nz-button","",3,"click"],["nz-button","",3,"click","nzLoading"],["formControlName","amount",3,"ngModelChange","nzMin","nzMax","nzStep","nzFormatter","nzParser"],["formControlName","validTo"],["nzCustomContent","",3,"nzLabel","nzValue",4,"ngIf"],[3,"nzSm","nzXs"],["nz-input","","formControlName","firstName","id","firstName"],["nz-input","","formControlName","lastName","id","lastName"],["nz-input","","formControlName","displayName","id","displayName"],["nz-input","","formControlName","userName","id","userName"],["nz-input","","formControlName","phoneNumber","id","phoneNumber"],["nz-input","","formControlName","studenId","id","studenId"],["nz-input","","formControlName","email","id","email"],["formControlName","customerId","nzAllowClear","","nzPlaceHolder","Selecciona la empresa",3,"ngModelChange"],["formControlName","defaultRoute","nzAllowClear","","nzPlaceHolder","Selecciona la Operaci\xF3n",3,"ngModelChange"],["formControlName","defaultStopId","nzAllowClear","","nzPlaceHolder","Selecciona la estaci\xF3n",3,"ngModelChange"],["formControlName","defaultRound","nzAllowClear","","nzPlaceHolder","Selecciona Turno",2,"width","320px"],[1,"footer"],["nzTitle","Detalles"],["nzTitle","Producto"],["nzTitle","Pagado"],["nzStatus","success","nzText","Si",4,"ngIf"],["nzStatus","processing","nzText","Parcial",4,"ngIf"],["nzStatus","warning","nzText","No",4,"ngIf"],["nzTitle","Activo"],["nzStatus","processing","nzText","Si",4,"ngIf"],["nzTitle","Fecha de compra"],["nzTitle","Pase Cortes\xEDa"],["nzTitle","Valido desde"],["nzTitle","Valido hasta"],["nzTitle","Precio"],["nzTitle","Pagado",4,"ngIf"],["nzTitle","Autorizaci\xF3n"],["nzTitle","Estaci\xF3n"],["nzTitle","Monto Abonado"],["nzTitle","Tipo de Referencia"],["nzTitle","Fecha Compromiso"],["nzTitle","Tipo de Pago"],["nzTitle","Informaci\xF3n de la compra"],["nzTitle","Referencias",3,"nzClick"],[3,"nzData","nzPageSize","nzLoadingDelay"],["nzTitle","Historial de Uso"],[3,"userId","boardingPassId"],["nzTitle","C\xF3digo QR"],["nzTitle","Credencial"],[2,"background","#ECECEC","padding","30px"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],["nz-row","","id","credencial","credencial","",3,"nzGutter"],["nz-col","",2,"margin-right","76px",3,"nzSpan"],[1,"rounded-margins",2,"width","400px","border-radius","20px","height","310px","background-color","#73C2FBFE",3,"nzBordered"],["nzDescription","",2,"color","black",3,"nzAvatar","nzTitle"],[2,"color","black"],[2,"margin-bottom","1px"],[2,"display","flex","justify-content","center","align-items","center"],["nzValue","currentUserSelected?.uid-lastPurchase?.idBoardingPass"],[2,"display","flex","flex-wrap","wrap","height","100%"],[2,"width","33.33%","box-sizing","border-box","padding","5px","height","130px"],[2,"border","1px solid black","padding","5px","height","100%"],["nzTitle","",2,"background-image","url('../../../assets/images/logo/andlogoSL.png')","background-position","center","background-size","contain","height","100%",3,"nzBordered"],[2,"color","black","font-size","12px"],["nzStatus","success","nzText","Si"],["nzStatus","processing","nzText","Parcial"],["nzStatus","warning","nzText","No"],["nzStatus","processing","nzText","Si"],["nz-popconfirm","","nzPopconfirmTitle","\xBFEditar el pago?","nzCancelText","Cancelar","nzOkText","Si","nzPopconfirmPlacement","bottom","nzIcon","edit",3,"nzOnConfirm","nzOnCancel",4,"ngIf"],[3,"ngModel","nzMin","nzMax","nzStep","nzFormatter","nzParser","ngModelChange",4,"ngIf"],["nz-popconfirm","","nzPopconfirmTitle","\xBFEditar el pago?","nzCancelText","Cancelar","nzOkText","Si","nzPopconfirmPlacement","bottom","nzIcon","edit",3,"nzOnConfirm","nzOnCancel"],[3,"ngModelChange","ngModel","nzMin","nzMax","nzStep","nzFormatter","nzParser"],[3,"nzValue"],["nz-button","","nzType","primary",3,"click"],[3,"nzSrc"],["id","recibo","recibo",""],["class","recibo",4,"ngFor","ngForOf"],[1,"recibo"],["nzTitle","Recibo","nzDescription","And"],["nzSize","small",3,"nzCurrent"],["nzTitle","Pase","nzDescription","Crear el pase."],["nzTitle","Empresas","nzDescription","Seleccionar las empresas."],["nzTitle","Confirmar","nzDescription","Validar la creaci\xF3n."],["nzShowSizeChanger","",3,"nzCurrentPageDataChange","nzData","nzSize"],["nzShowCheckbox","","nzShowRowSelection","",3,"nzCheckedChange","nzSelections","nzChecked","nzIndeterminate"],["nzShowCheckbox","",3,"nzCheckedChange","nzChecked"],[3,"ngModel","ngModelChange",4,"ngIf"],["nz-popconfirm","","nzPopconfirmTitle","\xBFEst\xE1s seguro de modificar la vigencia?","nzCancelText","Cancelar","nzOkText","Si","nzPopconfirmPlacement","bottom","nzIcon","edit",3,"nzOnConfirm","nzOnCancel",4,"ngIf"],["nz-popconfirm","","nzPopconfirmTitle","\xBFVas a recibir dinero?","nzCancelText","Cancelar","nzOkText","Si","nzPopconfirmPlacement","bottom","nzIcon","edit",3,"nzOnConfirm","nzOnCancel",4,"ngIf"],[3,"ngModelChange","ngModel"],["nz-popconfirm","","nzPopconfirmTitle","\xBFEst\xE1s seguro de modificar la vigencia?","nzCancelText","Cancelar","nzOkText","Si","nzPopconfirmPlacement","bottom","nzIcon","edit",3,"nzOnConfirm","nzOnCancel"],["nz-popconfirm","","nzPopconfirmTitle","\xBFVas a recibir dinero?","nzCancelText","Cancelar","nzOkText","Si","nzPopconfirmPlacement","bottom","nzIcon","edit",3,"nzOnConfirm","nzOnCancel"],[1,"steps-action"],["nz-button","",3,"disabled","click",4,"ngIf"],["nz-button","",3,"nzLoading","click",4,"ngIf"],["nz-button","",3,"click",4,"ngIf"],["nz-button","",3,"click","disabled"],["nz-input","","formControlName","productSelected"],["formControlName","amount"],["formControlName","alreadyPayment"],["formControlName","completeAmount"],["nz-checkbox","","formControlName","baja",3,"ngModelChange"],["nz-button","",2,"background-color","#4F6F57","color","#f6f3ea",3,"click"],["nzTitle","Credencial","nzDescription","Crear la credencial."],["nzTitle","Usuarios","nzDescription","Seleccionar los usuarios."],[1,"steps-content","overflow-auto"],[2,"color","#4F6F57"],["nz-button","","style"," background-color: #4F6F57; color: #f6f3ea;",3,"click",4,"ngIf"],["nz-button","","style"," background-color: #4F6F57; color: #f6f3ea;",3,"disabled","click",4,"ngIf"],["nz-button","","style"," background-color: #4F6F57; color: #f6f3ea;",3,"disabled","nzLoading","click",4,"ngIf"],["nz-button","",2,"background-color","#4F6F57","color","#f6f3ea",3,"click","disabled"],["nz-button","",2,"background-color","#4F6F57","color","#f6f3ea",3,"click","disabled","nzLoading"]],template:function(a,n){if(a&1){let l=x();t(0,"div",36)(1,"nz-layout")(2,"nz-page-header",37)(3,"nz-page-header-title",38),o(4,"General"),i(),t(5,"nz-page-header-subtitle"),o(6,"Listado general de Usuarios "),i(),t(7,"nz-page-header-content")(8,"div",39)(9,"nz-collapse")(10,"nz-collapse-panel",40)(11,"div",41)(12,"nz-select",42),w("ngModelChange",function(f){return p(l),T(n.selectedOption,f)||(n.selectedOption=f),h(f)}),_("ngModelChange",function(f){return p(l),h(n.log(f))}),z(13,qi,2,3,"nz-option",43),i(),t(14,"nz-input-group",44)(15,"input",45,0),_("keyup",function(){p(l);let f=S(16);return h(n.getItems(f.value))}),i()(),z(17,$i,1,0,"ng-template",null,1,E),t(19,"nz-input-group",44)(20,"input",46,2),_("keyup.enter",function(){p(l);let f=S(21);return h(n.getItemsByEmail(f.value))}),i()(),z(22,Wi,1,0,"ng-template",null,1,E),t(24,"button",47),_("click",function(){return p(l),h(n.searchloadUsers())}),o(25,"Cargar Usuarios"),i()()()()()()(),t(26,"nz-layout")(27,"nz-sider",48),w("nzCollapsedChange",function(f){return p(l),T(n.isCollapsed,f)||(n.isCollapsed=f),h(f)}),t(28,"div",49),z(29,Gi,4,6,"nz-table",50),i()(),t(30,"nz-layout")(31,"nz-header",51)(32,"span",52),_("click",function(){return p(l),h(n.isCollapsed=!n.isCollapsed)}),i()(),t(33,"nz-content",53)(34,"div",54)(35,"div",55),z(36,Ki,23,11,"div",56),t(37,"div"),z(38,xn,74,27,"nz-tabset",57),t(39,"nz-modal",58),w("nzVisibleChange",function(f){return p(l),T(n.isVisible,f)||(n.isVisible=f),h(f)}),_("nzOnCancel",function(){return p(l),h(n.handleCancel())}),z(40,Sn,1,0,"ng-template",null,3,E)(42,wn,71,18,"ng-template",null,4,E)(44,Fn,4,1,"ng-template",null,5,E),i(),t(46,"nz-modal",58),w("nzVisibleChange",function(f){return p(l),T(n.isProductVisible,f)||(n.isProductVisible=f),h(f)}),_("nzOnCancel",function(){return p(l),h(n.handleCancelProduct())}),z(47,In,1,0,"ng-template",null,6,E)(49,Un,28,7,"ng-template",null,7,E)(51,Rn,4,1,"ng-template",null,8,E),i(),t(53,"nz-modal",59),w("nzVisibleChange",function(f){return p(l),T(n.isEditUserVisible,f)||(n.isEditUserVisible=f),h(f)}),_("nzOnCancel",function(){return p(l),h(n.handleCancel())}),z(54,Ln,1,0,"ng-template",null,9,E)(56,qn,61,46,"ng-template",null,10,E)(58,$n,4,0,"ng-template",null,11,E),i()(),z(60,aa,125,63,"div",60),i()()()()()()(),t(61,"nz-modal",58),w("nzVisibleChange",function(f){return p(l),T(n.isVisiblePurchasePay,f)||(n.isVisiblePurchasePay=f),h(f)}),_("nzOnCancel",function(){return p(l),h(n.handleCancel())}),z(62,ra,1,0,"ng-template",null,12,E)(64,sa,2,1,"ng-template",null,13,E)(66,la,4,1,"ng-template",null,14,E),i(),t(68,"nz-modal",58),w("nzVisibleChange",function(f){return p(l),T(n.isVisibleBulk,f)||(n.isVisibleBulk=f),h(f)}),_("nzOnCancel",function(){return p(l),h(n.handleCancel())}),t(69,"div"),z(70,da,2,0,"ng-template",null,3,E)(72,xa,10,4,"ng-template",null,15,E)(74,Va,5,4,"ng-template",null,16,E),i()(),t(76,"nz-modal",58),w("nzVisibleChange",function(f){return p(l),T(n.canUpdatePayment,f)||(n.canUpdatePayment=f),h(f)}),_("nzOnCancel",function(){return p(l),h(n.handleCancel())}),z(77,Pa,1,0,"ng-template",null,17,E)(79,wa,41,2,"ng-template",null,18,E)(81,Fa,6,0,"ng-template",null,19,E),i(),t(83,"nz-modal",61),w("nzVisibleChange",function(f){return p(l),T(n.isVisibleBulkCredentials,f)||(n.isVisibleBulkCredentials=f),h(f)}),_("nzOnCancel",function(){return p(l),h(n.handleCancel())}),z(84,Ia,1,0,"ng-template",null,20,E)(86,Aa,10,5,"ng-template",null,21,E)(88,Xa,5,4,"ng-template",null,22,E),i(),t(90,"nz-modal",61),w("nzVisibleChange",function(f){return p(l),T(n.isModalCredentialVisible,f)||(n.isModalCredentialVisible=f),h(f)}),_("nzOnCancel",function(){return p(l),h(n.handleCancel())}),z(91,ja,1,0,"ng-template",null,23,E)(93,Ga,18,1,"ng-template",null,24,E)(95,Ha,3,2,"ng-template",null,25,E),i()}if(a&2){let l=S(18),m=S(41),f=S(43),b=S(45),D=S(48),I=S(50),M=S(52),L=S(55),W=S(57),$=S(59),G=S(63),H=S(65),q=S(67),Ne=S(73),Le=S(75),X=S(78),ke=S(80),Q=S(82),ee=S(87),mt=S(89),ut=S(94),Ti=S(96);r(2),d("nzGhost",!1),r(8),d("nzHeader","Filtros avanzados")("nzActive",!0),r(2),P("ngModel",n.selectedOption),r(),d("ngForOf",n.customersList),r(),d("nzSuffix",l),r(5),d("nzSuffix",l),r(8),P("nzCollapsed",n.isCollapsed),d("nzWidth",330)("nzTrigger",null),r(2),d("ngIf",(n.devicesList==null?null:n.devicesList.length)>0),r(3),d("nzType",n.isCollapsed?"menu-unfold":"menu-fold"),r(),d("ngClass",A(51,Oi,n.isContentOpen)),r(3),d("ngIf",n.isUserSelected),r(2),d("ngIf",n.isUserSelected),r(),P("nzVisible",n.isVisible),d("nzTitle",m)("nzContent",f)("nzFooter",b),r(7),P("nzVisible",n.isProductVisible),d("nzTitle",D)("nzContent",I)("nzFooter",M),r(7),P("nzVisible",n.isEditUserVisible),d("nzTitle",L)("nzContent",W)("nzFooter",$)("nzWidth",600),r(7),d("ngIf",n.isBoardingPassSelected),r(),P("nzVisible",n.isVisiblePurchasePay),d("nzTitle",G)("nzContent",H)("nzFooter",q),r(7),P("nzVisible",n.isVisibleBulk),d("nzTitle","Emitir m\xFAltiples pases")("nzContent",Ne)("nzFooter",Le),r(8),P("nzVisible",n.canUpdatePayment),d("nzTitle",X)("nzContent",ke)("nzFooter",Q),r(7),P("nzVisible",n.isVisibleBulkCredentials),d("nzWidth",800)("nzTitle","Emitir m\xFAltiples credenciales")("nzContent",ee)("nzFooter",mt),r(7),P("nzVisible",n.isModalCredentialVisible),d("nzWidth",800)("nzTitle","Emitir credencial")("nzContent",ut)("nzFooter",Ti)}},dependencies:[Tt,se,Be,Kt,fe,ze,ge,Ce,ve,be,Xe,je,Mt,kt,ni,Yt,nt,et,tt,Zt,rt,it,at,ei,De,Ut,si,di,li,ci,ai,st,ui,mi,hi,pi,Xt,$t,qt,Wt,Bt,At,Gt,Ht,Qt,ye,xe,Se,Lt,Rt,Pe,Ee,Ve,Jt,ti,Te,we,Ft,ce,$e,le,de,me,ue,Nt,Ye,Ke,ri,ii,fi,qe,wt],styles:[".centered-header[_ngcontent-%COMP%]{justify-content:center;align-items:center}.header-content[_ngcontent-%COMP%]{text-align:center}.recibo[_ngcontent-%COMP%]{margin-bottom:10px;width:500px}.horizontal-checkbox[_ngcontent-%COMP%]{display:inline-block;margin-right:8px}.chat-container[_ngcontent-%COMP%]{width:300px;display:flex;flex-direction:column;border:1px solid #ccc;border-radius:5px;overflow:hidden;font-family:Arial,sans-serif;background-color:#fff}.chat-header[_ngcontent-%COMP%]{padding:10px;text-align:center;font-weight:700;border:1px solid #edf2f9}.chat-list[_ngcontent-%COMP%]{flex:1;height:150px;overflow-y:auto;padding:10px;background-color:#fff}.chat-message[_ngcontent-%COMP%]{padding:5px;margin-bottom:10px;border-radius:5px;background-color:#fff;border:1px solid #ddd}.chat-message[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{font-weight:700;margin-right:5px}.chat-input[_ngcontent-%COMP%]{display:flex;height:400px;padding:10px;background-color:#fff;border-top:1px solid}.chat-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:10px;border:1px solid #ccc;border-radius:5px}.chat-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;margin-left:10px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer}.chat-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.trigger[_ngcontent-%COMP%]{font-size:18px;line-height:64px;padding:0 24px;cursor:pointer;transition:color .3s}.trigger[_ngcontent-%COMP%]:hover{color:#f9f9f9}nz-header[_ngcontent-%COMP%]{background:#fff;padding:0}"]})}}return s})();var Pi=(()=>{class s{constructor(e,a){this.afs=e,this.messageService=a}getFiles(){return this.afs.collectionGroup("quality",a=>a.where("active","==",!0).orderBy("folder","desc")).valueChanges()}saveFileCollection(e){let a=this.afs.createId();return e.uid=a,this.afs.collection("quality").doc(a).set(e)}deletePurchase(e){this.filesCollection=this.afs.collection("quality").doc(e),this.filesCollection.delete().then(()=>{this.sendMessage("success","Se borro con \xE9xito el Archivo")}).catch(a=>{this.sendMessage("error",`\xA1Oops! Algo sali\xF3 mal cuando se intentaba borrar un archivo ... ${a}`)})}sendMessage(e,a){this.messageService.create(e,a)}static{this.\u0275fac=function(a){return new(a||s)(ht(he),ht(Z))}}static{this.\u0275prov=Et({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();function Qa(s,c){if(s&1&&v(0,"nz-option",22),s&2){let e=c.$implicit;d("nzValue",e)("nzLabel",e)}}function Ja(s,c){s&1&&v(0,"input",23)}function Ka(s,c){if(s&1){let e=x();t(0,"button",11),_("click",function(){p(e);let n=u();return h(n.newFolderSave())}),o(1,"\u2713"),i()}}function Ya(s,c){if(s&1){let e=x();t(0,"button",24),_("click",function(){p(e);let n=u();return h(n.handleOKEdit())}),o(1,"Aceptar"),i(),t(2,"button",11),_("click",function(){p(e);let n=u();return h(n.handleCancelEdit())}),o(3,"Cancelar"),i()}if(s&2){let e=u();d("nzLoading",e.isConfirmLoading)}}function Za(s,c){if(s&1&&(t(0,"div")(1,"a",27),o(2,"Ver Comprobante"),i()()),s&2){let e=u(2);r(),oe("href",e.urlFile,Me)}}function er(s,c){if(s&1){let e=x();t(0,"div")(1,"form",25)(2,"nz-form-item")(3,"button",11),_("click",function(){p(e);let n=u();return h(n.changeOption(1))}),o(4,"Ver"),i(),t(5,"button",11),_("click",function(){p(e);let n=u();return h(n.changeOption(2))}),o(6,"Borrar"),i()(),t(7,"nz-form-item"),z(8,Za,3,1,"div",26),i()()()}if(s&2){let e=u();r(8),d("ngIf",e.isVerVisible)}}var xo=(()=>{class s{constructor(e,a,n){this.msg=e,this.bucketStorage=a,this.fb=n,this.rolService=F(Qe),this.authService=F(_e),this.isConfirmLoading=!1,this.fileUrl="http://themenate.com/applicator/dist/assets/images/avatars/thumb-13.jpg",this.autosave=!0,this.uploading=!1,this.bucketPath="/quality1/quality/",this.view="Ver",this.isVerVisible=!1,this.isEditModalVisible=!1,this.urlFile="",this.uploadvalue=0,this.rowFolders=[],this.addNewFolder=!1,this.selectedRecord=[],this.rowGroupPanelShow="always",this.infoLoad=[],this.qualityService=F(Pi),this.authService.user.subscribe(l=>{l&&(this.user=l,this.user&&this.user.rolId!=null&&this.rolService.getRol(this.user.rolId).valueChanges().subscribe(m=>{this.infoLoad=m,this.userlevelAccess=this.infoLoad.optionAccessLavel}))})}ngOnInit(){this.validateForm=this.fb.group({folder:[""],fileUrl:[""],fileName:[""],NewFolderName:[""]}),this.loadFiles()}sendMessage(e,a){this.msg.create(e,a)}loadFiles(){this.qualitySubscription=this.qualityService.getFiles().subscribe(e=>{if(this.rowData=e,e.length>=0){e.forEach(n=>{this.rowFolders.push(n.folder)});let a=Array.from(new Set(this.rowFolders));this.rowFolders=a}})}ngOnDestroy(){this.qualitySubscription.unsubscribe()}submitForm(){var e,a=this.fileURL||"",n=this.validateForm.controls.folder.value||"",l=this.fileName||"No-Name",m=new Date;n==""&&this.msg.error("Se requiere seleccionar una carpeta para almacenenar."),a==""&&this.msg.error("Se requiere tener un archivo para subir."),e={active:!0,folder:n,fileUrl:a,fileName:l,creation_date:m,uid:""},this.userlevelAccess!="3"?this.qualityService.saveFileCollection(e).then(f=>{this.msg.success("Se subio el archivo con \xE9xito."),this.refreshTable()}).catch(f=>{this.msg.error("Se presento un error."+f)}):this.sendMessage("error","El usuario no tiene permisos para actualizar datos, favor de contactar al administrador.")}changeFolder(e){}newFolder(){this.addNewFolder=!0}handleChange(e){if(e.file.status!=="uploading"){let n=e.file.status;this.fileListInfo=e.fileList,e.file.originFileObj&&this.getBase64(e.file.originFileObj,l=>{this.fileUrl=l;let m=e.file.name,f=`${this.bucketPath}/${m}`,b=this.bucketStorage.ref(f);this.task=this.bucketStorage.ref(f).putString(l,"data_url"),this.uploadPercent=this.task.percentageChanges(),this.uploadPercent.pipe(V(D=>Number((D/100).toFixed(2)))).subscribe(D=>{this.uploading=D!=0,this.uploadvalue=D}),this.task.snapshotChanges().pipe(ne(()=>{this.uploading=!1,this.downloadURL=b.getDownloadURL(),this.downloadURL.subscribe(D=>j(this,null,function*(){this.updateURL(D),D.length>0?this.sendMessage("success",`${e.file.name} Archivo cargado satisfactoriamente.`):n==="error"&&this.sendMessage("error",`${e.file.name} archivo fallido, favor de validar.`)}))})).subscribe()})}}updateURL(e){return j(this,null,function*(){this.fileURL=e})}getBase64(e,a){let n=new FileReader;n.readAsDataURL(e),n.onload=()=>a(n.result)}refreshTable(){this.loadFiles()}newFolderSave(){let e=this.validateForm.get("NewFolderName");e&&e.value!==null&&(this.rowFolders.push(e.value),this.addNewFolder=!1,this.validateForm.controls.NewFolderName.setValue(""))}handleOKEdit(){this.isVerVisible?this.isVerVisible=!0:this.userlevelAccess=="1"?(this.qualityService.deletePurchase(this.selectedUid),this.refreshTable(),this.isEditModalVisible=!1):this.sendMessage("error","El usuario no tiene permisos para borrar datos, favor de contactar al administrador.")}changeOption(e){e==2?this.isVerVisible=!1:this.isVerVisible=!0}handleCancelEdit(){this.isEditModalVisible=!1}handleChangeUpload(e){e.file.status!=="uploading"&&(e.file.status==="done"?this.msg.success(`${e.file.name} file uploaded successfully`):e.file.status==="error"&&this.msg.error(`${e.file.name} file upload failed.`),e.file.originFileObj&&this.getBase64(e.file.originFileObj,a=>{this.fileUrl=a;let n=this.bucketStorage.ref(this.bucketPath+e.file.name);this.task=this.bucketStorage.ref(this.bucketPath+e.file.name).putString(a,"data_url"),this.fileName=e.file.name;var l=this.bucketStorage.ref(this.bucketPath).child(e.file.name);this.uploadPercent=this.task.percentageChanges(),this.uploadPercent.pipe(V(m=>Number((m/100).toFixed(2)))).subscribe(m=>{this.uploading=m!=0,this.uploadvalue=m}),this.task.snapshotChanges().pipe(ne(()=>{this.downloadURL=n.getDownloadURL(),this.downloadURL.subscribe(m=>j(this,null,function*(){this.updateURL(m)}))})).subscribe()}))}static{this.\u0275fac=function(a){return new(a||s)(O(Z),O(ot),O(pe))}}static{this.\u0275cmp=Y({type:s,selectors:[["ng-component"]],decls:44,vars:8,consts:[["modalFooterEdit",""],["modalContent",""],[2,"margin","buttom 15px"],[1,"site-page-header-ghost-wrapper"],[2,"background-color","#f9fbfd",3,"nzGhost"],["nz-form","","nzLayout","vertical",3,"formGroup"],[1,"body"],[1,"row"],[1,"col-md-4"],["formControlName","folder","nzAllowClear","","nzPlaceHolder","Selecciona una carpeta donde almacenar el documento.",2,"width","200px",3,"ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-button","",2,"background-color","#4F6F57","color","#f6f3ea",3,"click"],[1,"col-md-8"],["style","width: 350px;","nz-input","","placeholder","Ingresa el nombre de la carpeta","formControlName","NewFolderName",4,"ngIf"],["nz-button","","style"," background-color: #4F6F57; color: #f6f3ea;",3,"click",4,"ngIf"],[1,"col-md-2"],["zAction","/api/posts/",3,"nzChange"],["nz-button",""],["nz-icon",""],[1,"col-md-10"],[1,"col-md-12"],["nzTitle","Detalle Archivo","nzWidth","500px",3,"nzVisibleChange","nzOnCancel","nzVisible","nzContent","nzFooter"],[3,"nzValue","nzLabel"],["nz-input","","placeholder","Ingresa el nombre de la carpeta","formControlName","NewFolderName",2,"width","350px"],["nz-button","",2,"background-color","#4F6F57","color","#f6f3ea",3,"click","nzLoading"],["nz-form",""],[4,"ngIf"],["target","_blank",3,"href"]],template:function(a,n){if(a&1){let l=x();t(0,"div",2)(1,"div",3)(2,"nz-page-header",4)(3,"nz-page-header-title"),o(4,"Calidad"),i(),t(5,"nz-page-header-subtitle"),o(6," Repositorio "),i()(),t(7,"form",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"nz-form-item")(12,"nz-form-label"),o(13,"Carpeta"),i(),t(14,"nz-select",9),_("ngModelChange",function(f){return p(l),h(n.changeFolder(f))}),z(15,Qa,1,2,"nz-option",10),i(),t(16,"button",11),_("click",function(){return p(l),h(n.newFolder())}),o(17,"+"),i()()(),t(18,"div",12),z(19,Ja,1,0,"input",13)(20,Ka,2,0,"button",14),i()(),t(21,"div",7)(22,"div",15)(23,"nz-form-item")(24,"nz-upload",16),_("nzChange",function(f){return p(l),h(n.handleChangeUpload(f))}),t(25,"button",17),v(26,"span",18),o(27," Cargar Archivo "),i()()()(),t(28,"div",19)(29,"nz-form-item")(30,"button",11),_("click",function(){return p(l),h(n.submitForm())}),o(31,"Subir"),i()()()()(),t(32,"div",7)(33,"div",15)(34,"button",11),_("click",function(){return p(l),h(n.refreshTable())}),o(35,"Actualizar"),i()(),v(36,"div",19),i(),t(37,"div",7),v(38,"div",20),i()()(),t(39,"nz-modal",21),w("nzVisibleChange",function(f){return p(l),T(n.isEditModalVisible,f)||(n.isEditModalVisible=f),h(f)}),_("nzOnCancel",function(){return p(l),h(n.handleCancelEdit())}),z(40,Ya,4,1,"ng-template",null,0,E),i(),z(42,er,9,1,"ng-template",null,1,E),i()}if(a&2){let l=S(41),m=S(43);r(2),d("nzGhost",!1),r(5),d("formGroup",n.validateForm),r(8),d("ngForOf",n.rowFolders),r(4),d("ngIf",n.addNewFolder),r(),d("ngIf",n.addNewFolder),r(19),P("nzVisible",n.isEditModalVisible),d("nzContent",m)("nzFooter",l)}},dependencies:[se,Be,fe,ze,ge,Ce,ve,be,je,De,st,ye,xe,Se,Pe,Ee,Ve,Te,we,ce,$e,le,de,me,ue,It],styles:[".footer[_ngcontent-%COMP%]{height:100%!important;position:absolute;padding:0 25px;display:flex;justify-content:space-between}.body[_ngcontent-%COMP%]{overflow-y:auto;padding:15px 25px;position:relative;width:100%}"]})}}return s})();var Fe=s=>({passes:s}),Ie=s=>({data:s});function tr(s,c){if(s&1&&(t(0,"nz-option",43),o(1),i()),s&2){let e=c.$implicit;d("nzLabel",e.name)("nzValue",e.id),r(),C(" ",e.name,"")}}function ir(s,c){if(s&1&&(t(0,"nz-option",43),v(1,"i",44),o(2),i()),s&2){let e=c.$implicit;d("nzLabel",e.name)("nzValue",e.id),r(2),R(" ",e.name," $",e.price," ")}}function nr(s,c){if(s&1&&(t(0,"tr")(1,"td"),o(2),i(),t(3,"td"),o(4),i(),t(5,"td"),o(6),i(),t(7,"td"),o(8),i(),t(9,"td"),o(10),i()()),s&2){let e=c.$implicit,a=u();r(2),g(e.customerName),r(2),g(e.routeName),r(2),g(a.customCellRenderer(A(7,Ie,A(5,Fe,e.passes)))),r(2),g(a.customCellRendererMonto(A(11,Ie,A(9,Fe,e.passes)))),r(2),g(a.formatPermission(e.permission))}}function ar(s,c){if(s&1&&(t(0,"nz-option",43),o(1),i()),s&2){let e=c.$implicit;d("nzLabel",e.name)("nzValue",e.id),r(),C(" ",e.name,"")}}function rr(s,c){if(s&1&&(t(0,"tr")(1,"td"),o(2),i(),t(3,"td"),o(4),i(),t(5,"td"),o(6),i(),t(7,"td"),o(8),i(),t(9,"td"),o(10),i()()),s&2){let e=c.$implicit,a=u();r(2),g(e.customerName),r(2),g(e.routeName),r(2),g(a.customCellRenderer(A(7,Ie,A(5,Fe,e.passes)))),r(2),g(a.customCellRendererMonto(A(11,Ie,A(9,Fe,e.passes)))),r(2),g(a.formatPermission(e.permission))}}function or(s,c){if(s&1&&(t(0,"nz-option",43),o(1),i()),s&2){let e=c.$implicit;d("nzLabel",e.name)("nzValue",e.id),r(),C(" ",e.name," ")}}function sr(s,c){if(s&1&&(t(0,"div")(1,"nz-option",43),v(2,"i",44),o(3),i()()),s&2){let e=c.$implicit;r(),d("nzLabel",e.name)("nzValue",e.id),r(2),R(" ",e.name," $",e.price," ")}}function lr(s,c){if(s&1&&(t(0,"div")(1,"nz-option",43),v(2,"i",44),o(3),i()()),s&2){let e=c.$implicit;r(),d("nzLabel",e.name)("nzValue",e.id),r(2),C(" ",e.name," ")}}function dr(s,c){if(s&1&&(t(0,"tr")(1,"td"),o(2),i(),t(3,"td"),o(4),i(),t(5,"td"),o(6),i(),t(7,"td"),o(8),i(),t(9,"td"),o(10),i()()),s&2){let e=c.$implicit,a=u();r(2),g(e.customerName),r(2),g(e.routeName),r(2),g(a.customCellRenderer(A(7,Ie,A(5,Fe,e.passes)))),r(2),g(a.customCellRendererMonto(A(11,Ie,A(9,Fe,e.passes)))),r(2),g(a.formatPermission(e.permission))}}function cr(s,c){if(s&1&&(t(0,"nz-option",43),o(1),i()),s&2){let e=c.$implicit;d("nzLabel",e.name)("nzValue",e.id),r(),C(" ",e.name," ")}}function mr(s,c){if(s&1&&(t(0,"div")(1,"nz-option",43),v(2,"i",44),o(3),i()()),s&2){let e=c.$implicit;r(),d("nzLabel",e.name)("nzValue",e.id),r(2),R(" ",e.name," $",e.price," ")}}function ur(s,c){if(s&1&&(t(0,"tr")(1,"td"),o(2),i(),t(3,"td"),o(4),i(),t(5,"td"),o(6),i(),t(7,"td"),o(8),i(),t(9,"td"),o(10),i(),t(11,"td"),o(12),i(),t(13,"td"),o(14),i(),t(15,"td"),o(16),i(),t(17,"td"),o(18),i(),t(19,"td"),o(20),i()()),s&2){let e=c.$implicit,a=u();r(2),g(e.customerName),r(2),g(e.routeName),r(2),g(e.round),r(2),g(e.stopName),r(2),g(e.name),r(2),g(a.formatPermission(e.isTaskIn)),r(2),g(a.formatPermission(e.isTaskOut)),r(2),g(a.formatPermission(e.is_courtesy)),r(2),g(a.formatValidTo(e.validFrom)),r(2),g(a.formatValidTo(e.validTo))}}function pr(s,c){if(s&1&&(t(0,"nz-option",43),o(1),i()),s&2){let e=c.$implicit;d("nzLabel",e.name)("nzValue",e.id),r(),C(" ",e.name," ")}}function hr(s,c){if(s&1&&(t(0,"div")(1,"nz-option",43),v(2,"i",44),o(3),i()()),s&2){let e=c.$implicit;r(),d("nzLabel",e.name)("nzValue",e.id),r(2),R(" ",e.name," $",e.price," ")}}function fr(s,c){if(s&1&&(t(0,"tr")(1,"td"),o(2),i(),t(3,"td"),o(4),i(),t(5,"td"),o(6),i(),t(7,"td"),o(8),i(),t(9,"td"),o(10),i(),t(11,"td"),o(12),i(),t(13,"td"),o(14),i(),t(15,"td"),o(16),i(),t(17,"td"),o(18),i(),t(19,"td"),o(20),i()()),s&2){let e=c.$implicit,a=u();r(2),g(e.customerName),r(2),g(e.routeName),r(2),g(e.round),r(2),g(e.amountPayment),r(2),g(a.formatPromiseDate(e.promiseDate)),r(2),g(a.calculateDaysDifference(e.promiseDate)),r(2),C(" ",e.name,""),r(2),g(a.formatMeteSacaCortesia(e)),r(2),g(a.formatValidTo(e.validFrom)),r(2),g(a.formatValidTo(e.validTo))}}function _r(s,c){if(s&1&&(t(0,"nz-option",43),o(1),i()),s&2){let e=c.$implicit;d("nzLabel",e.name)("nzValue",e.id),r(),C(" ",e.name," ")}}function gr(s,c){if(s&1&&(t(0,"div")(1,"nz-option",43),v(2,"i",44),o(3),i()()),s&2){let e=c.$implicit;r(),d("nzLabel",e.name)("nzValue",e.id),r(2),R(" ",e.name," $",e.price," ")}}function zr(s,c){if(s&1&&(t(0,"tr")(1,"td"),o(2),i(),t(3,"td"),o(4),i(),t(5,"td"),o(6),i(),t(7,"td"),o(8),i(),t(9,"td"),o(10),i(),t(11,"td"),o(12),i(),t(13,"td"),o(14),i(),t(15,"td"),o(16),i(),t(17,"td"),o(18),i(),t(19,"td"),o(20),i(),t(21,"td"),o(22),i()()),s&2){let e=c.$implicit,a=u();r(2),g(e.customerName),r(2),g(e.routeName),r(2),g(e.round),r(2),g(e.amountPayment),r(2),g(a.calculatePendingPayment(e)),r(2),g(a.formatPromiseDate(e.promiseDate)),r(2),g(a.calculateDaysDifference(e.promiseDate)),r(2),C(" ",e.name,""),r(2),g(a.formatMeteSacaCortesia(e)),r(2),g(a.formatValidTo(e.validFrom)),r(2),g(a.formatValidTo(e.validTo))}}function vr(s,c){if(s&1&&(t(0,"nz-option",43),o(1),i()),s&2){let e=c.$implicit;d("nzLabel",e.name)("nzValue",e.id),r(),C(" ",e.name," ")}}function Cr(s,c){if(s&1&&(t(0,"div")(1,"nz-option",43),v(2,"i",44),o(3),i()()),s&2){let e=c.$implicit;r(),d("nzLabel",e.name)("nzValue",e.id),r(2),R(" ",e.name," $",e.price," ")}}function br(s,c){if(s&1&&(t(0,"div")(1,"nz-option",43),v(2,"i",44),o(3),i()()),s&2){let e=c.$implicit;r(),d("nzLabel",e.routeName)("nzValue",e.routeId),r(2),C(" ",e.routeName," ")}}function xr(s,c){if(s&1&&(t(0,"tr")(1,"td"),o(2),i(),t(3,"td"),o(4),i(),t(5,"td"),o(6),i(),t(7,"td"),o(8),i(),t(9,"td"),o(10),i(),t(11,"td"),o(12),i(),t(13,"td"),o(14),i(),t(15,"td"),o(16),i(),t(17,"td"),o(18),i(),t(19,"td"),o(20),i(),t(21,"td"),o(22),i()()),s&2){let e=c.$implicit,a=u();r(2),g(e.customerName),r(2),g(e.routeName),r(2),g(e.round),r(2),g(e.amountPayment),r(2),g(a.calculatePendingPayment(e)),r(2),g(a.formatPromiseDate(e.promiseDate)),r(2),g(a.calculateDaysDifference(e.promiseDate)),r(2),C(" ",e.name,""),r(2),g(a.formatMeteSacaCortesia(e)),r(2),g(a.formatValidTo(e.validFrom)),r(2),g(a.formatValidTo(e.validTo))}}function Sr(s,c){if(s&1&&(t(0,"tr")(1,"td"),o(2),i(),t(3,"td"),o(4),i(),t(5,"td"),o(6),i(),t(7,"td"),o(8),i(),t(9,"td"),o(10),i(),t(11,"td"),o(12),i(),t(13,"td"),o(14),i(),t(15,"td"),o(16),i(),t(17,"td"),o(18),i(),t(19,"td"),o(20),i(),t(21,"td"),o(22),i()()),s&2){let e=c.$implicit,a=u();r(2),g(e.customerName),r(2),g(e.routeName),r(2),g(e.round),r(2),g(e.amountPayment),r(2),g(a.calculatePendingPayment(e)),r(2),g(a.formatPromiseDate(e.promiseDate)),r(2),g(a.calculateDaysDifference(e.promiseDate)),r(2),C(" ",e.name,""),r(2),g(a.formatMeteSacaCortesia(e)),r(2),g(a.formatValidTo(e.validFrom)),r(2),g(a.formatValidTo(e.validTo))}}function yr(s,c){if(s&1){let e=x();t(0,"button",21),_("click",function(){p(e);let n=u();return h(n.handleOK())}),o(1,"Aceptar"),i()}}function Dr(s,c){if(s&1&&(t(0,"div")(1,"form",45)(2,"nz-form-item")(3,"nz-form-label",46),o(4,"Empresa:"),i(),t(5,"nz-form-control",46),o(6),i()(),t(7,"nz-form-item")(8,"nz-form-label",46),o(9,"Turno:"),i(),t(10,"nz-form-control",46),o(11),i()(),t(12,"nz-form-item")(13,"nz-form-label",46),o(14,"Operaci\xF3n:"),i(),t(15,"nz-form-control",46),o(16),i()(),t(17,"nz-form-item")(18,"nz-form-label",46),o(19,"Display:"),i(),t(20,"nz-form-control",46),o(21),i()(),t(22,"nz-form-item")(23,"nz-form-label",46),o(24,"Correo:"),i(),t(25,"nz-form-control",46),o(26),i()(),t(27,"nz-form-item")(28,"nz-form-label",46),o(29,"Nombre:"),i(),t(30,"nz-form-control",46),o(31),i()(),t(32,"nz-form-item")(33,"nz-form-label",46),o(34,"Apellidos:"),i(),t(35,"nz-form-control",46),o(36),i()(),t(37,"nz-form-item")(38,"nz-form-label",46),o(39,"Tel\xE9fono:"),i(),t(40,"nz-form-control",46),o(41),i()(),t(42,"nz-form-item")(43,"nz-form-label",46),o(44,"Identificaci\xF3n:"),i(),t(45,"nz-form-control",46),o(46),i()()()()),s&2){let e=u();r(),d("formGroup",e.signupForm),r(2),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(),g(e.signupForm.get("customerName").value),r(2),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(),g(e.signupForm.get("defaultRound").value),r(2),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(),g(e.signupForm.get("defaultRouteName").value),r(2),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(),g(e.signupForm.get("displayName").value),r(2),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(),g(e.signupForm.get("email").value),r(2),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(),g(e.signupForm.get("firstName").value),r(2),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(),g(e.signupForm.get("lastName").value),r(2),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(),g(e.signupForm.get("phone").value),r(2),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(),g(e.signupForm.get("studentId").value)}}function Er(s,c){if(s&1&&(t(0,"div")(1,"form",45)(2,"nz-form-item")(3,"nz-form-label",46),o(4,"Empresa:"),i(),t(5,"nz-form-control",46),o(6),i()(),t(7,"nz-form-item")(8,"nz-form-label",46),o(9,"Turno:"),i(),t(10,"nz-form-control",46),o(11),i()(),t(12,"nz-form-item")(13,"nz-form-label",46),o(14,"Operaci\xF3n:"),i(),t(15,"nz-form-control",46),o(16),i()(),t(17,"nz-form-item")(18,"nz-form-label",46),o(19,"Display:"),i(),t(20,"nz-form-control",46),o(21),i()(),t(22,"nz-form-item")(23,"nz-form-label",46),o(24,"Correo:"),i(),t(25,"nz-form-control",46),o(26),i()(),t(27,"nz-form-item")(28,"nz-form-label",46),o(29,"Nombre:"),i(),t(30,"nz-form-control",46),o(31),i()(),t(32,"nz-form-item")(33,"nz-form-label",46),o(34,"Apellidos:"),i(),t(35,"nz-form-control",46),o(36),i()(),t(37,"nz-form-item")(38,"nz-form-label",46),o(39,"Tel\xE9fono:"),i(),t(40,"nz-form-control",46),o(41),i()(),t(42,"nz-form-item")(43,"nz-form-label",46),o(44,"Identificaci\xF3n:"),i(),t(45,"nz-form-control",46),o(46),i()()()()),s&2){let e=u();r(),d("formGroup",e.signupFormCV),r(2),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(),g(e.signupFormCV.get("customerName").value),r(2),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(),g(e.signupFormCV.get("defaultRound").value),r(2),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(),g(e.signupFormCV.get("defaultRouteName").value),r(2),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(),g(e.signupFormCV.get("displayName").value),r(2),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(),g(e.signupFormCV.get("email").value),r(2),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(),g(e.signupFormCV.get("firstName").value),r(2),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(),g(e.signupFormCV.get("lastName").value),r(2),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(),g(e.signupFormCV.get("phone").value),r(2),d("nzSm",6)("nzXs",24),r(2),d("nzSm",14)("nzXs",24),r(),g(e.signupFormCV.get("studentId").value)}}function Vr(s,c){if(s&1){let e=x();t(0,"button",21),_("click",function(){p(e);let n=u();return h(n.handleOK())}),o(1,"Aceptar"),i()}}var Oo=(()=>{class s{constructor(e,a,n){this.fb=e,this.msg=a,this.afs=n,this.authService=F(_e),this.usersService=F(He),this.usersServices=F(Ge),this.routesService=F(Ze),this.productsService=F(lt),this.accountsService=F(Je),this.stopSubscription$=new te,this.sumOfField=0,this.rowData=[],this.rowDataPay=[],this.rowDataPayTurn=[],this.rowDataPayCV=[],this.rowDataPayCVByR=[],this.TotalUsers=0,this.TotalMPP=0,this.TotalMPByRoute=0,this.usersList=[],this.usersListA=[],this.usersListCV=[],this.routesList=[],this.products=[],this.amountCV=0,this.priceCV=0,this.accountId$=new te,this.productsListV=[],this.shift=[],this.isModalVisible=!1,this.isModalVisibleCV=!1,this.customersList=[],this.checkOptionsOne=[],this.infoSegment=[],this.userCustomerId="",this.validateForm=this.fb.group({id:[null],customerId:[null]}),this.validateFormO=this.fb.group({id:[null],customerId:[null]}),this.validateFormPase=this.fb.group({id:[null],customerId:[null]}),this.validateFormTurn=this.fb.group({id:[null],turno:[""],customerId:[null]}),this.validateFormAnticipos=this.fb.group({id:[null],turno:[""],customerId:[null]}),this.validateFormCV=this.fb.group({id:[null],customerId:[null]}),this.validateFormCVByRoute=this.fb.group({id:[null],routeId:[""],customerId:[null]}),this.signupForm=this.fb.group({id:[],customerName:[""],defaultRound:[""],defaultRouteName:[""],displayName:[""],email:[""],firstName:[""],lastName:[""],phone:[""],studentId:[""]}),this.signupFormCV=this.fb.group({id:[],customerName:[""],defaultRound:[""],defaultRouteName:[""],displayName:[""],email:[""],firstName:[""],lastName:[""],phone:[""],studentId:[""]}),this.shift=[{id:"D\xEDa",name:"D\xEDa"},{id:"Tarde",name:"Tarde"},{id:"Noche",name:"Noche"}],this.validateForm.get("id")?.valueChanges.subscribe(l=>{}),this.authService.user.subscribe(l=>{l&&(this.user=l,this.userCustomerId=this.user.customerId,this.accountsService.getSegmentLevel(this.user.idSegment).pipe(V(m=>{if(m&&m.payload){let f=m.payload.id,b=m.payload.data?m.payload.data():{};return U({id:f},b)}else return console.warn("Unexpected payload structure:",m),{}})).subscribe(m=>{this.infoSegment=m,this.getCustomersList()}))})}getCustomersList(){this.infoSegment.nivelNum!==void 0&&this.infoSegment.nivelNum==1?this.afs.collection("customers").doc(this.userCustomerId).snapshotChanges().pipe(N(this.stopSubscription$),V(a=>{let n=a.payload.id,l=a.payload.data();return U({id:n},l)}),K(a=>(this.customersList=[a],this.checkOptionsOne=[{value:a.id,label:a.name}],a))).subscribe():this.afs.collection("customers",a=>a.orderBy("name")).snapshotChanges().pipe(N(this.stopSubscription$),V(a=>a.map(n=>{let l=n.payload.doc.id,m=n.payload.doc.data();return U({id:l},m)})),K(a=>(this.customersList=a,this.checkOptionsOne=a.map(n=>({value:n.id,label:n.name})),a))).subscribe()}ngOnInit(){}onFirstDataRendered(e){setTimeout(function(){},0)}ngOnDestroy(){this.stopSubscription$&&(this.stopSubscription$.next(void 0),this.stopSubscription$.complete()),this.productsSubscription&&this.productsSubscription.unsubscribe(),this.accountsSubscription&&this.accountsSubscription.unsubscribe()}getSubscriptionsByRoute(e,a){this.usersService.getBoardingPassesByRoutebyCustomerId(e,a).pipe(N(this.stopSubscription$)).subscribe(n=>{this.rowData=n})}getSubscriptionsByTurn(e,a){this.usersService.getBoardingPassesByTurn(e,a).pipe(N(this.stopSubscription$)).subscribe(n=>{this.rowDataPayTurn=n,this.TotalUsers=this.sumAllPasses(this.rowDataPayTurn)})}sumAllPasses(e){let a=0;return e.forEach(n=>{if(n&&Array.isArray(n.passes)){let l=n.passes.length;a+=n.passes.length}}),a}sumAllCV(e){let a=0;return e.forEach(n=>{n&&Array.isArray(n.passes)&&n.passes.forEach(l=>{this.amountCV=l.amountPayment,this.priceCV=l.amount;let m=this.priceCV-this.amountCV;a+=m})}),a}sumAllCVByR(e){let a=0;return e.forEach(n=>{n&&Array.isArray(n.passes)&&n.passes.forEach(l=>{this.amountCV=l.amountPayment,this.priceCV=l.amount;let m=this.priceCV-this.amountCV;a+=m})}),a}getSubscriptions(e){this.usersService.getBoardingPassesByProduct(e).pipe(N(this.stopSubscription$)).subscribe(a=>{this.rowDataPay=a})}getSubscriptionsPase(e){this.usersService.getBoardingPassesByProduct(e).pipe(N(this.stopSubscription$)).subscribe(a=>{this.createNestedTableData(a)})}getSubscriptionsAnticipos(e){this.usersService.getBoardingPassesByAnticipos(e).pipe(N(this.stopSubscription$)).subscribe(a=>{this.createNestedTableDataA(a)})}getSubscriptionsCV(e){this.usersService.getBoardingPassesByCV(e).pipe(N(this.stopSubscription$)).subscribe(a=>{this.rowDataPayCV=a,this.TotalMPP=this.sumAllCV(this.rowDataPayCV),this.createNestedTableDataCV(a)})}getSubscriptionsCVByRoute(e){this.usersService.getBoardingPassBySingleRoute(e,this.routeIdSelected).pipe(N(this.stopSubscription$)).subscribe(a=>{this.rowDataPayCVByR=a,this.TotalMPByRoute=this.sumAllCVByR(this.rowDataPayCVByR),this.createNestedTableDataCVByRoute(a)})}createNestedTableDataA(e){this.usersListA=[];for(let a=0;a<e.length;++a){e[a].key=a,e[a].expand=!1,e[a].routeName=e[a].passes[0].routeName;for(let n=0;n<e[a].passes.length;++n)e[a].passes[n].key=a,e[a].passes[n].customerName=e[a].customerName,this.usersListA.push(e[a].passes[n])}}createNestedTableDataCV(e){this.usersListCV=[];for(let a=0;a<e.length;++a){e[a].key=a,e[a].expand=!1,e[a].routeName=e[a].passes[0].routeName;for(let n=0;n<e[a].passes.length;++n)e[a].passes[n].key=a,e[a].passes[n].customerName=e[a].customerName,this.usersListCV.push(e[a].passes[n])}}createNestedTableDataCVByRoute(e){this.usersListCVByR=[];for(let a=0;a<e.length;++a){e[a].key=a,e[a].expand=!1,e[a].routeName=e[a].passes[0].routeName;for(let n=0;n<e[a].passes.length;++n)e[a].passes[n].key=a,e[a].passes[n].customerName=e[a].customerName,this.usersListCVByR.push(e[a].passes[n])}if(this.usersListCVByR.length>0){this.usersListCVByRDetalle=[];for(let a of this.usersListCVByR)this.usersService.getUserInfo(a.uid).subscribe(n=>{let l={displayName:n.payload.data().displayName,studentId:n.payload.data().studentId,phone:n.payload.data().phone,email:n.payload.data().email,amountPayment:a.amountPayment,amount:a.amount,promiseDate:a.promiseDate};this.usersListCVByRDetalle.some(f=>f.studentId===n.payload.data().studentId)||this.usersListCVByRDetalle.push(l)})}}createNestedTableData(e){this.routesList=[],this.usersList=[];for(let a=0;a<e.length;++a){e[a].key=a,e[a].expand=!1,e[a].routeName=e[a].passes[0].routeName;for(let n=0;n<e[a].passes.length;++n)e[a].passes[n].key=a,e[a].passes[n].customerName=e[a].customerName,this.usersList.push(e[a].passes[n])}this.routesList=e}onProductSelect(e){}onProductSelectByRoute(e){this.routeIdSelected="",this.routes=[],this.routeSubscription=this.usersService.getBoardingPassRoute(e).pipe(N(this.stopSubscription$)).subscribe(a=>{this.routes=a})}onRouteSelectByRoute(e){this.routeIdSelected=e}submitFormO(){let e=this.validateFormO.controls.customerId.value;this.user.vendorId!=null&&this.getSubscriptionsByRoute(this.user.vendorId,e)}submitForm(){if(this.validateForm.valid){this.rowDataPay=[];let e=this.validateForm.controls.id.value;this.getSubscriptions(e)}else this.sendMessage("error","Forma invalida")}submitFormTurn(){this.rowDataPayTurn=[],this.TotalUsers=0;let e=this.validateFormTurn.controls.id.value,a=this.validateFormTurn.controls.turno.value;this.getSubscriptionsByTurn(e,a)}submitFormPase(){this.rowDataPay=[];let e=this.validateFormPase.controls.id.value;this.getSubscriptionsPase(e)}submitFormAnticipos(){this.usersListA=[];let e=this.validateFormAnticipos.controls.id.value;this.getSubscriptionsAnticipos(e)}submitFormCV(){this.usersListCV=[];let e=this.validateFormCV.controls.id.value;this.TotalMPP=0,this.getSubscriptionsCV(e)}submitFormCVByRoute(){let e=this.validateFormCVByRoute.controls.id.value;this.TotalMPByRoute=0,this.getSubscriptionsCVByRoute(e),this.usersListCVByRDetalle=[],this.FusersListCVByRDetalle=[]}onRowClicked(e){this.accountsSubscription=this.usersService.getUserInfo(e.data.uid).subscribe(a=>{this.signupForm.reset(),this.signupForm.controls.customerName.setValue(a.payload.data().customerName),this.signupForm.controls.defaultRound.setValue(a.payload.data().defaultRound),this.signupForm.controls.defaultRouteName.setValue(a.payload.data().defaultRouteName),this.signupForm.controls.displayName.setValue(a.payload.data().displayName),this.signupForm.controls.email.setValue(a.payload.data().email),this.signupForm.controls.firstName.setValue(a.payload.data().firstName),this.signupForm.controls.lastName.setValue(a.payload.data().lastName),this.signupForm.controls.phone.setValue(a.payload.data().phone),this.signupForm.controls.studentId.setValue(a.payload.data().studentId),this.isModalVisible=!0})}onRowClickedCV(e){this.accountsSubscription=this.usersService.getUserInfo(e.data.uid).subscribe(a=>{this.signupFormCV.reset(),this.signupFormCV.controls.customerName.setValue(a.payload.data().customerName),this.signupFormCV.controls.defaultRound.setValue(a.payload.data().defaultRound),this.signupFormCV.controls.defaultRouteName.setValue(a.payload.data().defaultRouteName),this.signupFormCV.controls.displayName.setValue(a.payload.data().displayName),this.signupFormCV.controls.email.setValue(a.payload.data().email),this.signupFormCV.controls.firstName.setValue(a.payload.data().firstName),this.signupFormCV.controls.lastName.setValue(a.payload.data().lastName),this.signupFormCV.controls.phone.setValue(a.payload.data().phone),this.signupFormCV.controls.studentId.setValue(a.payload.data().studentId),this.isModalVisibleCV=!0})}detalleCVbyR(){this.TotalMPByRoute==0?this.sendMessage("error","Se requiere seleccionar un producto y operaci\xF3n para detallar."):this.FusersListCVByRDetalle=this.usersListCVByRDetalle}sendMessage(e,a){this.msg.create(e,a)}handleOK(){this.isModalVisible=!1,this.isModalVisibleCV=!1}handleCancel(){this.isModalVisible=!1,this.isModalVisibleCV=!1}customCellRenderer(e){return e.data.passes.reduce(l=>l+1,0).toString()}customCellRendererMonto(e){return e.data.passes.reduce((m,f)=>m+f.amount,0).toLocaleString("en-US",{style:"currency",currency:"USD"})}formatPermission(e){return e?"Si":"No"}formatValidTo(e){if(!e)return"";let a=new Date(e.seconds*1e3);return Ct(a,"MMMM dd yyyy",{locale:dt})}formatMeteSacaCortesia(e){let a=e.isTaskIn?"Si":"No",n=e.isTaskOut?"Si":"No",l=e.is_courtesy?"Si":"No";return`${a} / ${n} / ${l}`}calculateDaysDifference(e){if(!e)return"";let n=e.toDate(),l=new Date,m=n.getTime()-l.getTime();return Math.floor(m/(1e3*60*60*24))+" d\xEDas"}formatPromiseDate(e){if(!e)return"";let a=new Date(e);return Ct(a,"MMMM dd yyyy",{locale:dt})}calculatePendingPayment(e){return(e.amount-e.amountPayment).toLocaleString("en-US",{style:"currency",currency:"USD"})}log(e){this.sub=this.usersServices.getAccountProducts(e).pipe(V(a=>a.map(n=>{let l=n.payload.doc.id,m=n.payload.doc.data();return Oe(U({},m),{id:l})}))).subscribe(a=>{this.products=a,this.products.length===0&&this.sendMessage("error","No hay productos relacionados a este cliente.")})}static{this.\u0275fac=function(a){return new(a||s)(O(pe),O(Z),O(he))}}static{this.\u0275cmp=Y({type:s,selectors:[["ng-component"]],decls:291,vars:54,consts:[["basicTable",""],["basicTable1",""],["basicTable2",""],["basicTable3",""],["basicTable4",""],["basicTable5",""],["basicTable6",""],["modalFooter",""],["modalcontent",""],["modalcontentCV",""],[2,"margin","buttom 15px","margin-right","15px","margin-left","15px"],[1,"site-page-header-ghost-wrapper"],[2,"background-color","#f9fbfd",3,"nzGhost"],[2,"margin-left","350px"],[1,"body"],["nzTitle","Pagos Por Producto / Servicio"],[2,"margin-bottom","10px"],["nz-form","","nzLayout","horizontal",3,"ngSubmit","formGroup"],["formControlName","customerId","nzPlaceHolder","Selecciona un cliente",2,"width","650px",3,"ngModelChange"],["nzCustomContent","",3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["formControlName","id","nzAllowClear","","nzPlaceHolder","Seleccionar producto / servicio",2,"width","650px",3,"ngModelChange"],["nz-button","",2,"background-color","#4F6F57","color","#f6f3ea",3,"click"],["ngSkipHydration","",3,"nzData"],[4,"ngFor","ngForOf"],["nzTitle","Pagos por Operaci\xF3n"],["formControlName","customerId","nzPlaceHolder","Selecciona un cliente",2,"width","650px"],["nzTitle","Pagos por turno"],["id","turn"],["nz-form","","nzLayout","horizontal",1,"horizontal-form",3,"ngSubmit","formGroup"],[1,"form-container"],[1,"form-row"],[1,"form-item"],["formControlName","turno","nzAllowClear","","nzPlaceHolder","Turno",2,"width","100px"],["nzTitle","Pases"],["nzTitle","Anticipos"],["nzTitle","Cartera Vencida"],["nzTitle","Cartera General"],["nzTitle","Cartera Vencida por Operaci\xF3n"],["formControlName","routeId","nzAllowClear","","nzPlaceHolder","Seleccionar la Operaci\xF3n ",2,"width","450px",3,"ngModelChange"],[2,"margin-top","10px","margin-bottom","10 px"],[2,"margin-top","10px"],["nzTitle","Datos Pase - Anticipo","nzWidth","500px",3,"nzVisibleChange","nzOnCancel","nzVisible","nzContent","nzFooter"],["nzTitle","Datos Pase  - Cartera Vencida","nzWidth","500px",3,"nzVisibleChange","nzOnCancel","nzVisible","nzContent","nzFooter"],["nzCustomContent","",3,"nzLabel","nzValue"],["nz-icon",""],["nz-form","",3,"formGroup"],[3,"nzSm","nzXs"]],template:function(a,n){if(a&1){let l=x();t(0,"div",10)(1,"div",11)(2,"nz-page-header",12)(3,"nz-page-header-title",13),o(4,"Reportes"),i(),t(5,"nz-page-header-subtitle"),o(6,"Reportes General "),i()()(),t(7,"div",14)(8,"nz-tabset")(9,"nz-tab",15)(10,"div",16)(11,"form",17),_("ngSubmit",function(){return p(l),h(n.submitForm())}),t(12,"nz-select",18),_("ngModelChange",function(f){return p(l),h(n.log(f))}),z(13,tr,2,3,"nz-option",19),i(),t(14,"nz-select",20),_("ngModelChange",function(f){return p(l),h(n.onProductSelect(f))}),z(15,ir,3,4,"nz-option",19),i(),t(16,"button",21),_("click",function(){return p(l),h(n.submitForm())}),o(17,"Aceptar"),i()()(),t(18,"div")(19,"nz-table",22,0)(21,"thead")(22,"tr")(23,"th"),o(24,"Empresa"),i(),t(25,"th"),o(26,"Operaci\xF3n"),i(),t(27,"th"),o(28,"Usuarios"),i(),t(29,"th"),o(30,"Monto"),i(),t(31,"th"),o(32,"Activa"),i()()(),t(33,"tbody"),z(34,nr,11,13,"tr",23),i()()()(),t(35,"nz-tab",24)(36,"div",16)(37,"form",17),_("ngSubmit",function(){return p(l),h(n.submitFormO())}),t(38,"nz-select",25),z(39,ar,2,3,"nz-option",19),i(),t(40,"button",21),_("click",function(){return p(l),h(n.submitFormO())}),o(41,"Aceptar"),i()()(),t(42,"div")(43,"nz-table",22,1)(45,"thead")(46,"tr")(47,"th"),o(48,"Empresa"),i(),t(49,"th"),o(50,"Operaci\xF3n"),i(),t(51,"th"),o(52,"Usuarios"),i(),t(53,"th"),o(54,"Monto"),i(),t(55,"th"),o(56,"Activa"),i()()(),t(57,"tbody"),z(58,rr,11,13,"tr",23),i()()()(),t(59,"nz-tab",26)(60,"div",27)(61,"div",16)(62,"form",28),_("ngSubmit",function(){return p(l),h(n.submitFormTurn())}),t(63,"div",29)(64,"div",30)(65,"div",31)(66,"nz-select",18),_("ngModelChange",function(f){return p(l),h(n.log(f))}),z(67,or,2,3,"nz-option",19),i()()(),t(68,"div",30)(69,"div",31)(70,"nz-select",20),_("ngModelChange",function(f){return p(l),h(n.onProductSelect(f))}),z(71,sr,4,4,"div",23),i()(),t(72,"div",31)(73,"nz-select",32),z(74,lr,4,3,"div",23),i()(),t(75,"div",31)(76,"button",21),_("click",function(){return p(l),h(n.submitFormTurn())}),o(77,"Aceptar"),i()()()()(),t(78,"div",30),o(79),i()(),t(80,"div")(81,"nz-table",22,2)(83,"thead")(84,"tr")(85,"th"),o(86,"Empresa"),i(),t(87,"th"),o(88,"Operaci\xF3n"),i(),t(89,"th"),o(90,"Usuarios"),i(),t(91,"th"),o(92,"Monto"),i(),t(93,"th"),o(94,"Activa"),i()()(),t(95,"tbody"),z(96,dr,11,13,"tr",23),i()()()()(),t(97,"nz-tab",33)(98,"div",16)(99,"form",17),_("ngSubmit",function(){return p(l),h(n.submitFormPase())}),t(100,"nz-select",18),_("ngModelChange",function(f){return p(l),h(n.log(f))}),z(101,cr,2,3,"nz-option",19),i(),t(102,"nz-select",20),_("ngModelChange",function(f){return p(l),h(n.onProductSelect(f))}),z(103,mr,4,4,"div",23),i(),t(104,"button",21),_("click",function(){return p(l),h(n.submitForm())}),o(105,"Aceptar"),i()()(),t(106,"div")(107,"nz-table",22,3)(109,"thead")(110,"tr")(111,"th"),o(112,"Empresa"),i(),t(113,"th"),o(114,"Operaci\xF3n"),i(),t(115,"th"),o(116,"Turno"),i(),t(117,"th"),o(118,"Estaci\xF3n"),i(),t(119,"th"),o(120,"Pase"),i(),t(121,"th"),o(122,"Mete"),i(),t(123,"th"),o(124,"Saca"),i(),t(125,"th"),o(126,"Pase Cortes\xEDa"),i(),t(127,"th"),o(128,"V\xE1lido desde"),i(),t(129,"th"),o(130,"V\xE1lido hasta"),i()()(),t(131,"tbody"),z(132,ur,21,10,"tr",23),i()()()(),t(133,"nz-tab",34)(134,"div",16)(135,"form",17),_("ngSubmit",function(){return p(l),h(n.submitFormAnticipos())}),t(136,"nz-select",18),_("ngModelChange",function(f){return p(l),h(n.log(f))}),z(137,pr,2,3,"nz-option",19),i(),t(138,"nz-select",20),_("ngModelChange",function(f){return p(l),h(n.onProductSelect(f))}),z(139,hr,4,4,"div",23),i(),t(140,"button",21),_("click",function(){return p(l),h(n.submitFormAnticipos())}),o(141,"Aceptar"),i()()(),t(142,"div")(143,"nz-table",22,3)(145,"thead")(146,"tr")(147,"th"),o(148,"Empresa"),i(),t(149,"th"),o(150,"Operaci\xF3n"),i(),t(151,"th"),o(152,"Turno"),i(),t(153,"th"),o(154,"Monto Anticipo"),i(),t(155,"th"),o(156,"Promesa de Pago"),i(),t(157,"th"),o(158,"D\xEDas vencidos"),i(),t(159,"th"),o(160,"Pase"),i(),t(161,"th"),o(162,"Mete / Saca / Cortes\xEDa"),i(),t(163,"th"),o(164,"V\xE1lido desde"),i(),t(165,"th"),o(166,"V\xE1lido hasta"),i()()(),t(167,"tbody"),z(168,fr,21,10,"tr",23),i()()()(),t(169,"nz-tab",35)(170,"nz-tabset")(171,"nz-tab",36)(172,"div",16)(173,"form",17),_("ngSubmit",function(){return p(l),h(n.submitFormCV())}),t(174,"nz-select",18),_("ngModelChange",function(f){return p(l),h(n.log(f))}),z(175,_r,2,3,"nz-option",19),i(),t(176,"nz-select",20),_("ngModelChange",function(f){return p(l),h(n.onProductSelect(f))}),z(177,gr,4,4,"div",23),i(),t(178,"button",21),_("click",function(){return p(l),h(n.submitFormCV())}),o(179,"Aceptar"),i()(),t(180,"div",30),o(181),k(182,"currency"),i()(),t(183,"div")(184,"nz-table",22,4)(186,"thead")(187,"tr")(188,"th"),o(189,"Empresa"),i(),t(190,"th"),o(191,"Operaci\xF3n"),i(),t(192,"th"),o(193,"Turno"),i(),t(194,"th"),o(195,"Monto Anticipo"),i(),t(196,"th"),o(197,"Pendiente de Pago"),i(),t(198,"th"),o(199,"Promesa de Pago"),i(),t(200,"th"),o(201,"D\xEDas vencidos"),i(),t(202,"th"),o(203,"Pase"),i(),t(204,"th"),o(205,"Mete / Saca / Cortes\xEDa"),i(),t(206,"th"),o(207,"V\xE1lido desde"),i(),t(208,"th"),o(209,"V\xE1lido hasta"),i()()(),t(210,"tbody"),z(211,zr,23,11,"tr",23),i()()()(),t(212,"nz-tab",37)(213,"div",16)(214,"form",17),_("ngSubmit",function(){return p(l),h(n.submitFormCVByRoute())}),t(215,"nz-select",18),_("ngModelChange",function(f){return p(l),h(n.log(f))}),z(216,vr,2,3,"nz-option",19),i(),t(217,"nz-select",20),_("ngModelChange",function(f){return p(l),h(n.onProductSelectByRoute(f))}),z(218,Cr,4,4,"div",23),i(),t(219,"nz-select",38),_("ngModelChange",function(f){return p(l),h(n.onRouteSelectByRoute(f))}),z(220,br,4,3,"div",23),i(),t(221,"button",21),_("click",function(){return p(l),h(n.submitFormCVByRoute())}),o(222,"Aceptar"),i()(),t(223,"div",30),o(224),k(225,"currency"),i()(),t(226,"div")(227,"nz-table",22,5)(229,"thead")(230,"tr")(231,"th"),o(232,"Empresa"),i(),t(233,"th"),o(234,"Operaci\xF3n"),i(),t(235,"th"),o(236,"Turno"),i(),t(237,"th"),o(238,"Monto Anticipo"),i(),t(239,"th"),o(240,"Pendiente de Pago"),i(),t(241,"th"),o(242,"Promesa de Pago"),i(),t(243,"th"),o(244,"D\xEDas vencidos"),i(),t(245,"th"),o(246,"Pase"),i(),t(247,"th"),o(248,"Mete / Saca / Cortes\xEDa"),i(),t(249,"th"),o(250,"V\xE1lido desde"),i(),t(251,"th"),o(252,"V\xE1lido hasta"),i()()(),t(253,"tbody"),z(254,xr,23,11,"tr",23),i()()(),t(255,"div",39)(256,"button",21),_("click",function(){return p(l),h(n.detalleCVbyR())}),o(257,"Mostrar Detalle"),i()(),t(258,"div",40)(259,"nz-table",22,6)(261,"thead")(262,"tr")(263,"th"),o(264,"Nombre"),i(),t(265,"th"),o(266,"Identificaci\xF3n"),i(),t(267,"th"),o(268,"Telefono"),i(),t(269,"th"),o(270,"Correo"),i(),t(271,"th"),o(272,"Monto Anticipo"),i(),t(273,"th"),o(274,"Pendiente de Pago"),i(),t(275,"th"),o(276,"Promesa de Pago"),i(),t(277,"th"),o(278,"D\xEDas vencidos"),i()()(),t(279,"tbody"),z(280,Sr,23,11,"tr",23),i()()()()()()()()(),t(281,"nz-modal",41),w("nzVisibleChange",function(f){return p(l),T(n.isModalVisible,f)||(n.isModalVisible=f),h(f)}),_("nzOnCancel",function(){return p(l),h(n.handleCancel())}),z(282,yr,2,0,"ng-template",null,7,E),i(),z(284,Dr,47,46,"ng-template",null,8,E),t(286,"nz-modal",42),w("nzVisibleChange",function(f){return p(l),T(n.isModalVisibleCV,f)||(n.isModalVisibleCV=f),h(f)}),_("nzOnCancel",function(){return p(l),h(n.handleCancel())}),z(287,Er,47,46,"ng-template",null,9,E)(289,Vr,2,0,"ng-template",null,7,E),i()}if(a&2){let l=S(20),m=S(44),f=S(82),b=S(108),D=S(185),I=S(228),M=S(260),L=S(283),W=S(285),$=S(288);r(2),d("nzGhost",!1),r(9),d("formGroup",n.validateForm),r(2),d("ngForOf",n.customersList),r(2),d("ngForOf",n.products),r(4),d("nzData",n.rowDataPay),r(15),d("ngForOf",l.data),r(3),d("formGroup",n.validateFormO),r(2),d("ngForOf",n.customersList),r(4),d("nzData",n.rowData),r(15),d("ngForOf",m.data),r(4),d("formGroup",n.validateFormTurn),r(5),d("ngForOf",n.customersList),r(4),d("ngForOf",n.products),r(3),d("ngForOf",n.shift),r(5),C(" Usuarios totales: ",n.TotalUsers," "),r(2),d("nzData",n.rowDataPayTurn),r(15),d("ngForOf",f.data),r(3),d("formGroup",n.validateFormPase),r(2),d("ngForOf",n.customersList),r(2),d("ngForOf",n.products),r(4),d("nzData",n.usersList),r(25),d("ngForOf",b.data),r(3),d("formGroup",n.validateFormAnticipos),r(2),d("ngForOf",n.customersList),r(2),d("ngForOf",n.products),r(4),d("nzData",n.usersList),r(25),d("ngForOf",b.data),r(5),d("formGroup",n.validateFormCV),r(2),d("ngForOf",n.customersList),r(2),d("ngForOf",n.products),r(4),C(" Total monto pendiente pago: ",B(182,48,n.TotalMPP,"USD")," "),r(3),d("nzData",n.usersListCV),r(27),d("ngForOf",D.data),r(3),d("formGroup",n.validateFormCVByRoute),r(2),d("ngForOf",n.customersList),r(2),d("ngForOf",n.products),r(2),d("ngForOf",n.routes),r(4),C(" Total monto pendiente pago: ",B(225,51,n.TotalMPByRoute,"USD")," "),r(3),d("nzData",n.usersListCVByR),r(27),d("ngForOf",I.data),r(5),d("nzData",n.FusersListCVByRDetalle),r(21),d("ngForOf",M.data),r(),P("nzVisible",n.isModalVisible),d("nzContent",W)("nzFooter",L),r(5),P("nzVisible",n.isModalVisibleCV),d("nzContent",$)("nzFooter",L)}},dependencies:[se,fe,ze,ge,Ce,ve,be,Xe,nt,et,tt,rt,it,at,De,ye,xe,Se,Pe,Ee,Ve,Te,we,ce,le,de,me,ue,Ye,Ke,qe],styles:[".footer[_ngcontent-%COMP%]{height:100%!important;position:absolute;padding:0 25px;display:flex;justify-content:space-between}.body[_ngcontent-%COMP%]{overflow-y:auto;padding:15px 25px;position:relative;width:100%}.horizontal-form[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.form-row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.form-item[_ngcontent-%COMP%]{margin-right:10px}"]})}}return s})();var qo=(()=>{class s{static{this.\u0275fac=function(a){return new(a||s)}}static{this.\u0275cmp=Y({type:s,selectors:[["ng-component"]],decls:0,vars:0,template:function(a,n){},encapsulation:2})}}return s})();export{uo as a,xo as b,Oo as c,qo as d};
