import{H as Jt,M as Kt,O as te}from"./chunk-WHAZTWJR.js";import{$ as lt,Ab as O,Cf as ne,Da as ct,Ea as c,Ef as ie,Fa as S,Ga as l,Ha as $,Hd as Yt,Ia as L,Ib as F,Id as R,Jd as Ct,La as St,M as V,Ma as Et,Mb as it,Nb as j,O as I,Ob as X,Pa as h,Q as Ot,Qd as xt,Ra as B,Rc as qt,Rd as yt,Sa as H,Sb as It,Sc as Ut,Ta as W,Tc as ft,Ua as f,V as at,Va as g,Vc as Lt,Wa as C,Xa as Mt,Y as K,Ya as jt,Z as v,Za as Gt,_ as A,_a as P,_b as ut,a as vt,b as k,bb as U,bc as ht,c as G,cc as ot,db as s,dd as Zt,eb as Ft,ed as Qt,fa as tt,fb as bt,ga as b,gd as gt,ge as Tt,ha as N,ia as et,jc as Vt,kc as At,l as M,la as Rt,lb as dt,lc as Bt,m as Y,ma as wt,mb as mt,mc as Ht,nb as _t,nc as Wt,ob as z,pb as q,pd as Pt,ra as nt,rb as Z,s as J,sa as p,ta as w,td as Xt,ud as zt,w as $t,wa as pt,yb as Q,zb as Nt,zf as ee}from"./chunk-WHASPTUY.js";import{b as D}from"./chunk-TNV42MFJ.js";import{a as st,c as Dt}from"./chunk-SIAVTO45.js";var _e=e=>({$implicit:e});function ue(e,r){if(e&1&&C(0,"span",4),e&2){let t=s(3);l("nzType",t.icon)}}function he(e,r){if(e&1&&(Mt(0),q(1),jt()),e&2){let t=r.$implicit,n=s(4);p(),Z(" ",t(n.nzPercent)," ")}}function fe(e,r){if(e&1&&c(0,he,2,1,"ng-container",5),e&2){let t=s(3);l("nzStringTemplateOutlet",t.formatter)("nzStringTemplateOutletContext",O(2,_e,t.nzPercent))}}function ge(e,r){if(e&1&&(f(0,"span",3),c(1,ue,1,1,"span",4)(2,fe,1,4),g()),e&2){let t=s(2);p(),h(1,(t.status==="exception"||t.status==="success")&&!t.nzFormat?1:2)}}function ze(e,r){if(e&1&&c(0,ge,3,1,"span",3),e&2){let t=s();h(0,t.nzShowInfo?0:-1)}}function Ce(e,r){if(e&1&&C(0,"div",7),e&2){let t=r.$implicit;l("ngStyle",t)}}function xe(e,r){}function ye(e,r){if(e&1&&(f(0,"div",6),H(1,Ce,1,1,"div",7,B),c(3,xe,0,0,"ng-template",8),g()),e&2){let t=s(2),n=z(1);p(),W(t.steps),p(2),l("ngTemplateOutlet",n)}}function Te(e,r){if(e&1&&C(0,"div",13),e&2){let t=s(3);$("width",t.nzSuccessPercent,"%")("border-radius",t.nzStrokeLinecap==="round"?"100px":"0")("height",t.strokeWidth,"px")}}function ve(e,r){}function we(e,r){if(e&1&&(f(0,"div",9)(1,"div",10),C(2,"div",11),c(3,Te,1,6,"div",12),g()(),c(4,ve,0,0,"ng-template",8)),e&2){let t=s(2),n=z(1);p(2),$("width",t.nzPercent,"%")("border-radius",t.nzStrokeLinecap==="round"?"100px":"0")("background",t.isGradient?null:t.nzStrokeColor)("background-image",t.isGradient?t.lineGradient:null)("height",t.strokeWidth,"px"),p(),h(3,t.nzSuccessPercent||t.nzSuccessPercent===0?3:-1),p(),l("ngTemplateOutlet",n)}}function Se(e,r){if(e&1&&(f(0,"div"),c(1,ye,4,1,"div",6)(2,we,5,12),g()),e&2){let t=s();p(),h(1,t.isSteps?1:2)}}function Fe(e,r){if(e&1&&(et(),C(0,"stop")),e&2){let t=r.$implicit;S("offset",t.offset)("stop-color",t.color)}}function be(e,r){if(e&1&&(et(),f(0,"defs")(1,"linearGradient",17),H(2,Fe,1,2,":svg:stop",null,B),g()()),e&2){let t=s(2);p(),l("id","gradient-"+t.gradientId),p(),W(t.circleGradient)}}function Ne(e,r){if(e&1&&(et(),C(0,"path",16)),e&2){let t=r.$implicit,n=s(2);l("ngStyle",t.strokePathStyle),S("d",n.pathString)("stroke-linecap",n.nzStrokeLinecap)("stroke",t.stroke)("stroke-width",n.nzPercent?n.strokeWidth:0)}}function Ie(e,r){}function Ue(e,r){if(e&1&&(f(0,"div",10),et(),f(1,"svg",14),c(2,be,4,1,":svg:defs"),C(3,"path",15),H(4,Ne,1,5,":svg:path",16,B),g(),c(6,Ie,0,0,"ng-template",8),g()),e&2){let t=s(),n=z(1);$("width",t.nzWidth,"px")("height",t.nzWidth,"px")("font-size",t.nzWidth*.15+6,"px"),L("ant-progress-circle-gradient",t.isGradient),p(2),h(2,t.isGradient?2:-1),p(),l("ngStyle",t.trailPathStyle),S("stroke-width",t.strokeWidth)("d",t.pathString),p(),W(t.progressCirclePath),p(2),l("ngTemplateOutlet",n)}}function Le(e){return+e.replace("%","")}var re=e=>{let r=[];return Object.keys(e).forEach(t=>{let n=e[t],i=Le(t);isNaN(i)||r.push({key:i,value:n})}),r=r.sort((t,n)=>t.key-n.key),r},Pe=e=>re(e).map(({key:r,value:t})=>({offset:`${r}%`,color:t})),ke=e=>{let o=e,{from:r="#1890ff",to:t="#1890ff",direction:n="to right"}=o,i=Dt(o,["from","to","direction"]);if(Object.keys(i).length!==0){let a=re(i).map(({key:d,value:_})=>`${_} ${d}%`).join(", ");return`linear-gradient(${n}, ${a})`}return`linear-gradient(${n}, ${r}, ${t})`},De=0,oe="progress",$e=new Map([["success","check"],["exception","close"]]),Oe=new Map([["normal","#108ee9"],["exception","#ff5500"],["success","#87d068"]]),Re=e=>`${e}%`,kt=(()=>{class e{get formatter(){return this.nzFormat||Re}get status(){return this.nzStatus||this.inferredStatus}get strokeWidth(){return this.nzStrokeWidth||(this.nzType==="line"&&this.nzSize!=="small"?8:6)}get isCircleStyle(){return this.nzType==="circle"||this.nzType==="dashboard"}constructor(t,n,i){this.cdr=t,this.nzConfigService=n,this.directionality=i,this._nzModuleName=oe,this.nzShowInfo=!0,this.nzWidth=132,this.nzStrokeColor=void 0,this.nzSize="default",this.nzPercent=0,this.nzType="line",this.nzGapPosition="top",this.nzStrokeLinecap="round",this.nzSteps=0,this.steps=[],this.lineGradient=null,this.isGradient=!1,this.isSteps=!1,this.gradientId=De++,this.progressCirclePath=[],this.trailPathStyle=null,this.dir="ltr",this.cachedStatus="normal",this.inferredStatus="normal",this.destroy$=new G}ngOnChanges(t){let{nzSteps:n,nzGapPosition:i,nzStrokeLinecap:o,nzStrokeColor:a,nzGapDegree:d,nzType:_,nzStatus:m,nzPercent:x,nzSuccessPercent:T,nzStrokeWidth:u}=t;m&&(this.cachedStatus=this.nzStatus||this.cachedStatus),(x||T)&&(parseInt(this.nzPercent.toString(),10)>=100?(Pt(this.nzSuccessPercent)&&this.nzSuccessPercent>=100||this.nzSuccessPercent===void 0)&&(this.inferredStatus="success"):this.inferredStatus=this.cachedStatus),(m||x||T||a)&&this.updateIcon(),a&&this.setStrokeColor(),(i||o||d||_||x||a||a)&&this.getCirclePaths(),(x||n||u)&&(this.isSteps=this.nzSteps>0,this.isSteps&&this.getSteps())}ngOnInit(){this.nzConfigService.getConfigChangeEventForComponent(oe).pipe(I(this.destroy$)).subscribe(()=>{this.updateIcon(),this.setStrokeColor(),this.getCirclePaths()}),this.directionality.change?.pipe(I(this.destroy$)).subscribe(t=>{this.dir=t,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}updateIcon(){let t=$e.get(this.status);this.icon=t?t+(this.isCircleStyle?"-o":"-circle-fill"):""}getSteps(){let t=Math.floor(this.nzSteps*(this.nzPercent/100)),n=this.nzSize==="small"?2:14,i=[];for(let o=0;o<this.nzSteps;o++){let a;o<=t-1&&(a=this.nzStrokeColor);let d={backgroundColor:`${a}`,width:`${n}px`,height:`${this.strokeWidth}px`};i.push(d)}this.steps=i}getCirclePaths(){if(!this.isCircleStyle)return;let t=Pt(this.nzSuccessPercent)?[this.nzSuccessPercent,this.nzPercent]:[this.nzPercent],n=50-this.strokeWidth/2,i=this.nzGapPosition||(this.nzType==="circle"?"top":"bottom"),o=Math.PI*2*n,a=this.nzGapDegree||(this.nzType==="circle"?0:75),d=0,_=-n,m=0,x=n*-2;switch(i){case"left":d=-n,_=0,m=n*2,x=0;break;case"right":d=n,_=0,m=n*-2,x=0;break;case"bottom":_=n,x=n*2;break;default:}this.pathString=`M 50,50 m ${d},${_}
       a ${n},${n} 0 1 1 ${m},${-x}
       a ${n},${n} 0 1 1 ${-m},${x}`,this.trailPathStyle={strokeDasharray:`${o-a}px ${o}px`,strokeDashoffset:`-${a/2}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s"},this.progressCirclePath=t.map((T,u)=>{let y=t.length===2&&u===0;return{stroke:this.isGradient&&!y?`url(#gradient-${this.gradientId})`:null,strokePathStyle:{stroke:this.isGradient?null:y?Oe.get("success"):this.nzStrokeColor,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s",strokeDasharray:`${(T||0)/100*(o-a)}px ${o}px`,strokeDashoffset:`-${a/2}px`}}}).reverse()}setStrokeColor(){let t=this.nzStrokeColor,n=this.isGradient=!!t&&typeof t!="string";n&&!this.isCircleStyle?this.lineGradient=ke(t):n&&this.isCircleStyle?this.circleGradient=Pe(this.nzStrokeColor):(this.lineGradient=null,this.circleGradient=[])}static{this.\u0275fac=function(n){return new(n||e)(w(it),w(Yt),w(Tt))}}static{this.\u0275cmp=A({type:e,selectors:[["nz-progress"]],inputs:{nzShowInfo:"nzShowInfo",nzWidth:"nzWidth",nzStrokeColor:"nzStrokeColor",nzSize:"nzSize",nzFormat:"nzFormat",nzSuccessPercent:[v.HasDecoratorInputTransform,"nzSuccessPercent","nzSuccessPercent",zt],nzPercent:[v.HasDecoratorInputTransform,"nzPercent","nzPercent",X],nzStrokeWidth:[v.HasDecoratorInputTransform,"nzStrokeWidth","nzStrokeWidth",zt],nzGapDegree:[v.HasDecoratorInputTransform,"nzGapDegree","nzGapDegree",zt],nzStatus:"nzStatus",nzType:"nzType",nzGapPosition:"nzGapPosition",nzStrokeLinecap:"nzStrokeLinecap",nzSteps:[v.HasDecoratorInputTransform,"nzSteps","nzSteps",X]},exportAs:["nzProgress"],standalone:!0,features:[ct,tt,Q],decls:5,vars:17,consts:[["progressInfoTemplate",""],[3,"ngClass"],[1,"ant-progress-inner",3,"width","height","fontSize","ant-progress-circle-gradient"],[1,"ant-progress-text"],["nz-icon","",3,"nzType"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],[1,"ant-progress-steps-outer"],[1,"ant-progress-steps-item",3,"ngStyle"],[3,"ngTemplateOutlet"],[1,"ant-progress-outer"],[1,"ant-progress-inner"],[1,"ant-progress-bg"],[1,"ant-progress-success-bg",3,"width","border-radius","height"],[1,"ant-progress-success-bg"],["viewBox","0 0 100 100",1,"ant-progress-circle"],["stroke","#f3f3f3","fill-opacity","0",1,"ant-progress-circle-trail",3,"ngStyle"],["fill-opacity","0",1,"ant-progress-circle-path",3,"ngStyle"],["x1","100%","y1","0%","x2","0%","y2","0%",3,"id"]],template:function(n,i){n&1&&(c(0,ze,1,1,"ng-template",null,0,F),f(2,"div",1),c(3,Se,3,1,"div")(4,Ue,7,13,"div",2),g()),n&2&&(p(2),L("ant-progress-line",i.nzType==="line")("ant-progress-small",i.nzSize==="small")("ant-progress-default",i.nzSize==="default")("ant-progress-show-info",i.nzShowInfo)("ant-progress-circle",i.isCircleStyle)("ant-progress-steps",i.isSteps)("ant-progress-rtl",i.dir==="rtl"),l("ngClass","ant-progress ant-progress-status-"+i.status),p(),h(3,i.nzType==="line"?3:-1),p(),h(4,i.isCircleStyle?4:-1))},dependencies:[yt,xt,Qt,Zt,ut,ot,ht],encapsulation:2,changeDetection:0})}}return D([R()],e.prototype,"nzShowInfo",void 0),D([R()],e.prototype,"nzStrokeColor",void 0),D([R()],e.prototype,"nzSize",void 0),D([R()],e.prototype,"nzStrokeWidth",void 0),D([R()],e.prototype,"nzGapDegree",void 0),D([R()],e.prototype,"nzGapPosition",void 0),D([R()],e.prototype,"nzStrokeLinecap",void 0),e})(),se=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=lt({type:e})}static{this.\u0275inj=at({imports:[kt]})}}return e})();var Me=["file"],je=["nz-upload-btn",""],le=["*"],rt=e=>({$implicit:e}),Ge=()=>({opacity:.5,"pointer-events":"none"});function Ve(e,r){}function Ae(e,r){if(e&1&&(f(0,"div",13),c(1,Ve,0,0,"ng-template",14),g()),e&2){let t=s(2).$implicit,n=z(5);L("ant-upload-list-item-file",!t.isUploading),p(),l("ngTemplateOutlet",n)("ngTemplateOutletContext",O(4,rt,t))}}function Be(e,r){if(e&1&&C(0,"img",16),e&2){let t=s(3).$implicit;l("src",t.thumbUrl||t.url,nt),S("alt",t.name)}}function He(e,r){}function We(e,r){if(e&1&&c(0,He,0,0,"ng-template",14),e&2){let t=s(3).$implicit,n=z(5);l("ngTemplateOutlet",n)("ngTemplateOutletContext",O(2,rt,t))}}function qe(e,r){if(e&1){let t=P();f(0,"a",15),U("click",function(i){b(t);let o=s(2).$implicit,a=s();return N(a.handlePreview(o,i))}),c(1,Be,1,2,"img",16)(2,We,1,4),g()}if(e&2){let t=s(2).$implicit;L("ant-upload-list-item-file",!t.isImageUrl),l("href",t.url||t.thumbUrl,nt),p(),h(1,t.isImageUrl?1:2)}}function Ze(e,r){}function Qe(e,r){if(e&1&&(f(0,"div",17),c(1,Ze,0,0,"ng-template",14),g()),e&2){let t=s(2).$implicit,n=z(5);p(),l("ngTemplateOutlet",n)("ngTemplateOutletContext",O(2,rt,t))}}function Xe(e,r){if(e&1&&c(0,Ae,2,6)(1,qe,3,4)(2,Qe,2,4),e&2){let t,n=s().$implicit;h(0,(t=n.iconType)==="uploading"?0:t==="thumbnail"?1:2)}}function Ye(e,r){e&1&&C(0,"span",18)}function Je(e,r){if(e&1&&C(0,"span",19),e&2){let t=s(3).$implicit;l("nzType",t.isImageUrl?"picture":"file")}}function Ke(e,r){if(e&1&&c(0,Ye,1,0,"span",18)(1,Je,1,1),e&2){let t=s(2).$implicit;h(0,t.isUploading?0:1)}}function tn(e,r){if(e&1&&q(0),e&2){let t=s(5);Z(" ",t.locale.uploading," ")}}function en(e,r){if(e&1&&C(0,"span",19),e&2){let t=s(3).$implicit;l("nzType",t.isImageUrl?"picture":"file")}}function nn(e,r){if(e&1&&c(0,tn,1,1)(1,en,1,1),e&2){let t=s(2).$implicit;h(0,t.isUploading?0:1)}}function on(e,r){if(e&1&&C(0,"span",20),e&2){let t=s(2).$implicit;l("nzType",t.isUploading?"loading":"paper-clip")}}function rn(e,r){if(e&1&&c(0,Ke,2,1)(1,nn,2,1)(2,on,1,1),e&2){let t,n=s(3);h(0,(t=n.listType)==="picture"?0:t==="picture-card"?1:2)}}function sn(e,r){}function an(e,r){if(e&1&&c(0,sn,0,0,"ng-template",14),e&2){let t=s().$implicit,n=s(2);l("ngTemplateOutlet",n.iconRender)("ngTemplateOutletContext",O(2,rt,t))}}function ln(e,r){if(e&1&&c(0,rn,3,1)(1,an,1,4),e&2){let t=s(2);h(0,t.iconRender?1:0)}}function pn(e,r){if(e&1){let t=P();f(0,"button",22),U("click",function(i){b(t);let o=s(2).$implicit,a=s();return N(a.handleRemove(o,i))}),C(1,"span",23),g()}if(e&2){let t=s(3);S("title",t.locale.removeFile)}}function cn(e,r){if(e&1&&c(0,pn,2,1,"button",21),e&2){let t=s(2);h(0,t.icons.showRemoveIcon?0:-1)}}function dn(e,r){if(e&1){let t=P();f(0,"button",22),U("click",function(){b(t);let i=s(2).$implicit,o=s();return N(o.handleDownload(i))}),C(1,"span",24),g()}if(e&2){let t=s(3);S("title",t.locale.downloadFile)}}function mn(e,r){if(e&1&&c(0,dn,2,1,"button",21),e&2){let t=s().$implicit;h(0,t.showDownload?0:-1)}}function _n(e,r){}function un(e,r){}function hn(e,r){if(e&1&&(f(0,"span"),c(1,_n,0,0,"ng-template",10)(2,un,0,0,"ng-template",10),g()),e&2){s(2);let t=z(7),n=z(9),i=s();St("ant-upload-list-item-card-actions ",i.listType==="picture"?"picture":"",""),p(),l("ngTemplateOutlet",n),p(),l("ngTemplateOutlet",t)}}function fn(e,r){if(e&1&&c(0,hn,3,5,"span",6),e&2){let t=s(2);h(0,t.listType!=="picture-card"?0:-1)}}function gn(e,r){if(e&1){let t=P();f(0,"a",26),U("click",function(i){b(t);let o=s(2).$implicit,a=s();return N(a.handlePreview(o,i))}),q(1),g()}if(e&2){let t=s(2).$implicit;l("href",t.url,nt),S("title",t.name)("download",t.linkProps&&t.linkProps.download),p(),Z(" ",t.name," ")}}function zn(e,r){if(e&1){let t=P();f(0,"span",27),U("click",function(i){b(t);let o=s(2).$implicit,a=s();return N(a.handlePreview(o,i))}),q(1),g()}if(e&2){let t=s(2).$implicit;S("title",t.name),p(),Z(" ",t.name," ")}}function Cn(e,r){}function xn(e,r){if(e&1&&c(0,gn,2,4,"a",25)(1,zn,2,2)(2,Cn,0,0,"ng-template",10),e&2){let t=s().$implicit,n=z(11);h(0,t.url?0:1),p(2),l("ngTemplateOutlet",n)}}function yn(e,r){}function Tn(e,r){}function vn(e,r){if(e&1){let t=P();f(0,"a",29),U("click",function(i){b(t);let o=s(2).$implicit,a=s();return N(a.handlePreview(o,i))}),C(1,"span",30),g()}if(e&2){let t=s(2).$implicit,n=s();l("href",t.url||t.thumbUrl,nt)("ngStyle",t.url||t.thumbUrl?null:Nt(3,Ge)),S("title",n.locale.previewFile)}}function wn(e,r){}function Sn(e,r){if(e&1&&c(0,wn,0,0,"ng-template",10),e&2){s(2);let t=z(9);l("ngTemplateOutlet",t)}}function Fn(e,r){}function bn(e,r){if(e&1&&(f(0,"span",11),c(1,vn,2,4,"a",28)(2,Sn,1,1,null,10)(3,Fn,0,0,"ng-template",10),g()),e&2){let t=s().$implicit,n=z(7),i=s();p(),h(1,i.icons.showPreviewIcon?1:-1),p(),h(2,t.status==="done"?2:-1),p(),l("ngTemplateOutlet",n)}}function Nn(e,r){if(e&1&&(f(0,"div",12),C(1,"nz-progress",31),g()),e&2){let t=s().$implicit;p(),l("nzPercent",t.percent)("nzShowInfo",!1)("nzStrokeWidth",2)}}function In(e,r){if(e&1&&(f(0,"div")(1,"div",7),c(2,Xe,3,1,"ng-template",null,0,F)(4,ln,2,1,"ng-template",null,1,F)(6,cn,1,1,"ng-template",null,2,F)(8,mn,1,1,"ng-template",null,3,F)(10,fn,1,1,"ng-template",null,4,F)(12,xn,3,2,"ng-template",null,5,F),f(14,"div",8)(15,"span",9),c(16,yn,0,0,"ng-template",10)(17,Tn,0,0,"ng-template",10),g()(),c(18,bn,4,3,"span",11)(19,Nn,2,3,"div",12),g()()),e&2){let t=r.$implicit,n=z(3),i=z(13),o=s();St("ant-upload-list-",o.listType,"-container"),p(),Et("ant-upload-list-item ant-upload-list-item-",t.status," ant-upload-list-item-list-type-",o.listType,""),l("@itemState",void 0)("nzTooltipTitle",t.status==="error"?t.message:null),S("data-key",t.key),p(15),l("ngTemplateOutlet",n),p(),l("ngTemplateOutlet",i),p(),h(18,o.listType==="picture-card"&&!t.isUploading?18:-1),p(),h(19,t.isUploading?19:-1)}}var Un=["uploadComp"],Ln=["listComp"],Pn=()=>[];function kn(e,r){if(e&1&&C(0,"nz-upload-list",6,3),e&2){let t=s(2);$("display",t.nzShowUploadList?"":"none"),l("locale",t.locale)("listType",t.nzListType)("items",t.nzFileList||Nt(13,Pn))("icons",t.nzShowUploadList)("iconRender",t.nzIconRender)("previewFile",t.nzPreviewFile)("previewIsImage",t.nzPreviewIsImage)("onPreview",t.nzPreview)("onRemove",t.onRemove)("onDownload",t.nzDownload)("dir",t.dir)}}function Dn(e,r){e&1&&Gt(0)}function $n(e,r){if(e&1&&c(0,Dn,1,0,"ng-container",7),e&2){let t=s(2);l("ngTemplateOutlet",t.nzFileListRender)("ngTemplateOutletContext",O(2,rt,t.nzFileList))}}function On(e,r){if(e&1&&c(0,kn,2,14,"nz-upload-list",5)(1,$n,1,4,"ng-container"),e&2){let t=s();h(0,t.locale&&!t.nzFileListRender?0:-1),p(),h(1,t.nzFileListRender?1:-1)}}function Rn(e,r){e&1&&bt(0)}function En(e,r){}function Mn(e,r){if(e&1&&(f(0,"div",8)(1,"div",9,4),c(3,En,0,0,"ng-template",10),g()()),e&2){let t=s(),n=z(3);$("display",t.nzShowButton?"":"none"),l("ngClass",t.classList),p(),l("options",t._btnOptions),p(2),l("ngTemplateOutlet",n)}}function jn(e,r){}function Gn(e,r){}function Vn(e,r){if(e&1){let t=P();f(0,"div",11),U("drop",function(i){b(t);let o=s();return N(o.fileDrop(i))})("dragover",function(i){b(t);let o=s();return N(o.fileDrop(i))})("dragleave",function(i){b(t);let o=s();return N(o.fileDrop(i))}),f(1,"div",12,4)(3,"div",13),c(4,jn,0,0,"ng-template",10),g()()(),c(5,Gn,0,0,"ng-template",10)}if(e&2){let t=s(),n=z(1),i=z(3);l("ngClass",t.classList),p(),l("options",t._btnOptions),p(3),l("ngTemplateOutlet",i),p(),l("ngTemplateOutlet",n)}}function An(e,r){}function Bn(e,r){}function Hn(e,r){if(e&1&&c(0,An,0,0,"ng-template",10)(1,Bn,0,0,"ng-template",10),e&2){s(2);let t=z(1),n=z(5);l("ngTemplateOutlet",t),p(),l("ngTemplateOutlet",n)}}function Wn(e,r){}function qn(e,r){}function Zn(e,r){if(e&1&&c(0,Wn,0,0,"ng-template",10)(1,qn,0,0,"ng-template",10),e&2){s(2);let t=z(1),n=z(5);l("ngTemplateOutlet",n),p(),l("ngTemplateOutlet",t)}}function Qn(e,r){if(e&1&&c(0,Hn,2,2)(1,Zn,2,2),e&2){let t=s();h(0,t.nzListType==="picture-card"?0:1)}}var Xn=(()=>{class e{onClick(){this.options.disabled||!this.options.openFileDialogOnClick||this.file.nativeElement.click()}onFileDrop(t){if(this.options.disabled||t.type==="dragover"){t.preventDefault();return}if(this.options.directory)this.traverseFileTree(t.dataTransfer.items);else{let n=Array.prototype.slice.call(t.dataTransfer.files).filter(i=>this.attrAccept(i,this.options.accept));n.length&&this.uploadFiles(n)}t.preventDefault()}onChange(t){if(this.options.disabled)return;let n=t.target;this.uploadFiles(n.files),n.value=""}traverseFileTree(t){let n=(i,o)=>{i.isFile?i.file(a=>{this.attrAccept(a,this.options.accept)&&this.uploadFiles([a])}):i.isDirectory&&i.createReader().readEntries(d=>{for(let _ of d)n(_,`${o}${i.name}/`)})};for(let i of t)n(i.webkitGetAsEntry(),"")}attrAccept(t,n){if(t&&n){let i=Array.isArray(n)?n:n.split(","),o=`${t.name}`,a=`${t.type}`,d=a.replace(/\/.*$/,"");return i.some(_=>{let m=_.trim();return m.charAt(0)==="."?o.toLowerCase().indexOf(m.toLowerCase(),o.toLowerCase().length-m.toLowerCase().length)!==-1:/\/\*$/.test(m)?d===m.replace(/\/.*$/,""):a===m})}return!0}attachUid(t){return t.uid||(t.uid=Math.random().toString(36).substring(2)),t}uploadFiles(t){let n=M(Array.prototype.slice.call(t));this.options.filters&&this.options.filters.forEach(i=>{n=n.pipe(V(o=>{let a=i.fn(o);return a instanceof k?a:M(a)}))}),n.subscribe(i=>{i.forEach(o=>{this.attachUid(o),this.upload(o,i)})},i=>{gt("Unhandled upload filter error",i)})}upload(t,n){if(!this.options.beforeUpload)return this.post(t);let i=this.options.beforeUpload(t,n);if(i instanceof k)i.subscribe(o=>{let a=Object.prototype.toString.call(o);a==="[object File]"||a==="[object Blob]"?(this.attachUid(o),this.post(o)):typeof o=="boolean"&&o!==!1&&this.post(t)},o=>{gt("Unhandled upload beforeUpload error",o)});else if(i!==!1)return this.post(t)}post(t){if(this.destroy)return;let n=M(t),i,o=this.options,{uid:a}=t,{action:d,data:_,headers:m,transformFile:x}=o,T={action:typeof d=="string"?d:"",name:o.name,headers:m,file:t,postFile:t,data:_,withCredentials:o.withCredentials,onProgress:o.onProgress?u=>{o.onProgress(u,t)}:void 0,onSuccess:(u,y)=>{this.clean(a),o.onSuccess(u,t,y)},onError:u=>{this.clean(a),o.onError(u,t)}};if(typeof d=="function"){let u=d(t);u instanceof k?n=n.pipe(V(()=>u),Y(y=>(T.action=y,t))):T.action=u}if(typeof x=="function"){let u=x(t);n=n.pipe(V(()=>u instanceof k?u:M(u)),Ot(y=>i=y))}if(typeof _=="function"){let u=_(t);u instanceof k?n=n.pipe(V(()=>u),Y(y=>(T.data=y,i??t))):T.data=u}if(typeof m=="function"){let u=m(t);u instanceof k?n=n.pipe(V(()=>u),Y(y=>(T.headers=y,i??t))):T.headers=u}n.subscribe(u=>{T.postFile=u;let y=(o.customRequest||this.xhr).call(this,T);y instanceof vt||gt("Must return Subscription type in '[nzCustomRequest]' property"),this.reqs[a]=y,o.onStart(t)})}xhr(t){let n=new FormData;t.data&&Object.keys(t.data).map(o=>{n.append(o,t.data[o])}),n.append(t.name,t.postFile),t.headers||(t.headers={}),t.headers["X-Requested-With"]!==null?t.headers["X-Requested-With"]="XMLHttpRequest":delete t.headers["X-Requested-With"];let i=new At("POST",t.action,n,{reportProgress:!0,withCredentials:t.withCredentials,headers:new Vt(t.headers)});return this.http.request(i).subscribe(o=>{o.type===Bt.UploadProgress?(o.total>0&&(o.percent=o.loaded/o.total*100),t.onProgress(o,t.file)):o instanceof Ht&&t.onSuccess(o.body,t.file,o)},o=>{this.abort(t.file),t.onError(o,t.file)})}clean(t){let n=this.reqs[t];n instanceof vt&&n.unsubscribe(),delete this.reqs[t]}abort(t){t?this.clean(t&&t.uid):Object.keys(this.reqs).forEach(n=>this.clean(n))}constructor(t,n){if(this.ngZone=t,this.elementRef=n,this.reqs={},this.destroy=!1,this.destroy$=new G,this.http=K(Wt,{optional:!0}),!this.http)throw new Error("Not found 'HttpClient', You can configure 'HttpClient' with 'provideHttpClient()' in your root module.")}ngOnInit(){this.ngZone.runOutsideAngular(()=>{J(this.elementRef.nativeElement,"click").pipe(I(this.destroy$)).subscribe(()=>this.onClick()),J(this.elementRef.nativeElement,"keydown").pipe(I(this.destroy$)).subscribe(t=>{this.options.disabled||(t.key==="Enter"||t.keyCode===13)&&this.onClick()})})}ngOnDestroy(){this.destroy=!0,this.destroy$.next(),this.abort()}static{this.\u0275fac=function(n){return new(n||e)(w(pt),w(Rt))}}static{this.\u0275cmp=A({type:e,selectors:[["","nz-upload-btn",""]],viewQuery:function(n,i){if(n&1&&dt(Me,7),n&2){let o;mt(o=_t())&&(i.file=o.first)}},hostAttrs:[1,"ant-upload"],hostVars:4,hostBindings:function(n,i){n&1&&U("drop",function(a){return i.onFileDrop(a)})("dragover",function(a){return i.onFileDrop(a)}),n&2&&(S("tabindex","0")("role","button"),L("ant-upload-disabled",i.options.disabled))},inputs:{options:"options"},exportAs:["nzUploadBtn"],standalone:!0,features:[Q],attrs:je,ngContentSelectors:le,decls:3,vars:6,consts:[["file",""],["type","file",3,"change","multiple"]],template:function(n,i){if(n&1){let o=P();Ft(),f(0,"input",1,0),U("change",function(d){return b(o),N(i.onChange(d))}),g(),bt(2)}n&2&&($("display","none"),l("multiple",i.options.multiple),S("accept",i.options.accept)("directory",i.options.directory?"directory":null)("webkitdirectory",i.options.directory?"webkitdirectory":null))},encapsulation:2})}}return e})(),ae=e=>!!e&&e.indexOf("image/")===0,E=200,pe=(()=>{class e{get showPic(){return this.listType==="picture"||this.listType==="picture-card"}set items(t){this.list=t}genErr(t){return t.response&&typeof t.response=="string"?t.response:t.error&&t.error.statusText||this.locale.uploadError}extname(t){let n=t.split("/"),o=n[n.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(o)||[""])[0]}isImageUrl(t){if(ae(t.type))return!0;let n=t.thumbUrl||t.url||"";if(!n)return!1;let i=this.extname(n);return/^data:image\//.test(n)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg)$/i.test(i)?!0:/^data:/.test(n)?!1:!i}getIconType(t){return this.showPic?t.isUploading||!t.thumbUrl&&!t.url?"uploading":"thumbnail":""}previewImage(t){if(!ae(t.type)||!this.platform.isBrowser)return M("");let n=this.document.createElement("canvas");n.width=E,n.height=E,n.style.cssText=`position: fixed; left: 0; top: 0; width: ${E}px; height: ${E}px; z-index: 9999; display: none;`,this.document.body.appendChild(n);let i=n.getContext("2d"),o=new Image,a=URL.createObjectURL(t);return o.src=a,J(o,"load").pipe(Y(()=>{let{width:d,height:_}=o,m=E,x=E,T=0,u=0;d<_?(x=_*(E/d),u=-(x-m)/2):(m=d*(E/_),T=-(m-x)/2);try{i.drawImage(o,T,u,m,x)}catch{}let y=n.toDataURL();return this.document.body.removeChild(n),URL.revokeObjectURL(a),y}))}genThumb(){if(!this.platform.isBrowser)return;let t=window;!this.showPic||typeof document>"u"||typeof t>"u"||!t.FileReader||!t.File||this.list.filter(n=>n.originFileObj instanceof File&&n.thumbUrl===void 0).forEach(n=>{n.thumbUrl="";let i=(this.previewFile?this.previewFile(n):this.previewImage(n.originFileObj)).pipe(I(this.destroy$));this.ngZone.runOutsideAngular(()=>{i.subscribe(o=>{this.ngZone.run(()=>{n.thumbUrl=o,this.detectChanges()})})})})}showDownload(t){return!!(this.icons.showDownloadIcon&&t.status==="done")}fixData(){this.list.forEach(t=>{t.isUploading=t.status==="uploading",t.message=this.genErr(t),t.linkProps=typeof t.linkProps=="string"?JSON.parse(t.linkProps):t.linkProps,t.isImageUrl=this.previewIsImage?this.previewIsImage(t):this.isImageUrl(t),t.iconType=this.getIconType(t),t.showDownload=this.showDownload(t)})}handlePreview(t,n){if(this.onPreview)return n.preventDefault(),this.onPreview(t)}handleRemove(t,n){n.preventDefault(),this.onRemove&&this.onRemove(t)}handleDownload(t){typeof this.onDownload=="function"?this.onDownload(t):t.url&&window.open(t.url)}constructor(t,n,i){this.cdr=t,this.ngZone=n,this.platform=i,this.list=[],this.locale={},this.iconRender=null,this.dir="ltr",this.document=K(It),this.destroy$=new G}detectChanges(){this.fixData(),this.cdr.detectChanges()}ngOnChanges(){this.fixData(),this.genThumb()}ngOnDestroy(){this.destroy$.next()}static{this.\u0275fac=function(n){return new(n||e)(w(it),w(pt),w(Ct))}}static{this.\u0275cmp=A({type:e,selectors:[["nz-upload-list"]],hostAttrs:[1,"ant-upload-list"],hostVars:8,hostBindings:function(n,i){n&2&&L("ant-upload-list-rtl",i.dir==="rtl")("ant-upload-list-text",i.listType==="text")("ant-upload-list-picture",i.listType==="picture")("ant-upload-list-picture-card",i.listType==="picture-card")},inputs:{locale:"locale",listType:"listType",items:"items",icons:"icons",onPreview:"onPreview",onRemove:"onRemove",onDownload:"onDownload",previewFile:"previewFile",previewIsImage:"previewIsImage",iconRender:"iconRender",dir:"dir"},exportAs:["nzUploadList"],standalone:!0,features:[tt,Q],decls:2,vars:0,consts:[["icon",""],["iconNode",""],["removeIcon",""],["downloadIcon",""],["downloadOrDelete",""],["preview",""],[3,"class"],["nz-tooltip","",3,"nzTooltipTitle"],[1,"ant-upload-list-item-info"],[1,"ant-upload-span"],[3,"ngTemplateOutlet"],[1,"ant-upload-list-item-actions"],[1,"ant-upload-list-item-progress"],[1,"ant-upload-list-item-thumbnail"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-thumbnail",3,"click","href"],[1,"ant-upload-list-item-image",3,"src"],[1,"ant-upload-text-icon"],["nz-icon","","nzType","loading"],["nz-icon","","nzTheme","twotone",3,"nzType"],["nz-icon","",3,"nzType"],["type","button","nz-button","","nzType","text","nzSize","small",1,"ant-upload-list-item-card-actions-btn"],["type","button","nz-button","","nzType","text","nzSize","small",1,"ant-upload-list-item-card-actions-btn",3,"click"],["nz-icon","","nzType","delete"],["nz-icon","","nzType","download"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-name",3,"href"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-name",3,"click","href"],[1,"ant-upload-list-item-name",3,"click"],["target","_blank","rel","noopener noreferrer",3,"href","ngStyle"],["target","_blank","rel","noopener noreferrer",3,"click","href","ngStyle"],["nz-icon","","nzType","eye"],["nzType","line",3,"nzPercent","nzShowInfo","nzStrokeWidth"]],template:function(n,i){n&1&&H(0,In,20,14,"div",6,B),n&2&&W(i.list)},dependencies:[te,Kt,ot,yt,xt,ie,ne,ee,ht,se,kt],encapsulation:2,data:{animation:[qt("itemState",[Lt(":enter",[ft({height:"0",width:"0",opacity:0}),Ut(150,ft({height:"*",width:"*",opacity:1}))]),Lt(":leave",[Ut(150,ft({height:"0",width:"0",opacity:0}))])])]},changeDetection:0})}}return e})(),Yn=(()=>{class e{set nzShowUploadList(t){this._showUploadList=typeof t=="boolean"?Xt(t):t}get nzShowUploadList(){return this._showUploadList}zipOptions(){typeof this.nzShowUploadList=="boolean"&&this.nzShowUploadList&&(this.nzShowUploadList={showPreviewIcon:!0,showRemoveIcon:!0,showDownloadIcon:!0});let t=this.nzFilter.slice();if(this.nzMultiple&&this.nzLimit>0&&t.findIndex(n=>n.name==="limit")===-1&&t.push({name:"limit",fn:n=>n.slice(-this.nzLimit)}),this.nzSize>0&&t.findIndex(n=>n.name==="size")===-1&&t.push({name:"size",fn:n=>n.filter(i=>i.size/1024<=this.nzSize)}),this.nzFileType&&this.nzFileType.length>0&&t.findIndex(n=>n.name==="type")===-1){let n=this.nzFileType.split(",");t.push({name:"type",fn:i=>i.filter(o=>~n.indexOf(o.type))})}return this._btnOptions={disabled:this.nzDisabled,accept:this.nzAccept,action:this.nzAction,directory:this.nzDirectory,openFileDialogOnClick:this.nzOpenFileDialogOnClick,beforeUpload:this.nzBeforeUpload,customRequest:this.nzCustomRequest,data:this.nzData,headers:this.nzHeaders,name:this.nzName,multiple:this.nzMultiple,withCredentials:this.nzWithCredentials,filters:t,transformFile:this.nzTransformFile,onStart:this.onStart,onProgress:this.onProgress,onSuccess:this.onSuccess,onError:this.onError},this}constructor(t,n,i,o){this.ngZone=t,this.cdr=n,this.i18n=i,this.directionality=o,this.destroy$=new G,this.dir="ltr",this.nzType="select",this.nzLimit=0,this.nzSize=0,this.nzDirectory=!1,this.nzOpenFileDialogOnClick=!0,this.nzFilter=[],this.nzFileList=[],this.nzDisabled=!1,this.nzListType="text",this.nzMultiple=!1,this.nzName="file",this._showUploadList=!0,this.document=K(It),this.nzShowButton=!0,this.nzWithCredentials=!1,this.nzIconRender=null,this.nzFileListRender=null,this.nzChange=new wt,this.nzFileListChange=new wt,this.platform=K(Ct),this.onStart=a=>{this.nzFileList||(this.nzFileList=[]);let d=this.fileToObject(a);d.status="uploading",this.nzFileList=this.nzFileList.concat(d),this.nzFileListChange.emit(this.nzFileList),this.nzChange.emit({file:d,fileList:this.nzFileList,type:"start"}),this.detectChangesList()},this.onProgress=(a,d)=>{let _=this.nzFileList,m=this.getFileItem(d,_);m.percent=a.percent,this.nzChange.emit({event:a,file:st({},m),fileList:this.nzFileList,type:"progress"}),this.detectChangesList()},this.onSuccess=(a,d)=>{let _=this.nzFileList,m=this.getFileItem(d,_);m.status="done",m.response=a,this.nzChange.emit({file:st({},m),fileList:_,type:"success"}),this.detectChangesList()},this.onError=(a,d)=>{let _=this.nzFileList,m=this.getFileItem(d,_);m.error=a,m.status="error",this.nzChange.emit({file:st({},m),fileList:_,type:"error"}),this.detectChangesList()},this.onRemove=a=>{this.uploadComp.abort(a),a.status="removed";let d=typeof this.nzRemove=="function"?this.nzRemove(a):this.nzRemove==null?!0:this.nzRemove;(d instanceof k?d:M(d)).pipe($t(_=>_)).subscribe(()=>{this.nzFileList=this.removeFileItem(a,this.nzFileList),this.nzChange.emit({file:a,fileList:this.nzFileList,type:"removed"}),this.nzFileListChange.emit(this.nzFileList),this.cdr.detectChanges()})},this.prefixCls="ant-upload",this.classList=[]}fileToObject(t){return{lastModified:t.lastModified,lastModifiedDate:t.lastModifiedDate,name:t.filename||t.name,size:t.size,type:t.type,uid:t.uid,response:t.response,error:t.error,percent:0,originFileObj:t}}getFileItem(t,n){return n.filter(i=>i.uid===t.uid)[0]}removeFileItem(t,n){return n.filter(i=>i.uid!==t.uid)}fileDrop(t){t.type!==this.dragState&&(this.dragState=t.type,this.setClassMap())}detectChangesList(){this.cdr.detectChanges(),this.listComp?.detectChanges()}setClassMap(){let t=[];this.nzType==="drag"?(this.nzFileList.some(n=>n.status==="uploading")&&t.push(`${this.prefixCls}-drag-uploading`),this.dragState==="dragover"&&t.push(`${this.prefixCls}-drag-hover`)):t=[`${this.prefixCls}-select-${this.nzListType}`],this.classList=[this.prefixCls,`${this.prefixCls}-${this.nzType}`,...t,this.nzDisabled&&`${this.prefixCls}-disabled`||"",this.dir==="rtl"&&`${this.prefixCls}-rtl`||""].filter(n=>!!n),this.cdr.detectChanges()}ngOnInit(){this.dir=this.directionality.value,this.directionality.change?.pipe(I(this.destroy$)).subscribe(t=>{this.dir=t,this.setClassMap(),this.cdr.detectChanges()}),this.i18n.localeChange.pipe(I(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Upload"),this.detectChangesList()})}ngAfterViewInit(){this.platform.FIREFOX&&this.ngZone.runOutsideAngular(()=>J(this.document.body,"drop").pipe(I(this.destroy$)).subscribe(t=>{t.preventDefault(),t.stopPropagation()}))}ngOnChanges(){this.zipOptions().setClassMap()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(n){return new(n||e)(w(pt),w(it),w(Jt),w(Tt))}}static{this.\u0275cmp=A({type:e,selectors:[["nz-upload"]],viewQuery:function(n,i){if(n&1&&(dt(Un,5),dt(Ln,5)),n&2){let o;mt(o=_t())&&(i.uploadComp=o.first),mt(o=_t())&&(i.listComp=o.first)}},hostVars:2,hostBindings:function(n,i){n&2&&L("ant-upload-picture-card-wrapper",i.nzListType==="picture-card")},inputs:{nzType:"nzType",nzLimit:[v.HasDecoratorInputTransform,"nzLimit","nzLimit",X],nzSize:[v.HasDecoratorInputTransform,"nzSize","nzSize",X],nzFileType:"nzFileType",nzAccept:"nzAccept",nzAction:"nzAction",nzDirectory:[v.HasDecoratorInputTransform,"nzDirectory","nzDirectory",j],nzOpenFileDialogOnClick:[v.HasDecoratorInputTransform,"nzOpenFileDialogOnClick","nzOpenFileDialogOnClick",j],nzBeforeUpload:"nzBeforeUpload",nzCustomRequest:"nzCustomRequest",nzData:"nzData",nzFilter:"nzFilter",nzFileList:"nzFileList",nzDisabled:[v.HasDecoratorInputTransform,"nzDisabled","nzDisabled",j],nzHeaders:"nzHeaders",nzListType:"nzListType",nzMultiple:[v.HasDecoratorInputTransform,"nzMultiple","nzMultiple",j],nzName:"nzName",nzShowUploadList:"nzShowUploadList",nzShowButton:[v.HasDecoratorInputTransform,"nzShowButton","nzShowButton",j],nzWithCredentials:[v.HasDecoratorInputTransform,"nzWithCredentials","nzWithCredentials",j],nzRemove:"nzRemove",nzPreview:"nzPreview",nzPreviewFile:"nzPreviewFile",nzPreviewIsImage:"nzPreviewIsImage",nzTransformFile:"nzTransformFile",nzDownload:"nzDownload",nzIconRender:"nzIconRender",nzFileListRender:"nzFileListRender"},outputs:{nzChange:"nzChange",nzFileListChange:"nzFileListChange"},exportAs:["nzUpload"],standalone:!0,features:[ct,tt,Q],ngContentSelectors:le,decls:8,vars:1,consts:[["list",""],["con",""],["btn",""],["listComp",""],["uploadComp",""],[3,"display","locale","listType","items","icons","iconRender","previewFile","previewIsImage","onPreview","onRemove","onDownload","dir"],[3,"locale","listType","items","icons","iconRender","previewFile","previewIsImage","onPreview","onRemove","onDownload","dir"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["nz-upload-btn","",3,"options"],[3,"ngTemplateOutlet"],[3,"drop","dragover","dragleave","ngClass"],["nz-upload-btn","",1,"ant-upload-btn",3,"options"],[1,"ant-upload-drag-container"]],template:function(n,i){n&1&&(Ft(),c(0,On,2,2,"ng-template",null,0,F)(2,Rn,1,0,"ng-template",null,1,F)(4,Mn,4,5,"ng-template",null,2,F)(6,Vn,6,4)(7,Qn,2,1)),n&2&&(p(6),h(6,i.nzType==="drag"?6:7))},dependencies:[pe,ot,ut,Xn],encapsulation:2,changeDetection:0})}}return e})(),Gi=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=lt({type:e})}static{this.\u0275inj=at({imports:[Yn,pe]})}}return e})();export{kt as a,se as b,Yn as c,Gi as d};
